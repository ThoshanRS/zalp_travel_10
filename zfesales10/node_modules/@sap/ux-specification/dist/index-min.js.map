{
  "version": 3,
  "sources": ["../../types/src/index.ts", "../../types/src/common/page.ts", "../../types/src/common/types.ts", "../../types/src/common/Application.ts", "../../types/src/common/webapp/manifest/Manifest.ts", "../../types/src/common/webapp/manifest/sapUi5.ts", "../../types/src/apiTypes.ts", "../../types/src/v2/index.ts", "../../types/src/v2/controls/Action.ts", "../../types/src/v2/controls/Card.ts", "../../types/src/v2/controls/FilterBar.ts", "../../types/src/v2/controls/Table.ts", "../../types/src/v2/controls/AnalyticalListPageChart.ts", "../../types/src/v2/controls/ObjectPageHeader.ts", "../../types/src/v2/controls/ObjectPageSection.ts", "../../types/src/v2/controls/ObjectPageTable.ts", "../../types/src/v2/webapp/manifest/sapUiPageV2.ts", "../../types/src/v2/webapp/manifest/sapUi5.ts", "../../types/src/v2/overviewPage.ts", "../../types/src/v4/index.ts", "../../types/src/v4/controls/Table.ts", "../../types/src/v4/controls/ToolBar.ts", "../../types/src/v4/controls/ObjectPageHeaderSection.ts", "../../types/src/v4/controls/ObjectPageLayout.ts", "../../types/src/v4/controls/ObjectPageSection.ts", "../../types/src/v4/controls/ObjectPageTable.ts", "../../types/src/v4/webapp/manifest/sapUiPageV4.ts", "../../types/src/v4/webapp/manifest/sapUi5.ts", "../../types/src/v4/webapp/manifest/ManifestSettings.ts", "../../types/src/v4/pages/ObjectPageConfigV4.ts", "../../types/src/v4/pages/ListReportConfigV4.ts", "../../types/src/apiTypes.ts", "../../types/src/v2/index.ts", "../../types/src/v2/controls/Action.ts", "../../types/src/v2/controls/Card.ts", "../../types/src/v2/controls/FilterBar.ts", "../../types/src/v2/controls/Table.ts", "../../types/src/v2/controls/AnalyticalListPageChart.ts", "../../types/src/v2/controls/ObjectPageHeader.ts", "../../types/src/v2/controls/ObjectPageSection.ts", "../../types/src/v2/controls/ObjectPageTable.ts", "../../types/src/v2/webapp/manifest/sapUiPageV2.ts", "../../types/src/v2/webapp/manifest/sapUi5.ts", "../../types/src/v2/overviewPage.ts", "../../types/src/v4/index.ts", "../../types/src/v4/controls/Table.ts", "../../types/src/v4/controls/ToolBar.ts", "../../types/src/v4/controls/ObjectPageHeaderSection.ts", "../../types/src/v4/controls/ObjectPageLayout.ts", "../../types/src/v4/controls/ObjectPageSection.ts", "../../types/src/v4/controls/ObjectPageTable.ts", "../../types/src/v4/webapp/manifest/sapUiPageV4.ts", "../../types/src/v4/webapp/manifest/sapUi5.ts", "../../types/src/v4/webapp/manifest/ManifestSettings.ts", "../../types/src/v4/pages/ObjectPageConfigV4.ts", "../../types/src/v4/pages/ListReportConfigV4.ts", "../../types/src/index.ts", "../../../node_modules/deepmerge/dist/cjs.js", "../../../node_modules/@sap-ux/annotation-converter/src/utils.ts", "../../../node_modules/@sap-ux/annotation-converter/src/converter.ts", "../../../node_modules/@sap-ux/annotation-converter/src/writeback.ts", "../../../node_modules/@sap-ux/annotation-converter/src/index.ts", "../../../node_modules/@sap-ux/edmx-parser/src/utils.ts", "../../../node_modules/@sap-ux/edmx-parser/src/merger.ts", "../../../node_modules/sax/lib/sax.js", "../../../node_modules/xml-js/lib/array-helper.js", "../../../node_modules/xml-js/lib/options-helper.js", "../../../node_modules/xml-js/lib/xml2js.js", "../../../node_modules/xml-js/lib/xml2json.js", "../../../node_modules/xml-js/lib/js2xml.js", "../../../node_modules/xml-js/lib/json2xml.js", "../../../node_modules/xml-js/lib/index.js", "../../../node_modules/@sap-ux/edmx-parser/src/v2annotationsSupport.ts", "../../../node_modules/@sap-ux/edmx-parser/src/parser.ts", "../../../node_modules/@sap-ux/edmx-parser/src/index.ts", "../../../node_modules/@ui5/flexibility-utils/src/changeUtils.js", "../../../node_modules/@ui5/flexibility-utils/index.js", "../../../node_modules/ejs/lib/utils.js", "../../../node_modules/ejs/package.json", "../../../node_modules/ejs/lib/ejs.js", "../../../node_modules/lodash.unset/index.js", "../../../node_modules/uri-js/src/index.ts", "../../../node_modules/uri-js/src/schemes/urn-uuid.ts", "../../../node_modules/uri-js/src/schemes/urn.ts", "../../../node_modules/uri-js/src/schemes/mailto.ts", "../../../node_modules/uri-js/src/schemes/wss.ts", "../../../node_modules/uri-js/src/schemes/ws.ts", "../../../node_modules/uri-js/src/schemes/https.ts", "../../../node_modules/uri-js/src/schemes/http.ts", "../../../node_modules/uri-js/src/uri.ts", "../../../node_modules/uri-js/node_modules/punycode/punycode.es6.js", "../../../node_modules/uri-js/src/regexps-iri.ts", "../../../node_modules/uri-js/src/regexps-uri.ts", "../../../node_modules/uri-js/src/util.ts", "../../../node_modules/fast-deep-equal/index.js", "../../../node_modules/ajv/lib/compile/ucs2length.js", "../../../node_modules/ajv/lib/compile/util.js", "../../../node_modules/ajv/lib/compile/schema_obj.js", "../../../node_modules/json-schema-traverse/index.js", "../../../node_modules/ajv/lib/compile/resolve.js", "../../../node_modules/ajv/lib/compile/error_classes.js", "../../../node_modules/fast-json-stable-stringify/index.js", "../../../node_modules/ajv/lib/dotjs/validate.js", "../../../node_modules/ajv/lib/compile/index.js", "../../../node_modules/ajv/lib/cache.js", "../../../node_modules/ajv/lib/compile/formats.js", "../../../node_modules/ajv/lib/dotjs/ref.js", "../../../node_modules/ajv/lib/dotjs/allOf.js", "../../../node_modules/ajv/lib/dotjs/anyOf.js", "../../../node_modules/ajv/lib/dotjs/comment.js", "../../../node_modules/ajv/lib/dotjs/const.js", "../../../node_modules/ajv/lib/dotjs/contains.js", "../../../node_modules/ajv/lib/dotjs/dependencies.js", "../../../node_modules/ajv/lib/dotjs/enum.js", "../../../node_modules/ajv/lib/dotjs/format.js", "../../../node_modules/ajv/lib/dotjs/if.js", "../../../node_modules/ajv/lib/dotjs/items.js", "../../../node_modules/ajv/lib/dotjs/_limit.js", "../../../node_modules/ajv/lib/dotjs/_limitItems.js", "../../../node_modules/ajv/lib/dotjs/_limitLength.js", "../../../node_modules/ajv/lib/dotjs/_limitProperties.js", "../../../node_modules/ajv/lib/dotjs/multipleOf.js", "../../../node_modules/ajv/lib/dotjs/not.js", "../../../node_modules/ajv/lib/dotjs/oneOf.js", "../../../node_modules/ajv/lib/dotjs/pattern.js", "../../../node_modules/ajv/lib/dotjs/properties.js", "../../../node_modules/ajv/lib/dotjs/propertyNames.js", "../../../node_modules/ajv/lib/dotjs/required.js", "../../../node_modules/ajv/lib/dotjs/uniqueItems.js", "../../../node_modules/ajv/lib/dotjs/index.js", "../../../node_modules/ajv/lib/compile/rules.js", "../../../node_modules/ajv/lib/data.js", "../../../node_modules/ajv/lib/compile/async.js", "../../../node_modules/ajv/lib/dotjs/custom.js", "../../../node_modules/ajv/lib/refs/json-schema-draft-07.json", "../../../node_modules/ajv/lib/definition_schema.js", "../../../node_modules/ajv/lib/keyword.js", "../../../node_modules/ajv/lib/refs/data.json", "../../../node_modules/ajv/lib/ajv.js", "../src/index.ts", "../src/api.ts", "../src/sync/common/utils.ts", "../../../node_modules/@babel/runtime/helpers/esm/typeof.js", "../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js", "../../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js", "../../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js", "../../../node_modules/@babel/runtime/helpers/esm/createClass.js", "../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js", "../../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js", "../../../node_modules/@babel/runtime/helpers/esm/inherits.js", "../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js", "../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js", "../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js", "../../../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js", "../../../node_modules/@babel/runtime/helpers/esm/iterableToArray.js", "../../../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js", "../../../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js", "../../../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js", "../../../node_modules/@babel/runtime/helpers/esm/toArray.js", "../../../node_modules/i18next/dist/esm/i18next.js", "../src/extensionLogger.ts", "../src/sync/v2/generate/objectPage.ts", "../src/sync/common/decoration/control.ts", "../../../node_modules/reflect-metadata/Reflect.js", "../src/sync/common/decoration/decorators.ts", "../src/sync/common/flexUtils.ts", "../src/sync/common/decoration/flex.ts", "../src/sync/common/import/utils.ts", "../src/sync/common/generate/objectPage.ts", "../src/sync/v4/utils/StableIdHelper.ts", "../src/sync/v2/generate/utils.ts", "../src/sync/v2/types.ts", "../src/sync/common/generate/utils.ts", "../src/sync/common/distTagEvaluator.ts", "../src/sync/common/dist_tag.json", "../package.json", "../src/sync/common/importProject.ts", "../src/sync/v2/import/app/appProvider.ts", "../src/sync/common/appProvider.ts", "../src/sync/v2/import/common/index.ts", "../src/sync/v2/import/controls/table.ts", "../src/sync/v2/export/manifest.ts", "../src/sync/v2/export/controls/index.ts", "../src/sync/v2/application.ts", "../src/sync/v2/export/controls/Card.ts", "../src/sync/v2/export/controls/Field.ts", "../src/sync/v2/export/controls/FilterBar.ts", "../src/sync/v2/export/controls/FormAction.ts", "../src/sync/v2/export/controls/Fragment.ts", "../src/sync/v2/export/view-controller-generator.ts", "../src/sync/v2/export/controls/Table.ts", "../src/sync/v2/export/controls/Action.ts", "../src/sync/v2/export/controls/TableColumn.ts", "../src/sync/v2/export/controls/ToolBar.ts", "../src/sync/v2/export/controls/AnalyticalListPageChart.ts", "../src/sync/v2/export/controls/AnalyticalListPageKPI.ts", "../src/sync/v2/export/controls/ObjectPageHeader.ts", "../src/sync/v2/export/controls/ObjectPageHeaderAction.ts", "../src/sync/v2/export/controls/ObjectPageFooterAction.ts", "../src/sync/v2/export/controls/ObjectPageLayout.ts", "../src/sync/v2/export/controls/ObjectPageCustomSection.ts", "../src/sync/v2/export/controls/ObjectPageSectionsV2.ts", "../src/sync/v2/export/controls/ObjectPageChart.ts", "../src/sync/v2/export/controls/ObjectPageTable.ts", "../src/sync/v2/export/controls/ObjectPageToolBarAction.ts", "../src/sync/v2/import/pages/listReport.ts", "../src/i18n/i18n.ts", "../src/sync/common/i18n.json", "../src/sync/i18n.ts", "../src/sync/v2/import/utils.ts", "../src/sync/v2/export/pages/index.ts", "../src/sync/v2/export/pages/AnalyticalListPage.ts", "../src/sync/v2/export/pages/ListReport.ts", "../src/sync/v2/export/pages/ObjectPage.ts", "../src/sync/v2/export/pages/OverviewPage.ts", "../src/sync/common/decoration/factory.ts", "../src/sync/v2/export/factory.ts", "../src/sync/v2/import/pages/analyticalListPage.ts", "../src/sync/v2/import/pages/objectPage.ts", "../src/sync/v2/import/app/ovpProvider.ts", "../src/sync/v2/import/pages/overviewPage.ts", "../src/sync/v2/export/export.ts", "../src/sync/v4/utils/utils.ts", "../src/sync/v4/generate/listReport.ts", "../src/sync/v4/generate/objectPage.ts", "../src/sync/v4/generate/freestylePage.ts", "../src/sync/v4/generate/generate.ts", "../src/sync/v4/application.ts", "../src/sync/v4/import/pages/listReport.ts", "../src/sync/v4/import/utils.ts", "../src/sync/v4/export/controls/index.ts", "../src/sync/v4/export/controls/Table.ts", "../src/sync/v4/export/controls/TableColumn.ts", "../src/sync/v4/export/controls/ToolBar.ts", "../src/sync/v4/export/controls/ToolBarAction.ts", "../src/sync/v4/export/controls/ObjectPageToolBarAction.ts", "../src/sync/v4/export/controls/FilterBar.ts", "../src/sync/v4/export/controls/ObjectPageTableColumn.ts", "../src/sync/v4/export/controls/ObjectPageHeader.ts", "../src/sync/v4/export/controls/ObjectPageHeaderSection.ts", "../src/sync/v4/export/controls/ObjectPageLayout.ts", "../src/sync/v4/export/controls/ObjectPageTable.ts", "../src/sync/v4/export/controls/ObjectPageCustomSection.ts", "../src/sync/v4/export/pages/index.ts", "../src/sync/v4/export/pages/ListReport.ts", "../src/sync/v4/export/pages/ObjectPage.ts", "../src/sync/v4/export/pages/FreestylePage.ts", "../src/sync/v4/export/factory.ts", "../src/sync/v4/import/pages/objectPage.ts", "../src/sync/v4/import/app/appProvider.ts", "../src/specification/schemaAccess.ts", "../src/sync/v2/generate/listReport.ts", "../src/sync/v2/generate/analyticalListReport.ts", "../src/sync/v2/generate/overviewPage.ts", "../src/sync/v2/generate/generate.ts", "../src/sync/v2/export/exportPage.ts", "../src/sync/v4/export/manifest.ts", "../src/sync/v4/export/flexibleColumnLayout.ts", "../src/sync/v4/export/utils.ts", "../src/sync/v4/export/export.ts", "../src/project.ts"],
  "sourcesContent": ["export * from './common';\nexport * from './apiTypes';\nexport * as v2 from './v2';\nexport * as v4 from './v4';\n", "import type { FlexibleColumnLayoutType, ManifestSettingsType } from './types';\n\nexport enum PageTypeV2 {\n    ObjectPage = 'ObjectPage',\n    ListReport = 'ListReport',\n    OverviewPage = 'OverviewPage',\n    CustomPage = 'CustomPage',\n    AnalyticalListPage = 'AnalyticalListPage'\n}\n\nexport enum PageTypeV4 {\n    ObjectPage = 'ObjectPage',\n    ListReport = 'ListReport',\n    CustomPage = 'CustomPage',\n    AnalyticalListPage = 'AnalyticalListPage'\n}\n\nexport const PageType = { ...PageTypeV2, ...PageTypeV4 };\nexport type PageType = typeof PageType;\n\nexport const PAGETYPE_VIEW_EXTENSION_TEMPLATE_MAP: Map<PageTypeV2, string> = new Map([\n    [PageTypeV2.ListReport, 'sap.suite.ui.generic.template.ListReport.view.ListReport'],\n    [PageTypeV2.AnalyticalListPage, 'sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage'],\n    [PageTypeV2.ObjectPage, 'sap.suite.ui.generic.template.ObjectPage.view.Details']\n]);\n\nexport interface PageConfig {\n    $schema?: string;\n}\n\nexport interface PageBase {\n    name?: string;\n    entitySet?: string;\n    navigationProperty?: string;\n    config?: PageConfig;\n    navigation?: { [property: string]: string | object };\n    variantManagement?: string;\n    defaultLayoutType?: FlexibleColumnLayoutType;\n}\n\nexport enum FioriElementsVersion {\n    v2 = 'v2',\n    v4 = 'v4'\n}\nexport enum OdataVersion {\n    v2 = 'v2',\n    v4 = 'v4'\n}\nexport interface Target {\n    fioriElements: FioriElementsVersion;\n    odata: OdataVersion;\n}\n\nexport interface PagesBase {\n    [key: string]: PageBase;\n}\nexport interface SapUiGenericAppPageSettings {\n    [key: string]: ManifestSettingsType;\n}\n\nexport interface SapUiGenericAppPage {\n    entitySet: string;\n    navigationProperty?: string;\n    component: {\n        name: string;\n        settings?: SapUiGenericAppPageSettings;\n    };\n    pages?: SapUiGenericAppPage[] | { [pageId: string]: SapUiGenericAppPage };\n}\n\nexport interface SapUiGenericAppPageMap {\n    [key: string]: SapUiGenericAppPage;\n}\n\nexport interface SapUiGenericApp {\n    pages: SapUiGenericAppPage[] | SapUiGenericAppPageMap;\n    _version?: string;\n    settings?: object;\n}\n", "import type { EntityType } from '@sap-ux/vocabularies-types';\nimport type { Definition } from 'typescript-json-schema';\nimport type { Manifest } from './webapp/manifest';\n\nexport enum FlexibleColumnLayoutType {\n    OneColumn = 'OneColumn',\n    TwoColumnsBeginExpanded = 'TwoColumnsBeginExpanded',\n    TwoColumnsMidExpanded = 'TwoColumnsMidExpanded',\n    MidColumnFullScreen = 'MidColumnFullScreen',\n    ThreeColumnsMidExpanded = 'ThreeColumnsMidExpanded',\n    ThreeColumnsEndExpanded = 'ThreeColumnsEndExpanded',\n    ThreeColumnsMidExpandedEndHidden = 'ThreeColumnsMidExpandedEndHidden',\n    ThreeColumnsBeginExpandedEndHidden = 'ThreeColumnsBeginExpandedEndHidden',\n    EndColumnFullScreen = 'EndColumnFullScreen'\n}\n\nexport const enum FlexChangeLayer {\n    Vendor = 'VENDOR',\n    Customer = 'CUSTOMER_BASE'\n}\n\nexport type ManifestSettingsType = boolean | number | string | object;\n\n/**\n * Type for all available schema types, e.g. Application, ListReport, ObjectPage, ...\n */\nexport enum SchemaType {\n    Application = 'Application',\n    ObjectPage = 'ObjectPage',\n    ListReport = 'ListReport',\n    OverviewPage = 'OverviewPage',\n    AnalyticalListPage = 'AnalyticalListPage',\n    FreestylePage = 'FreestylePage'\n}\n\nexport enum ExportArtifacts {\n    flex = 'flex',\n    manifest = 'manifest'\n}\n\nexport enum ALPViewType {\n    Primary = 'primary',\n    Secondary = 'secondary'\n}\n\nexport enum SectionType {\n    Section = 'Section',\n    SubSection = 'SubSection',\n    HeaderSection = 'HeaderSection'\n}\n\nexport enum ArtifactType {\n    Manifest = 'Manifest',\n    FlexChange = 'FlexChange',\n    Annotation = 'Annotation',\n    Fragment = 'Fragment'\n}\n\nexport enum ActionType {\n    Annotation = 'Annotation',\n    Custom = 'Custom',\n    Standard = 'Standard'\n}\n\nexport enum ControlType {\n    Table = 'sap.m.Table',\n    TableColumn = 'sap.m.Column',\n    SmartTable = 'sap.ui.comp.smarttable.SmartTable',\n    SmartFilterBar = 'sap.ui.comp.smartfilterbar.SmartFilterBar',\n    SmartChart = 'sap.ui.comp.smartchart.SmartChart',\n    Group = 'sap.ui.comp.smartform.Group',\n    GroupElement = 'sap.ui.comp.smartform.GroupElement',\n    Button = 'sap.m.Button',\n    ToolbarButton = 'sap.m.OverflowToolbarButton',\n    Avatar = 'sap.f.Avatar',\n    ObjectPageDynamicHeaderTitle = 'sap.uxap.ObjectPageDynamicHeaderTitle',\n    ObjectPageGridProperties = 'sap.ui.layout.GridData',\n    ObjectPageHeader = 'sap.uxap.ObjectPageHeader',\n    ObjectPageLayout = 'sap.uxap.ObjectPageLayout',\n    HeaderAction = 'sap.uxap.ObjectPageHeaderActionButton',\n    DynamicPage = 'sap.f.DynamicPage',\n    Form = 'sap.ui.layout.form',\n    Chart = 'sap.suite.ui.microchart',\n    Section = 'sap.uxap.ObjectPageSection',\n    SubSection = 'sap.uxap.ObjectPageSubSection'\n}\n\nexport interface ChangeContent {\n    property: string;\n    newValue?: ManifestSettingsType;\n    newBinding?: string | object;\n}\n\nexport enum Visualization {\n    LineItem = 'LineItem',\n    Chart = 'Chart'\n}\n\nexport enum DirName {\n    Sapux = 'src',\n    Schemas = '.schemas',\n    Pages = 'pages',\n    Webapp = 'webapp',\n    Temp = '.tmp',\n    Changes = 'changes',\n    LocalService = 'localService',\n    Controller = 'controller',\n    View = 'view',\n    Fragment = 'fragment',\n    Ext = 'ext',\n    VSCode = '.vscode'\n}\nexport enum FileName {\n    App = 'app.json'\n}\n\nexport const FacetTitlePrefix = 'Facet ID: ';\nexport const ActionTitlePrefix = 'Action ID: ';\n\nexport interface FileData {\n    dataSourceUri: string;\n    fileContent: string;\n}\n\nexport interface ExportResults {\n    flexChanges: string[];\n    manifest: Manifest;\n    fragments: FileData[];\n}\n\n/**\n * Taken over from https://github.com/sap-staging/ui5-flexibility-utils/blob/origin/master/src/changeUtils.js\n */\nexport interface ChangeDefinition {\n    controlId: string; // ID of the control containing all prefixes excluding the application ID prefix\n    controlType: string; // This is NOT in the API so far, but we need it\n    type: string; // Change type, i.e. <code>propertyChange</code>\n    content: ChangeContent; // Content of the change needed by the corresponding change handler\n    isCustomer: boolean; // Flag indicating whether the project is related to a customer project\n    sapui5Version: string; // SAPUI5 version for which the change is created\n    creatingTool: string; // Name of the tool calling this function for support reasons\n    id: string; // UID of the change;\n    reference: string; // Reference to the application;\n    appVersion: string; // Version of the application;\n    creation: string; // String with the creation timestamp;\n}\n/**\n * Taken over from https://github.com/sap-staging/ui5-flexibility-utils/blob/origin/master/src/changeUtils.js\n */\nexport interface ChangeDefinitionInCreation {\n    controlId: string; // ID of the control containing all prefixes excluding the application ID prefix\n    controlType: string; // This is NOT in the API so far, but we need it\n    type?: string; // Change type, i.e. <code>propertyChange</code>\n    content: ChangeContent; // Content of the change needed by the corresponding change handler\n    isCustomer?: boolean; // Flag indicating whether the project is related to a customer project\n    sapui5Version?: string; // SAPUI5 version for which the change is created\n    creatingTool?: string; // Name of the tool calling this function (this is needed for support reasons)\n}\n\nexport type CreateFlexChange = (change: ChangeDefinitionInCreation, manifest: Manifest) => string;\nexport type exportFlexValue = (flexChange: ChangeDefinitionInCreation, configObject: object, key: string) => void;\nexport type importFlexValue = (flexChange: ChangeDefinitionInCreation, configObject: object, key: string) => void;\n\nexport type ControlTypeFunction = () => ControlType;\nexport type ControlIdFunction = (\n    baseId: string,\n    idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    controlType?: ControlTypeFunction,\n    title?: string\n) => string;\n\nexport interface FlexAdapter {\n    controlId: ControlIdFunction;\n    controlType: ControlTypeFunction;\n    createFlexChange: CreateFlexChange;\n    exportFlexValue?: exportFlexValue;\n    importFlexValue?: importFlexValue;\n}\n\nexport type ManifestPath = (pageKeys?: string[], manifest?: Manifest, ...pathParts) => string;\n\nexport type ExportHandlerFunction = (\n    manifestSection: unknown,\n    configObject: unknown,\n    key: string,\n    manifestKey?: string,\n    ...pathParts: string[]\n) => unknown;\n\nexport interface ManifestConverter {\n    path: ManifestPath;\n    key?: string;\n    import?:\n        | ((manifestSection: unknown, sectionId?: string, propertyKey?: string, breadcrumbs?: string[]) => unknown)\n        | boolean;\n    export?: ExportHandlerFunction | boolean;\n    delete?:\n        | ((\n              manifestSection: unknown,\n              configObject: unknown,\n              key: string,\n              manifestKey: string,\n              syncRuleKey?: string,\n              config?: object\n          ) => unknown)\n        | boolean;\n}\n\nexport interface SyncRule {\n    flex?: FlexAdapter;\n    manifest?: ManifestConverter;\n    generate?: (schema: object, definition: object, propertyName: string) => unknown;\n}\n\nexport interface Content {\n    property: string;\n    oldValue?: ManifestSettingsType;\n    newValue: ManifestSettingsType;\n}\nexport interface Selector {\n    id: string;\n    type: string;\n    idIsLocal?: boolean;\n}\n\nexport interface PageLayoutInformation {\n    id: string;\n    pageId: string;\n}\n\nexport interface FakeLRepSettings {\n    isKeyUser: boolean;\n    isAtoAvailable: boolean;\n    isProductiveSystem: boolean;\n}\n\nexport interface ValidityInformation {\n    since: string;\n    deprecated?: Deprecated;\n}\n\nexport interface DeprecatedProperties {\n    [key: string]: ValidityInformation;\n}\n\nexport interface Deprecated {\n    since: string;\n    text?: string;\n}\n\nexport enum FacetBase {\n    LineItem = 'LineItem',\n    CollectionFacet = 'CollectionFacet',\n    Chart = 'Chart',\n    Form = 'Form',\n    Identification = 'Identification',\n    DataPoint = 'DataPoint',\n    Address = 'Address',\n    Contact = 'Contact',\n    PresentationVariant = 'PresentationVariant',\n    Unknown = ''\n}\n\nexport interface FacetConfig {\n    base: FacetBase;\n    lineItem?: string[];\n    Label?: string;\n    ID?: string;\n    entityType?: EntityType;\n    annotationPath?: string;\n    target?: object;\n    facets?: FacetConfigs;\n    namespace?: string;\n}\n\nexport interface SubSectionConfig {\n    base: FacetBase;\n    Label?: string;\n    ID?: string;\n    facets: FacetConfigs;\n    annotationPath?: string;\n    entityType?: EntityType;\n    target?: object;\n    namespace?: string;\n}\n\nexport interface FacetConfigs {\n    [key: string]: FacetConfig | SubSectionConfig;\n}\n\nexport interface File {\n    dataSourceUri: string;\n    fileContent: string;\n}\n\nexport interface Files {\n    [name: string]: object;\n}\n\nexport interface FacetSection {\n    key: string;\n    label?: string;\n    ID?: string;\n    custom?: boolean;\n    entityType?: EntityType;\n    namespace?: string;\n    // Custom section title\n    title?: string;\n}\n\nexport interface SchemaFilePath {\n    filename: string;\n    path: string;\n}\n\nexport interface ObjectPageSectionData {\n    target: string;\n    key?: string;\n}\n\nexport const BindingPropertyRegexAsString = \"^{[A-Za-z0-9{}&$!@#%? _|,<>'()[\\\\]\\\\/:=.]+}$\";\n\nexport enum ViewTemplateType {\n    ResponsiveTableColumnsExtension = 'ResponsiveTableColumnsExtension',\n    AnalyticalTableColumnsExtension = 'AnalyticalTableColumnsExtension',\n    TreeTableColumnsExtension = 'TreeTableColumnsExtension',\n    GridTableColumnsExtension = 'GridTableColumnsExtension',\n    ResponsiveTableCellsExtension = 'ResponsiveTableCellsExtension'\n}\n\n//Definitions for elements in app schema\nexport enum DefinitionName {\n    Action = 'Action',\n    Actions = 'Actions',\n    ActionsLR = 'Actions<LineItems>',\n    ALPChart = 'ALPChart',\n    ALPChartView = 'ALPChartView',\n    ALPTable = 'ALPTable',\n    ALPTableView = 'ALPTableView',\n    AnalyticalListPageFilterBar = 'AnalyticalListPageFilterBar',\n    AnnotationPathAsObject = 'AnnotationPathAsObject',\n    ChartToolBarAction = 'ChartToolBarAction',\n    CommonHeaderFacetSettings = 'CommonHeaderFacetSettings',\n    CompactFilters = 'CompactFilters',\n    CustomFooterActionOP = 'CustomFooterActionOP',\n    CustomHeaderAction = 'CustomHeaderAction',\n    CustomHeaderActionOP = 'CustomHeaderActionOP',\n    CustomFormActionOP = 'CustomFormActionOP',\n    CustomTableAction = 'CustomTableAction',\n    CustomTableActionOP = 'CustomTableActionOP',\n    CustomColumn = 'TableCustomColumn',\n    CustomColumnOP = 'TableCustomColumnOP',\n    CustomColumns = 'TableCustomColumns',\n    CustomSections = 'CustomSections',\n    FieldPath = 'FieldPath',\n    Field = 'Field',\n    Fields = 'Fields',\n    Fields4Dialog = 'Fields4Dialog',\n    FilterBar = 'FilterBar',\n    FilterBarVisualFilters = 'FilterBarVisualFilters',\n    Footer = 'Footer',\n    FooterAction = 'FooterAction',\n    FooterActionV4 = 'FooterActionV4',\n    FooterActions = 'FooterActions',\n    FooterActionsLR = 'FooterActions<LineItems>',\n    Form = 'Form',\n    FormAction = 'FormAction',\n    FormCustomActionOP = 'FormCustomActionOP',\n    GenericActions = 'GenericActions',\n    GenericColumnsOP = 'GenericColumnsOP',\n    GenericFooter = 'GenericFooter',\n    GenericSections = 'GenericSections',\n    GenericSubSections = 'GenericSubSections',\n    Header = 'Header',\n    HeaderActions = 'HeaderActions',\n    HeaderActionsStandard = 'HeaderActionsStandard',\n    HeaderActionStandard = 'HeaderActionStandard',\n    ObjectPageHeaderAction = 'ObjectPageHeaderAction',\n    ObjectPageHeaderActionStandard = 'ObjectPageHeaderActionStandard',\n    ObjectPageHeaderActions = 'ObjectPageHeaderActions',\n    HeaderSections = 'HeaderSections',\n    LineItems = 'LineItems',\n    LineItemsOfView = 'LineItemsOfView',\n    ListReportFilterBar = 'ListReportFilterBar',\n    LRTableView = 'LRTableView',\n    LRChartView = 'LRChartView',\n    MultiEditV2 = 'MultiEdit',\n    MultiTableModeV4 = 'MultiTableModeV4',\n    ObjectPageChart = 'ObjectPageChart',\n    ObjectPageCustomHeaderSectionFragment = 'ObjectPageCustomHeaderSectionFragment',\n    ObjectPageCustomSectionFragment = 'ObjectPageCustomSectionFragment',\n    ObjectPageCustomSubSectionFragment = 'ObjectPageCustomSubSectionFragment',\n    ObjectPageForm = 'ObjectPageForm',\n    ObjectPageFooter = 'ObjectPageFooter',\n    ObjectPageFooterAction = 'ObjectPageFooterAction',\n    ObjectPageFooterActions = 'ObjectPageFooterActions',\n    ObjectPageFooterActionStandard = 'ObjectPageFooterActionStandard',\n    ObjectPageHeader = 'ObjectPageHeader',\n    ObjectPageHeaderSectionForm = 'ObjectPageHeaderSectionForm',\n    ObjectPageHeaderSectionChart = 'ObjectPageHeaderSectionChart',\n    ObjectPageHeaderSectionDataPoint = 'ObjectPageHeaderSectionDataPoint',\n    ObjectPageHeaderSectionContact = 'ObjectPageHeaderSectionContact',\n    ObjectPageHeaderSectionAddress = 'ObjectPageHeaderSectionAddress',\n    ObjectPageLayout = 'ObjectPageLayout',\n    ObjectPagePresentationVariant = 'ObjectPagePresentationVariant',\n    ObjectPageSectionAddress = 'ObjectPageSectionAddress',\n    ObjectPageSectionChart = 'ObjectPageSectionChart',\n    ObjectPageSectionContact = 'ObjectPageSectionContact',\n    ObjectPageSectionDataPoint = 'ObjectPageSectionDataPoint',\n    ObjectPageSectionForm = 'ObjectPageSectionForm',\n    ObjectPageSectionPresentationVariant = 'ObjectPageSectionPresentationVariant',\n    ObjectPageSectionTableV4 = 'ObjectPageSectionTableV4',\n    ObjectPageSubSections = 'ObjectPageSubSections',\n    ObjectPageTable = 'ObjectPageTable',\n    ObjectPageTableColumn = 'ObjectPageTableColumn',\n    ObjectPageToolBar = 'ObjectPageToolBar',\n    ObjectPageToolBarAction = 'ObjectPageToolBarAction',\n    ObjectPageToolBarActions = 'ObjectPageToolBarActions',\n    Position = 'Position',\n    PositionOP = 'PositionOP',\n    QuickVariant = 'QuickVariant',\n    QuickVariantSelectionOP = 'QuickVariantSelectionOP',\n    QuickVariantSelectionV4OP = 'QuickVariantSelectionV4OP',\n    RelatedFacetKeys = 'RelatedFacetKeys',\n    Sections = 'Sections',\n    SectionActions = 'SectionActions',\n    SelectionFields = 'SelectionFields',\n    Table = 'Table',\n    TableSPV = 'TableSPV',\n    TableColumn = 'TableColumn',\n    TableViewExtension = 'TableViewExtension',\n    ToolBarAction = 'ToolBarAction',\n    ToolBarLR = 'ToolBar<LineItems>',\n    ToolBar = 'ToolBar',\n    ViewTableColumn = 'ViewTableColumn',\n    ViewTableColumnAction = 'ViewTableColumnAction',\n    ViewCustomColumn = 'ViewTableCustomColumn',\n    ViewCustomAction = 'ViewTableCustomAction',\n    ViewChartToolBar = 'ViewChartToolBar',\n    ViewToolBarAction = 'ViewToolBarAction',\n    ViewPosition = 'ViewPosition',\n    ViewCustomActionPosition = 'ViewCustomActionPosition',\n    VisualFilters = 'VisualFilters',\n    VisualFilter = 'VisualFilter',\n    CustomActionPosition = 'CustomActionPosition',\n    CustomActionPositionOP = 'CustomActionPositionOP',\n    // used during generation of properties for different entity set views\n    ViewTableColumnBasic = 'ViewTableColumnBasic',\n    ViewTableColumnBasicAction = 'ViewTableColumnBasicAction',\n    SaveAndEdit = 'SaveAndEdit'\n}\n\nexport enum PropertyName {\n    actions = 'actions',\n    annotationPath = 'annotationPath',\n    chart = 'chart',\n    defaultPath = 'defaultPath',\n    defaultTemplateAnnotationPath = 'defaultTemplateAnnotationPath',\n    sections = 'sections',\n    table = 'table',\n    views = 'views'\n}\n\nexport enum SchemaTag {\n    annotationPath = 'annotationPath',\n    annotationType = 'annotationType',\n    artifactType = 'artifactType',\n    controlType = 'controlType',\n    actionType = 'actionType',\n    dataType = 'dataType',\n    fullyQualifiedName = 'fullyQualifiedName',\n    hidden = 'hidden',\n    isViewNode = 'isViewNode',\n    key = 'key',\n    keys = 'keys',\n    target = 'target',\n    propertyIndex = 'propertyIndex'\n}\n\nexport enum SchemaKeyName {\n    id = 'ID',\n    value = 'Value',\n    action = 'Action',\n    target = 'Target',\n    key = 'Key',\n    semanticObject = 'SemanticObject'\n}\n\nexport const METADATAPATH = 'webapp/localService/metadata.xml';\nexport const MANIFESTPATH = 'webapp/manifest.json';\nexport const VOCWITHSLASH = '/@com.sap.vocabularies';\nexport const VOCWITHCOLONS = '::@com.sap.vocabularies';\nexport const UIVOCABULARY = 'com.sap.vocabularies.UI.v1';\nexport const UIVOCABULARYDOT = 'com.sap.vocabularies.UI.v1.';\nexport const UIVOCABULARYALPHADOT = '@com.sap.vocabularies.UI.v1.';\nexport const QUICKVARPATH = '/quickVariantSelection';\nexport const QUICKVARPATHX = '/quickVariantSelectionX';\nexport const DATESETTINGSPATH = '/filterSettings/dateSettings';\nexport const FRAGMENTNAMEPART = '.fragment.';\n\nexport interface SchemaDefinition extends Definition {\n    isViewNode?: boolean;\n    propertyIndex?: number;\n    hidden?: boolean;\n    annotationPath?: string;\n}\n", "import type { Target } from './page';\nimport type { Pages as PagesV2, AppSettings as AppSettingsV2 } from '../v2';\nimport type { Pages as PagesV4, AppSettings as AppSettingsV4 } from '../v4';\nimport type { FlexibleColumnLayoutType } from './types';\n\nexport enum DraftDiscardEnabledSettings {\n    restricted = 'restricted'\n}\nexport interface DraftDiscardConfirmationSettings {\n    /**\n     * Allows applications to turn off the discard draft confirmation popup in various scenarios\n     */\n    enabled: DraftDiscardEnabledSettings;\n}\n\nexport enum TableColumnVerticalAlignment {\n    Top = 'Top',\n    Middle = 'Middle',\n    Bottom = 'Bottom'\n}\n\nexport enum StatePreservationMode {\n    persistence = 'persistence',\n    discovery = 'discovery'\n}\n\nexport interface Application {\n    $schema?: string;\n    id?: string;\n    pages?: PagesV2 | PagesV4;\n    home?: string;\n    target?: Target;\n    settings?: AppSettingsV2 | AppSettingsV4;\n}\n\nexport enum FlexibleColumnLayoutAggregations {\n    BeginColumnPages = 'beginColumnPages',\n    MidColumnPages = 'midColumnPages',\n    EndColumnPages = 'endColumnPages'\n}\n\nexport interface FlexibleColumnLayout {\n    defaultTwoColumnLayoutType?: FlexibleColumnLayoutType;\n    defaultThreeColumnLayoutType?: FlexibleColumnLayoutType;\n}\n\nexport interface CommonAppSettings {\n    /**\n     * To change the application header, in your project artifacts, change the i18n property file\n     * for your app under webapp/i18n/i18n.properties ->appTitle. Then, refer to the title as\n     * {{appTitle}} in the sap.app section of the manifest file.\n     * @i18nClassification TIT: Title of the application\n     */\n    title?: string;\n    /**\n     * To change the application header, in your project artifacts, change the i18n property file\n     * for your app under webapp/i18n/i18n.properties ->appDescription. Then, refer to the description\n     * as {{appDescription}} in the sap.app section of the manifest file.\n     * @i18nClassification TIT: Description of the application\n     */\n    description?: string;\n    /**\n     * Allows you to enable key user adaptation for an application.\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/ccd45ba3f0b446a0901b2c9d42b8ad53\n     */\n    flexEnabled?: boolean;\n}\n", "import type * as ManifestNamespace from '@ui5/manifest/types/manifest';\n\nexport { ManifestNamespace };\n\nexport enum DataSourceType {\n    OData = 'OData',\n    ODataAnnotation = 'ODataAnnotation'\n}\n\nexport type ODataVersionType = '2.0' | '4.0';\n\nexport interface CrossNavigation {\n    inbounds?: {\n        [key: string]: ManifestNamespace.Inbound;\n    };\n}\n\nexport interface SapAppSourceTemplate {\n    id: string;\n    version?: string;\n    toolsId?: string;\n}\n\nexport interface SapApp {\n    id?: string;\n    title?: string;\n    type?: string;\n    description?: string;\n    dataSources?: SapAppDataSources | SapAppDataSourcesWithOptions;\n    offline?: boolean;\n    resources?: string;\n    sourceTemplate?: SapAppSourceTemplate;\n    crossNavigation?: CrossNavigation;\n}\n\nexport interface SapAppDataSources {\n    [key: string]: ManifestNamespace.DataSource;\n    mainService: ManifestNamespace.DataSource;\n}\n\nexport type SapAppDataSourceWithOptions = ManifestNamespace.DataSource & {\n    isLocal: boolean;\n    order: number;\n    isActive: boolean;\n};\n\nexport interface SapAppDataSourcesWithOptions {\n    [key: string]: SapAppDataSourceWithOptions;\n}\n\nexport enum ManifestSection {\n    ui = 'sap.ui',\n    app = 'sap.app',\n    generic = 'sap.ui.generic.app',\n    ovp = 'sap.ovp',\n    ui5 = 'sap.ui5'\n}\n\nexport const GENERICAPPSETTINGS = `${ManifestSection.generic}/settings`;\n\n// Export ui5/manifest definitions under the former names from ux-specification/types\nexport type Inbound = ManifestNamespace.Inbound;\nexport type Manifest = ManifestNamespace.SAPJSONSchemaForWebApplicationManifestFile;\nexport type ObjectStreamCardsSettingsDef = ManifestNamespace.ObjectStreamCardsSettingsDef;\nexport type SapUi5Routing = ManifestNamespace.Routing;\nexport type SapOvp = ManifestNamespace.JSONSchemaForSAPOVPNamespace;\nexport type SapOvpDefaultSpanDef = ManifestNamespace.DefaultSpanDef;\nexport type SapOvpPlotAreaDef = ManifestNamespace.PlotAreaDef;\nexport type SapOvpTimeAxisDef = ManifestNamespace.TimeAxisDef;\nexport type SapOvpTabSetting = ManifestNamespace.TabSetting;\nexport type SappAppDataSource = ManifestNamespace.DataSource;\nexport interface SapAppDataSourceSettings extends ManifestNamespace.Setting, ManifestNamespace.Setting1 {}\n", "import type { FlexibleColumnLayoutAggregations } from '../../Application';\nimport type { FlexibleColumnLayoutType } from '../../types';\n\nexport const FIORI_FCL_ROOT_VIEW_NAME = 'sap.fe.templates.RootContainer.view.Fcl';\n\nexport const FIORI_FCL_ROOT_ID = 'appRootView';\n\nexport enum ViewTypes {\n    XML = 'XML',\n    HTML = 'HTML',\n    JSON = 'JSON',\n    JS = 'JS'\n}\n\nexport interface SapUi5RootView {\n    viewName: typeof FIORI_FCL_ROOT_VIEW_NAME | string;\n    type: ViewTypes;\n    id: typeof FIORI_FCL_ROOT_ID | string;\n    async?: boolean;\n}\n\nexport interface SapUi5OdataModel {\n    preload?: boolean;\n    dataSource: string;\n    settings?: {\n        bundleUrl?: string;\n        bundleName?: string;\n    };\n}\n\nexport interface SapUi5ResourceModel {\n    type: string;\n    uri?: string;\n}\n\nexport type SapUi5RoutingRouteTarget = string | string[];\n\nexport interface SapUi5RoutingRoute {\n    name: string;\n    pattern: string;\n    target: SapUi5RoutingRouteTarget;\n    layout?: FlexibleColumnLayoutType;\n}\n\nexport const SAPUI5_VIEW_CLASS = 'sap.ui.core.mvc.View';\nexport const SAPUI5_FRAGMENT_CLASS = 'sap.ui.core.Fragment';\n\nexport interface SapUi5ViewPath {\n    key: string;\n    annotationPath?: string;\n    entitySet?: string;\n    label?: string;\n    template?: string;\n    keepPreviousPersonalization?: boolean;\n    visible?: string;\n}\n\nexport interface SapUi5RoutingTargetSettingsViews {\n    shownCounts?: boolean;\n    paths?: Array<SapUi5ViewPath>;\n}\n\nexport interface SapUi5RoutingTargetNavigation {\n    detail: object;\n}\n\nexport interface SapUi5RoutingTargetSettings {\n    entitySet?: string;\n    navigation?: { [key: string]: SapUi5RoutingTargetNavigation };\n    content?: {\n        header?: {\n            facets?: {};\n        };\n        body?: {\n            sections?: {};\n        };\n        footer?: {\n            actions?: {};\n        };\n        controlConfiguration?: {};\n    };\n    variantManagement?: string;\n    controlConfiguration?: object;\n    viewPath?: string;\n    views?: SapUi5RoutingTargetSettingsViews;\n}\n\nexport interface SapUi5RoutingTargetBase {\n    options?: {\n        settings: SapUi5RoutingTargetSettings;\n    };\n    controlAggregation?: FlexibleColumnLayoutAggregations;\n    contextPattern?: string;\n}\n\nexport interface SapUi5RoutingTarget extends SapUi5RoutingTargetBase {\n    type: string;\n    id: string;\n    name: string;\n}\n\nexport interface Dependencies {\n    minUI5Version?: string;\n    libs?: { [key: string]: { lazy?: boolean } };\n    components?: { [key: string]: { lazy?: boolean } };\n}\n", "import type { Definition } from 'typescript-json-schema';\nimport type { ConvertedMetadata, EntitySet, EntityType } from '@sap-ux/vocabularies-types';\nimport type { FioriElementsVersion, Manifest, v2, v4 } from '.';\nimport type { SchemaType, FileData, FlexChangeLayer, ExportResults } from './common/types';\n\nexport type MessageMetadataType = (object | string | number)[];\n\nexport const enum LogSeverity {\n    Error = 'error',\n    Warning = 'warning',\n    Info = 'info'\n}\n\nexport const LogSeverityLabel = {\n    [LogSeverity.Error]: 'Error',\n    [LogSeverity.Warning]: 'Warning',\n    [LogSeverity.Info]: 'Information'\n};\n\nexport type LogMessage = string | object | undefined;\n\nexport interface RangePosition {\n    line: number;\n    character: number;\n}\nexport interface Range {\n    start: RangePosition;\n    end: RangePosition;\n}\n\nexport interface Location {\n    path: string;\n    range?: Range | string[];\n}\n\n/**\n * Interface used to define a logger for the specificaton API\n */\nexport interface ExtensionLogger {\n    info: (message: string, ...meta: MessageMetadataType) => void;\n    warning: (message: string, ...meta: MessageMetadataType) => void;\n    error: (message: string, ...meta: MessageMetadataType) => void;\n}\n\n/**\n * Types for V2 schema generation\n */\nexport type GenerateListReportV2 = {\n    [SchemaType.ListReport]: {\n        genericSchema: object;\n        entitySet: string;\n        annotations: FileData[];\n        manifest: Manifest;\n        fragments: FileData[];\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type GenerateObjectPageV2 = {\n    [SchemaType.ObjectPage]: {\n        genericSchema: object;\n        entitySet: string;\n        annotations: FileData[];\n        manifest: Manifest;\n        fragments: FileData[];\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type GenerateOverviewPageV2 = {\n    [SchemaType.OverviewPage]: {\n        genericSchema: object;\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type GenerateAnalyticalListPageV2 = {\n    [SchemaType.AnalyticalListPage]: {\n        genericSchema: object;\n        entitySet: string;\n        annotations: object[];\n        manifest: Manifest;\n        fragments: FileData[];\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type GenerateSchemaV2Type =\n    | GenerateListReportV2\n    | GenerateObjectPageV2\n    | GenerateOverviewPageV2\n    | GenerateAnalyticalListPageV2;\n\nexport interface GenerateSchemaV2 {\n    [FioriElementsVersion.v2]: GenerateSchemaV2Type;\n}\n\n/**\n * Types for V4 schema generation\n */\nexport type GenerateListReportV4 = {\n    [SchemaType.ListReport]: {\n        genericSchema: object;\n        entitySet: string;\n        annotations: FileData[];\n        logger?: ExtensionLogger;\n        manifest?: Manifest;\n    };\n};\n\nexport type GenerateObjectPageV4 = {\n    [SchemaType.ObjectPage]: {\n        genericSchema: object;\n        entitySet: string;\n        annotations: FileData[];\n        manifest: Manifest;\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type GenerateAnalyticalListPageV4 = {\n    [SchemaType.AnalyticalListPage]: {\n        genericSchema: object;\n        entitySet: string;\n        annotations: FileData[];\n        logger?: ExtensionLogger;\n        manifest?: Manifest;\n    };\n};\n\nexport type GenerateFreestylePageV4 = {\n    [SchemaType.FreestylePage]: {\n        genericSchema: object;\n        annotations: FileData[];\n        manifest: Manifest;\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type GenerateSchemaV4Type =\n    | GenerateListReportV4\n    | GenerateObjectPageV4\n    | GenerateAnalyticalListPageV4\n    | GenerateFreestylePageV4;\n\nexport interface GenerateSchemaV4 {\n    [FioriElementsVersion.v4]: GenerateSchemaV4Type;\n}\n\n/**\n * Union types for schema generation\n */\nexport type GenerateSchemaParameters = GenerateSchemaV2 | GenerateSchemaV4;\n\n/**\n * Types for v2 export\n */\nexport type ExportListReportV2Parameters = {\n    appId: string;\n    page: v2.Page;\n    manifest: Manifest;\n    jsonSchema: object;\n    fragments?: FileData[];\n    logger?: ExtensionLogger;\n};\nexport type ExportListReportV2 = {\n    [SchemaType.ListReport]: ExportListReportV2Parameters;\n};\n\nexport type ExportAnalyticalListPageV2Parameters = ExportListReportV2Parameters;\nexport type ExportAnalyticalListPageV2 = {\n    [SchemaType.AnalyticalListPage]: ExportAnalyticalListPageV2Parameters;\n};\n\nexport type ExportOverviewPageV2Parameters = {\n    page: v2.Page;\n    manifest: object;\n    jsonSchema: object;\n    logger?: ExtensionLogger;\n};\nexport type ExportOverviewPageV2 = {\n    [SchemaType.OverviewPage]: ExportOverviewPageV2Parameters;\n};\n\nexport type ExportObjectPageV2Parameters = {\n    appId: string;\n    page: v2.Page;\n    manifest: Manifest;\n    jsonSchema: object;\n    fragments?: FileData[];\n    logger?: ExtensionLogger;\n};\nexport type ExportObjectPageV2 = {\n    [SchemaType.ObjectPage]: ExportObjectPageV2Parameters;\n};\n\nexport type ExportAppV2 = {\n    [SchemaType.Application]: {\n        application: v2.ApplicationV2;\n        manifest: Manifest;\n        jsonSchema: object;\n        logger?: ExtensionLogger;\n    };\n};\n\n/**\n * Types for v4 export\n */\nexport type ExportListReportV4Parameters = {\n    appId: string;\n    page: v4.PageV4;\n    manifest: Manifest;\n    jsonSchema: object;\n    logger?: ExtensionLogger;\n    appRootPath?: string;\n};\nexport type ExportListReportV4 = {\n    [SchemaType.ListReport]: ExportListReportV4Parameters;\n};\n\nexport type ExportAnalyticalListPageV4Parameters = ExportListReportV4Parameters;\n\nexport type ExportAnalyticalListPageV4 = {\n    [SchemaType.AnalyticalListPage]: ExportAnalyticalListPageV4Parameters;\n};\n\nexport type ExportObjectPageV4Parameters = {\n    appId: string;\n    page: v4.Page;\n    manifest: Manifest;\n    jsonSchema: object;\n    logger?: ExtensionLogger;\n    appRootPath?: string;\n};\nexport type ExportObjectPageV4 = {\n    [SchemaType.ObjectPage]: ExportObjectPageV4Parameters;\n};\n\nexport type ExportAppV4 = {\n    [SchemaType.Application]: {\n        application: v4.ApplicationV4;\n        manifest: Manifest;\n        jsonSchema: object;\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type ExportParametersV4Type = ExportListReportV4 | ExportObjectPageV4 | ExportAppV4 | ExportAnalyticalListPageV4;\n\nexport interface ExportParametersV4 {\n    [FioriElementsVersion.v4]: ExportParametersV4Type;\n}\n\nexport interface UI5Version {\n    ui5Version?: string;\n    layer?: FlexChangeLayer;\n}\n\nexport type ExportParametersV2Type =\n    | ExportListReportV2\n    | ExportObjectPageV2\n    | ExportOverviewPageV2\n    | ExportAppV2\n    | ExportAnalyticalListPageV2;\n\nexport interface ExportParametersV2 {\n    [FioriElementsVersion.v2]: ExportParametersV2Type;\n}\n\n/**\n * Union types for export\n */\nexport type ExportConfigParameters = UI5Version & (ExportParametersV2 | ExportParametersV4);\n\nexport type CommonImportParameters = {\n    manifest: Manifest;\n    flex: string[];\n    jsonSchema: object;\n    fragments?: FileData[];\n    logger?: ExtensionLogger;\n};\n\n/**\n * Types for v2 import\n */\nexport type ImportListReportV2Parameters = CommonImportParameters;\n\nexport type ImportListReportV2 = {\n    [SchemaType.ListReport]: ImportListReportV2Parameters;\n};\n\nexport type ImportObjectPageV2Parameters = CommonImportParameters & {\n    entitySet: string;\n};\nexport type ImportObjectPageV2 = {\n    [SchemaType.ObjectPage]: ImportObjectPageV2Parameters;\n};\n\nexport type ImportOverviewPageV2Parameters = {\n    manifest: Manifest;\n    jsonSchema: object;\n    logger?: ExtensionLogger;\n};\nexport type ImportOverviewPageV2 = {\n    [SchemaType.OverviewPage]: ImportOverviewPageV2Parameters;\n};\n\nexport type ImportALPV2Parameters = CommonImportParameters;\nexport type ImportAnalyticalListPageV2 = {\n    [SchemaType.AnalyticalListPage]: ImportALPV2Parameters;\n};\n\n/**\n * Types for v4 import\n */\nexport type ImportListReportV4Parameters = {\n    manifest: Manifest;\n    jsonSchema: Definition;\n    logger?: ExtensionLogger;\n};\nexport type ImportListReportV4 = {\n    [SchemaType.ListReport]: ImportListReportV4Parameters;\n};\n\nexport type ImportObjectPageV4Parameters = {\n    manifest: Manifest;\n    jsonSchema: Definition;\n    routingId: string;\n    logger?: ExtensionLogger;\n};\nexport type ImportObjectPageV4 = {\n    [SchemaType.ObjectPage]: ImportObjectPageV4Parameters;\n};\n\nexport type ImportAnalyticalListPageV4Parameters = ImportListReportV4Parameters;\nexport type ImportAnalyticalListPageV4 = {\n    [SchemaType.AnalyticalListPage]: ImportAnalyticalListPageV4Parameters;\n};\n\nexport type ImportParametersV4Type = ImportListReportV4 | ImportObjectPageV4 | ImportAnalyticalListPageV4;\n\nexport interface ImportParametersV4 {\n    [FioriElementsVersion.v4]: ImportParametersV4Type;\n}\n\nexport type ImportParametersV2Type =\n    | ImportListReportV2\n    | ImportObjectPageV2\n    | ImportOverviewPageV2\n    | ImportAnalyticalListPageV2;\nexport interface ImportParametersV2 {\n    [FioriElementsVersion.v2]: ImportParametersV2Type;\n}\n\nexport type ImportResultsV2 =\n    | v2.ListReportConfigV2\n    | v2.ObjectPageConfigV2\n    | v2.OverviewPageConfigV2\n    | v2.AnalyticalListPageConfigV2;\nexport type ImportResultsV4 = v4.ListReportConfigV4 | v4.ObjectPageConfigV4;\n\nexport type ImportConfigParameters = ImportParametersV2 | ImportParametersV4;\n\nexport interface Schemas {\n    [type: string]: object;\n}\n\nexport type ImportAllConfigsParameters = {\n    manifest: Manifest;\n    appSchemas: Schemas;\n    templateType: TemplateType;\n    serviceAVT: ConvertedMetadata;\n    logger?: ExtensionLogger;\n    flexChanges?: string[];\n    fragments?: FileData[];\n    views?: FileData[];\n};\n\nexport type ImportResults = ImportResultsV2 | ImportResultsV4;\n\n/**\n * Types for project import\n */\nexport interface ImportProjectParameters extends SyncBaseParameters {\n    manifest: Manifest;\n    annotations: FileData[];\n    flex?: string[];\n    fragments?: FileData[];\n    views?: FileData[];\n    logger?: ExtensionLogger;\n}\n\nexport enum TemplateType {\n    ListReportObjectPageV2 = 'ListReportObjectPageV2',\n    ListReportObjectPageV4 = 'ListReportObjectPageV4',\n    OverviewPageV2 = 'OverviewPageV2',\n    AnalyticalListPageV2 = 'AnalyticalListPageV2',\n    AnalyticalListPageV4 = 'AnalyticalListPageV4',\n    FreestylePageV4 = 'FreestylePageV4'\n}\n\nexport interface GenerateAppSchemaParameters extends SyncBaseParameters {\n    templateType: TemplateType;\n    manifest: Manifest;\n    serviceAVT: ConvertedMetadata;\n    fioriElementsVersion: FioriElementsVersion;\n    entitySet?: EntitySet;\n    fragments?: FileData[];\n    views?: FileData[];\n    logger?: ExtensionLogger;\n    entityType?: EntityType;\n}\n\n/**\n * API Version\n */\nexport interface ApiVersion {\n    version?: string;\n}\n\n/**\n * API Feature toggles\n */\nexport enum Features {\n    BuildingBlocks = 'BuildingBlocks'\n}\n// Value from enum or any string to allow freedom from outside\nexport type FeatureToggle = Features | string;\n\nexport interface SyncBaseParameters {\n    featureToggles?: FeatureToggle[];\n}\n\n/**\n * API interface\n */\nexport interface Specification {\n    getGenericSchema: (version: FioriElementsVersion, schemaType: SchemaType) => Promise<JSON>;\n    generateSchema: (params: GenerateSchemaParameters) => object;\n    exportConfig: (params: ExportConfigParameters) => ExportResults;\n    importConfig: (params: ImportConfigParameters) => ImportResults;\n    importProject: (params: ImportProjectParameters) => Promise<File[]>;\n    getApiVersion: () => ApiVersion;\n    importProjectSchema: (params: ImportProjectParameters) => Promise<File[]>;\n}\n", "export * from './controls';\nexport * from './webapp';\nexport * from './page';\nexport * from './pages';\nexport * from './overviewPage';\nexport * from './application';\nexport * from './ApplicationV2';\n", "export type SapUiCoreURI = string;\n\nexport enum ButtonType {\n    Accept = 'Accept',\n    Attention = 'Attention',\n    Back = 'Back',\n    Critical = 'Critical',\n    Default = 'Default',\n    Emphasized = 'Emphasized',\n    Ghost = 'Ghost',\n    Negative = 'Negative',\n    Neutral = 'Neutral',\n    Reject = 'Reject',\n    Success = 'Success',\n    Transparent = 'Transparent',\n    Unstyled = 'Unstyled',\n    Up = 'Up'\n}\n\n/**\n * Actions\n * @isViewNode true\n */\nexport interface Actions {\n    [key: string]: Action;\n}\n\n/**\n * Action\n * @isViewNode true\n */\nexport interface Action {\n    /**\n     * The text of the button tooltip, preferably as an i18n key.\n     * @i18nClassification ACT: Text for tooltip of button.\n     */\n    tooltip?: string;\n    /**\n     * An icon to be displayed as a graphical element within the button. This can be an image or an icon from the icon font (https://ui5.sap.com/test-resources/sap/m/demokit/iconExplorer/webapp/index.html#/overview/SAP-icons), represented as RFC 3986 conformant URI.\n     */\n    icon?: SapUiCoreURI;\n    /**\n     * An alternative icon for the active (depressed) state of the button. This can be an image or an icon from the icon font (https://ui5.sap.com/test-resources/sap/m/demokit/iconExplorer/webapp/index.html#/overview/SAP-icons), represented as RFC 3986 conformant URI.\n     */\n    activeIcon?: SapUiCoreURI;\n    /**\n     * Defines the Button type.\n     */\n    type?: ButtonType;\n}\n\n/**\n * Form Action\n * @isViewNode true\n */\nexport interface FormAction extends Action {\n    /**\n     * Allows you to define if the action button is visible on the screen.\n     */\n    visible?: boolean;\n}\n\n/**\n * Header Action\n * @isViewNode true\n */\nexport interface HeaderAction extends Action {\n    /**\n     * Allows you to define if the action button is visible on the screen.\n     */\n    visible?: boolean;\n}\n\n/**\n * ToolBar Action\n * @isViewNode true\n */\nexport interface ObjectPageToolBarAction extends Action {\n    /**\n     * Allows you to define if the action button is visible on the screen.\n     */\n    visible?: boolean;\n}\n\n/**\n * Footer Action\n * @isViewNode true\n */\nexport interface ObjectPageFooterAction extends Action {\n    /**\n     * Allows you to define if the action button is visible on the screen.\n     */\n    visible?: boolean;\n}\n\n/**\n * Standard Action\n * @isViewNode true\n */\nexport interface StandardAction {\n    /**\n     * Allows you to define if the button is visible on the screen.\n     */\n    visible?: boolean;\n}\n\n/**\n * Share\n * @isViewNode true\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface Share extends StandardAction {}\n\n/**\n * Share\n * @isViewNode true\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface ShareOP extends StandardAction {}\n\n/**\n * Up and Down Navigation\n * @isViewNode true\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface UpAndDownNavigationOP extends StandardAction {}\n\n/**\n * Save and Edit\n * @isViewNode true\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface SaveAndEditOP extends StandardAction {}\n\nexport interface HeaderActionsStandard {\n    Share?: Share;\n}\n\nexport interface ObjectPageHeaderActionsStandard {\n    UpAndDownNavigation?: UpAndDownNavigationOP;\n    Share?: ShareOP;\n}\n\nexport interface ObjectPageFooterActionsStandard {\n    SaveAndEdit?: SaveAndEditOP;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface HeaderActionStandard extends StandardAction {}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface ObjectPageHeaderActionStandard extends StandardAction {}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface ObjectPageFooterActionStandard extends StandardAction {}\n", "import type {\n    ObjectStreamCardsSettingsDef,\n    SapOvpDefaultSpanDef,\n    SapOvpPlotAreaDef,\n    SapOvpTabSetting,\n    SapOvpTimeAxisDef\n} from '../../common';\n\nexport interface CommonCardSettings {\n    /**\n     * Represents the dominant entity set that will be displayed in the given card.\n     */\n    entitySet?: string;\n    /**\n     * The language-dependent title of the card, used in the card header.\n     * @i18nClassification TIT: Title of the card, used in the card header\n     */\n    title: string;\n    /**\n     * The language-dependent subtitle of the card, used in the card header.\n     * @i18nClassification TIT: Subtitle of the card, used in the card header\n     */\n    subTitle?: string;\n    /**\n     * Represents the identification annotation path.\n     */\n    identificationAnnotationPath?: string;\n    /**\n     * Represents the selection annotation path.\n     */\n    selectionAnnotationPath?: string;\n    /**\n     * Represents the presentation annotation path.\n     */\n    presentationAnnotationPath?: string;\n    /**\n     * The category of the card, as used in the card header.\n     */\n    category?: string;\n    /**\n     * To load cards with specific requirements, define a default size as part of the card definition in the descriptor file.\n     */\n    defaultSpan?: SapOvpDefaultSpanDef;\n    /**\n     * Define an authorization check at card level.\n     */\n    requireAppAuthorization?: string;\n    /**\n     * Represents the card with view switch control.\n     */\n    tabs?: [SapOvpTabSetting, ...SapOvpTabSetting[]];\n    /**\n     * add $Select parameter in data fetch URL\n     */\n    addODataSelect?: boolean;\n}\n\nexport enum ChartCardType {\n    cardBubble = 'cardBubble',\n    cardchartsline = 'cardchartsline',\n    cardchartsdonut = 'cardchartsdonut'\n}\n\nexport enum CardTemplateType {\n    analytical = 'sap.ovp.cards.charts.analytical',\n    analyticalv4 = 'sap.ovp.cards.v4.charts.analytical',\n    list = 'sap.ovp.cards.list',\n    listv4 = 'sap.ovp.cards.v4.list',\n    linklist = 'sap.ovp.cards.linklist',\n    table = 'sap.ovp.cards.table',\n    tablev4 = 'sap.ovp.cards.v4.table',\n    stack = 'sap.ovp.cards.stack'\n}\n\nexport const cardTemplateTypeMap = {\n    'sap.ovp.cards.charts.analytical': 'AnalyticalCard',\n    'sap.ovp.cards.v4.charts.analytical': 'AnalyticalCard',\n    'sap.ovp.cards.list': 'ListCard',\n    'sap.ovp.cards.v4.list': 'ListCard',\n    'sap.ovp.cards.linklist': 'LinklistCard',\n    'sap.ovp.cards.table': 'TableCard',\n    'sap.ovp.cards.v4.table': 'TableCard',\n    'sap.ovp.cards.stack': 'StackCard'\n};\n\nexport enum CardSettingsType {\n    analyticalCardSettings = 'analyticalCardSettings',\n    analyticalCardSettingsv4 = 'analyticalCardSettingsv4',\n    listCardSettings = 'listCardSettings',\n    listCardSettingsv4 = 'listCardSettingsv4',\n    stackCardSettings = 'stackCardSettings',\n    linkListCardSettings = 'linkListCardSettings',\n    tableCardSettings = 'tableCardSettings',\n    tableCardSettingsv4 = 'tableCardSettingsv4'\n}\n\nexport enum MeasureAggregateValues {\n    average = 'average',\n    max = 'max',\n    min = 'min',\n    sum = 'sum',\n    count = '$count'\n}\n\nexport interface MeasureAggregateSettings {\n    Axis1?: MeasureAggregateValues;\n    Axis2?: MeasureAggregateValues;\n    Axis3?: MeasureAggregateValues;\n}\n\n/**\n * Custom Card\n * @isViewNode true\n */\nexport interface CustomCard {\n    /**\n     * Represents the model for the card\n     */\n    model: string;\n    /**\n     * Represents the card component path to use for this card.\n     * @TJS-pattern ^(?!(sap.ovp.cards.charts.analytical|sap.ovp.cards.v4.charts.analytical|sap.ovp.cards.linklist|sap.ovp.cards.list|sap.ovp.cards.v4.list|sap.ovp.cards.stack|sap.ovp.cards.table|sap.ovp.cards.v4.table)$).*$\n     */\n    template: string; // due the extension concept for cards, this can be any string\n    /**\n     * Represents the properties that are passed to the custom card.\n     */\n    settings?: CustomCardSettings;\n}\n/**\n * List Card\n * @isViewNode true\n * @controlProperty template\n */\nexport interface ListCard {\n    /**\n     * Represents the model for the List Card\n     */\n    model: string;\n    /**\n     * Represents the card component path to use for this List Card.\n     */\n    template: CardTemplateType.list | CardTemplateType.listv4;\n    /**\n     * Represents the properties that are passed to the list card.\n     */\n    listCardSettings: ListCardSettings;\n}\n\n/**\n * Stack Card\n * @isViewNode true\n * @controlProperty template\n */\nexport interface StackCard {\n    /**\n     * Represents the model for the StackCard.\n     */\n    model: string;\n    /**\n     * Represents the Stack Card component path to use for this card.\n     */\n    template: CardTemplateType.stack;\n    /**\n     * Represents the properties that are passed to the stack card.\n     */\n    stackCardSettings: StackCardSettings;\n}\n\n/**\n * Link List Card\n * @isViewNode true\n * @controlProperty template\n */\nexport interface LinklistCard {\n    /**\n     * Represents the model for the Link list Card.\n     */\n    model?: string;\n    /**\n     * Represents the Link list Card component path to use for this card.\n     */\n    template: CardTemplateType.linklist;\n    /**\n     * Represents the properties that are passed to the link list card.\n     */\n    linkListCardSettings: LinkListCardSettings;\n}\n\n/**\n * Table Card\n * @isViewNode true\n * @controlProperty template\n */\nexport interface TableCard {\n    /**\n     * Represents the model for the TableCard.\n     */\n    model: string;\n    /**\n     * Represents the Table Card component path to use for this card.\n     */\n    template: CardTemplateType.table | CardTemplateType.tablev4;\n    /**\n     * Represents the properties that are passed to the table card.\n     */\n    tableCardSettings: TableCardSettings;\n    /**\n     * If you set disableTableCardFlexibility to true, then at runtime, DataField records are sorted according to the importance set in the com.sap.vocabularies.UI.v1.ImportanceType annotation, and their order of entry.\n     * If you set disableTableCardFlexibility to false, then at runtime, table columns are sorted according to the importance set in the com.sap.vocabularies.UI.v1.ImportanceType annotation, and their order of entry.\n     */\n    disableTableCardFlexibility?: boolean;\n}\n\n/**\n * Analytical Card\n * @isViewNode true\n * @controlProperty template\n */\nexport interface AnalyticalCard {\n    /**\n     * Represents the model for the Analytical Card\n     */\n    model: string;\n    /**\n     * Represents the Analytical Card component path to use for this card.\n     */\n    template: CardTemplateType.analytical | CardTemplateType.analyticalv4;\n    /**\n     * Represents the properties that are passed to the analytical card.\n     */\n    analyticalCardSettings: AnalyticalCardSettings | AnalyticalCardSettingsv4;\n}\n\nexport type CustomCardNavigationType = 'dataPointNav' | 'chartNav' | 'headerNav' | 'noHeaderNav';\n\n/**\n * @displayName settings\n */\nexport interface CustomCardSettings extends CommonCardSettings {\n    /**\n     * Represents the user defined string in placeholder card.\n     */\n    itemText?: string;\n    /**\n     * Represents things like people, number of items.\n     */\n    valueSelectionInfo?: string;\n    /**\n     * Represents the static content that will be displayed in this card.\n     */\n    staticContent?: {\n        [k: string]: any;\n    }[];\n    /**\n     * Represents the flavor of the list to use in this card. The flavor can be bar chart, carousel or standard.\n     */\n    listFlavor?: 'standard' | 'bar' | 'carousel';\n    /**\n     * Represents the type of list to use for this card. The list can be extended to display more information or condensed to take up less space on the card.\n     */\n    listType?: 'extended' | 'condensed';\n    /**\n     * Represents the sort key for the entity set.\n     */\n    sortBy?: string;\n    /**\n     * Represents the sort order for the entity set.\n     */\n    sortOrder?: 'ascending' | 'descending';\n    /**\n     * Represents the annotation path.\n     */\n    annotationPath?: string;\n    /**\n     * Represents the chart annotation path.\n     */\n    chartAnnotationPath?: string;\n    /**\n     * Represents the data point annotation path.\n     */\n    dataPointAnnotationPath?: string;\n    /**\n     * Represents the KPI annotation path.\n     */\n    kpiAnnotationPath?: string;\n    /**\n     * Represents the selection presentation annotation path.\n     */\n    selectionPresentationAnnotationPath?: string;\n    /**\n     * Represents the dynamic subtitle annotation path.\n     */\n    dynamicSubtitleAnnotationPath?: string;\n    /**\n     * Represents the flag to indicate priority of number formatting over sap text.\n     */\n    ignoreSapText?: boolean;\n    /**\n     * Represents the Object Stream properties - properties that are passed to the Object Stream cards.\n     */\n    objectStreamCardsSettings?: ObjectStreamCardsSettingsDef;\n    /**\n     * Represents the flag to indicate the use of object number/smart field.\n     */\n    enableLocaleCurrencyFormatting?: boolean;\n    /**\n     * Represents the configuration to alter the navigation mode in OVP Analytical Cards.\n     */\n    navigation?: CustomCardNavigationType;\n    /**\n     * Represents a switch to Show or Hide Filters in Cards Headers in OVP application.\n     */\n    showFilterInHeader?: boolean;\n    /**\n     * Represents a switch to Show or Hide Sorting in Cards Headers in OVP application.\n     */\n    showSortingInHeader?: boolean;\n    /**\n     * Flag for enabling images in a condensed list card.\n     */\n    imageSupported?: boolean;\n    /**\n     * Flag for show line item detail in list and table card.\n     */\n    showLineItemDetail?: boolean;\n    /**\n     * This property is responsible for showing and hiding text labels on the geo spots.\n     */\n    showLabelText?: boolean;\n    /**\n     * This property is responsible for passing custom parameters present in the entity set to the navigating application.\n     */\n    customParams?: string;\n    /**\n     * This property is responsible for setting specific chart settings.\n     */\n    chartProperties?: {\n        plotArea?: SapOvpPlotAreaDef;\n        timeAxis?: SapOvpTimeAxisDef;\n    };\n    /**\n     * Represents the configuration to customize the column stacked chart.\n     */\n    colorPalette?:\n        | {\n              [k: string]: any;\n          }[]\n        | {\n              [k: string]: any;\n          };\n    [k: string]: any;\n}\n\n/**\n * @displayName settings\n */\nexport interface AnalyticalCardSettings extends CommonCardSettings {\n    /**\n     * Represents the chart annotation path.\n     */\n    chartAnnotationPath?: string;\n    /**\n     * Represents the data point annotation path.\n     */\n    dataPointAnnotationPath?: string;\n    /**\n     * Represents things like people, number of items.\n     */\n    valueSelectionInfo?: string;\n}\n\n/**\n * @displayName settings\n */\nexport interface AnalyticalCardSettingsv4 extends AnalyticalCardSettings {\n    /**\n     *\n     */\n    measureAggregate?: MeasureAggregateSettings;\n}\n\nexport enum ListFlavorType {\n    standard = 'standard',\n    bar = 'bar',\n    carousel = 'carousel'\n}\n\nexport enum ListTypeType {\n    extended = 'extended',\n    condensed = 'condensed'\n}\n\nexport enum SortOrderType {\n    ascending = 'ascending',\n    descending = 'descending'\n}\n\n/**\n * @displayName settings\n */\nexport interface ListCardSettings extends CommonCardSettings {\n    /**\n     * Represents the flavor of the list to use in this card. The flavor can be bar chart, carousel or standard.\n     */\n    listFlavor?: ListFlavorType;\n    /**\n     * Represents the type of list to use for this card. The list can be extended to display more information or condensed to take up less space on the card.\n     */\n    listType?: ListTypeType;\n    /**\n     * Represents the annotation path.\n     */\n    annotationPath?: string;\n    /**\n     * Represents things like people, number of items.\n     */\n    valueSelectionInfo?: string;\n    /**\n     * Defines the property by which the list shall be sorted.\n     */\n    sortBy?: string;\n    /**\n     * Defines the sort order.\n     */\n    sortOrder?: SortOrderType;\n    /**\n     * Represents the data point annotation path.\n     */\n    dataPointAnnotationPath?: string;\n    /**\n     * Flag for show line item detail in list and table card.\n     */\n    showLineItemDetail?: boolean;\n}\n\n/**\n * @displayName settings\n */\nexport interface StackCardSettings extends CommonCardSettings {\n    /**\n     * Represents the user defined string in placeholder card.\n     */\n    itemText?: string;\n    /**\n     * The navigation property used to display information from a secondary entity set.\n     */\n    objectStreamCardsNavigationProperty?: string;\n    /**\n     * Configures additional settings for the cards displayed in the object stream.\n     */\n    objectStreamCardsSettings?: ObjectStreamCardsSettingsDef;\n}\n\n/**\n * @displayName settings\n */\nexport interface TableCardSettings extends CommonCardSettings {\n    /**\n     * Represents the annotation path.\n     */\n    annotationPath?: string;\n    /**\n     * Represents the flavor of the list to use in this card. The flavor can be bar chart, carousel or standard.\n     */\n    listFlavor?: ListFlavorType;\n    /**\n     * Represents the type of list to use for this card. The list can be extended to display more information or condensed to take up less space on the card.\n     */\n    listType?: ListTypeType;\n    /**\n     * Represents the data point annotation path.\n     */\n    dataPointAnnotationPath?: string;\n    /**\n     * Represents the selection presentation annotation path.\n     */\n    selectionPresentationAnnotationPath?: string;\n    /**\n     * Represents things like people, number of items.\n     */\n    valueSelectionInfo?: string;\n    /**\n     * Defines the property by which the list shall be sorted.\n     */\n    sortBy?: string;\n    /**\n     * Defines the sort order.\n     */\n    sortOrder?: SortOrderType;\n    /**\n     * Flag for show line item detail in list and table card.\n     */\n    showLineItemDetail?: boolean;\n}\n\nexport enum LinkListFlavorType {\n    standard = 'standard',\n    carousel = 'carousel'\n}\n\n/**\n * @displayName settings\n */\nexport interface LinkListCardSettings extends CommonCardSettings {\n    /**\n     * The targetUri is a URI defining the link to a quick view, related application or external resource.\n     */\n    targetUri?: string;\n    /**\n     * listFlavor represents the flavor of the list to use in this card. The flavor can be bar chart, carousel or standard.\n     */\n    listFlavor?: LinkListFlavorType;\n    /**\n     * sortBy defines the property by which the list shall be sorted.\n     */\n    sortBy?: string;\n    /**\n     * sortOrder defines the sort order. Valid values are 'ascending' or 'descending'\n     */\n    sortOrder?: SortOrderType;\n    /**\n     * headerAnnotationPath represents the path to a HeaderInfo annotation.\n     */\n    headerAnnotationPath?: string;\n    /**\n     * staticContent represents the static content of a static link list card.\n     */\n    staticContent?: StaticContent[];\n    /**\n     * Represents the annotation path.\n     */\n    annotationPath?: string;\n}\n\nexport interface StaticContent {\n    /**\n     * The language-dependent title of the StaticContent.\n     * @i18nClassification TIT: Title of the StaticContent\n     */\n    title: string;\n    /**\n     * The language-dependent subtitle of the StaticContent.\n     * @i18nClassification TIT: Subtitle of the StaticContent\n     */\n    subTitle?: string;\n    /**\n     * The uri for the image of the StaticContent.\n     */\n    imageUri?: string;\n    /**\n     * The uri for the target of the StaticContent.\n     */\n    targetUri?: string;\n    /**\n     * The alternative text for the image of the StaticContent.\n     * @i18nClassification ALT: The alternative text for the image of the StaticContent\n     */\n    imageAltText?: string;\n    /**\n     * Used to provide intent based navigation.\n     */\n    semanticObject?: string;\n    /**\n     * Used to provide intent based navigation.\n     */\n    action?: string;\n    /**\n     * Open static content in a new window.\n     */\n    openInNewWindow?: boolean;\n}\n", "export const enum DateRangeType {\n    DATERANGE = 'DATERANGE',\n    DATE = 'DATE',\n    FROM = 'FROM',\n    TO = 'TO',\n    DAYS = 'DAYS',\n    LASTDAYS = 'LASTDAYS',\n    LASTWEEKS = 'LASTWEEKS',\n    WEEK = 'WEEK',\n    LASTMONTHS = 'LASTMONTHS',\n    MONTH = 'MONTH',\n    QUARTER = 'QUARTER',\n    LASTQUARTERS = 'LASTQUARTERS',\n    LASTYEARS = 'LASTYEARS',\n    LASTYEAR = 'LASTYEAR',\n    YEAR = 'YEAR',\n    NEXTDAYS = 'NEXTDAYS',\n    NEXTWEEKS = 'NEXTWEEKS',\n    NEXTMONTHS = 'NEXTMONTHS',\n    NEXTQUARTERS = 'NEXTQUARTERS',\n    NEXTYEARS = 'NEXTYEARS',\n    NEXT = 'NEXT',\n    SPECIFICMONTH = 'SPECIFICMONTH',\n    YESTERDAY = 'YESTERDAY',\n    YEARTODATE = 'YEARTODATE',\n    TODAY = 'TODAY',\n    TOMORROW = 'TOMORROW',\n    THISWEEK = 'THISWEEK',\n    LASTWEEK = 'LASTWEEK',\n    LAST2WEEKS = 'LAST2WEEKS',\n    LAST3WEEKS = 'LAST3WEEKS',\n    LAST4WEEKS = 'LAST4WEEKS',\n    LAST5WEEKS = 'LAST5WEEKS',\n    NEXTWEEK = 'NEXTWEEK',\n    NEXT2WEEKS = 'NEXT2WEEKS',\n    NEXT3WEEKS = 'NEXT3WEEKS',\n    NEXT4WEEKS = 'NEXT4WEEKS',\n    NEXT5WEEKS = 'NEXT5WEEKS',\n    THISMONTH = 'THISMONTH',\n    LASTMONTH = 'LASTMONTH',\n    NEXTMONTH = 'NEXTMONTH',\n    THISQUARTER = 'THISQUARTER',\n    LASTQUARTER = 'LASTQUARTER',\n    NEXTQUARTER = 'NEXTQUARTER',\n    QUARTER1 = 'QUARTER1',\n    QUARTER2 = 'QUARTER2',\n    QUARTER3 = 'QUARTER3',\n    QUARTER4 = 'QUARTER4',\n    TODAYFROMTO = 'TODAYFROMTO'\n}\n\n/**\n * Filter Field\n * @isViewNode true\n */\nexport type SelectionField = {} | SelectionFieldDateSettings;\n\n/**\n * Filter Field for Date Settings\n * @isViewNode true\n */\nexport interface SelectionFieldDateSettings {\n    /**\n     * The selectedValues property is a set of standard date range values that you want to include or exclude.\n     */\n    selectedValues?: DateRangeType[];\n    /**\n     * The exclude property is set to True by default. This means excluding all values given as selectedValues from the list of date range filters. If the exclude property is set to False, the application shows only selected values in the list of date range filters.\n     */\n    exclude?: boolean;\n    /**\n     * This property references a JS class, which you use to modify the date range value list. You can either remove standard data range values or add custom values.\n     * The customDateRangeImplementation setting takes priority followed by filter and selectedValues when excluding date range types.\n     */\n    customDateRangeImplementation?: string;\n    /**\n     * You can use the filter settings to include and exclude specific date range values.\n     */\n    filter?: FilterType[];\n}\n\n/**\n * Filter Fields\n * @isViewNode true\n */\nexport interface SelectionFields {\n    [key: string]: SelectionField;\n}\n\nexport const enum FilterPathType {\n    key = 'key',\n    catgory = 'category'\n}\n\nexport type FilterType = {\n    /**\n     * Choose 'key' to define filter values for single values of the date range, or 'category' to filter by a whole subset.\n     */\n    path: FilterPathType;\n    /**\n     * The 'contains' string specifies a filter describing a set of values of the date range type.\n     */\n    contains?: string;\n    /**\n     * Defines a single value of the standard date range type.\n     */\n    equals?: DateRangeType[];\n    /**\n     * The exclude property is set to True by default. This means excluding all values given as selectedValues from the list of date range filters. If the exclude property is set to False, the application shows only selected values in the list of date range filters.\n     */\n    exclude?: boolean;\n};\n\nexport interface DateRange {\n    /**\n     * If set to true all date fields with filter restriction interval will be treated as DateTimeRange filters.\n     */\n    useDateRange?: boolean;\n    /**\n     * The selectedValues property is a set of standard date range values that you want to include or exclude.\n     */\n    selectedValues?: DateRangeType[];\n    /**\n     * The exclude property is set to True by default. This means excluding all values given as selectedValues from the list of date range filters. If the exclude property is set to False, the application shows only selected values in the list of date range filters.\n     */\n    exclude?: boolean;\n}\n\n/**\n * Filter Bar\n * @isViewNode true\n */\nexport interface ListReportFilterBar {\n    /**\n     * Controls whether smart variant management is active. Default is true.\n     */\n    smartVariantManagement?: boolean;\n    /**\n     * If liveMode is set, the search will be automatically triggered when a filter value is set.\n     */\n\n    liveMode?: boolean;\n    /**\n     * If you set the flag to true, then standard variant management is not available in the app. The app name is displayed instead.\n     * If you set the flag to false or if the flag is not at all contained in the manifest of the app, the standard variant management is available and can be enabled or disabled.\n     */\n    variantManagementHidden?: boolean;\n    /**\n     * You can choose an app-specific title by setting the corresponding value for the subTitleIfVariantMgmtHidden property.\n     * @i18nClassification TIT: Subtitle if variant management is hidden\n     */\n    subTitleIfVariantMgmtHidden?: string;\n    /**\n     * Use to set date settings for fields in smart filter bar\n     */\n    dateSettings?: DateRange;\n    /**\n     * Handles visibility of the Clear button on the FilterBar.\n     */\n    showClearOnFB?: boolean;\n    /**\n     * Handles visibility of the Filter button on the FilterBar.\n     */\n    showFilterConfiguration?: boolean;\n    /**\n     * Handles visibility of the Restore button on the FilterBar.\n     */\n    showRestoreOnFB?: boolean;\n    /**\n     * @isViewNode true\n     * Selection Fields\n     */\n    selectionFields?: SelectionFields;\n}\n\n/**\n * Filter Bar\n * @isViewNode true\n */\nexport interface AnalyticalListPageFilterBar extends ListReportFilterBar {\n    /**\n     * Go button is displayed for compact filters when this is set to true\n     */\n    showGoButtonOnFilterBar?: boolean;\n    /**\n     * Lets you to add default values for FilterBar using SelectionVariant annotation\n     */\n    filterDefaultsFromSelectionVariant?: boolean;\n}\n", "import type { SAPUI5_FRAGMENT_CLASS } from '../../common/webapp/manifest/sapUi5';\nimport type { ToolBar } from './ToolBar';\nimport type { Action } from './Action';\n\nexport enum HAlign {\n    initial = 'Initial',\n    left = 'Left',\n    center = 'Center',\n    right = 'Right',\n    begin = 'Begin',\n    end = 'End'\n}\n\nexport type ExportType = keyof typeof sap.ui.comp.smarttable.ExportType;\n\n/**\n * Column\n * @isViewNode true\n */\nexport interface TableColumn {\n    /**\n     * The width property defines the width of the column.\n     */\n    width?: string;\n    /**\n     * The hAlign property defines the horizontal alignment of the column content.\n     */\n    hAlign?: HAlign;\n}\n\n/**\n * Column Action\n * @isViewNode true\n */\nexport interface TableColumnAction extends Action, TableColumn {}\n\n/**\n * Custom Column\n * @isViewNode true\n */\nexport interface TableCustomColumn {\n    /**\n     * In case the fragment needs to be re-used for multiple tabs, the id property must be set to make the ids unique.\n     * @artifactType Fragment\n     */\n    id?: string;\n    /**\n     * The label of the custom column, preferably as an i18n key.\n     * @i18nClassification COL: Custom column header text\n     * @artifactType Fragment\n     */\n    text?: string;\n    /**\n     * The column key\n     * @artifactType Fragment\n     */\n    columnKey: string;\n    /**\n     * The index of the column in the overall collection; if undefined, the custom column will be added at the end of the table.\n     * @minimum 0\n     * @hidden true\n     * @artifactType Fragment\n     */\n    columnIndex?: number;\n    /**\n     * If the content of your custom column refers to a property (such as{Price}), you need to include a corresponding 'leadingProperty' entry in the column definition.\n     * @artifactType Fragment\n     */\n    leadingProperty?: string;\n    /**\n     * The UI5 control used for your extension\n     * @artifactType Manifest\n     */\n    className: typeof SAPUI5_FRAGMENT_CLASS;\n    /**\n     * The relative path to your fragment with path segments separated by '.'. The first element is the app ID.\n     * @artifactType Manifest\n     */\n    fragmentName: string;\n    /**\n     * In case of a responsive table, you additionally need to specify a fragment for the table cells.\n     * @artifactType Manifest\n     */\n    cellsFragmentName?: string;\n    /**\n     * If you use QuickVariantSelectionX, you need to define the extensions per tab. 'tabKey' is the key provided when defining the QuickVariantSelectionX.\n     * @hidden true\n     * @artifactType Manifest\n     */\n    tabKey?: string;\n    /**\n     * Type of custom column view extension.\n     * @artifactType Manifest\n     */\n    extensionType: TableColumnExtensionTypeV2;\n}\n\nexport enum customColumnViewTypes {\n    XML = 'XML'\n}\n\nexport enum TableTypeV2 {\n    ResponsiveTable = 'ResponsiveTable',\n    GridTable = 'GridTable',\n    AnalyticalTable = 'AnalyticalTable',\n    TreeTable = 'TreeTable'\n}\n\nexport enum TableColumnExtensionTypeV2 {\n    ResponsiveTableColumnsExtension = 'ResponsiveTableColumnsExtension',\n    AnalyticalTableColumnsExtension = 'AnalyticalTableColumnsExtension',\n    TreeTableColumnsExtension = 'TreeTableColumnsExtension',\n    GridTableColumnsExtension = 'GridTableColumnsExtension'\n}\n\nexport type AnyTableType =\n    | TableTypeV2.AnalyticalTable\n    | TableTypeV2.ResponsiveTable\n    | TableTypeV2.GridTable\n    | TableTypeV2.TreeTable;\nexport type AnyTable = AnalyticalTable | ResponsiveTable | GridTable | TreeTable;\n\n/**\n * Custom Columns\n * @isViewNode true\n */\nexport type TableCustomColumns = Array<TableCustomColumn>;\n\nexport interface GenericColumns {\n    [key: string]: TableColumn | TableCustomColumns | TableColumnAction;\n}\n\nexport enum PopinLayout {\n    Block = 'Block',\n    GridLarge = 'GridLarge',\n    GridSmall = 'GridSmall'\n}\n\nexport interface QuickVariant {\n    /**\n     * A key entry that is used for initializing the corresponding SegmentedButton item. This entry is mandatory.\n     */\n    key: string;\n    /**\n     * Use annotationPath to define a specific variant that points to a SelectionVariant or SelectionPresentationVariant annotation.\n     */\n    annotationPath: string;\n}\n\nexport interface QuickVariantX extends QuickVariant {\n    /**\n     * Represents the entity set that will be displayed in this variant\n     */\n    entitySet: string;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n    /**\n     * The 'Select All' button is disabled by default. To enable it, set selectAll to true.\n     */\n    selectAll?: boolean;\n    /**\n     * If new data needs to be loaded from the back-end system for this, the number of lines to be loaded is restricted to the specified limit. The default value for this limit is 200. If selectAll is true, the selection limit is not evaluated.\n     */\n    selectionLimit?: number;\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: AnyTableType;\n    /**\n     * To enable navigation for charts, you have to set the property to \"true\" and maintain an internal navigation target in the manifest.\n     */\n    showItemNavigationOnChart?: boolean;\n    /**\n     *  Used to enable inline deletion in a responsive table of list report and object page\n     */\n    inlineDelete?: boolean;\n}\n\nexport interface QuickVariantSelection {\n    /**\n     * To show the number of records available, set showCounts to true.\n     */\n    showCounts?: boolean;\n    /**\n     * The variants section contains a set of entries that point to SelectionVariants or SelectionPresentationVariants defined in the annotations.\n     */\n    variants: {\n        [key: string]: QuickVariant;\n    };\n}\n\nexport interface QuickVariantSelectionX extends QuickVariantSelection {\n    /**\n     * When set to true, this enables automatic binding of the table with either the tableBindingPath (if it exists) or the entitySet property.\n     */\n    enableAutoBinding?: boolean;\n    /**\n     * The variants section contains a set of entries that point to SelectionVariants or SelectionPresentationVariants defined in the annotations.\n     */\n    variants: {\n        [key: string]: QuickVariantX;\n    };\n}\n\nexport interface CreateWithFilters {\n    /**\n     * For the new create action to use the filter settings as input, set strategy to \"extension\" and implement the extension function as mentioned in help.sap.com for SAP S/4 HANA, section \u201CPrefilling Fields When Creating a New Entity Using an Extension Point\u201C.\n     */\n    strategy: Strategy;\n}\n\nexport enum Strategy {\n    extension = 'extension'\n}\n\nexport enum DefaultContentView {\n    charttable = 'charttable',\n    chart = 'chart',\n    table = 'table'\n}\n\nexport enum DefaultFilterMode {\n    visual = 'visual',\n    compact = 'compact'\n}\n\nexport enum LoadDataOnAppLaunchSettings {\n    always = 'always',\n    never = 'never',\n    ifAnyFilterExist = 'ifAnyFilterExist'\n}\n\nexport interface DataLoadSettings {\n    /**\n     * Change the default behavior for autoloading of data.\n     * For multi-view scenarios, you can also change the setting enableAutobinding to False under quickVariantSelectionX instead of using the loadDataOnAppLaunch setting.\n     */\n    loadDataOnAppLaunch: LoadDataOnAppLaunchSettings;\n}\n\nexport interface Fields4Dialog {\n    fields: string[];\n}\n\nexport interface CommonTableSettings<COLS = GenericColumns> {\n    /**\n     * You can enable the creation of objects that have a maximum of 8 data fields through a dialog in the list report page.\n     */\n    createWithParameterDialog?: Fields4Dialog;\n    /**\n     * The 'Select All' button is disabled by default. To enable it, set selectAll to true.\n     */\n    selectAll?: boolean;\n    /**\n     * If new data needs to be loaded from the back-end system for this, the number of lines to be loaded is restricted to the specified limit. The default value for this limit is 200. If selectAll is true, the selection limit is not evaluated.\n     */\n    selectionLimit?: number;\n    /**\n     * The showTablePersonalisation attribute can be set to false to hide the table personalization button.\n     */\n    showTablePersonalisation?: boolean;\n    /**\n     * useExportToExcel must be set to true if you want to export data to a spreadsheet application, for example Microsoft Excel.\n     */\n    useExportToExcel?: boolean;\n    /**\n     * Specifies the type of export to be used in the SmartTable control. UI5Client is the default option.\n     */\n    exportType?: ExportType;\n    /**\n     * Set to false if the table does not occupy the entire space available in the container.\n     */\n    fitContainer?: boolean;\n    /**\n     * With quickVariantSelection you can switch on the multiple view feature. It links to variants you must have added to your annotations beforehand.\n     */\n    quickVariantSelection?: QuickVariantSelection;\n    /**\n     * Switch on the multiple view feature (Multiple table mode with charts) and link to the variants you have added to your annotations.\n     */\n    quickVariantSelectionX?: QuickVariantSelectionX;\n    /**\n     * For analytical tables, grid tables and tree tables you can define a condensed table layout by setting condensedTableLayout to true.\n     */\n    condensedTableLayout?: boolean;\n    /**\n     * If you have enabled harmonized variant management, by default, you cannot set a filter in the table personalization settings.\n     * To enable filtering, set the enableTableFilterInPageVariant property to true.\n     */\n    enableTableFilterInPageVariant?: boolean;\n    /**\n     * Change the default behavior for autoloading of data.\n     */\n    dataLoadSettings?: DataLoadSettings;\n    /**\n     * Tool Bar\n     */\n    toolBar?: ToolBar;\n    /**\n     * Columns\n     * @isViewNode true\n     */\n    columns?: COLS;\n}\n\nexport interface ResponsiveTableCommonSettings extends CommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.ResponsiveTable;\n    /**\n     * Set includeItemInSelection to true if you want items to be selectable when they are clicked rather than after the selection control has been set.\n     */\n    includeItemInSelection?: boolean;\n    /**\n     * popinLayout defines the layout in which the table pop-in rows are rendered.\n     */\n    popinLayout?: PopinLayout;\n    /**\n     * createWithFilters adds a new create action that uses the filter settings as input.\n     */\n    createWithFilters?: CreateWithFilters;\n    /**\n     * In the list report and on the object page, you can enable buttons to display and hide draft values. By default, these buttons are hidden. To enable them, set the showDraftToggle flag to true.\n     */\n    showDraftToggle?: boolean;\n    /**\n     * growingThreshold defines the number of items to be requested from the model for each grow. This property can only be used if the growing property is set to true.\n     */\n    growingThreshold?: number;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ResponsiveTableWithMultiSelect extends ResponsiveTableCommonSettings {\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ResponsiveTableWithInlineDelete extends ResponsiveTableCommonSettings {\n    /**\n     *  Used to enable inline deletion in a responsive table of list report and object page\n     */\n    inlineDelete?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ResponsiveTable\n    extends ResponsiveTableCommonSettings,\n        ResponsiveTableWithMultiSelect,\n        ResponsiveTableWithInlineDelete {}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface TreeTable extends CommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.TreeTable;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n    /**\n     * In the list report and on the object page, you can enable buttons to display and hide draft values. By default, these buttons are hidden. To enable them, set the showDraftToggle flag to true.\n     */\n    showDraftToggle?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface AnalyticalTable extends CommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.AnalyticalTable;\n    /**\n     * Represents the SelectionPresentationVariant qualifier. ALP looks for SelectionPresentationVariant with this qualifier and if not found, it looks for PresentationVariant with this qualifier.\n     */\n    qualifier?: string;\n    /**\n     * Determines the visualization of content area\n     */\n    defaultContentView?: DefaultContentView;\n    /**\n     * Determines the filter mode that is used\n     */\n    defaultFilterMode?: DefaultFilterMode;\n    /**\n     * Lets you define title for the content area\n     * @i18nClassification TIT: Title for the content area\n     */\n    contentTitle?: string;\n    /**\n     * All filter fields will be set as in parameter\n     */\n    allFiltersAsInParameters?: boolean;\n    //TODO keyPerformanceIndicators\n    /**\n     * createWithFilters adds a new create action that uses the filter settings as input.\n     */\n    createWithFilters?: CreateWithFilters;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n    /**\n     * In the list report and on the object page, you can enable buttons to display and hide draft values. By default, these buttons are hidden. To enable them, set the showDraftToggle flag to true.\n     */\n    showDraftToggle?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface TableALPCommonSettings extends CommonTableSettings {\n    /**\n     * Represents the SelectionPresentationVariant qualifier. ALP looks for SelectionPresentationVariant with this qualifier and if not found, it looks for PresentationVariant with this qualifier.\n     */\n    qualifier?: string;\n    /**\n     * Determines the visualization of content area\n     */\n    defaultContentView?: DefaultContentView;\n    /**\n     * Determines the filter mode that is used\n     */\n    defaultFilterMode?: DefaultFilterMode;\n    /**\n     * Lets you define title for the content area\n     * @i18nClassification TIT: Title for the content area\n     */\n    contentTitle?: string;\n    /**\n     * This setting allows developer to determine chart / table interaction. 'true' would mean chart act as filter for table, 'false' would mean that matching table rows are highlighted but table is not filtered.\n     */\n    autoHide?: boolean;\n    /**\n     * All filter fields will be set as in parameter\n     */\n    allFiltersAsInParameters?: boolean;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ALPResponsiveTable extends TableALPCommonSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.ResponsiveTable;\n    /**\n     * growingThreshold defines the number of items to be requested from the model for each grow. This property can only be used if the growing property is set to true.\n     */\n    growingThreshold?: number;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ALPGridTable extends TableALPCommonSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.GridTable;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ALPAnalyticalTable extends TableALPCommonSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.AnalyticalTable;\n}\n\nexport interface TableALP extends ALPResponsiveTable, ALPGridTable, ALPAnalyticalTable {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.ResponsiveTable & TableTypeV2.GridTable & TableTypeV2.AnalyticalTable;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface GridTable extends CommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.GridTable;\n    /**\n     * createWithFilters adds a new create action that uses the filter settings as input.\n     */\n    createWithFilters?: CreateWithFilters;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n    /**\n     * In the list report and on the object page, you can enable buttons to display and hide draft values. By default, these buttons are hidden. To enable them, set the showDraftToggle flag to true.\n     */\n    showDraftToggle?: boolean;\n}\n", "export enum ChartType {\n    bar = 'bar',\n    column = 'column',\n    line = 'line',\n    combination = 'combination',\n    pie = 'pie',\n    donut = 'donut',\n    scatter = 'scatter',\n    bubble = 'bubble',\n    heatmap = 'heatmap',\n    bullet = 'bullet',\n    verticalBullet = 'vertical_bullet',\n    stackedBar = 'stacked_bar',\n    stackedColumn = 'stacked_column',\n    stackedCombination = 'stacked_combination',\n    horizontalStackedCombination = 'horizontal_stacked_combination',\n    dualBar = 'dual_bar',\n    dualColumn = 'dual_column',\n    dualLine = 'dual_line',\n    dualStackedBar = 'dual_stacked_bar',\n    dualStackedColumn = 'dual_stacked_column',\n    dualCombination = 'dual_combination',\n    dualStackedCombination = 'dual_stacked_combination',\n    dualHorizontalCombination = 'dual_horizontal_combination',\n    dualHorizontalStackedCombination = 'dual_horizontal_stacked_combination',\n    hundredStackedBar = '100_stacked_bar',\n    hundredStackedColumn = '100_stacked_column',\n    hundredDualStackedBar = '100_dual_stacked_bar',\n    hundredDualStackedColumn = '100_dual_stacked_column',\n    waterfall = 'waterfall',\n    horizontalWaterfall = 'horizontal_waterfall'\n}\n\n/**\n * Chart\n * @isViewNode true\n */\nexport interface ChartSettings {\n    /**\n     * Controls the visibility of the legend button.\n     */\n    showLegendButton?: boolean;\n    /**\n     * Controls the visibility of the chart download button.\n     */\n    showDownloadButton?: boolean;\n    /**\n     * Controls the visibility of the chart type button.\n     */\n    showChartTypeSelectionButton?: boolean;\n    /**\n     * Comma-separated value fields do not showup in the list of available chart types.\n     */\n    ignoredChartTypes?: ChartType[];\n    /**\n     * Controls the visibility of the data label.\n     */\n    showDataLabel?: boolean;\n}\n", "import type { HeaderAction, ObjectPageHeaderActionsStandard } from '.';\n\nexport enum AvatarShape {\n    Circle = 'Circle',\n    Square = 'Square'\n}\n\nexport interface GenericActions extends ObjectPageHeaderActionsStandard {\n    [id: string]: HeaderAction;\n}\n\n/**\n * Header\n * @isViewNode true\n */\nexport interface ObjectPageHeader<ACT = GenericActions> {\n    /**\n     * Set showRelatedApps to true to show the navigation button for related apps.\n     */\n    showRelatedApps?: boolean;\n    /**\n     * Set editableHeaderContent to true to make the header fields editable.\n     */\n    editableHeaderContent?: boolean;\n    /**\n     * Set simpleHeaderFacets to true to use simpler header facets.\n     */\n    simpleHeaderFacets?: boolean;\n    /**\n     * With displayShape you can define the shape of the avatar.\n     */\n    displayShape?: AvatarShape;\n    /**\n     * Set properties of actions on Object Page Header\n     */\n    actions?: ACT;\n}\n", "import type {\n    ObjectPageResponsiveTableWithMultiSelect,\n    ObjectPageResponsiveTableWithInlineDelete,\n    ObjectPageAnalyticalTable,\n    ObjectPageGridTable,\n    ObjectPageTreeTable,\n    ObjectPageChart,\n    ObjectPageForm\n} from './index';\nimport type { ViewTypes, SAPUI5_FRAGMENT_CLASS, SAPUI5_VIEW_CLASS } from '../../common/webapp/manifest/sapUi5';\n\n/**\n * Section\n * @isViewNode true\n */\nexport interface ObjectPageSectionV2 {\n    /**\n     * Allows you to define if the section should be visible on the screen.\n     */\n    visible?: boolean;\n}\n\n/**\n * Form\n * @isViewNode true\n */\nexport interface ObjectPageSectionFormV2 extends ObjectPageSectionV2 {\n    form?: ObjectPageForm;\n}\n\nexport type AnyObjectPageTableType =\n    | ObjectPageResponsiveTableWithMultiSelect\n    | ObjectPageResponsiveTableWithInlineDelete\n    | ObjectPageAnalyticalTable\n    | ObjectPageGridTable\n    | ObjectPageTreeTable;\n\n/**\n * Table\n * @isViewNode true\n */\nexport interface ObjectPageSectionTableV2 extends ObjectPageSectionV2 {\n    table?: AnyObjectPageTableType;\n}\n\n/**\n * Chart\n * @isViewNode true\n */\nexport interface ObjectPageSectionChartV2 extends ObjectPageSectionV2 {\n    chart?: ObjectPageChart;\n}\n\nexport interface ObjectPageSectionContactV2 extends ObjectPageSectionV2 {\n    /**\n     * Contact\n     *  @isViewNode true\n     */\n    contact?: object;\n}\n\nexport interface ObjectPageSectionAddressV2 extends ObjectPageSectionV2 {\n    /**\n     * Address\n     *  @isViewNode true\n     */\n    address?: object;\n}\n\nexport interface ObjectPageSubSectionContactV2 extends ObjectPageSectionV2 {\n    /**\n     * Contact\n     *  @isViewNode true\n     */\n    contact?: object;\n}\n\nexport interface ObjectPageSubSectionAddressV2 {\n    /**\n     * Address\n     *  @isViewNode true\n     */\n    address?: object;\n}\n\nexport type AnySubSectionType =\n    | ObjectPageSectionTableV2\n    | ObjectPageSectionChartV2\n    | ObjectPageSectionFormV2\n    | ObjectPageSubSectionContactV2\n    | ObjectPageSubSectionAddressV2;\n\nexport interface GenericSubSections {\n    [key: string]: AnySubSectionType;\n}\n\n/**\n * Subsection\n * @isViewNode true\n */\nexport interface ObjectPageSubSectionV2 extends ObjectPageSectionV2 {\n    subsections?: GenericSubSections;\n}\n\nexport type AnySectionType =\n    | ObjectPageSectionTableV2\n    | ObjectPageSectionChartV2\n    | ObjectPageSectionFormV2\n    | ObjectPageSectionContactV2\n    | ObjectPageSectionAddressV2\n    | ObjectPageSectionV2\n    | ObjectPageSubSectionV2;\n\nexport interface GenericSections {\n    [key: string]: AnySectionType;\n}\n\nexport type CustomSectionTypeV2 = ObjectPageCustomSectionView | ObjectPageCustomSectionFragment;\n\n/**\n * Custom Sections\n * @isViewNode true\n */\nexport interface CustomSections {\n    custom?: CustomSectionTypeV2[];\n}\n\nexport interface ObjectPageCustomSectionBase {\n    relatedFacet: string;\n    relativePosition: SectionPosition;\n    /**\n     * The label of the custom section, preferably as an i18n key\n     * @i18nClassification TIT: Custom section title\n     */\n    title: string;\n}\n\n/**\n * View\n * @isViewNode true\n */\nexport interface ObjectPageCustomSectionView extends ObjectPageCustomSectionBase {\n    className: typeof SAPUI5_VIEW_CLASS;\n    viewName: string;\n    type: ViewTypes;\n}\n\n/**\n * Fragment\n * @isViewNode true\n */\nexport interface ObjectPageCustomSectionFragment extends ObjectPageCustomSectionBase {\n    className: typeof SAPUI5_FRAGMENT_CLASS;\n    fragmentName: string;\n    type: ExtensionFragmentTypes;\n}\n\nexport enum SectionPosition {\n    AfterFacet = 'AfterFacet',\n    BeforeFacet = 'BeforeFacet',\n    ReplaceFacet = 'ReplaceFacet'\n}\n\nexport enum ExtensionFragmentTypes {\n    XML = 'XML'\n}\n", "import type { GenericColumns, TableTypeV2, QuickVariant, PopinLayout, ExportType } from './Table';\nimport type { ObjectPageToolBar } from './ObjectPageToolBar';\n\nexport interface QuickVariantSelectionOP {\n    /**\n     * To show the number of records available, set showCounts to true.\n     */\n    showCounts?: boolean;\n    /**\n     * The variants section contains a set of entries that point to SelectionVariants or SelectionPresentationVariants defined in the annotations.\n     */\n    variants: {\n        [key: number]: QuickVariant;\n    };\n}\n\nexport interface Fields4DialogOP {\n    fields: string[];\n}\n\nexport enum CreateMode {\n    inline = 'inline'\n}\n\nexport interface ObjectPageCommonTableSettings<COLS = GenericColumns> {\n    /**\n     * You can enable the creation of objects that have a maximum of 8 data fields through a dialog in the list report page.\n     */\n    createWithParameterDialog?: Fields4DialogOP;\n    /**\n     *  With editable you can control if a table can be edited. It should be set to false for smart tables with non-editable content.\n     */\n    editable?: boolean;\n    /**\n     * The 'Select All' button is disabled by default. To enable it, set selectAll to true.\n     */\n    selectAll?: boolean;\n    /**\n     * If new data needs to be loaded from the back-end system for this, the number of lines to be loaded is restricted to the specified limit. The default value for this limit is 200. If selectAll is true, the selection limit is not evaluated.\n     */\n    selectionLimit?: number;\n    /**\n     * With quickVariantSelection you can switch on the multiple view feature. It links to variants you must have been added to your annotations before.\n     */\n    quickVariantSelection?: QuickVariantSelectionOP;\n    /**\n     * useExportToExcel must be set to true if you want to export data to a spreadsheet application, for example Microsoft Excel.\n     */\n    useExportToExcel?: boolean;\n    /**\n     * Specifies the type of export to be used in the SmartTable control. UI5Client is the default option.\n     */\n    exportType?: ExportType;\n    /**\n     * Use createMode 'inline' to enable inline creation of table entries for draft enabled applications.\n     */\n    createMode?: CreateMode;\n    /**\n     * If createMode is set to inline, you can use this setting to disable the default sort order.\n     */\n    disableDefaultInlineCreateSort?: boolean;\n    /**\n     * To enable variant management for a specific table on an object page.\n     */\n    variantManagement?: boolean;\n    /**\n     * Tool Bar\n     */\n    toolBar?: ObjectPageToolBar;\n    /**\n     * Columns\n     */\n    columns?: COLS;\n}\n\n/**\n * @controlProperty type\n */\nexport interface ObjectPageResponsiveTableCommonSettings extends ObjectPageCommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.ResponsiveTable;\n    /**\n     * Set includeItemInSelection to true if you want items to be selectable when clicked, rather than after the selection control has been set.\n     */\n    includeItemInSelection?: boolean;\n    /**\n     * popinLayout defines the layout in which the table pop-in rows shall be rendered.\n     */\n    popinLayout?: PopinLayout;\n    /**\n     * growingThreshold defines the number of items to be requested from the model for each grow. This property can only be used if the growing property is set to true.\n     */\n    growingThreshold?: number;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ObjectPageResponsiveTableWithMultiSelect extends ObjectPageResponsiveTableCommonSettings {\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ObjectPageResponsiveTableWithInlineDelete extends ObjectPageResponsiveTableCommonSettings {\n    /**\n     *  Used to enable inline deletion in a responsive table of list report and object page\n     */\n    inlineDelete?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ObjectPageResponsiveTable\n    extends ObjectPageResponsiveTableCommonSettings,\n        ObjectPageResponsiveTableWithMultiSelect,\n        ObjectPageResponsiveTableWithInlineDelete {}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ObjectPageAnalyticalTable extends ObjectPageCommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.AnalyticalTable;\n    /**\n     * For the analytical table, grid table and tree table you can decide on a condensed table layout by setting condensedTableLayout to true.\n     */\n    condensedTableLayout?: boolean;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ObjectPageGridTable extends ObjectPageCommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.GridTable;\n    /**\n     * For the analytical table, grid table and tree table you can decide on a condensed table layout by setting condensedTableLayout to true.\n     */\n    condensedTableLayout?: boolean;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ObjectPageTreeTable extends ObjectPageCommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.TreeTable;\n    /**\n     * For the analytical table, grid table and tree table you can decide on a condensed table layout by setting condensedTableLayout to true.\n     */\n    condensedTableLayout?: boolean;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n}\n", "import type { SapUiGenericAppPageSettings } from '../../../common/page';\nimport type { FlexibleColumnLayout, FlexibleColumnLayoutType } from '../../../common';\n\nexport interface SapUiAppV2 {\n    pages: SapUiAppPagesV2;\n    _version?: string;\n    settings?: SapUiAppSettingsV2;\n}\n\nexport interface SapUiAppPagesV2 {\n    [key: string]: SapUiAppPageV2;\n}\n\nexport const FE_TEMPLATE_V2 = 'sap.suite.ui.generic.template';\nexport const FE_TEMPLATE_V2_OBJECT_PAGE = 'sap.suite.ui.generic.template.ObjectPage';\nexport const FE_TEMPLATE_V2_LIST_REPORT = 'sap.suite.ui.generic.template.ListReport';\nexport const FE_TEMPLATE_V2_ALP = 'sap.suite.ui.generic.template.AnalyticalListPage';\n\nexport interface SapUiAppPageV2 {\n    entitySet?: string;\n    navigationProperty?: string;\n    component?: {\n        name: string;\n        list?: boolean;\n        settings?: SapUiGenericAppPageSettings;\n        sections?: {\n            sectionIds?: SapUiGenericAppPageSettings;\n        };\n    };\n    pages?: SapUiAppPagesV2;\n    defaultLayoutType?: FlexibleColumnLayoutType;\n}\n\nexport interface SapUiAppSettingsV2 {\n    flexibleColumnLayout?: FlexibleColumnLayout;\n}\n", "import type {\n    SapUi5RootView,\n    SapUi5OdataModel,\n    SapUi5ResourceModel,\n    SapUi5RoutingRoute,\n    SAPUI5_FRAGMENT_CLASS,\n    SAPUI5_VIEW_CLASS,\n    ViewTypes,\n    SapUi5RoutingTargetBase,\n    SapUi5RoutingTarget,\n    Dependencies\n} from '../../../common/webapp/manifest/sapUi5';\nimport type { ManifestSection } from '../../..';\n\nexport interface SapUi5 {\n    flexEnabled?: boolean;\n    resources?: object;\n    dependencies?: Dependencies;\n    models?: { [key: string]: SapUi5OdataModel | SapUi5ResourceModel };\n    routing?: SapUi5RoutingV2;\n    [key: string]: string | object | boolean;\n    rootView?: SapUi5RootView;\n    extends?: SapUi5Extends;\n}\n\nexport interface SapUi5RoutingV2 {\n    routes?: SapUi5RoutingRoute[];\n    targets: SapUi5RoutingTargetsV2;\n}\n\nexport interface SapUi5RoutingTargetsV2 {\n    [key: string]: SapUi5RoutingTarget | SapUi5RoutingTargetCustomPageV2;\n}\n\nexport interface SapUi5RoutingTargetCustomPageV2 extends SapUi5RoutingTargetBase {\n    viewId: string;\n    viewName: string;\n    viewLevel?: number;\n    title?: string;\n}\n\n// SAPUI5 EXTENDS\nexport const SAPUI5_VIEW_EXTENSION = 'sap.ui.viewExtensions';\nexport const SAPUI5_CONTROLLER_EXTENSION = 'sap.ui.controllerExtensions';\n\nexport interface SapUi5Extends {\n    extensions?: SapUi5Extensions;\n}\n\nexport interface SapUi5Extensions {\n    [SAPUI5_VIEW_EXTENSION]?: SapUi5ViewExtensions;\n    // Added it here, but sync logic is not supported yet\n    [SAPUI5_CONTROLLER_EXTENSION]?: SapUi5ControllerExtensions;\n}\nexport const SAPUI5_VIEW_EXTENSION_OBJECT_PAGE = 'sap.suite.ui.generic.template.ObjectPage.view.Details';\nexport const SAPUI5_VIEW_EXTENSION_LIST_REPORT = 'sap.suite.ui.generic.template.ListReport.view.ListReport';\nexport const SAPUI5_VIEW_EXTENSION_ANALYTICAL_LIST_PAGE =\n    'sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage';\n\n// VIEW EXTENDS\nexport interface SapUi5PageViewExtensions {\n    [key: string]: SapUi5ViewExtensionView | SapUi5ViewExtensionFragment;\n}\n\nexport interface SapUi5ViewExtensions {\n    [SAPUI5_VIEW_EXTENSION_OBJECT_PAGE]?: SapUi5PageViewExtensions;\n    [SAPUI5_VIEW_EXTENSION_LIST_REPORT]?: SapUi5PageViewExtensions;\n}\n\nexport interface SapUi5ViewExtensionBase {\n    type: ViewTypes;\n}\n\nexport interface SapUi5ViewExtensionView extends SapUi5ViewExtensionBase {\n    className: typeof SAPUI5_VIEW_CLASS;\n    viewName: string;\n}\n\nexport interface SapUi5ViewExtensionFragment extends SapUi5ViewExtensionBase {\n    className: typeof SAPUI5_FRAGMENT_CLASS;\n    fragmentName: string;\n}\n\n// CONTROLLER EXTENDS\nexport interface SapUi5ControllerExtensions {\n    [SAPUI5_VIEW_EXTENSION_OBJECT_PAGE]?: SapUi5PageControllerExtensions;\n    [SAPUI5_VIEW_EXTENSION_LIST_REPORT]?: SapUi5PageControllerExtensions;\n}\n\nexport interface SapUi5PageControllerExtensions {\n    [key: string]: SapUi5ControllerExtension;\n}\n\nexport interface SapUi5ControllerExtension {\n    controllerName: string;\n    [ManifestSection.generic]: { [key: string]: SapUi5ControllerExtensionSettings };\n}\n\n// Currently sync does not support controller extensions\nexport interface SapUi5ControllerExtensionSettings {\n    EntitySet: string;\n    Actions?: unknown;\n    Header?: unknown;\n    Sections?: unknown;\n}\n", "import type {\n    DateRangeType,\n    FilterType,\n    DateRange,\n    ListCard,\n    AnalyticalCard,\n    StackCard,\n    LinklistCard,\n    TableCard,\n    CustomCard\n} from './controls';\n\n/**\n * @isViewNode false\n */\nexport interface SelectedValues {\n    /**\n     * The selectedValues property is a set of standard date range values that you want to include or exclude.\n     */\n    selectedValues?: DateRangeType[];\n    /**\n     * The exclude property is set to True by default. This means excluding all values given as selectedValues from the list of date range filters. If the exclude property is set to False, the application shows only selected values in the list of date range filters.\n     */\n    exclude?: boolean;\n    /**\n     * This property references a JS class, which you use to modify the date range value list. You can either remove standard data range values or add custom values.\n     * The customDateRangeImplementation setting takes priority followed by filter and selectedValues when excluding date range types.\n     */\n    customDateRangeImplementation?: string;\n    /**\n     * You can use the filter settings to include and exclude specific date range values.\n     */\n    filter?: FilterType[];\n}\n\nexport interface DateRangeOVP extends DateRange {\n    /**\n     * For a fields' list you can define the set of standard date range values separately.\n     */\n    fields?: {\n        [field: string]: SelectedValues;\n    };\n}\n\nexport type FilterSettingsType = {\n    /**\n     * You can define date ranges, such as lastYear or nextQuarter on the Smart Filter Bar\n     */\n    dateSettings?: DateRangeOVP;\n};\n\nexport enum ContainerLayoutType {\n    fixed = 'fixed',\n    resizable = 'resizable'\n}\n\nexport type CardType = ListCard | AnalyticalCard | StackCard | LinklistCard | TableCard | CustomCard;\n\nexport type ChartSettingsType = {\n    /**\n     * Set the showDataLabel property to true to make data labels visible in analytical cards.\n     */\n    showDataLabel?: boolean;\n};\n", "export * from './controls';\nexport * from './webapp';\nexport * from './page';\nexport * from './pages';\nexport * from './application';\nexport * from './ApplicationV4';\n", "import type {\n    TableColumn,\n    TableColumnAction,\n    ViewTableColumn,\n    ViewTableColumnAction,\n    ViewTableCustomColumn\n} from '../webapp/manifest/ManifestSettings';\nimport type { ToolBar, ViewChartToolBar } from './ToolBar';\n\nexport enum SelectionMode {\n    Multi = 'Multi',\n    None = 'None',\n    Single = 'Single',\n    Auto = 'Auto'\n}\n\nexport enum TableTypeV4 {\n    ResponsiveTable = 'ResponsiveTable',\n    GridTable = 'GridTable'\n    /* Not supported yet:\n    AnalyticalTable = \"AnalyticalTable\", \n    TreeTable = \"TreeTable\"*/\n}\n\nexport enum InitialLoadType {\n    Disabled = 'Disabled',\n    Enabled = 'Enabled',\n    Auto = 'Auto'\n}\n\nexport enum DefaultPathType {\n    Primary = 'primary',\n    Secondary = 'secondary',\n    Both = 'both'\n}\n\nexport interface PersonalizationType {\n    /**\n     * Defines whether the user can add and remove columns to a given table.\n     */\n    column?: boolean;\n    /**\n     * Defines whether the user can sort a given table.\n     */\n    sort?: boolean;\n    /**\n     * Defines whether the user can filter data of a given table.\n     */\n    filter?: boolean;\n}\n\nexport interface ViewPersonalizationType {\n    /**\n     * Defines whether the user can add and remove columns to a given table.\n     */\n    column?: boolean;\n    /**\n     * Defines whether the user can sort a given table.\n     */\n    sort?: boolean;\n    /**\n     * Defines whether the user can filter data of a given table.\n     */\n    filter?: boolean;\n}\n\nexport interface AnnotationPathAsObject {\n    annotationPath: string;\n}\n\n//Not used by specification anymore, but there are some tests using it in tools-suite that needs to be adapted\nexport interface AnnotationPathWithKey {\n    key: string;\n    annotationPath: string;\n    entitySet?: string;\n}\n\nexport interface QuickVariantSelectionV4 {\n    /**\n     * List of annotation paths referring to SelectionVariant annotations\n     */\n    paths: AnnotationPathAsObject[];\n    /**\n     * You can hide the table and display only the titles of the tabs. To do so, add the hideTableTitle option and set it to true.\n     */\n    hideTableTitle?: boolean;\n    /**\n     * You can show the counts of entries of each view. To do so, add the showCounts option and set it to true.\n     */\n    showCounts?: boolean;\n}\n\nexport interface GenericColumns {\n    [key: string]: TableColumn | TableColumnAction;\n}\n\nexport interface ViewColumns {\n    [key: string]: ViewTableColumn | ViewTableColumnAction | ViewTableCustomColumn;\n}\n\n// Note: TableSettings are reused by OP: LR only properties must not be added here.\nexport interface TableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV4;\n    /**\n     * Allows you to enable or disable row selection and choose between single or multiple row selection.\n     *\n     * - Auto: This type is now deprecated. Choose any of the following modes.\n     * - Multi (default): This type allows multiple table selections if relevant actions are available in the toolbar. In edit mode, multiple selection is possible with the delete button.\n     * - Single: This type allows single table selection if relevant actions are available in the toolbar. In edit mode, multiple selection is possible with the Delete button.\n     * - None: No table selection is possible in display mode. In edit mode, the selection (including multiple row selection) is still possible when the Delete button is available in the table toolbar.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/116b5d82e8c545e2a56e1b51b8b0a9bd\n     */\n    selectionMode?: SelectionMode;\n    /**\n     * The selectAll configuration overrides the selectionLimit and allows the user to select all the items. When set to true, the select all feature is enabled: a checkbox in the table header is displayed which selects all items when clicked.\n     */\n    selectAll?: boolean;\n    /**\n     * You can define how many items can be selected at a time using the selectionLimit.\n     */\n    selectionLimit?: number;\n    /**\n     * By default, export is enabled in the List Report and on the Object Page. When enabled, the Export button is displayed in the table toolbar.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/4bab6f2043814257974b52d4dafe1dcd\n     */\n    enableExport?: boolean;\n    /**\n     * With quickVariantSelection you can switch on the multiple view feature (single table mode). It links to SelectionVariant (filters) or SelectionPresentationVariant (filters and sorters) you must have added to your annotations beforehand.\n     */\n    quickVariantSelection?: QuickVariantSelectionV4;\n    /**\n     * Allows you to set the content density to condensed for ui.table on the List Report and Object Page.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/f3cc057e405c4fd58ee2ed42c557797c\n     */\n    condensedTableLayout?: boolean;\n}\n\nexport type ViewTypeV4 = LRTableView | LRChartView | TableViewExtension | boolean;\n\n/**\n * Views\n * @isViewNode true\n */\nexport interface MultiTableModeV4 {\n    /**\n     * List of annotation paths\n     */\n    [key: string]: ViewTypeV4;\n    /**\n     * You can show the counts of entries of each view. To do so, add the showCounts option and set it to true.\n     */\n    showCounts?: boolean;\n}\n\n/**\n * Chart View\n * @isViewNode true\n */\nexport interface ALPChartView {\n    /**\n     * The primary annotation path can be either UI.Chart, UI.PresentationVariant, or UI.SelectionPresentationVariant.\n     */\n    annotationPath: string;\n    /**\n     * Chart Toolbar\n     * @isViewNode true\n     */\n    toolBar?: ViewChartToolBar;\n}\n\nexport interface CommonViewSettings {\n    /**\n     * Unique tab identifier.\n     * @hidden true\n     */\n    key: string;\n    /**\n     * @hidden true\n     */\n    index: number;\n    /**\n     * To use charts in multiple table mode, define a UI.Chart annotation, including a qualifier.\n     * Reference the UI.Chart annotation in your SelectionPresentationVariant or PresentationVariant for your view.\n     */\n    annotationPath: string;\n    /**\n     * Each chart can be based on a different entitySet.\n     */\n    entitySet?: string;\n}\n\n/**\n * Chart View\n * @isViewNode true\n */\nexport interface LRChartView extends CommonViewSettings {\n    /**\n     * Chart Toolbar\n     * @isViewNode true\n     */\n    toolBar?: ViewChartToolBar;\n    /**\n     * Specifies whether the view is visible or not\n     */\n    visible?: boolean;\n}\n\n/**\n * Table View\n * @isViewNode true\n */\nexport interface ALPTableView extends TableSettings {\n    /**\n     * The secondary annotation path can be either UI.LineItem, UI.PresentationVariant, or UI.SelectionPresentationVariant.\n     */\n    annotationPath: string;\n    /**\n     * Allows you to define whether or not the data in the table is automatically loaded.\n     */\n    initialLoad?: boolean;\n    /**\n     * Defines the personalization mode, currently only effective if variant management on page is either set to Page or Control.\n     * By default all table settings are enabled. You can change this for the different parts of the table by setting the properties \"Column\", \"Sort\" and \"Filter\" accordingly.\n     * Omitting a property is treated as false, this allows apps to avoid getting new features like grouping in upcoming releases.\n     */\n    personalization?: boolean;\n    /**\n     * Table Toolbar\n     */\n    toolBar?: ToolBar;\n    columns?: ViewColumns;\n}\n\n/**\n * Table View Extension\n * @isViewNode true\n */\nexport interface TableViewExtension {\n    /**\n     * Unique tab identifier.\n     * @hidden true\n     */\n    key: string;\n    /**\n     * @hidden true\n     */\n    index: number;\n    /**\n     * View title (localization supported).\n     * @i18nClassification TIT: Custom view title\n     */\n    label?: string;\n    /**\n     * The name contains sap.app.id as a prefix, followed by the path in the app/webapp folder and the name of the XML view.\n     */\n    template: string;\n    /**\n     * Specifies whether the view is visible or not\n     */\n    visible?: boolean;\n}\n\n/**\n * Table View\n * @isViewNode true\n */\nexport interface LRTableView extends TableSettings {\n    /**\n     * Unique tab identifier.\n     * @hidden true\n     */\n    key: string;\n    /**\n     * @hidden true\n     */\n    index: number;\n    /**\n     * The annotation path can be either UI.LineItem, UI.PresentationVariant, or UI.SelectionPresentationVariant.\n     */\n    annotationPath: string;\n    /**\n     * Each table can be based on a different entitySet.\n     */\n    entitySet?: string;\n    /**\n     *  The tab keeps the default LineItem ID (without the key), so the variant is applied to it.\n     */\n    keepPreviousPersonalization?: boolean;\n    /**\n     * Defines the personalization mode, currently only effective if variant management on page is either set to Page or Control.\n     */\n    personalization?: boolean;\n    /**\n     * Table Toolbar\n     */\n    toolBar?: ToolBar;\n    /**\n     * Columns\n     */\n    columns?: ViewColumns;\n    /**\n     * Specifies whether the view is visible or not\n     */\n    visible?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n */\nexport interface Table extends TableSettings {\n    /**\n     * The secondary annotation path can be either UI.LineItem, UI.PresentationVariant, or UI.SelectionPresentationVariant.\n     */\n    annotationPath?: string;\n    /**\n     * Allows you to define whether or not the data in the table is automatically loaded\n     *\n     * - Auto (default): An initial load of data only occurs if some default filter values have been set in the filter bar\n     * - Enabled: An initial load of data occurs for the standard variant\n     * - Disabled: An initial load of data does not occur for the standard variant, and the user has to actively click the Go button.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/#/topic/9f4e1192f1384b85bc160288e17f69c4\n     */\n    initialLoad?: boolean;\n    /**\n     * Defines the personalization mode, currently only effective if variant management on page is either set to Page or Control.\n     */\n    personalization?: boolean;\n    views?: MultiTableModeV4;\n    /**\n     * Tool Bar\n     */\n    toolBar?: ToolBar;\n    columns?: GenericColumns;\n}\n", "export enum SelectType {\n    single = 'single',\n    multi = 'multi'\n}\n\n/**\n * Action\n * @isViewNode true\n */\nexport interface ToolBarAction {\n    /**\n     * Enables single selection for a bound action\n     */\n    enableOnSelect?: SelectType;\n}\n\n/**\n * Action\n * @isViewNode true\n */\nexport interface ViewToolBarAction {\n    /**\n     * Enables single selection for a bound action\n     */\n    enableOnSelect?: SelectType;\n}\nexport type ChartToolBarAction = {};\n\n/**\n * Actions\n * @isViewNode true\n */\nexport interface Actions {\n    [key: string]: ToolBarAction;\n}\n\n/**\n * Actions\n * @isViewNode true\n */\nexport interface ViewActions {\n    [key: string]: ViewToolBarAction | ChartToolBarAction;\n}\n\n/**\n * Table Toolbar\n * @isViewNode true\n */\nexport interface ToolBar {\n    actions: Actions;\n}\n\n/**\n * Chart Toolbar\n * @isViewNode true\n */\nexport interface ViewChartToolBar {\n    actions: ViewActions;\n}\n", "export const enum DesigntimeValues {\n    'not-adaptable-visibility' = 'not-adaptable-visibility'\n}\n\nexport interface FlexSettings {\n    /**\n     * Allows you to define which settings are available for key user adaptation at design time.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/ccd45ba3f0b446a0901b2c9d42b8ad53.html https://ui5.sap.com/sdk/#/topic/de9fd55c69af4b46863f5d26b5d796c4.html\n     */\n    designtime?: DesigntimeValues;\n}\n\nexport interface CommonHeaderFacetSettings {\n    /**\n     * Header facets marked as stashed are initially not visible on the UI. Key users can add these header facets via key user adaptation.\n     */\n    stashed?: boolean;\n    flexSettings?: FlexSettings;\n}\n\nexport interface ObjectPageHeaderSectionForm extends CommonHeaderFacetSettings {\n    /**\n     * Form\n     *  @isViewNode true\n     */\n    form?: object;\n}\n\nexport interface ObjectPageHeaderSectionContact extends CommonHeaderFacetSettings {\n    /**\n     * Contact\n     *  @isViewNode true\n     */\n    contact?: object;\n}\n\nexport interface ObjectPageHeaderSectionAddress extends CommonHeaderFacetSettings {\n    /**\n     * Address\n     *  @isViewNode true\n     */\n    address?: object;\n}\n\nexport type ObjectPageHeaderSectionChart = CommonHeaderFacetSettings;\nexport type ObjectPageHeaderSectionDataPoint = CommonHeaderFacetSettings;\n\n/**\n * Header Sections\n * @isViewNode true\n */\nexport interface HeaderSections {\n    [key: string]:\n        | ObjectPageHeaderSectionForm\n        | ObjectPageHeaderSectionChart\n        | ObjectPageHeaderSectionDataPoint\n        | ObjectPageHeaderSectionContact\n        | ObjectPageHeaderSectionAddress;\n}\n", "export enum SectionLayoutType {\n    Tabs = 'Tabs',\n    Page = 'Page'\n}\n\n/**\n * Page Layout\n * @isViewNode true\n */\nexport interface ObjectPageLayout {\n    /**\n     * Allows you to define the layout of the sections.\n     *\n     * - Page (default): In this mode, all the sections and subsections are added to the same page.\n     * - Tabs: In this mode, the sections are represented as tabs under the header facet.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/#/topic/facfea09018d4376acaceddb7e3f03b6\n     */\n    sectionLayout?: SectionLayoutType;\n}\n", "import type { ObjectPageSectionTableV4 } from './ObjectPageTable';\nimport type { SAPUI5_FRAGMENT_CLASS } from '../../common/webapp/manifest/sapUi5';\nimport type { ObjectPageToolBar } from './ObjectPageToolBar';\n\nexport interface ObjectPageSectionForm {\n    /**\n     * Form\n     *  @isViewNode true\n     */\n    form?: object;\n}\n\nexport interface ObjectPageSectionDataPoint {\n    /**\n     * Data Point\n     *  @isViewNode true\n     */\n    dataPoint?: object;\n}\n\nexport interface ObjectPageSectionContact {\n    /**\n     * Contact\n     *  @isViewNode true\n     */\n    contact?: object;\n}\n\nexport interface ObjectPageSectionAddress {\n    /**\n     * Address\n     *  @isViewNode true\n     */\n    address?: object;\n}\n\nexport interface ObjectPageChart {\n    /**\n     * Chart Toolbar\n     * @isViewNode true\n     */\n    toolBar?: ObjectPageToolBar;\n}\n\nexport interface ObjectPageSectionChart {\n    /**\n     * Chart\n     * @isViewNode true\n     */\n    chart?: ObjectPageChart;\n}\n\nexport interface ObjectPageSectionPresentationVariant {\n    /**\n     * Presentation Variant\n     */\n    [key: string]: ObjectPageSectionTableV4 | ObjectPageSectionChart;\n}\n\nexport interface GenericSections {\n    [key: string]:\n        | ObjectPageSectionTableV4\n        | ObjectPageSectionForm\n        | ObjectPageSectionDataPoint\n        | ObjectPageSectionContact\n        | ObjectPageSectionAddress\n        | ObjectPageSectionPresentationVariant;\n}\n\n/**\n * Subsections\n * @isViewNode true\n */\nexport interface ObjectPageSubSections {\n    subsections: GenericSections;\n}\n\n/**\n * @displayName Placement\n */\nexport enum SectionPosition {\n    After = 'After',\n    Before = 'Before'\n}\n\nexport enum CustomSectionViewTypesV4 {\n    XML = 'XML'\n}\n\n/**\n * Custom Sections\n * @isViewNode true\n */\nexport interface CustomSections {\n    /**\n     * Custom Sections\n     * @isViewNode true\n     */\n    custom?: ObjectPageCustomSectionFragment[];\n}\n\nexport interface ObjectPageCustomSectionBase {\n    /**\n     * Use the key of another facet/section as a placement anchor.\n     * @artifactType Manifest\n     * @displayName Anchor\n     */\n    relatedFacet: string;\n    /**\n     * Define the placement, either before or after the anchor facet/section.\n     * @artifactType Manifest\n     */\n    relativePosition: SectionPosition;\n    /**\n     * The unique ID of a section.\n     * @artifactType Manifest\n     */\n    id: string;\n    /**\n     * @hidden true\n     */\n    type: CustomSectionViewTypesV4;\n    /**\n     * The label of a custom section, preferably as an i18n key.\n     * @artifactType Manifest\n     * @i18nClassification TIT: Custom section title\n     */\n    title: string;\n}\n\n/**\n * Fragment\n * @isViewNode true\n */\nexport interface ObjectPageCustomSectionFragment extends ObjectPageCustomSectionBase {\n    /**\n     * @hidden true\n     */\n    className: typeof SAPUI5_FRAGMENT_CLASS;\n    /**\n     * The path to the XML template containing the section control.\n     * @artifactType Manifest\n     */\n    fragmentName: string;\n}\n", "import type { AnnotationPathAsObject, TableSettings } from '.';\nimport type {\n    ObjectPageTableColumn as ObjectPageTableColumnIF,\n    ObjectPageTableColumnAction\n} from '../webapp/manifest/ManifestSettings';\nimport type { ObjectPageToolBar } from './ObjectPageToolBar';\n\n/**\n * Table\n * @isViewNode true\n */\nexport interface ObjectPageTable extends TableSettingsOP {\n    /**\n     * In the Object Page tables, it is possible to add several items at a time by copying and pasting data from an excel file, if this property is set to true.\n     */\n    enablePaste?: boolean;\n    /**\n     * Tool Bar\n     */\n    toolBar?: ObjectPageToolBar;\n}\n\n/**\n * Table Section\n * @isViewNode true\n */\nexport interface ObjectPageSectionTableV4 {\n    table?: ObjectPageTable;\n}\n\nexport enum TableCreationModeType {\n    NewPage = 'NewPage',\n    Inline = 'Inline'\n}\n\nexport interface TableCreationModeOP {\n    /**\n     * The name property of TableCreationMode defines the creation mode; possible values are:\n     * - NewPage: The create action leads to a new page.\n     * - Inline: The create action leads to a new row at the table.\n     * The default is \"NewPage\".\n     */\n    name?: TableCreationModeType;\n    /**\n     * In case of inline creation mode you can decide if the new row will be created at the end of the table, or direcly after the currently selected table. The default value is \"true\"\n     */\n    createAtEnd?: boolean;\n}\n\nexport interface QuickVariantSelectionV4OP {\n    /**\n     * List of annotation paths referring to SelectionVariant annotations\n     */\n    paths: AnnotationPathAsObject[];\n    /**\n     * You can hide the table and display only the titles of the tabs. To do so, add the hideTableTitle option and set it to true.\n     */\n    hideTableTitle?: boolean;\n    /**\n     * You can show the counts of entries of each view. To do so, add the showCounts option and set it to true.\n     */\n    showCounts?: boolean;\n}\n\nexport interface GenericColumnsOP {\n    [key: string]: ObjectPageTableColumnIF | ObjectPageTableColumnAction;\n}\n\nexport interface TableSettingsOP extends TableSettings {\n    /**\n     * Defines the page behavior when a new record is created.\n     */\n    creationMode?: TableCreationModeOP;\n\n    /**\n     * Defines the personalization mode, currently only effective if variant management on page is either set to Page or Control.\n     */\n    personalization?: boolean;\n\n    /**\n     * With quickVariantSelection you can switch on the multiple view feature (single table mode). It links to SelectionVariant (filters) or SelectionPresentationVariant (filters and sorters) you must have added to your annotations beforehand.\n     */\n    quickVariantSelection?: QuickVariantSelectionV4OP;\n\n    columns?: GenericColumnsOP;\n}\n", "import type { SapUiGenericAppPageSettings } from '../../../common/page';\n\nexport interface SapUiAppV4 {\n    pages: SapUiAppPageV4[] | SapUiGenericAppPageMapV4;\n    _version?: string;\n    settings?: object;\n}\n\nexport interface SapUiGenericAppPageMapV4 {\n    [key: string]: SapUiAppPageV4;\n}\n\nexport interface SapUiNavDetailsV4 {\n    detail?: {\n        route?: string;\n    };\n}\n\nexport type SapUi5MultiViewPath = {\n    key: string;\n    annotationPath: string;\n};\n\nexport type SapUi5MultiViewPaths = SapUi5MultiViewPath[];\n\nexport type SapUi5ALPPaths = [\n    {\n        primary: [\n            {\n                annotationPath: string;\n            }\n        ];\n        secondary: [\n            {\n                annotationPath: string;\n            }\n        ];\n        defaultPath: string;\n    }\n];\n\nexport type SapUi5Views = {\n    paths: SapUi5MultiViewPaths | SapUi5ALPPaths;\n    showCounts?: boolean;\n};\n\nexport type SapUiPageSettingsV4 = SapUiGenericAppPageSettings & {\n    entitySet?: string;\n    navigation?: {\n        [key: string]: SapUiNavDetailsV4;\n    };\n    controlConfiguration?: SapUiGenericAppPageSettings;\n    content?: SapUi5RoutingTargetContent;\n    views?: SapUi5Views;\n    defaultTemplateAnnotationPath?: string;\n};\n\nexport interface SapUiAppPageV4 {\n    type: string;\n    id: string;\n    name: string;\n    options: {\n        settings?: SapUiPageSettingsV4;\n    };\n}\n\nexport const FE_TEMPLATE_V4 = 'sap.fe.templates';\nexport const FE_TEMPLATE_V4_CUSTOM_PAGE = 'sap.fe.core.fpm';\nexport const FE_TEMPLATE_V4_OBJECT_PAGE = 'sap.fe.templates.ObjectPage';\nexport const FE_TEMPLATE_V4_LIST_REPORT = 'sap.fe.templates.ListReport';\nexport const FE_TEMPLATE_V4_ALP = 'sap.fe.templates.AnalyticalListPage';\nexport interface SapUiAppPagesV4 {\n    [key: string]: SapUiAppPageV4;\n}\nexport interface SapUi5RoutingTargetContent {\n    body?: SapUi5RoutingTargetContentBody;\n}\n\nexport interface SapUi5RoutingTargetContentBody {\n    sections?: SapUi5RoutingTargetContentSections;\n}\n\nexport interface SapUi5RoutingTargetContentSections {\n    [key: string]: SapUi5RoutingTargetContentSection;\n}\n\nexport const SAPUI5_FRAGMENT_TYPE_V4 = 'XMLFragment';\nexport interface SapUi5RoutingTargetContentSection {\n    // Currently only xml fragment is supported\n    type: typeof SAPUI5_FRAGMENT_TYPE_V4;\n    name: string;\n    title: string;\n    position: SapUi5RoutingTargetContentPosition;\n}\n\nexport enum SectionPositionV4 {\n    AfterFacet = 'AfterFacet',\n    BeforeFacet = 'BeforeFacet'\n}\n\nexport interface SapUi5RoutingTargetContentPosition {\n    placement: SectionPositionV4;\n    anchor: string;\n}\n", "import type {\n    SapUi5RootView,\n    SapUi5OdataModel,\n    SapUi5ResourceModel,\n    SapUi5RoutingRoute,\n    SapUi5RoutingTargetSettings,\n    SapUi5RoutingTarget,\n    Dependencies,\n    SapUi5RoutingTargetBase\n} from '../../../common/webapp/manifest/sapUi5';\nimport type { SapUiGenericAppPageSettings } from '../../../common/page';\nimport type { FlexibleColumnLayout } from '../../../common';\n\nexport interface FlexibleColumnLayoutV4 extends FlexibleColumnLayout {\n    /**\n     * To limit Flexible Column Layout to two columns. The third level will be displayed in full screen and not in a third column.\n     */\n    limitFCLToTwoColumns?: boolean;\n}\n\nexport interface SapUi5V4 {\n    flexEnabled?: boolean;\n    resources?: object;\n    dependencies?: Dependencies;\n    models?: { [key: string]: SapUi5OdataModel | SapUi5ResourceModel };\n    routing?: SapUi5RoutingV4;\n    [key: string]: string | object | boolean;\n    rootView?: SapUi5RootView;\n}\n\nexport interface SapUi5RoutingV4 {\n    config?: SapUi5RoutingConfig;\n    routes?: SapUi5RoutingRoute[];\n    targets: SapUi5RoutingTargetsV4;\n}\n\nexport type RoutingTargetOptions =\n    | SapUi5RoutingTarget\n    | SapUi5RoutingTargetCustomPageV4\n    | SapUi5RoutingTargetCustomPageV4New;\n\nexport interface SapUi5RoutingTargetsV4 {\n    [key: string]: RoutingTargetOptions;\n}\n\nexport interface SapUi5CommonCustomPageV4 extends SapUi5RoutingTargetBase {\n    viewName: string;\n    controlConfiguration?: SapUiGenericAppPageSettings;\n}\n\nexport interface SapUi5RoutingTargetCustomPageV4New extends SapUi5RoutingTarget {\n    options?: {\n        settings: SapUi5RoutingTargetSettings & SapUi5CommonCustomPageV4;\n    };\n}\n\nexport interface SapUi5RoutingTargetV4 extends SapUi5RoutingTargetSettings {\n    type: string;\n    id: string;\n    name: string;\n}\n\nexport interface SapUi5RoutingTargetCustomPageV4New extends SapUi5RoutingTargetV4 {\n    options?: {\n        settings: SapUi5RoutingTargetSettings & Omit<SapUi5RoutingTargetCustomPageV4, 'viewId' | 'viewLevel' | 'title'>;\n    };\n}\n\nexport interface SapUi5RoutingTargetCustomPageV4 extends SapUi5CommonCustomPageV4 {\n    viewId: string;\n    viewName: string;\n    viewLevel?: number;\n    title?: string;\n    controlConfiguration?: SapUiGenericAppPageSettings;\n}\n\nexport const FIORI_FCL_ROUTER_CLASS = 'sap.f.routing.Router';\nexport type RouterClass = typeof FIORI_FCL_ROUTER_CLASS | string;\nexport interface SapUi5RoutingConfig {\n    routerClass?: RouterClass;\n    flexibleColumnLayout?: FlexibleColumnLayoutV4;\n    viewPath?: string;\n}\n\nexport interface SapUi5DependenciesV4 {\n    minUI5Version?: string;\n    incompatibleLimitation?: boolean;\n    libs?: SapUi5DependenciesLibV4;\n}\n\nexport const SAPUI5_DEPENDENCY_LIB_SAP_F = 'sap.f';\nexport interface SapUi5DependenciesLibV4 {\n    [SAPUI5_DEPENDENCY_LIB_SAP_F]?: SapUi5DependencyLibV4;\n    [key: string]: SapUi5DependencyLibV4;\n}\n\nexport interface SapUi5DependencyLibV4 {\n    minVersion?: string;\n    lazy?: boolean;\n}\n", "// Copies of sap.fe type definitions\nexport enum Placement {\n    After = 'After',\n    Before = 'Before'\n}\n\nexport interface Position {\n    /**\n     * The key of another column to be used as placement anchor.\n     */\n    anchor?: string;\n    /**\n     * Define the placement, either before or after the anchor column.\n     */\n    placement: Placement;\n}\n\nexport interface ViewPosition {\n    /**\n     * The key of another column to be used as placement anchor.\n     */\n    anchor?: string;\n    /**\n     * Define the placement, either before or after the anchor column.\n     */\n    placement: Placement;\n}\n\nexport type Positionable = {\n    /**\n     *   Defines the position of the column relative to other columns.\n     */\n    position?: Position;\n};\n\nexport interface ActionAfterExecutionConfiguration {\n    /**\n     * Allows you to disable the navigation. By default, navigation is automatically triggered after you have performed an action.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/#/topic/2c65f07f44094012a511d6bd83f50f2d\n     */\n    navigateToInstance?: boolean;\n    /**\n     * Allows you to scroll to the newly created or changed item after you have performed an action.\n     */\n    enableAutoScroll?: boolean;\n}\n\nexport interface ActionAfterExecutionConfigurationOP {\n    /**\n     * By default, a navigation is automatically triggered after an action execution. If applications want to disable the navigation, they can do so using the manifest setting \u201CnavigateToInstance\u201D.\n     */\n    navigateToInstance?: boolean;\n    /**\n     * Allows you to scroll to the newly created or changed item after you have performed an action.\n     */\n    enableAutoScroll?: boolean;\n}\n\nexport enum Availability {\n    'Default' = 'Default',\n    'Adaptation' = 'Adaptation',\n    'Hidden' = 'Hidden'\n}\n\nexport enum HorizontalAlign {\n    'Begin' = 'Begin',\n    'Center' = 'Center',\n    'End' = 'End'\n}\n\n/**\n * Table Column\n * @isViewNode true\n */\nexport interface TableColumn {\n    /**\n     * A string type that represents CSS size values.\n     * Refer to https://ui5.sap.com/api/sap.ui.core.CSSSize\n     * @descriptionSrcURL https://ui5.sap.com/api/sap.ui.core.CSSSize\n     */\n    width?: string;\n    /**\n     * Defines where the column should be shown.\n     * Default: it will be shown by default in the table.\n     * Adaptation: it will initially not shown in the table but be available via end user adaptation.\n     * Hidden: the column is neither available in the table nor in adaptation.\n     */\n    availability?: Availability;\n}\n\n/**\n * Table Column\n * @isViewNode true\n */\nexport interface ViewTableColumn {\n    /**\n     * A string type that represents CSS size values.\n     * Refer to https://ui5.sap.com/api/sap.ui.core.CSSSize\n     * @descriptionSrcURL https://ui5.sap.com/api/sap.ui.core.CSSSize\n     */\n    width?: string;\n    /**\n     * Defines where the column should be shown.\n     * Default: it will be shown by default in the table.\n     * Adaptation: it will initially not shown in the table but be available via end user adaptation.\n     * Hidden: the column is neither available in the table nor in adaptation.\n     */\n    availability?: Availability;\n}\n\n/**\n * Table Column\n * @isViewNode true\n */\nexport interface ObjectPageTableColumn {\n    /**\n     * A string type that represents CSS size values.\n     * Refer to https://ui5.sap.com/api/sap.ui.core.CSSSize\n     * @descriptionSrcURL https://ui5.sap.com/api/sap.ui.core.CSSSize\n     */\n    width?: string;\n    /**\n     * Defines where the column should be shown.\n     * Default: it will be shown by default in the table.\n     * Adaptation: it will initially not shown in the table but be available via end user adaptation.\n     * Hidden: the column is neither available in the table nor in adaptation.\n     */\n    availability?: Availability;\n}\n\n/**\n * Inline Action\n * @isViewNode true\n */\nexport interface TableColumnAction extends TableColumn {\n    /**\n     * Settings that are only relevant for actions (associated with a UI.DataFieldForAction annotation)\n     */\n    afterExecution?: ActionAfterExecutionConfiguration;\n}\n\n/**\n * Inline Action\n * @isViewNode true\n */\nexport interface ViewTableColumnAction extends ViewTableColumn {\n    /**\n     * Settings that are only relevant for actions (associated with a UI.DataFieldForAction annotation)\n     */\n    afterExecution?: ActionAfterExecutionConfiguration;\n}\n\nexport type ColumnPropertiesType = string[];\n\n/**\n * Inline Action for Object Page\n * @isViewNode true\n */\nexport interface ObjectPageTableColumnAction extends TableColumn {\n    /**\n     * Settings that are only relevant for actions (associated with a UI.DataFieldForAction annotation)\n     */\n    afterExecution?: ActionAfterExecutionConfigurationOP;\n}\n\n/**\n * Custom Column\n * @isViewNode true\n */\nexport interface TableCustomColumn {\n    /**\n     * Defines the position of the column relative to other columns.\n     * @artifactType Manifest\n     */\n    position?: Position;\n    /**\n     * The header is shown on the table as header, as well as in the add/remove dialog.\n     * @i18nClassification COL: Custom column header text\n     * @artifactType Manifest\n     */\n    header: string;\n    /**\n     * A string type that represents CSS size values.\n     * Refer to https://ui5.sap.com/api/sap.ui.core.CSSSize\n     * @artifactType Manifest\n     * @descriptionSrcURL https://ui5.sap.com/api/sap.ui.core.CSSSize\n     */\n    width?: string;\n    /**\n     * Relevant for extension columns; allows the definition of a target fragment.\n     * @artifactType Manifest\n     */\n    template: string;\n    /**\n     * Aligns the header as well as the content horizontally.\n     * @artifactType Manifest\n     */\n    horizontalAlign?: HorizontalAlign;\n    /**\n     * Defines where the column should be shown.\n     * - Default: it will be shown by default in the table.\n     * - Adaptation: it will initially not shown in the table but be available via end user adaptation\n     * - Hidden: the column is neither available in the table nor in adaptation\n     * @artifactType Manifest\n     */\n    availability?: Availability;\n    /**\n     * If provided and sorting is enabled for the table the custom column header can be clicked. This will lead to a list of properties (or one) that can be sorted by, they are displayed as the labels of the properties, corresponding to their definition in the annotations.\n     * @artifactType Manifest\n     */\n    properties?: ColumnPropertiesType;\n}\n\n/**\n * Custom Column\n * @isViewNode true\n */\nexport interface ViewTableCustomColumn {\n    /**\n     *   Defines the position of the column relative to other columns.\n     * @artifactType Manifest\n     */\n    position?: ViewPosition;\n    /**\n     * The header is shown on the table as header, as well as in the add/remove dialog.\n     * @i18nClassification COL: Custom column header text\n     * @artifactType Manifest\n     */\n    header: string;\n    /**\n     * A string type that represents CSS size values.\n     * Refer to https://ui5.sap.com/api/sap.ui.core.CSSSize\n     * @artifactType Manifest\n     * @descriptionSrcURL https://ui5.sap.com/api/sap.ui.core.CSSSize\n     */\n    width?: string;\n    /**\n     * Relevant for extension columns; allows the definition of a target fragment.\n     * @artifactType Manifest\n     */\n    template: string;\n    /**\n     * Aligns the header as well as the content horizontally.\n     * @artifactType Manifest\n     */\n    horizontalAlign?: HorizontalAlign;\n    /**\n     * Defines where the column should be shown.\n     * - Default: it will be shown by default in the table.\n     * - Adaptation: it will initially not shown in the table but be available via end user adaptation\n     * - Hidden: the column is neither available in the table nor in adaptation\n     * @artifactType Manifest\n     */\n    availability?: Availability;\n    /**\n     * If provided and sorting is enabled for the table the custom column header can be clicked. This will lead to a list of properties (or one) that can be sorted by, they are displayed as the labels of the properties, corresponding to their definition in the annotations.\n     * @artifactType Manifest\n     */\n    properties?: ColumnPropertiesType;\n}\n", "import type { PageConfig } from '../../common';\nimport type {\n    ObjectPageHeader,\n    ObjectPageLayout,\n    GenericSections,\n    CustomSections,\n    ObjectPageFooter\n} from '../controls';\n\nexport enum VariantManagementTypeObjectPage {\n    None = 'None',\n    Control = 'Control'\n}\n\nexport interface ObjectPageConfigV4 extends PageConfig {\n    header?: ObjectPageHeader;\n    layout?: ObjectPageLayout;\n    /**\n     * Allows you to enable and disable variant management for tables.\n     *\n     * - None (default): No variant management is possible by default.\n     * - Control: Individual personalization for each control is possible.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/f26d42bea11c4deda82c7a2e00c9bc05.html\n     */\n    variantManagement?: VariantManagementTypeObjectPage;\n\n    sections?: GenericSections | CustomSections;\n\n    footer?: ObjectPageFooter;\n}\n", "import type { PageConfig } from '../../common';\nimport type { FilterBar, ALPChartView, Table, ALPTableView, DefaultPathType } from '../controls';\n\nexport enum VariantManagementTypeListReport {\n    None = 'None',\n    Control = 'Control',\n    Page = 'Page'\n}\n\nexport interface ListReportConfigV4 extends PageConfig {\n    /**\n     * variantManagement defines how the variant management of page personalizations is controlled.\n     * - None - No variant management by default.\n     * - Control - Individual personalizations for each control.\n     */\n    variantManagement?: VariantManagementTypeListReport;\n    /**\n     * Filter Bar\n     */\n    filterBar?: FilterBar;\n\n    /**\n     * Chart\n     */\n    chart?: ALPChartView;\n\n    /**\n     * Table\n     */\n    table?: Table | ALPTableView;\n\n    /**\n     * defaultTemplateAnnotationPath must be a reference to a SelectionPresentationVariant.\n     * You use the SelectionPresentationVariant to configure the default visualizations and default filter values of the main content area.\n     */\n    defaultTemplateAnnotationPath?: string;\n\n    /**\n     * Allows you to set the initial view mode\n     *\n     * - primary: This property loads the app in chart-only view.\n     * - secondary: This property loads the app in table-only view.\n     * - both: This property loads the app in hybrid view.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/2a9df06673d34f72b238549d49da8bfb\n     */\n    defaultPath?: DefaultPathType;\n}\n", "import type { Definition } from 'typescript-json-schema';\nimport type { ConvertedMetadata, EntitySet, EntityType } from '@sap-ux/vocabularies-types';\nimport type { FioriElementsVersion, Manifest, v2, v4 } from '.';\nimport type { SchemaType, FileData, FlexChangeLayer, ExportResults } from './common/types';\n\nexport type MessageMetadataType = (object | string | number)[];\n\nexport const enum LogSeverity {\n    Error = 'error',\n    Warning = 'warning',\n    Info = 'info'\n}\n\nexport const LogSeverityLabel = {\n    [LogSeverity.Error]: 'Error',\n    [LogSeverity.Warning]: 'Warning',\n    [LogSeverity.Info]: 'Information'\n};\n\nexport type LogMessage = string | object | undefined;\n\nexport interface RangePosition {\n    line: number;\n    character: number;\n}\nexport interface Range {\n    start: RangePosition;\n    end: RangePosition;\n}\n\nexport interface Location {\n    path: string;\n    range?: Range | string[];\n}\n\n/**\n * Interface used to define a logger for the specificaton API\n */\nexport interface ExtensionLogger {\n    info: (message: string, ...meta: MessageMetadataType) => void;\n    warning: (message: string, ...meta: MessageMetadataType) => void;\n    error: (message: string, ...meta: MessageMetadataType) => void;\n}\n\n/**\n * Types for V2 schema generation\n */\nexport type GenerateListReportV2 = {\n    [SchemaType.ListReport]: {\n        genericSchema: object;\n        entitySet: string;\n        annotations: FileData[];\n        manifest: Manifest;\n        fragments: FileData[];\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type GenerateObjectPageV2 = {\n    [SchemaType.ObjectPage]: {\n        genericSchema: object;\n        entitySet: string;\n        annotations: FileData[];\n        manifest: Manifest;\n        fragments: FileData[];\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type GenerateOverviewPageV2 = {\n    [SchemaType.OverviewPage]: {\n        genericSchema: object;\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type GenerateAnalyticalListPageV2 = {\n    [SchemaType.AnalyticalListPage]: {\n        genericSchema: object;\n        entitySet: string;\n        annotations: object[];\n        manifest: Manifest;\n        fragments: FileData[];\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type GenerateSchemaV2Type =\n    | GenerateListReportV2\n    | GenerateObjectPageV2\n    | GenerateOverviewPageV2\n    | GenerateAnalyticalListPageV2;\n\nexport interface GenerateSchemaV2 {\n    [FioriElementsVersion.v2]: GenerateSchemaV2Type;\n}\n\n/**\n * Types for V4 schema generation\n */\nexport type GenerateListReportV4 = {\n    [SchemaType.ListReport]: {\n        genericSchema: object;\n        entitySet: string;\n        annotations: FileData[];\n        logger?: ExtensionLogger;\n        manifest?: Manifest;\n    };\n};\n\nexport type GenerateObjectPageV4 = {\n    [SchemaType.ObjectPage]: {\n        genericSchema: object;\n        entitySet: string;\n        annotations: FileData[];\n        manifest: Manifest;\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type GenerateAnalyticalListPageV4 = {\n    [SchemaType.AnalyticalListPage]: {\n        genericSchema: object;\n        entitySet: string;\n        annotations: FileData[];\n        logger?: ExtensionLogger;\n        manifest?: Manifest;\n    };\n};\n\nexport type GenerateFreestylePageV4 = {\n    [SchemaType.FreestylePage]: {\n        genericSchema: object;\n        annotations: FileData[];\n        manifest: Manifest;\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type GenerateSchemaV4Type =\n    | GenerateListReportV4\n    | GenerateObjectPageV4\n    | GenerateAnalyticalListPageV4\n    | GenerateFreestylePageV4;\n\nexport interface GenerateSchemaV4 {\n    [FioriElementsVersion.v4]: GenerateSchemaV4Type;\n}\n\n/**\n * Union types for schema generation\n */\nexport type GenerateSchemaParameters = GenerateSchemaV2 | GenerateSchemaV4;\n\n/**\n * Types for v2 export\n */\nexport type ExportListReportV2Parameters = {\n    appId: string;\n    page: v2.Page;\n    manifest: Manifest;\n    jsonSchema: object;\n    fragments?: FileData[];\n    logger?: ExtensionLogger;\n};\nexport type ExportListReportV2 = {\n    [SchemaType.ListReport]: ExportListReportV2Parameters;\n};\n\nexport type ExportAnalyticalListPageV2Parameters = ExportListReportV2Parameters;\nexport type ExportAnalyticalListPageV2 = {\n    [SchemaType.AnalyticalListPage]: ExportAnalyticalListPageV2Parameters;\n};\n\nexport type ExportOverviewPageV2Parameters = {\n    page: v2.Page;\n    manifest: object;\n    jsonSchema: object;\n    logger?: ExtensionLogger;\n};\nexport type ExportOverviewPageV2 = {\n    [SchemaType.OverviewPage]: ExportOverviewPageV2Parameters;\n};\n\nexport type ExportObjectPageV2Parameters = {\n    appId: string;\n    page: v2.Page;\n    manifest: Manifest;\n    jsonSchema: object;\n    fragments?: FileData[];\n    logger?: ExtensionLogger;\n};\nexport type ExportObjectPageV2 = {\n    [SchemaType.ObjectPage]: ExportObjectPageV2Parameters;\n};\n\nexport type ExportAppV2 = {\n    [SchemaType.Application]: {\n        application: v2.ApplicationV2;\n        manifest: Manifest;\n        jsonSchema: object;\n        logger?: ExtensionLogger;\n    };\n};\n\n/**\n * Types for v4 export\n */\nexport type ExportListReportV4Parameters = {\n    appId: string;\n    page: v4.PageV4;\n    manifest: Manifest;\n    jsonSchema: object;\n    logger?: ExtensionLogger;\n    appRootPath?: string;\n};\nexport type ExportListReportV4 = {\n    [SchemaType.ListReport]: ExportListReportV4Parameters;\n};\n\nexport type ExportAnalyticalListPageV4Parameters = ExportListReportV4Parameters;\n\nexport type ExportAnalyticalListPageV4 = {\n    [SchemaType.AnalyticalListPage]: ExportAnalyticalListPageV4Parameters;\n};\n\nexport type ExportObjectPageV4Parameters = {\n    appId: string;\n    page: v4.Page;\n    manifest: Manifest;\n    jsonSchema: object;\n    logger?: ExtensionLogger;\n    appRootPath?: string;\n};\nexport type ExportObjectPageV4 = {\n    [SchemaType.ObjectPage]: ExportObjectPageV4Parameters;\n};\n\nexport type ExportAppV4 = {\n    [SchemaType.Application]: {\n        application: v4.ApplicationV4;\n        manifest: Manifest;\n        jsonSchema: object;\n        logger?: ExtensionLogger;\n    };\n};\n\nexport type ExportParametersV4Type = ExportListReportV4 | ExportObjectPageV4 | ExportAppV4 | ExportAnalyticalListPageV4;\n\nexport interface ExportParametersV4 {\n    [FioriElementsVersion.v4]: ExportParametersV4Type;\n}\n\nexport interface UI5Version {\n    ui5Version?: string;\n    layer?: FlexChangeLayer;\n}\n\nexport type ExportParametersV2Type =\n    | ExportListReportV2\n    | ExportObjectPageV2\n    | ExportOverviewPageV2\n    | ExportAppV2\n    | ExportAnalyticalListPageV2;\n\nexport interface ExportParametersV2 {\n    [FioriElementsVersion.v2]: ExportParametersV2Type;\n}\n\n/**\n * Union types for export\n */\nexport type ExportConfigParameters = UI5Version & (ExportParametersV2 | ExportParametersV4);\n\nexport type CommonImportParameters = {\n    manifest: Manifest;\n    flex: string[];\n    jsonSchema: object;\n    fragments?: FileData[];\n    logger?: ExtensionLogger;\n};\n\n/**\n * Types for v2 import\n */\nexport type ImportListReportV2Parameters = CommonImportParameters;\n\nexport type ImportListReportV2 = {\n    [SchemaType.ListReport]: ImportListReportV2Parameters;\n};\n\nexport type ImportObjectPageV2Parameters = CommonImportParameters & {\n    entitySet: string;\n};\nexport type ImportObjectPageV2 = {\n    [SchemaType.ObjectPage]: ImportObjectPageV2Parameters;\n};\n\nexport type ImportOverviewPageV2Parameters = {\n    manifest: Manifest;\n    jsonSchema: object;\n    logger?: ExtensionLogger;\n};\nexport type ImportOverviewPageV2 = {\n    [SchemaType.OverviewPage]: ImportOverviewPageV2Parameters;\n};\n\nexport type ImportALPV2Parameters = CommonImportParameters;\nexport type ImportAnalyticalListPageV2 = {\n    [SchemaType.AnalyticalListPage]: ImportALPV2Parameters;\n};\n\n/**\n * Types for v4 import\n */\nexport type ImportListReportV4Parameters = {\n    manifest: Manifest;\n    jsonSchema: Definition;\n    logger?: ExtensionLogger;\n};\nexport type ImportListReportV4 = {\n    [SchemaType.ListReport]: ImportListReportV4Parameters;\n};\n\nexport type ImportObjectPageV4Parameters = {\n    manifest: Manifest;\n    jsonSchema: Definition;\n    routingId: string;\n    logger?: ExtensionLogger;\n};\nexport type ImportObjectPageV4 = {\n    [SchemaType.ObjectPage]: ImportObjectPageV4Parameters;\n};\n\nexport type ImportAnalyticalListPageV4Parameters = ImportListReportV4Parameters;\nexport type ImportAnalyticalListPageV4 = {\n    [SchemaType.AnalyticalListPage]: ImportAnalyticalListPageV4Parameters;\n};\n\nexport type ImportParametersV4Type = ImportListReportV4 | ImportObjectPageV4 | ImportAnalyticalListPageV4;\n\nexport interface ImportParametersV4 {\n    [FioriElementsVersion.v4]: ImportParametersV4Type;\n}\n\nexport type ImportParametersV2Type =\n    | ImportListReportV2\n    | ImportObjectPageV2\n    | ImportOverviewPageV2\n    | ImportAnalyticalListPageV2;\nexport interface ImportParametersV2 {\n    [FioriElementsVersion.v2]: ImportParametersV2Type;\n}\n\nexport type ImportResultsV2 =\n    | v2.ListReportConfigV2\n    | v2.ObjectPageConfigV2\n    | v2.OverviewPageConfigV2\n    | v2.AnalyticalListPageConfigV2;\nexport type ImportResultsV4 = v4.ListReportConfigV4 | v4.ObjectPageConfigV4;\n\nexport type ImportConfigParameters = ImportParametersV2 | ImportParametersV4;\n\nexport interface Schemas {\n    [type: string]: object;\n}\n\nexport type ImportAllConfigsParameters = {\n    manifest: Manifest;\n    appSchemas: Schemas;\n    templateType: TemplateType;\n    serviceAVT: ConvertedMetadata;\n    logger?: ExtensionLogger;\n    flexChanges?: string[];\n    fragments?: FileData[];\n    views?: FileData[];\n};\n\nexport type ImportResults = ImportResultsV2 | ImportResultsV4;\n\n/**\n * Types for project import\n */\nexport interface ImportProjectParameters extends SyncBaseParameters {\n    manifest: Manifest;\n    annotations: FileData[];\n    flex?: string[];\n    fragments?: FileData[];\n    views?: FileData[];\n    logger?: ExtensionLogger;\n}\n\nexport enum TemplateType {\n    ListReportObjectPageV2 = 'ListReportObjectPageV2',\n    ListReportObjectPageV4 = 'ListReportObjectPageV4',\n    OverviewPageV2 = 'OverviewPageV2',\n    AnalyticalListPageV2 = 'AnalyticalListPageV2',\n    AnalyticalListPageV4 = 'AnalyticalListPageV4',\n    FreestylePageV4 = 'FreestylePageV4'\n}\n\nexport interface GenerateAppSchemaParameters extends SyncBaseParameters {\n    templateType: TemplateType;\n    manifest: Manifest;\n    serviceAVT: ConvertedMetadata;\n    fioriElementsVersion: FioriElementsVersion;\n    entitySet?: EntitySet;\n    fragments?: FileData[];\n    views?: FileData[];\n    logger?: ExtensionLogger;\n    entityType?: EntityType;\n}\n\n/**\n * API Version\n */\nexport interface ApiVersion {\n    version?: string;\n}\n\n/**\n * API Feature toggles\n */\nexport enum Features {\n    BuildingBlocks = 'BuildingBlocks'\n}\n// Value from enum or any string to allow freedom from outside\nexport type FeatureToggle = Features | string;\n\nexport interface SyncBaseParameters {\n    featureToggles?: FeatureToggle[];\n}\n\n/**\n * API interface\n */\nexport interface Specification {\n    getGenericSchema: (version: FioriElementsVersion, schemaType: SchemaType) => Promise<JSON>;\n    generateSchema: (params: GenerateSchemaParameters) => object;\n    exportConfig: (params: ExportConfigParameters) => ExportResults;\n    importConfig: (params: ImportConfigParameters) => ImportResults;\n    importProject: (params: ImportProjectParameters) => Promise<File[]>;\n    getApiVersion: () => ApiVersion;\n    importProjectSchema: (params: ImportProjectParameters) => Promise<File[]>;\n}\n", "export * from './controls';\nexport * from './webapp';\nexport * from './page';\nexport * from './pages';\nexport * from './overviewPage';\nexport * from './application';\nexport * from './ApplicationV2';\n", "export type SapUiCoreURI = string;\n\nexport enum ButtonType {\n    Accept = 'Accept',\n    Attention = 'Attention',\n    Back = 'Back',\n    Critical = 'Critical',\n    Default = 'Default',\n    Emphasized = 'Emphasized',\n    Ghost = 'Ghost',\n    Negative = 'Negative',\n    Neutral = 'Neutral',\n    Reject = 'Reject',\n    Success = 'Success',\n    Transparent = 'Transparent',\n    Unstyled = 'Unstyled',\n    Up = 'Up'\n}\n\n/**\n * Actions\n * @isViewNode true\n */\nexport interface Actions {\n    [key: string]: Action;\n}\n\n/**\n * Action\n * @isViewNode true\n */\nexport interface Action {\n    /**\n     * The text of the button tooltip, preferably as an i18n key.\n     * @i18nClassification ACT: Text for tooltip of button.\n     */\n    tooltip?: string;\n    /**\n     * An icon to be displayed as a graphical element within the button. This can be an image or an icon from the icon font (https://ui5.sap.com/test-resources/sap/m/demokit/iconExplorer/webapp/index.html#/overview/SAP-icons), represented as RFC 3986 conformant URI.\n     */\n    icon?: SapUiCoreURI;\n    /**\n     * An alternative icon for the active (depressed) state of the button. This can be an image or an icon from the icon font (https://ui5.sap.com/test-resources/sap/m/demokit/iconExplorer/webapp/index.html#/overview/SAP-icons), represented as RFC 3986 conformant URI.\n     */\n    activeIcon?: SapUiCoreURI;\n    /**\n     * Defines the Button type.\n     */\n    type?: ButtonType;\n}\n\n/**\n * Form Action\n * @isViewNode true\n */\nexport interface FormAction extends Action {\n    /**\n     * Allows you to define if the action button is visible on the screen.\n     */\n    visible?: boolean;\n}\n\n/**\n * Header Action\n * @isViewNode true\n */\nexport interface HeaderAction extends Action {\n    /**\n     * Allows you to define if the action button is visible on the screen.\n     */\n    visible?: boolean;\n}\n\n/**\n * ToolBar Action\n * @isViewNode true\n */\nexport interface ObjectPageToolBarAction extends Action {\n    /**\n     * Allows you to define if the action button is visible on the screen.\n     */\n    visible?: boolean;\n}\n\n/**\n * Footer Action\n * @isViewNode true\n */\nexport interface ObjectPageFooterAction extends Action {\n    /**\n     * Allows you to define if the action button is visible on the screen.\n     */\n    visible?: boolean;\n}\n\n/**\n * Standard Action\n * @isViewNode true\n */\nexport interface StandardAction {\n    /**\n     * Allows you to define if the button is visible on the screen.\n     */\n    visible?: boolean;\n}\n\n/**\n * Share\n * @isViewNode true\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface Share extends StandardAction {}\n\n/**\n * Share\n * @isViewNode true\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface ShareOP extends StandardAction {}\n\n/**\n * Up and Down Navigation\n * @isViewNode true\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface UpAndDownNavigationOP extends StandardAction {}\n\n/**\n * Save and Edit\n * @isViewNode true\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface SaveAndEditOP extends StandardAction {}\n\nexport interface HeaderActionsStandard {\n    Share?: Share;\n}\n\nexport interface ObjectPageHeaderActionsStandard {\n    UpAndDownNavigation?: UpAndDownNavigationOP;\n    Share?: ShareOP;\n}\n\nexport interface ObjectPageFooterActionsStandard {\n    SaveAndEdit?: SaveAndEditOP;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface HeaderActionStandard extends StandardAction {}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface ObjectPageHeaderActionStandard extends StandardAction {}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface ObjectPageFooterActionStandard extends StandardAction {}\n", "import type {\n    ObjectStreamCardsSettingsDef,\n    SapOvpDefaultSpanDef,\n    SapOvpPlotAreaDef,\n    SapOvpTabSetting,\n    SapOvpTimeAxisDef\n} from '../../common';\n\nexport interface CommonCardSettings {\n    /**\n     * Represents the dominant entity set that will be displayed in the given card.\n     */\n    entitySet?: string;\n    /**\n     * The language-dependent title of the card, used in the card header.\n     * @i18nClassification TIT: Title of the card, used in the card header\n     */\n    title: string;\n    /**\n     * The language-dependent subtitle of the card, used in the card header.\n     * @i18nClassification TIT: Subtitle of the card, used in the card header\n     */\n    subTitle?: string;\n    /**\n     * Represents the identification annotation path.\n     */\n    identificationAnnotationPath?: string;\n    /**\n     * Represents the selection annotation path.\n     */\n    selectionAnnotationPath?: string;\n    /**\n     * Represents the presentation annotation path.\n     */\n    presentationAnnotationPath?: string;\n    /**\n     * The category of the card, as used in the card header.\n     */\n    category?: string;\n    /**\n     * To load cards with specific requirements, define a default size as part of the card definition in the descriptor file.\n     */\n    defaultSpan?: SapOvpDefaultSpanDef;\n    /**\n     * Define an authorization check at card level.\n     */\n    requireAppAuthorization?: string;\n    /**\n     * Represents the card with view switch control.\n     */\n    tabs?: [SapOvpTabSetting, ...SapOvpTabSetting[]];\n    /**\n     * add $Select parameter in data fetch URL\n     */\n    addODataSelect?: boolean;\n}\n\nexport enum ChartCardType {\n    cardBubble = 'cardBubble',\n    cardchartsline = 'cardchartsline',\n    cardchartsdonut = 'cardchartsdonut'\n}\n\nexport enum CardTemplateType {\n    analytical = 'sap.ovp.cards.charts.analytical',\n    analyticalv4 = 'sap.ovp.cards.v4.charts.analytical',\n    list = 'sap.ovp.cards.list',\n    listv4 = 'sap.ovp.cards.v4.list',\n    linklist = 'sap.ovp.cards.linklist',\n    table = 'sap.ovp.cards.table',\n    tablev4 = 'sap.ovp.cards.v4.table',\n    stack = 'sap.ovp.cards.stack'\n}\n\nexport const cardTemplateTypeMap = {\n    'sap.ovp.cards.charts.analytical': 'AnalyticalCard',\n    'sap.ovp.cards.v4.charts.analytical': 'AnalyticalCard',\n    'sap.ovp.cards.list': 'ListCard',\n    'sap.ovp.cards.v4.list': 'ListCard',\n    'sap.ovp.cards.linklist': 'LinklistCard',\n    'sap.ovp.cards.table': 'TableCard',\n    'sap.ovp.cards.v4.table': 'TableCard',\n    'sap.ovp.cards.stack': 'StackCard'\n};\n\nexport enum CardSettingsType {\n    analyticalCardSettings = 'analyticalCardSettings',\n    analyticalCardSettingsv4 = 'analyticalCardSettingsv4',\n    listCardSettings = 'listCardSettings',\n    listCardSettingsv4 = 'listCardSettingsv4',\n    stackCardSettings = 'stackCardSettings',\n    linkListCardSettings = 'linkListCardSettings',\n    tableCardSettings = 'tableCardSettings',\n    tableCardSettingsv4 = 'tableCardSettingsv4'\n}\n\nexport enum MeasureAggregateValues {\n    average = 'average',\n    max = 'max',\n    min = 'min',\n    sum = 'sum',\n    count = '$count'\n}\n\nexport interface MeasureAggregateSettings {\n    Axis1?: MeasureAggregateValues;\n    Axis2?: MeasureAggregateValues;\n    Axis3?: MeasureAggregateValues;\n}\n\n/**\n * Custom Card\n * @isViewNode true\n */\nexport interface CustomCard {\n    /**\n     * Represents the model for the card\n     */\n    model: string;\n    /**\n     * Represents the card component path to use for this card.\n     * @TJS-pattern ^(?!(sap.ovp.cards.charts.analytical|sap.ovp.cards.v4.charts.analytical|sap.ovp.cards.linklist|sap.ovp.cards.list|sap.ovp.cards.v4.list|sap.ovp.cards.stack|sap.ovp.cards.table|sap.ovp.cards.v4.table)$).*$\n     */\n    template: string; // due the extension concept for cards, this can be any string\n    /**\n     * Represents the properties that are passed to the custom card.\n     */\n    settings?: CustomCardSettings;\n}\n/**\n * List Card\n * @isViewNode true\n * @controlProperty template\n */\nexport interface ListCard {\n    /**\n     * Represents the model for the List Card\n     */\n    model: string;\n    /**\n     * Represents the card component path to use for this List Card.\n     */\n    template: CardTemplateType.list | CardTemplateType.listv4;\n    /**\n     * Represents the properties that are passed to the list card.\n     */\n    listCardSettings: ListCardSettings;\n}\n\n/**\n * Stack Card\n * @isViewNode true\n * @controlProperty template\n */\nexport interface StackCard {\n    /**\n     * Represents the model for the StackCard.\n     */\n    model: string;\n    /**\n     * Represents the Stack Card component path to use for this card.\n     */\n    template: CardTemplateType.stack;\n    /**\n     * Represents the properties that are passed to the stack card.\n     */\n    stackCardSettings: StackCardSettings;\n}\n\n/**\n * Link List Card\n * @isViewNode true\n * @controlProperty template\n */\nexport interface LinklistCard {\n    /**\n     * Represents the model for the Link list Card.\n     */\n    model?: string;\n    /**\n     * Represents the Link list Card component path to use for this card.\n     */\n    template: CardTemplateType.linklist;\n    /**\n     * Represents the properties that are passed to the link list card.\n     */\n    linkListCardSettings: LinkListCardSettings;\n}\n\n/**\n * Table Card\n * @isViewNode true\n * @controlProperty template\n */\nexport interface TableCard {\n    /**\n     * Represents the model for the TableCard.\n     */\n    model: string;\n    /**\n     * Represents the Table Card component path to use for this card.\n     */\n    template: CardTemplateType.table | CardTemplateType.tablev4;\n    /**\n     * Represents the properties that are passed to the table card.\n     */\n    tableCardSettings: TableCardSettings;\n    /**\n     * If you set disableTableCardFlexibility to true, then at runtime, DataField records are sorted according to the importance set in the com.sap.vocabularies.UI.v1.ImportanceType annotation, and their order of entry.\n     * If you set disableTableCardFlexibility to false, then at runtime, table columns are sorted according to the importance set in the com.sap.vocabularies.UI.v1.ImportanceType annotation, and their order of entry.\n     */\n    disableTableCardFlexibility?: boolean;\n}\n\n/**\n * Analytical Card\n * @isViewNode true\n * @controlProperty template\n */\nexport interface AnalyticalCard {\n    /**\n     * Represents the model for the Analytical Card\n     */\n    model: string;\n    /**\n     * Represents the Analytical Card component path to use for this card.\n     */\n    template: CardTemplateType.analytical | CardTemplateType.analyticalv4;\n    /**\n     * Represents the properties that are passed to the analytical card.\n     */\n    analyticalCardSettings: AnalyticalCardSettings | AnalyticalCardSettingsv4;\n}\n\nexport type CustomCardNavigationType = 'dataPointNav' | 'chartNav' | 'headerNav' | 'noHeaderNav';\n\n/**\n * @displayName settings\n */\nexport interface CustomCardSettings extends CommonCardSettings {\n    /**\n     * Represents the user defined string in placeholder card.\n     */\n    itemText?: string;\n    /**\n     * Represents things like people, number of items.\n     */\n    valueSelectionInfo?: string;\n    /**\n     * Represents the static content that will be displayed in this card.\n     */\n    staticContent?: {\n        [k: string]: any;\n    }[];\n    /**\n     * Represents the flavor of the list to use in this card. The flavor can be bar chart, carousel or standard.\n     */\n    listFlavor?: 'standard' | 'bar' | 'carousel';\n    /**\n     * Represents the type of list to use for this card. The list can be extended to display more information or condensed to take up less space on the card.\n     */\n    listType?: 'extended' | 'condensed';\n    /**\n     * Represents the sort key for the entity set.\n     */\n    sortBy?: string;\n    /**\n     * Represents the sort order for the entity set.\n     */\n    sortOrder?: 'ascending' | 'descending';\n    /**\n     * Represents the annotation path.\n     */\n    annotationPath?: string;\n    /**\n     * Represents the chart annotation path.\n     */\n    chartAnnotationPath?: string;\n    /**\n     * Represents the data point annotation path.\n     */\n    dataPointAnnotationPath?: string;\n    /**\n     * Represents the KPI annotation path.\n     */\n    kpiAnnotationPath?: string;\n    /**\n     * Represents the selection presentation annotation path.\n     */\n    selectionPresentationAnnotationPath?: string;\n    /**\n     * Represents the dynamic subtitle annotation path.\n     */\n    dynamicSubtitleAnnotationPath?: string;\n    /**\n     * Represents the flag to indicate priority of number formatting over sap text.\n     */\n    ignoreSapText?: boolean;\n    /**\n     * Represents the Object Stream properties - properties that are passed to the Object Stream cards.\n     */\n    objectStreamCardsSettings?: ObjectStreamCardsSettingsDef;\n    /**\n     * Represents the flag to indicate the use of object number/smart field.\n     */\n    enableLocaleCurrencyFormatting?: boolean;\n    /**\n     * Represents the configuration to alter the navigation mode in OVP Analytical Cards.\n     */\n    navigation?: CustomCardNavigationType;\n    /**\n     * Represents a switch to Show or Hide Filters in Cards Headers in OVP application.\n     */\n    showFilterInHeader?: boolean;\n    /**\n     * Represents a switch to Show or Hide Sorting in Cards Headers in OVP application.\n     */\n    showSortingInHeader?: boolean;\n    /**\n     * Flag for enabling images in a condensed list card.\n     */\n    imageSupported?: boolean;\n    /**\n     * Flag for show line item detail in list and table card.\n     */\n    showLineItemDetail?: boolean;\n    /**\n     * This property is responsible for showing and hiding text labels on the geo spots.\n     */\n    showLabelText?: boolean;\n    /**\n     * This property is responsible for passing custom parameters present in the entity set to the navigating application.\n     */\n    customParams?: string;\n    /**\n     * This property is responsible for setting specific chart settings.\n     */\n    chartProperties?: {\n        plotArea?: SapOvpPlotAreaDef;\n        timeAxis?: SapOvpTimeAxisDef;\n    };\n    /**\n     * Represents the configuration to customize the column stacked chart.\n     */\n    colorPalette?:\n        | {\n              [k: string]: any;\n          }[]\n        | {\n              [k: string]: any;\n          };\n    [k: string]: any;\n}\n\n/**\n * @displayName settings\n */\nexport interface AnalyticalCardSettings extends CommonCardSettings {\n    /**\n     * Represents the chart annotation path.\n     */\n    chartAnnotationPath?: string;\n    /**\n     * Represents the data point annotation path.\n     */\n    dataPointAnnotationPath?: string;\n    /**\n     * Represents things like people, number of items.\n     */\n    valueSelectionInfo?: string;\n}\n\n/**\n * @displayName settings\n */\nexport interface AnalyticalCardSettingsv4 extends AnalyticalCardSettings {\n    /**\n     *\n     */\n    measureAggregate?: MeasureAggregateSettings;\n}\n\nexport enum ListFlavorType {\n    standard = 'standard',\n    bar = 'bar',\n    carousel = 'carousel'\n}\n\nexport enum ListTypeType {\n    extended = 'extended',\n    condensed = 'condensed'\n}\n\nexport enum SortOrderType {\n    ascending = 'ascending',\n    descending = 'descending'\n}\n\n/**\n * @displayName settings\n */\nexport interface ListCardSettings extends CommonCardSettings {\n    /**\n     * Represents the flavor of the list to use in this card. The flavor can be bar chart, carousel or standard.\n     */\n    listFlavor?: ListFlavorType;\n    /**\n     * Represents the type of list to use for this card. The list can be extended to display more information or condensed to take up less space on the card.\n     */\n    listType?: ListTypeType;\n    /**\n     * Represents the annotation path.\n     */\n    annotationPath?: string;\n    /**\n     * Represents things like people, number of items.\n     */\n    valueSelectionInfo?: string;\n    /**\n     * Defines the property by which the list shall be sorted.\n     */\n    sortBy?: string;\n    /**\n     * Defines the sort order.\n     */\n    sortOrder?: SortOrderType;\n    /**\n     * Represents the data point annotation path.\n     */\n    dataPointAnnotationPath?: string;\n    /**\n     * Flag for show line item detail in list and table card.\n     */\n    showLineItemDetail?: boolean;\n}\n\n/**\n * @displayName settings\n */\nexport interface StackCardSettings extends CommonCardSettings {\n    /**\n     * Represents the user defined string in placeholder card.\n     */\n    itemText?: string;\n    /**\n     * The navigation property used to display information from a secondary entity set.\n     */\n    objectStreamCardsNavigationProperty?: string;\n    /**\n     * Configures additional settings for the cards displayed in the object stream.\n     */\n    objectStreamCardsSettings?: ObjectStreamCardsSettingsDef;\n}\n\n/**\n * @displayName settings\n */\nexport interface TableCardSettings extends CommonCardSettings {\n    /**\n     * Represents the annotation path.\n     */\n    annotationPath?: string;\n    /**\n     * Represents the flavor of the list to use in this card. The flavor can be bar chart, carousel or standard.\n     */\n    listFlavor?: ListFlavorType;\n    /**\n     * Represents the type of list to use for this card. The list can be extended to display more information or condensed to take up less space on the card.\n     */\n    listType?: ListTypeType;\n    /**\n     * Represents the data point annotation path.\n     */\n    dataPointAnnotationPath?: string;\n    /**\n     * Represents the selection presentation annotation path.\n     */\n    selectionPresentationAnnotationPath?: string;\n    /**\n     * Represents things like people, number of items.\n     */\n    valueSelectionInfo?: string;\n    /**\n     * Defines the property by which the list shall be sorted.\n     */\n    sortBy?: string;\n    /**\n     * Defines the sort order.\n     */\n    sortOrder?: SortOrderType;\n    /**\n     * Flag for show line item detail in list and table card.\n     */\n    showLineItemDetail?: boolean;\n}\n\nexport enum LinkListFlavorType {\n    standard = 'standard',\n    carousel = 'carousel'\n}\n\n/**\n * @displayName settings\n */\nexport interface LinkListCardSettings extends CommonCardSettings {\n    /**\n     * The targetUri is a URI defining the link to a quick view, related application or external resource.\n     */\n    targetUri?: string;\n    /**\n     * listFlavor represents the flavor of the list to use in this card. The flavor can be bar chart, carousel or standard.\n     */\n    listFlavor?: LinkListFlavorType;\n    /**\n     * sortBy defines the property by which the list shall be sorted.\n     */\n    sortBy?: string;\n    /**\n     * sortOrder defines the sort order. Valid values are 'ascending' or 'descending'\n     */\n    sortOrder?: SortOrderType;\n    /**\n     * headerAnnotationPath represents the path to a HeaderInfo annotation.\n     */\n    headerAnnotationPath?: string;\n    /**\n     * staticContent represents the static content of a static link list card.\n     */\n    staticContent?: StaticContent[];\n    /**\n     * Represents the annotation path.\n     */\n    annotationPath?: string;\n}\n\nexport interface StaticContent {\n    /**\n     * The language-dependent title of the StaticContent.\n     * @i18nClassification TIT: Title of the StaticContent\n     */\n    title: string;\n    /**\n     * The language-dependent subtitle of the StaticContent.\n     * @i18nClassification TIT: Subtitle of the StaticContent\n     */\n    subTitle?: string;\n    /**\n     * The uri for the image of the StaticContent.\n     */\n    imageUri?: string;\n    /**\n     * The uri for the target of the StaticContent.\n     */\n    targetUri?: string;\n    /**\n     * The alternative text for the image of the StaticContent.\n     * @i18nClassification ALT: The alternative text for the image of the StaticContent\n     */\n    imageAltText?: string;\n    /**\n     * Used to provide intent based navigation.\n     */\n    semanticObject?: string;\n    /**\n     * Used to provide intent based navigation.\n     */\n    action?: string;\n    /**\n     * Open static content in a new window.\n     */\n    openInNewWindow?: boolean;\n}\n", "export const enum DateRangeType {\n    DATERANGE = 'DATERANGE',\n    DATE = 'DATE',\n    FROM = 'FROM',\n    TO = 'TO',\n    DAYS = 'DAYS',\n    LASTDAYS = 'LASTDAYS',\n    LASTWEEKS = 'LASTWEEKS',\n    WEEK = 'WEEK',\n    LASTMONTHS = 'LASTMONTHS',\n    MONTH = 'MONTH',\n    QUARTER = 'QUARTER',\n    LASTQUARTERS = 'LASTQUARTERS',\n    LASTYEARS = 'LASTYEARS',\n    LASTYEAR = 'LASTYEAR',\n    YEAR = 'YEAR',\n    NEXTDAYS = 'NEXTDAYS',\n    NEXTWEEKS = 'NEXTWEEKS',\n    NEXTMONTHS = 'NEXTMONTHS',\n    NEXTQUARTERS = 'NEXTQUARTERS',\n    NEXTYEARS = 'NEXTYEARS',\n    NEXT = 'NEXT',\n    SPECIFICMONTH = 'SPECIFICMONTH',\n    YESTERDAY = 'YESTERDAY',\n    YEARTODATE = 'YEARTODATE',\n    TODAY = 'TODAY',\n    TOMORROW = 'TOMORROW',\n    THISWEEK = 'THISWEEK',\n    LASTWEEK = 'LASTWEEK',\n    LAST2WEEKS = 'LAST2WEEKS',\n    LAST3WEEKS = 'LAST3WEEKS',\n    LAST4WEEKS = 'LAST4WEEKS',\n    LAST5WEEKS = 'LAST5WEEKS',\n    NEXTWEEK = 'NEXTWEEK',\n    NEXT2WEEKS = 'NEXT2WEEKS',\n    NEXT3WEEKS = 'NEXT3WEEKS',\n    NEXT4WEEKS = 'NEXT4WEEKS',\n    NEXT5WEEKS = 'NEXT5WEEKS',\n    THISMONTH = 'THISMONTH',\n    LASTMONTH = 'LASTMONTH',\n    NEXTMONTH = 'NEXTMONTH',\n    THISQUARTER = 'THISQUARTER',\n    LASTQUARTER = 'LASTQUARTER',\n    NEXTQUARTER = 'NEXTQUARTER',\n    QUARTER1 = 'QUARTER1',\n    QUARTER2 = 'QUARTER2',\n    QUARTER3 = 'QUARTER3',\n    QUARTER4 = 'QUARTER4',\n    TODAYFROMTO = 'TODAYFROMTO'\n}\n\n/**\n * Filter Field\n * @isViewNode true\n */\nexport type SelectionField = {} | SelectionFieldDateSettings;\n\n/**\n * Filter Field for Date Settings\n * @isViewNode true\n */\nexport interface SelectionFieldDateSettings {\n    /**\n     * The selectedValues property is a set of standard date range values that you want to include or exclude.\n     */\n    selectedValues?: DateRangeType[];\n    /**\n     * The exclude property is set to True by default. This means excluding all values given as selectedValues from the list of date range filters. If the exclude property is set to False, the application shows only selected values in the list of date range filters.\n     */\n    exclude?: boolean;\n    /**\n     * This property references a JS class, which you use to modify the date range value list. You can either remove standard data range values or add custom values.\n     * The customDateRangeImplementation setting takes priority followed by filter and selectedValues when excluding date range types.\n     */\n    customDateRangeImplementation?: string;\n    /**\n     * You can use the filter settings to include and exclude specific date range values.\n     */\n    filter?: FilterType[];\n}\n\n/**\n * Filter Fields\n * @isViewNode true\n */\nexport interface SelectionFields {\n    [key: string]: SelectionField;\n}\n\nexport const enum FilterPathType {\n    key = 'key',\n    catgory = 'category'\n}\n\nexport type FilterType = {\n    /**\n     * Choose 'key' to define filter values for single values of the date range, or 'category' to filter by a whole subset.\n     */\n    path: FilterPathType;\n    /**\n     * The 'contains' string specifies a filter describing a set of values of the date range type.\n     */\n    contains?: string;\n    /**\n     * Defines a single value of the standard date range type.\n     */\n    equals?: DateRangeType[];\n    /**\n     * The exclude property is set to True by default. This means excluding all values given as selectedValues from the list of date range filters. If the exclude property is set to False, the application shows only selected values in the list of date range filters.\n     */\n    exclude?: boolean;\n};\n\nexport interface DateRange {\n    /**\n     * If set to true all date fields with filter restriction interval will be treated as DateTimeRange filters.\n     */\n    useDateRange?: boolean;\n    /**\n     * The selectedValues property is a set of standard date range values that you want to include or exclude.\n     */\n    selectedValues?: DateRangeType[];\n    /**\n     * The exclude property is set to True by default. This means excluding all values given as selectedValues from the list of date range filters. If the exclude property is set to False, the application shows only selected values in the list of date range filters.\n     */\n    exclude?: boolean;\n}\n\n/**\n * Filter Bar\n * @isViewNode true\n */\nexport interface ListReportFilterBar {\n    /**\n     * Controls whether smart variant management is active. Default is true.\n     */\n    smartVariantManagement?: boolean;\n    /**\n     * If liveMode is set, the search will be automatically triggered when a filter value is set.\n     */\n\n    liveMode?: boolean;\n    /**\n     * If you set the flag to true, then standard variant management is not available in the app. The app name is displayed instead.\n     * If you set the flag to false or if the flag is not at all contained in the manifest of the app, the standard variant management is available and can be enabled or disabled.\n     */\n    variantManagementHidden?: boolean;\n    /**\n     * You can choose an app-specific title by setting the corresponding value for the subTitleIfVariantMgmtHidden property.\n     * @i18nClassification TIT: Subtitle if variant management is hidden\n     */\n    subTitleIfVariantMgmtHidden?: string;\n    /**\n     * Use to set date settings for fields in smart filter bar\n     */\n    dateSettings?: DateRange;\n    /**\n     * Handles visibility of the Clear button on the FilterBar.\n     */\n    showClearOnFB?: boolean;\n    /**\n     * Handles visibility of the Filter button on the FilterBar.\n     */\n    showFilterConfiguration?: boolean;\n    /**\n     * Handles visibility of the Restore button on the FilterBar.\n     */\n    showRestoreOnFB?: boolean;\n    /**\n     * @isViewNode true\n     * Selection Fields\n     */\n    selectionFields?: SelectionFields;\n}\n\n/**\n * Filter Bar\n * @isViewNode true\n */\nexport interface AnalyticalListPageFilterBar extends ListReportFilterBar {\n    /**\n     * Go button is displayed for compact filters when this is set to true\n     */\n    showGoButtonOnFilterBar?: boolean;\n    /**\n     * Lets you to add default values for FilterBar using SelectionVariant annotation\n     */\n    filterDefaultsFromSelectionVariant?: boolean;\n}\n", "import type { SAPUI5_FRAGMENT_CLASS } from '../../common/webapp/manifest/sapUi5';\nimport type { ToolBar } from './ToolBar';\nimport type { Action } from './Action';\n\nexport enum HAlign {\n    initial = 'Initial',\n    left = 'Left',\n    center = 'Center',\n    right = 'Right',\n    begin = 'Begin',\n    end = 'End'\n}\n\nexport type ExportType = keyof typeof sap.ui.comp.smarttable.ExportType;\n\n/**\n * Column\n * @isViewNode true\n */\nexport interface TableColumn {\n    /**\n     * The width property defines the width of the column.\n     */\n    width?: string;\n    /**\n     * The hAlign property defines the horizontal alignment of the column content.\n     */\n    hAlign?: HAlign;\n}\n\n/**\n * Column Action\n * @isViewNode true\n */\nexport interface TableColumnAction extends Action, TableColumn {}\n\n/**\n * Custom Column\n * @isViewNode true\n */\nexport interface TableCustomColumn {\n    /**\n     * In case the fragment needs to be re-used for multiple tabs, the id property must be set to make the ids unique.\n     * @artifactType Fragment\n     */\n    id?: string;\n    /**\n     * The label of the custom column, preferably as an i18n key.\n     * @i18nClassification COL: Custom column header text\n     * @artifactType Fragment\n     */\n    text?: string;\n    /**\n     * The column key\n     * @artifactType Fragment\n     */\n    columnKey: string;\n    /**\n     * The index of the column in the overall collection; if undefined, the custom column will be added at the end of the table.\n     * @minimum 0\n     * @hidden true\n     * @artifactType Fragment\n     */\n    columnIndex?: number;\n    /**\n     * If the content of your custom column refers to a property (such as{Price}), you need to include a corresponding 'leadingProperty' entry in the column definition.\n     * @artifactType Fragment\n     */\n    leadingProperty?: string;\n    /**\n     * The UI5 control used for your extension\n     * @artifactType Manifest\n     */\n    className: typeof SAPUI5_FRAGMENT_CLASS;\n    /**\n     * The relative path to your fragment with path segments separated by '.'. The first element is the app ID.\n     * @artifactType Manifest\n     */\n    fragmentName: string;\n    /**\n     * In case of a responsive table, you additionally need to specify a fragment for the table cells.\n     * @artifactType Manifest\n     */\n    cellsFragmentName?: string;\n    /**\n     * If you use QuickVariantSelectionX, you need to define the extensions per tab. 'tabKey' is the key provided when defining the QuickVariantSelectionX.\n     * @hidden true\n     * @artifactType Manifest\n     */\n    tabKey?: string;\n    /**\n     * Type of custom column view extension.\n     * @artifactType Manifest\n     */\n    extensionType: TableColumnExtensionTypeV2;\n}\n\nexport enum customColumnViewTypes {\n    XML = 'XML'\n}\n\nexport enum TableTypeV2 {\n    ResponsiveTable = 'ResponsiveTable',\n    GridTable = 'GridTable',\n    AnalyticalTable = 'AnalyticalTable',\n    TreeTable = 'TreeTable'\n}\n\nexport enum TableColumnExtensionTypeV2 {\n    ResponsiveTableColumnsExtension = 'ResponsiveTableColumnsExtension',\n    AnalyticalTableColumnsExtension = 'AnalyticalTableColumnsExtension',\n    TreeTableColumnsExtension = 'TreeTableColumnsExtension',\n    GridTableColumnsExtension = 'GridTableColumnsExtension'\n}\n\nexport type AnyTableType =\n    | TableTypeV2.AnalyticalTable\n    | TableTypeV2.ResponsiveTable\n    | TableTypeV2.GridTable\n    | TableTypeV2.TreeTable;\nexport type AnyTable = AnalyticalTable | ResponsiveTable | GridTable | TreeTable;\n\n/**\n * Custom Columns\n * @isViewNode true\n */\nexport type TableCustomColumns = Array<TableCustomColumn>;\n\nexport interface GenericColumns {\n    [key: string]: TableColumn | TableCustomColumns | TableColumnAction;\n}\n\nexport enum PopinLayout {\n    Block = 'Block',\n    GridLarge = 'GridLarge',\n    GridSmall = 'GridSmall'\n}\n\nexport interface QuickVariant {\n    /**\n     * A key entry that is used for initializing the corresponding SegmentedButton item. This entry is mandatory.\n     */\n    key: string;\n    /**\n     * Use annotationPath to define a specific variant that points to a SelectionVariant or SelectionPresentationVariant annotation.\n     */\n    annotationPath: string;\n}\n\nexport interface QuickVariantX extends QuickVariant {\n    /**\n     * Represents the entity set that will be displayed in this variant\n     */\n    entitySet: string;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n    /**\n     * The 'Select All' button is disabled by default. To enable it, set selectAll to true.\n     */\n    selectAll?: boolean;\n    /**\n     * If new data needs to be loaded from the back-end system for this, the number of lines to be loaded is restricted to the specified limit. The default value for this limit is 200. If selectAll is true, the selection limit is not evaluated.\n     */\n    selectionLimit?: number;\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: AnyTableType;\n    /**\n     * To enable navigation for charts, you have to set the property to \"true\" and maintain an internal navigation target in the manifest.\n     */\n    showItemNavigationOnChart?: boolean;\n    /**\n     *  Used to enable inline deletion in a responsive table of list report and object page\n     */\n    inlineDelete?: boolean;\n}\n\nexport interface QuickVariantSelection {\n    /**\n     * To show the number of records available, set showCounts to true.\n     */\n    showCounts?: boolean;\n    /**\n     * The variants section contains a set of entries that point to SelectionVariants or SelectionPresentationVariants defined in the annotations.\n     */\n    variants: {\n        [key: string]: QuickVariant;\n    };\n}\n\nexport interface QuickVariantSelectionX extends QuickVariantSelection {\n    /**\n     * When set to true, this enables automatic binding of the table with either the tableBindingPath (if it exists) or the entitySet property.\n     */\n    enableAutoBinding?: boolean;\n    /**\n     * The variants section contains a set of entries that point to SelectionVariants or SelectionPresentationVariants defined in the annotations.\n     */\n    variants: {\n        [key: string]: QuickVariantX;\n    };\n}\n\nexport interface CreateWithFilters {\n    /**\n     * For the new create action to use the filter settings as input, set strategy to \"extension\" and implement the extension function as mentioned in help.sap.com for SAP S/4 HANA, section \u201CPrefilling Fields When Creating a New Entity Using an Extension Point\u201C.\n     */\n    strategy: Strategy;\n}\n\nexport enum Strategy {\n    extension = 'extension'\n}\n\nexport enum DefaultContentView {\n    charttable = 'charttable',\n    chart = 'chart',\n    table = 'table'\n}\n\nexport enum DefaultFilterMode {\n    visual = 'visual',\n    compact = 'compact'\n}\n\nexport enum LoadDataOnAppLaunchSettings {\n    always = 'always',\n    never = 'never',\n    ifAnyFilterExist = 'ifAnyFilterExist'\n}\n\nexport interface DataLoadSettings {\n    /**\n     * Change the default behavior for autoloading of data.\n     * For multi-view scenarios, you can also change the setting enableAutobinding to False under quickVariantSelectionX instead of using the loadDataOnAppLaunch setting.\n     */\n    loadDataOnAppLaunch: LoadDataOnAppLaunchSettings;\n}\n\nexport interface Fields4Dialog {\n    fields: string[];\n}\n\nexport interface CommonTableSettings<COLS = GenericColumns> {\n    /**\n     * You can enable the creation of objects that have a maximum of 8 data fields through a dialog in the list report page.\n     */\n    createWithParameterDialog?: Fields4Dialog;\n    /**\n     * The 'Select All' button is disabled by default. To enable it, set selectAll to true.\n     */\n    selectAll?: boolean;\n    /**\n     * If new data needs to be loaded from the back-end system for this, the number of lines to be loaded is restricted to the specified limit. The default value for this limit is 200. If selectAll is true, the selection limit is not evaluated.\n     */\n    selectionLimit?: number;\n    /**\n     * The showTablePersonalisation attribute can be set to false to hide the table personalization button.\n     */\n    showTablePersonalisation?: boolean;\n    /**\n     * useExportToExcel must be set to true if you want to export data to a spreadsheet application, for example Microsoft Excel.\n     */\n    useExportToExcel?: boolean;\n    /**\n     * Specifies the type of export to be used in the SmartTable control. UI5Client is the default option.\n     */\n    exportType?: ExportType;\n    /**\n     * Set to false if the table does not occupy the entire space available in the container.\n     */\n    fitContainer?: boolean;\n    /**\n     * With quickVariantSelection you can switch on the multiple view feature. It links to variants you must have added to your annotations beforehand.\n     */\n    quickVariantSelection?: QuickVariantSelection;\n    /**\n     * Switch on the multiple view feature (Multiple table mode with charts) and link to the variants you have added to your annotations.\n     */\n    quickVariantSelectionX?: QuickVariantSelectionX;\n    /**\n     * For analytical tables, grid tables and tree tables you can define a condensed table layout by setting condensedTableLayout to true.\n     */\n    condensedTableLayout?: boolean;\n    /**\n     * If you have enabled harmonized variant management, by default, you cannot set a filter in the table personalization settings.\n     * To enable filtering, set the enableTableFilterInPageVariant property to true.\n     */\n    enableTableFilterInPageVariant?: boolean;\n    /**\n     * Change the default behavior for autoloading of data.\n     */\n    dataLoadSettings?: DataLoadSettings;\n    /**\n     * Tool Bar\n     */\n    toolBar?: ToolBar;\n    /**\n     * Columns\n     * @isViewNode true\n     */\n    columns?: COLS;\n}\n\nexport interface ResponsiveTableCommonSettings extends CommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.ResponsiveTable;\n    /**\n     * Set includeItemInSelection to true if you want items to be selectable when they are clicked rather than after the selection control has been set.\n     */\n    includeItemInSelection?: boolean;\n    /**\n     * popinLayout defines the layout in which the table pop-in rows are rendered.\n     */\n    popinLayout?: PopinLayout;\n    /**\n     * createWithFilters adds a new create action that uses the filter settings as input.\n     */\n    createWithFilters?: CreateWithFilters;\n    /**\n     * In the list report and on the object page, you can enable buttons to display and hide draft values. By default, these buttons are hidden. To enable them, set the showDraftToggle flag to true.\n     */\n    showDraftToggle?: boolean;\n    /**\n     * growingThreshold defines the number of items to be requested from the model for each grow. This property can only be used if the growing property is set to true.\n     */\n    growingThreshold?: number;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ResponsiveTableWithMultiSelect extends ResponsiveTableCommonSettings {\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ResponsiveTableWithInlineDelete extends ResponsiveTableCommonSettings {\n    /**\n     *  Used to enable inline deletion in a responsive table of list report and object page\n     */\n    inlineDelete?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ResponsiveTable\n    extends ResponsiveTableCommonSettings,\n        ResponsiveTableWithMultiSelect,\n        ResponsiveTableWithInlineDelete {}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface TreeTable extends CommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.TreeTable;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n    /**\n     * In the list report and on the object page, you can enable buttons to display and hide draft values. By default, these buttons are hidden. To enable them, set the showDraftToggle flag to true.\n     */\n    showDraftToggle?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface AnalyticalTable extends CommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.AnalyticalTable;\n    /**\n     * Represents the SelectionPresentationVariant qualifier. ALP looks for SelectionPresentationVariant with this qualifier and if not found, it looks for PresentationVariant with this qualifier.\n     */\n    qualifier?: string;\n    /**\n     * Determines the visualization of content area\n     */\n    defaultContentView?: DefaultContentView;\n    /**\n     * Determines the filter mode that is used\n     */\n    defaultFilterMode?: DefaultFilterMode;\n    /**\n     * Lets you define title for the content area\n     * @i18nClassification TIT: Title for the content area\n     */\n    contentTitle?: string;\n    /**\n     * All filter fields will be set as in parameter\n     */\n    allFiltersAsInParameters?: boolean;\n    //TODO keyPerformanceIndicators\n    /**\n     * createWithFilters adds a new create action that uses the filter settings as input.\n     */\n    createWithFilters?: CreateWithFilters;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n    /**\n     * In the list report and on the object page, you can enable buttons to display and hide draft values. By default, these buttons are hidden. To enable them, set the showDraftToggle flag to true.\n     */\n    showDraftToggle?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface TableALPCommonSettings extends CommonTableSettings {\n    /**\n     * Represents the SelectionPresentationVariant qualifier. ALP looks for SelectionPresentationVariant with this qualifier and if not found, it looks for PresentationVariant with this qualifier.\n     */\n    qualifier?: string;\n    /**\n     * Determines the visualization of content area\n     */\n    defaultContentView?: DefaultContentView;\n    /**\n     * Determines the filter mode that is used\n     */\n    defaultFilterMode?: DefaultFilterMode;\n    /**\n     * Lets you define title for the content area\n     * @i18nClassification TIT: Title for the content area\n     */\n    contentTitle?: string;\n    /**\n     * This setting allows developer to determine chart / table interaction. 'true' would mean chart act as filter for table, 'false' would mean that matching table rows are highlighted but table is not filtered.\n     */\n    autoHide?: boolean;\n    /**\n     * All filter fields will be set as in parameter\n     */\n    allFiltersAsInParameters?: boolean;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ALPResponsiveTable extends TableALPCommonSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.ResponsiveTable;\n    /**\n     * growingThreshold defines the number of items to be requested from the model for each grow. This property can only be used if the growing property is set to true.\n     */\n    growingThreshold?: number;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ALPGridTable extends TableALPCommonSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.GridTable;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ALPAnalyticalTable extends TableALPCommonSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.AnalyticalTable;\n}\n\nexport interface TableALP extends ALPResponsiveTable, ALPGridTable, ALPAnalyticalTable {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.ResponsiveTable & TableTypeV2.GridTable & TableTypeV2.AnalyticalTable;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface GridTable extends CommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.GridTable;\n    /**\n     * createWithFilters adds a new create action that uses the filter settings as input.\n     */\n    createWithFilters?: CreateWithFilters;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n    /**\n     * In the list report and on the object page, you can enable buttons to display and hide draft values. By default, these buttons are hidden. To enable them, set the showDraftToggle flag to true.\n     */\n    showDraftToggle?: boolean;\n}\n", "export enum ChartType {\n    bar = 'bar',\n    column = 'column',\n    line = 'line',\n    combination = 'combination',\n    pie = 'pie',\n    donut = 'donut',\n    scatter = 'scatter',\n    bubble = 'bubble',\n    heatmap = 'heatmap',\n    bullet = 'bullet',\n    verticalBullet = 'vertical_bullet',\n    stackedBar = 'stacked_bar',\n    stackedColumn = 'stacked_column',\n    stackedCombination = 'stacked_combination',\n    horizontalStackedCombination = 'horizontal_stacked_combination',\n    dualBar = 'dual_bar',\n    dualColumn = 'dual_column',\n    dualLine = 'dual_line',\n    dualStackedBar = 'dual_stacked_bar',\n    dualStackedColumn = 'dual_stacked_column',\n    dualCombination = 'dual_combination',\n    dualStackedCombination = 'dual_stacked_combination',\n    dualHorizontalCombination = 'dual_horizontal_combination',\n    dualHorizontalStackedCombination = 'dual_horizontal_stacked_combination',\n    hundredStackedBar = '100_stacked_bar',\n    hundredStackedColumn = '100_stacked_column',\n    hundredDualStackedBar = '100_dual_stacked_bar',\n    hundredDualStackedColumn = '100_dual_stacked_column',\n    waterfall = 'waterfall',\n    horizontalWaterfall = 'horizontal_waterfall'\n}\n\n/**\n * Chart\n * @isViewNode true\n */\nexport interface ChartSettings {\n    /**\n     * Controls the visibility of the legend button.\n     */\n    showLegendButton?: boolean;\n    /**\n     * Controls the visibility of the chart download button.\n     */\n    showDownloadButton?: boolean;\n    /**\n     * Controls the visibility of the chart type button.\n     */\n    showChartTypeSelectionButton?: boolean;\n    /**\n     * Comma-separated value fields do not showup in the list of available chart types.\n     */\n    ignoredChartTypes?: ChartType[];\n    /**\n     * Controls the visibility of the data label.\n     */\n    showDataLabel?: boolean;\n}\n", "import type { HeaderAction, ObjectPageHeaderActionsStandard } from '.';\n\nexport enum AvatarShape {\n    Circle = 'Circle',\n    Square = 'Square'\n}\n\nexport interface GenericActions extends ObjectPageHeaderActionsStandard {\n    [id: string]: HeaderAction;\n}\n\n/**\n * Header\n * @isViewNode true\n */\nexport interface ObjectPageHeader<ACT = GenericActions> {\n    /**\n     * Set showRelatedApps to true to show the navigation button for related apps.\n     */\n    showRelatedApps?: boolean;\n    /**\n     * Set editableHeaderContent to true to make the header fields editable.\n     */\n    editableHeaderContent?: boolean;\n    /**\n     * Set simpleHeaderFacets to true to use simpler header facets.\n     */\n    simpleHeaderFacets?: boolean;\n    /**\n     * With displayShape you can define the shape of the avatar.\n     */\n    displayShape?: AvatarShape;\n    /**\n     * Set properties of actions on Object Page Header\n     */\n    actions?: ACT;\n}\n", "import type {\n    ObjectPageResponsiveTableWithMultiSelect,\n    ObjectPageResponsiveTableWithInlineDelete,\n    ObjectPageAnalyticalTable,\n    ObjectPageGridTable,\n    ObjectPageTreeTable,\n    ObjectPageChart,\n    ObjectPageForm\n} from './index';\nimport type { ViewTypes, SAPUI5_FRAGMENT_CLASS, SAPUI5_VIEW_CLASS } from '../../common/webapp/manifest/sapUi5';\n\n/**\n * Section\n * @isViewNode true\n */\nexport interface ObjectPageSectionV2 {\n    /**\n     * Allows you to define if the section should be visible on the screen.\n     */\n    visible?: boolean;\n}\n\n/**\n * Form\n * @isViewNode true\n */\nexport interface ObjectPageSectionFormV2 extends ObjectPageSectionV2 {\n    form?: ObjectPageForm;\n}\n\nexport type AnyObjectPageTableType =\n    | ObjectPageResponsiveTableWithMultiSelect\n    | ObjectPageResponsiveTableWithInlineDelete\n    | ObjectPageAnalyticalTable\n    | ObjectPageGridTable\n    | ObjectPageTreeTable;\n\n/**\n * Table\n * @isViewNode true\n */\nexport interface ObjectPageSectionTableV2 extends ObjectPageSectionV2 {\n    table?: AnyObjectPageTableType;\n}\n\n/**\n * Chart\n * @isViewNode true\n */\nexport interface ObjectPageSectionChartV2 extends ObjectPageSectionV2 {\n    chart?: ObjectPageChart;\n}\n\nexport interface ObjectPageSectionContactV2 extends ObjectPageSectionV2 {\n    /**\n     * Contact\n     *  @isViewNode true\n     */\n    contact?: object;\n}\n\nexport interface ObjectPageSectionAddressV2 extends ObjectPageSectionV2 {\n    /**\n     * Address\n     *  @isViewNode true\n     */\n    address?: object;\n}\n\nexport interface ObjectPageSubSectionContactV2 extends ObjectPageSectionV2 {\n    /**\n     * Contact\n     *  @isViewNode true\n     */\n    contact?: object;\n}\n\nexport interface ObjectPageSubSectionAddressV2 {\n    /**\n     * Address\n     *  @isViewNode true\n     */\n    address?: object;\n}\n\nexport type AnySubSectionType =\n    | ObjectPageSectionTableV2\n    | ObjectPageSectionChartV2\n    | ObjectPageSectionFormV2\n    | ObjectPageSubSectionContactV2\n    | ObjectPageSubSectionAddressV2;\n\nexport interface GenericSubSections {\n    [key: string]: AnySubSectionType;\n}\n\n/**\n * Subsection\n * @isViewNode true\n */\nexport interface ObjectPageSubSectionV2 extends ObjectPageSectionV2 {\n    subsections?: GenericSubSections;\n}\n\nexport type AnySectionType =\n    | ObjectPageSectionTableV2\n    | ObjectPageSectionChartV2\n    | ObjectPageSectionFormV2\n    | ObjectPageSectionContactV2\n    | ObjectPageSectionAddressV2\n    | ObjectPageSectionV2\n    | ObjectPageSubSectionV2;\n\nexport interface GenericSections {\n    [key: string]: AnySectionType;\n}\n\nexport type CustomSectionTypeV2 = ObjectPageCustomSectionView | ObjectPageCustomSectionFragment;\n\n/**\n * Custom Sections\n * @isViewNode true\n */\nexport interface CustomSections {\n    custom?: CustomSectionTypeV2[];\n}\n\nexport interface ObjectPageCustomSectionBase {\n    relatedFacet: string;\n    relativePosition: SectionPosition;\n    /**\n     * The label of the custom section, preferably as an i18n key\n     * @i18nClassification TIT: Custom section title\n     */\n    title: string;\n}\n\n/**\n * View\n * @isViewNode true\n */\nexport interface ObjectPageCustomSectionView extends ObjectPageCustomSectionBase {\n    className: typeof SAPUI5_VIEW_CLASS;\n    viewName: string;\n    type: ViewTypes;\n}\n\n/**\n * Fragment\n * @isViewNode true\n */\nexport interface ObjectPageCustomSectionFragment extends ObjectPageCustomSectionBase {\n    className: typeof SAPUI5_FRAGMENT_CLASS;\n    fragmentName: string;\n    type: ExtensionFragmentTypes;\n}\n\nexport enum SectionPosition {\n    AfterFacet = 'AfterFacet',\n    BeforeFacet = 'BeforeFacet',\n    ReplaceFacet = 'ReplaceFacet'\n}\n\nexport enum ExtensionFragmentTypes {\n    XML = 'XML'\n}\n", "import type { GenericColumns, TableTypeV2, QuickVariant, PopinLayout, ExportType } from './Table';\nimport type { ObjectPageToolBar } from './ObjectPageToolBar';\n\nexport interface QuickVariantSelectionOP {\n    /**\n     * To show the number of records available, set showCounts to true.\n     */\n    showCounts?: boolean;\n    /**\n     * The variants section contains a set of entries that point to SelectionVariants or SelectionPresentationVariants defined in the annotations.\n     */\n    variants: {\n        [key: number]: QuickVariant;\n    };\n}\n\nexport interface Fields4DialogOP {\n    fields: string[];\n}\n\nexport enum CreateMode {\n    inline = 'inline'\n}\n\nexport interface ObjectPageCommonTableSettings<COLS = GenericColumns> {\n    /**\n     * You can enable the creation of objects that have a maximum of 8 data fields through a dialog in the list report page.\n     */\n    createWithParameterDialog?: Fields4DialogOP;\n    /**\n     *  With editable you can control if a table can be edited. It should be set to false for smart tables with non-editable content.\n     */\n    editable?: boolean;\n    /**\n     * The 'Select All' button is disabled by default. To enable it, set selectAll to true.\n     */\n    selectAll?: boolean;\n    /**\n     * If new data needs to be loaded from the back-end system for this, the number of lines to be loaded is restricted to the specified limit. The default value for this limit is 200. If selectAll is true, the selection limit is not evaluated.\n     */\n    selectionLimit?: number;\n    /**\n     * With quickVariantSelection you can switch on the multiple view feature. It links to variants you must have been added to your annotations before.\n     */\n    quickVariantSelection?: QuickVariantSelectionOP;\n    /**\n     * useExportToExcel must be set to true if you want to export data to a spreadsheet application, for example Microsoft Excel.\n     */\n    useExportToExcel?: boolean;\n    /**\n     * Specifies the type of export to be used in the SmartTable control. UI5Client is the default option.\n     */\n    exportType?: ExportType;\n    /**\n     * Use createMode 'inline' to enable inline creation of table entries for draft enabled applications.\n     */\n    createMode?: CreateMode;\n    /**\n     * If createMode is set to inline, you can use this setting to disable the default sort order.\n     */\n    disableDefaultInlineCreateSort?: boolean;\n    /**\n     * To enable variant management for a specific table on an object page.\n     */\n    variantManagement?: boolean;\n    /**\n     * Tool Bar\n     */\n    toolBar?: ObjectPageToolBar;\n    /**\n     * Columns\n     */\n    columns?: COLS;\n}\n\n/**\n * @controlProperty type\n */\nexport interface ObjectPageResponsiveTableCommonSettings extends ObjectPageCommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.ResponsiveTable;\n    /**\n     * Set includeItemInSelection to true if you want items to be selectable when clicked, rather than after the selection control has been set.\n     */\n    includeItemInSelection?: boolean;\n    /**\n     * popinLayout defines the layout in which the table pop-in rows shall be rendered.\n     */\n    popinLayout?: PopinLayout;\n    /**\n     * growingThreshold defines the number of items to be requested from the model for each grow. This property can only be used if the growing property is set to true.\n     */\n    growingThreshold?: number;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ObjectPageResponsiveTableWithMultiSelect extends ObjectPageResponsiveTableCommonSettings {\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ObjectPageResponsiveTableWithInlineDelete extends ObjectPageResponsiveTableCommonSettings {\n    /**\n     *  Used to enable inline deletion in a responsive table of list report and object page\n     */\n    inlineDelete?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ObjectPageResponsiveTable\n    extends ObjectPageResponsiveTableCommonSettings,\n        ObjectPageResponsiveTableWithMultiSelect,\n        ObjectPageResponsiveTableWithInlineDelete {}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ObjectPageAnalyticalTable extends ObjectPageCommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.AnalyticalTable;\n    /**\n     * For the analytical table, grid table and tree table you can decide on a condensed table layout by setting condensedTableLayout to true.\n     */\n    condensedTableLayout?: boolean;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ObjectPageGridTable extends ObjectPageCommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.GridTable;\n    /**\n     * For the analytical table, grid table and tree table you can decide on a condensed table layout by setting condensedTableLayout to true.\n     */\n    condensedTableLayout?: boolean;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n * @controlProperty type\n */\nexport interface ObjectPageTreeTable extends ObjectPageCommonTableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV2.TreeTable;\n    /**\n     * For the analytical table, grid table and tree table you can decide on a condensed table layout by setting condensedTableLayout to true.\n     */\n    condensedTableLayout?: boolean;\n    /**\n     * Single selection in tables is enabled by default. If you want, you can enable multi-select.\n     */\n    multiSelect?: boolean;\n}\n", "import type { SapUiGenericAppPageSettings } from '../../../common/page';\nimport type { FlexibleColumnLayout, FlexibleColumnLayoutType } from '../../../common';\n\nexport interface SapUiAppV2 {\n    pages: SapUiAppPagesV2;\n    _version?: string;\n    settings?: SapUiAppSettingsV2;\n}\n\nexport interface SapUiAppPagesV2 {\n    [key: string]: SapUiAppPageV2;\n}\n\nexport const FE_TEMPLATE_V2 = 'sap.suite.ui.generic.template';\nexport const FE_TEMPLATE_V2_OBJECT_PAGE = 'sap.suite.ui.generic.template.ObjectPage';\nexport const FE_TEMPLATE_V2_LIST_REPORT = 'sap.suite.ui.generic.template.ListReport';\nexport const FE_TEMPLATE_V2_ALP = 'sap.suite.ui.generic.template.AnalyticalListPage';\n\nexport interface SapUiAppPageV2 {\n    entitySet?: string;\n    navigationProperty?: string;\n    component?: {\n        name: string;\n        list?: boolean;\n        settings?: SapUiGenericAppPageSettings;\n        sections?: {\n            sectionIds?: SapUiGenericAppPageSettings;\n        };\n    };\n    pages?: SapUiAppPagesV2;\n    defaultLayoutType?: FlexibleColumnLayoutType;\n}\n\nexport interface SapUiAppSettingsV2 {\n    flexibleColumnLayout?: FlexibleColumnLayout;\n}\n", "import type {\n    SapUi5RootView,\n    SapUi5OdataModel,\n    SapUi5ResourceModel,\n    SapUi5RoutingRoute,\n    SAPUI5_FRAGMENT_CLASS,\n    SAPUI5_VIEW_CLASS,\n    ViewTypes,\n    SapUi5RoutingTargetBase,\n    SapUi5RoutingTarget,\n    Dependencies\n} from '../../../common/webapp/manifest/sapUi5';\nimport type { ManifestSection } from '../../..';\n\nexport interface SapUi5 {\n    flexEnabled?: boolean;\n    resources?: object;\n    dependencies?: Dependencies;\n    models?: { [key: string]: SapUi5OdataModel | SapUi5ResourceModel };\n    routing?: SapUi5RoutingV2;\n    [key: string]: string | object | boolean;\n    rootView?: SapUi5RootView;\n    extends?: SapUi5Extends;\n}\n\nexport interface SapUi5RoutingV2 {\n    routes?: SapUi5RoutingRoute[];\n    targets: SapUi5RoutingTargetsV2;\n}\n\nexport interface SapUi5RoutingTargetsV2 {\n    [key: string]: SapUi5RoutingTarget | SapUi5RoutingTargetCustomPageV2;\n}\n\nexport interface SapUi5RoutingTargetCustomPageV2 extends SapUi5RoutingTargetBase {\n    viewId: string;\n    viewName: string;\n    viewLevel?: number;\n    title?: string;\n}\n\n// SAPUI5 EXTENDS\nexport const SAPUI5_VIEW_EXTENSION = 'sap.ui.viewExtensions';\nexport const SAPUI5_CONTROLLER_EXTENSION = 'sap.ui.controllerExtensions';\n\nexport interface SapUi5Extends {\n    extensions?: SapUi5Extensions;\n}\n\nexport interface SapUi5Extensions {\n    [SAPUI5_VIEW_EXTENSION]?: SapUi5ViewExtensions;\n    // Added it here, but sync logic is not supported yet\n    [SAPUI5_CONTROLLER_EXTENSION]?: SapUi5ControllerExtensions;\n}\nexport const SAPUI5_VIEW_EXTENSION_OBJECT_PAGE = 'sap.suite.ui.generic.template.ObjectPage.view.Details';\nexport const SAPUI5_VIEW_EXTENSION_LIST_REPORT = 'sap.suite.ui.generic.template.ListReport.view.ListReport';\nexport const SAPUI5_VIEW_EXTENSION_ANALYTICAL_LIST_PAGE =\n    'sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage';\n\n// VIEW EXTENDS\nexport interface SapUi5PageViewExtensions {\n    [key: string]: SapUi5ViewExtensionView | SapUi5ViewExtensionFragment;\n}\n\nexport interface SapUi5ViewExtensions {\n    [SAPUI5_VIEW_EXTENSION_OBJECT_PAGE]?: SapUi5PageViewExtensions;\n    [SAPUI5_VIEW_EXTENSION_LIST_REPORT]?: SapUi5PageViewExtensions;\n}\n\nexport interface SapUi5ViewExtensionBase {\n    type: ViewTypes;\n}\n\nexport interface SapUi5ViewExtensionView extends SapUi5ViewExtensionBase {\n    className: typeof SAPUI5_VIEW_CLASS;\n    viewName: string;\n}\n\nexport interface SapUi5ViewExtensionFragment extends SapUi5ViewExtensionBase {\n    className: typeof SAPUI5_FRAGMENT_CLASS;\n    fragmentName: string;\n}\n\n// CONTROLLER EXTENDS\nexport interface SapUi5ControllerExtensions {\n    [SAPUI5_VIEW_EXTENSION_OBJECT_PAGE]?: SapUi5PageControllerExtensions;\n    [SAPUI5_VIEW_EXTENSION_LIST_REPORT]?: SapUi5PageControllerExtensions;\n}\n\nexport interface SapUi5PageControllerExtensions {\n    [key: string]: SapUi5ControllerExtension;\n}\n\nexport interface SapUi5ControllerExtension {\n    controllerName: string;\n    [ManifestSection.generic]: { [key: string]: SapUi5ControllerExtensionSettings };\n}\n\n// Currently sync does not support controller extensions\nexport interface SapUi5ControllerExtensionSettings {\n    EntitySet: string;\n    Actions?: unknown;\n    Header?: unknown;\n    Sections?: unknown;\n}\n", "import type {\n    DateRangeType,\n    FilterType,\n    DateRange,\n    ListCard,\n    AnalyticalCard,\n    StackCard,\n    LinklistCard,\n    TableCard,\n    CustomCard\n} from './controls';\n\n/**\n * @isViewNode false\n */\nexport interface SelectedValues {\n    /**\n     * The selectedValues property is a set of standard date range values that you want to include or exclude.\n     */\n    selectedValues?: DateRangeType[];\n    /**\n     * The exclude property is set to True by default. This means excluding all values given as selectedValues from the list of date range filters. If the exclude property is set to False, the application shows only selected values in the list of date range filters.\n     */\n    exclude?: boolean;\n    /**\n     * This property references a JS class, which you use to modify the date range value list. You can either remove standard data range values or add custom values.\n     * The customDateRangeImplementation setting takes priority followed by filter and selectedValues when excluding date range types.\n     */\n    customDateRangeImplementation?: string;\n    /**\n     * You can use the filter settings to include and exclude specific date range values.\n     */\n    filter?: FilterType[];\n}\n\nexport interface DateRangeOVP extends DateRange {\n    /**\n     * For a fields' list you can define the set of standard date range values separately.\n     */\n    fields?: {\n        [field: string]: SelectedValues;\n    };\n}\n\nexport type FilterSettingsType = {\n    /**\n     * You can define date ranges, such as lastYear or nextQuarter on the Smart Filter Bar\n     */\n    dateSettings?: DateRangeOVP;\n};\n\nexport enum ContainerLayoutType {\n    fixed = 'fixed',\n    resizable = 'resizable'\n}\n\nexport type CardType = ListCard | AnalyticalCard | StackCard | LinklistCard | TableCard | CustomCard;\n\nexport type ChartSettingsType = {\n    /**\n     * Set the showDataLabel property to true to make data labels visible in analytical cards.\n     */\n    showDataLabel?: boolean;\n};\n", "export * from './controls';\nexport * from './webapp';\nexport * from './page';\nexport * from './pages';\nexport * from './application';\nexport * from './ApplicationV4';\n", "import type {\n    TableColumn,\n    TableColumnAction,\n    ViewTableColumn,\n    ViewTableColumnAction,\n    ViewTableCustomColumn\n} from '../webapp/manifest/ManifestSettings';\nimport type { ToolBar, ViewChartToolBar } from './ToolBar';\n\nexport enum SelectionMode {\n    Multi = 'Multi',\n    None = 'None',\n    Single = 'Single',\n    Auto = 'Auto'\n}\n\nexport enum TableTypeV4 {\n    ResponsiveTable = 'ResponsiveTable',\n    GridTable = 'GridTable'\n    /* Not supported yet:\n    AnalyticalTable = \"AnalyticalTable\", \n    TreeTable = \"TreeTable\"*/\n}\n\nexport enum InitialLoadType {\n    Disabled = 'Disabled',\n    Enabled = 'Enabled',\n    Auto = 'Auto'\n}\n\nexport enum DefaultPathType {\n    Primary = 'primary',\n    Secondary = 'secondary',\n    Both = 'both'\n}\n\nexport interface PersonalizationType {\n    /**\n     * Defines whether the user can add and remove columns to a given table.\n     */\n    column?: boolean;\n    /**\n     * Defines whether the user can sort a given table.\n     */\n    sort?: boolean;\n    /**\n     * Defines whether the user can filter data of a given table.\n     */\n    filter?: boolean;\n}\n\nexport interface ViewPersonalizationType {\n    /**\n     * Defines whether the user can add and remove columns to a given table.\n     */\n    column?: boolean;\n    /**\n     * Defines whether the user can sort a given table.\n     */\n    sort?: boolean;\n    /**\n     * Defines whether the user can filter data of a given table.\n     */\n    filter?: boolean;\n}\n\nexport interface AnnotationPathAsObject {\n    annotationPath: string;\n}\n\n//Not used by specification anymore, but there are some tests using it in tools-suite that needs to be adapted\nexport interface AnnotationPathWithKey {\n    key: string;\n    annotationPath: string;\n    entitySet?: string;\n}\n\nexport interface QuickVariantSelectionV4 {\n    /**\n     * List of annotation paths referring to SelectionVariant annotations\n     */\n    paths: AnnotationPathAsObject[];\n    /**\n     * You can hide the table and display only the titles of the tabs. To do so, add the hideTableTitle option and set it to true.\n     */\n    hideTableTitle?: boolean;\n    /**\n     * You can show the counts of entries of each view. To do so, add the showCounts option and set it to true.\n     */\n    showCounts?: boolean;\n}\n\nexport interface GenericColumns {\n    [key: string]: TableColumn | TableColumnAction;\n}\n\nexport interface ViewColumns {\n    [key: string]: ViewTableColumn | ViewTableColumnAction | ViewTableCustomColumn;\n}\n\n// Note: TableSettings are reused by OP: LR only properties must not be added here.\nexport interface TableSettings {\n    /**\n     * Use type to define the table type. Note: Grid tables, analytical tables, and tree tables cannot be rendered on smartphones. Instead, responsive tables always show on smartphones.\n     */\n    type?: TableTypeV4;\n    /**\n     * Allows you to enable or disable row selection and choose between single or multiple row selection.\n     *\n     * - Auto: This type is now deprecated. Choose any of the following modes.\n     * - Multi (default): This type allows multiple table selections if relevant actions are available in the toolbar. In edit mode, multiple selection is possible with the delete button.\n     * - Single: This type allows single table selection if relevant actions are available in the toolbar. In edit mode, multiple selection is possible with the Delete button.\n     * - None: No table selection is possible in display mode. In edit mode, the selection (including multiple row selection) is still possible when the Delete button is available in the table toolbar.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/116b5d82e8c545e2a56e1b51b8b0a9bd\n     */\n    selectionMode?: SelectionMode;\n    /**\n     * The selectAll configuration overrides the selectionLimit and allows the user to select all the items. When set to true, the select all feature is enabled: a checkbox in the table header is displayed which selects all items when clicked.\n     */\n    selectAll?: boolean;\n    /**\n     * You can define how many items can be selected at a time using the selectionLimit.\n     */\n    selectionLimit?: number;\n    /**\n     * By default, export is enabled in the List Report and on the Object Page. When enabled, the Export button is displayed in the table toolbar.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/4bab6f2043814257974b52d4dafe1dcd\n     */\n    enableExport?: boolean;\n    /**\n     * With quickVariantSelection you can switch on the multiple view feature (single table mode). It links to SelectionVariant (filters) or SelectionPresentationVariant (filters and sorters) you must have added to your annotations beforehand.\n     */\n    quickVariantSelection?: QuickVariantSelectionV4;\n    /**\n     * Allows you to set the content density to condensed for ui.table on the List Report and Object Page.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/f3cc057e405c4fd58ee2ed42c557797c\n     */\n    condensedTableLayout?: boolean;\n}\n\nexport type ViewTypeV4 = LRTableView | LRChartView | TableViewExtension | boolean;\n\n/**\n * Views\n * @isViewNode true\n */\nexport interface MultiTableModeV4 {\n    /**\n     * List of annotation paths\n     */\n    [key: string]: ViewTypeV4;\n    /**\n     * You can show the counts of entries of each view. To do so, add the showCounts option and set it to true.\n     */\n    showCounts?: boolean;\n}\n\n/**\n * Chart View\n * @isViewNode true\n */\nexport interface ALPChartView {\n    /**\n     * The primary annotation path can be either UI.Chart, UI.PresentationVariant, or UI.SelectionPresentationVariant.\n     */\n    annotationPath: string;\n    /**\n     * Chart Toolbar\n     * @isViewNode true\n     */\n    toolBar?: ViewChartToolBar;\n}\n\nexport interface CommonViewSettings {\n    /**\n     * Unique tab identifier.\n     * @hidden true\n     */\n    key: string;\n    /**\n     * @hidden true\n     */\n    index: number;\n    /**\n     * To use charts in multiple table mode, define a UI.Chart annotation, including a qualifier.\n     * Reference the UI.Chart annotation in your SelectionPresentationVariant or PresentationVariant for your view.\n     */\n    annotationPath: string;\n    /**\n     * Each chart can be based on a different entitySet.\n     */\n    entitySet?: string;\n}\n\n/**\n * Chart View\n * @isViewNode true\n */\nexport interface LRChartView extends CommonViewSettings {\n    /**\n     * Chart Toolbar\n     * @isViewNode true\n     */\n    toolBar?: ViewChartToolBar;\n    /**\n     * Specifies whether the view is visible or not\n     */\n    visible?: boolean;\n}\n\n/**\n * Table View\n * @isViewNode true\n */\nexport interface ALPTableView extends TableSettings {\n    /**\n     * The secondary annotation path can be either UI.LineItem, UI.PresentationVariant, or UI.SelectionPresentationVariant.\n     */\n    annotationPath: string;\n    /**\n     * Allows you to define whether or not the data in the table is automatically loaded.\n     */\n    initialLoad?: boolean;\n    /**\n     * Defines the personalization mode, currently only effective if variant management on page is either set to Page or Control.\n     * By default all table settings are enabled. You can change this for the different parts of the table by setting the properties \"Column\", \"Sort\" and \"Filter\" accordingly.\n     * Omitting a property is treated as false, this allows apps to avoid getting new features like grouping in upcoming releases.\n     */\n    personalization?: boolean;\n    /**\n     * Table Toolbar\n     */\n    toolBar?: ToolBar;\n    columns?: ViewColumns;\n}\n\n/**\n * Table View Extension\n * @isViewNode true\n */\nexport interface TableViewExtension {\n    /**\n     * Unique tab identifier.\n     * @hidden true\n     */\n    key: string;\n    /**\n     * @hidden true\n     */\n    index: number;\n    /**\n     * View title (localization supported).\n     * @i18nClassification TIT: Custom view title\n     */\n    label?: string;\n    /**\n     * The name contains sap.app.id as a prefix, followed by the path in the app/webapp folder and the name of the XML view.\n     */\n    template: string;\n    /**\n     * Specifies whether the view is visible or not\n     */\n    visible?: boolean;\n}\n\n/**\n * Table View\n * @isViewNode true\n */\nexport interface LRTableView extends TableSettings {\n    /**\n     * Unique tab identifier.\n     * @hidden true\n     */\n    key: string;\n    /**\n     * @hidden true\n     */\n    index: number;\n    /**\n     * The annotation path can be either UI.LineItem, UI.PresentationVariant, or UI.SelectionPresentationVariant.\n     */\n    annotationPath: string;\n    /**\n     * Each table can be based on a different entitySet.\n     */\n    entitySet?: string;\n    /**\n     *  The tab keeps the default LineItem ID (without the key), so the variant is applied to it.\n     */\n    keepPreviousPersonalization?: boolean;\n    /**\n     * Defines the personalization mode, currently only effective if variant management on page is either set to Page or Control.\n     */\n    personalization?: boolean;\n    /**\n     * Table Toolbar\n     */\n    toolBar?: ToolBar;\n    /**\n     * Columns\n     */\n    columns?: ViewColumns;\n    /**\n     * Specifies whether the view is visible or not\n     */\n    visible?: boolean;\n}\n\n/**\n * Table\n * @isViewNode true\n */\nexport interface Table extends TableSettings {\n    /**\n     * The secondary annotation path can be either UI.LineItem, UI.PresentationVariant, or UI.SelectionPresentationVariant.\n     */\n    annotationPath?: string;\n    /**\n     * Allows you to define whether or not the data in the table is automatically loaded\n     *\n     * - Auto (default): An initial load of data only occurs if some default filter values have been set in the filter bar\n     * - Enabled: An initial load of data occurs for the standard variant\n     * - Disabled: An initial load of data does not occur for the standard variant, and the user has to actively click the Go button.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/#/topic/9f4e1192f1384b85bc160288e17f69c4\n     */\n    initialLoad?: boolean;\n    /**\n     * Defines the personalization mode, currently only effective if variant management on page is either set to Page or Control.\n     */\n    personalization?: boolean;\n    views?: MultiTableModeV4;\n    /**\n     * Tool Bar\n     */\n    toolBar?: ToolBar;\n    columns?: GenericColumns;\n}\n", "export enum SelectType {\n    single = 'single',\n    multi = 'multi'\n}\n\n/**\n * Action\n * @isViewNode true\n */\nexport interface ToolBarAction {\n    /**\n     * Enables single selection for a bound action\n     */\n    enableOnSelect?: SelectType;\n}\n\n/**\n * Action\n * @isViewNode true\n */\nexport interface ViewToolBarAction {\n    /**\n     * Enables single selection for a bound action\n     */\n    enableOnSelect?: SelectType;\n}\nexport type ChartToolBarAction = {};\n\n/**\n * Actions\n * @isViewNode true\n */\nexport interface Actions {\n    [key: string]: ToolBarAction;\n}\n\n/**\n * Actions\n * @isViewNode true\n */\nexport interface ViewActions {\n    [key: string]: ViewToolBarAction | ChartToolBarAction;\n}\n\n/**\n * Table Toolbar\n * @isViewNode true\n */\nexport interface ToolBar {\n    actions: Actions;\n}\n\n/**\n * Chart Toolbar\n * @isViewNode true\n */\nexport interface ViewChartToolBar {\n    actions: ViewActions;\n}\n", "export const enum DesigntimeValues {\n    'not-adaptable-visibility' = 'not-adaptable-visibility'\n}\n\nexport interface FlexSettings {\n    /**\n     * Allows you to define which settings are available for key user adaptation at design time.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/ccd45ba3f0b446a0901b2c9d42b8ad53.html https://ui5.sap.com/sdk/#/topic/de9fd55c69af4b46863f5d26b5d796c4.html\n     */\n    designtime?: DesigntimeValues;\n}\n\nexport interface CommonHeaderFacetSettings {\n    /**\n     * Header facets marked as stashed are initially not visible on the UI. Key users can add these header facets via key user adaptation.\n     */\n    stashed?: boolean;\n    flexSettings?: FlexSettings;\n}\n\nexport interface ObjectPageHeaderSectionForm extends CommonHeaderFacetSettings {\n    /**\n     * Form\n     *  @isViewNode true\n     */\n    form?: object;\n}\n\nexport interface ObjectPageHeaderSectionContact extends CommonHeaderFacetSettings {\n    /**\n     * Contact\n     *  @isViewNode true\n     */\n    contact?: object;\n}\n\nexport interface ObjectPageHeaderSectionAddress extends CommonHeaderFacetSettings {\n    /**\n     * Address\n     *  @isViewNode true\n     */\n    address?: object;\n}\n\nexport type ObjectPageHeaderSectionChart = CommonHeaderFacetSettings;\nexport type ObjectPageHeaderSectionDataPoint = CommonHeaderFacetSettings;\n\n/**\n * Header Sections\n * @isViewNode true\n */\nexport interface HeaderSections {\n    [key: string]:\n        | ObjectPageHeaderSectionForm\n        | ObjectPageHeaderSectionChart\n        | ObjectPageHeaderSectionDataPoint\n        | ObjectPageHeaderSectionContact\n        | ObjectPageHeaderSectionAddress;\n}\n", "export enum SectionLayoutType {\n    Tabs = 'Tabs',\n    Page = 'Page'\n}\n\n/**\n * Page Layout\n * @isViewNode true\n */\nexport interface ObjectPageLayout {\n    /**\n     * Allows you to define the layout of the sections.\n     *\n     * - Page (default): In this mode, all the sections and subsections are added to the same page.\n     * - Tabs: In this mode, the sections are represented as tabs under the header facet.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/#/topic/facfea09018d4376acaceddb7e3f03b6\n     */\n    sectionLayout?: SectionLayoutType;\n}\n", "import type { ObjectPageSectionTableV4 } from './ObjectPageTable';\nimport type { SAPUI5_FRAGMENT_CLASS } from '../../common/webapp/manifest/sapUi5';\nimport type { ObjectPageToolBar } from './ObjectPageToolBar';\n\nexport interface ObjectPageSectionForm {\n    /**\n     * Form\n     *  @isViewNode true\n     */\n    form?: object;\n}\n\nexport interface ObjectPageSectionDataPoint {\n    /**\n     * Data Point\n     *  @isViewNode true\n     */\n    dataPoint?: object;\n}\n\nexport interface ObjectPageSectionContact {\n    /**\n     * Contact\n     *  @isViewNode true\n     */\n    contact?: object;\n}\n\nexport interface ObjectPageSectionAddress {\n    /**\n     * Address\n     *  @isViewNode true\n     */\n    address?: object;\n}\n\nexport interface ObjectPageChart {\n    /**\n     * Chart Toolbar\n     * @isViewNode true\n     */\n    toolBar?: ObjectPageToolBar;\n}\n\nexport interface ObjectPageSectionChart {\n    /**\n     * Chart\n     * @isViewNode true\n     */\n    chart?: ObjectPageChart;\n}\n\nexport interface ObjectPageSectionPresentationVariant {\n    /**\n     * Presentation Variant\n     */\n    [key: string]: ObjectPageSectionTableV4 | ObjectPageSectionChart;\n}\n\nexport interface GenericSections {\n    [key: string]:\n        | ObjectPageSectionTableV4\n        | ObjectPageSectionForm\n        | ObjectPageSectionDataPoint\n        | ObjectPageSectionContact\n        | ObjectPageSectionAddress\n        | ObjectPageSectionPresentationVariant;\n}\n\n/**\n * Subsections\n * @isViewNode true\n */\nexport interface ObjectPageSubSections {\n    subsections: GenericSections;\n}\n\n/**\n * @displayName Placement\n */\nexport enum SectionPosition {\n    After = 'After',\n    Before = 'Before'\n}\n\nexport enum CustomSectionViewTypesV4 {\n    XML = 'XML'\n}\n\n/**\n * Custom Sections\n * @isViewNode true\n */\nexport interface CustomSections {\n    /**\n     * Custom Sections\n     * @isViewNode true\n     */\n    custom?: ObjectPageCustomSectionFragment[];\n}\n\nexport interface ObjectPageCustomSectionBase {\n    /**\n     * Use the key of another facet/section as a placement anchor.\n     * @artifactType Manifest\n     * @displayName Anchor\n     */\n    relatedFacet: string;\n    /**\n     * Define the placement, either before or after the anchor facet/section.\n     * @artifactType Manifest\n     */\n    relativePosition: SectionPosition;\n    /**\n     * The unique ID of a section.\n     * @artifactType Manifest\n     */\n    id: string;\n    /**\n     * @hidden true\n     */\n    type: CustomSectionViewTypesV4;\n    /**\n     * The label of a custom section, preferably as an i18n key.\n     * @artifactType Manifest\n     * @i18nClassification TIT: Custom section title\n     */\n    title: string;\n}\n\n/**\n * Fragment\n * @isViewNode true\n */\nexport interface ObjectPageCustomSectionFragment extends ObjectPageCustomSectionBase {\n    /**\n     * @hidden true\n     */\n    className: typeof SAPUI5_FRAGMENT_CLASS;\n    /**\n     * The path to the XML template containing the section control.\n     * @artifactType Manifest\n     */\n    fragmentName: string;\n}\n", "import type { AnnotationPathAsObject, TableSettings } from '.';\nimport type {\n    ObjectPageTableColumn as ObjectPageTableColumnIF,\n    ObjectPageTableColumnAction\n} from '../webapp/manifest/ManifestSettings';\nimport type { ObjectPageToolBar } from './ObjectPageToolBar';\n\n/**\n * Table\n * @isViewNode true\n */\nexport interface ObjectPageTable extends TableSettingsOP {\n    /**\n     * In the Object Page tables, it is possible to add several items at a time by copying and pasting data from an excel file, if this property is set to true.\n     */\n    enablePaste?: boolean;\n    /**\n     * Tool Bar\n     */\n    toolBar?: ObjectPageToolBar;\n}\n\n/**\n * Table Section\n * @isViewNode true\n */\nexport interface ObjectPageSectionTableV4 {\n    table?: ObjectPageTable;\n}\n\nexport enum TableCreationModeType {\n    NewPage = 'NewPage',\n    Inline = 'Inline'\n}\n\nexport interface TableCreationModeOP {\n    /**\n     * The name property of TableCreationMode defines the creation mode; possible values are:\n     * - NewPage: The create action leads to a new page.\n     * - Inline: The create action leads to a new row at the table.\n     * The default is \"NewPage\".\n     */\n    name?: TableCreationModeType;\n    /**\n     * In case of inline creation mode you can decide if the new row will be created at the end of the table, or direcly after the currently selected table. The default value is \"true\"\n     */\n    createAtEnd?: boolean;\n}\n\nexport interface QuickVariantSelectionV4OP {\n    /**\n     * List of annotation paths referring to SelectionVariant annotations\n     */\n    paths: AnnotationPathAsObject[];\n    /**\n     * You can hide the table and display only the titles of the tabs. To do so, add the hideTableTitle option and set it to true.\n     */\n    hideTableTitle?: boolean;\n    /**\n     * You can show the counts of entries of each view. To do so, add the showCounts option and set it to true.\n     */\n    showCounts?: boolean;\n}\n\nexport interface GenericColumnsOP {\n    [key: string]: ObjectPageTableColumnIF | ObjectPageTableColumnAction;\n}\n\nexport interface TableSettingsOP extends TableSettings {\n    /**\n     * Defines the page behavior when a new record is created.\n     */\n    creationMode?: TableCreationModeOP;\n\n    /**\n     * Defines the personalization mode, currently only effective if variant management on page is either set to Page or Control.\n     */\n    personalization?: boolean;\n\n    /**\n     * With quickVariantSelection you can switch on the multiple view feature (single table mode). It links to SelectionVariant (filters) or SelectionPresentationVariant (filters and sorters) you must have added to your annotations beforehand.\n     */\n    quickVariantSelection?: QuickVariantSelectionV4OP;\n\n    columns?: GenericColumnsOP;\n}\n", "import type { SapUiGenericAppPageSettings } from '../../../common/page';\n\nexport interface SapUiAppV4 {\n    pages: SapUiAppPageV4[] | SapUiGenericAppPageMapV4;\n    _version?: string;\n    settings?: object;\n}\n\nexport interface SapUiGenericAppPageMapV4 {\n    [key: string]: SapUiAppPageV4;\n}\n\nexport interface SapUiNavDetailsV4 {\n    detail?: {\n        route?: string;\n    };\n}\n\nexport type SapUi5MultiViewPath = {\n    key: string;\n    annotationPath: string;\n};\n\nexport type SapUi5MultiViewPaths = SapUi5MultiViewPath[];\n\nexport type SapUi5ALPPaths = [\n    {\n        primary: [\n            {\n                annotationPath: string;\n            }\n        ];\n        secondary: [\n            {\n                annotationPath: string;\n            }\n        ];\n        defaultPath: string;\n    }\n];\n\nexport type SapUi5Views = {\n    paths: SapUi5MultiViewPaths | SapUi5ALPPaths;\n    showCounts?: boolean;\n};\n\nexport type SapUiPageSettingsV4 = SapUiGenericAppPageSettings & {\n    entitySet?: string;\n    navigation?: {\n        [key: string]: SapUiNavDetailsV4;\n    };\n    controlConfiguration?: SapUiGenericAppPageSettings;\n    content?: SapUi5RoutingTargetContent;\n    views?: SapUi5Views;\n    defaultTemplateAnnotationPath?: string;\n};\n\nexport interface SapUiAppPageV4 {\n    type: string;\n    id: string;\n    name: string;\n    options: {\n        settings?: SapUiPageSettingsV4;\n    };\n}\n\nexport const FE_TEMPLATE_V4 = 'sap.fe.templates';\nexport const FE_TEMPLATE_V4_CUSTOM_PAGE = 'sap.fe.core.fpm';\nexport const FE_TEMPLATE_V4_OBJECT_PAGE = 'sap.fe.templates.ObjectPage';\nexport const FE_TEMPLATE_V4_LIST_REPORT = 'sap.fe.templates.ListReport';\nexport const FE_TEMPLATE_V4_ALP = 'sap.fe.templates.AnalyticalListPage';\nexport interface SapUiAppPagesV4 {\n    [key: string]: SapUiAppPageV4;\n}\nexport interface SapUi5RoutingTargetContent {\n    body?: SapUi5RoutingTargetContentBody;\n}\n\nexport interface SapUi5RoutingTargetContentBody {\n    sections?: SapUi5RoutingTargetContentSections;\n}\n\nexport interface SapUi5RoutingTargetContentSections {\n    [key: string]: SapUi5RoutingTargetContentSection;\n}\n\nexport const SAPUI5_FRAGMENT_TYPE_V4 = 'XMLFragment';\nexport interface SapUi5RoutingTargetContentSection {\n    // Currently only xml fragment is supported\n    type: typeof SAPUI5_FRAGMENT_TYPE_V4;\n    name: string;\n    title: string;\n    position: SapUi5RoutingTargetContentPosition;\n}\n\nexport enum SectionPositionV4 {\n    AfterFacet = 'AfterFacet',\n    BeforeFacet = 'BeforeFacet'\n}\n\nexport interface SapUi5RoutingTargetContentPosition {\n    placement: SectionPositionV4;\n    anchor: string;\n}\n", "import type {\n    SapUi5RootView,\n    SapUi5OdataModel,\n    SapUi5ResourceModel,\n    SapUi5RoutingRoute,\n    SapUi5RoutingTargetSettings,\n    SapUi5RoutingTarget,\n    Dependencies,\n    SapUi5RoutingTargetBase\n} from '../../../common/webapp/manifest/sapUi5';\nimport type { SapUiGenericAppPageSettings } from '../../../common/page';\nimport type { FlexibleColumnLayout } from '../../../common';\n\nexport interface FlexibleColumnLayoutV4 extends FlexibleColumnLayout {\n    /**\n     * To limit Flexible Column Layout to two columns. The third level will be displayed in full screen and not in a third column.\n     */\n    limitFCLToTwoColumns?: boolean;\n}\n\nexport interface SapUi5V4 {\n    flexEnabled?: boolean;\n    resources?: object;\n    dependencies?: Dependencies;\n    models?: { [key: string]: SapUi5OdataModel | SapUi5ResourceModel };\n    routing?: SapUi5RoutingV4;\n    [key: string]: string | object | boolean;\n    rootView?: SapUi5RootView;\n}\n\nexport interface SapUi5RoutingV4 {\n    config?: SapUi5RoutingConfig;\n    routes?: SapUi5RoutingRoute[];\n    targets: SapUi5RoutingTargetsV4;\n}\n\nexport type RoutingTargetOptions =\n    | SapUi5RoutingTarget\n    | SapUi5RoutingTargetCustomPageV4\n    | SapUi5RoutingTargetCustomPageV4New;\n\nexport interface SapUi5RoutingTargetsV4 {\n    [key: string]: RoutingTargetOptions;\n}\n\nexport interface SapUi5CommonCustomPageV4 extends SapUi5RoutingTargetBase {\n    viewName: string;\n    controlConfiguration?: SapUiGenericAppPageSettings;\n}\n\nexport interface SapUi5RoutingTargetCustomPageV4New extends SapUi5RoutingTarget {\n    options?: {\n        settings: SapUi5RoutingTargetSettings & SapUi5CommonCustomPageV4;\n    };\n}\n\nexport interface SapUi5RoutingTargetV4 extends SapUi5RoutingTargetSettings {\n    type: string;\n    id: string;\n    name: string;\n}\n\nexport interface SapUi5RoutingTargetCustomPageV4New extends SapUi5RoutingTargetV4 {\n    options?: {\n        settings: SapUi5RoutingTargetSettings & Omit<SapUi5RoutingTargetCustomPageV4, 'viewId' | 'viewLevel' | 'title'>;\n    };\n}\n\nexport interface SapUi5RoutingTargetCustomPageV4 extends SapUi5CommonCustomPageV4 {\n    viewId: string;\n    viewName: string;\n    viewLevel?: number;\n    title?: string;\n    controlConfiguration?: SapUiGenericAppPageSettings;\n}\n\nexport const FIORI_FCL_ROUTER_CLASS = 'sap.f.routing.Router';\nexport type RouterClass = typeof FIORI_FCL_ROUTER_CLASS | string;\nexport interface SapUi5RoutingConfig {\n    routerClass?: RouterClass;\n    flexibleColumnLayout?: FlexibleColumnLayoutV4;\n    viewPath?: string;\n}\n\nexport interface SapUi5DependenciesV4 {\n    minUI5Version?: string;\n    incompatibleLimitation?: boolean;\n    libs?: SapUi5DependenciesLibV4;\n}\n\nexport const SAPUI5_DEPENDENCY_LIB_SAP_F = 'sap.f';\nexport interface SapUi5DependenciesLibV4 {\n    [SAPUI5_DEPENDENCY_LIB_SAP_F]?: SapUi5DependencyLibV4;\n    [key: string]: SapUi5DependencyLibV4;\n}\n\nexport interface SapUi5DependencyLibV4 {\n    minVersion?: string;\n    lazy?: boolean;\n}\n", "// Copies of sap.fe type definitions\nexport enum Placement {\n    After = 'After',\n    Before = 'Before'\n}\n\nexport interface Position {\n    /**\n     * The key of another column to be used as placement anchor.\n     */\n    anchor?: string;\n    /**\n     * Define the placement, either before or after the anchor column.\n     */\n    placement: Placement;\n}\n\nexport interface ViewPosition {\n    /**\n     * The key of another column to be used as placement anchor.\n     */\n    anchor?: string;\n    /**\n     * Define the placement, either before or after the anchor column.\n     */\n    placement: Placement;\n}\n\nexport type Positionable = {\n    /**\n     *   Defines the position of the column relative to other columns.\n     */\n    position?: Position;\n};\n\nexport interface ActionAfterExecutionConfiguration {\n    /**\n     * Allows you to disable the navigation. By default, navigation is automatically triggered after you have performed an action.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/#/topic/2c65f07f44094012a511d6bd83f50f2d\n     */\n    navigateToInstance?: boolean;\n    /**\n     * Allows you to scroll to the newly created or changed item after you have performed an action.\n     */\n    enableAutoScroll?: boolean;\n}\n\nexport interface ActionAfterExecutionConfigurationOP {\n    /**\n     * By default, a navigation is automatically triggered after an action execution. If applications want to disable the navigation, they can do so using the manifest setting \u201CnavigateToInstance\u201D.\n     */\n    navigateToInstance?: boolean;\n    /**\n     * Allows you to scroll to the newly created or changed item after you have performed an action.\n     */\n    enableAutoScroll?: boolean;\n}\n\nexport enum Availability {\n    'Default' = 'Default',\n    'Adaptation' = 'Adaptation',\n    'Hidden' = 'Hidden'\n}\n\nexport enum HorizontalAlign {\n    'Begin' = 'Begin',\n    'Center' = 'Center',\n    'End' = 'End'\n}\n\n/**\n * Table Column\n * @isViewNode true\n */\nexport interface TableColumn {\n    /**\n     * A string type that represents CSS size values.\n     * Refer to https://ui5.sap.com/api/sap.ui.core.CSSSize\n     * @descriptionSrcURL https://ui5.sap.com/api/sap.ui.core.CSSSize\n     */\n    width?: string;\n    /**\n     * Defines where the column should be shown.\n     * Default: it will be shown by default in the table.\n     * Adaptation: it will initially not shown in the table but be available via end user adaptation.\n     * Hidden: the column is neither available in the table nor in adaptation.\n     */\n    availability?: Availability;\n}\n\n/**\n * Table Column\n * @isViewNode true\n */\nexport interface ViewTableColumn {\n    /**\n     * A string type that represents CSS size values.\n     * Refer to https://ui5.sap.com/api/sap.ui.core.CSSSize\n     * @descriptionSrcURL https://ui5.sap.com/api/sap.ui.core.CSSSize\n     */\n    width?: string;\n    /**\n     * Defines where the column should be shown.\n     * Default: it will be shown by default in the table.\n     * Adaptation: it will initially not shown in the table but be available via end user adaptation.\n     * Hidden: the column is neither available in the table nor in adaptation.\n     */\n    availability?: Availability;\n}\n\n/**\n * Table Column\n * @isViewNode true\n */\nexport interface ObjectPageTableColumn {\n    /**\n     * A string type that represents CSS size values.\n     * Refer to https://ui5.sap.com/api/sap.ui.core.CSSSize\n     * @descriptionSrcURL https://ui5.sap.com/api/sap.ui.core.CSSSize\n     */\n    width?: string;\n    /**\n     * Defines where the column should be shown.\n     * Default: it will be shown by default in the table.\n     * Adaptation: it will initially not shown in the table but be available via end user adaptation.\n     * Hidden: the column is neither available in the table nor in adaptation.\n     */\n    availability?: Availability;\n}\n\n/**\n * Inline Action\n * @isViewNode true\n */\nexport interface TableColumnAction extends TableColumn {\n    /**\n     * Settings that are only relevant for actions (associated with a UI.DataFieldForAction annotation)\n     */\n    afterExecution?: ActionAfterExecutionConfiguration;\n}\n\n/**\n * Inline Action\n * @isViewNode true\n */\nexport interface ViewTableColumnAction extends ViewTableColumn {\n    /**\n     * Settings that are only relevant for actions (associated with a UI.DataFieldForAction annotation)\n     */\n    afterExecution?: ActionAfterExecutionConfiguration;\n}\n\nexport type ColumnPropertiesType = string[];\n\n/**\n * Inline Action for Object Page\n * @isViewNode true\n */\nexport interface ObjectPageTableColumnAction extends TableColumn {\n    /**\n     * Settings that are only relevant for actions (associated with a UI.DataFieldForAction annotation)\n     */\n    afterExecution?: ActionAfterExecutionConfigurationOP;\n}\n\n/**\n * Custom Column\n * @isViewNode true\n */\nexport interface TableCustomColumn {\n    /**\n     * Defines the position of the column relative to other columns.\n     * @artifactType Manifest\n     */\n    position?: Position;\n    /**\n     * The header is shown on the table as header, as well as in the add/remove dialog.\n     * @i18nClassification COL: Custom column header text\n     * @artifactType Manifest\n     */\n    header: string;\n    /**\n     * A string type that represents CSS size values.\n     * Refer to https://ui5.sap.com/api/sap.ui.core.CSSSize\n     * @artifactType Manifest\n     * @descriptionSrcURL https://ui5.sap.com/api/sap.ui.core.CSSSize\n     */\n    width?: string;\n    /**\n     * Relevant for extension columns; allows the definition of a target fragment.\n     * @artifactType Manifest\n     */\n    template: string;\n    /**\n     * Aligns the header as well as the content horizontally.\n     * @artifactType Manifest\n     */\n    horizontalAlign?: HorizontalAlign;\n    /**\n     * Defines where the column should be shown.\n     * - Default: it will be shown by default in the table.\n     * - Adaptation: it will initially not shown in the table but be available via end user adaptation\n     * - Hidden: the column is neither available in the table nor in adaptation\n     * @artifactType Manifest\n     */\n    availability?: Availability;\n    /**\n     * If provided and sorting is enabled for the table the custom column header can be clicked. This will lead to a list of properties (or one) that can be sorted by, they are displayed as the labels of the properties, corresponding to their definition in the annotations.\n     * @artifactType Manifest\n     */\n    properties?: ColumnPropertiesType;\n}\n\n/**\n * Custom Column\n * @isViewNode true\n */\nexport interface ViewTableCustomColumn {\n    /**\n     *   Defines the position of the column relative to other columns.\n     * @artifactType Manifest\n     */\n    position?: ViewPosition;\n    /**\n     * The header is shown on the table as header, as well as in the add/remove dialog.\n     * @i18nClassification COL: Custom column header text\n     * @artifactType Manifest\n     */\n    header: string;\n    /**\n     * A string type that represents CSS size values.\n     * Refer to https://ui5.sap.com/api/sap.ui.core.CSSSize\n     * @artifactType Manifest\n     * @descriptionSrcURL https://ui5.sap.com/api/sap.ui.core.CSSSize\n     */\n    width?: string;\n    /**\n     * Relevant for extension columns; allows the definition of a target fragment.\n     * @artifactType Manifest\n     */\n    template: string;\n    /**\n     * Aligns the header as well as the content horizontally.\n     * @artifactType Manifest\n     */\n    horizontalAlign?: HorizontalAlign;\n    /**\n     * Defines where the column should be shown.\n     * - Default: it will be shown by default in the table.\n     * - Adaptation: it will initially not shown in the table but be available via end user adaptation\n     * - Hidden: the column is neither available in the table nor in adaptation\n     * @artifactType Manifest\n     */\n    availability?: Availability;\n    /**\n     * If provided and sorting is enabled for the table the custom column header can be clicked. This will lead to a list of properties (or one) that can be sorted by, they are displayed as the labels of the properties, corresponding to their definition in the annotations.\n     * @artifactType Manifest\n     */\n    properties?: ColumnPropertiesType;\n}\n", "import type { PageConfig } from '../../common';\nimport type {\n    ObjectPageHeader,\n    ObjectPageLayout,\n    GenericSections,\n    CustomSections,\n    ObjectPageFooter\n} from '../controls';\n\nexport enum VariantManagementTypeObjectPage {\n    None = 'None',\n    Control = 'Control'\n}\n\nexport interface ObjectPageConfigV4 extends PageConfig {\n    header?: ObjectPageHeader;\n    layout?: ObjectPageLayout;\n    /**\n     * Allows you to enable and disable variant management for tables.\n     *\n     * - None (default): No variant management is possible by default.\n     * - Control: Individual personalization for each control is possible.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/f26d42bea11c4deda82c7a2e00c9bc05.html\n     */\n    variantManagement?: VariantManagementTypeObjectPage;\n\n    sections?: GenericSections | CustomSections;\n\n    footer?: ObjectPageFooter;\n}\n", "import type { PageConfig } from '../../common';\nimport type { FilterBar, ALPChartView, Table, ALPTableView, DefaultPathType } from '../controls';\n\nexport enum VariantManagementTypeListReport {\n    None = 'None',\n    Control = 'Control',\n    Page = 'Page'\n}\n\nexport interface ListReportConfigV4 extends PageConfig {\n    /**\n     * variantManagement defines how the variant management of page personalizations is controlled.\n     * - None - No variant management by default.\n     * - Control - Individual personalizations for each control.\n     */\n    variantManagement?: VariantManagementTypeListReport;\n    /**\n     * Filter Bar\n     */\n    filterBar?: FilterBar;\n\n    /**\n     * Chart\n     */\n    chart?: ALPChartView;\n\n    /**\n     * Table\n     */\n    table?: Table | ALPTableView;\n\n    /**\n     * defaultTemplateAnnotationPath must be a reference to a SelectionPresentationVariant.\n     * You use the SelectionPresentationVariant to configure the default visualizations and default filter values of the main content area.\n     */\n    defaultTemplateAnnotationPath?: string;\n\n    /**\n     * Allows you to set the initial view mode\n     *\n     * - primary: This property loads the app in chart-only view.\n     * - secondary: This property loads the app in table-only view.\n     * - both: This property loads the app in hybrid view.\n     *\n     * @descriptionSrcURL https://ui5.sap.com/sdk/#/topic/2a9df06673d34f72b238549d49da8bfb\n     */\n    defaultPath?: DefaultPathType;\n}\n", "export * from './common';\nexport * from './apiTypes';\nexport * as v2 from './v2';\nexport * as v4 from './v4';\n", "'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn Object.propertyIsEnumerable.call(target, symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n", "import type {\n    Annotation,\n    AnnotationList,\n    ArrayWithIndex,\n    ComplexType,\n    Index,\n    Reference,\n    TypeDefinition\n} from '@sap-ux/vocabularies-types';\n\nexport { EnumIsFlag } from '@sap-ux/vocabularies-types/vocabularies/EnumIsFlag';\nexport { TermToTypes } from '@sap-ux/vocabularies-types/vocabularies/TermToTypes';\nexport { VocabularyReferences as defaultReferences } from '@sap-ux/vocabularies-types/vocabularies/VocabularyReferences';\n\nexport type ReferencesWithMap = Reference[] & {\n    referenceMap?: Record<string, Reference>;\n    reverseReferenceMap?: Record<string, Reference>;\n};\n\nfunction splitAt(string: string, index: number): [string, string] {\n    return index < 0 ? [string, ''] : [string.substring(0, index), string.substring(index + 1)];\n}\n\nfunction substringAt(string: string, index: number) {\n    return index < 0 ? string : string.substring(0, index);\n}\n\n/**\n * Splits a string at the first occurrence of a separator.\n *\n * @param string    The string to split\n * @param separator Separator, e.g. a single character.\n * @returns An array consisting of two elements: the part before the first occurrence of the separator and the part after it. If the string does not contain the separator, the second element is the empty string.\n */\nexport function splitAtFirst(string: string, separator: string): [string, string] {\n    return splitAt(string, string.indexOf(separator));\n}\n\n/**\n * Splits a string at the last occurrence of a separator.\n *\n * @param string    The string to split\n * @param separator Separator, e.g. a single character.\n * @returns An array consisting of two elements: the part before the last occurrence of the separator and the part after it. If the string does not contain the separator, the second element is the empty string.\n */\nexport function splitAtLast(string: string, separator: string): [string, string] {\n    return splitAt(string, string.lastIndexOf(separator));\n}\n\n/**\n * Returns the substring before the first occurrence of a separator.\n *\n * @param string    The string\n * @param separator Separator, e.g. a single character.\n * @returns The substring before the first occurrence of the separator, or the input string if it does not contain the separator.\n */\nexport function substringBeforeFirst(string: string, separator: string): string {\n    return substringAt(string, string.indexOf(separator));\n}\n\n/**\n * Returns the substring before the last occurrence of a separator.\n *\n * @param string    The string\n * @param separator Separator, e.g. a single character.\n * @returns The substring before the last occurrence of the separator, or the input string if it does not contain the separator.\n */\nexport function substringBeforeLast(string: string, separator: string): string {\n    return substringAt(string, string.lastIndexOf(separator));\n}\n\n/**\n * Transform an unaliased string representation annotation to the aliased version.\n *\n * @param references currentReferences for the project\n * @param unaliasedValue the unaliased value\n * @returns the aliased string representing the same\n */\nexport function alias(references: ReferencesWithMap, unaliasedValue: string): string {\n    if (!references.reverseReferenceMap) {\n        references.reverseReferenceMap = references.reduce((map: Record<string, Reference>, ref) => {\n            map[ref.namespace] = ref;\n            return map;\n        }, {});\n    }\n    if (!unaliasedValue) {\n        return unaliasedValue;\n    }\n    const [namespace, value] = splitAtLast(unaliasedValue, '.');\n    const reference = references.reverseReferenceMap[namespace];\n    if (reference) {\n        return `${reference.alias}.${value}`;\n    } else if (unaliasedValue.includes('@')) {\n        // Try to see if it's an annotation Path like to_SalesOrder/@UI.LineItem\n        const [preAlias, postAlias] = splitAtFirst(unaliasedValue, '@');\n        return `${preAlias}@${alias(references, postAlias)}`;\n    } else {\n        return unaliasedValue;\n    }\n}\n\n/**\n * Transform an aliased string to its unaliased version given a set of references.\n *\n * @param references The references to use for unaliasing.\n * @param aliasedValue The aliased value\n * @param namespace The fallback namespace\n * @returns The equal unaliased string.\n */\nexport function unalias(\n    references: ReferencesWithMap,\n    aliasedValue: string | undefined,\n    namespace?: string\n): string | undefined {\n    const _unalias = (value: string) => {\n        if (!references.referenceMap) {\n            references.referenceMap = Object.fromEntries(references.map((ref) => [ref.alias, ref]));\n        }\n\n        // Aliases are of type 'SimpleIdentifier' and must not contain dots\n        const [maybeAlias, rest] = splitAtFirst(value, '.');\n\n        if (!rest || rest.includes('.')) {\n            // either there is no dot in the value or there is more than one --> nothing to do\n            return value;\n        }\n\n        const isAnnotation = maybeAlias.startsWith('@');\n        const valueToUnalias = isAnnotation ? maybeAlias.substring(1) : maybeAlias;\n        const knownReference = references.referenceMap[valueToUnalias];\n        if (knownReference) {\n            return isAnnotation ? `@${knownReference.namespace}.${rest}` : `${knownReference.namespace}.${rest}`;\n        }\n\n        // The alias could not be resolved using the references. Assume it is the \"global\" alias (= namespace)\n        return namespace && !isAnnotation ? `${namespace}.${rest}` : value;\n    };\n\n    return aliasedValue\n        ?.split('/')\n        .reduce((segments, segment) => {\n            // the segment could be an action, like \"doSomething(foo.bar)\"\n            const [first, rest] = splitAtFirst(segment, '(');\n            const subSegment = [_unalias(first)];\n\n            if (rest) {\n                const parameter = rest.slice(0, -1); // remove trailing \")\"\n                subSegment.push(`(${_unalias(parameter)})`);\n            }\n            segments.push(subSegment.join(''));\n\n            return segments;\n        }, [] as string[])\n        ?.join('/');\n}\n\n/**\n * Differentiate between a ComplexType and a TypeDefinition.\n *\n * @param complexTypeDefinition\n * @returns true if the value is a complex type\n */\nexport function isComplexTypeDefinition(\n    complexTypeDefinition?: ComplexType | TypeDefinition\n): complexTypeDefinition is ComplexType {\n    return (\n        !!complexTypeDefinition && complexTypeDefinition._type === 'ComplexType' && !!complexTypeDefinition.properties\n    );\n}\n\nexport function Decimal(value: number) {\n    return {\n        isDecimal() {\n            return true;\n        },\n        valueOf() {\n            return value;\n        },\n        toString() {\n            return value.toString();\n        }\n    };\n}\n\n/**\n * Defines a lazy property.\n *\n * The property is initialized by calling the init function on the first read access, or by directly assigning a value.\n *\n * @param object    The host object\n * @param property  The lazy property to add\n * @param init      The function that initializes the property's value\n */\nexport function lazy<Type, Key extends keyof Type>(object: Type, property: Key, init: () => Type[Key]) {\n    const initial = Symbol('initial');\n    let _value: Type[Key] | typeof initial = initial;\n\n    Object.defineProperty(object, property, {\n        enumerable: true,\n\n        get() {\n            if (_value === initial) {\n                _value = init();\n            }\n            return _value;\n        },\n\n        set(value: Type[Key]) {\n            _value = value;\n        }\n    });\n}\n\n/**\n * Creates a function that allows to find an array element by property value.\n *\n * @param array     The array\n * @param property  Elements in the array are searched by this property\n * @returns A function that can be used to find an element of the array by property value.\n */\nexport function createIndexedFind<T>(array: Array<T>, property: keyof T) {\n    const index: Map<T[keyof T], T | undefined> = new Map();\n\n    return function find(value: T[keyof T]) {\n        const element = index.get(value);\n\n        if (element?.[property] === value) {\n            return element;\n        }\n\n        return array.find((element) => {\n            if (!element?.hasOwnProperty(property)) {\n                return false;\n            }\n\n            const propertyValue = element[property];\n            index.set(propertyValue, element);\n            return propertyValue === value;\n        });\n    };\n}\n\n/**\n * Adds a 'get by value' function to an array.\n *\n * If this function is called with addIndex(myArray, 'name'), a new function 'by_name(value)' will be added that allows to\n * find a member of the array by the value of its 'name' property.\n *\n * @param array      The array\n * @param property   The property that will be used by the 'by_{property}()' function\n * @returns The array with the added function\n */\nexport function addGetByValue<T, P extends Extract<keyof T, string>>(array: Array<T>, property: P) {\n    const indexName: keyof Index<T, P> = `by_${property}`;\n\n    if (!array.hasOwnProperty(indexName)) {\n        Object.defineProperty(array, indexName, { writable: false, value: createIndexedFind(array, property) });\n    } else {\n        throw new Error(`Property '${indexName}' already exists`);\n    }\n    return array as ArrayWithIndex<T, P>;\n}\n\n/**\n * Merge annotations from different sources together by overwriting at the term level.\n *\n * @param references        References, used to resolve aliased annotation targets and aliased annotation terms.\n * @param annotationSources Annotation sources\n * @returns the resulting merged annotations\n */\nexport function mergeAnnotations(\n    references: Reference[],\n    ...annotationSources: { name: string; annotationList: AnnotationList[] }[]\n): Record<string, Annotation[]> {\n    return annotationSources.reduceRight((result, { name, annotationList }) => {\n        for (const { target, annotations } of annotationList) {\n            const annotationTarget = unalias(references, target) ?? target;\n            if (!result[annotationTarget]) {\n                result[annotationTarget] = [];\n            }\n\n            const annotationsOnTarget = annotations\n                .map((rawAnnotation): Annotation => {\n                    rawAnnotation.term = unalias(references, rawAnnotation.term) ?? rawAnnotation.term;\n\n                    (rawAnnotation as any).fullyQualifiedName = rawAnnotation.qualifier\n                        ? `${annotationTarget}@${rawAnnotation.term}#${rawAnnotation.qualifier}`\n                        : `${annotationTarget}@${rawAnnotation.term}`;\n\n                    (rawAnnotation as any).__source = name;\n\n                    return rawAnnotation as Annotation;\n                })\n                .filter(\n                    (annotation) =>\n                        !result[annotationTarget].some(\n                            (existingAnnotation) =>\n                                existingAnnotation.term === annotation.term &&\n                                existingAnnotation.qualifier === annotation.qualifier\n                        )\n                );\n\n            result[annotationTarget].push(...annotationsOnTarget);\n        }\n\n        return result;\n    }, {} as Record<string, Annotation[]>);\n}\n", "import type {\n    Action,\n    ActionImport,\n    ActionParameter,\n    Annotation,\n    AnnotationPath,\n    AnnotationRecord,\n    ArrayWithIndex,\n    BaseNavigationProperty,\n    ComplexType,\n    ConvertedMetadata,\n    EntityContainer,\n    EntitySet,\n    EntityType,\n    Expression,\n    FullyQualifiedName,\n    NavigationProperty,\n    NavigationPropertyPath,\n    PathAnnotationExpression,\n    Property,\n    PropertyPath,\n    RawAction,\n    RawActionImport,\n    RawAnnotation,\n    RawComplexType,\n    RawEntityContainer,\n    RawEntitySet,\n    RawEntityType,\n    RawMetadata,\n    RawNavigationPropertyBinding,\n    RawProperty,\n    RawSchema,\n    RawSingleton,\n    RawTypeDefinition,\n    RawV2NavigationProperty,\n    RawV4NavigationProperty,\n    RemoveAnnotationAndType,\n    ResolutionTarget,\n    Singleton,\n    TypeDefinition\n} from '@sap-ux/vocabularies-types';\nimport { VocabularyReferences } from '@sap-ux/vocabularies-types/vocabularies/VocabularyReferences';\nimport {\n    addGetByValue,\n    alias,\n    Decimal,\n    EnumIsFlag,\n    lazy,\n    mergeAnnotations,\n    splitAtFirst,\n    splitAtLast,\n    substringBeforeFirst,\n    substringBeforeLast,\n    TermToTypes,\n    unalias\n} from './utils';\n\n/**\n * Symbol to extend an annotation with the reference to its target.\n */\nconst ANNOTATION_TARGET = Symbol('Annotation Target');\n\n/**\n * Append an object to the list of visited objects if it is different from the last object in the list.\n *\n * @param objectPath    The list of visited objects\n * @param visitedObject The object\n * @returns The list of visited objects\n */\nfunction appendObjectPath(objectPath: any[], visitedObject: any): any[] {\n    if (objectPath[objectPath.length - 1] !== visitedObject) {\n        objectPath.push(visitedObject);\n    }\n    return objectPath;\n}\n\n/**\n * Resolves a (possibly relative) path.\n *\n * @param converter         Converter\n * @param startElement      The starting point in case of relative path resolution\n * @param path              The path to resolve\n * @param annotationsTerm   Only for error reporting: The annotation term\n * @returns An object containing the resolved target and the elements that were visited while getting to the target.\n */\nfunction resolveTarget<T>(\n    converter: Converter,\n    startElement: any,\n    path: string | undefined,\n    annotationsTerm?: string\n): ResolutionTarget<T> {\n    if (path === undefined) {\n        return { target: undefined, objectPath: [], messages: [] };\n    }\n\n    // absolute paths always start at the entity container\n    if (path.startsWith('/')) {\n        path = path.substring(1);\n        startElement = undefined; // will resolve to the entity container (see below)\n    }\n\n    const pathSegments = path.split('/').reduce((targetPath, segment) => {\n        if (segment.includes('@')) {\n            // Separate out the annotation\n            const [pathPart, annotationPart] = splitAtFirst(segment, '@');\n            targetPath.push(pathPart);\n            targetPath.push(`@${annotationPart}`);\n        } else {\n            targetPath.push(segment);\n        }\n        return targetPath;\n    }, [] as string[]);\n\n    // determine the starting point for the resolution\n    if (startElement === undefined) {\n        // no starting point given: start at the entity container\n        if (\n            pathSegments[0].startsWith(`${converter.rawSchema.namespace}.`) &&\n            pathSegments[0] !== converter.getConvertedEntityContainer()?.fullyQualifiedName\n        ) {\n            // We have a fully qualified name in the path that is not the entity container.\n            startElement =\n                converter.getConvertedEntityType(pathSegments[0]) ??\n                converter.getConvertedComplexType(pathSegments[0]) ??\n                converter.getConvertedAction(pathSegments[0]);\n            pathSegments.shift(); // Let's remove the first path element\n        } else {\n            startElement = converter.getConvertedEntityContainer();\n        }\n    } else if (startElement[ANNOTATION_TARGET] !== undefined) {\n        // annotation: start at the annotation target\n        startElement = startElement[ANNOTATION_TARGET];\n    } else if (startElement._type === 'Property') {\n        // property: start at the entity type or complex type the property belongs to\n        const parentElementFQN = substringBeforeFirst(startElement.fullyQualifiedName, '/');\n        startElement =\n            converter.getConvertedEntityType(parentElementFQN) ?? converter.getConvertedComplexType(parentElementFQN);\n    }\n\n    const result = pathSegments.reduce(\n        (current: ResolutionTarget<any>, segment: string) => {\n            const error = (message: string) => {\n                current.messages.push({ message });\n                current.target = undefined;\n                return current;\n            };\n\n            if (current.target === undefined) {\n                return current;\n            }\n\n            current.objectPath = appendObjectPath(current.objectPath, current.target);\n\n            // Annotation\n            if (segment.startsWith('@') && segment !== '@$ui5.overload') {\n                const [vocabularyAlias, term] = converter.splitTerm(segment);\n                const annotation = current.target.annotations[vocabularyAlias.substring(1)]?.[term];\n\n                if (annotation !== undefined) {\n                    current.target = annotation;\n                    return current;\n                }\n                return error(\n                    `Annotation '${segment.substring(1)}' not found on ${current.target._type} '${\n                        current.target.fullyQualifiedName\n                    }'`\n                );\n            }\n\n            // $Path / $AnnotationPath syntax\n            if (current.target.$target) {\n                let subPath: string | undefined;\n                if (segment === '$AnnotationPath') {\n                    subPath = current.target.value;\n                } else if (segment === '$Path') {\n                    subPath = current.target.path;\n                }\n\n                if (subPath !== undefined) {\n                    const subTarget = resolveTarget(converter, current.target[ANNOTATION_TARGET], subPath);\n                    subTarget.objectPath.forEach((visitedSubObject: any) => {\n                        if (!current.objectPath.includes(visitedSubObject)) {\n                            current.objectPath = appendObjectPath(current.objectPath, visitedSubObject);\n                        }\n                    });\n\n                    current.target = subTarget.target;\n                    current.objectPath = appendObjectPath(current.objectPath, current.target);\n                    return current;\n                }\n            }\n\n            // traverse based on the element type\n            switch (current.target?._type) {\n                case 'Schema':\n                    // next element: EntityType, ComplexType, Action, EntityContainer ?\n\n                    break;\n                case 'EntityContainer':\n                    {\n                        const thisElement = current.target as EntityContainer;\n\n                        if (segment === '' || converter.unalias(segment) === thisElement.fullyQualifiedName) {\n                            return current;\n                        }\n\n                        // next element: EntitySet, Singleton or ActionImport?\n                        const nextElement: EntitySet | Singleton | ActionImport | undefined =\n                            thisElement.entitySets.by_name(segment) ??\n                            thisElement.singletons.by_name(segment) ??\n                            thisElement.actionImports.by_name(segment);\n\n                        if (nextElement) {\n                            current.target = nextElement;\n                            return current;\n                        }\n                    }\n                    break;\n\n                case 'EntitySet':\n                case 'Singleton': {\n                    const thisElement = current.target as EntitySet | Singleton;\n\n                    if (segment === '' || segment === '$Type') {\n                        // Empty Path after an EntitySet or Singleton means EntityType\n                        current.target = thisElement.entityType;\n                        return current;\n                    }\n\n                    if (segment === '$') {\n                        return current;\n                    }\n\n                    if (segment === '$NavigationPropertyBinding') {\n                        const navigationPropertyBindings = thisElement.navigationPropertyBinding;\n                        current.target = navigationPropertyBindings;\n                        return current;\n                    }\n\n                    // continue resolving at the EntitySet's or Singleton's type\n                    const result = resolveTarget(converter, thisElement.entityType, segment);\n                    current.target = result.target;\n                    current.objectPath = result.objectPath.reduce(appendObjectPath, current.objectPath);\n                    return current;\n                }\n\n                case 'EntityType':\n                    {\n                        const thisElement = current.target as EntityType;\n\n                        if (segment === '' || segment === '$Type') {\n                            return current;\n                        }\n\n                        const property = thisElement.entityProperties.by_name(segment);\n                        if (property) {\n                            current.target = property;\n                            return current;\n                        }\n\n                        const navigationProperty = thisElement.navigationProperties.by_name(segment);\n                        if (navigationProperty) {\n                            current.target = navigationProperty;\n                            return current;\n                        }\n\n                        const actionName = substringBeforeFirst(converter.unalias(segment), '(');\n                        const action = thisElement.actions[actionName];\n                        if (action) {\n                            current.target = action;\n                            return current;\n                        }\n                    }\n                    break;\n\n                case 'ActionImport': {\n                    // continue resolving at the Action\n                    const result = resolveTarget(converter, current.target.action, segment);\n                    current.target = result.target;\n                    current.objectPath = result.objectPath.reduce(appendObjectPath, current.objectPath);\n                    return current;\n                }\n\n                case 'Action': {\n                    const thisElement = current.target as Action;\n\n                    if (segment === '') {\n                        return current;\n                    }\n\n                    if (segment === '@$ui5.overload' || segment === '0') {\n                        return current;\n                    }\n\n                    if (segment === '$Parameter' && thisElement.isBound) {\n                        current.target = thisElement.parameters;\n                        return current;\n                    }\n\n                    const nextElement =\n                        thisElement.parameters[segment as any] ??\n                        thisElement.parameters.find((param: ActionParameter) => param.name === segment);\n\n                    if (nextElement) {\n                        current.target = nextElement;\n                        return current;\n                    }\n                    break;\n                }\n\n                case 'Property':\n                    {\n                        const thisElement = current.target as Property;\n\n                        // Property or NavigationProperty of the ComplexType\n                        const type = thisElement.targetType as ComplexType | undefined;\n                        if (type !== undefined) {\n                            const property = type.properties.by_name(segment);\n                            if (property) {\n                                current.target = property;\n                                return current;\n                            }\n\n                            const navigationProperty = type.navigationProperties.by_name(segment);\n                            if (navigationProperty) {\n                                current.target = navigationProperty;\n                                return current;\n                            }\n                        }\n                    }\n                    break;\n\n                case 'ActionParameter':\n                    const referencedType = (current.target as ActionParameter).typeReference;\n                    if (referencedType !== undefined) {\n                        const result = resolveTarget(converter, referencedType, segment);\n                        current.target = result.target;\n                        current.objectPath = result.objectPath.reduce(appendObjectPath, current.objectPath);\n                        return current;\n                    }\n                    break;\n\n                case 'NavigationProperty':\n                    // continue at the NavigationProperty's target type\n                    const result = resolveTarget(converter, (current.target as NavigationProperty).targetType, segment);\n                    current.target = result.target;\n                    current.objectPath = result.objectPath.reduce(appendObjectPath, current.objectPath);\n                    return current;\n\n                default:\n                    if (segment === '') {\n                        return current;\n                    }\n\n                    if (current.target[segment]) {\n                        current.target = current.target[segment];\n                        current.objectPath = appendObjectPath(current.objectPath, current.target);\n                        return current;\n                    }\n            }\n\n            return error(\n                `Element '${segment}' not found at ${current.target._type} '${current.target.fullyQualifiedName}'`\n            );\n        },\n        { target: startElement, objectPath: [], messages: [] }\n    );\n\n    // Diagnostics\n    result.messages.forEach((message) => converter.logError(message.message));\n    if (!result.target) {\n        if (annotationsTerm) {\n            const annotationType = inferTypeFromTerm(converter, annotationsTerm, startElement.fullyQualifiedName);\n            converter.logError(\n                'Unable to resolve the path expression: ' +\n                    '\\n' +\n                    path +\n                    '\\n' +\n                    '\\n' +\n                    'Hint: Check and correct the path values under the following structure in the metadata (annotation.xml file or CDS annotations for the application): \\n\\n' +\n                    '<Annotation Term = ' +\n                    annotationsTerm +\n                    '>' +\n                    '\\n' +\n                    '<Record Type = ' +\n                    annotationType +\n                    '>' +\n                    '\\n' +\n                    '<AnnotationPath = ' +\n                    path +\n                    '>'\n            );\n        } else {\n            converter.logError(\n                'Unable to resolve the path expression: ' +\n                    path +\n                    '\\n' +\n                    '\\n' +\n                    'Hint: Check and correct the path values under the following structure in the metadata (annotation.xml file or CDS annotations for the application): \\n\\n' +\n                    '<Annotation Term = ' +\n                    pathSegments[0] +\n                    '>' +\n                    '\\n' +\n                    '<PropertyValue  Path= ' +\n                    pathSegments[1] +\n                    '>'\n            );\n        }\n    }\n\n    return result;\n}\n\n/**\n * Typeguard to check if the path contains an annotation.\n *\n * @param pathStr the path to evaluate\n * @returns true if there is an annotation in the path.\n */\nfunction isAnnotationPath(pathStr: string): boolean {\n    return pathStr.includes('@');\n}\n\ntype AnnotationValue<T> = T & { [ANNOTATION_TARGET]: any };\n\nfunction mapPropertyPath(\n    converter: Converter,\n    propertyPath: { type: 'PropertyPath'; PropertyPath: string },\n    fullyQualifiedName: FullyQualifiedName,\n    currentTarget: any,\n    currentTerm: string\n) {\n    const result: Omit<AnnotationValue<PropertyPath>, '$target'> = {\n        type: 'PropertyPath',\n        value: propertyPath.PropertyPath,\n        fullyQualifiedName: fullyQualifiedName,\n        [ANNOTATION_TARGET]: currentTarget\n    };\n\n    lazy(\n        result as AnnotationValue<PropertyPath>,\n        '$target',\n        () => resolveTarget<Property>(converter, currentTarget, propertyPath.PropertyPath, currentTerm).target\n    );\n\n    return result as AnnotationValue<PropertyPath>;\n}\n\nfunction mapAnnotationPath(\n    converter: Converter,\n    annotationPath: { type: 'AnnotationPath'; AnnotationPath: string },\n    fullyQualifiedName: FullyQualifiedName,\n    currentTarget: any,\n    currentTerm: string\n) {\n    const result: Omit<AnnotationValue<AnnotationPath<any>>, '$target'> = {\n        type: 'AnnotationPath',\n        value: converter.unalias(annotationPath.AnnotationPath),\n        fullyQualifiedName: fullyQualifiedName,\n        [ANNOTATION_TARGET]: currentTarget\n    };\n\n    lazy(\n        result as AnnotationValue<AnnotationPath<any>>,\n        '$target',\n        () => resolveTarget(converter, currentTarget, result.value, currentTerm).target\n    );\n\n    return result as AnnotationValue<AnnotationPath<any>>;\n}\n\nfunction mapNavigationPropertyPath(\n    converter: Converter,\n    navigationPropertyPath: { type: 'NavigationPropertyPath'; NavigationPropertyPath: string },\n    fullyQualifiedName: FullyQualifiedName,\n    currentTarget: any,\n    currentTerm: string\n) {\n    const result: Omit<AnnotationValue<NavigationPropertyPath>, '$target'> = {\n        type: 'NavigationPropertyPath',\n        value: navigationPropertyPath.NavigationPropertyPath ?? '',\n        fullyQualifiedName: fullyQualifiedName,\n        [ANNOTATION_TARGET]: currentTarget\n    };\n\n    lazy(\n        result as AnnotationValue<NavigationPropertyPath>,\n        '$target',\n        () =>\n            resolveTarget<NavigationProperty>(\n                converter,\n                currentTarget,\n                navigationPropertyPath.NavigationPropertyPath,\n                currentTerm\n            ).target\n    );\n\n    return result as AnnotationValue<NavigationPropertyPath>;\n}\n\nfunction mapPath(\n    converter: Converter,\n    path: { type: 'Path'; Path: string },\n    fullyQualifiedName: FullyQualifiedName,\n    currentTarget: any,\n    currentTerm: string\n) {\n    const result: Omit<AnnotationValue<PathAnnotationExpression<any>>, '$target'> = {\n        type: 'Path',\n        path: path.Path,\n        fullyQualifiedName: fullyQualifiedName,\n        getValue(): any {\n            return undefined; // TODO: Required according to the type...\n        },\n        [ANNOTATION_TARGET]: currentTarget\n    };\n\n    lazy(\n        result as AnnotationValue<PathAnnotationExpression<any>>,\n        '$target',\n        () => resolveTarget<Property>(converter, currentTarget, path.Path, currentTerm).target\n    );\n\n    return result as AnnotationValue<PathAnnotationExpression<any>>;\n}\n\nfunction parseValue(\n    converter: Converter,\n    currentTarget: any,\n    currentTerm: string,\n    currentProperty: string,\n    currentSource: string,\n    propertyValue: Expression,\n    valueFQN: string\n) {\n    if (propertyValue === undefined) {\n        return undefined;\n    }\n    switch (propertyValue.type) {\n        case 'String':\n            return propertyValue.String;\n        case 'Int':\n            return propertyValue.Int;\n        case 'Bool':\n            return propertyValue.Bool;\n        case 'Decimal':\n            return Decimal(propertyValue.Decimal);\n        case 'Date':\n            return propertyValue.Date;\n        case 'EnumMember':\n            const splitEnum = propertyValue.EnumMember.split(' ').map((enumValue) => {\n                const unaliased = converter.unalias(enumValue) ?? '';\n                return alias(VocabularyReferences, unaliased);\n            });\n            if (splitEnum[0] !== undefined && EnumIsFlag[substringBeforeFirst(splitEnum[0], '/')]) {\n                return splitEnum;\n            }\n            return splitEnum[0];\n\n        case 'PropertyPath':\n            return mapPropertyPath(converter, propertyValue, valueFQN, currentTarget, currentTerm);\n\n        case 'NavigationPropertyPath':\n            return mapNavigationPropertyPath(converter, propertyValue, valueFQN, currentTarget, currentTerm);\n\n        case 'AnnotationPath':\n            return mapAnnotationPath(converter, propertyValue, valueFQN, currentTarget, currentTerm);\n\n        case 'Path': {\n            if (isAnnotationPath(propertyValue.Path)) {\n                // inline the target\n                return resolveTarget(converter, currentTarget, propertyValue.Path, currentTerm).target;\n            } else {\n                return mapPath(converter, propertyValue, valueFQN, currentTarget, currentTerm);\n            }\n        }\n\n        case 'Record':\n            return parseRecord(\n                converter,\n                currentTerm,\n                currentTarget,\n                currentProperty,\n                currentSource,\n                propertyValue.Record,\n                valueFQN\n            );\n\n        case 'Collection':\n            return parseCollection(\n                converter,\n                currentTarget,\n                currentTerm,\n                currentProperty,\n                currentSource,\n                propertyValue.Collection,\n                valueFQN\n            );\n        case 'Apply':\n        case 'Null':\n        case 'Not':\n        case 'Eq':\n        case 'Ne':\n        case 'Gt':\n        case 'Ge':\n        case 'Lt':\n        case 'Le':\n        case 'If':\n        case 'And':\n        case 'Or':\n        default:\n            return propertyValue;\n    }\n}\n\n/**\n * Infer the type of a term based on its type.\n *\n * @param converter         Converter\n * @param annotationsTerm   The annotation term\n * @param annotationTarget  The annotation target\n * @param currentProperty   The current property of the record\n * @returns The inferred type.\n */\nfunction inferTypeFromTerm(\n    converter: Converter,\n    annotationsTerm: string,\n    annotationTarget: string,\n    currentProperty?: string\n) {\n    let targetType = (TermToTypes as any)[annotationsTerm];\n    if (currentProperty) {\n        annotationsTerm = `${substringBeforeLast(annotationsTerm, '.')}.${currentProperty}`;\n        targetType = (TermToTypes as any)[annotationsTerm];\n    }\n\n    converter.logError(\n        `The type of the record used within the term ${annotationsTerm} was not defined and was inferred as ${targetType}.\nHint: If possible, try to maintain the Type property for each Record.\n<Annotations Target=\"${annotationTarget}\">\n\t<Annotation Term=\"${annotationsTerm}\">\n\t\t<Record>...</Record>\n\t</Annotation>\n</Annotations>`\n    );\n\n    return targetType;\n}\n\nfunction isDataFieldWithForAction(annotationContent: any) {\n    return (\n        annotationContent.hasOwnProperty('Action') &&\n        (annotationContent.$Type === 'com.sap.vocabularies.UI.v1.DataFieldForAction' ||\n            annotationContent.$Type === 'com.sap.vocabularies.UI.v1.DataFieldWithAction')\n    );\n}\n\nfunction parseRecordType(\n    converter: Converter,\n    currentTerm: string,\n    currentTarget: any,\n    currentProperty: string | undefined,\n    recordDefinition: AnnotationRecord\n) {\n    let targetType;\n    if (!recordDefinition.type && currentTerm) {\n        targetType = inferTypeFromTerm(converter, currentTerm, currentTarget.fullyQualifiedName, currentProperty);\n    } else {\n        targetType = converter.unalias(recordDefinition.type);\n    }\n    return targetType;\n}\n\nfunction parseRecord(\n    converter: Converter,\n    currentTerm: string,\n    currentTarget: any,\n    currentProperty: string | undefined,\n    currentSource: string,\n    annotationRecord: AnnotationRecord,\n    currentFQN: string\n) {\n    const record: any = {\n        $Type: parseRecordType(converter, currentTerm, currentTarget, currentProperty, annotationRecord),\n        fullyQualifiedName: currentFQN,\n        [ANNOTATION_TARGET]: currentTarget,\n        __source: currentSource\n    };\n\n    for (const propertyValue of annotationRecord.propertyValues) {\n        lazy(record, propertyValue.name, () =>\n            parseValue(\n                converter,\n                currentTarget,\n                currentTerm,\n                propertyValue.name,\n                currentSource,\n                propertyValue.value,\n                `${currentFQN}/${propertyValue.name}`\n            )\n        );\n    }\n\n    // annotations on the record\n    lazy(record, 'annotations', resolveAnnotationsOnAnnotation(converter, annotationRecord, record));\n\n    if (isDataFieldWithForAction(record)) {\n        lazy(record, 'ActionTarget', () => {\n            const actionName = converter.unalias(record.Action?.toString());\n\n            // (1) Bound action of the annotation target?\n            let actionTarget = currentTarget.actions[actionName];\n\n            if (!actionTarget) {\n                // (2) ActionImport (= unbound action)?\n                actionTarget = converter.getConvertedActionImport(actionName)?.action;\n            }\n\n            if (!actionTarget) {\n                // (3) Bound action of a different EntityType (the actionName is fully qualified in this case)\n                actionTarget = converter.getConvertedAction(actionName);\n                if (!actionTarget?.isBound) {\n                    actionTarget = undefined;\n                }\n            }\n\n            if (!actionTarget) {\n                converter.logError(\n                    `${record.fullyQualifiedName}: Unable to resolve '${record.Action}' ('${actionName}')`\n                );\n            }\n            return actionTarget;\n        });\n    }\n    return record;\n}\n\nexport type CollectionType =\n    | 'PropertyPath'\n    | 'Path'\n    | 'If'\n    | 'Apply'\n    | 'Null'\n    | 'And'\n    | 'Eq'\n    | 'Ne'\n    | 'Not'\n    | 'Gt'\n    | 'Ge'\n    | 'Lt'\n    | 'Le'\n    | 'Or'\n    | 'AnnotationPath'\n    | 'NavigationPropertyPath'\n    | 'Record'\n    | 'String'\n    | 'EmptyCollection';\n\n/**\n * Retrieve or infer the collection type based on its content.\n *\n * @param collectionDefinition\n * @returns the type of the collection\n */\nfunction getOrInferCollectionType(collectionDefinition: any[]): CollectionType {\n    let type: CollectionType = (collectionDefinition as any).type;\n    if (type === undefined && collectionDefinition.length > 0) {\n        const firstColItem = collectionDefinition[0];\n        if (firstColItem.hasOwnProperty('PropertyPath')) {\n            type = 'PropertyPath';\n        } else if (firstColItem.hasOwnProperty('Path')) {\n            type = 'Path';\n        } else if (firstColItem.hasOwnProperty('AnnotationPath')) {\n            type = 'AnnotationPath';\n        } else if (firstColItem.hasOwnProperty('NavigationPropertyPath')) {\n            type = 'NavigationPropertyPath';\n        } else if (\n            typeof firstColItem === 'object' &&\n            (firstColItem.hasOwnProperty('type') || firstColItem.hasOwnProperty('propertyValues'))\n        ) {\n            type = 'Record';\n        } else if (typeof firstColItem === 'string') {\n            type = 'String';\n        }\n    } else if (type === undefined) {\n        type = 'EmptyCollection';\n    }\n    return type;\n}\n\nfunction parseCollection(\n    converter: Converter,\n    currentTarget: any,\n    currentTerm: string,\n    currentProperty: string,\n    currentSource: string,\n    collectionDefinition: any[],\n    parentFQN: string\n) {\n    const collectionDefinitionType = getOrInferCollectionType(collectionDefinition);\n\n    switch (collectionDefinitionType) {\n        case 'PropertyPath':\n            return collectionDefinition.map((path, index) =>\n                mapPropertyPath(converter, path, `${parentFQN}/${index}`, currentTarget, currentTerm)\n            );\n\n        case 'Path':\n            // TODO: make lazy?\n            return collectionDefinition.map((pathValue) => {\n                return resolveTarget(converter, currentTarget, pathValue.Path, currentTerm).target;\n            });\n\n        case 'AnnotationPath':\n            return collectionDefinition.map((path, index) =>\n                mapAnnotationPath(converter, path, `${parentFQN}/${index}`, currentTarget, currentTerm)\n            );\n\n        case 'NavigationPropertyPath':\n            return collectionDefinition.map((path, index) =>\n                mapNavigationPropertyPath(converter, path, `${parentFQN}/${index}`, currentTarget, currentTerm)\n            );\n\n        case 'Record':\n            return collectionDefinition.map((recordDefinition, recordIdx) => {\n                return parseRecord(\n                    converter,\n                    currentTerm,\n                    currentTarget,\n                    currentProperty,\n                    currentSource,\n                    recordDefinition,\n                    `${parentFQN}/${recordIdx}`\n                );\n            });\n\n        case 'Apply':\n        case 'Null':\n        case 'If':\n        case 'Eq':\n        case 'Ne':\n        case 'Lt':\n        case 'Gt':\n        case 'Le':\n        case 'Ge':\n        case 'Not':\n        case 'And':\n        case 'Or':\n            return collectionDefinition.map((ifValue) => ifValue);\n\n        case 'String':\n            return collectionDefinition.map((stringValue) => {\n                if (typeof stringValue === 'string' || stringValue === undefined) {\n                    return stringValue;\n                } else {\n                    return stringValue.String;\n                }\n            });\n\n        default:\n            if (collectionDefinition.length === 0) {\n                return [];\n            }\n            throw new Error('Unsupported case');\n    }\n}\n\nfunction isV4NavigationProperty(\n    navProp: RawV2NavigationProperty | RawV4NavigationProperty\n): navProp is RawV4NavigationProperty {\n    return !!(navProp as BaseNavigationProperty).targetTypeName;\n}\n\nfunction convertAnnotation(converter: Converter, target: any, rawAnnotation: RawAnnotation): Annotation {\n    let annotation: any;\n    if (rawAnnotation.record) {\n        annotation = parseRecord(\n            converter,\n            rawAnnotation.term,\n            target,\n            '',\n            (rawAnnotation as any).__source,\n            rawAnnotation.record,\n            (rawAnnotation as any).fullyQualifiedName\n        );\n    } else if (rawAnnotation.collection === undefined) {\n        annotation = parseValue(\n            converter,\n            target,\n            rawAnnotation.term,\n            '',\n            (rawAnnotation as any).__source,\n            rawAnnotation.value ?? { type: 'Bool', Bool: true },\n            (rawAnnotation as any).fullyQualifiedName\n        );\n    } else if (rawAnnotation.collection) {\n        annotation = parseCollection(\n            converter,\n            target,\n            rawAnnotation.term,\n            '',\n            (rawAnnotation as any).__source,\n            rawAnnotation.collection,\n            (rawAnnotation as any).fullyQualifiedName\n        );\n    } else {\n        throw new Error('Unsupported case');\n    }\n\n    switch (typeof annotation) {\n        case 'string':\n            // eslint-disable-next-line no-new-wrappers\n            annotation = new String(annotation);\n            break;\n        case 'boolean':\n            // eslint-disable-next-line no-new-wrappers\n            annotation = new Boolean(annotation);\n            break;\n        case 'number':\n            annotation = new Number(annotation);\n            break;\n        default:\n            // do nothing\n            break;\n    }\n\n    annotation.fullyQualifiedName = (rawAnnotation as any).fullyQualifiedName;\n    annotation[ANNOTATION_TARGET] = target;\n\n    const [vocAlias, vocTerm] = converter.splitTerm(rawAnnotation.term);\n\n    annotation.term = converter.unalias(`${vocAlias}.${vocTerm}`, VocabularyReferences);\n    annotation.qualifier = rawAnnotation.qualifier;\n    annotation.__source = (rawAnnotation as any).__source;\n\n    try {\n        lazy(annotation, 'annotations', resolveAnnotationsOnAnnotation(converter, rawAnnotation, annotation));\n    } catch (e) {\n        // not an error: parseRecord() already adds annotations, but the other parseXXX functions don't, so this can happen\n    }\n\n    return annotation as Annotation;\n}\n\nclass Converter {\n    private annotationsByTarget: Record<FullyQualifiedName, Annotation[]>;\n\n    /**\n     * Get preprocessed annotations on the specified target.\n     *\n     * @param target    The annotation target\n     * @returns An array of annotations\n     */\n    getAnnotations(target: FullyQualifiedName): Annotation[] {\n        if (this.annotationsByTarget === undefined) {\n            const annotationSources = Object.keys(this.rawSchema.annotations).map((source) => ({\n                name: source,\n                annotationList: this.rawSchema.annotations[source]\n            }));\n\n            this.annotationsByTarget = mergeAnnotations(this.rawMetadata.references, ...annotationSources);\n        }\n\n        return this.annotationsByTarget[target] ?? [];\n    }\n\n    getConvertedEntityContainer() {\n        return this.getConvertedElement(\n            this.rawMetadata.schema.entityContainer.fullyQualifiedName,\n            this.rawMetadata.schema.entityContainer,\n            convertEntityContainer\n        );\n    }\n\n    getConvertedEntitySet(fullyQualifiedName: FullyQualifiedName) {\n        return this.convertedOutput.entitySets.by_fullyQualifiedName(fullyQualifiedName);\n    }\n\n    getConvertedSingleton(fullyQualifiedName: FullyQualifiedName) {\n        return this.convertedOutput.singletons.by_fullyQualifiedName(fullyQualifiedName);\n    }\n\n    getConvertedEntityType(fullyQualifiedName: FullyQualifiedName) {\n        return this.convertedOutput.entityTypes.by_fullyQualifiedName(fullyQualifiedName);\n    }\n\n    getConvertedComplexType(fullyQualifiedName: FullyQualifiedName) {\n        return this.convertedOutput.complexTypes.by_fullyQualifiedName(fullyQualifiedName);\n    }\n\n    getConvertedTypeDefinition(fullyQualifiedName: FullyQualifiedName) {\n        return this.convertedOutput.typeDefinitions.by_fullyQualifiedName(fullyQualifiedName);\n    }\n\n    getConvertedActionImport(fullyQualifiedName: FullyQualifiedName) {\n        let actionImport = this.convertedOutput.actionImports.by_fullyQualifiedName(fullyQualifiedName);\n        if (!actionImport) {\n            actionImport = this.convertedOutput.actionImports.by_name(fullyQualifiedName);\n        }\n        return actionImport;\n    }\n\n    getConvertedAction(fullyQualifiedName: FullyQualifiedName) {\n        return this.convertedOutput.actions.by_fullyQualifiedName(fullyQualifiedName);\n    }\n\n    convert<Converted, Raw extends RawType<Converted>>(\n        rawValue: Raw,\n        map: (converter: Converter, raw: Raw) => Converted\n    ): () => Converted;\n    convert<Converted, Raw extends RawType<Converted>, IndexProperty extends Extract<keyof Converted, string>>(\n        rawValue: Raw[],\n        map: (converter: Converter, raw: Raw) => Converted\n    ): () => ArrayWithIndex<Converted, IndexProperty>;\n    convert<Converted, Raw extends RawType<Converted>, IndexProperty extends Extract<keyof Converted, string>>(\n        rawValue: Raw | Raw[],\n        map: (converter: Converter, raw: Raw) => Converted\n    ): (() => Converted) | (() => ArrayWithIndex<Converted, IndexProperty>) {\n        if (Array.isArray(rawValue)) {\n            return () => {\n                const converted = rawValue.reduce((convertedElements, rawElement) => {\n                    const convertedElement = this.getConvertedElement(\n                        (rawElement as any).fullyQualifiedName,\n                        rawElement,\n                        map\n                    );\n                    if (convertedElement) {\n                        convertedElements.push(convertedElement);\n                    }\n                    return convertedElements;\n                }, [] as Converted[]);\n                addGetByValue(converted, 'name' as any);\n                addGetByValue(converted, 'fullyQualifiedName' as any);\n                return converted as ArrayWithIndex<Converted, IndexProperty>;\n            };\n        } else {\n            return () => this.getConvertedElement(rawValue.fullyQualifiedName, rawValue, map)!;\n        }\n    }\n\n    private rawMetadata: RawMetadata;\n    private convertedElements: Map<FullyQualifiedName, any> = new Map();\n    private convertedOutput: ConvertedMetadata;\n\n    rawSchema: RawSchema;\n\n    constructor(rawMetadata: RawMetadata, convertedOutput: ConvertedMetadata) {\n        this.rawMetadata = rawMetadata;\n        this.rawSchema = rawMetadata.schema;\n        this.convertedOutput = convertedOutput;\n    }\n\n    getConvertedElement<ConvertedType, RawType extends RemoveAnnotationAndType<ConvertedType>>(\n        fullyQualifiedName: FullyQualifiedName,\n        rawElement: RawType | undefined | ((fullyQualifiedName: FullyQualifiedName) => RawType | undefined),\n        map: (converter: Converter, raw: RawType) => ConvertedType\n    ): ConvertedType | undefined {\n        let converted: ConvertedType | undefined = this.convertedElements.get(fullyQualifiedName);\n        if (converted === undefined) {\n            const rawMetadata =\n                typeof rawElement === 'function' ? rawElement.apply(undefined, [fullyQualifiedName]) : rawElement;\n            if (rawMetadata !== undefined) {\n                converted = map.apply(undefined, [this, rawMetadata]);\n                this.convertedElements.set(fullyQualifiedName, converted);\n            }\n        }\n        return converted;\n    }\n\n    logError(message: string) {\n        this.convertedOutput.diagnostics.push({ message });\n    }\n\n    /**\n     * Split the alias from the term value.\n     *\n     * @param term the value of the term\n     * @returns the term alias and the actual term value\n     */\n    splitTerm(term: string) {\n        const aliased = alias(VocabularyReferences, term);\n        return splitAtLast(aliased, '.');\n    }\n\n    unalias(value: string | undefined, references = this.rawMetadata.references) {\n        return unalias(references, value, this.rawSchema.namespace) ?? '';\n    }\n}\n\ntype RawType<T> = RemoveAnnotationAndType<T> & { fullyQualifiedName: FullyQualifiedName };\n\nfunction resolveEntityType(converter: Converter, fullyQualifiedName: FullyQualifiedName) {\n    return () => {\n        let entityType = converter.getConvertedEntityType(fullyQualifiedName);\n\n        if (!entityType) {\n            converter.logError(`EntityType '${fullyQualifiedName}' not found`);\n            entityType = {} as EntityType;\n        }\n        return entityType;\n    };\n}\n\nfunction resolveNavigationPropertyBindings(\n    converter: Converter,\n    rawNavigationPropertyBindings: RawNavigationPropertyBinding\n) {\n    return () =>\n        Object.keys(rawNavigationPropertyBindings).reduce((navigationPropertyBindings, bindingPath) => {\n            const rawBindingTarget = rawNavigationPropertyBindings[bindingPath];\n\n            lazy(\n                navigationPropertyBindings,\n                bindingPath,\n                () =>\n                    // the NavigationPropertyBinding will lead to either an EntitySet or a Singleton, it cannot be undefined\n                    (converter.getConvertedEntitySet(rawBindingTarget) ??\n                        converter.getConvertedSingleton(rawBindingTarget))!\n            );\n            return navigationPropertyBindings;\n        }, {} as EntitySet['navigationPropertyBinding'] | Singleton['navigationPropertyBinding']);\n}\n\nfunction resolveAnnotations(converter: Converter, rawAnnotationTarget: any) {\n    const nestedAnnotations = rawAnnotationTarget.annotations;\n\n    return () =>\n        createAnnotationsObject(\n            converter,\n            rawAnnotationTarget,\n            nestedAnnotations ?? converter.getAnnotations(rawAnnotationTarget.fullyQualifiedName)\n        );\n}\n\nfunction resolveAnnotationsOnAnnotation(\n    converter: Converter,\n    annotationRecord: AnnotationRecord | RawAnnotation,\n    annotationTerm: any\n) {\n    return () => {\n        const currentFQN = annotationTerm.fullyQualifiedName;\n\n        // be graceful when resolving annotations on annotations: Sometimes they are referenced directly, sometimes they\n        // are part of the global annotations list\n        let annotations;\n        if (annotationRecord.annotations && annotationRecord.annotations.length > 0) {\n            annotations = annotationRecord.annotations;\n        } else {\n            annotations = converter.getAnnotations(currentFQN);\n        }\n\n        annotations?.forEach((annotation: any) => {\n            annotation.target = currentFQN;\n            annotation.__source = annotationTerm.__source;\n            annotation[ANNOTATION_TARGET] = annotationTerm[ANNOTATION_TARGET];\n            annotation.fullyQualifiedName = `${currentFQN}@${annotation.term}`;\n        });\n\n        return createAnnotationsObject(converter, annotationTerm, annotations ?? []);\n    };\n}\n\nfunction createAnnotationsObject(converter: Converter, target: any, rawAnnotations: RawAnnotation[]) {\n    return rawAnnotations.reduce((vocabularyAliases, annotation) => {\n        const [vocAlias, vocTerm] = converter.splitTerm(annotation.term);\n        const vocTermWithQualifier = `${vocTerm}${annotation.qualifier ? '#' + annotation.qualifier : ''}`;\n\n        if (vocabularyAliases[vocAlias] === undefined) {\n            vocabularyAliases[vocAlias] = {};\n        }\n\n        if (!vocabularyAliases[vocAlias].hasOwnProperty(vocTermWithQualifier)) {\n            lazy(vocabularyAliases[vocAlias], vocTermWithQualifier, () =>\n                converter.getConvertedElement(\n                    (annotation as Annotation).fullyQualifiedName,\n                    annotation,\n                    (converter, rawAnnotation) => convertAnnotation(converter, target, rawAnnotation)\n                )\n            );\n        }\n        return vocabularyAliases;\n    }, {} as any);\n}\n\n/**\n * Converts an EntityContainer.\n *\n * @param converter     Converter\n * @param rawEntityContainer    Unconverted EntityContainer\n * @returns The converted EntityContainer\n */\nfunction convertEntityContainer(converter: Converter, rawEntityContainer: RawEntityContainer): EntityContainer {\n    const convertedEntityContainer = rawEntityContainer as EntityContainer;\n\n    lazy(convertedEntityContainer, 'annotations', resolveAnnotations(converter, rawEntityContainer));\n\n    lazy(convertedEntityContainer, 'entitySets', converter.convert(converter.rawSchema.entitySets, convertEntitySet));\n\n    lazy(convertedEntityContainer, 'singletons', converter.convert(converter.rawSchema.singletons, convertSingleton));\n\n    lazy(\n        convertedEntityContainer,\n        'actionImports',\n        converter.convert(converter.rawSchema.actionImports, convertActionImport)\n    );\n\n    return convertedEntityContainer;\n}\n\n/**\n * Converts a Singleton.\n *\n * @param converter   Converter\n * @param rawSingleton  Unconverted Singleton\n * @returns The converted Singleton\n */\nfunction convertSingleton(converter: Converter, rawSingleton: RawSingleton): Singleton {\n    const convertedSingleton = rawSingleton as unknown as Singleton;\n\n    lazy(convertedSingleton, 'entityType', resolveEntityType(converter, rawSingleton.entityTypeName));\n    lazy(convertedSingleton, 'annotations', resolveAnnotations(converter, convertedSingleton));\n\n    const _rawNavigationPropertyBindings = rawSingleton.navigationPropertyBinding;\n    lazy(\n        convertedSingleton,\n        'navigationPropertyBinding',\n        resolveNavigationPropertyBindings(converter, _rawNavigationPropertyBindings)\n    );\n\n    return convertedSingleton;\n}\n\n/**\n * Converts an EntitySet.\n *\n * @param converter   Converter\n * @param rawEntitySet  Unconverted EntitySet\n * @returns The converted EntitySet\n */\nfunction convertEntitySet(converter: Converter, rawEntitySet: RawEntitySet): EntitySet {\n    const convertedEntitySet = rawEntitySet as unknown as EntitySet;\n\n    lazy(convertedEntitySet, 'entityType', resolveEntityType(converter, rawEntitySet.entityTypeName));\n    lazy(convertedEntitySet, 'annotations', resolveAnnotations(converter, convertedEntitySet));\n\n    const _rawNavigationPropertyBindings = rawEntitySet.navigationPropertyBinding;\n    lazy(\n        convertedEntitySet,\n        'navigationPropertyBinding',\n        resolveNavigationPropertyBindings(converter, _rawNavigationPropertyBindings)\n    );\n\n    return convertedEntitySet;\n}\n\n/**\n * Converts an EntityType.\n *\n * @param converter   Converter\n * @param rawEntityType  Unconverted EntityType\n * @returns The converted EntityType\n */\nfunction convertEntityType(converter: Converter, rawEntityType: RawEntityType): EntityType {\n    const convertedEntityType = rawEntityType as EntityType;\n\n    rawEntityType.keys.forEach((keyProp: any) => {\n        keyProp.isKey = true;\n    });\n\n    lazy(convertedEntityType, 'annotations', resolveAnnotations(converter, rawEntityType));\n\n    lazy(convertedEntityType, 'keys', converter.convert(rawEntityType.keys, convertProperty));\n    lazy(convertedEntityType, 'entityProperties', converter.convert(rawEntityType.entityProperties, convertProperty));\n    lazy(\n        convertedEntityType,\n        'navigationProperties',\n        converter.convert(rawEntityType.navigationProperties as any[], convertNavigationProperty)\n    );\n\n    lazy(convertedEntityType, 'actions', () =>\n        converter.rawSchema.actions\n            .filter(\n                (rawAction) =>\n                    rawAction.isBound &&\n                    (rawAction.sourceType === rawEntityType.fullyQualifiedName ||\n                        rawAction.sourceType === `Collection(${rawEntityType.fullyQualifiedName})`)\n            )\n            .reduce((actions, rawAction) => {\n                const name = `${converter.rawSchema.namespace}.${rawAction.name}`;\n                actions[name] = converter.getConvertedAction(rawAction.fullyQualifiedName)!;\n                return actions;\n            }, {} as EntityType['actions'])\n    );\n\n    convertedEntityType.resolvePath = (relativePath: string, includeVisitedObjects?: boolean) => {\n        const resolved = resolveTarget(converter, rawEntityType, relativePath);\n        if (includeVisitedObjects) {\n            return { target: resolved.target, visitedObjects: resolved.objectPath, messages: resolved.messages };\n        } else {\n            return resolved.target;\n        }\n    };\n\n    return convertedEntityType;\n}\n\n/**\n * Converts a Property.\n *\n * @param converter   Converter\n * @param rawProperty  Unconverted Property\n * @returns The converted Property\n */\nfunction convertProperty(converter: Converter, rawProperty: RawProperty): Property {\n    const convertedProperty = rawProperty as Property;\n\n    lazy(convertedProperty, 'annotations', resolveAnnotations(converter, rawProperty));\n\n    lazy(convertedProperty, 'targetType', () => {\n        const type = rawProperty.type;\n        const typeName = type.startsWith('Collection') ? type.substring(11, type.length - 1) : type;\n\n        return converter.getConvertedComplexType(typeName) ?? converter.getConvertedTypeDefinition(typeName);\n    });\n\n    return convertedProperty;\n}\n\n/**\n * Converts a NavigationProperty.\n *\n * @param converter   Converter\n * @param rawNavigationProperty  Unconverted NavigationProperty\n * @returns The converted NavigationProperty\n */\nfunction convertNavigationProperty(\n    converter: Converter,\n    rawNavigationProperty: RawV2NavigationProperty | RawV4NavigationProperty\n): NavigationProperty {\n    const convertedNavigationProperty = rawNavigationProperty as NavigationProperty;\n\n    convertedNavigationProperty.referentialConstraint = convertedNavigationProperty.referentialConstraint ?? [];\n\n    if (!isV4NavigationProperty(rawNavigationProperty)) {\n        const associationEnd = converter.rawSchema.associations\n            .find((association) => association.fullyQualifiedName === rawNavigationProperty.relationship)\n            ?.associationEnd.find((end) => end.role === rawNavigationProperty.toRole);\n\n        convertedNavigationProperty.isCollection = associationEnd?.multiplicity === '*';\n        convertedNavigationProperty.targetTypeName = associationEnd?.type ?? '';\n    }\n\n    lazy(\n        convertedNavigationProperty,\n        'targetType',\n        resolveEntityType(converter, (rawNavigationProperty as NavigationProperty).targetTypeName)\n    );\n\n    lazy(convertedNavigationProperty, 'annotations', resolveAnnotations(converter, rawNavigationProperty));\n\n    return convertedNavigationProperty;\n}\n\n/**\n * Converts an ActionImport.\n *\n * @param converter   Converter\n * @param rawActionImport  Unconverted ActionImport\n * @returns The converted ActionImport\n */\nfunction convertActionImport(converter: Converter, rawActionImport: RawActionImport): ActionImport {\n    const convertedActionImport = rawActionImport as ActionImport;\n\n    lazy(convertedActionImport, 'annotations', resolveAnnotations(converter, rawActionImport));\n\n    lazy(convertedActionImport, 'action', () => {\n        const rawActions = converter.rawSchema.actions.filter(\n            (rawAction) => !rawAction.isBound && rawAction.fullyQualifiedName.startsWith(rawActionImport.actionName)\n        );\n\n        // this always resolves to a unique unbound action, but resolution of unbound functions can be ambiguous:\n        // unbound function FQNs have overloads depending on all of their parameters\n        if (rawActions.length > 1) {\n            converter.logError(`Ambiguous reference in action import: ${rawActionImport.fullyQualifiedName}`);\n        }\n\n        // return the first matching action or function\n        return converter.getConvertedAction(rawActions[0].fullyQualifiedName)!;\n    });\n\n    return convertedActionImport;\n}\n\n/**\n * Converts an Action.\n *\n * @param converter   Converter\n * @param rawAction  Unconverted Action\n * @returns The converted Action\n */\nfunction convertAction(converter: Converter, rawAction: RawAction): Action {\n    const convertedAction = rawAction as Action;\n\n    if (convertedAction.sourceType) {\n        lazy(convertedAction, 'sourceEntityType', resolveEntityType(converter, rawAction.sourceType));\n    }\n\n    if (convertedAction.returnType) {\n        lazy(convertedAction, 'returnEntityType', resolveEntityType(converter, rawAction.returnType));\n    }\n\n    lazy(convertedAction, 'parameters', converter.convert(rawAction.parameters, convertActionParameter));\n\n    lazy(convertedAction, 'annotations', () => {\n        /*\n            Annotation resolution rule for actions:\n\n            (1) annotation target: the specific unbound or bound overload, e.g.\n                    - for actions:   \"x.y.z.unboundAction()\" / \"x.y.z.boundAction(x.y.z.Entity)\"\n                    - for functions: \"x.y.z.unboundFunction(Edm.String)\" / \"x.y.z.unboundFunction(x.y.z.Entity,Edm.String)\"\n            (2) annotation target: unspecified overload, e.g.\n                - for actions:   \"x.y.z.unboundAction\" / \"x.y.z.boundAction\"\n                - for functions: \"x.y.z.unboundFunction\" / \"x.y.z.unboundFunction\"\n\n            When resolving (1) takes precedence over (2). That is, annotations on the specific overload overwrite\n            annotations on the unspecific overload, on term/qualifier level.\n        */\n\n        const unspecificOverloadTarget = substringBeforeFirst(rawAction.fullyQualifiedName, '(');\n        const specificOverloadTarget = rawAction.fullyQualifiedName;\n\n        const effectiveAnnotations = converter.getAnnotations(specificOverloadTarget);\n        const unspecificAnnotations = converter.getAnnotations(unspecificOverloadTarget);\n\n        for (const unspecificAnnotation of unspecificAnnotations) {\n            if (\n                !effectiveAnnotations.some(\n                    (annotation) =>\n                        annotation.term === unspecificAnnotation.term &&\n                        annotation.qualifier === unspecificAnnotation.qualifier\n                )\n            ) {\n                effectiveAnnotations.push(unspecificAnnotation);\n            }\n        }\n\n        return createAnnotationsObject(converter, rawAction, effectiveAnnotations);\n    });\n\n    return convertedAction;\n}\n\n/**\n * Converts an ActionParameter.\n *\n * @param converter   Converter\n * @param rawActionParameter  Unconverted ActionParameter\n * @returns The converted ActionParameter\n */\nfunction convertActionParameter(\n    converter: Converter,\n    rawActionParameter: RawAction['parameters'][number]\n): ActionParameter {\n    const convertedActionParameter = rawActionParameter as ActionParameter;\n\n    lazy(\n        convertedActionParameter,\n        'typeReference',\n        () =>\n            converter.getConvertedEntityType(rawActionParameter.type) ??\n            converter.getConvertedComplexType(rawActionParameter.type) ??\n            converter.getConvertedTypeDefinition(rawActionParameter.type)\n    );\n\n    lazy(convertedActionParameter, 'annotations', () => {\n        // annotations on action parameters are resolved following the rules for actions\n        const unspecificOverloadTarget =\n            rawActionParameter.fullyQualifiedName.substring(0, rawActionParameter.fullyQualifiedName.indexOf('(')) +\n            rawActionParameter.fullyQualifiedName.substring(rawActionParameter.fullyQualifiedName.indexOf(')') + 1);\n        const specificOverloadTarget = rawActionParameter.fullyQualifiedName;\n\n        const effectiveAnnotations = converter.getAnnotations(specificOverloadTarget);\n        const unspecificAnnotations = converter.getAnnotations(unspecificOverloadTarget);\n\n        for (const unspecificAnnotation of unspecificAnnotations) {\n            if (\n                !effectiveAnnotations.some(\n                    (annotation) =>\n                        annotation.term === unspecificAnnotation.term &&\n                        annotation.qualifier === unspecificAnnotation.qualifier\n                )\n            ) {\n                effectiveAnnotations.push(unspecificAnnotation);\n            }\n        }\n\n        return createAnnotationsObject(converter, rawActionParameter, effectiveAnnotations);\n    });\n\n    return convertedActionParameter;\n}\n\n/**\n * Converts a ComplexType.\n *\n * @param converter   Converter\n * @param rawComplexType  Unconverted ComplexType\n * @returns The converted ComplexType\n */\nfunction convertComplexType(converter: Converter, rawComplexType: RawComplexType): ComplexType {\n    const convertedComplexType = rawComplexType as ComplexType;\n\n    lazy(convertedComplexType, 'properties', converter.convert(rawComplexType.properties, convertProperty));\n    lazy(\n        convertedComplexType,\n        'navigationProperties',\n        converter.convert(rawComplexType.navigationProperties as any[], convertNavigationProperty)\n    );\n    lazy(convertedComplexType, 'annotations', resolveAnnotations(converter, rawComplexType));\n\n    return convertedComplexType;\n}\n\n/**\n * Converts a TypeDefinition.\n *\n * @param converter   Converter\n * @param rawTypeDefinition  Unconverted TypeDefinition\n * @returns The converted TypeDefinition\n */\nfunction convertTypeDefinition(converter: Converter, rawTypeDefinition: RawTypeDefinition): TypeDefinition {\n    const convertedTypeDefinition = rawTypeDefinition as TypeDefinition;\n\n    lazy(convertedTypeDefinition, 'annotations', resolveAnnotations(converter, rawTypeDefinition));\n\n    return convertedTypeDefinition;\n}\n\n/**\n * Convert a RawMetadata into an object representation to be used to easily navigate a metadata object and its annotation.\n *\n * @param rawMetadata\n * @returns the converted representation of the metadata.\n */\nexport function convert(rawMetadata: RawMetadata): ConvertedMetadata {\n    // Converter Output\n    const convertedOutput: ConvertedMetadata = {\n        version: rawMetadata.version,\n        namespace: rawMetadata.schema.namespace,\n        annotations: rawMetadata.schema.annotations,\n        references: VocabularyReferences,\n        diagnostics: []\n    } as any;\n\n    // fall back on the default references if the caller does not specify any\n    if (rawMetadata.references.length === 0) {\n        rawMetadata.references = VocabularyReferences;\n    }\n\n    // Converter\n    const converter = new Converter(rawMetadata, convertedOutput);\n\n    lazy(\n        convertedOutput,\n        'entityContainer',\n        converter.convert(converter.rawSchema.entityContainer, convertEntityContainer)\n    );\n    lazy(convertedOutput, 'entitySets', converter.convert(converter.rawSchema.entitySets, convertEntitySet));\n    lazy(convertedOutput, 'singletons', converter.convert(converter.rawSchema.singletons, convertSingleton));\n    lazy(convertedOutput, 'entityTypes', converter.convert(converter.rawSchema.entityTypes, convertEntityType));\n    lazy(convertedOutput, 'actions', converter.convert(converter.rawSchema.actions, convertAction));\n    lazy(convertedOutput, 'complexTypes', converter.convert(converter.rawSchema.complexTypes, convertComplexType));\n    lazy(convertedOutput, 'actionImports', converter.convert(converter.rawSchema.actionImports, convertActionImport));\n    lazy(\n        convertedOutput,\n        'typeDefinitions',\n        converter.convert(converter.rawSchema.typeDefinitions, convertTypeDefinition)\n    );\n\n    convertedOutput.resolvePath = function resolvePath<T>(path: string): ResolutionTarget<T> {\n        const targetResolution = resolveTarget<T>(converter, undefined, path);\n        if (targetResolution.target) {\n            appendObjectPath(targetResolution.objectPath, targetResolution.target);\n        }\n        return targetResolution;\n    };\n\n    return convertedOutput;\n}\n", "import type {\n    AnnotationPathExpression,\n    AnnotationRecord,\n    AnnotationTerm,\n    Expression,\n    NavigationPropertyPathExpression,\n    PathExpression,\n    PropertyPathExpression,\n    RawAnnotation,\n    Reference\n} from '@sap-ux/vocabularies-types';\nimport { unalias } from './utils';\n\n/**\n * Revert an object to its raw type equivalent.\n *\n * @param references the current reference\n * @param value the value to revert\n * @returns the raw value\n */\nfunction revertObjectToRawType(references: Reference[], value: any) {\n    let result: Expression | undefined;\n    if (Array.isArray(value)) {\n        result = {\n            type: 'Collection',\n            Collection: value.map((anno) => revertCollectionItemToRawType(references, anno)) as any[]\n        };\n    } else if (value.isDecimal?.()) {\n        result = {\n            type: 'Decimal',\n            Decimal: value.valueOf()\n        };\n    } else if (value.isString?.()) {\n        const valueMatches = value.valueOf().split('.');\n        if (valueMatches.length > 1 && references.find((ref) => ref.alias === valueMatches[0])) {\n            result = {\n                type: 'EnumMember',\n                EnumMember: value.valueOf()\n            };\n        } else {\n            result = {\n                type: 'String',\n                String: value.valueOf()\n            };\n        }\n    } else if (value.isInt?.()) {\n        result = {\n            type: 'Int',\n            Int: value.valueOf()\n        };\n    } else if (value.isFloat?.()) {\n        result = {\n            type: 'Float',\n            Float: value.valueOf()\n        };\n    } else if (value.isDate?.()) {\n        result = {\n            type: 'Date',\n            Date: value.valueOf()\n        };\n    } else if (value.isBoolean?.()) {\n        result = {\n            type: 'Bool',\n            Bool: value.valueOf()\n        };\n    } else if (value.type === 'Path') {\n        result = {\n            type: 'Path',\n            Path: value.path\n        };\n    } else if (value.type === 'AnnotationPath') {\n        result = {\n            type: 'AnnotationPath',\n            AnnotationPath: value.value\n        };\n    } else if (value.type === 'Apply') {\n        result = {\n            type: 'Apply',\n            Apply: value.Apply\n        };\n    } else if (value.type === 'Null') {\n        result = {\n            type: 'Null'\n        };\n    } else if (value.type === 'PropertyPath') {\n        result = {\n            type: 'PropertyPath',\n            PropertyPath: value.value\n        };\n    } else if (value.type === 'NavigationPropertyPath') {\n        result = {\n            type: 'NavigationPropertyPath',\n            NavigationPropertyPath: value.value\n        };\n    } else if (Object.prototype.hasOwnProperty.call(value, '$Type')) {\n        result = {\n            type: 'Record',\n            Record: revertCollectionItemToRawType(references, value) as AnnotationRecord\n        };\n    }\n    return result;\n}\n\n/**\n * Revert a value to its raw value depending on its type.\n *\n * @param references the current set of reference\n * @param value the value to revert\n * @returns the raw expression\n */\nfunction revertValueToRawType(references: Reference[], value: any): Expression | undefined {\n    let result: Expression | undefined;\n    const valueConstructor = value?.constructor.name;\n    switch (valueConstructor) {\n        case 'String':\n        case 'string':\n            const valueMatches = value.toString().split('.');\n            if (valueMatches.length > 1 && references.find((ref) => ref.alias === valueMatches[0])) {\n                result = {\n                    type: 'EnumMember',\n                    EnumMember: value.toString()\n                };\n            } else {\n                result = {\n                    type: 'String',\n                    String: value.toString()\n                };\n            }\n            break;\n        case 'Boolean':\n        case 'boolean':\n            result = {\n                type: 'Bool',\n                Bool: value.valueOf()\n            };\n            break;\n\n        case 'Number':\n        case 'number':\n            if (value.toString() === value.toFixed()) {\n                result = {\n                    type: 'Int',\n                    Int: value.valueOf()\n                };\n            } else {\n                result = {\n                    type: 'Decimal',\n                    Decimal: value.valueOf()\n                };\n            }\n            break;\n        case 'object':\n        default:\n            result = revertObjectToRawType(references, value);\n            break;\n    }\n    return result;\n}\n\nconst restrictedKeys = ['$Type', 'term', '__source', 'qualifier', 'ActionTarget', 'fullyQualifiedName', 'annotations'];\n\n/**\n * Revert the current embedded annotations to their raw type.\n *\n * @param references the current set of reference\n * @param currentAnnotations the collection item to evaluate\n * @param targetAnnotations the place where we need to add the annotation\n */\nfunction revertAnnotationsToRawType(\n    references: Reference[],\n    currentAnnotations: any,\n    targetAnnotations: RawAnnotation[]\n) {\n    Object.keys(currentAnnotations)\n        .filter((key) => key !== '_annotations')\n        .forEach((key) => {\n            Object.keys(currentAnnotations[key]).forEach((term) => {\n                const parsedAnnotation = revertTermToGenericType(references, currentAnnotations[key][term]);\n                if (!parsedAnnotation.term) {\n                    const unaliasedTerm = unalias(references, `${key}.${term}`);\n                    if (unaliasedTerm) {\n                        const qualifiedSplit = unaliasedTerm.split('#');\n                        parsedAnnotation.term = qualifiedSplit[0];\n                        if (qualifiedSplit.length > 1) {\n                            // Sub Annotation with a qualifier, not sure when that can happen in real scenarios\n                            parsedAnnotation.qualifier = qualifiedSplit[1];\n                        }\n                    }\n                }\n                targetAnnotations.push(parsedAnnotation);\n            });\n        });\n}\n\n/**\n * Revert the current collection item to the corresponding raw annotation.\n *\n * @param references the current set of reference\n * @param collectionItem the collection item to evaluate\n * @returns the raw type equivalent\n */\nfunction revertCollectionItemToRawType(\n    references: Reference[],\n    collectionItem: any\n):\n    | AnnotationRecord\n    | string\n    | PropertyPathExpression\n    | PathExpression\n    | NavigationPropertyPathExpression\n    | AnnotationPathExpression\n    | undefined {\n    if (typeof collectionItem === 'string') {\n        return collectionItem;\n    } else if (typeof collectionItem === 'object') {\n        if (collectionItem.hasOwnProperty('$Type')) {\n            // Annotation Record\n            const outItem: AnnotationRecord = {\n                type: collectionItem.$Type,\n                propertyValues: [] as any[]\n            };\n            // Could validate keys and type based on $Type\n            Object.keys(collectionItem).forEach((collectionKey) => {\n                if (restrictedKeys.indexOf(collectionKey) === -1) {\n                    const value = collectionItem[collectionKey];\n                    outItem.propertyValues.push({\n                        name: collectionKey,\n                        value: revertValueToRawType(references, value) as Expression\n                    });\n                } else if (collectionKey === 'annotations' && Object.keys(collectionItem[collectionKey]).length > 0) {\n                    outItem.annotations = [];\n                    revertAnnotationsToRawType(references, collectionItem[collectionKey], outItem.annotations);\n                }\n            });\n            return outItem;\n        } else if (collectionItem.type === 'PropertyPath') {\n            return {\n                type: 'PropertyPath',\n                PropertyPath: collectionItem.value\n            };\n        } else if (collectionItem.type === 'AnnotationPath') {\n            return {\n                type: 'AnnotationPath',\n                AnnotationPath: collectionItem.value\n            };\n        } else if (collectionItem.type === 'NavigationPropertyPath') {\n            return {\n                type: 'NavigationPropertyPath',\n                NavigationPropertyPath: collectionItem.value\n            };\n        }\n    }\n    return undefined;\n}\n\n/**\n * Revert an annotation term to it's generic or raw equivalent.\n *\n * @param references the reference of the current context\n * @param annotation the annotation term to revert\n * @returns the raw annotation\n */\nexport function revertTermToGenericType(references: Reference[], annotation: AnnotationTerm<any>): RawAnnotation {\n    const baseAnnotation: RawAnnotation = {\n        term: annotation.term,\n        qualifier: annotation.qualifier\n    };\n    if (Array.isArray(annotation)) {\n        // Collection\n        if (annotation.hasOwnProperty('annotations') && Object.keys((annotation as any).annotations).length > 0) {\n            // Annotation on a collection itself, not sure when that happens if at all\n            baseAnnotation.annotations = [];\n            revertAnnotationsToRawType(references, (annotation as any).annotations, baseAnnotation.annotations);\n        }\n        return {\n            ...baseAnnotation,\n            collection: annotation.map((anno) => revertCollectionItemToRawType(references, anno)) as any[]\n        };\n    } else if (annotation.hasOwnProperty('$Type')) {\n        return { ...baseAnnotation, record: revertCollectionItemToRawType(references, annotation) as any };\n    } else {\n        return { ...baseAnnotation, value: revertValueToRawType(references, annotation) };\n    }\n}\n", "export * from './converter';\nexport * from './utils';\nexport * from './writeback';\n", "/**\n * Given an object that is either an array or a single element, make sure the output it always wrapped as an array.\n *\n * @param sourceObject an object or an array\n * @returns either the original array or the same element wrapped in an arrays\n */\nimport type {\n    AnnotationList,\n    RawAction,\n    RawActionImport,\n    RawAssociation,\n    RawAssociationSet,\n    RawComplexType,\n    RawEntityContainer,\n    RawEntitySet,\n    RawEntityType,\n    RawMetadata,\n    RawSchema,\n    RawSingleton,\n    RawTypeDefinition,\n    Reference\n} from '@sap-ux/vocabularies-types';\n\n/**\n * Either returns the sourceObject or the sourceObject wrapped in an array.\n *\n * @param sourceObject the object you want to check\n * @returns the source object wrapped in an array.\n */\nexport function ensureArray<T>(sourceObject: T | T[] | undefined): T[] {\n    if (sourceObject === undefined || sourceObject === null) {\n        return [];\n    }\n    if (Array.isArray(sourceObject)) {\n        return sourceObject;\n    } else {\n        return [sourceObject];\n    }\n}\n\n/**\n *\n */\nexport class RawMetadataInstance implements RawMetadata {\n    references: Reference[];\n    schema: RawSchema;\n    version: string;\n    identification: string;\n\n    /**\n     * @param fileIdentification the name of the file you are parsing, mostly for reference\n     * @param version the version of the metadata currently evaluated\n     * @param schema the parsed schema\n     * @param references a list of all the references currently used in your file\n     */\n    constructor(fileIdentification: string, version: string, schema: RawSchema, references: Reference[]) {\n        this.identification = fileIdentification;\n        this.references = references;\n        this.version = version;\n        this.schema = schema;\n    }\n}\n\n/**\n *\n */\nexport class MergedRawMetadata implements RawMetadataInstance {\n    get references(): Reference[] {\n        return this._references;\n    }\n\n    get schema(): RawSchema {\n        return {\n            associations: this._associations,\n            associationSets: this._associationSets,\n            annotations: this._annotations,\n            entityContainer: this._entityContainer,\n            namespace: this._namespace,\n            entitySets: this._entitySets,\n            singletons: this._singletons,\n            complexTypes: this._complexTypes,\n            typeDefinitions: this._typeDefinitions,\n            actions: this._actions,\n            actionImports: this._actionImports,\n            entityTypes: this._entityTypes\n        };\n    }\n\n    version: string;\n    identification: string;\n    _references: Reference[] = [];\n    _namespace: string;\n    _parserOutput: RawMetadata[] = [];\n    _annotations: { [id: string]: AnnotationList[] } = {};\n    _associations: RawAssociation[] = [];\n    _associationSets: RawAssociationSet[] = [];\n    _entitySets: RawEntitySet[] = [];\n    _singletons: RawSingleton[] = [];\n    _actions: RawAction[] = [];\n    _actionImports: RawActionImport[] = [];\n    _entityContainer: RawEntityContainer = {\n        _type: 'EntityContainer',\n        fullyQualifiedName: ''\n    };\n    _entityTypes: RawEntityType[] = [];\n    _complexTypes: RawComplexType[] = [];\n    _typeDefinitions: RawTypeDefinition[] = [];\n\n    /**\n     * @param initialParserOutput\n     */\n    constructor(initialParserOutput: RawMetadata) {\n        this.identification = 'mergedParserInstance';\n        this.version = initialParserOutput.version;\n        this._namespace = initialParserOutput.schema.namespace;\n    }\n\n    /**\n     * @param parserOutput\n     */\n    public addParserOutput(parserOutput: RawMetadata): void {\n        this._parserOutput.push(parserOutput);\n        this._references = this._references.concat(parserOutput.references);\n        this._associations = this._associations.concat(parserOutput.schema.associations);\n        this._associationSets = this._associationSets.concat(parserOutput.schema.associationSets);\n        this._annotations = Object.assign(this._annotations, parserOutput.schema.annotations);\n        this._entitySets = this._entitySets.concat(parserOutput.schema.entitySets);\n        this._singletons = this._singletons.concat(parserOutput.schema.singletons);\n        this._actions = this._actions.concat(parserOutput.schema.actions);\n        this._actionImports = this._actionImports.concat(parserOutput.schema.actionImports);\n        this._entityTypes = this._entityTypes.concat(parserOutput.schema.entityTypes);\n        this._complexTypes = this._complexTypes.concat(parserOutput.schema.complexTypes);\n        this._typeDefinitions = this._typeDefinitions.concat(parserOutput.schema.typeDefinitions);\n        if (parserOutput.schema.entityContainer.fullyQualifiedName.length > 0) {\n            this._entityContainer = Object.assign(this._entityContainer, parserOutput.schema.entityContainer);\n        }\n    }\n}\n", "import type { RawMetadata } from '@sap-ux/vocabularies-types';\nimport { MergedRawMetadata } from './utils';\n\n/**\n * Merges multiple metadata output from the parser together into one.\n *\n * @param parserOutputs the different output from the parser\n * @returns The merge metadata output\n */\nexport function merge(...parserOutputs: RawMetadata[]): RawMetadata {\n    const outParserOutput = new MergedRawMetadata(parserOutputs[0]);\n\n    parserOutputs.forEach((parserOutput: RawMetadata) => {\n        outParserOutput.addParserOutput(parserOutput);\n    });\n\n    return outParserOutput;\n}\n", ";(function (sax) { // wrapper for non-node envs\n  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\n  sax.SAXParser = SAXParser\n  sax.SAXStream = SAXStream\n  sax.createStream = createStream\n\n  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n  // since that's the earliest that a buffer overrun could occur.  This way, checks are\n  // as rare as required, but as often as necessary to ensure never crossing this bound.\n  // Furthermore, buffers are only tested at most once per write(), so passing a very\n  // large string into write() might have undesirable effects, but this is manageable by\n  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n  // edge case, result in creating at most one complete copy of the string passed in.\n  // Set to Infinity to have unlimited buffers.\n  sax.MAX_BUFFER_LENGTH = 64 * 1024\n\n  var buffers = [\n    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',\n    'procInstName', 'procInstBody', 'entity', 'attribName',\n    'attribValue', 'cdata', 'script'\n  ]\n\n  sax.EVENTS = [\n    'text',\n    'processinginstruction',\n    'sgmldeclaration',\n    'doctype',\n    'comment',\n    'opentagstart',\n    'attribute',\n    'opentag',\n    'closetag',\n    'opencdata',\n    'cdata',\n    'closecdata',\n    'error',\n    'end',\n    'ready',\n    'script',\n    'opennamespace',\n    'closenamespace'\n  ]\n\n  function SAXParser (strict, opt) {\n    if (!(this instanceof SAXParser)) {\n      return new SAXParser(strict, opt)\n    }\n\n    var parser = this\n    clearBuffers(parser)\n    parser.q = parser.c = ''\n    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\n    parser.opt = opt || {}\n    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\n    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase'\n    parser.tags = []\n    parser.closed = parser.closedRoot = parser.sawRoot = false\n    parser.tag = parser.error = null\n    parser.strict = !!strict\n    parser.noscript = !!(strict || parser.opt.noscript)\n    parser.state = S.BEGIN\n    parser.strictEntities = parser.opt.strictEntities\n    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES)\n    parser.attribList = []\n\n    // namespaces form a prototype chain.\n    // it always points at the current tag,\n    // which protos to its parent tag.\n    if (parser.opt.xmlns) {\n      parser.ns = Object.create(rootNS)\n    }\n\n    // mostly just for error reporting\n    parser.trackPosition = parser.opt.position !== false\n    if (parser.trackPosition) {\n      parser.position = parser.line = parser.column = 0\n    }\n    emit(parser, 'onready')\n  }\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function F () {}\n      F.prototype = o\n      var newf = new F()\n      return newf\n    }\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = []\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\n      return a\n    }\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\n    var maxActual = 0\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      var len = parser[buffers[i]].length\n      if (len > maxAllowed) {\n        // Text/cdata nodes can get big, and since they're buffered,\n        // we can get here under normal conditions.\n        // Avoid issues by emitting the text node now,\n        // so at least it won't get any bigger.\n        switch (buffers[i]) {\n          case 'textNode':\n            closeText(parser)\n            break\n\n          case 'cdata':\n            emitNode(parser, 'oncdata', parser.cdata)\n            parser.cdata = ''\n            break\n\n          case 'script':\n            emitNode(parser, 'onscript', parser.script)\n            parser.script = ''\n            break\n\n          default:\n            error(parser, 'Max buffer length exceeded: ' + buffers[i])\n        }\n      }\n      maxActual = Math.max(maxActual, len)\n    }\n    // schedule the next check for the earliest possible buffer overrun.\n    var m = sax.MAX_BUFFER_LENGTH - maxActual\n    parser.bufferCheckPosition = m + parser.position\n  }\n\n  function clearBuffers (parser) {\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      parser[buffers[i]] = ''\n    }\n  }\n\n  function flushBuffers (parser) {\n    closeText(parser)\n    if (parser.cdata !== '') {\n      emitNode(parser, 'oncdata', parser.cdata)\n      parser.cdata = ''\n    }\n    if (parser.script !== '') {\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n  }\n\n  SAXParser.prototype = {\n    end: function () { end(this) },\n    write: write,\n    resume: function () { this.error = null; return this },\n    close: function () { return this.write(null) },\n    flush: function () { flushBuffers(this) }\n  }\n\n  var Stream\n  try {\n    Stream = require('stream').Stream\n  } catch (ex) {\n    Stream = function () {}\n  }\n  if (!Stream) Stream = function () {}\n\n  var streamWraps = sax.EVENTS.filter(function (ev) {\n    return ev !== 'error' && ev !== 'end'\n  })\n\n  function createStream (strict, opt) {\n    return new SAXStream(strict, opt)\n  }\n\n  function SAXStream (strict, opt) {\n    if (!(this instanceof SAXStream)) {\n      return new SAXStream(strict, opt)\n    }\n\n    Stream.apply(this)\n\n    this._parser = new SAXParser(strict, opt)\n    this.writable = true\n    this.readable = true\n\n    var me = this\n\n    this._parser.onend = function () {\n      me.emit('end')\n    }\n\n    this._parser.onerror = function (er) {\n      me.emit('error', er)\n\n      // if didn't throw, then means error was handled.\n      // go ahead and clear error, so we can write again.\n      me._parser.error = null\n    }\n\n    this._decoder = null\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, 'on' + ev, {\n        get: function () {\n          return me._parser['on' + ev]\n        },\n        set: function (h) {\n          if (!h) {\n            me.removeAllListeners(ev)\n            me._parser['on' + ev] = h\n            return h\n          }\n          me.on(ev, h)\n        },\n        enumerable: true,\n        configurable: false\n      })\n    })\n  }\n\n  SAXStream.prototype = Object.create(Stream.prototype, {\n    constructor: {\n      value: SAXStream\n    }\n  })\n\n  SAXStream.prototype.write = function (data) {\n    if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n      if (!this._decoder) {\n        var SD = require('string_decoder').StringDecoder\n        this._decoder = new SD('utf8')\n      }\n      data = this._decoder.write(data)\n    }\n\n    this._parser.write(data.toString())\n    this.emit('data', data)\n    return true\n  }\n\n  SAXStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) {\n      this.write(chunk)\n    }\n    this._parser.end()\n    return true\n  }\n\n  SAXStream.prototype.on = function (ev, handler) {\n    var me = this\n    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser['on' + ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments)\n        args.splice(0, 0, ev)\n        me.emit.apply(me, args)\n      }\n    }\n\n    return Stream.prototype.on.call(me, ev, handler)\n  }\n\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  var CDATA = '[CDATA['\n  var DOCTYPE = 'DOCTYPE'\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace'\n  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/'\n  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\n\n  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n  // This implementation works on strings, a single character at a time\n  // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n  // without a significant breaking change to either this  parser, or the\n  // JavaScript language.  Implementation of an emoji-capable xml parser\n  // is left as an exercise for the reader.\n  var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n\n  var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n  var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  function isWhitespace (c) {\n    return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t'\n  }\n\n  function isQuote (c) {\n    return c === '\"' || c === '\\''\n  }\n\n  function isAttribEnd (c) {\n    return c === '>' || isWhitespace(c)\n  }\n\n  function isMatch (regex, c) {\n    return regex.test(c)\n  }\n\n  function notMatch (regex, c) {\n    return !isMatch(regex, c)\n  }\n\n  var S = 0\n  sax.STATE = {\n    BEGIN: S++, // leading byte order mark or whitespace\n    BEGIN_WHITESPACE: S++, // leading whitespace\n    TEXT: S++, // general stuff\n    TEXT_ENTITY: S++, // &amp and such.\n    OPEN_WAKA: S++, // <\n    SGML_DECL: S++, // <!BLARG\n    SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\n    DOCTYPE: S++, // <!DOCTYPE\n    DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\n    DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\n    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\n    COMMENT_STARTING: S++, // <!-\n    COMMENT: S++, // <!--\n    COMMENT_ENDING: S++, // <!-- blah -\n    COMMENT_ENDED: S++, // <!-- blah --\n    CDATA: S++, // <![CDATA[ something\n    CDATA_ENDING: S++, // ]\n    CDATA_ENDING_2: S++, // ]]\n    PROC_INST: S++, // <?hi\n    PROC_INST_BODY: S++, // <?hi there\n    PROC_INST_ENDING: S++, // <?hi \"there\" ?\n    OPEN_TAG: S++, // <strong\n    OPEN_TAG_SLASH: S++, // <strong /\n    ATTRIB: S++, // <a\n    ATTRIB_NAME: S++, // <a foo\n    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\n    ATTRIB_VALUE: S++, // <a foo=\n    ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\n    ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\n    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\n    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\n    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\n    CLOSE_TAG: S++, // </a\n    CLOSE_TAG_SAW_WHITE: S++, // </a   >\n    SCRIPT: S++, // <script> ...\n    SCRIPT_ENDING: S++ // <script> ... <\n  }\n\n  sax.XML_ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\"\n  }\n\n  sax.ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\",\n    'AElig': 198,\n    'Aacute': 193,\n    'Acirc': 194,\n    'Agrave': 192,\n    'Aring': 197,\n    'Atilde': 195,\n    'Auml': 196,\n    'Ccedil': 199,\n    'ETH': 208,\n    'Eacute': 201,\n    'Ecirc': 202,\n    'Egrave': 200,\n    'Euml': 203,\n    'Iacute': 205,\n    'Icirc': 206,\n    'Igrave': 204,\n    'Iuml': 207,\n    'Ntilde': 209,\n    'Oacute': 211,\n    'Ocirc': 212,\n    'Ograve': 210,\n    'Oslash': 216,\n    'Otilde': 213,\n    'Ouml': 214,\n    'THORN': 222,\n    'Uacute': 218,\n    'Ucirc': 219,\n    'Ugrave': 217,\n    'Uuml': 220,\n    'Yacute': 221,\n    'aacute': 225,\n    'acirc': 226,\n    'aelig': 230,\n    'agrave': 224,\n    'aring': 229,\n    'atilde': 227,\n    'auml': 228,\n    'ccedil': 231,\n    'eacute': 233,\n    'ecirc': 234,\n    'egrave': 232,\n    'eth': 240,\n    'euml': 235,\n    'iacute': 237,\n    'icirc': 238,\n    'igrave': 236,\n    'iuml': 239,\n    'ntilde': 241,\n    'oacute': 243,\n    'ocirc': 244,\n    'ograve': 242,\n    'oslash': 248,\n    'otilde': 245,\n    'ouml': 246,\n    'szlig': 223,\n    'thorn': 254,\n    'uacute': 250,\n    'ucirc': 251,\n    'ugrave': 249,\n    'uuml': 252,\n    'yacute': 253,\n    'yuml': 255,\n    'copy': 169,\n    'reg': 174,\n    'nbsp': 160,\n    'iexcl': 161,\n    'cent': 162,\n    'pound': 163,\n    'curren': 164,\n    'yen': 165,\n    'brvbar': 166,\n    'sect': 167,\n    'uml': 168,\n    'ordf': 170,\n    'laquo': 171,\n    'not': 172,\n    'shy': 173,\n    'macr': 175,\n    'deg': 176,\n    'plusmn': 177,\n    'sup1': 185,\n    'sup2': 178,\n    'sup3': 179,\n    'acute': 180,\n    'micro': 181,\n    'para': 182,\n    'middot': 183,\n    'cedil': 184,\n    'ordm': 186,\n    'raquo': 187,\n    'frac14': 188,\n    'frac12': 189,\n    'frac34': 190,\n    'iquest': 191,\n    'times': 215,\n    'divide': 247,\n    'OElig': 338,\n    'oelig': 339,\n    'Scaron': 352,\n    'scaron': 353,\n    'Yuml': 376,\n    'fnof': 402,\n    'circ': 710,\n    'tilde': 732,\n    'Alpha': 913,\n    'Beta': 914,\n    'Gamma': 915,\n    'Delta': 916,\n    'Epsilon': 917,\n    'Zeta': 918,\n    'Eta': 919,\n    'Theta': 920,\n    'Iota': 921,\n    'Kappa': 922,\n    'Lambda': 923,\n    'Mu': 924,\n    'Nu': 925,\n    'Xi': 926,\n    'Omicron': 927,\n    'Pi': 928,\n    'Rho': 929,\n    'Sigma': 931,\n    'Tau': 932,\n    'Upsilon': 933,\n    'Phi': 934,\n    'Chi': 935,\n    'Psi': 936,\n    'Omega': 937,\n    'alpha': 945,\n    'beta': 946,\n    'gamma': 947,\n    'delta': 948,\n    'epsilon': 949,\n    'zeta': 950,\n    'eta': 951,\n    'theta': 952,\n    'iota': 953,\n    'kappa': 954,\n    'lambda': 955,\n    'mu': 956,\n    'nu': 957,\n    'xi': 958,\n    'omicron': 959,\n    'pi': 960,\n    'rho': 961,\n    'sigmaf': 962,\n    'sigma': 963,\n    'tau': 964,\n    'upsilon': 965,\n    'phi': 966,\n    'chi': 967,\n    'psi': 968,\n    'omega': 969,\n    'thetasym': 977,\n    'upsih': 978,\n    'piv': 982,\n    'ensp': 8194,\n    'emsp': 8195,\n    'thinsp': 8201,\n    'zwnj': 8204,\n    'zwj': 8205,\n    'lrm': 8206,\n    'rlm': 8207,\n    'ndash': 8211,\n    'mdash': 8212,\n    'lsquo': 8216,\n    'rsquo': 8217,\n    'sbquo': 8218,\n    'ldquo': 8220,\n    'rdquo': 8221,\n    'bdquo': 8222,\n    'dagger': 8224,\n    'Dagger': 8225,\n    'bull': 8226,\n    'hellip': 8230,\n    'permil': 8240,\n    'prime': 8242,\n    'Prime': 8243,\n    'lsaquo': 8249,\n    'rsaquo': 8250,\n    'oline': 8254,\n    'frasl': 8260,\n    'euro': 8364,\n    'image': 8465,\n    'weierp': 8472,\n    'real': 8476,\n    'trade': 8482,\n    'alefsym': 8501,\n    'larr': 8592,\n    'uarr': 8593,\n    'rarr': 8594,\n    'darr': 8595,\n    'harr': 8596,\n    'crarr': 8629,\n    'lArr': 8656,\n    'uArr': 8657,\n    'rArr': 8658,\n    'dArr': 8659,\n    'hArr': 8660,\n    'forall': 8704,\n    'part': 8706,\n    'exist': 8707,\n    'empty': 8709,\n    'nabla': 8711,\n    'isin': 8712,\n    'notin': 8713,\n    'ni': 8715,\n    'prod': 8719,\n    'sum': 8721,\n    'minus': 8722,\n    'lowast': 8727,\n    'radic': 8730,\n    'prop': 8733,\n    'infin': 8734,\n    'ang': 8736,\n    'and': 8743,\n    'or': 8744,\n    'cap': 8745,\n    'cup': 8746,\n    'int': 8747,\n    'there4': 8756,\n    'sim': 8764,\n    'cong': 8773,\n    'asymp': 8776,\n    'ne': 8800,\n    'equiv': 8801,\n    'le': 8804,\n    'ge': 8805,\n    'sub': 8834,\n    'sup': 8835,\n    'nsub': 8836,\n    'sube': 8838,\n    'supe': 8839,\n    'oplus': 8853,\n    'otimes': 8855,\n    'perp': 8869,\n    'sdot': 8901,\n    'lceil': 8968,\n    'rceil': 8969,\n    'lfloor': 8970,\n    'rfloor': 8971,\n    'lang': 9001,\n    'rang': 9002,\n    'loz': 9674,\n    'spades': 9824,\n    'clubs': 9827,\n    'hearts': 9829,\n    'diams': 9830\n  }\n\n  Object.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key]\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\n    sax.ENTITIES[key] = s\n  })\n\n  for (var s in sax.STATE) {\n    sax.STATE[sax.STATE[s]] = s\n  }\n\n  // shorthand\n  S = sax.STATE\n\n  function emit (parser, event, data) {\n    parser[event] && parser[event](data)\n  }\n\n  function emitNode (parser, nodeType, data) {\n    if (parser.textNode) closeText(parser)\n    emit(parser, nodeType, data)\n  }\n\n  function closeText (parser) {\n    parser.textNode = textopts(parser.opt, parser.textNode)\n    if (parser.textNode) emit(parser, 'ontext', parser.textNode)\n    parser.textNode = ''\n  }\n\n  function textopts (opt, text) {\n    if (opt.trim) text = text.trim()\n    if (opt.normalize) text = text.replace(/\\s+/g, ' ')\n    return text\n  }\n\n  function error (parser, er) {\n    closeText(parser)\n    if (parser.trackPosition) {\n      er += '\\nLine: ' + parser.line +\n        '\\nColumn: ' + parser.column +\n        '\\nChar: ' + parser.c\n    }\n    er = new Error(er)\n    parser.error = er\n    emit(parser, 'onerror', er)\n    return parser\n  }\n\n  function end (parser) {\n    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag')\n    if ((parser.state !== S.BEGIN) &&\n      (parser.state !== S.BEGIN_WHITESPACE) &&\n      (parser.state !== S.TEXT)) {\n      error(parser, 'Unexpected end')\n    }\n    closeText(parser)\n    parser.c = ''\n    parser.closed = true\n    emit(parser, 'onend')\n    SAXParser.call(parser, parser.strict, parser.opt)\n    return parser\n  }\n\n  function strictFail (parser, message) {\n    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {\n      throw new Error('bad call to strictFail')\n    }\n    if (parser.strict) {\n      error(parser, message)\n    }\n  }\n\n  function newTag (parser) {\n    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    var tag = parser.tag = { name: parser.tagName, attributes: {} }\n\n    // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n    if (parser.opt.xmlns) {\n      tag.ns = parent.ns\n    }\n    parser.attribList.length = 0\n    emitNode(parser, 'onopentagstart', tag)\n  }\n\n  function qname (name, attribute) {\n    var i = name.indexOf(':')\n    var qualName = i < 0 ? [ '', name ] : name.split(':')\n    var prefix = qualName[0]\n    var local = qualName[1]\n\n    // <x \"xmlns\"=\"http://foo\">\n    if (attribute && name === 'xmlns') {\n      prefix = 'xmlns'\n      local = ''\n    }\n\n    return { prefix: prefix, local: local }\n  }\n\n  function attrib (parser) {\n    if (!parser.strict) {\n      parser.attribName = parser.attribName[parser.looseCase]()\n    }\n\n    if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n      parser.attribName = parser.attribValue = ''\n      return\n    }\n\n    if (parser.opt.xmlns) {\n      var qn = qname(parser.attribName, true)\n      var prefix = qn.prefix\n      var local = qn.local\n\n      if (prefix === 'xmlns') {\n        // namespace binding attribute. push the binding into scope\n        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\n          strictFail(parser,\n            'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\n          strictFail(parser,\n            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else {\n          var tag = parser.tag\n          var parent = parser.tags[parser.tags.length - 1] || parser\n          if (tag.ns === parent.ns) {\n            tag.ns = Object.create(parent.ns)\n          }\n          tag.ns[local] = parser.attribValue\n        }\n      }\n\n      // defer onattribute events until all attributes have been seen\n      // so any new bindings can take effect. preserve attribute order\n      // so deferred events can be emitted in document order\n      parser.attribList.push([parser.attribName, parser.attribValue])\n    } else {\n      // in non-xmlns mode, we can emit the event right away\n      parser.tag.attributes[parser.attribName] = parser.attribValue\n      emitNode(parser, 'onattribute', {\n        name: parser.attribName,\n        value: parser.attribValue\n      })\n    }\n\n    parser.attribName = parser.attribValue = ''\n  }\n\n  function openTag (parser, selfClosing) {\n    if (parser.opt.xmlns) {\n      // emit namespace binding events\n      var tag = parser.tag\n\n      // add namespace info to tag\n      var qn = qname(parser.tagName)\n      tag.prefix = qn.prefix\n      tag.local = qn.local\n      tag.uri = tag.ns[qn.prefix] || ''\n\n      if (tag.prefix && !tag.uri) {\n        strictFail(parser, 'Unbound namespace prefix: ' +\n          JSON.stringify(parser.tagName))\n        tag.uri = qn.prefix\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (tag.ns && parent.ns !== tag.ns) {\n        Object.keys(tag.ns).forEach(function (p) {\n          emitNode(parser, 'onopennamespace', {\n            prefix: p,\n            uri: tag.ns[p]\n          })\n        })\n      }\n\n      // handle deferred onattribute events\n      // Note: do not apply default ns to attributes:\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\n      for (var i = 0, l = parser.attribList.length; i < l; i++) {\n        var nv = parser.attribList[i]\n        var name = nv[0]\n        var value = nv[1]\n        var qualName = qname(name, true)\n        var prefix = qualName.prefix\n        var local = qualName.local\n        var uri = prefix === '' ? '' : (tag.ns[prefix] || '')\n        var a = {\n          name: name,\n          value: value,\n          prefix: prefix,\n          local: local,\n          uri: uri\n        }\n\n        // if there's any attributes with an undefined namespace,\n        // then fail on them now.\n        if (prefix && prefix !== 'xmlns' && !uri) {\n          strictFail(parser, 'Unbound namespace prefix: ' +\n            JSON.stringify(prefix))\n          a.uri = prefix\n        }\n        parser.tag.attributes[name] = a\n        emitNode(parser, 'onattribute', a)\n      }\n      parser.attribList.length = 0\n    }\n\n    parser.tag.isSelfClosing = !!selfClosing\n\n    // process the tag\n    parser.sawRoot = true\n    parser.tags.push(parser.tag)\n    emitNode(parser, 'onopentag', parser.tag)\n    if (!selfClosing) {\n      // special case for <script> in non-strict mode.\n      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\n        parser.state = S.SCRIPT\n      } else {\n        parser.state = S.TEXT\n      }\n      parser.tag = null\n      parser.tagName = ''\n    }\n    parser.attribName = parser.attribValue = ''\n    parser.attribList.length = 0\n  }\n\n  function closeTag (parser) {\n    if (!parser.tagName) {\n      strictFail(parser, 'Weird empty close tag.')\n      parser.textNode += '</>'\n      parser.state = S.TEXT\n      return\n    }\n\n    if (parser.script) {\n      if (parser.tagName !== 'script') {\n        parser.script += '</' + parser.tagName + '>'\n        parser.tagName = ''\n        parser.state = S.SCRIPT\n        return\n      }\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n\n    // first make sure that the closing tag actually exists.\n    // <a><b></c></b></a> will close everything, otherwise.\n    var t = parser.tags.length\n    var tagName = parser.tagName\n    if (!parser.strict) {\n      tagName = tagName[parser.looseCase]()\n    }\n    var closeTo = tagName\n    while (t--) {\n      var close = parser.tags[t]\n      if (close.name !== closeTo) {\n        // fail the first time in strict mode\n        strictFail(parser, 'Unexpected close tag')\n      } else {\n        break\n      }\n    }\n\n    // didn't find it.  we already failed for strict, so just abort.\n    if (t < 0) {\n      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName)\n      parser.textNode += '</' + parser.tagName + '>'\n      parser.state = S.TEXT\n      return\n    }\n    parser.tagName = tagName\n    var s = parser.tags.length\n    while (s-- > t) {\n      var tag = parser.tag = parser.tags.pop()\n      parser.tagName = parser.tag.name\n      emitNode(parser, 'onclosetag', parser.tagName)\n\n      var x = {}\n      for (var i in tag.ns) {\n        x[i] = tag.ns[i]\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (parser.opt.xmlns && tag.ns !== parent.ns) {\n        // remove namespace bindings introduced by tag\n        Object.keys(tag.ns).forEach(function (p) {\n          var n = tag.ns[p]\n          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n })\n        })\n      }\n    }\n    if (t === 0) parser.closedRoot = true\n    parser.tagName = parser.attribValue = parser.attribName = ''\n    parser.attribList.length = 0\n    parser.state = S.TEXT\n  }\n\n  function parseEntity (parser) {\n    var entity = parser.entity\n    var entityLC = entity.toLowerCase()\n    var num\n    var numStr = ''\n\n    if (parser.ENTITIES[entity]) {\n      return parser.ENTITIES[entity]\n    }\n    if (parser.ENTITIES[entityLC]) {\n      return parser.ENTITIES[entityLC]\n    }\n    entity = entityLC\n    if (entity.charAt(0) === '#') {\n      if (entity.charAt(1) === 'x') {\n        entity = entity.slice(2)\n        num = parseInt(entity, 16)\n        numStr = num.toString(16)\n      } else {\n        entity = entity.slice(1)\n        num = parseInt(entity, 10)\n        numStr = num.toString(10)\n      }\n    }\n    entity = entity.replace(/^0+/, '')\n    if (isNaN(num) || numStr.toLowerCase() !== entity) {\n      strictFail(parser, 'Invalid character entity')\n      return '&' + parser.entity + ';'\n    }\n\n    return String.fromCodePoint(num)\n  }\n\n  function beginWhiteSpace (parser, c) {\n    if (c === '<') {\n      parser.state = S.OPEN_WAKA\n      parser.startTagPosition = parser.position\n    } else if (!isWhitespace(c)) {\n      // have to process this as a text node.\n      // weird, but happens.\n      strictFail(parser, 'Non-whitespace before first tag.')\n      parser.textNode = c\n      parser.state = S.TEXT\n    }\n  }\n\n  function charAt (chunk, i) {\n    var result = ''\n    if (i < chunk.length) {\n      result = chunk.charAt(i)\n    }\n    return result\n  }\n\n  function write (chunk) {\n    var parser = this\n    if (this.error) {\n      throw this.error\n    }\n    if (parser.closed) {\n      return error(parser,\n        'Cannot write after close. Assign an onready handler.')\n    }\n    if (chunk === null) {\n      return end(parser)\n    }\n    if (typeof chunk === 'object') {\n      chunk = chunk.toString()\n    }\n    var i = 0\n    var c = ''\n    while (true) {\n      c = charAt(chunk, i++)\n      parser.c = c\n\n      if (!c) {\n        break\n      }\n\n      if (parser.trackPosition) {\n        parser.position++\n        if (c === '\\n') {\n          parser.line++\n          parser.column = 0\n        } else {\n          parser.column++\n        }\n      }\n\n      switch (parser.state) {\n        case S.BEGIN:\n          parser.state = S.BEGIN_WHITESPACE\n          if (c === '\\uFEFF') {\n            continue\n          }\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.BEGIN_WHITESPACE:\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.TEXT:\n          if (parser.sawRoot && !parser.closedRoot) {\n            var starti = i - 1\n            while (c && c !== '<' && c !== '&') {\n              c = charAt(chunk, i++)\n              if (c && parser.trackPosition) {\n                parser.position++\n                if (c === '\\n') {\n                  parser.line++\n                  parser.column = 0\n                } else {\n                  parser.column++\n                }\n              }\n            }\n            parser.textNode += chunk.substring(starti, i - 1)\n          }\n          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n            parser.state = S.OPEN_WAKA\n            parser.startTagPosition = parser.position\n          } else {\n            if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n              strictFail(parser, 'Text data outside of root node.')\n            }\n            if (c === '&') {\n              parser.state = S.TEXT_ENTITY\n            } else {\n              parser.textNode += c\n            }\n          }\n          continue\n\n        case S.SCRIPT:\n          // only non-strict\n          if (c === '<') {\n            parser.state = S.SCRIPT_ENDING\n          } else {\n            parser.script += c\n          }\n          continue\n\n        case S.SCRIPT_ENDING:\n          if (c === '/') {\n            parser.state = S.CLOSE_TAG\n          } else {\n            parser.script += '<' + c\n            parser.state = S.SCRIPT\n          }\n          continue\n\n        case S.OPEN_WAKA:\n          // either a /, ?, !, or text is coming next.\n          if (c === '!') {\n            parser.state = S.SGML_DECL\n            parser.sgmlDecl = ''\n          } else if (isWhitespace(c)) {\n            // wait for it...\n          } else if (isMatch(nameStart, c)) {\n            parser.state = S.OPEN_TAG\n            parser.tagName = c\n          } else if (c === '/') {\n            parser.state = S.CLOSE_TAG\n            parser.tagName = ''\n          } else if (c === '?') {\n            parser.state = S.PROC_INST\n            parser.procInstName = parser.procInstBody = ''\n          } else {\n            strictFail(parser, 'Unencoded <')\n            // if there was some whitespace, then add that in.\n            if (parser.startTagPosition + 1 < parser.position) {\n              var pad = parser.position - parser.startTagPosition\n              c = new Array(pad).join(' ') + c\n            }\n            parser.textNode += '<' + c\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.SGML_DECL:\n          if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n            emitNode(parser, 'onopencdata')\n            parser.state = S.CDATA\n            parser.sgmlDecl = ''\n            parser.cdata = ''\n          } else if (parser.sgmlDecl + c === '--') {\n            parser.state = S.COMMENT\n            parser.comment = ''\n            parser.sgmlDecl = ''\n          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n            parser.state = S.DOCTYPE\n            if (parser.doctype || parser.sawRoot) {\n              strictFail(parser,\n                'Inappropriately located doctype declaration')\n            }\n            parser.doctype = ''\n            parser.sgmlDecl = ''\n          } else if (c === '>') {\n            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl)\n            parser.sgmlDecl = ''\n            parser.state = S.TEXT\n          } else if (isQuote(c)) {\n            parser.state = S.SGML_DECL_QUOTED\n            parser.sgmlDecl += c\n          } else {\n            parser.sgmlDecl += c\n          }\n          continue\n\n        case S.SGML_DECL_QUOTED:\n          if (c === parser.q) {\n            parser.state = S.SGML_DECL\n            parser.q = ''\n          }\n          parser.sgmlDecl += c\n          continue\n\n        case S.DOCTYPE:\n          if (c === '>') {\n            parser.state = S.TEXT\n            emitNode(parser, 'ondoctype', parser.doctype)\n            parser.doctype = true // just remember that we saw it.\n          } else {\n            parser.doctype += c\n            if (c === '[') {\n              parser.state = S.DOCTYPE_DTD\n            } else if (isQuote(c)) {\n              parser.state = S.DOCTYPE_QUOTED\n              parser.q = c\n            }\n          }\n          continue\n\n        case S.DOCTYPE_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.q = ''\n            parser.state = S.DOCTYPE\n          }\n          continue\n\n        case S.DOCTYPE_DTD:\n          parser.doctype += c\n          if (c === ']') {\n            parser.state = S.DOCTYPE\n          } else if (isQuote(c)) {\n            parser.state = S.DOCTYPE_DTD_QUOTED\n            parser.q = c\n          }\n          continue\n\n        case S.DOCTYPE_DTD_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.state = S.DOCTYPE_DTD\n            parser.q = ''\n          }\n          continue\n\n        case S.COMMENT:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDING\n          } else {\n            parser.comment += c\n          }\n          continue\n\n        case S.COMMENT_ENDING:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDED\n            parser.comment = textopts(parser.opt, parser.comment)\n            if (parser.comment) {\n              emitNode(parser, 'oncomment', parser.comment)\n            }\n            parser.comment = ''\n          } else {\n            parser.comment += '-' + c\n            parser.state = S.COMMENT\n          }\n          continue\n\n        case S.COMMENT_ENDED:\n          if (c !== '>') {\n            strictFail(parser, 'Malformed comment')\n            // allow <!-- blah -- bloo --> in non-strict mode,\n            // which is a comment of \" blah -- bloo \"\n            parser.comment += '--' + c\n            parser.state = S.COMMENT\n          } else {\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.CDATA:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING\n          } else {\n            parser.cdata += c\n          }\n          continue\n\n        case S.CDATA_ENDING:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING_2\n          } else {\n            parser.cdata += ']' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.CDATA_ENDING_2:\n          if (c === '>') {\n            if (parser.cdata) {\n              emitNode(parser, 'oncdata', parser.cdata)\n            }\n            emitNode(parser, 'onclosecdata')\n            parser.cdata = ''\n            parser.state = S.TEXT\n          } else if (c === ']') {\n            parser.cdata += ']'\n          } else {\n            parser.cdata += ']]' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.PROC_INST:\n          if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else if (isWhitespace(c)) {\n            parser.state = S.PROC_INST_BODY\n          } else {\n            parser.procInstName += c\n          }\n          continue\n\n        case S.PROC_INST_BODY:\n          if (!parser.procInstBody && isWhitespace(c)) {\n            continue\n          } else if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else {\n            parser.procInstBody += c\n          }\n          continue\n\n        case S.PROC_INST_ENDING:\n          if (c === '>') {\n            emitNode(parser, 'onprocessinginstruction', {\n              name: parser.procInstName,\n              body: parser.procInstBody\n            })\n            parser.procInstName = parser.procInstBody = ''\n            parser.state = S.TEXT\n          } else {\n            parser.procInstBody += '?' + c\n            parser.state = S.PROC_INST_BODY\n          }\n          continue\n\n        case S.OPEN_TAG:\n          if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else {\n            newTag(parser)\n            if (c === '>') {\n              openTag(parser)\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH\n            } else {\n              if (!isWhitespace(c)) {\n                strictFail(parser, 'Invalid character in tag name')\n              }\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.OPEN_TAG_SLASH:\n          if (c === '>') {\n            openTag(parser, true)\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Forward-slash in opening tag not followed by >')\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.ATTRIB:\n          // haven't read the attribute name yet.\n          if (isWhitespace(c)) {\n            continue\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (c === '>') {\n            strictFail(parser, 'Attribute without value')\n            parser.attribValue = parser.attribName\n            attrib(parser)\n            openTag(parser)\n          } else if (isWhitespace(c)) {\n            parser.state = S.ATTRIB_NAME_SAW_WHITE\n          } else if (isMatch(nameBody, c)) {\n            parser.attribName += c\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME_SAW_WHITE:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (isWhitespace(c)) {\n            continue\n          } else {\n            strictFail(parser, 'Attribute without value')\n            parser.tag.attributes[parser.attribName] = ''\n            parser.attribValue = ''\n            emitNode(parser, 'onattribute', {\n              name: parser.attribName,\n              value: ''\n            })\n            parser.attribName = ''\n            if (c === '>') {\n              openTag(parser)\n            } else if (isMatch(nameStart, c)) {\n              parser.attribName = c\n              parser.state = S.ATTRIB_NAME\n            } else {\n              strictFail(parser, 'Invalid attribute name')\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.ATTRIB_VALUE:\n          if (isWhitespace(c)) {\n            continue\n          } else if (isQuote(c)) {\n            parser.q = c\n            parser.state = S.ATTRIB_VALUE_QUOTED\n          } else {\n            strictFail(parser, 'Unquoted attribute value')\n            parser.state = S.ATTRIB_VALUE_UNQUOTED\n            parser.attribValue = c\n          }\n          continue\n\n        case S.ATTRIB_VALUE_QUOTED:\n          if (c !== parser.q) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_Q\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          parser.q = ''\n          parser.state = S.ATTRIB_VALUE_CLOSED\n          continue\n\n        case S.ATTRIB_VALUE_CLOSED:\n          if (isWhitespace(c)) {\n            parser.state = S.ATTRIB\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            strictFail(parser, 'No whitespace between attributes')\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_VALUE_UNQUOTED:\n          if (!isAttribEnd(c)) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_U\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          if (c === '>') {\n            openTag(parser)\n          } else {\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.CLOSE_TAG:\n          if (!parser.tagName) {\n            if (isWhitespace(c)) {\n              continue\n            } else if (notMatch(nameStart, c)) {\n              if (parser.script) {\n                parser.script += '</' + c\n                parser.state = S.SCRIPT\n              } else {\n                strictFail(parser, 'Invalid tagname in closing tag.')\n              }\n            } else {\n              parser.tagName = c\n            }\n          } else if (c === '>') {\n            closeTag(parser)\n          } else if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else if (parser.script) {\n            parser.script += '</' + parser.tagName\n            parser.tagName = ''\n            parser.state = S.SCRIPT\n          } else {\n            if (!isWhitespace(c)) {\n              strictFail(parser, 'Invalid tagname in closing tag')\n            }\n            parser.state = S.CLOSE_TAG_SAW_WHITE\n          }\n          continue\n\n        case S.CLOSE_TAG_SAW_WHITE:\n          if (isWhitespace(c)) {\n            continue\n          }\n          if (c === '>') {\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Invalid characters in closing tag')\n          }\n          continue\n\n        case S.TEXT_ENTITY:\n        case S.ATTRIB_VALUE_ENTITY_Q:\n        case S.ATTRIB_VALUE_ENTITY_U:\n          var returnState\n          var buffer\n          switch (parser.state) {\n            case S.TEXT_ENTITY:\n              returnState = S.TEXT\n              buffer = 'textNode'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_Q:\n              returnState = S.ATTRIB_VALUE_QUOTED\n              buffer = 'attribValue'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_U:\n              returnState = S.ATTRIB_VALUE_UNQUOTED\n              buffer = 'attribValue'\n              break\n          }\n\n          if (c === ';') {\n            if (parser.opt.unparsedEntities) {\n              var parsedEntity = parseEntity(parser)\n              parser.entity = ''\n              parser.state = returnState\n              parser.write(parsedEntity)\n            } else {\n              parser[buffer] += parseEntity(parser)\n              parser.entity = ''\n              parser.state = returnState\n            }\n          } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n            parser.entity += c\n          } else {\n            strictFail(parser, 'Invalid character in entity name')\n            parser[buffer] += '&' + parser.entity + c\n            parser.entity = ''\n            parser.state = returnState\n          }\n\n          continue\n\n        default: /* istanbul ignore next */ {\n          throw new Error(parser, 'Unknown state: ' + parser.state)\n        }\n      }\n    } // while\n\n    if (parser.position >= parser.bufferCheckPosition) {\n      checkBufferLength(parser)\n    }\n    return parser\n  }\n\n  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n  /* istanbul ignore next */\n  if (!String.fromCodePoint) {\n    (function () {\n      var stringFromCharCode = String.fromCharCode\n      var floor = Math.floor\n      var fromCodePoint = function () {\n        var MAX_SIZE = 0x4000\n        var codeUnits = []\n        var highSurrogate\n        var lowSurrogate\n        var index = -1\n        var length = arguments.length\n        if (!length) {\n          return ''\n        }\n        var result = ''\n        while (++index < length) {\n          var codePoint = Number(arguments[index])\n          if (\n            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n            codePoint < 0 || // not a valid Unicode code point\n            codePoint > 0x10FFFF || // not a valid Unicode code point\n            floor(codePoint) !== codePoint // not an integer\n          ) {\n            throw RangeError('Invalid code point: ' + codePoint)\n          }\n          if (codePoint <= 0xFFFF) { // BMP code point\n            codeUnits.push(codePoint)\n          } else { // Astral code point; split in surrogate halves\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            codePoint -= 0x10000\n            highSurrogate = (codePoint >> 10) + 0xD800\n            lowSurrogate = (codePoint % 0x400) + 0xDC00\n            codeUnits.push(highSurrogate, lowSurrogate)\n          }\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n            result += stringFromCharCode.apply(null, codeUnits)\n            codeUnits.length = 0\n          }\n        }\n        return result\n      }\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(String, 'fromCodePoint', {\n          value: fromCodePoint,\n          configurable: true,\n          writable: true\n        })\n      } else {\n        String.fromCodePoint = fromCodePoint\n      }\n    }())\n  }\n})(typeof exports === 'undefined' ? this.sax = {} : exports)\n", "module.exports = {\r\n\r\n  isArray: function(value) {\r\n    if (Array.isArray) {\r\n      return Array.isArray(value);\r\n    }\r\n    // fallback for older browsers like  IE 8\r\n    return Object.prototype.toString.call( value ) === '[object Array]';\r\n  }\r\n\r\n};\r\n", "var isArray = require('./array-helper').isArray;\r\n\r\nmodule.exports = {\r\n\r\n  copyOptions: function (options) {\r\n    var key, copy = {};\r\n    for (key in options) {\r\n      if (options.hasOwnProperty(key)) {\r\n        copy[key] = options[key];\r\n      }\r\n    }\r\n    return copy;\r\n  },\r\n\r\n  ensureFlagExists: function (item, options) {\r\n    if (!(item in options) || typeof options[item] !== 'boolean') {\r\n      options[item] = false;\r\n    }\r\n  },\r\n\r\n  ensureSpacesExists: function (options) {\r\n    if (!('spaces' in options) || (typeof options.spaces !== 'number' && typeof options.spaces !== 'string')) {\r\n      options.spaces = 0;\r\n    }\r\n  },\r\n\r\n  ensureAlwaysArrayExists: function (options) {\r\n    if (!('alwaysArray' in options) || (typeof options.alwaysArray !== 'boolean' && !isArray(options.alwaysArray))) {\r\n      options.alwaysArray = false;\r\n    }\r\n  },\r\n\r\n  ensureKeyExists: function (key, options) {\r\n    if (!(key + 'Key' in options) || typeof options[key + 'Key'] !== 'string') {\r\n      options[key + 'Key'] = options.compact ? '_' + key : key;\r\n    }\r\n  },\r\n\r\n  checkFnExists: function (key, options) {\r\n    return key + 'Fn' in options;\r\n  }\r\n\r\n};\r\n", "var sax = require('sax');\r\nvar expat /*= require('node-expat');*/ = { on: function () { }, parse: function () { } };\r\nvar helper = require('./options-helper');\r\nvar isArray = require('./array-helper').isArray;\r\n\r\nvar options;\r\nvar pureJsParser = true;\r\nvar currentElement;\r\n\r\nfunction validateOptions(userOptions) {\r\n  options = helper.copyOptions(userOptions);\r\n  helper.ensureFlagExists('ignoreDeclaration', options);\r\n  helper.ensureFlagExists('ignoreInstruction', options);\r\n  helper.ensureFlagExists('ignoreAttributes', options);\r\n  helper.ensureFlagExists('ignoreText', options);\r\n  helper.ensureFlagExists('ignoreComment', options);\r\n  helper.ensureFlagExists('ignoreCdata', options);\r\n  helper.ensureFlagExists('ignoreDoctype', options);\r\n  helper.ensureFlagExists('compact', options);\r\n  helper.ensureFlagExists('alwaysChildren', options);\r\n  helper.ensureFlagExists('addParent', options);\r\n  helper.ensureFlagExists('trim', options);\r\n  helper.ensureFlagExists('nativeType', options);\r\n  helper.ensureFlagExists('nativeTypeAttributes', options);\r\n  helper.ensureFlagExists('sanitize', options);\r\n  helper.ensureFlagExists('instructionHasAttributes', options);\r\n  helper.ensureFlagExists('captureSpacesBetweenElements', options);\r\n  helper.ensureAlwaysArrayExists(options);\r\n  helper.ensureKeyExists('declaration', options);\r\n  helper.ensureKeyExists('instruction', options);\r\n  helper.ensureKeyExists('attributes', options);\r\n  helper.ensureKeyExists('text', options);\r\n  helper.ensureKeyExists('comment', options);\r\n  helper.ensureKeyExists('cdata', options);\r\n  helper.ensureKeyExists('doctype', options);\r\n  helper.ensureKeyExists('type', options);\r\n  helper.ensureKeyExists('name', options);\r\n  helper.ensureKeyExists('elements', options);\r\n  helper.ensureKeyExists('parent', options);\r\n  helper.checkFnExists('doctype', options);\r\n  helper.checkFnExists('instruction', options);\r\n  helper.checkFnExists('cdata', options);\r\n  helper.checkFnExists('comment', options);\r\n  helper.checkFnExists('text', options);\r\n  helper.checkFnExists('instructionName', options);\r\n  helper.checkFnExists('elementName', options);\r\n  helper.checkFnExists('attributeName', options);\r\n  helper.checkFnExists('attributeValue', options);\r\n  helper.checkFnExists('attributes', options);\r\n  return options;\r\n}\r\n\r\nfunction nativeType(value) {\r\n  var nValue = Number(value);\r\n  if (!isNaN(nValue)) {\r\n    return nValue;\r\n  }\r\n  var bValue = value.toLowerCase();\r\n  if (bValue === 'true') {\r\n    return true;\r\n  } else if (bValue === 'false') {\r\n    return false;\r\n  }\r\n  return value;\r\n}\r\n\r\nfunction addField(type, value) {\r\n  var key;\r\n  if (options.compact) {\r\n    if (\r\n      !currentElement[options[type + 'Key']] &&\r\n      (isArray(options.alwaysArray) ? options.alwaysArray.indexOf(options[type + 'Key']) !== -1 : options.alwaysArray)\r\n    ) {\r\n      currentElement[options[type + 'Key']] = [];\r\n    }\r\n    if (currentElement[options[type + 'Key']] && !isArray(currentElement[options[type + 'Key']])) {\r\n      currentElement[options[type + 'Key']] = [currentElement[options[type + 'Key']]];\r\n    }\r\n    if (type + 'Fn' in options && typeof value === 'string') {\r\n      value = options[type + 'Fn'](value, currentElement);\r\n    }\r\n    if (type === 'instruction' && ('instructionFn' in options || 'instructionNameFn' in options)) {\r\n      for (key in value) {\r\n        if (value.hasOwnProperty(key)) {\r\n          if ('instructionFn' in options) {\r\n            value[key] = options.instructionFn(value[key], key, currentElement);\r\n          } else {\r\n            var temp = value[key];\r\n            delete value[key];\r\n            value[options.instructionNameFn(key, temp, currentElement)] = temp;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (isArray(currentElement[options[type + 'Key']])) {\r\n      currentElement[options[type + 'Key']].push(value);\r\n    } else {\r\n      currentElement[options[type + 'Key']] = value;\r\n    }\r\n  } else {\r\n    if (!currentElement[options.elementsKey]) {\r\n      currentElement[options.elementsKey] = [];\r\n    }\r\n    var element = {};\r\n    element[options.typeKey] = type;\r\n    if (type === 'instruction') {\r\n      for (key in value) {\r\n        if (value.hasOwnProperty(key)) {\r\n          break;\r\n        }\r\n      }\r\n      element[options.nameKey] = 'instructionNameFn' in options ? options.instructionNameFn(key, value, currentElement) : key;\r\n      if (options.instructionHasAttributes) {\r\n        element[options.attributesKey] = value[key][options.attributesKey];\r\n        if ('instructionFn' in options) {\r\n          element[options.attributesKey] = options.instructionFn(element[options.attributesKey], key, currentElement);\r\n        }\r\n      } else {\r\n        if ('instructionFn' in options) {\r\n          value[key] = options.instructionFn(value[key], key, currentElement);\r\n        }\r\n        element[options.instructionKey] = value[key];\r\n      }\r\n    } else {\r\n      if (type + 'Fn' in options) {\r\n        value = options[type + 'Fn'](value, currentElement);\r\n      }\r\n      element[options[type + 'Key']] = value;\r\n    }\r\n    if (options.addParent) {\r\n      element[options.parentKey] = currentElement;\r\n    }\r\n    currentElement[options.elementsKey].push(element);\r\n  }\r\n}\r\n\r\nfunction manipulateAttributes(attributes) {\r\n  if ('attributesFn' in options && attributes) {\r\n    attributes = options.attributesFn(attributes, currentElement);\r\n  }\r\n  if ((options.trim || 'attributeValueFn' in options || 'attributeNameFn' in options || options.nativeTypeAttributes) && attributes) {\r\n    var key;\r\n    for (key in attributes) {\r\n      if (attributes.hasOwnProperty(key)) {\r\n        if (options.trim) attributes[key] = attributes[key].trim();\r\n        if (options.nativeTypeAttributes) {\r\n          attributes[key] = nativeType(attributes[key]);\r\n        }\r\n        if ('attributeValueFn' in options) attributes[key] = options.attributeValueFn(attributes[key], key, currentElement);\r\n        if ('attributeNameFn' in options) {\r\n          var temp = attributes[key];\r\n          delete attributes[key];\r\n          attributes[options.attributeNameFn(key, attributes[key], currentElement)] = temp;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return attributes;\r\n}\r\n\r\nfunction onInstruction(instruction) {\r\n  var attributes = {};\r\n  if (instruction.body && (instruction.name.toLowerCase() === 'xml' || options.instructionHasAttributes)) {\r\n    var attrsRegExp = /([\\w:-]+)\\s*=\\s*(?:\"([^\"]*)\"|'([^']*)'|(\\w+))\\s*/g;\r\n    var match;\r\n    while ((match = attrsRegExp.exec(instruction.body)) !== null) {\r\n      attributes[match[1]] = match[2] || match[3] || match[4];\r\n    }\r\n    attributes = manipulateAttributes(attributes);\r\n  }\r\n  if (instruction.name.toLowerCase() === 'xml') {\r\n    if (options.ignoreDeclaration) {\r\n      return;\r\n    }\r\n    currentElement[options.declarationKey] = {};\r\n    if (Object.keys(attributes).length) {\r\n      currentElement[options.declarationKey][options.attributesKey] = attributes;\r\n    }\r\n    if (options.addParent) {\r\n      currentElement[options.declarationKey][options.parentKey] = currentElement;\r\n    }\r\n  } else {\r\n    if (options.ignoreInstruction) {\r\n      return;\r\n    }\r\n    if (options.trim) {\r\n      instruction.body = instruction.body.trim();\r\n    }\r\n    var value = {};\r\n    if (options.instructionHasAttributes && Object.keys(attributes).length) {\r\n      value[instruction.name] = {};\r\n      value[instruction.name][options.attributesKey] = attributes;\r\n    } else {\r\n      value[instruction.name] = instruction.body;\r\n    }\r\n    addField('instruction', value);\r\n  }\r\n}\r\n\r\nfunction onStartElement(name, attributes) {\r\n  var element;\r\n  if (typeof name === 'object') {\r\n    attributes = name.attributes;\r\n    name = name.name;\r\n  }\r\n  attributes = manipulateAttributes(attributes);\r\n  if ('elementNameFn' in options) {\r\n    name = options.elementNameFn(name, currentElement);\r\n  }\r\n  if (options.compact) {\r\n    element = {};\r\n    if (!options.ignoreAttributes && attributes && Object.keys(attributes).length) {\r\n      element[options.attributesKey] = {};\r\n      var key;\r\n      for (key in attributes) {\r\n        if (attributes.hasOwnProperty(key)) {\r\n          element[options.attributesKey][key] = attributes[key];\r\n        }\r\n      }\r\n    }\r\n    if (\r\n      !(name in currentElement) &&\r\n      (isArray(options.alwaysArray) ? options.alwaysArray.indexOf(name) !== -1 : options.alwaysArray)\r\n    ) {\r\n      currentElement[name] = [];\r\n    }\r\n    if (currentElement[name] && !isArray(currentElement[name])) {\r\n      currentElement[name] = [currentElement[name]];\r\n    }\r\n    if (isArray(currentElement[name])) {\r\n      currentElement[name].push(element);\r\n    } else {\r\n      currentElement[name] = element;\r\n    }\r\n  } else {\r\n    if (!currentElement[options.elementsKey]) {\r\n      currentElement[options.elementsKey] = [];\r\n    }\r\n    element = {};\r\n    element[options.typeKey] = 'element';\r\n    element[options.nameKey] = name;\r\n    if (!options.ignoreAttributes && attributes && Object.keys(attributes).length) {\r\n      element[options.attributesKey] = attributes;\r\n    }\r\n    if (options.alwaysChildren) {\r\n      element[options.elementsKey] = [];\r\n    }\r\n    currentElement[options.elementsKey].push(element);\r\n  }\r\n  element[options.parentKey] = currentElement; // will be deleted in onEndElement() if !options.addParent\r\n  currentElement = element;\r\n}\r\n\r\nfunction onText(text) {\r\n  if (options.ignoreText) {\r\n    return;\r\n  }\r\n  if (!text.trim() && !options.captureSpacesBetweenElements) {\r\n    return;\r\n  }\r\n  if (options.trim) {\r\n    text = text.trim();\r\n  }\r\n  if (options.nativeType) {\r\n    text = nativeType(text);\r\n  }\r\n  if (options.sanitize) {\r\n    text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n  }\r\n  addField('text', text);\r\n}\r\n\r\nfunction onComment(comment) {\r\n  if (options.ignoreComment) {\r\n    return;\r\n  }\r\n  if (options.trim) {\r\n    comment = comment.trim();\r\n  }\r\n  addField('comment', comment);\r\n}\r\n\r\nfunction onEndElement(name) {\r\n  var parentElement = currentElement[options.parentKey];\r\n  if (!options.addParent) {\r\n    delete currentElement[options.parentKey];\r\n  }\r\n  currentElement = parentElement;\r\n}\r\n\r\nfunction onCdata(cdata) {\r\n  if (options.ignoreCdata) {\r\n    return;\r\n  }\r\n  if (options.trim) {\r\n    cdata = cdata.trim();\r\n  }\r\n  addField('cdata', cdata);\r\n}\r\n\r\nfunction onDoctype(doctype) {\r\n  if (options.ignoreDoctype) {\r\n    return;\r\n  }\r\n  doctype = doctype.replace(/^ /, '');\r\n  if (options.trim) {\r\n    doctype = doctype.trim();\r\n  }\r\n  addField('doctype', doctype);\r\n}\r\n\r\nfunction onError(error) {\r\n  error.note = error; //console.error(error);\r\n}\r\n\r\nmodule.exports = function (xml, userOptions) {\r\n\r\n  var parser = pureJsParser ? sax.parser(true, {}) : parser = new expat.Parser('UTF-8');\r\n  var result = {};\r\n  currentElement = result;\r\n\r\n  options = validateOptions(userOptions);\r\n\r\n  if (pureJsParser) {\r\n    parser.opt = {strictEntities: true};\r\n    parser.onopentag = onStartElement;\r\n    parser.ontext = onText;\r\n    parser.oncomment = onComment;\r\n    parser.onclosetag = onEndElement;\r\n    parser.onerror = onError;\r\n    parser.oncdata = onCdata;\r\n    parser.ondoctype = onDoctype;\r\n    parser.onprocessinginstruction = onInstruction;\r\n  } else {\r\n    parser.on('startElement', onStartElement);\r\n    parser.on('text', onText);\r\n    parser.on('comment', onComment);\r\n    parser.on('endElement', onEndElement);\r\n    parser.on('error', onError);\r\n    //parser.on('startCdata', onStartCdata);\r\n    //parser.on('endCdata', onEndCdata);\r\n    //parser.on('entityDecl', onEntityDecl);\r\n  }\r\n\r\n  if (pureJsParser) {\r\n    parser.write(xml).close();\r\n  } else {\r\n    if (!parser.parse(xml)) {\r\n      throw new Error('XML parsing error: ' + parser.getError());\r\n    }\r\n  }\r\n\r\n  if (result[options.elementsKey]) {\r\n    var temp = result[options.elementsKey];\r\n    delete result[options.elementsKey];\r\n    result[options.elementsKey] = temp;\r\n    delete result.text;\r\n  }\r\n\r\n  return result;\r\n\r\n};\r\n", "var helper = require('./options-helper');\r\nvar xml2js = require('./xml2js');\r\n\r\nfunction validateOptions (userOptions) {\r\n  var options = helper.copyOptions(userOptions);\r\n  helper.ensureSpacesExists(options);\r\n  return options;\r\n}\r\n\r\nmodule.exports = function(xml, userOptions) {\r\n  var options, js, json, parentKey;\r\n  options = validateOptions(userOptions);\r\n  js = xml2js(xml, options);\r\n  parentKey = 'compact' in options && options.compact ? '_parent' : 'parent';\r\n  // parentKey = ptions.compact ? '_parent' : 'parent'; // consider this\r\n  if ('addParent' in options && options.addParent) {\r\n    json = JSON.stringify(js, function (k, v) { return k === parentKey? '_' : v; }, options.spaces);\r\n  } else {\r\n    json = JSON.stringify(js, null, options.spaces);\r\n  }\r\n  return json.replace(/\\u2028/g, '\\\\u2028').replace(/\\u2029/g, '\\\\u2029');\r\n};\r\n", "var helper = require('./options-helper');\nvar isArray = require('./array-helper').isArray;\n\nvar currentElement, currentElementName;\n\nfunction validateOptions(userOptions) {\n  var options = helper.copyOptions(userOptions);\n  helper.ensureFlagExists('ignoreDeclaration', options);\n  helper.ensureFlagExists('ignoreInstruction', options);\n  helper.ensureFlagExists('ignoreAttributes', options);\n  helper.ensureFlagExists('ignoreText', options);\n  helper.ensureFlagExists('ignoreComment', options);\n  helper.ensureFlagExists('ignoreCdata', options);\n  helper.ensureFlagExists('ignoreDoctype', options);\n  helper.ensureFlagExists('compact', options);\n  helper.ensureFlagExists('indentText', options);\n  helper.ensureFlagExists('indentCdata', options);\n  helper.ensureFlagExists('indentAttributes', options);\n  helper.ensureFlagExists('indentInstruction', options);\n  helper.ensureFlagExists('fullTagEmptyElement', options);\n  helper.ensureFlagExists('noQuotesForNativeAttributes', options);\n  helper.ensureSpacesExists(options);\n  if (typeof options.spaces === 'number') {\n    options.spaces = Array(options.spaces + 1).join(' ');\n  }\n  helper.ensureKeyExists('declaration', options);\n  helper.ensureKeyExists('instruction', options);\n  helper.ensureKeyExists('attributes', options);\n  helper.ensureKeyExists('text', options);\n  helper.ensureKeyExists('comment', options);\n  helper.ensureKeyExists('cdata', options);\n  helper.ensureKeyExists('doctype', options);\n  helper.ensureKeyExists('type', options);\n  helper.ensureKeyExists('name', options);\n  helper.ensureKeyExists('elements', options);\n  helper.checkFnExists('doctype', options);\n  helper.checkFnExists('instruction', options);\n  helper.checkFnExists('cdata', options);\n  helper.checkFnExists('comment', options);\n  helper.checkFnExists('text', options);\n  helper.checkFnExists('instructionName', options);\n  helper.checkFnExists('elementName', options);\n  helper.checkFnExists('attributeName', options);\n  helper.checkFnExists('attributeValue', options);\n  helper.checkFnExists('attributes', options);\n  helper.checkFnExists('fullTagEmptyElement', options);\n  return options;\n}\n\nfunction writeIndentation(options, depth, firstLine) {\n  return (!firstLine && options.spaces ? '\\n' : '') + Array(depth + 1).join(options.spaces);\n}\n\nfunction writeAttributes(attributes, options, depth) {\n  if (options.ignoreAttributes) {\n    return '';\n  }\n  if ('attributesFn' in options) {\n    attributes = options.attributesFn(attributes, currentElementName, currentElement);\n  }\n  var key, attr, attrName, quote, result = [];\n  for (key in attributes) {\n    if (attributes.hasOwnProperty(key) && attributes[key] !== null && attributes[key] !== undefined) {\n      quote = options.noQuotesForNativeAttributes && typeof attributes[key] !== 'string' ? '' : '\"';\n      attr = '' + attributes[key]; // ensure number and boolean are converted to String\n      attr = attr.replace(/\"/g, '&quot;');\n      attrName = 'attributeNameFn' in options ? options.attributeNameFn(key, attr, currentElementName, currentElement) : key;\n      result.push((options.spaces && options.indentAttributes? writeIndentation(options, depth+1, false) : ' '));\n      result.push(attrName + '=' + quote + ('attributeValueFn' in options ? options.attributeValueFn(attr, key, currentElementName, currentElement) : attr) + quote);\n    }\n  }\n  if (attributes && Object.keys(attributes).length && options.spaces && options.indentAttributes) {\n    result.push(writeIndentation(options, depth, false));\n  }\n  return result.join('');\n}\n\nfunction writeDeclaration(declaration, options, depth) {\n  currentElement = declaration;\n  currentElementName = 'xml';\n  return options.ignoreDeclaration ? '' :  '<?' + 'xml' + writeAttributes(declaration[options.attributesKey], options, depth) + '?>';\n}\n\nfunction writeInstruction(instruction, options, depth) {\n  if (options.ignoreInstruction) {\n    return '';\n  }\n  var key;\n  for (key in instruction) {\n    if (instruction.hasOwnProperty(key)) {\n      break;\n    }\n  }\n  var instructionName = 'instructionNameFn' in options ? options.instructionNameFn(key, instruction[key], currentElementName, currentElement) : key;\n  if (typeof instruction[key] === 'object') {\n    currentElement = instruction;\n    currentElementName = instructionName;\n    return '<?' + instructionName + writeAttributes(instruction[key][options.attributesKey], options, depth) + '?>';\n  } else {\n    var instructionValue = instruction[key] ? instruction[key] : '';\n    if ('instructionFn' in options) instructionValue = options.instructionFn(instructionValue, key, currentElementName, currentElement);\n    return '<?' + instructionName + (instructionValue ? ' ' + instructionValue : '') + '?>';\n  }\n}\n\nfunction writeComment(comment, options) {\n  return options.ignoreComment ? '' : '<!--' + ('commentFn' in options ? options.commentFn(comment, currentElementName, currentElement) : comment) + '-->';\n}\n\nfunction writeCdata(cdata, options) {\n  return options.ignoreCdata ? '' : '<![CDATA[' + ('cdataFn' in options ? options.cdataFn(cdata, currentElementName, currentElement) : cdata.replace(']]>', ']]]]><![CDATA[>')) + ']]>';\n}\n\nfunction writeDoctype(doctype, options) {\n  return options.ignoreDoctype ? '' : '<!DOCTYPE ' + ('doctypeFn' in options ? options.doctypeFn(doctype, currentElementName, currentElement) : doctype) + '>';\n}\n\nfunction writeText(text, options) {\n  if (options.ignoreText) return '';\n  text = '' + text; // ensure Number and Boolean are converted to String\n  text = text.replace(/&amp;/g, '&'); // desanitize to avoid double sanitization\n  text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  return 'textFn' in options ? options.textFn(text, currentElementName, currentElement) : text;\n}\n\nfunction hasContent(element, options) {\n  var i;\n  if (element.elements && element.elements.length) {\n    for (i = 0; i < element.elements.length; ++i) {\n      switch (element.elements[i][options.typeKey]) {\n      case 'text':\n        if (options.indentText) {\n          return true;\n        }\n        break; // skip to next key\n      case 'cdata':\n        if (options.indentCdata) {\n          return true;\n        }\n        break; // skip to next key\n      case 'instruction':\n        if (options.indentInstruction) {\n          return true;\n        }\n        break; // skip to next key\n      case 'doctype':\n      case 'comment':\n      case 'element':\n        return true;\n      default:\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction writeElement(element, options, depth) {\n  currentElement = element;\n  currentElementName = element.name;\n  var xml = [], elementName = 'elementNameFn' in options ? options.elementNameFn(element.name, element) : element.name;\n  xml.push('<' + elementName);\n  if (element[options.attributesKey]) {\n    xml.push(writeAttributes(element[options.attributesKey], options, depth));\n  }\n  var withClosingTag = element[options.elementsKey] && element[options.elementsKey].length || element[options.attributesKey] && element[options.attributesKey]['xml:space'] === 'preserve';\n  if (!withClosingTag) {\n    if ('fullTagEmptyElementFn' in options) {\n      withClosingTag = options.fullTagEmptyElementFn(element.name, element);\n    } else {\n      withClosingTag = options.fullTagEmptyElement;\n    }\n  }\n  if (withClosingTag) {\n    xml.push('>');\n    if (element[options.elementsKey] && element[options.elementsKey].length) {\n      xml.push(writeElements(element[options.elementsKey], options, depth + 1));\n      currentElement = element;\n      currentElementName = element.name;\n    }\n    xml.push(options.spaces && hasContent(element, options) ? '\\n' + Array(depth + 1).join(options.spaces) : '');\n    xml.push('</' + elementName + '>');\n  } else {\n    xml.push('/>');\n  }\n  return xml.join('');\n}\n\nfunction writeElements(elements, options, depth, firstLine) {\n  return elements.reduce(function (xml, element) {\n    var indent = writeIndentation(options, depth, firstLine && !xml);\n    switch (element.type) {\n    case 'element': return xml + indent + writeElement(element, options, depth);\n    case 'comment': return xml + indent + writeComment(element[options.commentKey], options);\n    case 'doctype': return xml + indent + writeDoctype(element[options.doctypeKey], options);\n    case 'cdata': return xml + (options.indentCdata ? indent : '') + writeCdata(element[options.cdataKey], options);\n    case 'text': return xml + (options.indentText ? indent : '') + writeText(element[options.textKey], options);\n    case 'instruction':\n      var instruction = {};\n      instruction[element[options.nameKey]] = element[options.attributesKey] ? element : element[options.instructionKey];\n      return xml + (options.indentInstruction ? indent : '') + writeInstruction(instruction, options, depth);\n    }\n  }, '');\n}\n\nfunction hasContentCompact(element, options, anyContent) {\n  var key;\n  for (key in element) {\n    if (element.hasOwnProperty(key)) {\n      switch (key) {\n      case options.parentKey:\n      case options.attributesKey:\n        break; // skip to next key\n      case options.textKey:\n        if (options.indentText || anyContent) {\n          return true;\n        }\n        break; // skip to next key\n      case options.cdataKey:\n        if (options.indentCdata || anyContent) {\n          return true;\n        }\n        break; // skip to next key\n      case options.instructionKey:\n        if (options.indentInstruction || anyContent) {\n          return true;\n        }\n        break; // skip to next key\n      case options.doctypeKey:\n      case options.commentKey:\n        return true;\n      default:\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction writeElementCompact(element, name, options, depth, indent) {\n  currentElement = element;\n  currentElementName = name;\n  var elementName = 'elementNameFn' in options ? options.elementNameFn(name, element) : name;\n  if (typeof element === 'undefined' || element === null || element === '') {\n    return 'fullTagEmptyElementFn' in options && options.fullTagEmptyElementFn(name, element) || options.fullTagEmptyElement ? '<' + elementName + '></' + elementName + '>' : '<' + elementName + '/>';\n  }\n  var xml = [];\n  if (name) {\n    xml.push('<' + elementName);\n    if (typeof element !== 'object') {\n      xml.push('>' + writeText(element,options) + '</' + elementName + '>');\n      return xml.join('');\n    }\n    if (element[options.attributesKey]) {\n      xml.push(writeAttributes(element[options.attributesKey], options, depth));\n    }\n    var withClosingTag = hasContentCompact(element, options, true) || element[options.attributesKey] && element[options.attributesKey]['xml:space'] === 'preserve';\n    if (!withClosingTag) {\n      if ('fullTagEmptyElementFn' in options) {\n        withClosingTag = options.fullTagEmptyElementFn(name, element);\n      } else {\n        withClosingTag = options.fullTagEmptyElement;\n      }\n    }\n    if (withClosingTag) {\n      xml.push('>');\n    } else {\n      xml.push('/>');\n      return xml.join('');\n    }\n  }\n  xml.push(writeElementsCompact(element, options, depth + 1, false));\n  currentElement = element;\n  currentElementName = name;\n  if (name) {\n    xml.push((indent ? writeIndentation(options, depth, false) : '') + '</' + elementName + '>');\n  }\n  return xml.join('');\n}\n\nfunction writeElementsCompact(element, options, depth, firstLine) {\n  var i, key, nodes, xml = [];\n  for (key in element) {\n    if (element.hasOwnProperty(key)) {\n      nodes = isArray(element[key]) ? element[key] : [element[key]];\n      for (i = 0; i < nodes.length; ++i) {\n        switch (key) {\n        case options.declarationKey: xml.push(writeDeclaration(nodes[i], options, depth)); break;\n        case options.instructionKey: xml.push((options.indentInstruction ? writeIndentation(options, depth, firstLine) : '') + writeInstruction(nodes[i], options, depth)); break;\n        case options.attributesKey: case options.parentKey: break; // skip\n        case options.textKey: xml.push((options.indentText ? writeIndentation(options, depth, firstLine) : '') + writeText(nodes[i], options)); break;\n        case options.cdataKey: xml.push((options.indentCdata ? writeIndentation(options, depth, firstLine) : '') + writeCdata(nodes[i], options)); break;\n        case options.doctypeKey: xml.push(writeIndentation(options, depth, firstLine) + writeDoctype(nodes[i], options)); break;\n        case options.commentKey: xml.push(writeIndentation(options, depth, firstLine) + writeComment(nodes[i], options)); break;\n        default: xml.push(writeIndentation(options, depth, firstLine) + writeElementCompact(nodes[i], key, options, depth, hasContentCompact(nodes[i], options)));\n        }\n        firstLine = firstLine && !xml.length;\n      }\n    }\n  }\n  return xml.join('');\n}\n\nmodule.exports = function (js, options) {\n  options = validateOptions(options);\n  var xml = [];\n  currentElement = js;\n  currentElementName = '_root_';\n  if (options.compact) {\n    xml.push(writeElementsCompact(js, options, 0, true));\n  } else {\n    if (js[options.declarationKey]) {\n      xml.push(writeDeclaration(js[options.declarationKey], options, 0));\n    }\n    if (js[options.elementsKey] && js[options.elementsKey].length) {\n      xml.push(writeElements(js[options.elementsKey], options, 0, !xml.length));\n    }\n  }\n  return xml.join('');\n};\n", "var js2xml = require('./js2xml.js');\r\n\r\nmodule.exports = function (json, options) {\r\n  if (json instanceof Buffer) {\r\n    json = json.toString();\r\n  }\r\n  var js = null;\r\n  if (typeof (json) === 'string') {\r\n    try {\r\n      js = JSON.parse(json);\r\n    } catch (e) {\r\n      throw new Error('The JSON structure is invalid');\r\n    }\r\n  } else {\r\n    js = json;\r\n  }\r\n  return js2xml(js, options);\r\n};\r\n", "/*jslint node:true */\r\n\r\nvar xml2js = require('./xml2js');\r\nvar xml2json = require('./xml2json');\r\nvar js2xml = require('./js2xml');\r\nvar json2xml = require('./json2xml');\r\n\r\nmodule.exports = {\r\n  xml2js: xml2js,\r\n  xml2json: xml2json,\r\n  js2xml: js2xml,\r\n  json2xml: json2xml\r\n};\r\n", "import type { PropertyValue, RawAnnotation } from '@sap-ux/vocabularies-types';\nimport { AggregationAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/Aggregation';\nimport { CapabilitiesAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/Capabilities';\nimport { CommonAnnotationTerms, FieldControlType } from '@sap-ux/vocabularies-types/vocabularies/Common';\nimport { CoreAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/Core';\nimport { MeasuresAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/Measures';\nimport { UIAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/UI';\n\nexport type V2annotationsSupport = {\n    'sap:schema-version'?: string;\n    'sap:creatable'?: string;\n    'sap:creatable-path'?: string;\n    'sap:updatable'?: string;\n    'sap:updatable-path'?: string;\n    'sap:deletable'?: string;\n    'sap:deletable-path'?: string;\n    'sap:searchable'?: string;\n    'sap:pageable'?: string;\n    'sap:topable'?: string;\n    'sap:addressable'?: string;\n    'sap:requires-filter'?: string;\n    'sap:required-in-filter'?: string;\n    'sap:filterable'?: string;\n    'sap:filter-restricton'?: string;\n    'sap:sortable'?: string;\n    'sap:visible'?: string;\n    'sap:label'?: string;\n    'sap:heading'?: string;\n    'sap:quickinfo'?: string;\n    'sap:text'?: string;\n    'sap:unit'?: string;\n    'sap:precision'?: string;\n    'sap:value-list'?: string;\n    'sap:display-format'?: string;\n    'sap:lower-boundary'?: string;\n    'sap:upper-boundary'?: string;\n    'sap:field-control'?: string;\n    'sap:action-for'?: string;\n    'sap:applicable-path'?: string;\n    'sap:is-annotation'?: string;\n    'sap:minoccurs'?: string;\n    'sap:maxoccurs'?: string;\n    'sap:parameter'?: string;\n    'sap:attribute-for'?: string;\n    'sap:semantics'?: string;\n    // Leaving out the hiearchy / aggregation relate ones :)\n};\n\nexport type ObjectType = 'EntitySet' | 'EntityType' | 'Singleton' | 'Property' | 'NavigationProperty';\n\n/**\n * Convert v2 annotation that were defined on the schema as standard v4 annotations.\n *\n * @param attributes the attribute of the current object\n * @param objectType the object type\n * @param objectName the object name\n * @returns the converted annotations\n */\nexport function convertV2Annotations(\n    attributes: V2annotationsSupport,\n    objectType: ObjectType,\n    objectName: string\n): RawAnnotation[] {\n    const annotations: RawAnnotation[] = [];\n    switch (objectType) {\n        case 'EntitySet':\n            convertEntitySetAnnotations(attributes, annotations);\n            break;\n        case 'EntityType':\n            convertEntityTypeAnnotations(attributes, annotations);\n            break;\n        case 'NavigationProperty':\n            convertNavigationPropertyAnnotations(attributes, objectName, annotations);\n            break;\n        case 'Property':\n            convertPropertyAnnotations(attributes, objectName, annotations);\n            break;\n        case 'Singleton':\n            break;\n        default:\n            break;\n    }\n    convertGenericAnnotations(attributes, objectName, annotations);\n    return annotations;\n}\n\n/**\n * Convert annotation that can apply to all kind of objects.\n *\n * @param attributes the attribute of the current object\n * @param objectName the object name\n * @param annotations the raw annotation array\n */\nexport function convertGenericAnnotations(\n    attributes: V2annotationsSupport,\n    objectName: string,\n    annotations: RawAnnotation[]\n) {\n    /**\n     * Push to annotation if the condition evaluates to true.\n     *\n     * @param condition the condition to evaluate\n     * @param value the target value\n     */\n    function pushToAnnotations(condition: boolean, value: any) {\n        if (condition) {\n            annotations.push(value);\n        }\n    }\n\n    pushToAnnotations(attributes['sap:schema-version'] !== undefined, {\n        term: CoreAnnotationTerms.SchemaVersion,\n        value: {\n            type: 'String',\n            String: attributes['sap:schema-version']\n        }\n    });\n\n    pushToAnnotations(attributes['sap:searchable'] !== undefined, {\n        term: CapabilitiesAnnotationTerms.SearchRestrictions,\n        record: {\n            propertyValues: [\n                {\n                    name: 'Searchable',\n                    value: {\n                        type: 'Bool',\n                        Bool: attributes['sap:searchable'] === 'true'\n                    }\n                }\n            ]\n        }\n    });\n    pushToAnnotations(attributes['sap:pageable'] !== undefined, {\n        term: CapabilitiesAnnotationTerms.TopSupported,\n        value: {\n            type: 'Bool',\n            Bool: attributes['sap:pageable'] === 'true'\n        }\n    });\n\n    pushToAnnotations(attributes['sap:pageable'] !== undefined, {\n        term: CapabilitiesAnnotationTerms.SkipSupported,\n        value: {\n            type: 'Bool',\n            Bool: attributes['sap:pageable'] === 'true'\n        }\n    });\n\n    pushToAnnotations(attributes['sap:topable'] !== undefined, {\n        term: CapabilitiesAnnotationTerms.TopSupported,\n        value: {\n            type: 'Bool',\n            Bool: attributes['sap:topable'] === 'true'\n        }\n    });\n\n    pushToAnnotations(attributes['sap:requires-filter'] !== undefined, {\n        term: CapabilitiesAnnotationTerms.FilterRestrictions,\n        record: {\n            propertyValues: [\n                {\n                    name: 'RequiresFilter',\n                    value: {\n                        type: 'Bool',\n                        Bool: attributes['sap:requires-filter'] === 'true'\n                    }\n                }\n            ]\n        }\n    });\n    pushToAnnotations(attributes['sap:required-in-filter'] !== undefined, {\n        term: CapabilitiesAnnotationTerms.FilterRestrictions,\n        record: {\n            propertyValues: [\n                {\n                    name: 'RequiredProperties',\n                    value: {\n                        type: 'Collection',\n                        Collection: [\n                            {\n                                type: 'PropertyPath',\n                                PropertyPath: objectName\n                            }\n                        ]\n                    }\n                }\n            ]\n        }\n    });\n\n    pushToAnnotations(attributes['sap:filter-restricton'] !== undefined, {\n        term: CapabilitiesAnnotationTerms.FilterRestrictions,\n        record: {\n            propertyValues: [\n                {\n                    name: 'FilterExpressionRestrictions',\n                    value: {\n                        type: 'Collection',\n                        Collection: [\n                            {\n                                type: 'Record',\n                                propertyValues: [\n                                    {\n                                        name: 'FilterExpressionRestrictions',\n                                        value: {\n                                            type: 'String',\n                                            String: attributes['sap:filter-restricton']\n                                        }\n                                    },\n                                    {\n                                        name: 'Property',\n                                        value: {\n                                            type: 'PropertyPath',\n                                            PropertyPath: objectName\n                                        }\n                                    }\n                                ]\n                            }\n                        ]\n                    }\n                }\n            ]\n        }\n    });\n    pushToAnnotations(attributes['sap:sortable'] === 'false', {\n        term: CapabilitiesAnnotationTerms.SortRestrictions,\n        record: {\n            propertyValues: [\n                {\n                    name: 'NonSortableProperties',\n                    value: {\n                        type: 'PropertyPath',\n                        PropertyPath: objectName\n                    }\n                }\n            ]\n        }\n    });\n    pushToAnnotations(attributes['sap:visible'] === 'false', {\n        term: UIAnnotationTerms.Hidden,\n        value: {\n            type: 'Bool',\n            Bool: true\n        }\n    });\n    pushToAnnotations(attributes['sap:label'] !== undefined, {\n        term: CommonAnnotationTerms.Label,\n        value: {\n            type: 'String',\n            String: attributes['sap:label']\n        }\n    });\n    pushToAnnotations(attributes['sap:heading'] !== undefined, {\n        term: CommonAnnotationTerms.Heading,\n        value: {\n            type: 'String',\n            String: attributes['sap:heading']\n        }\n    });\n\n    pushToAnnotations(attributes['sap:quickinfo'] !== undefined, {\n        term: CommonAnnotationTerms.QuickInfo,\n        value: {\n            type: 'String',\n            String: attributes['sap:quickinfo']\n        }\n    });\n    pushToAnnotations(attributes['sap:text'] !== undefined, {\n        term: CommonAnnotationTerms.Text,\n        value: {\n            type: 'Path',\n            Path: attributes['sap:text']\n        }\n    });\n\n    pushToAnnotations(attributes['sap:unit'] !== undefined, {\n        term: MeasuresAnnotationTerms.Unit,\n        value: {\n            type: 'Path',\n            Path: attributes['sap:unit']\n        }\n    });\n    pushToAnnotations(attributes['sap:unit'] !== undefined, {\n        term: MeasuresAnnotationTerms.ISOCurrency,\n        value: {\n            type: 'Path',\n            Path: attributes['sap:unit']\n        }\n    });\n\n    pushToAnnotations(attributes['sap:precision'] !== undefined, {\n        term: MeasuresAnnotationTerms.Scale,\n        value: {\n            type: 'Int',\n            Int: parseInt(attributes['sap:precision'] as string, 10)\n        }\n    });\n    pushToAnnotations(attributes['sap:value-list'] === 'fixed-value', {\n        term: CommonAnnotationTerms.ValueListWithFixedValues,\n        value: {\n            type: 'Bool',\n            Bool: true\n        }\n    });\n\n    pushToAnnotations(attributes['sap:display-format'] === 'NonNegative', {\n        term: CommonAnnotationTerms.IsDigitSequence,\n        value: {\n            type: 'Bool',\n            Bool: true\n        }\n    });\n\n    pushToAnnotations(attributes['sap:display-format'] === 'UpperCase', {\n        term: CommonAnnotationTerms.IsUpperCase,\n        value: {\n            type: 'Bool',\n            Bool: true\n        }\n    });\n\n    if (attributes['sap:lower-boundary'] || attributes['sap:upper-boundary']) {\n        const pv: PropertyValue[] = [];\n        if (attributes['sap:lower-boundary']) {\n            pv.push({\n                name: 'LowerBoundary',\n                value: {\n                    type: 'PropertyPath',\n                    PropertyPath: attributes['sap:lower-boundary']\n                }\n            });\n        }\n        if (attributes['sap:upper-boundary']) {\n            pv.push({\n                name: 'UpperBoundary',\n                value: {\n                    type: 'PropertyPath',\n                    PropertyPath: attributes['sap:upper-boundary']\n                }\n            });\n        }\n        annotations.push({\n            term: CommonAnnotationTerms.Interval,\n            record: {\n                propertyValues: pv\n            }\n        });\n    }\n    pushToAnnotations(attributes['sap:field-control'] !== undefined, {\n        term: CommonAnnotationTerms.FieldControl,\n        value: {\n            type: 'Path',\n            Path: attributes['sap:field-control']\n        }\n    });\n\n    pushToAnnotations(attributes['sap:applicable-path'] !== undefined, {\n        term: CoreAnnotationTerms.OperationAvailable,\n        value: {\n            type: 'Path',\n            Path: attributes['sap:applicable-path']\n        }\n    });\n    pushToAnnotations(attributes['sap:minoccurs'] !== undefined, {\n        term: CommonAnnotationTerms.MinOccurs,\n        value: {\n            type: 'Int',\n            Int: parseInt(attributes['sap:minoccurs'] as string, 10)\n        }\n    });\n\n    pushToAnnotations(attributes['sap:maxoccurs'] !== undefined, {\n        term: CommonAnnotationTerms.MaxOccurs,\n        value: {\n            type: 'Int',\n            Int: parseInt(attributes['sap:maxoccurs'] as string, 10)\n        }\n    });\n\n    pushToAnnotations(attributes['sap:parameter'] === 'mandatory', {\n        term: CommonAnnotationTerms.FieldControl,\n        value: {\n            type: 'EnumMember',\n            EnumMember: FieldControlType.Mandatory\n        }\n    });\n\n    pushToAnnotations(attributes['sap:parameter'] === 'optional', {\n        term: CommonAnnotationTerms.FieldControl,\n        value: {\n            type: 'EnumMember',\n            EnumMember: FieldControlType.Optional\n        }\n    });\n\n    pushToAnnotations(attributes['sap:attribute-for'] !== undefined, {\n        term: CommonAnnotationTerms.Attributes,\n        value: {\n            type: 'Collection',\n            Collection: [\n                {\n                    type: 'PropertyPath',\n                    PropertyPath: objectName\n                }\n            ]\n        }\n    });\n}\n\n/**\n * Convert annotations specific to entityset.\n *\n * @param attributes The V2 Annotations to evaluate\n * @param annotations The raw annotation array\n */\nexport function convertEntitySetAnnotations(attributes: V2annotationsSupport, annotations: RawAnnotation[]) {\n    if (attributes['sap:creatable']) {\n        annotations.push({\n            term: CapabilitiesAnnotationTerms.InsertRestrictions,\n            record: {\n                propertyValues: [\n                    {\n                        name: 'Insertable',\n                        value: {\n                            type: 'Bool',\n                            Bool: attributes['sap:creatable'] === 'true'\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    if (attributes['sap:updatable']) {\n        annotations.push({\n            term: CapabilitiesAnnotationTerms.UpdateRestrictions,\n            record: {\n                propertyValues: [\n                    {\n                        name: 'Updatable',\n                        value: {\n                            type: 'Bool',\n                            Bool: attributes['sap:updatable'] === 'true'\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    if (attributes['sap:updatable-path']) {\n        annotations.push({\n            term: CapabilitiesAnnotationTerms.UpdateRestrictions,\n            record: {\n                propertyValues: [\n                    {\n                        name: 'Updatable',\n                        value: {\n                            type: 'Path',\n                            Path: attributes['sap:updatable-path']\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    if (attributes['sap:deletable']) {\n        annotations.push({\n            term: CapabilitiesAnnotationTerms.DeleteRestrictions,\n            record: {\n                propertyValues: [\n                    {\n                        name: 'Deletable',\n                        value: {\n                            type: 'Bool',\n                            Bool: attributes['sap:updatable'] === 'true'\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    if (attributes['sap:deletable-path']) {\n        annotations.push({\n            term: CapabilitiesAnnotationTerms.DeleteRestrictions,\n            record: {\n                propertyValues: [\n                    {\n                        name: 'Deletable',\n                        value: {\n                            type: 'Path',\n                            Path: attributes['sap:deletable-path']\n                        }\n                    }\n                ]\n            }\n        });\n    }\n}\n\n/**\n * Convert annotations specific to navigation properties.\n *\n * @param attributes The V2 Annotations to evaluate\n * @param objectName The name of the navigation property\n * @param annotations The raw annotation array\n */\nexport function convertNavigationPropertyAnnotations(\n    attributes: V2annotationsSupport,\n    objectName: string,\n    annotations: RawAnnotation[]\n) {\n    if (attributes['sap:creatable']) {\n        annotations.push({\n            term: CapabilitiesAnnotationTerms.NavigationRestrictions,\n            record: {\n                propertyValues: [\n                    {\n                        name: 'RestrictedProperties',\n                        value: {\n                            type: 'Record',\n                            Record: {\n                                propertyValues: [\n                                    {\n                                        name: 'InsertRestrictrions',\n                                        value: {\n                                            type: 'Record',\n                                            Record: {\n                                                propertyValues: [\n                                                    {\n                                                        name: 'Insertable',\n                                                        value: {\n                                                            type: 'Bool',\n                                                            Bool: attributes['sap:creatable'] === 'true'\n                                                        }\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                ]\n                            }\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    if (attributes['sap:creatable-path']) {\n        annotations.push({\n            term: CapabilitiesAnnotationTerms.NavigationRestrictions,\n            record: {\n                propertyValues: [\n                    {\n                        name: 'RestrictedProperties',\n                        value: {\n                            type: 'Record',\n                            Record: {\n                                propertyValues: [\n                                    {\n                                        name: 'InsertRestrictrions',\n                                        value: {\n                                            type: 'Record',\n                                            Record: {\n                                                propertyValues: [\n                                                    {\n                                                        name: 'Insertable',\n                                                        value: {\n                                                            type: 'Path',\n                                                            Path: attributes['sap:creatable-path']\n                                                        }\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                ]\n                            }\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    if (attributes['sap:filterable'] === 'false') {\n        annotations.push({\n            term: CapabilitiesAnnotationTerms.NavigationRestrictions,\n            record: {\n                propertyValues: [\n                    {\n                        name: 'RestrictedProperties',\n                        value: {\n                            type: 'Collection',\n                            Collection: [\n                                {\n                                    type: 'Record',\n                                    propertyValues: [\n                                        {\n                                            name: 'NavigationProperty',\n                                            value: {\n                                                type: 'NavigationPropertyPath',\n                                                NavigationPropertyPath: objectName\n                                            }\n                                        },\n                                        {\n                                            name: 'FilterRestrictions',\n                                            value: {\n                                                type: 'Record',\n                                                Record: {\n                                                    propertyValues: [\n                                                        {\n                                                            name: 'Filterable',\n                                                            value: {\n                                                                type: 'Bool',\n                                                                Bool: false\n                                                            }\n                                                        }\n                                                    ]\n                                                }\n                                            }\n                                        }\n                                    ]\n                                }\n                            ]\n                        }\n                    }\n                ]\n            }\n        });\n    }\n}\n\n/**\n * Convert annotations specific to properties.\n *\n * @param attributes The V2 Annotations to evaluate\n * @param objectName The name of the property\n * @param annotations The raw annotation array\n */\nexport function convertPropertyAnnotations(\n    attributes: V2annotationsSupport,\n    objectName: string,\n    annotations: RawAnnotation[]\n) {\n    if (attributes['sap:creatable'] === 'true' && attributes['sap:updatable'] === 'false') {\n        annotations.push({\n            term: CoreAnnotationTerms.Immutable,\n            value: {\n                type: 'Bool',\n                Bool: true\n            }\n        });\n    }\n    if (attributes['sap:creatable'] === 'false' && attributes['sap:updatable'] === 'false') {\n        annotations.push({\n            term: CoreAnnotationTerms.Computed,\n            value: {\n                type: 'Bool',\n                Bool: true\n            }\n        });\n    }\n    if (attributes['sap:updatable-path']) {\n        annotations.push({\n            term: CommonAnnotationTerms.FieldControl,\n            value: {\n                type: 'Path',\n                Path: attributes['sap:updatable-path']\n            }\n        });\n    }\n    if (attributes['sap:filterable'] === 'false') {\n        annotations.push({\n            term: CapabilitiesAnnotationTerms.FilterRestrictions,\n            record: {\n                propertyValues: [\n                    {\n                        name: 'NonFilterableProperties',\n                        value: {\n                            type: 'Collection',\n                            Collection: [\n                                {\n                                    type: 'PropertyPath',\n                                    PropertyPath: objectName\n                                }\n                            ]\n                        }\n                    }\n                ]\n            }\n        });\n    }\n}\n\n/**\n * Convert annotations specific to properties.\n *\n * @param attributes The V2 Annotations to evaluate\n * @param annotations The raw annotation array\n */\nexport function convertEntityTypeAnnotations(attributes: V2annotationsSupport, annotations: RawAnnotation[]) {\n    if (attributes['sap:semantics'] === 'aggregate') {\n        annotations.push({\n            term: AggregationAnnotationTerms.ApplySupported,\n            record: {\n                propertyValues: [\n                    {\n                        /**\n                         Only properties marked as `Groupable` can be used in the `groupby` transformation, and only those marked as `Aggregatable` can be used in the  `aggregate` transformation\n                         */\n                        name: 'PropertyRestrictions',\n                        value: {\n                            type: 'Collection',\n                            Collection: []\n                        }\n                    },\n                    {\n                        /**\n                         A non-empty collection indicates that only the listed properties of the annotated target are supported by the `groupby` transformation\n                         */\n                        name: 'GroupableProperties',\n                        value: {\n                            type: 'Collection',\n                            Collection: []\n                        }\n                    },\n                    {\n                        /**\n                         A non-empty collection indicates that only the listed properties of the annotated target can be used in the `aggregate` transformation, optionally restricted to the specified aggregation methods\n                         */\n                        name: 'AggregatableProperties',\n                        value: {\n                            type: 'Collection',\n                            Collection: []\n                        }\n                    }\n                ]\n            }\n        });\n    }\n}\n", "// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path=\"../utils/edmx.d.ts\"/>\nimport type {\n    AnnotationList,\n    AnnotationPathExpression,\n    AnnotationRecord,\n    Apply,\n    Expression,\n    FullyQualifiedName,\n    NavigationPropertyPathExpression,\n    PathExpression,\n    PropertyPathExpression,\n    PropertyValue,\n    RawAction,\n    RawActionImport,\n    RawActionParameter,\n    RawAnnotation,\n    RawAssociation,\n    RawAssociationEnd,\n    RawAssociationSet,\n    RawAssociationSetEnd,\n    RawComplexType,\n    RawEntityContainer,\n    RawEntitySet,\n    RawEntityType,\n    RawMetadata,\n    RawProperty,\n    RawSchema,\n    RawSingleton,\n    RawTypeDefinition,\n    RawV2NavigationProperty,\n    RawV4NavigationProperty,\n    Reference,\n    ReferentialConstraint,\n    SimpleIdentifier\n} from '@sap-ux/vocabularies-types';\nimport { xml2js } from 'xml-js';\nimport { ensureArray, RawMetadataInstance } from './utils';\nimport type { V2annotationsSupport } from './v2annotationsSupport';\nimport { convertV2Annotations } from './v2annotationsSupport';\n\nconst collectionRegexp = /^Collection\\((.+)\\)$/;\n\ntype PropertyOutput = {\n    entityProperties: RawProperty[];\n    entityKeys: RawProperty[];\n};\n\n// Type guards\n\n/**\n * Check whether the navigation property is a v4 navigation property.\n *\n * @param navPropertyAttributes\n * @returns true if the navigationProperty is a v4 one\n */\nfunction isV4NavProperty(\n    navPropertyAttributes: EDMX.NavigationPropertyAttributesV2 | EDMX.NavigationPropertyAttributesV4\n): navPropertyAttributes is EDMX.NavigationPropertyAttributesV4 {\n    return (\n        (navPropertyAttributes as EDMX.NavigationPropertyAttributesV4).Type !== null &&\n        (navPropertyAttributes as EDMX.NavigationPropertyAttributesV4).Type !== undefined\n    );\n}\n\n// Parser Methods\n/**\n * Retrieves the name of the keys for that entity type.\n *\n * @param propertyRefs {EDMX.PropertyRef} property reference\n * @returns the entityType keys name\n */\nfunction getEntityTypeKeys(propertyRefs: EDMX.PropertyRef[]): SimpleIdentifier[] {\n    return propertyRefs.map((propertyRef) => propertyRef._attributes.Name);\n}\n\n/**\n * Parse the EDMX.Property to retrieve the property.\n *\n * @param entityProperties\n * @param entityKeys\n * @param entityTypeFQN\n * @param annotationLists\n * @returns the properties\n */\nfunction parseProperties(\n    entityProperties: EDMX.Property[],\n    entityKeys: SimpleIdentifier[],\n    entityTypeFQN: FullyQualifiedName,\n    annotationLists: AnnotationList[]\n): PropertyOutput {\n    return entityProperties.reduce(\n        (outObject: PropertyOutput, entityProperty: EDMX.Property) => {\n            const edmProperty: RawProperty = {\n                _type: 'Property',\n                name: entityProperty._attributes.Name,\n                fullyQualifiedName: `${entityTypeFQN}/${entityProperty._attributes.Name}`,\n                type: unaliasType(entityProperty._attributes.Type).type\n            };\n            if (entityProperty._attributes.MaxLength) {\n                edmProperty.maxLength = parseInt(entityProperty._attributes.MaxLength, 10);\n            }\n            if (entityProperty._attributes.Precision) {\n                edmProperty.precision = parseInt(entityProperty._attributes.Precision, 10);\n            }\n            if (entityProperty._attributes.Scale) {\n                edmProperty.scale = parseInt(entityProperty._attributes.Scale, 10);\n            }\n            if (entityProperty._attributes.Nullable) {\n                edmProperty.nullable = entityProperty._attributes.Nullable !== 'false';\n            }\n            if (entityProperty._attributes.DefaultValue) {\n                switch (edmProperty.type) {\n                    case 'Edm.Int16':\n                    case 'Edm.Byte':\n                    case 'Edm.Int32':\n                    case 'Edm.Int64':\n                        edmProperty.defaultValue = parseInt(entityProperty._attributes.DefaultValue, 10);\n                        break;\n                    case 'Edm.Decimal':\n                        edmProperty.defaultValue = parseFloat(entityProperty._attributes.DefaultValue);\n                        break;\n                    case 'Edm.Boolean':\n                        edmProperty.defaultValue = entityProperty._attributes.DefaultValue === 'true';\n                        break;\n                    default:\n                        edmProperty.defaultValue = entityProperty._attributes.DefaultValue;\n                        break;\n                }\n            }\n\n            outObject.entityProperties.push(edmProperty);\n            if (entityKeys.indexOf(edmProperty.name) !== -1) {\n                outObject.entityKeys.push(edmProperty);\n            }\n\n            const v2Annotations = convertV2Annotations(\n                entityProperty._attributes as V2annotationsSupport,\n                'Property',\n                entityProperty._attributes.Name\n            );\n            if (v2Annotations.length > 0) {\n                annotationLists.push(createAnnotationList(edmProperty.fullyQualifiedName, v2Annotations));\n            }\n\n            return outObject;\n        },\n        { entityProperties: [], entityKeys: [] }\n    );\n}\n\n/**\n * Parse the referential constraint from the EDMX into an object structure.\n *\n * @param referentialConstraints the EDMX referential constraints\n * @param sourceTypeName the name of the source type\n * @param targetTypeName the name of the target type\n * @returns the object representation of the referential constraint.\n */\nfunction parseReferentialConstraint(\n    referentialConstraints: EDMX.ReferentialConstraint[],\n    sourceTypeName: FullyQualifiedName,\n    targetTypeName: FullyQualifiedName\n): ReferentialConstraint[] {\n    return referentialConstraints.reduce((outArray: ReferentialConstraint[], refCon: EDMX.ReferentialConstraint) => {\n        outArray.push({\n            sourceTypeName: sourceTypeName,\n            sourceProperty: refCon._attributes.Property,\n            targetTypeName: targetTypeName,\n            targetProperty: refCon._attributes.ReferencedProperty\n        });\n        return outArray;\n    }, []);\n}\n\n/**\n * Parse the v2 referential constraint from the EDMX into an object structure.\n *\n * @param referentialConstraints the v2 referential constraint data\n * @param associationEnds the associations of the service to find the involved EntitySets.\n * @returns the object representation of the referential constraint.\n */\nfunction parseV2ReferentialConstraint(\n    referentialConstraints: EDMX.V2ReferentialConstraint[],\n    associationEnds: RawAssociationEnd[]\n) {\n    return referentialConstraints.reduce((outArray: ReferentialConstraint[], refCon) => {\n        let sourceEnd = associationEnds.find((assEnd) => assEnd.role === refCon.Principal._attributes.Role);\n        let targetEnd = associationEnds.find((assEnd) => assEnd.role === refCon.Dependent._attributes.Role);\n        if (sourceEnd !== undefined && targetEnd !== undefined) {\n            let sourceProperties = ensureArray(refCon.Principal.PropertyRef);\n            let targetProperties = ensureArray(refCon.Dependent.PropertyRef);\n            if (sourceEnd.multiplicity !== '1') {\n                targetEnd = sourceEnd;\n                sourceEnd = associationEnds.find(\n                    (assEnd) => assEnd.role === refCon.Dependent._attributes.Role\n                ) as RawAssociationEnd; // We're reversing them so it will exist for sure\n                targetProperties = sourceProperties;\n                sourceProperties = ensureArray(refCon.Dependent.PropertyRef);\n            }\n            for (const sourceProperty of sourceProperties) {\n                const propertyIndex = sourceProperties.indexOf(sourceProperty);\n                outArray.push({\n                    sourceTypeName: sourceEnd.type,\n                    sourceProperty: sourceProperty._attributes.Name,\n                    targetTypeName: targetEnd.type,\n                    targetProperty: targetProperties[propertyIndex]._attributes.Name\n                });\n            }\n        }\n        return outArray;\n    }, []);\n}\n\n/**\n * Parse the EDMX representation of the navigation property in an object structure.\n *\n * @param navigationProperties the navigation property definition\n * @param currentEntityType the current entity type\n * @param entityTypeFQN the name of the current entity type\n * @param annotationLists the list of annotations\n * @returns all the navigation properties from the service\n */\nfunction parseNavigationProperties(\n    navigationProperties: EDMX.NavigationProperty[],\n    currentEntityType: EDMX.EntityType | EDMX.ComplexType,\n    entityTypeFQN: FullyQualifiedName,\n    annotationLists: AnnotationList[]\n): (RawV2NavigationProperty | RawV4NavigationProperty)[] {\n    return navigationProperties.reduce(\n        (outArray: (RawV2NavigationProperty | RawV4NavigationProperty)[], navigationProperty) => {\n            // V4\n            const attributes: EDMX.NavigationPropertyAttributesV4 | EDMX.NavigationPropertyAttributesV2 =\n                navigationProperty._attributes;\n            if (isV4NavProperty(attributes)) {\n                const matches = attributes.Type.match(collectionRegexp);\n                const isCollection = matches !== null;\n                const typeName = unalias(matches ? matches[1] : attributes.Type);\n                outArray.push({\n                    _type: 'NavigationProperty',\n                    name: attributes.Name,\n                    fullyQualifiedName: `${entityTypeFQN}/${attributes.Name}`,\n                    partner: attributes.Partner,\n                    containsTarget: attributes.ContainsTarget === 'true',\n                    isCollection,\n                    targetTypeName: typeName,\n                    referentialConstraint: parseReferentialConstraint(\n                        ensureArray(navigationProperty.ReferentialConstraint),\n                        currentEntityType._attributes.Name,\n                        typeName\n                    )\n                });\n            } else {\n                // V2\n                const { Relationship, ToRole, FromRole } = attributes;\n                outArray.push({\n                    _type: 'NavigationProperty',\n                    name: attributes.Name,\n                    fullyQualifiedName: `${entityTypeFQN}/${attributes.Name}`,\n                    relationship: Relationship,\n                    toRole: ToRole,\n                    fromRole: FromRole\n                });\n                const v2Annotations = convertV2Annotations(\n                    attributes as V2annotationsSupport,\n                    'NavigationProperty',\n                    attributes.Name\n                );\n                if (v2Annotations.length > 0) {\n                    annotationLists.push(createAnnotationList(`${entityTypeFQN}/${attributes.Name}`, v2Annotations));\n                }\n            }\n\n            return outArray;\n        },\n        []\n    );\n}\n\nfunction parseAssociationSets(\n    associations: EDMX.AssociationSet[],\n    namespace: string,\n    entityContainer: EDMX.EntityContainer\n): RawAssociationSet[] {\n    return associations.map((association) => {\n        const associationFQN = `${namespace}.${association._attributes.Name}`;\n        const associationEnd: RawAssociationSetEnd[] = ensureArray(association.End).map(\n            (endValue: EDMX.AssociationSetEnd) => {\n                return {\n                    entitySet: `${namespace}.${entityContainer._attributes.Name}/${endValue._attributes.EntitySet}`,\n                    role: endValue._attributes.Role\n                };\n            }\n        );\n        return {\n            fullyQualifiedName: associationFQN,\n            name: association._attributes.Name,\n            association: association._attributes.Association,\n            associationEnd: associationEnd\n        };\n    });\n}\n\nfunction parseAssociations(associations: EDMX.Association[], namespace: string): RawAssociation[] {\n    return associations.map((association) => {\n        const associationFQN = `${namespace}.${association._attributes.Name}`;\n        const associationEnd: RawAssociationEnd[] = ensureArray(association.End).map(\n            (endValue: EDMX.AssociationEnd) => {\n                return {\n                    type: endValue._attributes.Type,\n                    role: endValue._attributes.Role,\n                    multiplicity: endValue._attributes.Multiplicity\n                };\n            }\n        );\n        return {\n            fullyQualifiedName: associationFQN,\n            name: association._attributes.Name,\n            associationEnd: associationEnd,\n            referentialConstraints: parseV2ReferentialConstraint(\n                ensureArray(association.ReferentialConstraint),\n                associationEnd\n            )\n        };\n    });\n}\n\nfunction parseEntityTypes(\n    entityTypes: EDMX.EntityType[],\n    annotationLists: AnnotationList[],\n    namespace: string\n): RawEntityType[] {\n    return entityTypes.reduce((outArray: RawEntityType[], entityType) => {\n        const entityKeyNames = entityType.Key ? getEntityTypeKeys(ensureArray(entityType.Key.PropertyRef)) : [];\n        const entityTypeFQN = `${namespace}.${entityType._attributes.Name}`;\n        const { entityProperties, entityKeys } = parseProperties(\n            ensureArray(entityType.Property),\n            entityKeyNames,\n            entityTypeFQN,\n            annotationLists\n        );\n        const navigationProperties = parseNavigationProperties(\n            ensureArray(entityType.NavigationProperty),\n            entityType,\n            entityTypeFQN,\n            annotationLists\n        );\n        const outEntityType: RawEntityType = {\n            _type: 'EntityType',\n            name: entityType._attributes.Name,\n            fullyQualifiedName: entityTypeFQN,\n            keys: entityKeys,\n            entityProperties,\n            actions: {},\n            navigationProperties: navigationProperties\n        };\n        const v2Annotations = convertV2Annotations(\n            entityType._attributes as V2annotationsSupport,\n            'EntityType',\n            entityType._attributes.Name\n        );\n        if (v2Annotations.length > 0) {\n            annotationLists.push(createAnnotationList(outEntityType.fullyQualifiedName, v2Annotations));\n        }\n        outArray.push(outEntityType);\n        return outArray;\n    }, []);\n}\n\nfunction parseComplexTypes(\n    complexTypes: EDMX.ComplexType[],\n    annotationLists: AnnotationList[],\n    namespace: string\n): RawComplexType[] {\n    return complexTypes.reduce((outArray: RawComplexType[], complexType) => {\n        const complexTypeFQN = `${namespace}.${complexType._attributes.Name}`;\n        const { entityProperties } = parseProperties(\n            ensureArray(complexType.Property),\n            [],\n            complexTypeFQN,\n            annotationLists\n        );\n        const navigationProperties = parseNavigationProperties(\n            ensureArray(complexType.NavigationProperty),\n            complexType,\n            complexTypeFQN,\n            annotationLists\n        );\n        outArray.push({\n            _type: 'ComplexType',\n            name: complexType._attributes.Name,\n            fullyQualifiedName: complexTypeFQN,\n            properties: entityProperties,\n            navigationProperties\n        });\n        return outArray;\n    }, []);\n}\n\nfunction parseTypeDefinitions(typeDefinitions: EDMX.TypeDefinition[], namespace: string): RawTypeDefinition[] {\n    return typeDefinitions.reduce((outArray: RawTypeDefinition[], typeDefinition) => {\n        const typeDefinitionFQN = `${namespace}.${typeDefinition._attributes.Name}`;\n        outArray.push({\n            _type: 'TypeDefinition',\n            name: typeDefinition._attributes.Name,\n            fullyQualifiedName: typeDefinitionFQN,\n            underlyingType: typeDefinition._attributes.UnderlyingType\n        });\n        return outArray;\n    }, []);\n}\n\nfunction parseEntitySets(\n    entitySets: EDMX.EntitySet[],\n    namespace: string,\n    entityContainerName: string,\n    annotationLists: AnnotationList[]\n): RawEntitySet[] {\n    const outEntitySets: RawEntitySet[] = entitySets.map((entitySet) => {\n        const navigationPropertyBinding = Object.fromEntries(\n            ensureArray(entitySet.NavigationPropertyBinding).map((navPropertyBinding) => {\n                return [\n                    navPropertyBinding._attributes.Path,\n                    `${namespace}.${entityContainerName}/${navPropertyBinding._attributes.Target}`\n                ];\n            })\n        );\n\n        const outEntitySet: RawEntitySet = {\n            _type: 'EntitySet',\n            name: entitySet._attributes.Name,\n            entityTypeName: unalias(entitySet._attributes.EntityType),\n            navigationPropertyBinding,\n            fullyQualifiedName: `${namespace}.${entityContainerName}/${entitySet._attributes.Name}`\n        };\n        const v2Annotations = convertV2Annotations(\n            entitySet._attributes as V2annotationsSupport,\n            'EntitySet',\n            entitySet._attributes.Name\n        );\n        if (v2Annotations.length > 0) {\n            annotationLists.push(createAnnotationList(outEntitySet.fullyQualifiedName, v2Annotations));\n        }\n        return outEntitySet;\n    });\n\n    return outEntitySets;\n}\n\nfunction parseSingletons(\n    singletons: EDMX.Singleton[],\n    namespace: string,\n    entityContainerName: string,\n    annotationLists: AnnotationList[]\n): RawSingleton[] {\n    const outSingletons: RawSingleton[] = singletons.map((singleton) => {\n        const navigationPropertyBinding = Object.fromEntries(\n            ensureArray(singleton.NavigationPropertyBinding).map((navPropertyBinding) => {\n                return [\n                    navPropertyBinding._attributes.Path,\n                    `${namespace}.${entityContainerName}/${navPropertyBinding._attributes.Target}`\n                ];\n            })\n        );\n\n        const outSingleton: RawSingleton = {\n            _type: 'Singleton',\n            name: singleton._attributes.Name,\n            entityTypeName: unalias(singleton._attributes.Type),\n            nullable: singleton._attributes.Nullable !== 'false',\n            navigationPropertyBinding,\n            fullyQualifiedName: `${namespace}.${entityContainerName}/${singleton._attributes.Name}`\n        };\n        const v2Annotations = convertV2Annotations(\n            singleton._attributes as V2annotationsSupport,\n            'Singleton',\n            singleton._attributes.Name\n        );\n        if (v2Annotations.length > 0) {\n            annotationLists.push(createAnnotationList(outSingleton.fullyQualifiedName, v2Annotations));\n        }\n        return outSingleton;\n    });\n\n    return outSingletons;\n}\n\nfunction parseActions(actions: (EDMX.Action | EDMX.Function)[], namespace: string, isFunction: boolean): RawAction[] {\n    return actions.map((action) => {\n        const parameters = ensureArray(action.Parameter);\n        const isBound = action._attributes.IsBound === 'true';\n\n        let overload: string;\n        if (isFunction) {\n            // function\n            // https://docs.oasis-open.org/odata/odata-csdl-xml/v4.01/odata-csdl-xml-v4.01.html#sec_FunctionOverloads\n            // Unbound: \"The combination of function name and ordered set of parameter types MUST be unique within a schema.\"\n            // Bound:   \"The combination of function name, binding parameter type, and ordered set of parameter types MUST be unique within a schema.\"\n            //  ==> consider all parameters for the FQN\n            overload = parameters.map((parameter) => unaliasType(parameter._attributes.Type).type).join(',');\n        } else {\n            // action\n            overload = isBound ? unaliasType(parameters[0]._attributes.Type).type : ''; // '' = the unbound overload\n        }\n\n        const fullyQualifiedName: FullyQualifiedName = `${namespace}.${action._attributes.Name}(${overload})`;\n        return {\n            _type: 'Action',\n            name: action._attributes.Name,\n            isBound: isBound,\n            sourceType: isBound ? unaliasType(parameters[0]._attributes.Type).type : '',\n            fullyQualifiedName: fullyQualifiedName,\n            isFunction: isFunction,\n            parameters: parameters.map((param) => {\n                const { isCollection, type } = unaliasType(param._attributes.Type);\n\n                const edmActionParameter: RawActionParameter = {\n                    _type: 'ActionParameter',\n                    fullyQualifiedName: `${fullyQualifiedName}/${param._attributes.Name}`,\n                    name: `${param._attributes.Name}`,\n                    type,\n                    isCollection\n                };\n                if (param._attributes.MaxLength) {\n                    edmActionParameter.maxLength = parseInt(param._attributes.MaxLength, 10);\n                }\n                if (param._attributes.Precision) {\n                    edmActionParameter.precision = parseInt(param._attributes.Precision, 10);\n                }\n                if (param._attributes.Scale) {\n                    edmActionParameter.scale = parseInt(param._attributes.Scale, 10);\n                }\n                if (param._attributes.Nullable) {\n                    edmActionParameter.nullable = param._attributes.Nullable !== 'false';\n                }\n                return edmActionParameter;\n            }),\n            returnType: action.ReturnType ? unaliasType(action.ReturnType._attributes.Type).type : ''\n        };\n    });\n}\n\nfunction parseV2FunctionImport(\n    actions: EDMX.FunctionImportV2[],\n    entitySets: RawEntitySet[],\n    namespace: string\n): RawAction[] {\n    return actions.map((action) => {\n        const targetEntitySet = entitySets.find((et) => et.name === action._attributes.EntitySet);\n        const actionFQN: string = `${namespace}/${action._attributes.Name}`;\n        return {\n            _type: 'Action',\n            name: action._attributes.Name,\n            isBound: false,\n            sourceType: targetEntitySet ? targetEntitySet.entityTypeName : '',\n            fullyQualifiedName: actionFQN,\n            isFunction: false,\n            parameters: ensureArray(action.Parameter).map((param) => {\n                return {\n                    _type: 'ActionParameter',\n                    name: param._attributes.Name,\n                    fullyQualifiedName: `${actionFQN}/${param._attributes.Name}`,\n                    type: param._attributes.Type,\n                    isCollection: param._attributes.Type.match(/^Collection\\(.+\\)$/) !== null\n                };\n            }),\n            returnType: action._attributes.ReturnType ? action._attributes.ReturnType : ''\n        };\n    });\n}\n\nfunction parseActionImports(\n    imports: (EDMX.FunctionImport | EDMX.ActionImport)[],\n    namespace: string\n): RawActionImport[] {\n    return imports.map((actionOrFunctionImport) => {\n        const action =\n            (actionOrFunctionImport as EDMX.FunctionImport)._attributes.Function ??\n            (actionOrFunctionImport as EDMX.ActionImport)._attributes.Action;\n\n        return {\n            _type: 'ActionImport',\n            name: unalias(actionOrFunctionImport._attributes.Name),\n            fullyQualifiedName: `${namespace}/${actionOrFunctionImport._attributes.Name}`,\n            actionName: unalias(action)\n        };\n    });\n}\n\nfunction parsePropertyValues(\n    propertyValues: EDMX.PropertyValue[],\n    currentTarget: string,\n    annotationsLists: AnnotationList[]\n): PropertyValue[] {\n    return propertyValues.map((propertyValue) => {\n        // I don't care about the first part but need the rest and the spread operator\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { Annotation, _attributes, ...properties } = propertyValue;\n        const outPropertyValue: Partial<PropertyValue> = {};\n        if (_attributes) {\n            const attributeKey: keyof EDMX.InlineExpression | undefined = Object.keys(_attributes).find(\n                (keyName) => keyName !== 'Property'\n            ) as keyof EDMX.InlineExpression | undefined;\n            outPropertyValue.name = _attributes.Property;\n            const currentPropertyTarget = `${currentTarget}/${outPropertyValue.name}`;\n            if (properties && Object.keys(properties).length > 0) {\n                outPropertyValue.value = parseExpression(properties, currentPropertyTarget, annotationsLists);\n            } else if (attributeKey) {\n                outPropertyValue.value = parseInlineExpression(\n                    { [attributeKey]: _attributes[attributeKey] },\n                    currentPropertyTarget,\n                    annotationsLists\n                );\n            }\n            if (propertyValue.Annotation) {\n                const propertyAnnotations = parseAnnotations(\n                    ensureArray(propertyValue.Annotation),\n                    currentPropertyTarget,\n                    annotationsLists\n                );\n                if (propertyAnnotations && propertyAnnotations.length > 0) {\n                    annotationsLists.push(createAnnotationList(currentPropertyTarget, propertyAnnotations));\n                }\n            }\n        }\n        return outPropertyValue as PropertyValue;\n    });\n}\n\nfunction parseRecord(\n    record: EDMX.RecordExpression,\n    currentTarget: string,\n    annotationsLists: AnnotationList[]\n): AnnotationRecord {\n    const recordAnnotations = parseAnnotations(ensureArray(record.Annotation), currentTarget, annotationsLists);\n    const outRecord: AnnotationRecord = {\n        type: record._attributes ? unalias(record._attributes.Type) : undefined,\n        propertyValues: parsePropertyValues(ensureArray(record.PropertyValue), currentTarget, annotationsLists)\n    };\n    if (recordAnnotations && recordAnnotations.length > 0) {\n        outRecord.annotations = recordAnnotations;\n    }\n    return outRecord;\n}\n\n/**\n * Type Guard for the type of the current collection.\n *\n * @param annotation\n * @param propertyNameToCheck\n * @returns true if the collection if of the right type\n */\nfunction isExpressionOfType<K>(annotation: any, propertyNameToCheck: string): annotation is K {\n    return annotation[propertyNameToCheck] != null;\n}\n\nfunction parseModelPath(\n    propertyPath: EDMX.ModelPath,\n    modelPathType: 'AnnotationPath' | 'PropertyPath' | 'NavigationPropertyPath' | 'Path'\n): PropertyPathExpression | NavigationPropertyPathExpression | AnnotationPathExpression | PathExpression {\n    switch (modelPathType) {\n        case 'NavigationPropertyPath':\n            return { type: 'NavigationPropertyPath', NavigationPropertyPath: propertyPath._text };\n        case 'PropertyPath':\n            return { type: 'PropertyPath', PropertyPath: propertyPath._text };\n        case 'AnnotationPath':\n            return { type: 'AnnotationPath', AnnotationPath: propertyPath._text };\n        case 'Path':\n            return { type: 'Path', Path: propertyPath._text };\n    }\n}\n\nfunction parseCollection(\n    collection: EDMX.CollectionExpression,\n    currentTarget: string,\n    annotationsLists: AnnotationList[]\n):\n    | AnnotationRecord[]\n    | string[]\n    | PropertyPathExpression[]\n    | PathExpression[]\n    | AnnotationPathExpression[]\n    | NavigationPropertyPathExpression[] {\n    if (isExpressionOfType<EDMX.RecordCollectionWrapper>(collection, 'Record')) {\n        const recordArray = ensureArray(collection.Record).map((record, recordIndex) =>\n            parseRecord(record, currentTarget + '/' + recordIndex, annotationsLists)\n        );\n        (recordArray as any).type = 'Record';\n        return recordArray;\n    } else if (isExpressionOfType<EDMX.PropertyPathCollectionWrapper>(collection, 'PropertyPath')) {\n        const propertyPathArray = ensureArray(collection.PropertyPath).map(\n            (propertyPath) => parseModelPath(propertyPath, 'PropertyPath') as PropertyPathExpression\n        );\n        (propertyPathArray as any).type = 'PropertyPath';\n        return propertyPathArray;\n    } else if (isExpressionOfType<EDMX.NavigationPropertyPathCollectionWrapper>(collection, 'NavigationPropertyPath')) {\n        const navPropertyPathArray = ensureArray(collection.NavigationPropertyPath).map(\n            (navPropertyPath) =>\n                parseModelPath(navPropertyPath, 'NavigationPropertyPath') as NavigationPropertyPathExpression\n        );\n        (navPropertyPathArray as any).type = 'NavigationPropertyPath';\n        return navPropertyPathArray;\n    } else if (isExpressionOfType<EDMX.StringCollectionWrapper>(collection, 'String')) {\n        const stringArray = ensureArray(collection.String).map((stringValue) => stringValue._text);\n        (stringArray as any).type = 'String';\n        return stringArray;\n    } else if (isExpressionOfType<EDMX.AnnotationPathCollectionWrapper>(collection, 'AnnotationPath')) {\n        const annotationPathArray = ensureArray(collection.AnnotationPath).map(\n            (annotationPath) => parseModelPath(annotationPath, 'AnnotationPath') as AnnotationPathExpression\n        );\n        (annotationPathArray as any).type = 'AnnotationPath';\n        return annotationPathArray;\n    } else if (isExpressionOfType<EDMX.PathCollectionWrapper>(collection, 'Path')) {\n        const pathArray = ensureArray(collection.Path).map(\n            (pathDefinition) => parseModelPath(pathDefinition, 'Path') as PathExpression\n        );\n        (pathArray as any).type = 'Path';\n        return pathArray;\n    } else if (isExpressionOfType<EDMX.IfCollectionWrapper>(collection, 'If')) {\n        const stringArray = ensureArray(collection.If).map((stringValue) => stringValue._text);\n        (stringArray as any).type = 'String';\n        return stringArray;\n    } else if (Object.keys(collection).length === 0) {\n        return [];\n    } else {\n        console.error(`Cannot parse ${JSON.stringify(collection)}, collection type is not supported`);\n    }\n    return [];\n}\n\nfunction parseApply(applyExpression: EDMX.ApplyExpression): Apply {\n    return applyExpression;\n}\n\nfunction parseInlineExpression(\n    expression: EDMX.InlineExpression,\n    currentTarget: string,\n    annotationsLists: AnnotationList[]\n): Expression {\n    const expressionKeys = Object.keys(expression);\n    if (expressionKeys.length > 1) {\n        throw new Error(`Too many expressions defined on a single object ${JSON.stringify(expression)}`);\n    }\n    const expressionKey = expressionKeys[0];\n    switch (expressionKey) {\n        case 'String':\n            return {\n                type: 'String',\n                String: expression[expressionKey] as string\n            };\n        case 'Bool':\n            return {\n                type: 'Bool',\n                Bool: expression.Bool === 'true'\n            };\n        case 'Decimal':\n            return {\n                type: 'Decimal',\n                Decimal: parseFloat(expression.Decimal as string)\n            };\n        case 'Date':\n            return {\n                type: 'Date',\n                Date: expression.Date as string\n            };\n        case 'Int':\n            return {\n                type: 'Int',\n                Int: parseInt(expression.Int as string, 10)\n            };\n        case 'Float':\n            return {\n                type: 'Float',\n                Float: parseFloat(expression.Float as unknown as string)\n            };\n        case 'Path':\n            return {\n                type: 'Path',\n                Path: expression.Path as string\n            };\n        case 'PropertyPath':\n            return {\n                type: 'PropertyPath',\n                PropertyPath: expression.PropertyPath as string\n            };\n        case 'AnnotationPath':\n            return {\n                type: 'AnnotationPath',\n                AnnotationPath: expression.AnnotationPath as string\n            };\n        case 'NavigationPropertyPath':\n            return {\n                type: 'NavigationPropertyPath',\n                NavigationPropertyPath: expression.NavigationPropertyPath as string\n            };\n        case 'EnumMember':\n            return {\n                type: 'EnumMember',\n                EnumMember: expression[expressionKey] as string\n            };\n        case 'Collection':\n            return {\n                type: 'Collection',\n                Collection: parseCollection(\n                    expression.Collection as EDMX.CollectionExpression,\n                    currentTarget,\n                    annotationsLists\n                )\n            };\n        case 'Record':\n            return {\n                type: 'Record',\n                Record: parseRecord(expression.Record as EDMX.RecordExpression, currentTarget, annotationsLists)\n            };\n        case 'Apply':\n            return {\n                type: 'Apply',\n                Apply: parseApply(expression.Apply)\n            };\n        case 'Null':\n            return {\n                type: 'Null'\n            };\n        default:\n            console.error('Unsupported inline expression type ' + expressionKey);\n            return {\n                type: 'Unknown'\n            };\n    }\n}\n\nfunction parseExpression(\n    expression: EDMX.Expression<{}>,\n    currentTarget: string,\n    annotationsLists: AnnotationList[]\n): Expression {\n    const expressionKeys = Object.keys(expression);\n    if (expressionKeys.length > 1) {\n        throw new Error(`Too many expressions defined on a single object ${JSON.stringify(expression)}`);\n    }\n    const expressionKey = expressionKeys[0];\n    switch (expressionKey) {\n        case 'String':\n            return {\n                type: 'String',\n                String: (expression[expressionKey] as any)._text as string\n            };\n        case 'Bool':\n            return {\n                type: 'Bool',\n                Bool: (expression.Bool as any)._text === 'true'\n            };\n        case 'Int':\n            return {\n                type: 'Int',\n                Int: parseInt((expression.Int as any)._text as string, 10)\n            };\n        case 'Decimal':\n            return {\n                type: 'Decimal',\n                Decimal: parseFloat((expression.Decimal as any)._text as string)\n            };\n        case 'Path':\n            return {\n                type: 'Path',\n                Path: (expression.Path as EDMX.InstancePath)._text\n            };\n        case 'PropertyPath':\n            return {\n                type: 'PropertyPath',\n                PropertyPath: (expression.PropertyPath as EDMX.ModelPath)._text\n            };\n        case 'NavigationPropertyPath':\n            return {\n                type: 'NavigationPropertyPath',\n                NavigationPropertyPath: (expression.NavigationPropertyPath as EDMX.ModelPath)._text\n            };\n        case 'AnnotationPath':\n            return {\n                type: 'AnnotationPath',\n                AnnotationPath: (expression.AnnotationPath as EDMX.ModelPath)._text\n            };\n        case 'EnumMember':\n            return {\n                type: 'EnumMember',\n                EnumMember: (expression[expressionKey] as any)._text as string\n            };\n        case 'Collection':\n            return {\n                type: 'Collection',\n                Collection: parseCollection(\n                    expression.Collection as EDMX.CollectionExpression,\n                    currentTarget,\n                    annotationsLists\n                )\n            };\n        case 'Record':\n            return {\n                type: 'Record',\n                Record: parseRecord(expression.Record as EDMX.RecordExpression, currentTarget, annotationsLists)\n            };\n        case 'Apply':\n            return {\n                type: 'Apply',\n                Apply: parseApply(expression.Apply)\n            };\n        case 'Null':\n            return {\n                type: 'Null'\n            };\n        default:\n            console.error('Unsupported expression type ' + expressionKey);\n            return {\n                type: 'Unknown'\n            };\n    }\n}\n\nfunction parseAnnotation(\n    annotation: EDMX.Annotation,\n    currentTarget: string,\n    annotationsLists: AnnotationList[]\n): RawAnnotation {\n    const { Term, Qualifier, ...others } = annotation._attributes;\n    const outAnnotation: Partial<RawAnnotation> = {\n        term: unalias(Term),\n        qualifier: Qualifier\n    };\n    let currentAnnotationTarget = `${currentTarget}@${unalias(Term)}`;\n    if (Qualifier !== '' && Qualifier !== undefined) {\n        currentAnnotationTarget += `#${Qualifier}`;\n    }\n    if (others && Object.keys(others).length > 0) {\n        outAnnotation.value = parseInlineExpression(others, currentAnnotationTarget, annotationsLists);\n    }\n    if (annotation.Annotation) {\n        const annotationAnnotations = parseAnnotations(\n            ensureArray(annotation.Annotation),\n            currentAnnotationTarget,\n            annotationsLists\n        );\n        if (annotationAnnotations && annotationAnnotations.length > 0) {\n            outAnnotation.annotations = annotationAnnotations;\n        }\n    }\n    const keys = Object.keys(annotation).filter((keyValue) => keyValue !== '_attributes' && keyValue !== 'Annotation');\n    if (isExpressionOfType<EDMX.RecordWrapper>(annotation, 'Record')) {\n        outAnnotation.record = parseRecord(annotation.Record, currentAnnotationTarget, annotationsLists);\n    } else if (isExpressionOfType<EDMX.CollectionWrapper>(annotation, 'Collection')) {\n        outAnnotation.collection = parseCollection(annotation.Collection, currentAnnotationTarget, annotationsLists);\n    } else if (keys.length === 1) {\n        outAnnotation.value = parseExpression(\n            { [keys[0]]: (annotation as any)[keys[0]] },\n            currentAnnotationTarget,\n            annotationsLists\n        );\n    } else if (keys.length > 1) {\n        console.error(`Cannot parse ${JSON.stringify(annotation)}, expression type is not supported`);\n    }\n\n    return outAnnotation as RawAnnotation;\n}\n\nfunction parseAnnotations(\n    annotations: EDMX.Annotation[],\n    currentTarget: string,\n    annotationsLists: AnnotationList[]\n): RawAnnotation[] {\n    return annotations.map((annotation) => parseAnnotation(annotation, currentTarget, annotationsLists));\n}\n\nfunction createAnnotationList(target: string, annotations: RawAnnotation[]): AnnotationList {\n    return {\n        target: target,\n        annotations: annotations\n    };\n}\n\n/**\n * @param annotationLists\n * @param annotationsLists\n */\nfunction parseAnnotationLists(annotationLists: EDMX.AnnotationList[], annotationsLists: AnnotationList[]): void {\n    annotationLists\n        .filter((annotationList) => annotationList._attributes !== undefined)\n        .forEach((annotationList) => {\n            annotationsLists.push(\n                createAnnotationList(\n                    unalias(annotationList._attributes.Target),\n                    parseAnnotations(\n                        ensureArray(annotationList.Annotation),\n                        annotationList._attributes.Target,\n                        annotationsLists\n                    )\n                )\n            );\n        });\n}\n\nfunction parseSchema(edmSchema: EDMX.Schema, edmVersion: string, identification: string): RawSchema {\n    const namespace = edmSchema._attributes.Namespace;\n    const annotations: AnnotationList[] = [];\n    const entityTypes = parseEntityTypes(ensureArray(edmSchema.EntityType), annotations, namespace);\n    const complexTypes = parseComplexTypes(ensureArray(edmSchema.ComplexType), annotations, namespace);\n    const typeDefinitions = parseTypeDefinitions(ensureArray(edmSchema.TypeDefinition), namespace);\n    let entitySets: RawEntitySet[] = [];\n    let singletons: RawSingleton[] = [];\n    let associationSets: RawAssociationSet[] = [];\n    let entityContainer: RawEntityContainer = {\n        _type: 'EntityContainer',\n        fullyQualifiedName: ''\n    };\n    let actions: RawAction[] = [];\n    let actionImports: RawActionImport[] = [];\n\n    if (edmSchema.EntityContainer) {\n        entitySets = parseEntitySets(\n            ensureArray(edmSchema.EntityContainer.EntitySet),\n            namespace,\n            edmSchema.EntityContainer._attributes.Name,\n            annotations\n        );\n        singletons = parseSingletons(\n            ensureArray(edmSchema.EntityContainer.Singleton),\n            namespace,\n            edmSchema.EntityContainer._attributes.Name,\n            annotations\n        );\n\n        associationSets = parseAssociationSets(\n            ensureArray(edmSchema.EntityContainer.AssociationSet),\n            namespace,\n            edmSchema.EntityContainer\n        );\n        entityContainer = {\n            _type: 'EntityContainer',\n            name: edmSchema.EntityContainer._attributes.Name,\n            fullyQualifiedName: `${namespace}.${edmSchema.EntityContainer._attributes.Name}`\n        };\n\n        if (edmVersion === '1.0') {\n            actions = actions.concat(\n                parseV2FunctionImport(\n                    ensureArray(edmSchema.EntityContainer.FunctionImport) as EDMX.FunctionImportV2[],\n                    entitySets,\n                    entityContainer.fullyQualifiedName\n                )\n            );\n        } else if (edmVersion === '4.0') {\n            // FunctionImports\n            actionImports = actionImports.concat(\n                parseActionImports(\n                    ensureArray(edmSchema.EntityContainer.FunctionImport) as EDMX.FunctionImport[],\n                    entityContainer.fullyQualifiedName\n                )\n            );\n\n            // ActionImports\n            actionImports = actionImports.concat(\n                parseActionImports(\n                    ensureArray(edmSchema.EntityContainer.ActionImport),\n                    entityContainer.fullyQualifiedName\n                )\n            );\n        } else {\n            throw new Error(`Unsupported EDMX version: ${edmVersion}`);\n        }\n    }\n    if (edmVersion === '4.0') {\n        actions = actions.concat(parseActions(ensureArray(edmSchema.Action), namespace, false));\n        actions = actions.concat(parseActions(ensureArray(edmSchema.Function), namespace, true));\n    }\n    const associations = parseAssociations(ensureArray(edmSchema.Association), namespace);\n\n    parseAnnotationLists(ensureArray(edmSchema.Annotations), annotations);\n    const annotationMap: { [id: string]: AnnotationList[] } = {};\n    annotationMap[identification] = annotations;\n    return {\n        associations,\n        associationSets,\n        annotations: annotationMap,\n        entityContainer,\n        namespace: namespace,\n        entitySets,\n        singletons,\n        complexTypes,\n        typeDefinitions,\n        actions,\n        actionImports,\n        entityTypes\n    };\n}\n\nfunction parseReferences(references: EDMX.Reference[]): Reference[] {\n    return references.reduce((referencesArray: Reference[], reference: EDMX.Reference) => {\n        const includes = ensureArray(reference['edmx:Include']);\n        includes.forEach((include: EDMX.ReferenceInclude) => {\n            referencesArray.push({\n                uri: reference._attributes.Uri,\n                alias: include._attributes.Alias,\n                namespace: include._attributes.Namespace\n            });\n        });\n        return referencesArray;\n    }, []);\n}\n\nlet aliases: Record<string, string> = {};\n\nfunction unaliasType(type: string) {\n    const collection = type.match(collectionRegexp);\n    const _type = collection ? collection[1] : type;\n    const unaliasedType = unalias(_type);\n    return {\n        type: collection ? `Collection(${unaliasedType})` : unaliasedType,\n        isCollection: collection !== null\n    };\n}\n\nfunction unalias(aliasedValue: string): string;\nfunction unalias(aliasedValue: undefined): undefined;\nfunction unalias(aliasedValue: string | undefined): string | undefined {\n    if (!aliasedValue) {\n        return aliasedValue;\n    }\n\n    const separators = ['@', '/', '('];\n    const unaliased: string[] = [];\n    let start = 0;\n    for (let end = 0, maybeAlias = true; end < aliasedValue.length; end++) {\n        const char = aliasedValue[end];\n        if (maybeAlias && char === '.') {\n            const alias = aliasedValue.substring(start, end);\n            unaliased.push(aliases[alias] ?? alias);\n            start = end;\n            maybeAlias = false;\n        }\n        if (separators.includes(char)) {\n            unaliased.push(aliasedValue.substring(start, end + 1));\n            start = end + 1;\n            maybeAlias = true;\n        }\n    }\n    unaliased.push(aliasedValue.substring(start));\n\n    return unaliased.join('');\n}\n\nfunction mergeSchemas(schemas: RawSchema[]): RawSchema {\n    const associations = schemas.reduce((associationsToReduce: RawAssociation[], schema) => {\n        return associationsToReduce.concat(schema.associations);\n    }, []);\n    const associationSets = schemas.reduce((associationSetsToReduce: RawAssociationSet[], schema) => {\n        return associationSetsToReduce.concat(schema.associationSets);\n    }, []);\n    const entitySets = schemas.reduce((entitySetsToReduce: RawEntitySet[], schema) => {\n        return entitySetsToReduce.concat(schema.entitySets);\n    }, []);\n    const singletons = schemas.reduce((singletonsToReduce: RawSingleton[], schema) => {\n        return singletonsToReduce.concat(schema.singletons);\n    }, []);\n    const entityTypes = schemas.reduce((entityTypesToReduce: RawEntityType[], schema) => {\n        return entityTypesToReduce.concat(schema.entityTypes);\n    }, []);\n    const actions = schemas.reduce((actionsToReduce: RawAction[], schema) => {\n        return actionsToReduce.concat(schema.actions);\n    }, []);\n    const actionImports = schemas.reduce((actionImportsToReduce: RawActionImport[], schema) => {\n        return actionImportsToReduce.concat(schema.actionImports);\n    }, []);\n    const complexTypes = schemas.reduce((complexTypesToReduces: RawComplexType[], schema) => {\n        return complexTypesToReduces.concat(schema.complexTypes);\n    }, []);\n    const typeDefinitions = schemas.reduce((typeDefinitionsToReduce: RawTypeDefinition[], schema) => {\n        return typeDefinitionsToReduce.concat(schema.typeDefinitions);\n    }, []);\n    let annotationMap = {};\n    schemas.forEach((schema) => {\n        annotationMap = Object.assign(annotationMap, schema.annotations);\n    });\n    let entityContainer!: RawEntityContainer;\n    let namespace!: string;\n    schemas.forEach((schema) => {\n        if (schema.entityContainer && Object.keys(schema.entityContainer).length > 0) {\n            entityContainer = schema.entityContainer;\n            namespace = schema.namespace;\n        }\n    });\n\n    // V2 case\n    entitySets.forEach((entitySet) => {\n        const entityType = entityTypes.find(\n            (rawEntityType) => rawEntityType.fullyQualifiedName === entitySet.entityTypeName\n        );\n        entityType?.navigationProperties.forEach((navProp) => {\n            const v2NavProp: RawV2NavigationProperty = navProp as RawV2NavigationProperty;\n            const associationSet = associationSets.find((assoc) => assoc.association === v2NavProp.relationship);\n            if (associationSet) {\n                const targetEntitySet = associationSet.associationEnd.find(\n                    (associationEnd) => associationEnd.entitySet !== entitySet.fullyQualifiedName\n                );\n\n                if (targetEntitySet) {\n                    entitySet.navigationPropertyBinding[navProp.name] = targetEntitySet.entitySet;\n                }\n            }\n        });\n    });\n    entityTypes.forEach((entityType) => {\n        entityType.navigationProperties.forEach((navProp: any) => {\n            const v2NavProp: RawV2NavigationProperty = navProp as RawV2NavigationProperty;\n            const association = associations.find((assoc) => assoc.fullyQualifiedName === v2NavProp.relationship);\n            if (association && association.referentialConstraints && association.referentialConstraints.length > 0) {\n                if (association.referentialConstraints[0].sourceTypeName === entityType.fullyQualifiedName) {\n                    v2NavProp.referentialConstraint = association.referentialConstraints;\n                } else {\n                    v2NavProp.referentialConstraint = association.referentialConstraints.map((refConstraint) => {\n                        return {\n                            sourceTypeName: refConstraint.targetTypeName,\n                            sourceProperty: refConstraint.targetProperty,\n                            targetTypeName: refConstraint.sourceTypeName,\n                            targetProperty: refConstraint.sourceProperty\n                        };\n                    });\n                }\n            }\n        });\n    });\n    return {\n        associations,\n        associationSets,\n        annotations: annotationMap,\n        entityContainer,\n        namespace: namespace,\n        entitySets,\n        singletons,\n        complexTypes,\n        typeDefinitions,\n        actions,\n        actionImports,\n        entityTypes\n    };\n}\n\nfunction createAliasMap(references: Reference[], schemas: EDMX.Schema[]) {\n    aliases = references.reduce((map, reference) => {\n        map[reference.alias] = reference.namespace;\n        return map;\n    }, {} as Record<string, string>);\n\n    schemas\n        .filter((schema) => schema._attributes.Alias)\n        .forEach((schema) => {\n            aliases[schema._attributes.Alias] = schema._attributes.Namespace;\n        });\n}\n\n/**\n * Parse an edmx file and return an object structure representing the service definition.\n *\n * @param xml {string} the original XML string\n * @param fileIdentification {string} a way to identify this file\n * @returns the parsed metadata definition\n */\nexport function parse(xml: string, fileIdentification: string = 'serviceFile'): RawMetadata {\n    const jsonObj: EDMX.Edmx = xml2js(xml, { compact: true }) as EDMX.Edmx;\n\n    const version = jsonObj['edmx:Edmx']._attributes.Version;\n    const schemas: EDMX.Schema[] = ensureArray(jsonObj['edmx:Edmx']['edmx:DataServices'].Schema);\n    const references = parseReferences(ensureArray(jsonObj['edmx:Edmx']['edmx:Reference']));\n\n    createAliasMap(references, schemas);\n\n    const parsedSchemas = schemas.map((schema) => {\n        return parseSchema(schema, version, fileIdentification);\n    });\n    const edmxDocument: RawMetadata = new RawMetadataInstance(\n        fileIdentification,\n        version,\n        mergeSchemas(parsedSchemas),\n        references\n    );\n\n    return edmxDocument;\n}\n", "export { merge } from './merger';\nexport { parse } from './parser';\n", "/**\n * @module @ui5/flexibility-utils/src/changeUtils\n */\n\nlet iIdCounter = 0;\nconst CHANGE_UTILS_PREFIX = \"changeUtils: \";\n\nfunction uid() {\n\treturn \"id-\" + new Date().valueOf() + \"-\" + iIdCounter++;\n}\n\nfunction appendComponentToReference(sComponentName) {\n\tif (sComponentName && sComponentName.indexOf(\".Component\") < 0) {\n\t\tsComponentName += \".Component\";\n\t}\n\treturn sComponentName;\n}\n\nfunction getFlexReference(manifest) {\n\tconst oSapUi5Entry = manifest[\"sap.ui5\"];\n\tif (oSapUi5Entry) {\n\t\tif (oSapUi5Entry.appVariantId) {\n\t\t\treturn oSapUi5Entry.appVariantId;\n\t\t}\n\n\t\tif (oSapUi5Entry.componentName) {\n\t\t\treturn appendComponentToReference(oSapUi5Entry.componentName);\n\t\t}\n\t}\n\n\tconst sapApp = manifest[\"sap.app\"];\n\tif (!sapApp || !sapApp.id) {\n\t\tthrow Error(\"app ID could not be determined\");\n\t}\n\treturn sapApp.id;\n}\n\nfunction getAppVersion(manifest) {\n\tconst sapApp = manifest[\"sap.app\"];\n\tif (!sapApp || !sapApp.applicationVersion || !sapApp.applicationVersion.version) {\n\t\tthrow Error(\"app version could not be determined\");\n\t}\n\treturn sapApp.applicationVersion.version;\n}\n\nfunction getProjectId(manifest, reference) {\n\tif (\n\t\tmanifest &&\n\t\tmanifest[\"sap.app\"] &&\n\t\tmanifest[\"sap.app\"].sourceTemplate &&\n\t\t[\"ui5template.smartTemplate\", \"ui5template.smarttemplate\"].includes(manifest[\"sap.app\"].sourceTemplate.id)\n\t) {\n\t\treturn reference;\n\t}\n\n\treturn \"\";\n}\n\nfunction createString(propertyBag) {\n\treturn JSON.stringify({\n\t\tfileName: propertyBag.id || uid().replace(/-/g, \"_\") + \"_\" + propertyBag.type,\n\t\tfileType: \"change\",\n\t\tchangeType: propertyBag.type,\n\t\tmoduleName: \"\",\n\t\treference: propertyBag.reference,\n\t\tpackageName: \"\",\n\t\tcontent: propertyBag.content || {},\n\t\tselector: {\n\t\t\tid: propertyBag.controlId,\n\t\t\tidIsLocal: false,\n\t\t\ttype: propertyBag.controlType\n\t\t},\n\t\tlayer: propertyBag.isCustomer ? \"CUSTOMER_BASE\" : \"VENDOR\",\n\t\ttexts: {},\n\t\tnamespace: \"apps/\" + propertyBag.reference.replace(\".Component\", \"\") + \"/changes/\",\n\t\tprojectId: propertyBag.projectId,\n\t\tcreation: propertyBag.creation || new Date().valueOf(),\n\t\toriginalLanguage: \"\",\n\t\tsupport: {\n\t\t\tgenerator: CHANGE_UTILS_PREFIX + propertyBag.creatingTool,\n\t\t\tservice: \"\",\n\t\t\tuser: \"\",\n\t\t\tsapui5Version: propertyBag.sapui5Version,\n\t\t\tsourceChangeFileName: \"\",\n\t\t\tcompositeCommand: \"\"\n\t\t},\n\t\toDataInformation: {},\n\t\tdependentSelector: {},\n\t\tvalidAppVersions: {\n\t\t\tfrom: propertyBag.appVersion,\n\t\t\tto: propertyBag.appVersion,\n\t\t\tcreation: propertyBag.appVersion\n\n\t\t},\n\t\tjsOnly: false,\n\t\tvariantReference: \"\",\n\t\tappDescriptorChange: false\n\t});\n}\n\n/**\n * Object containing information for a change update.\n *\n * @typedef {object} \tChangeDefinition\n * @property {string}\tcontrolId - ID of the control containing all prefixes excluding the application ID prefix\n * @property {string}\ttype - Change type, i.e. <code>propertyChange</code>\n * @property {Object}\tcontent - Content of the change needed by the corresponding change handler\n * @property {boolean}\tisCustomer - Flag indicating whether the project is related to a customer project\n * @property {string}\tsapui5Version - SAPUI5 version for which the change is created\n * @property {string}\tcreatingTool - Name of the tool calling this function for support reasons\n * @property {string}\tid - UID of the change;\n * \t\t\t\t\t\t\tDefined on the first <code>toString</code> function call via the <code>manifest</code>\n * @property {string}\treference - Reference to the application;\n * \t\t\t\t\t\t\tDefined on the first <code>toString</code> function call via the <code>manifest</code>\n * @property {string}\tappVersion - Version of the application;\n *\t\t \t\t\t\t\tDefined on the first <code>toString</code> function call via the <code>manifest</code>\n * @property {string}\tcreation - String with the creation timestamp;\n * \t\t\t\t\t\t\tDefined on the first <code>toString</code> function call via the <code>manifest</code>\n */\n\n/**\n * Object containing information for a change creation.\n *\n * @typedef {object} \tChangeDefinitionInCreation\n * @property {string}  \tcontrolId - ID of the control containing all prefixes excluding the application ID prefix\n * @property {string}  \ttype - Change type, i.e. <code>propertyChange</code>\n * @property {Object}  \t[content] - Content of the change needed by the corresponding change handler\n * @property {boolean} \tisCustomer - Flag indicating whether the project is related to a customer project\n * @property {string}  \t[sapui5Version] - SAPUI5 version for which the change is created\n * @property {string}  \tcreatingTool - Name of the tool calling this function (this is needed for support reasons)\n */\n\nmodule.exports = {\n\t/**\n\t * Parses a string of a change file into a change definition;\n\t * The parsed entities <code>id</code>, <code>reference</code>, <code>appVersion</code>, <code>creation</code>\n\t * must not be changed between <code>toString</code> operations.\n\t *\n\t * @param {string} changeString - Stringified change object stored in the workspace\n\t * @returns {ChangeDefinition}\n\t */\n\tparse: function(changeString) {\n\t\tconst change = JSON.parse(changeString);\n\n\t\tif (\n\t\t\t!change.fileName ||\n\t\t\t!change.changeType ||\n\t\t\t!change.selector ||\n\t\t\t!change.reference ||\n\t\t\t!change.creation ||\n\t\t\t!change.content ||\n\t\t\t!change.layer ||\n\t\t\t!change.support\n\t\t) {\n\t\t\tthrow Error(\"Parsed object does not contain all required parameters\");\n\t\t}\n\n\t\treturn {\n\t\t\tid: change.fileName,\n\t\t\treference: change.reference,\n\t\t\tappVersion: change.validAppVersions ? change.validAppVersions.creation : \"\",\n\t\t\tcreation: change.creation,\n\t\t\tprojectId: change.projectId,\n\t\t\ttype: change.changeType,\n\t\t\tcontrolId: change.selector.id,\n\t\t\tcontrolType: change.selector.type,\n\t\t\tisCustomer: change.layer === \"CUSTOMER_BASE\",\n\t\t\tcreatingTool: change.support.generator.replace(CHANGE_UTILS_PREFIX, \"\"),\n\t\t\tcontent: change.content,\n\t\t\tsapui5Version: change.support.sapui5Version\n\t\t};\n\t},\n\n\t/**\n\t * Generates a string of a change to write it as a file into the workspace.\n\t *\n\t * @param {changeDefinitionInCreation} propertyBag -\n\t * \t\t\tObject containing parameters for the change string creation\n\t * @param {object} manifest - Application manifest\n\t * @returns {string} Stringified change object needed and understood by the SAPUI5 runtime for storing in the workspace\n\t */\n\tcreateChangeString: function (propertyBag, manifest) {\n\t\tif (\n\t\t\t!propertyBag.type ||\n\t\t\t!propertyBag.controlId ||\n\t\t\t!(typeof propertyBag.isCustomer === \"boolean\") ||\n\t\t\t!propertyBag.creatingTool\n\t\t) {\n\t\t\tthrow Error(\"not all property parameters of the change were provided\");\n\t\t}\n\n\t\tif (!manifest) {\n\t\t\tthrow Error(\"no manifest was provided\");\n\t\t}\n\n\t\tpropertyBag.reference = getFlexReference(manifest);\n\t\tpropertyBag.appVersion = getAppVersion(manifest);\n\t\tpropertyBag.projectId = getProjectId(manifest, propertyBag.reference);\n\n\t\treturn createString(propertyBag);\n\t},\n\n\t/**\n\t * Generates a string of a parsed change to write it as a file into the workspace.\n\t *\n\t * @param {ChangeDefinition} propertyBag -\n\t * \t\t\tObject containing parameters for the change string creation\n\t * @returns {string} Stringified change object needed and understood by the SAPUI5 runtime for storing in the workspace\n\t */\n\ttoString: function(propertyBag) {\n\t\tif (\n\t\t\t!propertyBag.type ||\n\t\t\t!propertyBag.controlId ||\n\t\t\t!(typeof propertyBag.isCustomer === \"boolean\") ||\n\t\t\t!propertyBag.creatingTool ||\n\t\t\t!(propertyBag.reference && propertyBag.appVersion)\n\t\t) {\n\t\t\tthrow Error(\"not all parameters of the change were provided\");\n\t\t}\n\n\t\treturn createString(propertyBag);\n\t}\n};\n", "/**\n * @module @ui5/flexibility-utils\n * @public\n */\n\nmodule.exports = {\n\t/**\n\t * @public\n\t * @see module:@ui5/flexibility-utils/src/changeUtils.js\n\t */\n\tchange: require(\"./src/changeUtils\")\n};", "/*\n * EJS Embedded JavaScript templates\n * Copyright 2112 Matthew Eernisse (mde@fleegix.org)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n*/\n\n/**\n * Private utility functions\n * @module utils\n * @private\n */\n\n'use strict';\n\nvar regExpChars = /[|\\\\{}()[\\]^$+*?.]/g;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar hasOwn = function (obj, key) { return hasOwnProperty.apply(obj, [key]); };\n\n/**\n * Escape characters reserved in regular expressions.\n *\n * If `string` is `undefined` or `null`, the empty string is returned.\n *\n * @param {String} string Input string\n * @return {String} Escaped string\n * @static\n * @private\n */\nexports.escapeRegExpChars = function (string) {\n  // istanbul ignore if\n  if (!string) {\n    return '';\n  }\n  return String(string).replace(regExpChars, '\\\\$&');\n};\n\nvar _ENCODE_HTML_RULES = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&#34;',\n  \"'\": '&#39;'\n};\nvar _MATCH_HTML = /[&<>'\"]/g;\n\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n}\n\n/**\n * Stringified version of constants used by {@link module:utils.escapeXML}.\n *\n * It is used in the process of generating {@link ClientFunction}s.\n *\n * @readonly\n * @type {String}\n */\n\nvar escapeFuncStr =\n  'var _ENCODE_HTML_RULES = {\\n'\n+ '      \"&\": \"&amp;\"\\n'\n+ '    , \"<\": \"&lt;\"\\n'\n+ '    , \">\": \"&gt;\"\\n'\n+ '    , \\'\"\\': \"&#34;\"\\n'\n+ '    , \"\\'\": \"&#39;\"\\n'\n+ '    }\\n'\n+ '  , _MATCH_HTML = /[&<>\\'\"]/g;\\n'\n+ 'function encode_char(c) {\\n'\n+ '  return _ENCODE_HTML_RULES[c] || c;\\n'\n+ '};\\n';\n\n/**\n * Escape characters reserved in XML.\n *\n * If `markup` is `undefined` or `null`, the empty string is returned.\n *\n * @implements {EscapeCallback}\n * @param {String} markup Input string\n * @return {String} Escaped string\n * @static\n * @private\n */\n\nexports.escapeXML = function (markup) {\n  return markup == undefined\n    ? ''\n    : String(markup)\n      .replace(_MATCH_HTML, encode_char);\n};\n\nfunction escapeXMLToString() {\n  return Function.prototype.toString.call(this) + ';\\n' + escapeFuncStr;\n}\n\ntry {\n  if (typeof Object.defineProperty === 'function') {\n  // If the Function prototype is frozen, the \"toString\" property is non-writable. This means that any objects which inherit this property\n  // cannot have the property changed using an assignment. If using strict mode, attempting that will cause an error. If not using strict\n  // mode, attempting that will be silently ignored.\n  // However, we can still explicitly shadow the prototype's \"toString\" property by defining a new \"toString\" property on this object.\n    Object.defineProperty(exports.escapeXML, 'toString', { value: escapeXMLToString });\n  } else {\n    // If Object.defineProperty() doesn't exist, attempt to shadow this property using the assignment operator.\n    exports.escapeXML.toString = escapeXMLToString;\n  }\n} catch (err) {\n  console.warn('Unable to set escapeXML.toString (is the Function prototype frozen?)');\n}\n\n/**\n * Naive copy of properties from one object to another.\n * Does not recurse into non-scalar properties\n * Does not check to see if the property has a value before copying\n *\n * @param  {Object} to   Destination object\n * @param  {Object} from Source object\n * @return {Object}      Destination object\n * @static\n * @private\n */\nexports.shallowCopy = function (to, from) {\n  from = from || {};\n  if ((to !== null) && (to !== undefined)) {\n    for (var p in from) {\n      if (!hasOwn(from, p)) {\n        continue;\n      }\n      if (p === '__proto__' || p === 'constructor') {\n        continue;\n      }\n      to[p] = from[p];\n    }\n  }\n  return to;\n};\n\n/**\n * Naive copy of a list of key names, from one object to another.\n * Only copies property if it is actually defined\n * Does not recurse into non-scalar properties\n *\n * @param  {Object} to   Destination object\n * @param  {Object} from Source object\n * @param  {Array} list List of properties to copy\n * @return {Object}      Destination object\n * @static\n * @private\n */\nexports.shallowCopyFromList = function (to, from, list) {\n  list = list || [];\n  from = from || {};\n  if ((to !== null) && (to !== undefined)) {\n    for (var i = 0; i < list.length; i++) {\n      var p = list[i];\n      if (typeof from[p] != 'undefined') {\n        if (!hasOwn(from, p)) {\n          continue;\n        }\n        if (p === '__proto__' || p === 'constructor') {\n          continue;\n        }\n        to[p] = from[p];\n      }\n    }\n  }\n  return to;\n};\n\n/**\n * Simple in-process cache implementation. Does not implement limits of any\n * sort.\n *\n * @implements {Cache}\n * @static\n * @private\n */\nexports.cache = {\n  _data: {},\n  set: function (key, val) {\n    this._data[key] = val;\n  },\n  get: function (key) {\n    return this._data[key];\n  },\n  remove: function (key) {\n    delete this._data[key];\n  },\n  reset: function () {\n    this._data = {};\n  }\n};\n\n/**\n * Transforms hyphen case variable into camel case.\n *\n * @param {String} string Hyphen case string\n * @return {String} Camel case string\n * @static\n * @private\n */\nexports.hyphenToCamel = function (str) {\n  return str.replace(/-[a-z]/g, function (match) { return match[1].toUpperCase(); });\n};\n\n/**\n * Returns a null-prototype object in runtimes that support it\n *\n * @return {Object} Object, prototype will be set to null where possible\n * @static\n * @private\n */\nexports.createNullProtoObjWherePossible = (function () {\n  if (typeof Object.create == 'function') {\n    return function () {\n      return Object.create(null);\n    };\n  }\n  if (!({__proto__: null} instanceof Object)) {\n    return function () {\n      return {__proto__: null};\n    };\n  }\n  // Not possible, just pass through\n  return function () {\n    return {};\n  };\n})();\n\n\n", "{\n  \"name\": \"ejs\",\n  \"description\": \"Embedded JavaScript templates\",\n  \"keywords\": [\n    \"template\",\n    \"engine\",\n    \"ejs\"\n  ],\n  \"version\": \"3.1.9\",\n  \"author\": \"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)\",\n  \"license\": \"Apache-2.0\",\n  \"bin\": {\n    \"ejs\": \"./bin/cli.js\"\n  },\n  \"main\": \"./lib/ejs.js\",\n  \"jsdelivr\": \"ejs.min.js\",\n  \"unpkg\": \"ejs.min.js\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git://github.com/mde/ejs.git\"\n  },\n  \"bugs\": \"https://github.com/mde/ejs/issues\",\n  \"homepage\": \"https://github.com/mde/ejs\",\n  \"dependencies\": {\n    \"jake\": \"^10.8.5\"\n  },\n  \"devDependencies\": {\n    \"browserify\": \"^16.5.1\",\n    \"eslint\": \"^6.8.0\",\n    \"git-directory-deploy\": \"^1.5.1\",\n    \"jsdoc\": \"^4.0.2\",\n    \"lru-cache\": \"^4.0.1\",\n    \"mocha\": \"^10.2.0\",\n    \"uglify-js\": \"^3.3.16\"\n  },\n  \"engines\": {\n    \"node\": \">=0.10.0\"\n  },\n  \"scripts\": {\n    \"test\": \"mocha -u tdd\"\n  }\n}\n", "/*\n * EJS Embedded JavaScript templates\n * Copyright 2112 Matthew Eernisse (mde@fleegix.org)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n*/\n\n'use strict';\n\n/**\n * @file Embedded JavaScript templating engine. {@link http://ejs.co}\n * @author Matthew Eernisse <mde@fleegix.org>\n * @author Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\n * @project EJS\n * @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}\n */\n\n/**\n * EJS internal functions.\n *\n * Technically this \"module\" lies in the same file as {@link module:ejs}, for\n * the sake of organization all the private functions re grouped into this\n * module.\n *\n * @module ejs-internal\n * @private\n */\n\n/**\n * Embedded JavaScript templating engine.\n *\n * @module ejs\n * @public\n */\n\n\nvar fs = require('fs');\nvar path = require('path');\nvar utils = require('./utils');\n\nvar scopeOptionWarned = false;\n/** @type {string} */\nvar _VERSION_STRING = require('../package.json').version;\nvar _DEFAULT_OPEN_DELIMITER = '<';\nvar _DEFAULT_CLOSE_DELIMITER = '>';\nvar _DEFAULT_DELIMITER = '%';\nvar _DEFAULT_LOCALS_NAME = 'locals';\nvar _NAME = 'ejs';\nvar _REGEX_STRING = '(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)';\nvar _OPTS_PASSABLE_WITH_DATA = ['delimiter', 'scope', 'context', 'debug', 'compileDebug',\n  'client', '_with', 'rmWhitespace', 'strict', 'filename', 'async'];\n// We don't allow 'cache' option to be passed in the data obj for\n// the normal `render` call, but this is where Express 2 & 3 put it\n// so we make an exception for `renderFile`\nvar _OPTS_PASSABLE_WITH_DATA_EXPRESS = _OPTS_PASSABLE_WITH_DATA.concat('cache');\nvar _BOM = /^\\uFEFF/;\nvar _JS_IDENTIFIER = /^[a-zA-Z_$][0-9a-zA-Z_$]*$/;\n\n/**\n * EJS template function cache. This can be a LRU object from lru-cache NPM\n * module. By default, it is {@link module:utils.cache}, a simple in-process\n * cache that grows continuously.\n *\n * @type {Cache}\n */\n\nexports.cache = utils.cache;\n\n/**\n * Custom file loader. Useful for template preprocessing or restricting access\n * to a certain part of the filesystem.\n *\n * @type {fileLoader}\n */\n\nexports.fileLoader = fs.readFileSync;\n\n/**\n * Name of the object containing the locals.\n *\n * This variable is overridden by {@link Options}`.localsName` if it is not\n * `undefined`.\n *\n * @type {String}\n * @public\n */\n\nexports.localsName = _DEFAULT_LOCALS_NAME;\n\n/**\n * Promise implementation -- defaults to the native implementation if available\n * This is mostly just for testability\n *\n * @type {PromiseConstructorLike}\n * @public\n */\n\nexports.promiseImpl = (new Function('return this;'))().Promise;\n\n/**\n * Get the path to the included file from the parent file path and the\n * specified path.\n *\n * @param {String}  name     specified path\n * @param {String}  filename parent file path\n * @param {Boolean} [isDir=false] whether the parent file path is a directory\n * @return {String}\n */\nexports.resolveInclude = function(name, filename, isDir) {\n  var dirname = path.dirname;\n  var extname = path.extname;\n  var resolve = path.resolve;\n  var includePath = resolve(isDir ? filename : dirname(filename), name);\n  var ext = extname(name);\n  if (!ext) {\n    includePath += '.ejs';\n  }\n  return includePath;\n};\n\n/**\n * Try to resolve file path on multiple directories\n *\n * @param  {String}        name  specified path\n * @param  {Array<String>} paths list of possible parent directory paths\n * @return {String}\n */\nfunction resolvePaths(name, paths) {\n  var filePath;\n  if (paths.some(function (v) {\n    filePath = exports.resolveInclude(name, v, true);\n    return fs.existsSync(filePath);\n  })) {\n    return filePath;\n  }\n}\n\n/**\n * Get the path to the included file by Options\n *\n * @param  {String}  path    specified path\n * @param  {Options} options compilation options\n * @return {String}\n */\nfunction getIncludePath(path, options) {\n  var includePath;\n  var filePath;\n  var views = options.views;\n  var match = /^[A-Za-z]+:\\\\|^\\//.exec(path);\n\n  // Abs path\n  if (match && match.length) {\n    path = path.replace(/^\\/*/, '');\n    if (Array.isArray(options.root)) {\n      includePath = resolvePaths(path, options.root);\n    } else {\n      includePath = exports.resolveInclude(path, options.root || '/', true);\n    }\n  }\n  // Relative paths\n  else {\n    // Look relative to a passed filename first\n    if (options.filename) {\n      filePath = exports.resolveInclude(path, options.filename);\n      if (fs.existsSync(filePath)) {\n        includePath = filePath;\n      }\n    }\n    // Then look in any views directories\n    if (!includePath && Array.isArray(views)) {\n      includePath = resolvePaths(path, views);\n    }\n    if (!includePath && typeof options.includer !== 'function') {\n      throw new Error('Could not find the include file \"' +\n          options.escapeFunction(path) + '\"');\n    }\n  }\n  return includePath;\n}\n\n/**\n * Get the template from a string or a file, either compiled on-the-fly or\n * read from cache (if enabled), and cache the template if needed.\n *\n * If `template` is not set, the file specified in `options.filename` will be\n * read.\n *\n * If `options.cache` is true, this function reads the file from\n * `options.filename` so it must be set prior to calling this function.\n *\n * @memberof module:ejs-internal\n * @param {Options} options   compilation options\n * @param {String} [template] template source\n * @return {(TemplateFunction|ClientFunction)}\n * Depending on the value of `options.client`, either type might be returned.\n * @static\n */\n\nfunction handleCache(options, template) {\n  var func;\n  var filename = options.filename;\n  var hasTemplate = arguments.length > 1;\n\n  if (options.cache) {\n    if (!filename) {\n      throw new Error('cache option requires a filename');\n    }\n    func = exports.cache.get(filename);\n    if (func) {\n      return func;\n    }\n    if (!hasTemplate) {\n      template = fileLoader(filename).toString().replace(_BOM, '');\n    }\n  }\n  else if (!hasTemplate) {\n    // istanbul ignore if: should not happen at all\n    if (!filename) {\n      throw new Error('Internal EJS error: no file name or template '\n                    + 'provided');\n    }\n    template = fileLoader(filename).toString().replace(_BOM, '');\n  }\n  func = exports.compile(template, options);\n  if (options.cache) {\n    exports.cache.set(filename, func);\n  }\n  return func;\n}\n\n/**\n * Try calling handleCache with the given options and data and call the\n * callback with the result. If an error occurs, call the callback with\n * the error. Used by renderFile().\n *\n * @memberof module:ejs-internal\n * @param {Options} options    compilation options\n * @param {Object} data        template data\n * @param {RenderFileCallback} cb callback\n * @static\n */\n\nfunction tryHandleCache(options, data, cb) {\n  var result;\n  if (!cb) {\n    if (typeof exports.promiseImpl == 'function') {\n      return new exports.promiseImpl(function (resolve, reject) {\n        try {\n          result = handleCache(options)(data);\n          resolve(result);\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    }\n    else {\n      throw new Error('Please provide a callback function');\n    }\n  }\n  else {\n    try {\n      result = handleCache(options)(data);\n    }\n    catch (err) {\n      return cb(err);\n    }\n\n    cb(null, result);\n  }\n}\n\n/**\n * fileLoader is independent\n *\n * @param {String} filePath ejs file path.\n * @return {String} The contents of the specified file.\n * @static\n */\n\nfunction fileLoader(filePath){\n  return exports.fileLoader(filePath);\n}\n\n/**\n * Get the template function.\n *\n * If `options.cache` is `true`, then the template is cached.\n *\n * @memberof module:ejs-internal\n * @param {String}  path    path for the specified file\n * @param {Options} options compilation options\n * @return {(TemplateFunction|ClientFunction)}\n * Depending on the value of `options.client`, either type might be returned\n * @static\n */\n\nfunction includeFile(path, options) {\n  var opts = utils.shallowCopy(utils.createNullProtoObjWherePossible(), options);\n  opts.filename = getIncludePath(path, opts);\n  if (typeof options.includer === 'function') {\n    var includerResult = options.includer(path, opts.filename);\n    if (includerResult) {\n      if (includerResult.filename) {\n        opts.filename = includerResult.filename;\n      }\n      if (includerResult.template) {\n        return handleCache(opts, includerResult.template);\n      }\n    }\n  }\n  return handleCache(opts);\n}\n\n/**\n * Re-throw the given `err` in context to the `str` of ejs, `filename`, and\n * `lineno`.\n *\n * @implements {RethrowCallback}\n * @memberof module:ejs-internal\n * @param {Error}  err      Error object\n * @param {String} str      EJS source\n * @param {String} flnm     file name of the EJS file\n * @param {Number} lineno   line number of the error\n * @param {EscapeCallback} esc\n * @static\n */\n\nfunction rethrow(err, str, flnm, lineno, esc) {\n  var lines = str.split('\\n');\n  var start = Math.max(lineno - 3, 0);\n  var end = Math.min(lines.length, lineno + 3);\n  var filename = esc(flnm);\n  // Error context\n  var context = lines.slice(start, end).map(function (line, i){\n    var curr = i + start + 1;\n    return (curr == lineno ? ' >> ' : '    ')\n      + curr\n      + '| '\n      + line;\n  }).join('\\n');\n\n  // Alter exception message\n  err.path = filename;\n  err.message = (filename || 'ejs') + ':'\n    + lineno + '\\n'\n    + context + '\\n\\n'\n    + err.message;\n\n  throw err;\n}\n\nfunction stripSemi(str){\n  return str.replace(/;(\\s*$)/, '$1');\n}\n\n/**\n * Compile the given `str` of ejs into a template function.\n *\n * @param {String}  template EJS template\n *\n * @param {Options} [opts] compilation options\n *\n * @return {(TemplateFunction|ClientFunction)}\n * Depending on the value of `opts.client`, either type might be returned.\n * Note that the return type of the function also depends on the value of `opts.async`.\n * @public\n */\n\nexports.compile = function compile(template, opts) {\n  var templ;\n\n  // v1 compat\n  // 'scope' is 'context'\n  // FIXME: Remove this in a future version\n  if (opts && opts.scope) {\n    if (!scopeOptionWarned){\n      console.warn('`scope` option is deprecated and will be removed in EJS 3');\n      scopeOptionWarned = true;\n    }\n    if (!opts.context) {\n      opts.context = opts.scope;\n    }\n    delete opts.scope;\n  }\n  templ = new Template(template, opts);\n  return templ.compile();\n};\n\n/**\n * Render the given `template` of ejs.\n *\n * If you would like to include options but not data, you need to explicitly\n * call this function with `data` being an empty object or `null`.\n *\n * @param {String}   template EJS template\n * @param {Object}  [data={}] template data\n * @param {Options} [opts={}] compilation and rendering options\n * @return {(String|Promise<String>)}\n * Return value type depends on `opts.async`.\n * @public\n */\n\nexports.render = function (template, d, o) {\n  var data = d || utils.createNullProtoObjWherePossible();\n  var opts = o || utils.createNullProtoObjWherePossible();\n\n  // No options object -- if there are optiony names\n  // in the data, copy them to options\n  if (arguments.length == 2) {\n    utils.shallowCopyFromList(opts, data, _OPTS_PASSABLE_WITH_DATA);\n  }\n\n  return handleCache(opts, template)(data);\n};\n\n/**\n * Render an EJS file at the given `path` and callback `cb(err, str)`.\n *\n * If you would like to include options but not data, you need to explicitly\n * call this function with `data` being an empty object or `null`.\n *\n * @param {String}             path     path to the EJS file\n * @param {Object}            [data={}] template data\n * @param {Options}           [opts={}] compilation and rendering options\n * @param {RenderFileCallback} cb callback\n * @public\n */\n\nexports.renderFile = function () {\n  var args = Array.prototype.slice.call(arguments);\n  var filename = args.shift();\n  var cb;\n  var opts = {filename: filename};\n  var data;\n  var viewOpts;\n\n  // Do we have a callback?\n  if (typeof arguments[arguments.length - 1] == 'function') {\n    cb = args.pop();\n  }\n  // Do we have data/opts?\n  if (args.length) {\n    // Should always have data obj\n    data = args.shift();\n    // Normal passed opts (data obj + opts obj)\n    if (args.length) {\n      // Use shallowCopy so we don't pollute passed in opts obj with new vals\n      utils.shallowCopy(opts, args.pop());\n    }\n    // Special casing for Express (settings + opts-in-data)\n    else {\n      // Express 3 and 4\n      if (data.settings) {\n        // Pull a few things from known locations\n        if (data.settings.views) {\n          opts.views = data.settings.views;\n        }\n        if (data.settings['view cache']) {\n          opts.cache = true;\n        }\n        // Undocumented after Express 2, but still usable, esp. for\n        // items that are unsafe to be passed along with data, like `root`\n        viewOpts = data.settings['view options'];\n        if (viewOpts) {\n          utils.shallowCopy(opts, viewOpts);\n        }\n      }\n      // Express 2 and lower, values set in app.locals, or people who just\n      // want to pass options in their data. NOTE: These values will override\n      // anything previously set in settings  or settings['view options']\n      utils.shallowCopyFromList(opts, data, _OPTS_PASSABLE_WITH_DATA_EXPRESS);\n    }\n    opts.filename = filename;\n  }\n  else {\n    data = utils.createNullProtoObjWherePossible();\n  }\n\n  return tryHandleCache(opts, data, cb);\n};\n\n/**\n * Clear intermediate JavaScript cache. Calls {@link Cache#reset}.\n * @public\n */\n\n/**\n * EJS template class\n * @public\n */\nexports.Template = Template;\n\nexports.clearCache = function () {\n  exports.cache.reset();\n};\n\nfunction Template(text, opts) {\n  opts = opts || utils.createNullProtoObjWherePossible();\n  var options = utils.createNullProtoObjWherePossible();\n  this.templateText = text;\n  /** @type {string | null} */\n  this.mode = null;\n  this.truncate = false;\n  this.currentLine = 1;\n  this.source = '';\n  options.client = opts.client || false;\n  options.escapeFunction = opts.escape || opts.escapeFunction || utils.escapeXML;\n  options.compileDebug = opts.compileDebug !== false;\n  options.debug = !!opts.debug;\n  options.filename = opts.filename;\n  options.openDelimiter = opts.openDelimiter || exports.openDelimiter || _DEFAULT_OPEN_DELIMITER;\n  options.closeDelimiter = opts.closeDelimiter || exports.closeDelimiter || _DEFAULT_CLOSE_DELIMITER;\n  options.delimiter = opts.delimiter || exports.delimiter || _DEFAULT_DELIMITER;\n  options.strict = opts.strict || false;\n  options.context = opts.context;\n  options.cache = opts.cache || false;\n  options.rmWhitespace = opts.rmWhitespace;\n  options.root = opts.root;\n  options.includer = opts.includer;\n  options.outputFunctionName = opts.outputFunctionName;\n  options.localsName = opts.localsName || exports.localsName || _DEFAULT_LOCALS_NAME;\n  options.views = opts.views;\n  options.async = opts.async;\n  options.destructuredLocals = opts.destructuredLocals;\n  options.legacyInclude = typeof opts.legacyInclude != 'undefined' ? !!opts.legacyInclude : true;\n\n  if (options.strict) {\n    options._with = false;\n  }\n  else {\n    options._with = typeof opts._with != 'undefined' ? opts._with : true;\n  }\n\n  this.opts = options;\n\n  this.regex = this.createRegex();\n}\n\nTemplate.modes = {\n  EVAL: 'eval',\n  ESCAPED: 'escaped',\n  RAW: 'raw',\n  COMMENT: 'comment',\n  LITERAL: 'literal'\n};\n\nTemplate.prototype = {\n  createRegex: function () {\n    var str = _REGEX_STRING;\n    var delim = utils.escapeRegExpChars(this.opts.delimiter);\n    var open = utils.escapeRegExpChars(this.opts.openDelimiter);\n    var close = utils.escapeRegExpChars(this.opts.closeDelimiter);\n    str = str.replace(/%/g, delim)\n      .replace(/</g, open)\n      .replace(/>/g, close);\n    return new RegExp(str);\n  },\n\n  compile: function () {\n    /** @type {string} */\n    var src;\n    /** @type {ClientFunction} */\n    var fn;\n    var opts = this.opts;\n    var prepended = '';\n    var appended = '';\n    /** @type {EscapeCallback} */\n    var escapeFn = opts.escapeFunction;\n    /** @type {FunctionConstructor} */\n    var ctor;\n    /** @type {string} */\n    var sanitizedFilename = opts.filename ? JSON.stringify(opts.filename) : 'undefined';\n\n    if (!this.source) {\n      this.generateSource();\n      prepended +=\n        '  var __output = \"\";\\n' +\n        '  function __append(s) { if (s !== undefined && s !== null) __output += s }\\n';\n      if (opts.outputFunctionName) {\n        if (!_JS_IDENTIFIER.test(opts.outputFunctionName)) {\n          throw new Error('outputFunctionName is not a valid JS identifier.');\n        }\n        prepended += '  var ' + opts.outputFunctionName + ' = __append;' + '\\n';\n      }\n      if (opts.localsName && !_JS_IDENTIFIER.test(opts.localsName)) {\n        throw new Error('localsName is not a valid JS identifier.');\n      }\n      if (opts.destructuredLocals && opts.destructuredLocals.length) {\n        var destructuring = '  var __locals = (' + opts.localsName + ' || {}),\\n';\n        for (var i = 0; i < opts.destructuredLocals.length; i++) {\n          var name = opts.destructuredLocals[i];\n          if (!_JS_IDENTIFIER.test(name)) {\n            throw new Error('destructuredLocals[' + i + '] is not a valid JS identifier.');\n          }\n          if (i > 0) {\n            destructuring += ',\\n  ';\n          }\n          destructuring += name + ' = __locals.' + name;\n        }\n        prepended += destructuring + ';\\n';\n      }\n      if (opts._with !== false) {\n        prepended +=  '  with (' + opts.localsName + ' || {}) {' + '\\n';\n        appended += '  }' + '\\n';\n      }\n      appended += '  return __output;' + '\\n';\n      this.source = prepended + this.source + appended;\n    }\n\n    if (opts.compileDebug) {\n      src = 'var __line = 1' + '\\n'\n        + '  , __lines = ' + JSON.stringify(this.templateText) + '\\n'\n        + '  , __filename = ' + sanitizedFilename + ';' + '\\n'\n        + 'try {' + '\\n'\n        + this.source\n        + '} catch (e) {' + '\\n'\n        + '  rethrow(e, __lines, __filename, __line, escapeFn);' + '\\n'\n        + '}' + '\\n';\n    }\n    else {\n      src = this.source;\n    }\n\n    if (opts.client) {\n      src = 'escapeFn = escapeFn || ' + escapeFn.toString() + ';' + '\\n' + src;\n      if (opts.compileDebug) {\n        src = 'rethrow = rethrow || ' + rethrow.toString() + ';' + '\\n' + src;\n      }\n    }\n\n    if (opts.strict) {\n      src = '\"use strict\";\\n' + src;\n    }\n    if (opts.debug) {\n      console.log(src);\n    }\n    if (opts.compileDebug && opts.filename) {\n      src = src + '\\n'\n        + '//# sourceURL=' + sanitizedFilename + '\\n';\n    }\n\n    try {\n      if (opts.async) {\n        // Have to use generated function for this, since in envs without support,\n        // it breaks in parsing\n        try {\n          ctor = (new Function('return (async function(){}).constructor;'))();\n        }\n        catch(e) {\n          if (e instanceof SyntaxError) {\n            throw new Error('This environment does not support async/await');\n          }\n          else {\n            throw e;\n          }\n        }\n      }\n      else {\n        ctor = Function;\n      }\n      fn = new ctor(opts.localsName + ', escapeFn, include, rethrow', src);\n    }\n    catch(e) {\n      // istanbul ignore else\n      if (e instanceof SyntaxError) {\n        if (opts.filename) {\n          e.message += ' in ' + opts.filename;\n        }\n        e.message += ' while compiling ejs\\n\\n';\n        e.message += 'If the above error is not helpful, you may want to try EJS-Lint:\\n';\n        e.message += 'https://github.com/RyanZim/EJS-Lint';\n        if (!opts.async) {\n          e.message += '\\n';\n          e.message += 'Or, if you meant to create an async function, pass `async: true` as an option.';\n        }\n      }\n      throw e;\n    }\n\n    // Return a callable function which will execute the function\n    // created by the source-code, with the passed data as locals\n    // Adds a local `include` function which allows full recursive include\n    var returnedFn = opts.client ? fn : function anonymous(data) {\n      var include = function (path, includeData) {\n        var d = utils.shallowCopy(utils.createNullProtoObjWherePossible(), data);\n        if (includeData) {\n          d = utils.shallowCopy(d, includeData);\n        }\n        return includeFile(path, opts)(d);\n      };\n      return fn.apply(opts.context,\n        [data || utils.createNullProtoObjWherePossible(), escapeFn, include, rethrow]);\n    };\n    if (opts.filename && typeof Object.defineProperty === 'function') {\n      var filename = opts.filename;\n      var basename = path.basename(filename, path.extname(filename));\n      try {\n        Object.defineProperty(returnedFn, 'name', {\n          value: basename,\n          writable: false,\n          enumerable: false,\n          configurable: true\n        });\n      } catch (e) {/* ignore */}\n    }\n    return returnedFn;\n  },\n\n  generateSource: function () {\n    var opts = this.opts;\n\n    if (opts.rmWhitespace) {\n      // Have to use two separate replace here as `^` and `$` operators don't\n      // work well with `\\r` and empty lines don't work well with the `m` flag.\n      this.templateText =\n        this.templateText.replace(/[\\r\\n]+/g, '\\n').replace(/^\\s+|\\s+$/gm, '');\n    }\n\n    // Slurp spaces and tabs before <%_ and after _%>\n    this.templateText =\n      this.templateText.replace(/[ \\t]*<%_/gm, '<%_').replace(/_%>[ \\t]*/gm, '_%>');\n\n    var self = this;\n    var matches = this.parseTemplateText();\n    var d = this.opts.delimiter;\n    var o = this.opts.openDelimiter;\n    var c = this.opts.closeDelimiter;\n\n    if (matches && matches.length) {\n      matches.forEach(function (line, index) {\n        var closing;\n        // If this is an opening tag, check for closing tags\n        // FIXME: May end up with some false positives here\n        // Better to store modes as k/v with openDelimiter + delimiter as key\n        // Then this can simply check against the map\n        if ( line.indexOf(o + d) === 0        // If it is a tag\n          && line.indexOf(o + d + d) !== 0) { // and is not escaped\n          closing = matches[index + 2];\n          if (!(closing == d + c || closing == '-' + d + c || closing == '_' + d + c)) {\n            throw new Error('Could not find matching close tag for \"' + line + '\".');\n          }\n        }\n        self.scanLine(line);\n      });\n    }\n\n  },\n\n  parseTemplateText: function () {\n    var str = this.templateText;\n    var pat = this.regex;\n    var result = pat.exec(str);\n    var arr = [];\n    var firstPos;\n\n    while (result) {\n      firstPos = result.index;\n\n      if (firstPos !== 0) {\n        arr.push(str.substring(0, firstPos));\n        str = str.slice(firstPos);\n      }\n\n      arr.push(result[0]);\n      str = str.slice(result[0].length);\n      result = pat.exec(str);\n    }\n\n    if (str) {\n      arr.push(str);\n    }\n\n    return arr;\n  },\n\n  _addOutput: function (line) {\n    if (this.truncate) {\n      // Only replace single leading linebreak in the line after\n      // -%> tag -- this is the single, trailing linebreak\n      // after the tag that the truncation mode replaces\n      // Handle Win / Unix / old Mac linebreaks -- do the \\r\\n\n      // combo first in the regex-or\n      line = line.replace(/^(?:\\r\\n|\\r|\\n)/, '');\n      this.truncate = false;\n    }\n    if (!line) {\n      return line;\n    }\n\n    // Preserve literal slashes\n    line = line.replace(/\\\\/g, '\\\\\\\\');\n\n    // Convert linebreaks\n    line = line.replace(/\\n/g, '\\\\n');\n    line = line.replace(/\\r/g, '\\\\r');\n\n    // Escape double-quotes\n    // - this will be the delimiter during execution\n    line = line.replace(/\"/g, '\\\\\"');\n    this.source += '    ; __append(\"' + line + '\")' + '\\n';\n  },\n\n  scanLine: function (line) {\n    var self = this;\n    var d = this.opts.delimiter;\n    var o = this.opts.openDelimiter;\n    var c = this.opts.closeDelimiter;\n    var newLineCount = 0;\n\n    newLineCount = (line.split('\\n').length - 1);\n\n    switch (line) {\n    case o + d:\n    case o + d + '_':\n      this.mode = Template.modes.EVAL;\n      break;\n    case o + d + '=':\n      this.mode = Template.modes.ESCAPED;\n      break;\n    case o + d + '-':\n      this.mode = Template.modes.RAW;\n      break;\n    case o + d + '#':\n      this.mode = Template.modes.COMMENT;\n      break;\n    case o + d + d:\n      this.mode = Template.modes.LITERAL;\n      this.source += '    ; __append(\"' + line.replace(o + d + d, o + d) + '\")' + '\\n';\n      break;\n    case d + d + c:\n      this.mode = Template.modes.LITERAL;\n      this.source += '    ; __append(\"' + line.replace(d + d + c, d + c) + '\")' + '\\n';\n      break;\n    case d + c:\n    case '-' + d + c:\n    case '_' + d + c:\n      if (this.mode == Template.modes.LITERAL) {\n        this._addOutput(line);\n      }\n\n      this.mode = null;\n      this.truncate = line.indexOf('-') === 0 || line.indexOf('_') === 0;\n      break;\n    default:\n      // In script mode, depends on type of tag\n      if (this.mode) {\n        // If '//' is found without a line break, add a line break.\n        switch (this.mode) {\n        case Template.modes.EVAL:\n        case Template.modes.ESCAPED:\n        case Template.modes.RAW:\n          if (line.lastIndexOf('//') > line.lastIndexOf('\\n')) {\n            line += '\\n';\n          }\n        }\n        switch (this.mode) {\n        // Just executing code\n        case Template.modes.EVAL:\n          this.source += '    ; ' + line + '\\n';\n          break;\n          // Exec, esc, and output\n        case Template.modes.ESCAPED:\n          this.source += '    ; __append(escapeFn(' + stripSemi(line) + '))' + '\\n';\n          break;\n          // Exec and output\n        case Template.modes.RAW:\n          this.source += '    ; __append(' + stripSemi(line) + ')' + '\\n';\n          break;\n        case Template.modes.COMMENT:\n          // Do nothing\n          break;\n          // Literal <%% mode, append as raw output\n        case Template.modes.LITERAL:\n          this._addOutput(line);\n          break;\n        }\n      }\n      // In string mode, just add the output\n      else {\n        this._addOutput(line);\n      }\n    }\n\n    if (self.opts.compileDebug && newLineCount) {\n      this.currentLine += newLineCount;\n      this.source += '    ; __line = ' + this.currentLine + '\\n';\n    }\n  }\n};\n\n/**\n * Escape characters reserved in XML.\n *\n * This is simply an export of {@link module:utils.escapeXML}.\n *\n * If `markup` is `undefined` or `null`, the empty string is returned.\n *\n * @param {String} markup Input string\n * @return {String} Escaped string\n * @public\n * @func\n * */\nexports.escapeXML = utils.escapeXML;\n\n/**\n * Express.js support.\n *\n * This is an alias for {@link module:ejs.renderFile}, in order to support\n * Express.js out-of-the-box.\n *\n * @func\n */\n\nexports.__express = exports.renderFile;\n\n/**\n * Version of EJS.\n *\n * @readonly\n * @type {String}\n * @public\n */\n\nexports.VERSION = _VERSION_STRING;\n\n/**\n * Name for detection of EJS.\n *\n * @readonly\n * @type {String}\n * @public\n */\n\nexports.name = _NAME;\n\n/* istanbul ignore if */\nif (typeof window != 'undefined') {\n  window.ejs = exports;\n}\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n  object = parent(object, path);\n\n  var key = toKey(last(path));\n  return !(object != null && hasOwnProperty.call(object, key)) || delete object[key];\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array ? array.length : 0;\n  return length ? array[length - 1] : undefined;\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Removes the property at `path` of `object`.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n * _.unset(object, 'a[0].b.c');\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n *\n * _.unset(object, ['a', '0', 'b', 'c']);\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n */\nfunction unset(object, path) {\n  return object == null ? true : baseUnset(object, path);\n}\n\nmodule.exports = unset;\n", "import { SCHEMES } from \"./uri\";\n\nimport http from \"./schemes/http\";\nSCHEMES[http.scheme] = http;\n\nimport https from \"./schemes/https\";\nSCHEMES[https.scheme] = https;\n\nimport ws from \"./schemes/ws\";\nSCHEMES[ws.scheme] = ws;\n\nimport wss from \"./schemes/wss\";\nSCHEMES[wss.scheme] = wss;\n\nimport mailto from \"./schemes/mailto\";\nSCHEMES[mailto.scheme] = mailto;\n\nimport urn from \"./schemes/urn\";\nSCHEMES[urn.scheme] = urn;\n\nimport uuid from \"./schemes/urn-uuid\";\nSCHEMES[uuid.scheme] = uuid;\n\nexport * from \"./uri\";\n", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\nimport { URNComponents } from \"./urn\";\nimport { SCHEMES } from \"../uri\";\n\nexport interface UUIDComponents extends URNComponents {\n\tuuid?: string;\n}\n\nconst UUID = /^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/;\nconst UUID_PARSE = /^[0-9A-Fa-f\\-]{36}/;\n\n//RFC 4122\nconst handler:URISchemeHandler<UUIDComponents, URIOptions, URNComponents> = {\n\tscheme : \"urn:uuid\",\n\n\tparse : function (urnComponents:URNComponents, options:URIOptions):UUIDComponents {\n\t\tconst uuidComponents = urnComponents as UUIDComponents;\n\t\tuuidComponents.uuid = uuidComponents.nss;\n\t\tuuidComponents.nss = undefined;\n\n\t\tif (!options.tolerant && (!uuidComponents.uuid || !uuidComponents.uuid.match(UUID))) {\n\t\t\tuuidComponents.error = uuidComponents.error || \"UUID is not valid.\";\n\t\t}\n\n\t\treturn uuidComponents;\n\t},\n\n\tserialize : function (uuidComponents:UUIDComponents, options:URIOptions):URNComponents {\n\t\tconst urnComponents = uuidComponents as URNComponents;\n\t\t//normalize UUID\n\t\turnComponents.nss = (uuidComponents.uuid || \"\").toLowerCase();\n\t\treturn urnComponents;\n\t},\n};\n\nexport default handler;", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\nimport { pctEncChar, SCHEMES } from \"../uri\";\n\nexport interface URNComponents extends URIComponents {\n\tnid?:string;\n\tnss?:string;\n}\n\nexport interface URNOptions extends URIOptions {\n\tnid?:string;\n}\n\nconst NID$ = \"(?:[0-9A-Za-z][0-9A-Za-z\\\\-]{1,31})\";\nconst PCT_ENCODED$ = \"(?:\\\\%[0-9A-Fa-f]{2})\";\nconst TRANS$$ = \"[0-9A-Za-z\\\\(\\\\)\\\\+\\\\,\\\\-\\\\.\\\\:\\\\=\\\\@\\\\;\\\\$\\\\_\\\\!\\\\*\\\\'\\\\/\\\\?\\\\#]\";\nconst NSS$ = \"(?:(?:\" + PCT_ENCODED$ + \"|\" + TRANS$$ + \")+)\";\nconst URN_SCHEME = new RegExp(\"^urn\\\\:(\" + NID$ + \")$\");\nconst URN_PATH = new RegExp(\"^(\" + NID$ + \")\\\\:(\" + NSS$ + \")$\");\nconst URN_PARSE = /^([^\\:]+)\\:(.*)/;\nconst URN_EXCLUDED = /[\\x00-\\x20\\\\\\\"\\&\\<\\>\\[\\]\\^\\`\\{\\|\\}\\~\\x7F-\\xFF]/g;\n\n//RFC 2141\nconst handler:URISchemeHandler<URNComponents,URNOptions> = {\n\tscheme : \"urn\",\n\n\tparse : function (components:URIComponents, options:URNOptions):URNComponents {\n\t\tconst matches = components.path && components.path.match(URN_PARSE);\n\t\tlet urnComponents = components as URNComponents;\n\n\t\tif (matches) {\n\t\t\tconst scheme = options.scheme || urnComponents.scheme || \"urn\";\n\t\t\tconst nid = matches[1].toLowerCase();\n\t\t\tconst nss = matches[2];\n\t\t\tconst urnScheme = `${scheme}:${options.nid || nid}`;\n\t\t\tconst schemeHandler = SCHEMES[urnScheme];\n\n\t\t\turnComponents.nid = nid;\n\t\t\turnComponents.nss = nss;\n\t\t\turnComponents.path = undefined;\n\n\t\t\tif (schemeHandler) {\n\t\t\t\turnComponents = schemeHandler.parse(urnComponents, options) as URNComponents;\n\t\t\t}\n\t\t} else {\n\t\t\turnComponents.error = urnComponents.error || \"URN can not be parsed.\";\n\t\t}\n\n\t\treturn urnComponents;\n\t},\n\n\tserialize : function (urnComponents:URNComponents, options:URNOptions):URIComponents {\n\t\tconst scheme = options.scheme || urnComponents.scheme || \"urn\";\n\t\tconst nid = urnComponents.nid;\n\t\tconst urnScheme = `${scheme}:${options.nid || nid}`;\n\t\tconst schemeHandler = SCHEMES[urnScheme];\n\n\t\tif (schemeHandler) {\n\t\t\turnComponents = schemeHandler.serialize(urnComponents, options) as URNComponents;\n\t\t}\n\n\t\tconst uriComponents = urnComponents as URIComponents;\n\t\tconst nss = urnComponents.nss;\n\t\turiComponents.path = `${nid || options.nid}:${nss}`;\n\n\t\treturn uriComponents;\n\t},\n};\n\nexport default handler;", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\nimport { pctEncChar, pctDecChars, unescapeComponent } from \"../uri\";\nimport punycode from \"punycode\";\nimport { merge, subexp, toUpperCase, toArray } from \"../util\";\n\nexport interface MailtoHeaders {\n\t[hfname:string]:string\n}\n\nexport interface MailtoComponents extends URIComponents {\n\tto:Array<string>,\n\theaders?:MailtoHeaders,\n\tsubject?:string,\n\tbody?:string\n}\n\nconst O:MailtoHeaders = {};\nconst isIRI = true;\n\n//RFC 3986\nconst UNRESERVED$$ = \"[A-Za-z0-9\\\\-\\\\.\\\\_\\\\~\" + (isIRI ? \"\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF\" : \"\") + \"]\";\nconst HEXDIG$$ = \"[0-9A-Fa-f]\";  //case-insensitive\nconst PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$));  //expanded\n\n//RFC 5322, except these symbols as per RFC 6068: @ : / ? # [ ] & ; =\n//const ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\#\\\\$\\\\%\\\\&\\\\'\\\\*\\\\+\\\\-\\\\/\\\\=\\\\?\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\n//const WSP$$ = \"[\\\\x20\\\\x09]\";\n//const OBS_QTEXT$$ = \"[\\\\x01-\\\\x08\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F]\";  //(%d1-8 / %d11-12 / %d14-31 / %d127)\n//const QTEXT$$ = merge(\"[\\\\x21\\\\x23-\\\\x5B\\\\x5D-\\\\x7E]\", OBS_QTEXT$$);  //%d33 / %d35-91 / %d93-126 / obs-qtext\n//const VCHAR$$ = \"[\\\\x21-\\\\x7E]\";\n//const WSP$$ = \"[\\\\x20\\\\x09]\";\n//const OBS_QP$ = subexp(\"\\\\\\\\\" + merge(\"[\\\\x00\\\\x0D\\\\x0A]\", OBS_QTEXT$$));  //%d0 / CR / LF / obs-qtext\n//const FWS$ = subexp(subexp(WSP$$ + \"*\" + \"\\\\x0D\\\\x0A\") + \"?\" + WSP$$ + \"+\");\n//const QUOTED_PAIR$ = subexp(subexp(\"\\\\\\\\\" + subexp(VCHAR$$ + \"|\" + WSP$$)) + \"|\" + OBS_QP$);\n//const QUOTED_STRING$ = subexp('\\\\\"' + subexp(FWS$ + \"?\" + QCONTENT$) + \"*\" + FWS$ + \"?\" + '\\\\\"');\nconst ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\$\\\\%\\\\'\\\\*\\\\+\\\\-\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\nconst QTEXT$$ = \"[\\\\!\\\\$\\\\%\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\-\\\\.0-9\\\\<\\\\>A-Z\\\\x5E-\\\\x7E]\";\nconst VCHAR$$ = merge(QTEXT$$, \"[\\\\\\\"\\\\\\\\]\");\nconst DOT_ATOM_TEXT$ = subexp(ATEXT$$ + \"+\" + subexp(\"\\\\.\" + ATEXT$$ + \"+\") + \"*\");\nconst QUOTED_PAIR$ = subexp(\"\\\\\\\\\" + VCHAR$$);\nconst QCONTENT$ = subexp(QTEXT$$ + \"|\" + QUOTED_PAIR$);\nconst QUOTED_STRING$ = subexp('\\\\\"' + QCONTENT$ + \"*\" + '\\\\\"');\n\n//RFC 6068\nconst DTEXT_NO_OBS$$ = \"[\\\\x21-\\\\x5A\\\\x5E-\\\\x7E]\";  //%d33-90 / %d94-126\nconst SOME_DELIMS$$ = \"[\\\\!\\\\$\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\:\\\\@]\";\nconst QCHAR$ = subexp(UNRESERVED$$ + \"|\" + PCT_ENCODED$ + \"|\" + SOME_DELIMS$$);\nconst DOMAIN$ = subexp(DOT_ATOM_TEXT$ + \"|\" + \"\\\\[\" + DTEXT_NO_OBS$$ + \"*\" + \"\\\\]\");\nconst LOCAL_PART$ = subexp(DOT_ATOM_TEXT$ + \"|\" + QUOTED_STRING$);\nconst ADDR_SPEC$ = subexp(LOCAL_PART$ + \"\\\\@\" + DOMAIN$);\nconst TO$ = subexp(ADDR_SPEC$ + subexp(\"\\\\,\" + ADDR_SPEC$) + \"*\");\nconst HFNAME$ = subexp(QCHAR$ + \"*\");\nconst HFVALUE$ = HFNAME$;\nconst HFIELD$ = subexp(HFNAME$ + \"\\\\=\" + HFVALUE$);\nconst HFIELDS2$ = subexp(HFIELD$ + subexp(\"\\\\&\" + HFIELD$) + \"*\");\nconst HFIELDS$ = subexp(\"\\\\?\" + HFIELDS2$);\nconst MAILTO_URI = new RegExp(\"^mailto\\\\:\" + TO$ + \"?\" + HFIELDS$ + \"?$\");\n\nconst UNRESERVED = new RegExp(UNRESERVED$$, \"g\");\nconst PCT_ENCODED = new RegExp(PCT_ENCODED$, \"g\");\nconst NOT_LOCAL_PART = new RegExp(merge(\"[^]\", ATEXT$$, \"[\\\\.]\", '[\\\\\"]', VCHAR$$), \"g\");\nconst NOT_DOMAIN = new RegExp(merge(\"[^]\", ATEXT$$, \"[\\\\.]\", \"[\\\\[]\", DTEXT_NO_OBS$$, \"[\\\\]]\"), \"g\");\nconst NOT_HFNAME = new RegExp(merge(\"[^]\", UNRESERVED$$, SOME_DELIMS$$), \"g\");\nconst NOT_HFVALUE = NOT_HFNAME;\nconst TO = new RegExp(\"^\" + TO$ + \"$\");\nconst HFIELDS = new RegExp(\"^\" + HFIELDS2$ + \"$\");\n\nfunction decodeUnreserved(str:string):string {\n\tconst decStr = pctDecChars(str);\n\treturn (!decStr.match(UNRESERVED) ? str : decStr);\n}\n\nconst handler:URISchemeHandler<MailtoComponents> =  {\n\tscheme : \"mailto\",\n\n\tparse : function (components:URIComponents, options:URIOptions):MailtoComponents {\n\t\tconst mailtoComponents = components as MailtoComponents;\n\t\tconst to = mailtoComponents.to = (mailtoComponents.path ? mailtoComponents.path.split(\",\") : []);\n\t\tmailtoComponents.path = undefined;\n\n\t\tif (mailtoComponents.query) {\n\t\t\tlet unknownHeaders = false\n\t\t\tconst headers:MailtoHeaders = {};\n\t\t\tconst hfields = mailtoComponents.query.split(\"&\");\n\n\t\t\tfor (let x = 0, xl = hfields.length; x < xl; ++x) {\n\t\t\t\tconst hfield = hfields[x].split(\"=\");\n\n\t\t\t\tswitch (hfield[0]) {\n\t\t\t\t\tcase \"to\":\n\t\t\t\t\t\tconst toAddrs = hfield[1].split(\",\");\n\t\t\t\t\t\tfor (let x = 0, xl = toAddrs.length; x < xl; ++x) {\n\t\t\t\t\t\t\tto.push(toAddrs[x]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"subject\":\n\t\t\t\t\t\tmailtoComponents.subject = unescapeComponent(hfield[1], options);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"body\":\n\t\t\t\t\t\tmailtoComponents.body = unescapeComponent(hfield[1], options);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tunknownHeaders = true;\n\t\t\t\t\t\theaders[unescapeComponent(hfield[0], options)] = unescapeComponent(hfield[1], options);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (unknownHeaders) mailtoComponents.headers = headers;\n\t\t}\n\n\t\tmailtoComponents.query = undefined;\n\n\t\tfor (let x = 0, xl = to.length; x < xl; ++x) {\n\t\t\tconst addr = to[x].split(\"@\");\n\n\t\t\taddr[0] = unescapeComponent(addr[0]);\n\n\t\t\tif (!options.unicodeSupport) {\n\t\t\t\t//convert Unicode IDN -> ASCII IDN\n\t\t\t\ttry {\n\t\t\t\t\taddr[1] = punycode.toASCII(unescapeComponent(addr[1], options).toLowerCase());\n\t\t\t\t} catch (e) {\n\t\t\t\t\tmailtoComponents.error = mailtoComponents.error || \"Email address's domain name can not be converted to ASCII via punycode: \" + e;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\taddr[1] = unescapeComponent(addr[1], options).toLowerCase();\n\t\t\t}\n\n\t\t\tto[x] = addr.join(\"@\");\n\t\t}\n\n\t\treturn mailtoComponents;\n\t},\n\n\tserialize : function (mailtoComponents:MailtoComponents, options:URIOptions):URIComponents {\n\t\tconst components = mailtoComponents as URIComponents;\n\t\tconst to = toArray(mailtoComponents.to);\n\t\tif (to) {\n\t\t\tfor (let x = 0, xl = to.length; x < xl; ++x) {\n\t\t\t\tconst toAddr = String(to[x]);\n\t\t\t\tconst atIdx = toAddr.lastIndexOf(\"@\");\n\t\t\t\tconst localPart = (toAddr.slice(0, atIdx)).replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_LOCAL_PART, pctEncChar);\n\t\t\t\tlet domain = toAddr.slice(atIdx + 1);\n\n\t\t\t\t//convert IDN via punycode\n\t\t\t\ttry {\n\t\t\t\t\tdomain = (!options.iri ? punycode.toASCII(unescapeComponent(domain, options).toLowerCase()) : punycode.toUnicode(domain));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tcomponents.error = components.error || \"Email address's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n\t\t\t\t}\n\n\t\t\t\tto[x] = localPart + \"@\" + domain;\n\t\t\t}\n\n\t\t\tcomponents.path = to.join(\",\");\n\t\t}\n\n\t\tconst headers = mailtoComponents.headers = mailtoComponents.headers || {};\n\n\t\tif (mailtoComponents.subject) headers[\"subject\"] = mailtoComponents.subject;\n\t\tif (mailtoComponents.body) headers[\"body\"] = mailtoComponents.body;\n\n\t\tconst fields = [];\n\t\tfor (const name in headers) {\n\t\t\tif (headers[name] !== O[name]) {\n\t\t\t\tfields.push(\n\t\t\t\t\tname.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFNAME, pctEncChar) +\n\t\t\t\t\t\"=\" +\n\t\t\t\t\theaders[name].replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFVALUE, pctEncChar)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tif (fields.length) {\n\t\t\tcomponents.query = fields.join(\"&\");\n\t\t}\n\n\t\treturn components;\n\t}\n}\n\nexport default handler;", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\nimport ws from \"./ws\";\n\nconst handler:URISchemeHandler = {\n\tscheme : \"wss\",\n\tdomainHost : ws.domainHost,\n\tparse : ws.parse,\n\tserialize : ws.serialize\n}\n\nexport default handler;", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\n\nexport interface WSComponents extends URIComponents {\n\tresourceName?: string;\n\tsecure?: boolean;\n}\n\nfunction isSecure(wsComponents:WSComponents):boolean {\n\treturn typeof wsComponents.secure === 'boolean' ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === \"wss\";\n}\n\n//RFC 6455\nconst handler:URISchemeHandler = {\n\tscheme : \"ws\",\n\n\tdomainHost : true,\n\n\tparse : function (components:URIComponents, options:URIOptions):WSComponents {\n\t\tconst wsComponents = components as WSComponents;\n\n\t\t//indicate if the secure flag is set\n\t\twsComponents.secure = isSecure(wsComponents);\n\n\t\t//construct resouce name\n\t\twsComponents.resourceName = (wsComponents.path || '/') + (wsComponents.query ? '?' + wsComponents.query : '');\n\t\twsComponents.path = undefined;\n\t\twsComponents.query = undefined;\n\n\t\treturn wsComponents;\n\t},\n\n\tserialize : function (wsComponents:WSComponents, options:URIOptions):URIComponents {\n\t\t//normalize the default port\n\t\tif (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === \"\") {\n\t\t\twsComponents.port = undefined;\n\t\t}\n\n\t\t//ensure scheme matches secure flag\n\t\tif (typeof wsComponents.secure === 'boolean') {\n\t\t\twsComponents.scheme = (wsComponents.secure ? 'wss' : 'ws');\n\t\t\twsComponents.secure = undefined;\n\t\t}\n\n\t\t//reconstruct path from resource name\n\t\tif (wsComponents.resourceName) {\n\t\t\tconst [path, query] = wsComponents.resourceName.split('?');\n\t\t\twsComponents.path = (path && path !== '/' ? path : undefined);\n\t\t\twsComponents.query = query;\n\t\t\twsComponents.resourceName = undefined;\n\t\t}\n\n\t\t//forbid fragment component\n\t\twsComponents.fragment = undefined;\n\n\t\treturn wsComponents;\n\t}\n};\n\nexport default handler;", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\nimport http from \"./http\";\n\nconst handler:URISchemeHandler = {\n\tscheme : \"https\",\n\tdomainHost : http.domainHost,\n\tparse : http.parse,\n\tserialize : http.serialize\n}\n\nexport default handler;", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\n\nconst handler:URISchemeHandler = {\n\tscheme : \"http\",\n\n\tdomainHost : true,\n\n\tparse : function (components:URIComponents, options:URIOptions):URIComponents {\n\t\t//report missing host\n\t\tif (!components.host) {\n\t\t\tcomponents.error = components.error || \"HTTP URIs must have a host.\";\n\t\t}\n\n\t\treturn components;\n\t},\n\n\tserialize : function (components:URIComponents, options:URIOptions):URIComponents {\n\t\tconst secure = String(components.scheme).toLowerCase() === \"https\";\n\n\t\t//normalize the default port\n\t\tif (components.port === (secure ? 443 : 80) || components.port === \"\") {\n\t\t\tcomponents.port = undefined;\n\t\t}\n\t\t\n\t\t//normalize the empty path\n\t\tif (!components.path) {\n\t\t\tcomponents.path = \"/\";\n\t\t}\n\n\t\t//NOTE: We do not parse query strings for HTTP URIs\n\t\t//as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n\t\t//and not the HTTP spec.\n\n\t\treturn components;\n\t}\n};\n\nexport default handler;", "/**\n * URI.js\n *\n * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n * @see http://github.com/garycourt/uri-js\n */\n\n/**\n * Copyright 2011 Gary Court. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification, are\n * permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice, this list of\n *       conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above copyright notice, this list\n *       of conditions and the following disclaimer in the documentation and/or other materials\n *       provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software and documentation are those of the\n * authors and should not be interpreted as representing official policies, either expressed\n * or implied, of Gary Court.\n */\n\nimport URI_PROTOCOL from \"./regexps-uri\";\nimport IRI_PROTOCOL from \"./regexps-iri\";\nimport punycode from \"punycode\";\nimport { toUpperCase, typeOf, assign } from \"./util\";\n\nexport interface URIComponents {\n\tscheme?:string;\n\tuserinfo?:string;\n\thost?:string;\n\tport?:number|string;\n\tpath?:string;\n\tquery?:string;\n\tfragment?:string;\n\treference?:string;\n\terror?:string;\n}\n\nexport interface URIOptions {\n\tscheme?:string;\n\treference?:string;\n\ttolerant?:boolean;\n\tabsolutePath?:boolean;\n\tiri?:boolean;\n\tunicodeSupport?:boolean;\n\tdomainHost?:boolean;\n}\n\nexport interface URISchemeHandler<Components extends URIComponents = URIComponents, Options extends URIOptions = URIOptions, ParentComponents extends URIComponents = URIComponents> {\n\tscheme:string;\n\tparse(components:ParentComponents, options:Options):Components;\n\tserialize(components:Components, options:Options):ParentComponents;\n\tunicodeSupport?:boolean;\n\tdomainHost?:boolean;\n\tabsolutePath?:boolean;\n}\n\nexport interface URIRegExps {\n\tNOT_SCHEME : RegExp,\n\tNOT_USERINFO : RegExp,\n\tNOT_HOST : RegExp,\n\tNOT_PATH : RegExp,\n\tNOT_PATH_NOSCHEME : RegExp,\n\tNOT_QUERY : RegExp,\n\tNOT_FRAGMENT : RegExp,\n\tESCAPE : RegExp,\n\tUNRESERVED : RegExp,\n\tOTHER_CHARS : RegExp,\n\tPCT_ENCODED : RegExp,\n\tIPV4ADDRESS : RegExp,\n\tIPV6ADDRESS : RegExp,\n}\n\nexport const SCHEMES:{[scheme:string]:URISchemeHandler} = {};\n\nexport function pctEncChar(chr:string):string {\n\tconst c = chr.charCodeAt(0);\n\tlet e:string;\n\n\tif (c < 16) e = \"%0\" + c.toString(16).toUpperCase();\n\telse if (c < 128) e = \"%\" + c.toString(16).toUpperCase();\n\telse if (c < 2048) e = \"%\" + ((c >> 6) | 192).toString(16).toUpperCase() + \"%\" + ((c & 63) | 128).toString(16).toUpperCase();\n\telse e = \"%\" + ((c >> 12) | 224).toString(16).toUpperCase() + \"%\" + (((c >> 6) & 63) | 128).toString(16).toUpperCase() + \"%\" + ((c & 63) | 128).toString(16).toUpperCase();\n\n\treturn e;\n}\n\nexport function pctDecChars(str:string):string {\n\tlet newStr = \"\";\n\tlet i = 0;\n\tconst il = str.length;\n\n\twhile (i < il) {\n\t\tconst c = parseInt(str.substr(i + 1, 2), 16);\n\n\t\tif (c < 128) {\n\t\t\tnewStr += String.fromCharCode(c);\n\t\t\ti += 3;\n\t\t}\n\t\telse if (c >= 194 && c < 224) {\n\t\t\tif ((il - i) >= 6) {\n\t\t\t\tconst c2 = parseInt(str.substr(i + 4, 2), 16);\n\t\t\t\tnewStr += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n\t\t\t} else {\n\t\t\t\tnewStr += str.substr(i, 6);\n\t\t\t}\n\t\t\ti += 6;\n\t\t}\n\t\telse if (c >= 224) {\n\t\t\tif ((il - i) >= 9) {\n\t\t\t\tconst c2 = parseInt(str.substr(i + 4, 2), 16);\n\t\t\t\tconst c3 = parseInt(str.substr(i + 7, 2), 16);\n\t\t\t\tnewStr += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n\t\t\t} else {\n\t\t\t\tnewStr += str.substr(i, 9);\n\t\t\t}\n\t\t\ti += 9;\n\t\t}\n\t\telse {\n\t\t\tnewStr += str.substr(i, 3);\n\t\t\ti += 3;\n\t\t}\n\t}\n\n\treturn newStr;\n}\n\nfunction _normalizeComponentEncoding(components:URIComponents, protocol:URIRegExps) {\n\tfunction decodeUnreserved(str:string):string {\n\t\tconst decStr = pctDecChars(str);\n\t\treturn (!decStr.match(protocol.UNRESERVED) ? str : decStr);\n\t}\n\n\tif (components.scheme) components.scheme = String(components.scheme).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME, \"\");\n\tif (components.userinfo !== undefined) components.userinfo = String(components.userinfo).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_USERINFO, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\tif (components.host !== undefined) components.host = String(components.host).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\tif (components.path !== undefined) components.path = String(components.path).replace(protocol.PCT_ENCODED, decodeUnreserved).replace((components.scheme ? protocol.NOT_PATH : protocol.NOT_PATH_NOSCHEME), pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\tif (components.query !== undefined) components.query = String(components.query).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_QUERY, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\tif (components.fragment !== undefined) components.fragment = String(components.fragment).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_FRAGMENT, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\n\treturn components;\n};\n\nfunction _stripLeadingZeros(str:string):string {\n\treturn str.replace(/^0*(.*)/, \"$1\") || \"0\";\n}\n\nfunction _normalizeIPv4(host:string, protocol:URIRegExps):string {\n\tconst matches = host.match(protocol.IPV4ADDRESS) || [];\n\tconst [, address] = matches;\n\t\n\tif (address) {\n\t\treturn address.split(\".\").map(_stripLeadingZeros).join(\".\");\n\t} else {\n\t\treturn host;\n\t}\n}\n\nfunction _normalizeIPv6(host:string, protocol:URIRegExps):string {\n\tconst matches = host.match(protocol.IPV6ADDRESS) || [];\n\tconst [, address, zone] = matches;\n\n\tif (address) {\n\t\tconst [last, first] = address.toLowerCase().split('::').reverse();\n\t\tconst firstFields = first ? first.split(\":\").map(_stripLeadingZeros) : [];\n\t\tconst lastFields = last.split(\":\").map(_stripLeadingZeros);\n\t\tconst isLastFieldIPv4Address = protocol.IPV4ADDRESS.test(lastFields[lastFields.length - 1]);\n\t\tconst fieldCount = isLastFieldIPv4Address ? 7 : 8;\n\t\tconst lastFieldsStart = lastFields.length - fieldCount;\n\t\tconst fields = Array<string>(fieldCount);\n\n\t\tfor (let x = 0; x < fieldCount; ++x) {\n\t\t\tfields[x] = firstFields[x] || lastFields[lastFieldsStart + x] || '';\n\t\t}\n\n\t\tif (isLastFieldIPv4Address) {\n\t\t\tfields[fieldCount - 1] = _normalizeIPv4(fields[fieldCount - 1], protocol);\n\t\t}\n\n\t\tconst allZeroFields = fields.reduce<Array<{index:number,length:number}>>((acc, field, index) => {\n\t\t\tif (!field || field === \"0\") {\n\t\t\t\tconst lastLongest = acc[acc.length - 1];\n\t\t\t\tif (lastLongest && lastLongest.index + lastLongest.length === index) {\n\t\t\t\t\tlastLongest.length++;\n\t\t\t\t} else {\n\t\t\t\t\tacc.push({ index, length : 1 });\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, []);\n\n\t\tconst longestZeroFields = allZeroFields.sort((a, b) => b.length - a.length)[0];\n\n\t\tlet newHost:string;\n\t\tif (longestZeroFields && longestZeroFields.length > 1) {\n\t\t\tconst newFirst = fields.slice(0, longestZeroFields.index) ;\n\t\t\tconst newLast = fields.slice(longestZeroFields.index + longestZeroFields.length);\n\t\t\tnewHost = newFirst.join(\":\") + \"::\" + newLast.join(\":\");\n\t\t} else {\n\t\t\tnewHost = fields.join(\":\");\n\t\t}\n\n\t\tif (zone) {\n\t\t\tnewHost += \"%\" + zone;\n\t\t}\n\n\t\treturn newHost;\n\t} else {\n\t\treturn host;\n\t}\n}\n\nconst URI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?(\\[[^\\/?#\\]]+\\]|[^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n|\\r)*))?/i;\nconst NO_MATCH_IS_UNDEFINED = (<RegExpMatchArray>(\"\").match(/(){0}/))[1] === undefined;\n\nexport function parse(uriString:string, options:URIOptions = {}):URIComponents {\n\tconst components:URIComponents = {};\n\tconst protocol = (options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL);\n\n\tif (options.reference === \"suffix\") uriString = (options.scheme ? options.scheme + \":\" : \"\") + \"//\" + uriString;\n\n\tconst matches = uriString.match(URI_PARSE);\n\n\tif (matches) {\n\t\tif (NO_MATCH_IS_UNDEFINED) {\n\t\t\t//store each component\n\t\t\tcomponents.scheme = matches[1];\n\t\t\tcomponents.userinfo = matches[3];\n\t\t\tcomponents.host = matches[4];\n\t\t\tcomponents.port = parseInt(matches[5], 10);\n\t\t\tcomponents.path = matches[6] || \"\";\n\t\t\tcomponents.query = matches[7];\n\t\t\tcomponents.fragment = matches[8];\n\n\t\t\t//fix port number\n\t\t\tif (isNaN(components.port)) {\n\t\t\t\tcomponents.port = matches[5];\n\t\t\t}\n\t\t} else {  //IE FIX for improper RegExp matching\n\t\t\t//store each component\n\t\t\tcomponents.scheme = matches[1] || undefined;\n\t\t\tcomponents.userinfo = (uriString.indexOf(\"@\") !== -1 ? matches[3] : undefined);\n\t\t\tcomponents.host = (uriString.indexOf(\"//\") !== -1 ? matches[4] : undefined);\n\t\t\tcomponents.port = parseInt(matches[5], 10);\n\t\t\tcomponents.path = matches[6] || \"\";\n\t\t\tcomponents.query = (uriString.indexOf(\"?\") !== -1 ? matches[7] : undefined);\n\t\t\tcomponents.fragment = (uriString.indexOf(\"#\") !== -1 ? matches[8] : undefined);\n\n\t\t\t//fix port number\n\t\t\tif (isNaN(components.port)) {\n\t\t\t\tcomponents.port = (uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : undefined);\n\t\t\t}\n\t\t}\n\n\t\tif (components.host) {\n\t\t\t//normalize IP hosts\n\t\t\tcomponents.host = _normalizeIPv6(_normalizeIPv4(components.host, protocol), protocol);\n\t\t}\n\n\t\t//determine reference type\n\t\tif (components.scheme === undefined && components.userinfo === undefined && components.host === undefined && components.port === undefined && !components.path && components.query === undefined) {\n\t\t\tcomponents.reference = \"same-document\";\n\t\t} else if (components.scheme === undefined) {\n\t\t\tcomponents.reference = \"relative\";\n\t\t} else if (components.fragment === undefined) {\n\t\t\tcomponents.reference = \"absolute\";\n\t\t} else {\n\t\t\tcomponents.reference = \"uri\";\n\t\t}\n\n\t\t//check for reference errors\n\t\tif (options.reference && options.reference !== \"suffix\" && options.reference !== components.reference) {\n\t\t\tcomponents.error = components.error || \"URI is not a \" + options.reference + \" reference.\";\n\t\t}\n\n\t\t//find scheme handler\n\t\tconst schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n\n\t\t//check if scheme can't handle IRIs\n\t\tif (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n\t\t\t//if host component is a domain name\n\t\t\tif (components.host && (options.domainHost || (schemeHandler && schemeHandler.domainHost))) {\n\t\t\t\t//convert Unicode IDN -> ASCII IDN\n\t\t\t\ttry {\n\t\t\t\t\tcomponents.host = punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase());\n\t\t\t\t} catch (e) {\n\t\t\t\t\tcomponents.error = components.error || \"Host's domain name can not be converted to ASCII via punycode: \" + e;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//convert IRI -> URI\n\t\t\t_normalizeComponentEncoding(components, URI_PROTOCOL);\n\t\t} else {\n\t\t\t//normalize encodings\n\t\t\t_normalizeComponentEncoding(components, protocol);\n\t\t}\n\n\t\t//perform scheme specific parsing\n\t\tif (schemeHandler && schemeHandler.parse) {\n\t\t\tschemeHandler.parse(components, options);\n\t\t}\n\t} else {\n\t\tcomponents.error = components.error || \"URI can not be parsed.\";\n\t}\n\n\treturn components;\n};\n\nfunction _recomposeAuthority(components:URIComponents, options:URIOptions):string|undefined {\n\tconst protocol = (options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL);\n\tconst uriTokens:Array<string> = [];\n\n\tif (components.userinfo !== undefined) {\n\t\turiTokens.push(components.userinfo);\n\t\turiTokens.push(\"@\");\n\t}\n\n\tif (components.host !== undefined) {\n\t\t//normalize IP hosts, add brackets and escape zone separator for IPv6\n\t\turiTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host), protocol), protocol).replace(protocol.IPV6ADDRESS, (_, $1, $2) => \"[\" + $1 + ($2 ? \"%25\" + $2 : \"\") + \"]\"));\n\t}\n\n\tif (typeof components.port === \"number\" || typeof components.port === \"string\") {\n\t\turiTokens.push(\":\");\n\t\turiTokens.push(String(components.port));\n\t}\n\n\treturn uriTokens.length ? uriTokens.join(\"\") : undefined;\n};\n\nconst RDS1 = /^\\.\\.?\\//;\nconst RDS2 = /^\\/\\.(\\/|$)/;\nconst RDS3 = /^\\/\\.\\.(\\/|$)/;\nconst RDS4 = /^\\.\\.?$/;\nconst RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/;\n\nexport function removeDotSegments(input:string):string {\n\tconst output:Array<string> = [];\n\n\twhile (input.length) {\n\t\tif (input.match(RDS1)) {\n\t\t\tinput = input.replace(RDS1, \"\");\n\t\t} else if (input.match(RDS2)) {\n\t\t\tinput = input.replace(RDS2, \"/\");\n\t\t} else if (input.match(RDS3)) {\n\t\t\tinput = input.replace(RDS3, \"/\");\n\t\t\toutput.pop();\n\t\t} else if (input === \".\" || input === \"..\") {\n\t\t\tinput = \"\";\n\t\t} else {\n\t\t\tconst im = input.match(RDS5);\n\t\t\tif (im) {\n\t\t\t\tconst s = im[0];\n\t\t\t\tinput = input.slice(s.length);\n\t\t\t\toutput.push(s);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Unexpected dot segment condition\");\n\t\t\t}\n\t\t}\n\t}\n\n\treturn output.join(\"\");\n};\n\nexport function serialize(components:URIComponents, options:URIOptions = {}):string {\n\tconst protocol = (options.iri ? IRI_PROTOCOL : URI_PROTOCOL);\n\tconst uriTokens:Array<string> = [];\n\n\t//find scheme handler\n\tconst schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n\n\t//perform scheme specific serialization\n\tif (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(components, options);\n\n\tif (components.host) {\n\t\t//if host component is an IPv6 address\n\t\tif (protocol.IPV6ADDRESS.test(components.host)) {\n\t\t\t//TODO: normalize IPv6 address as per RFC 5952\n\t\t}\n\n\t\t//if host component is a domain name\n\t\telse if (options.domainHost || (schemeHandler && schemeHandler.domainHost)) {\n\t\t\t//convert IDN via punycode\n\t\t\ttry {\n\t\t\t\tcomponents.host = (!options.iri ? punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase()) : punycode.toUnicode(components.host));\n\t\t\t} catch (e) {\n\t\t\t\tcomponents.error = components.error || \"Host's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n\t\t\t}\n\t\t}\n\t}\n\n\t//normalize encoding\n\t_normalizeComponentEncoding(components, protocol);\n\n\tif (options.reference !== \"suffix\" && components.scheme) {\n\t\turiTokens.push(components.scheme);\n\t\turiTokens.push(\":\");\n\t}\n\n\tconst authority = _recomposeAuthority(components, options);\n\tif (authority !== undefined) {\n\t\tif (options.reference !== \"suffix\") {\n\t\t\turiTokens.push(\"//\");\n\t\t}\n\n\t\turiTokens.push(authority);\n\n\t\tif (components.path && components.path.charAt(0) !== \"/\") {\n\t\t\turiTokens.push(\"/\");\n\t\t}\n\t}\n\n\tif (components.path !== undefined) {\n\t\tlet s = components.path;\n\n\t\tif (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n\t\t\ts = removeDotSegments(s);\n\t\t}\n\n\t\tif (authority === undefined) {\n\t\t\ts = s.replace(/^\\/\\//, \"/%2F\");  //don't allow the path to start with \"//\"\n\t\t}\n\n\t\turiTokens.push(s);\n\t}\n\n\tif (components.query !== undefined) {\n\t\turiTokens.push(\"?\");\n\t\turiTokens.push(components.query);\n\t}\n\n\tif (components.fragment !== undefined) {\n\t\turiTokens.push(\"#\");\n\t\turiTokens.push(components.fragment);\n\t}\n\n\treturn uriTokens.join(\"\");  //merge tokens into a string\n};\n\nexport function resolveComponents(base:URIComponents, relative:URIComponents, options:URIOptions = {}, skipNormalization?:boolean):URIComponents {\n\tconst target:URIComponents = {};\n\n\tif (!skipNormalization) {\n\t\tbase = parse(serialize(base, options), options);  //normalize base components\n\t\trelative = parse(serialize(relative, options), options);  //normalize relative components\n\t}\n\toptions = options || {};\n\n\tif (!options.tolerant && relative.scheme) {\n\t\ttarget.scheme = relative.scheme;\n\t\t//target.authority = relative.authority;\n\t\ttarget.userinfo = relative.userinfo;\n\t\ttarget.host = relative.host;\n\t\ttarget.port = relative.port;\n\t\ttarget.path = removeDotSegments(relative.path || \"\");\n\t\ttarget.query = relative.query;\n\t} else {\n\t\tif (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n\t\t\t//target.authority = relative.authority;\n\t\t\ttarget.userinfo = relative.userinfo;\n\t\t\ttarget.host = relative.host;\n\t\t\ttarget.port = relative.port;\n\t\t\ttarget.path = removeDotSegments(relative.path || \"\");\n\t\t\ttarget.query = relative.query;\n\t\t} else {\n\t\t\tif (!relative.path) {\n\t\t\t\ttarget.path = base.path;\n\t\t\t\tif (relative.query !== undefined) {\n\t\t\t\t\ttarget.query = relative.query;\n\t\t\t\t} else {\n\t\t\t\t\ttarget.query = base.query;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (relative.path.charAt(0) === \"/\") {\n\t\t\t\t\ttarget.path = removeDotSegments(relative.path);\n\t\t\t\t} else {\n\t\t\t\t\tif ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n\t\t\t\t\t\ttarget.path = \"/\" + relative.path;\n\t\t\t\t\t} else if (!base.path) {\n\t\t\t\t\t\ttarget.path = relative.path;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget.path = base.path.slice(0, base.path.lastIndexOf(\"/\") + 1) + relative.path;\n\t\t\t\t\t}\n\t\t\t\t\ttarget.path = removeDotSegments(target.path);\n\t\t\t\t}\n\t\t\t\ttarget.query = relative.query;\n\t\t\t}\n\t\t\t//target.authority = base.authority;\n\t\t\ttarget.userinfo = base.userinfo;\n\t\t\ttarget.host = base.host;\n\t\t\ttarget.port = base.port;\n\t\t}\n\t\ttarget.scheme = base.scheme;\n\t}\n\n\ttarget.fragment = relative.fragment;\n\n\treturn target;\n};\n\nexport function resolve(baseURI:string, relativeURI:string, options?:URIOptions):string {\n\tconst schemelessOptions = assign({ scheme : 'null' }, options);\n\treturn serialize(resolveComponents(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true), schemelessOptions);\n};\n\nexport function normalize(uri:string, options?:URIOptions):string;\nexport function normalize(uri:URIComponents, options?:URIOptions):URIComponents;\nexport function normalize(uri:any, options?:URIOptions):any {\n\tif (typeof uri === \"string\") {\n\t\turi = serialize(parse(uri, options), options);\n\t} else if (typeOf(uri) === \"object\") {\n\t\turi = parse(serialize(<URIComponents>uri, options), options);\n\t}\n\n\treturn uri;\n};\n\nexport function equal(uriA:string, uriB:string, options?: URIOptions):boolean;\nexport function equal(uriA:URIComponents, uriB:URIComponents, options?:URIOptions):boolean;\nexport function equal(uriA:any, uriB:any, options?:URIOptions):boolean {\n\tif (typeof uriA === \"string\") {\n\t\turiA = serialize(parse(uriA, options), options);\n\t} else if (typeOf(uriA) === \"object\") {\n\t\turiA = serialize(<URIComponents>uriA, options);\n\t}\n\n\tif (typeof uriB === \"string\") {\n\t\turiB = serialize(parse(uriB, options), options);\n\t} else if (typeOf(uriB) === \"object\") {\n\t\turiB = serialize(<URIComponents>uriB, options);\n\t}\n\n\treturn uriA === uriB;\n};\n\nexport function escapeComponent(str:string, options?:URIOptions):string {\n\treturn str && str.toString().replace((!options || !options.iri ? URI_PROTOCOL.ESCAPE : IRI_PROTOCOL.ESCAPE), pctEncChar);\n};\n\nexport function unescapeComponent(str:string, options?:URIOptions):string {\n\treturn str && str.toString().replace((!options || !options.iri ? URI_PROTOCOL.PCT_ENCODED : IRI_PROTOCOL.PCT_ENCODED), pctDecChars);\n};\n", "'use strict';\n\n/** Highest positive signed 32-bit float value */\nconst maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nconst base = 36;\nconst tMin = 1;\nconst tMax = 26;\nconst skew = 38;\nconst damp = 700;\nconst initialBias = 72;\nconst initialN = 128; // 0x80\nconst delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nconst regexPunycode = /^xn--/;\nconst regexNonASCII = /[^\\0-\\x7E]/; // non-ASCII chars\nconst regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nconst errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nconst baseMinusTMin = base - tMin;\nconst floor = Math.floor;\nconst stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n\tconst result = [];\n\tlet length = array.length;\n\twhile (length--) {\n\t\tresult[length] = fn(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n\tconst parts = string.split('@');\n\tlet result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tstring = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tstring = string.replace(regexSeparators, '\\x2E');\n\tconst labels = string.split('.');\n\tconst encoded = map(labels, fn).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tconst output = [];\n\tlet counter = 0;\n\tconst length = string.length;\n\twhile (counter < length) {\n\t\tconst value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tconst extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nconst ucs2encode = array => String.fromCodePoint(...array);\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nconst basicToDigit = function(codePoint) {\n\tif (codePoint - 0x30 < 0x0A) {\n\t\treturn codePoint - 0x16;\n\t}\n\tif (codePoint - 0x41 < 0x1A) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint - 0x61 < 0x1A) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nconst digitToBasic = function(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nconst adapt = function(delta, numPoints, firstTime) {\n\tlet k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nconst decode = function(input) {\n\t// Don't use UCS-2.\n\tconst output = [];\n\tconst inputLength = input.length;\n\tlet i = 0;\n\tlet n = initialN;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tlet basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (let j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (let index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tlet oldi = i;\n\t\tfor (let w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\n\t\t\tconst digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\n\t\t}\n\n\t\tconst out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\n\t}\n\n\treturn String.fromCodePoint(...output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nconst encode = function(input) {\n\tconst output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tlet inputLength = input.length;\n\n\t// Initialize the state.\n\tlet n = initialN;\n\tlet delta = 0;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points.\n\tfor (const currentValue of input) {\n\t\tif (currentValue < 0x80) {\n\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t}\n\t}\n\n\tlet basicLength = output.length;\n\tlet handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tlet m = maxInt;\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\tm = currentValue;\n\t\t\t}\n\t\t}\n\n\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t// but guard against overflow.\n\t\tconst handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\t\t\tif (currentValue == n) {\n\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\tlet q = delta;\n\t\t\t\tfor (let k = base; /* no condition */; k += base) {\n\t\t\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst qMinusT = q - t;\n\t\t\t\t\tconst baseMinusT = base - t;\n\t\t\t\t\toutput.push(\n\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t);\n\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t}\n\n\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\tdelta = 0;\n\t\t\t\t++handledCPCount;\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nconst toUnicode = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexPunycode.test(string)\n\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t: string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nconst toASCII = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexNonASCII.test(string)\n\t\t\t? 'xn--' + encode(string)\n\t\t\t: string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nconst punycode = {\n\t/**\n\t * A string representing the current Punycode.js version number.\n\t * @memberOf punycode\n\t * @type String\n\t */\n\t'version': '2.1.0',\n\t/**\n\t * An object of methods to convert from JavaScript's internal character\n\t * representation (UCS-2) to Unicode code points, and back.\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode\n\t * @type Object\n\t */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\nexport default punycode;\n", "import { URIRegExps } from \"./uri\";\nimport { buildExps } from \"./regexps-uri\";\n\nexport default buildExps(true);\n", "import { URIRegExps } from \"./uri\";\nimport { merge, subexp } from \"./util\";\n\nexport function buildExps(isIRI:boolean):URIRegExps {\n\tconst\n\t\tALPHA$$ = \"[A-Za-z]\",\n\t\tCR$ = \"[\\\\x0D]\",\n\t\tDIGIT$$ = \"[0-9]\",\n\t\tDQUOTE$$ = \"[\\\\x22]\",\n\t\tHEXDIG$$ = merge(DIGIT$$, \"[A-Fa-f]\"),  //case-insensitive\n\t\tLF$$ = \"[\\\\x0A]\",\n\t\tSP$$ = \"[\\\\x20]\",\n\t\tPCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$)),  //expanded\n\t\tGEN_DELIMS$$ = \"[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\",\n\t\tSUB_DELIMS$$ = \"[\\\\!\\\\$\\\\&\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\",\n\t\tRESERVED$$ = merge(GEN_DELIMS$$, SUB_DELIMS$$),\n\t\tUCSCHAR$$ = isIRI ? \"[\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]\" : \"[]\",  //subset, excludes bidi control characters\n\t\tIPRIVATE$$ = isIRI ? \"[\\\\uE000-\\\\uF8FF]\" : \"[]\",  //subset\n\t\tUNRESERVED$$ = merge(ALPHA$$, DIGIT$$, \"[\\\\-\\\\.\\\\_\\\\~]\", UCSCHAR$$),\n\t\tSCHEME$ = subexp(ALPHA$$ + merge(ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\") + \"*\"),\n\t\tUSERINFO$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\")) + \"*\"),\n\t\tDEC_OCTET$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"[1-9]\" + DIGIT$$) + \"|\" + DIGIT$$),\n\t\tDEC_OCTET_RELAXED$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"0?[1-9]\" + DIGIT$$) + \"|0?0?\" + DIGIT$$),  //relaxed parsing rules\n\t\tIPV4ADDRESS$ = subexp(DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$),\n\t\tH16$ = subexp(HEXDIG$$ + \"{1,4}\"),\n\t\tLS32$ = subexp(subexp(H16$ + \"\\\\:\" + H16$) + \"|\" + IPV4ADDRESS$),\n\t\tIPV6ADDRESS1$ = subexp(                                                            subexp(H16$ + \"\\\\:\") + \"{6}\" + LS32$), //                           6( h16 \":\" ) ls32\n\t\tIPV6ADDRESS2$ = subexp(                                                 \"\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{5}\" + LS32$), //                      \"::\" 5( h16 \":\" ) ls32\n\t\tIPV6ADDRESS3$ = subexp(subexp(                                 H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{4}\" + LS32$), //[               h16 ] \"::\" 4( h16 \":\" ) ls32\n\t\tIPV6ADDRESS4$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,1}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{3}\" + LS32$), //[ *1( h16 \":\" ) h16 ] \"::\" 3( h16 \":\" ) ls32\n\t\tIPV6ADDRESS5$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,2}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{2}\" + LS32$), //[ *2( h16 \":\" ) h16 ] \"::\" 2( h16 \":\" ) ls32\n\t\tIPV6ADDRESS6$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,3}\" + H16$) + \"?\\\\:\\\\:\" +        H16$ + \"\\\\:\"          + LS32$), //[ *3( h16 \":\" ) h16 ] \"::\"    h16 \":\"   ls32\n\t\tIPV6ADDRESS7$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,4}\" + H16$) + \"?\\\\:\\\\:\"                                + LS32$), //[ *4( h16 \":\" ) h16 ] \"::\"              ls32\n\t\tIPV6ADDRESS8$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,5}\" + H16$) + \"?\\\\:\\\\:\"                                + H16$ ), //[ *5( h16 \":\" ) h16 ] \"::\"              h16\n\t\tIPV6ADDRESS9$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,6}\" + H16$) + \"?\\\\:\\\\:\"                                       ), //[ *6( h16 \":\" ) h16 ] \"::\"\n\t\tIPV6ADDRESS$ = subexp([IPV6ADDRESS1$, IPV6ADDRESS2$, IPV6ADDRESS3$, IPV6ADDRESS4$, IPV6ADDRESS5$, IPV6ADDRESS6$, IPV6ADDRESS7$, IPV6ADDRESS8$, IPV6ADDRESS9$].join(\"|\")),\n\t\tZONEID$ = subexp(subexp(UNRESERVED$$ + \"|\" + PCT_ENCODED$) + \"+\"),  //RFC 6874\n\t\tIPV6ADDRZ$ = subexp(IPV6ADDRESS$ + \"\\\\%25\" + ZONEID$),  //RFC 6874\n\t\tIPV6ADDRZ_RELAXED$ = subexp(IPV6ADDRESS$ + subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$ + \"{2})\") + ZONEID$),  //RFC 6874, with relaxed parsing rules\n\t\tIPVFUTURE$ = subexp(\"[vV]\" + HEXDIG$$ + \"+\\\\.\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"),\n\t\tIP_LITERAL$ = subexp(\"\\\\[\" + subexp(IPV6ADDRZ_RELAXED$ + \"|\" + IPV6ADDRESS$ + \"|\" + IPVFUTURE$) + \"\\\\]\"),  //RFC 6874\n\t\tREG_NAME$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$)) + \"*\"),\n\t\tHOST$ = subexp(IP_LITERAL$ + \"|\" + IPV4ADDRESS$ + \"(?!\" + REG_NAME$ + \")\" + \"|\" + REG_NAME$),\n\t\tPORT$ = subexp(DIGIT$$ + \"*\"),\n\t\tAUTHORITY$ = subexp(subexp(USERINFO$ + \"@\") + \"?\" + HOST$ + subexp(\"\\\\:\" + PORT$) + \"?\"),\n\t\tPCHAR$ = subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@]\")),\n\t\tSEGMENT$ = subexp(PCHAR$ + \"*\"),\n\t\tSEGMENT_NZ$ = subexp(PCHAR$ + \"+\"),\n\t\tSEGMENT_NZ_NC$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\@]\")) + \"+\"),\n\t\tPATH_ABEMPTY$ = subexp(subexp(\"\\\\/\" + SEGMENT$) + \"*\"),\n\t\tPATH_ABSOLUTE$ = subexp(\"\\\\/\" + subexp(SEGMENT_NZ$ + PATH_ABEMPTY$) + \"?\"),  //simplified\n\t\tPATH_NOSCHEME$ = subexp(SEGMENT_NZ_NC$ + PATH_ABEMPTY$),  //simplified\n\t\tPATH_ROOTLESS$ = subexp(SEGMENT_NZ$ + PATH_ABEMPTY$),  //simplified\n\t\tPATH_EMPTY$ = \"(?!\" + PCHAR$ + \")\",\n\t\tPATH$ = subexp(PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\n\t\tQUERY$ = subexp(subexp(PCHAR$ + \"|\" + merge(\"[\\\\/\\\\?]\", IPRIVATE$$)) + \"*\"),\n\t\tFRAGMENT$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"),\n\t\tHIER_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\n\t\tURI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\n\t\tRELATIVE_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$),\n\t\tRELATIVE$ = subexp(RELATIVE_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\n\t\tURI_REFERENCE$ = subexp(URI$ + \"|\" + RELATIVE$),\n\t\tABSOLUTE_URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\"),\n\n\t\tGENERIC_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n\t\tRELATIVE_REF$ = \"^(){0}\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n\t\tABSOLUTE_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?$\",\n\t\tSAMEDOC_REF$ = \"^\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n\t\tAUTHORITY_REF$ = \"^\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?$\"\n\t;\n\n\treturn {\n\t\tNOT_SCHEME : new RegExp(merge(\"[^]\", ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\"), \"g\"),\n\t\tNOT_USERINFO : new RegExp(merge(\"[^\\\\%\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n\t\tNOT_HOST : new RegExp(merge(\"[^\\\\%\\\\[\\\\]\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n\t\tNOT_PATH : new RegExp(merge(\"[^\\\\%\\\\/\\\\:\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n\t\tNOT_PATH_NOSCHEME : new RegExp(merge(\"[^\\\\%\\\\/\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n\t\tNOT_QUERY : new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\", IPRIVATE$$), \"g\"),\n\t\tNOT_FRAGMENT : new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\"), \"g\"),\n\t\tESCAPE : new RegExp(merge(\"[^]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n\t\tUNRESERVED : new RegExp(UNRESERVED$$, \"g\"),\n\t\tOTHER_CHARS : new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, RESERVED$$), \"g\"),\n\t\tPCT_ENCODED : new RegExp(PCT_ENCODED$, \"g\"),\n\t\tIPV4ADDRESS : new RegExp(\"^(\" + IPV4ADDRESS$ + \")$\"),\n\t\tIPV6ADDRESS : new RegExp(\"^\\\\[?(\" + IPV6ADDRESS$ + \")\" + subexp(subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$ + \"{2})\") + \"(\" + ZONEID$ + \")\") + \"?\\\\]?$\")  //RFC 6874, with relaxed parsing rules\n\t};\n}\n\nexport default buildExps(false);\n", "export function merge(...sets:Array<string>):string {\n\tif (sets.length > 1) {\n\t\tsets[0] = sets[0].slice(0, -1);\n\t\tconst xl = sets.length - 1;\n\t\tfor (let x = 1; x < xl; ++x) {\n\t\t\tsets[x] = sets[x].slice(1, -1);\n\t\t}\n\t\tsets[xl] = sets[xl].slice(1);\n\t\treturn sets.join('');\n\t} else {\n\t\treturn sets[0];\n\t}\n}\n\nexport function subexp(str:string):string {\n\treturn \"(?:\" + str + \")\";\n}\n\nexport function typeOf(o:any):string {\n\treturn o === undefined ? \"undefined\" : (o === null ? \"null\" : Object.prototype.toString.call(o).split(\" \").pop().split(\"]\").shift().toLowerCase());\n}\n\nexport function toUpperCase(str:string):string {\n\treturn str.toUpperCase();\n}\n\nexport function toArray(obj:any):Array<any> {\n\treturn obj !== undefined && obj !== null ? (obj instanceof Array ? obj : (typeof obj.length !== \"number\" || obj.split || obj.setInterval || obj.call ? [obj] : Array.prototype.slice.call(obj))) : [];\n}\n\n\nexport function assign(target: object, source: any): any {\n\tconst obj = target as any;\n\tif (source) {\n\t\tfor (const key in source) {\n\t\t\tobj[key] = source[key];\n\t\t}\n\t}\n\treturn obj;\n}", "'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n", "'use strict';\n\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nmodule.exports = function ucs2length(str) {\n  var length = 0\n    , len = str.length\n    , pos = 0\n    , value;\n  while (pos < len) {\n    length++;\n    value = str.charCodeAt(pos++);\n    if (value >= 0xD800 && value <= 0xDBFF && pos < len) {\n      // high surrogate, and there is a next character\n      value = str.charCodeAt(pos);\n      if ((value & 0xFC00) == 0xDC00) pos++; // low surrogate\n    }\n  }\n  return length;\n};\n", "'use strict';\n\n\nmodule.exports = {\n  copy: copy,\n  checkDataType: checkDataType,\n  checkDataTypes: checkDataTypes,\n  coerceToTypes: coerceToTypes,\n  toHash: toHash,\n  getProperty: getProperty,\n  escapeQuotes: escapeQuotes,\n  equal: require('fast-deep-equal'),\n  ucs2length: require('./ucs2length'),\n  varOccurences: varOccurences,\n  varReplace: varReplace,\n  schemaHasRules: schemaHasRules,\n  schemaHasRulesExcept: schemaHasRulesExcept,\n  schemaUnknownRules: schemaUnknownRules,\n  toQuotedString: toQuotedString,\n  getPathExpr: getPathExpr,\n  getPath: getPath,\n  getData: getData,\n  unescapeFragment: unescapeFragment,\n  unescapeJsonPointer: unescapeJsonPointer,\n  escapeFragment: escapeFragment,\n  escapeJsonPointer: escapeJsonPointer\n};\n\n\nfunction copy(o, to) {\n  to = to || {};\n  for (var key in o) to[key] = o[key];\n  return to;\n}\n\n\nfunction checkDataType(dataType, data, strictNumbers, negate) {\n  var EQUAL = negate ? ' !== ' : ' === '\n    , AND = negate ? ' || ' : ' && '\n    , OK = negate ? '!' : ''\n    , NOT = negate ? '' : '!';\n  switch (dataType) {\n    case 'null': return data + EQUAL + 'null';\n    case 'array': return OK + 'Array.isArray(' + data + ')';\n    case 'object': return '(' + OK + data + AND +\n                          'typeof ' + data + EQUAL + '\"object\"' + AND +\n                          NOT + 'Array.isArray(' + data + '))';\n    case 'integer': return '(typeof ' + data + EQUAL + '\"number\"' + AND +\n                           NOT + '(' + data + ' % 1)' +\n                           AND + data + EQUAL + data +\n                           (strictNumbers ? (AND + OK + 'isFinite(' + data + ')') : '') + ')';\n    case 'number': return '(typeof ' + data + EQUAL + '\"' + dataType + '\"' +\n                          (strictNumbers ? (AND + OK + 'isFinite(' + data + ')') : '') + ')';\n    default: return 'typeof ' + data + EQUAL + '\"' + dataType + '\"';\n  }\n}\n\n\nfunction checkDataTypes(dataTypes, data, strictNumbers) {\n  switch (dataTypes.length) {\n    case 1: return checkDataType(dataTypes[0], data, strictNumbers, true);\n    default:\n      var code = '';\n      var types = toHash(dataTypes);\n      if (types.array && types.object) {\n        code = types.null ? '(': '(!' + data + ' || ';\n        code += 'typeof ' + data + ' !== \"object\")';\n        delete types.null;\n        delete types.array;\n        delete types.object;\n      }\n      if (types.number) delete types.integer;\n      for (var t in types)\n        code += (code ? ' && ' : '' ) + checkDataType(t, data, strictNumbers, true);\n\n      return code;\n  }\n}\n\n\nvar COERCE_TO_TYPES = toHash([ 'string', 'number', 'integer', 'boolean', 'null' ]);\nfunction coerceToTypes(optionCoerceTypes, dataTypes) {\n  if (Array.isArray(dataTypes)) {\n    var types = [];\n    for (var i=0; i<dataTypes.length; i++) {\n      var t = dataTypes[i];\n      if (COERCE_TO_TYPES[t]) types[types.length] = t;\n      else if (optionCoerceTypes === 'array' && t === 'array') types[types.length] = t;\n    }\n    if (types.length) return types;\n  } else if (COERCE_TO_TYPES[dataTypes]) {\n    return [dataTypes];\n  } else if (optionCoerceTypes === 'array' && dataTypes === 'array') {\n    return ['array'];\n  }\n}\n\n\nfunction toHash(arr) {\n  var hash = {};\n  for (var i=0; i<arr.length; i++) hash[arr[i]] = true;\n  return hash;\n}\n\n\nvar IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nvar SINGLE_QUOTE = /'|\\\\/g;\nfunction getProperty(key) {\n  return typeof key == 'number'\n          ? '[' + key + ']'\n          : IDENTIFIER.test(key)\n            ? '.' + key\n            : \"['\" + escapeQuotes(key) + \"']\";\n}\n\n\nfunction escapeQuotes(str) {\n  return str.replace(SINGLE_QUOTE, '\\\\$&')\n            .replace(/\\n/g, '\\\\n')\n            .replace(/\\r/g, '\\\\r')\n            .replace(/\\f/g, '\\\\f')\n            .replace(/\\t/g, '\\\\t');\n}\n\n\nfunction varOccurences(str, dataVar) {\n  dataVar += '[^0-9]';\n  var matches = str.match(new RegExp(dataVar, 'g'));\n  return matches ? matches.length : 0;\n}\n\n\nfunction varReplace(str, dataVar, expr) {\n  dataVar += '([^0-9])';\n  expr = expr.replace(/\\$/g, '$$$$');\n  return str.replace(new RegExp(dataVar, 'g'), expr + '$1');\n}\n\n\nfunction schemaHasRules(schema, rules) {\n  if (typeof schema == 'boolean') return !schema;\n  for (var key in schema) if (rules[key]) return true;\n}\n\n\nfunction schemaHasRulesExcept(schema, rules, exceptKeyword) {\n  if (typeof schema == 'boolean') return !schema && exceptKeyword != 'not';\n  for (var key in schema) if (key != exceptKeyword && rules[key]) return true;\n}\n\n\nfunction schemaUnknownRules(schema, rules) {\n  if (typeof schema == 'boolean') return;\n  for (var key in schema) if (!rules[key]) return key;\n}\n\n\nfunction toQuotedString(str) {\n  return '\\'' + escapeQuotes(str) + '\\'';\n}\n\n\nfunction getPathExpr(currentPath, expr, jsonPointers, isNumber) {\n  var path = jsonPointers // false by default\n              ? '\\'/\\' + ' + expr + (isNumber ? '' : '.replace(/~/g, \\'~0\\').replace(/\\\\//g, \\'~1\\')')\n              : (isNumber ? '\\'[\\' + ' + expr + ' + \\']\\'' : '\\'[\\\\\\'\\' + ' + expr + ' + \\'\\\\\\']\\'');\n  return joinPaths(currentPath, path);\n}\n\n\nfunction getPath(currentPath, prop, jsonPointers) {\n  var path = jsonPointers // false by default\n              ? toQuotedString('/' + escapeJsonPointer(prop))\n              : toQuotedString(getProperty(prop));\n  return joinPaths(currentPath, path);\n}\n\n\nvar JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nvar RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, lvl, paths) {\n  var up, jsonPointer, data, matches;\n  if ($data === '') return 'rootData';\n  if ($data[0] == '/') {\n    if (!JSON_POINTER.test($data)) throw new Error('Invalid JSON-pointer: ' + $data);\n    jsonPointer = $data;\n    data = 'rootData';\n  } else {\n    matches = $data.match(RELATIVE_JSON_POINTER);\n    if (!matches) throw new Error('Invalid JSON-pointer: ' + $data);\n    up = +matches[1];\n    jsonPointer = matches[2];\n    if (jsonPointer == '#') {\n      if (up >= lvl) throw new Error('Cannot access property/index ' + up + ' levels up, current level is ' + lvl);\n      return paths[lvl - up];\n    }\n\n    if (up > lvl) throw new Error('Cannot access data ' + up + ' levels up, current level is ' + lvl);\n    data = 'data' + ((lvl - up) || '');\n    if (!jsonPointer) return data;\n  }\n\n  var expr = data;\n  var segments = jsonPointer.split('/');\n  for (var i=0; i<segments.length; i++) {\n    var segment = segments[i];\n    if (segment) {\n      data += getProperty(unescapeJsonPointer(segment));\n      expr += ' && ' + data;\n    }\n  }\n  return expr;\n}\n\n\nfunction joinPaths (a, b) {\n  if (a == '\"\"') return b;\n  return (a + ' + ' + b).replace(/([^\\\\])' \\+ '/g, '$1');\n}\n\n\nfunction unescapeFragment(str) {\n  return unescapeJsonPointer(decodeURIComponent(str));\n}\n\n\nfunction escapeFragment(str) {\n  return encodeURIComponent(escapeJsonPointer(str));\n}\n\n\nfunction escapeJsonPointer(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n\n\nfunction unescapeJsonPointer(str) {\n  return str.replace(/~1/g, '/').replace(/~0/g, '~');\n}\n", "'use strict';\n\nvar util = require('./util');\n\nmodule.exports = SchemaObject;\n\nfunction SchemaObject(obj) {\n  util.copy(obj, this);\n}\n", "'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n", "'use strict';\n\nvar URI = require('uri-js')\n  , equal = require('fast-deep-equal')\n  , util = require('./util')\n  , SchemaObject = require('./schema_obj')\n  , traverse = require('json-schema-traverse');\n\nmodule.exports = resolve;\n\nresolve.normalizeId = normalizeId;\nresolve.fullPath = getFullPath;\nresolve.url = resolveUrl;\nresolve.ids = resolveIds;\nresolve.inlineRef = inlineRef;\nresolve.schema = resolveSchema;\n\n/**\n * [resolve and compile the references ($ref)]\n * @this   Ajv\n * @param  {Function} compile reference to schema compilation funciton (localCompile)\n * @param  {Object} root object with information about the root schema for the current schema\n * @param  {String} ref reference to resolve\n * @return {Object|Function} schema object (if the schema can be inlined) or validation function\n */\nfunction resolve(compile, root, ref) {\n  /* jshint validthis: true */\n  var refVal = this._refs[ref];\n  if (typeof refVal == 'string') {\n    if (this._refs[refVal]) refVal = this._refs[refVal];\n    else return resolve.call(this, compile, root, refVal);\n  }\n\n  refVal = refVal || this._schemas[ref];\n  if (refVal instanceof SchemaObject) {\n    return inlineRef(refVal.schema, this._opts.inlineRefs)\n            ? refVal.schema\n            : refVal.validate || this._compile(refVal);\n  }\n\n  var res = resolveSchema.call(this, root, ref);\n  var schema, v, baseId;\n  if (res) {\n    schema = res.schema;\n    root = res.root;\n    baseId = res.baseId;\n  }\n\n  if (schema instanceof SchemaObject) {\n    v = schema.validate || compile.call(this, schema.schema, root, undefined, baseId);\n  } else if (schema !== undefined) {\n    v = inlineRef(schema, this._opts.inlineRefs)\n        ? schema\n        : compile.call(this, schema, root, undefined, baseId);\n  }\n\n  return v;\n}\n\n\n/**\n * Resolve schema, its root and baseId\n * @this Ajv\n * @param  {Object} root root object with properties schema, refVal, refs\n * @param  {String} ref  reference to resolve\n * @return {Object} object with properties schema, root, baseId\n */\nfunction resolveSchema(root, ref) {\n  /* jshint validthis: true */\n  var p = URI.parse(ref)\n    , refPath = _getFullPath(p)\n    , baseId = getFullPath(this._getId(root.schema));\n  if (Object.keys(root.schema).length === 0 || refPath !== baseId) {\n    var id = normalizeId(refPath);\n    var refVal = this._refs[id];\n    if (typeof refVal == 'string') {\n      return resolveRecursive.call(this, root, refVal, p);\n    } else if (refVal instanceof SchemaObject) {\n      if (!refVal.validate) this._compile(refVal);\n      root = refVal;\n    } else {\n      refVal = this._schemas[id];\n      if (refVal instanceof SchemaObject) {\n        if (!refVal.validate) this._compile(refVal);\n        if (id == normalizeId(ref))\n          return { schema: refVal, root: root, baseId: baseId };\n        root = refVal;\n      } else {\n        return;\n      }\n    }\n    if (!root.schema) return;\n    baseId = getFullPath(this._getId(root.schema));\n  }\n  return getJsonPointer.call(this, p, baseId, root.schema, root);\n}\n\n\n/* @this Ajv */\nfunction resolveRecursive(root, ref, parsedRef) {\n  /* jshint validthis: true */\n  var res = resolveSchema.call(this, root, ref);\n  if (res) {\n    var schema = res.schema;\n    var baseId = res.baseId;\n    root = res.root;\n    var id = this._getId(schema);\n    if (id) baseId = resolveUrl(baseId, id);\n    return getJsonPointer.call(this, parsedRef, baseId, schema, root);\n  }\n}\n\n\nvar PREVENT_SCOPE_CHANGE = util.toHash(['properties', 'patternProperties', 'enum', 'dependencies', 'definitions']);\n/* @this Ajv */\nfunction getJsonPointer(parsedRef, baseId, schema, root) {\n  /* jshint validthis: true */\n  parsedRef.fragment = parsedRef.fragment || '';\n  if (parsedRef.fragment.slice(0,1) != '/') return;\n  var parts = parsedRef.fragment.split('/');\n\n  for (var i = 1; i < parts.length; i++) {\n    var part = parts[i];\n    if (part) {\n      part = util.unescapeFragment(part);\n      schema = schema[part];\n      if (schema === undefined) break;\n      var id;\n      if (!PREVENT_SCOPE_CHANGE[part]) {\n        id = this._getId(schema);\n        if (id) baseId = resolveUrl(baseId, id);\n        if (schema.$ref) {\n          var $ref = resolveUrl(baseId, schema.$ref);\n          var res = resolveSchema.call(this, root, $ref);\n          if (res) {\n            schema = res.schema;\n            root = res.root;\n            baseId = res.baseId;\n          }\n        }\n      }\n    }\n  }\n  if (schema !== undefined && schema !== root.schema)\n    return { schema: schema, root: root, baseId: baseId };\n}\n\n\nvar SIMPLE_INLINED = util.toHash([\n  'type', 'format', 'pattern',\n  'maxLength', 'minLength',\n  'maxProperties', 'minProperties',\n  'maxItems', 'minItems',\n  'maximum', 'minimum',\n  'uniqueItems', 'multipleOf',\n  'required', 'enum'\n]);\nfunction inlineRef(schema, limit) {\n  if (limit === false) return false;\n  if (limit === undefined || limit === true) return checkNoRef(schema);\n  else if (limit) return countKeys(schema) <= limit;\n}\n\n\nfunction checkNoRef(schema) {\n  var item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return false;\n      item = schema[key];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  }\n  return true;\n}\n\n\nfunction countKeys(schema) {\n  var count = 0, item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object') count += countKeys(item);\n      if (count == Infinity) return Infinity;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return Infinity;\n      if (SIMPLE_INLINED[key]) {\n        count++;\n      } else {\n        item = schema[key];\n        if (typeof item == 'object') count += countKeys(item) + 1;\n        if (count == Infinity) return Infinity;\n      }\n    }\n  }\n  return count;\n}\n\n\nfunction getFullPath(id, normalize) {\n  if (normalize !== false) id = normalizeId(id);\n  var p = URI.parse(id);\n  return _getFullPath(p);\n}\n\n\nfunction _getFullPath(p) {\n  return URI.serialize(p).split('#')[0] + '#';\n}\n\n\nvar TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n  return id ? id.replace(TRAILING_SLASH_HASH, '') : '';\n}\n\n\nfunction resolveUrl(baseId, id) {\n  id = normalizeId(id);\n  return URI.resolve(baseId, id);\n}\n\n\n/* @this Ajv */\nfunction resolveIds(schema) {\n  var schemaId = normalizeId(this._getId(schema));\n  var baseIds = {'': schemaId};\n  var fullPaths = {'': getFullPath(schemaId, false)};\n  var localRefs = {};\n  var self = this;\n\n  traverse(schema, {allKeys: true}, function(sch, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n    if (jsonPtr === '') return;\n    var id = self._getId(sch);\n    var baseId = baseIds[parentJsonPtr];\n    var fullPath = fullPaths[parentJsonPtr] + '/' + parentKeyword;\n    if (keyIndex !== undefined)\n      fullPath += '/' + (typeof keyIndex == 'number' ? keyIndex : util.escapeFragment(keyIndex));\n\n    if (typeof id == 'string') {\n      id = baseId = normalizeId(baseId ? URI.resolve(baseId, id) : id);\n\n      var refVal = self._refs[id];\n      if (typeof refVal == 'string') refVal = self._refs[refVal];\n      if (refVal && refVal.schema) {\n        if (!equal(sch, refVal.schema))\n          throw new Error('id \"' + id + '\" resolves to more than one schema');\n      } else if (id != normalizeId(fullPath)) {\n        if (id[0] == '#') {\n          if (localRefs[id] && !equal(sch, localRefs[id]))\n            throw new Error('id \"' + id + '\" resolves to more than one schema');\n          localRefs[id] = sch;\n        } else {\n          self._refs[id] = fullPath;\n        }\n      }\n    }\n    baseIds[jsonPtr] = baseId;\n    fullPaths[jsonPtr] = fullPath;\n  });\n\n  return localRefs;\n}\n", "'use strict';\n\nvar resolve = require('./resolve');\n\nmodule.exports = {\n  Validation: errorSubclass(ValidationError),\n  MissingRef: errorSubclass(MissingRefError)\n};\n\n\nfunction ValidationError(errors) {\n  this.message = 'validation failed';\n  this.errors = errors;\n  this.ajv = this.validation = true;\n}\n\n\nMissingRefError.message = function (baseId, ref) {\n  return 'can\\'t resolve reference ' + ref + ' from id ' + baseId;\n};\n\n\nfunction MissingRefError(baseId, ref, message) {\n  this.message = message || MissingRefError.message(baseId, ref);\n  this.missingRef = resolve.url(baseId, ref);\n  this.missingSchema = resolve.normalizeId(resolve.fullPath(this.missingRef));\n}\n\n\nfunction errorSubclass(Subclass) {\n  Subclass.prototype = Object.create(Error.prototype);\n  Subclass.prototype.constructor = Subclass;\n  return Subclass;\n}\n", "'use strict';\n\nmodule.exports = function (data, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (node) {\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        if (node === undefined) return;\n        if (typeof node == 'number') return isFinite(node) ? '' + node : 'null';\n        if (typeof node !== 'object') return JSON.stringify(node);\n\n        var i, out;\n        if (Array.isArray(node)) {\n            out = '[';\n            for (i = 0; i < node.length; i++) {\n                if (i) out += ',';\n                out += stringify(node[i]) || 'null';\n            }\n            return out + ']';\n        }\n\n        if (node === null) return 'null';\n\n        if (seen.indexOf(node) !== -1) {\n            if (cycles) return JSON.stringify('__cycle__');\n            throw new TypeError('Converting circular structure to JSON');\n        }\n\n        var seenIndex = seen.push(node) - 1;\n        var keys = Object.keys(node).sort(cmp && cmp(node));\n        out = '';\n        for (i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = stringify(node[key]);\n\n            if (!value) continue;\n            if (out) out += ',';\n            out += JSON.stringify(key) + ':' + value;\n        }\n        seen.splice(seenIndex, 1);\n        return '{' + out + '}';\n    })(data);\n};\n", "'use strict';\nmodule.exports = function generate_validate(it, $keyword, $ruleType) {\n  var out = '';\n  var $async = it.schema.$async === true,\n    $refKeywords = it.util.schemaHasRulesExcept(it.schema, it.RULES.all, '$ref'),\n    $id = it.self._getId(it.schema);\n  if (it.opts.strictKeywords) {\n    var $unknownKwd = it.util.schemaUnknownRules(it.schema, it.RULES.keywords);\n    if ($unknownKwd) {\n      var $keywordsMsg = 'unknown keyword: ' + $unknownKwd;\n      if (it.opts.strictKeywords === 'log') it.logger.warn($keywordsMsg);\n      else throw new Error($keywordsMsg);\n    }\n  }\n  if (it.isTop) {\n    out += ' var validate = ';\n    if ($async) {\n      it.async = true;\n      out += 'async ';\n    }\n    out += 'function(data, dataPath, parentData, parentDataProperty, rootData) { \\'use strict\\'; ';\n    if ($id && (it.opts.sourceCode || it.opts.processCode)) {\n      out += ' ' + ('/\\*# sourceURL=' + $id + ' */') + ' ';\n    }\n  }\n  if (typeof it.schema == 'boolean' || !($refKeywords || it.schema.$ref)) {\n    var $keyword = 'false schema';\n    var $lvl = it.level;\n    var $dataLvl = it.dataLevel;\n    var $schema = it.schema[$keyword];\n    var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n    var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n    var $breakOnError = !it.opts.allErrors;\n    var $errorKeyword;\n    var $data = 'data' + ($dataLvl || '');\n    var $valid = 'valid' + $lvl;\n    if (it.schema === false) {\n      if (it.isTop) {\n        $breakOnError = true;\n      } else {\n        out += ' var ' + ($valid) + ' = false; ';\n      }\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'false schema') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'boolean schema is false\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n    } else {\n      if (it.isTop) {\n        if ($async) {\n          out += ' return data; ';\n        } else {\n          out += ' validate.errors = null; return true; ';\n        }\n      } else {\n        out += ' var ' + ($valid) + ' = true; ';\n      }\n    }\n    if (it.isTop) {\n      out += ' }; return validate; ';\n    }\n    return out;\n  }\n  if (it.isTop) {\n    var $top = it.isTop,\n      $lvl = it.level = 0,\n      $dataLvl = it.dataLevel = 0,\n      $data = 'data';\n    it.rootId = it.resolve.fullPath(it.self._getId(it.root.schema));\n    it.baseId = it.baseId || it.rootId;\n    delete it.isTop;\n    it.dataPathArr = [\"\"];\n    if (it.schema.default !== undefined && it.opts.useDefaults && it.opts.strictDefaults) {\n      var $defaultMsg = 'default is ignored in the schema root';\n      if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n      else throw new Error($defaultMsg);\n    }\n    out += ' var vErrors = null; ';\n    out += ' var errors = 0;     ';\n    out += ' if (rootData === undefined) rootData = data; ';\n  } else {\n    var $lvl = it.level,\n      $dataLvl = it.dataLevel,\n      $data = 'data' + ($dataLvl || '');\n    if ($id) it.baseId = it.resolve.url(it.baseId, $id);\n    if ($async && !it.async) throw new Error('async schema in sync schema');\n    out += ' var errs_' + ($lvl) + ' = errors;';\n  }\n  var $valid = 'valid' + $lvl,\n    $breakOnError = !it.opts.allErrors,\n    $closingBraces1 = '',\n    $closingBraces2 = '';\n  var $errorKeyword;\n  var $typeSchema = it.schema.type,\n    $typeIsArray = Array.isArray($typeSchema);\n  if ($typeSchema && it.opts.nullable && it.schema.nullable === true) {\n    if ($typeIsArray) {\n      if ($typeSchema.indexOf('null') == -1) $typeSchema = $typeSchema.concat('null');\n    } else if ($typeSchema != 'null') {\n      $typeSchema = [$typeSchema, 'null'];\n      $typeIsArray = true;\n    }\n  }\n  if ($typeIsArray && $typeSchema.length == 1) {\n    $typeSchema = $typeSchema[0];\n    $typeIsArray = false;\n  }\n  if (it.schema.$ref && $refKeywords) {\n    if (it.opts.extendRefs == 'fail') {\n      throw new Error('$ref: validation keywords used in schema at path \"' + it.errSchemaPath + '\" (see option extendRefs)');\n    } else if (it.opts.extendRefs !== true) {\n      $refKeywords = false;\n      it.logger.warn('$ref: keywords ignored in schema at path \"' + it.errSchemaPath + '\"');\n    }\n  }\n  if (it.schema.$comment && it.opts.$comment) {\n    out += ' ' + (it.RULES.all.$comment.code(it, '$comment'));\n  }\n  if ($typeSchema) {\n    if (it.opts.coerceTypes) {\n      var $coerceToTypes = it.util.coerceToTypes(it.opts.coerceTypes, $typeSchema);\n    }\n    var $rulesGroup = it.RULES.types[$typeSchema];\n    if ($coerceToTypes || $typeIsArray || $rulesGroup === true || ($rulesGroup && !$shouldUseGroup($rulesGroup))) {\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type';\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type',\n        $method = $typeIsArray ? 'checkDataTypes' : 'checkDataType';\n      out += ' if (' + (it.util[$method]($typeSchema, $data, it.opts.strictNumbers, true)) + ') { ';\n      if ($coerceToTypes) {\n        var $dataType = 'dataType' + $lvl,\n          $coerced = 'coerced' + $lvl;\n        out += ' var ' + ($dataType) + ' = typeof ' + ($data) + '; var ' + ($coerced) + ' = undefined; ';\n        if (it.opts.coerceTypes == 'array') {\n          out += ' if (' + ($dataType) + ' == \\'object\\' && Array.isArray(' + ($data) + ') && ' + ($data) + '.length == 1) { ' + ($data) + ' = ' + ($data) + '[0]; ' + ($dataType) + ' = typeof ' + ($data) + '; if (' + (it.util.checkDataType(it.schema.type, $data, it.opts.strictNumbers)) + ') ' + ($coerced) + ' = ' + ($data) + '; } ';\n        }\n        out += ' if (' + ($coerced) + ' !== undefined) ; ';\n        var arr1 = $coerceToTypes;\n        if (arr1) {\n          var $type, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $type = arr1[$i += 1];\n            if ($type == 'string') {\n              out += ' else if (' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\') ' + ($coerced) + ' = \\'\\' + ' + ($data) + '; else if (' + ($data) + ' === null) ' + ($coerced) + ' = \\'\\'; ';\n            } else if ($type == 'number' || $type == 'integer') {\n              out += ' else if (' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' === null || (' + ($dataType) + ' == \\'string\\' && ' + ($data) + ' && ' + ($data) + ' == +' + ($data) + ' ';\n              if ($type == 'integer') {\n                out += ' && !(' + ($data) + ' % 1)';\n              }\n              out += ')) ' + ($coerced) + ' = +' + ($data) + '; ';\n            } else if ($type == 'boolean') {\n              out += ' else if (' + ($data) + ' === \\'false\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === null) ' + ($coerced) + ' = false; else if (' + ($data) + ' === \\'true\\' || ' + ($data) + ' === 1) ' + ($coerced) + ' = true; ';\n            } else if ($type == 'null') {\n              out += ' else if (' + ($data) + ' === \\'\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === false) ' + ($coerced) + ' = null; ';\n            } else if (it.opts.coerceTypes == 'array' && $type == 'array') {\n              out += ' else if (' + ($dataType) + ' == \\'string\\' || ' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' == null) ' + ($coerced) + ' = [' + ($data) + ']; ';\n            }\n          }\n        }\n        out += ' else {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } if (' + ($coerced) + ' !== undefined) {  ';\n        var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n          $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n        out += ' ' + ($data) + ' = ' + ($coerced) + '; ';\n        if (!$dataLvl) {\n          out += 'if (' + ($parentData) + ' !== undefined)';\n        }\n        out += ' ' + ($parentData) + '[' + ($parentDataProperty) + '] = ' + ($coerced) + '; } ';\n      } else {\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      }\n      out += ' } ';\n    }\n  }\n  if (it.schema.$ref && !$refKeywords) {\n    out += ' ' + (it.RULES.all.$ref.code(it, '$ref')) + ' ';\n    if ($breakOnError) {\n      out += ' } if (errors === ';\n      if ($top) {\n        out += '0';\n      } else {\n        out += 'errs_' + ($lvl);\n      }\n      out += ') { ';\n      $closingBraces2 += '}';\n    }\n  } else {\n    var arr2 = it.RULES;\n    if (arr2) {\n      var $rulesGroup, i2 = -1,\n        l2 = arr2.length - 1;\n      while (i2 < l2) {\n        $rulesGroup = arr2[i2 += 1];\n        if ($shouldUseGroup($rulesGroup)) {\n          if ($rulesGroup.type) {\n            out += ' if (' + (it.util.checkDataType($rulesGroup.type, $data, it.opts.strictNumbers)) + ') { ';\n          }\n          if (it.opts.useDefaults) {\n            if ($rulesGroup.type == 'object' && it.schema.properties) {\n              var $schema = it.schema.properties,\n                $schemaKeys = Object.keys($schema);\n              var arr3 = $schemaKeys;\n              if (arr3) {\n                var $propertyKey, i3 = -1,\n                  l3 = arr3.length - 1;\n                while (i3 < l3) {\n                  $propertyKey = arr3[i3 += 1];\n                  var $sch = $schema[$propertyKey];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + it.util.getProperty($propertyKey);\n                    if (it.compositeRule) {\n                      if (it.opts.strictDefaults) {\n                        var $defaultMsg = 'default is ignored for: ' + $passData;\n                        if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n                        else throw new Error($defaultMsg);\n                      }\n                    } else {\n                      out += ' if (' + ($passData) + ' === undefined ';\n                      if (it.opts.useDefaults == 'empty') {\n                        out += ' || ' + ($passData) + ' === null || ' + ($passData) + ' === \\'\\' ';\n                      }\n                      out += ' ) ' + ($passData) + ' = ';\n                      if (it.opts.useDefaults == 'shared') {\n                        out += ' ' + (it.useDefault($sch.default)) + ' ';\n                      } else {\n                        out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                      }\n                      out += '; ';\n                    }\n                  }\n                }\n              }\n            } else if ($rulesGroup.type == 'array' && Array.isArray(it.schema.items)) {\n              var arr4 = it.schema.items;\n              if (arr4) {\n                var $sch, $i = -1,\n                  l4 = arr4.length - 1;\n                while ($i < l4) {\n                  $sch = arr4[$i += 1];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + '[' + $i + ']';\n                    if (it.compositeRule) {\n                      if (it.opts.strictDefaults) {\n                        var $defaultMsg = 'default is ignored for: ' + $passData;\n                        if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n                        else throw new Error($defaultMsg);\n                      }\n                    } else {\n                      out += ' if (' + ($passData) + ' === undefined ';\n                      if (it.opts.useDefaults == 'empty') {\n                        out += ' || ' + ($passData) + ' === null || ' + ($passData) + ' === \\'\\' ';\n                      }\n                      out += ' ) ' + ($passData) + ' = ';\n                      if (it.opts.useDefaults == 'shared') {\n                        out += ' ' + (it.useDefault($sch.default)) + ' ';\n                      } else {\n                        out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                      }\n                      out += '; ';\n                    }\n                  }\n                }\n              }\n            }\n          }\n          var arr5 = $rulesGroup.rules;\n          if (arr5) {\n            var $rule, i5 = -1,\n              l5 = arr5.length - 1;\n            while (i5 < l5) {\n              $rule = arr5[i5 += 1];\n              if ($shouldUseRule($rule)) {\n                var $code = $rule.code(it, $rule.keyword, $rulesGroup.type);\n                if ($code) {\n                  out += ' ' + ($code) + ' ';\n                  if ($breakOnError) {\n                    $closingBraces1 += '}';\n                  }\n                }\n              }\n            }\n          }\n          if ($breakOnError) {\n            out += ' ' + ($closingBraces1) + ' ';\n            $closingBraces1 = '';\n          }\n          if ($rulesGroup.type) {\n            out += ' } ';\n            if ($typeSchema && $typeSchema === $rulesGroup.type && !$coerceToTypes) {\n              out += ' else { ';\n              var $schemaPath = it.schemaPath + '.type',\n                $errSchemaPath = it.errSchemaPath + '/type';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n                if ($typeIsArray) {\n                  out += '' + ($typeSchema.join(\",\"));\n                } else {\n                  out += '' + ($typeSchema);\n                }\n                out += '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'should be ';\n                  if ($typeIsArray) {\n                    out += '' + ($typeSchema.join(\",\"));\n                  } else {\n                    out += '' + ($typeSchema);\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) {\n                /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              out += ' } ';\n            }\n          }\n          if ($breakOnError) {\n            out += ' if (errors === ';\n            if ($top) {\n              out += '0';\n            } else {\n              out += 'errs_' + ($lvl);\n            }\n            out += ') { ';\n            $closingBraces2 += '}';\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces2) + ' ';\n  }\n  if ($top) {\n    if ($async) {\n      out += ' if (errors === 0) return data;           ';\n      out += ' else throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; ';\n      out += ' return errors === 0;       ';\n    }\n    out += ' }; return validate;';\n  } else {\n    out += ' var ' + ($valid) + ' = errors === errs_' + ($lvl) + ';';\n  }\n\n  function $shouldUseGroup($rulesGroup) {\n    var rules = $rulesGroup.rules;\n    for (var i = 0; i < rules.length; i++)\n      if ($shouldUseRule(rules[i])) return true;\n  }\n\n  function $shouldUseRule($rule) {\n    return it.schema[$rule.keyword] !== undefined || ($rule.implements && $ruleImplementsSomeKeyword($rule));\n  }\n\n  function $ruleImplementsSomeKeyword($rule) {\n    var impl = $rule.implements;\n    for (var i = 0; i < impl.length; i++)\n      if (it.schema[impl[i]] !== undefined) return true;\n  }\n  return out;\n}\n", "'use strict';\n\nvar resolve = require('./resolve')\n  , util = require('./util')\n  , errorClasses = require('./error_classes')\n  , stableStringify = require('fast-json-stable-stringify');\n\nvar validateGenerator = require('../dotjs/validate');\n\n/**\n * Functions below are used inside compiled validations function\n */\n\nvar ucs2length = util.ucs2length;\nvar equal = require('fast-deep-equal');\n\n// this error is thrown by async schemas to return validation errors via exception\nvar ValidationError = errorClasses.Validation;\n\nmodule.exports = compile;\n\n\n/**\n * Compiles schema to validation function\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Object} root object with information about the root schema for this schema\n * @param  {Object} localRefs the hash of local references inside the schema (created by resolve.id), used for inline resolution\n * @param  {String} baseId base ID for IDs in the schema\n * @return {Function} validation function\n */\nfunction compile(schema, root, localRefs, baseId) {\n  /* jshint validthis: true, evil: true */\n  /* eslint no-shadow: 0 */\n  var self = this\n    , opts = this._opts\n    , refVal = [ undefined ]\n    , refs = {}\n    , patterns = []\n    , patternsHash = {}\n    , defaults = []\n    , defaultsHash = {}\n    , customRules = [];\n\n  root = root || { schema: schema, refVal: refVal, refs: refs };\n\n  var c = checkCompiling.call(this, schema, root, baseId);\n  var compilation = this._compilations[c.index];\n  if (c.compiling) return (compilation.callValidate = callValidate);\n\n  var formats = this._formats;\n  var RULES = this.RULES;\n\n  try {\n    var v = localCompile(schema, root, localRefs, baseId);\n    compilation.validate = v;\n    var cv = compilation.callValidate;\n    if (cv) {\n      cv.schema = v.schema;\n      cv.errors = null;\n      cv.refs = v.refs;\n      cv.refVal = v.refVal;\n      cv.root = v.root;\n      cv.$async = v.$async;\n      if (opts.sourceCode) cv.source = v.source;\n    }\n    return v;\n  } finally {\n    endCompiling.call(this, schema, root, baseId);\n  }\n\n  /* @this   {*} - custom context, see passContext option */\n  function callValidate() {\n    /* jshint validthis: true */\n    var validate = compilation.validate;\n    var result = validate.apply(this, arguments);\n    callValidate.errors = validate.errors;\n    return result;\n  }\n\n  function localCompile(_schema, _root, localRefs, baseId) {\n    var isRoot = !_root || (_root && _root.schema == _schema);\n    if (_root.schema != root.schema)\n      return compile.call(self, _schema, _root, localRefs, baseId);\n\n    var $async = _schema.$async === true;\n\n    var sourceCode = validateGenerator({\n      isTop: true,\n      schema: _schema,\n      isRoot: isRoot,\n      baseId: baseId,\n      root: _root,\n      schemaPath: '',\n      errSchemaPath: '#',\n      errorPath: '\"\"',\n      MissingRefError: errorClasses.MissingRef,\n      RULES: RULES,\n      validate: validateGenerator,\n      util: util,\n      resolve: resolve,\n      resolveRef: resolveRef,\n      usePattern: usePattern,\n      useDefault: useDefault,\n      useCustomRule: useCustomRule,\n      opts: opts,\n      formats: formats,\n      logger: self.logger,\n      self: self\n    });\n\n    sourceCode = vars(refVal, refValCode) + vars(patterns, patternCode)\n                   + vars(defaults, defaultCode) + vars(customRules, customRuleCode)\n                   + sourceCode;\n\n    if (opts.processCode) sourceCode = opts.processCode(sourceCode, _schema);\n    // console.log('\\n\\n\\n *** \\n', JSON.stringify(sourceCode));\n    var validate;\n    try {\n      var makeValidate = new Function(\n        'self',\n        'RULES',\n        'formats',\n        'root',\n        'refVal',\n        'defaults',\n        'customRules',\n        'equal',\n        'ucs2length',\n        'ValidationError',\n        sourceCode\n      );\n\n      validate = makeValidate(\n        self,\n        RULES,\n        formats,\n        root,\n        refVal,\n        defaults,\n        customRules,\n        equal,\n        ucs2length,\n        ValidationError\n      );\n\n      refVal[0] = validate;\n    } catch(e) {\n      self.logger.error('Error compiling schema, function code:', sourceCode);\n      throw e;\n    }\n\n    validate.schema = _schema;\n    validate.errors = null;\n    validate.refs = refs;\n    validate.refVal = refVal;\n    validate.root = isRoot ? validate : _root;\n    if ($async) validate.$async = true;\n    if (opts.sourceCode === true) {\n      validate.source = {\n        code: sourceCode,\n        patterns: patterns,\n        defaults: defaults\n      };\n    }\n\n    return validate;\n  }\n\n  function resolveRef(baseId, ref, isRoot) {\n    ref = resolve.url(baseId, ref);\n    var refIndex = refs[ref];\n    var _refVal, refCode;\n    if (refIndex !== undefined) {\n      _refVal = refVal[refIndex];\n      refCode = 'refVal[' + refIndex + ']';\n      return resolvedRef(_refVal, refCode);\n    }\n    if (!isRoot && root.refs) {\n      var rootRefId = root.refs[ref];\n      if (rootRefId !== undefined) {\n        _refVal = root.refVal[rootRefId];\n        refCode = addLocalRef(ref, _refVal);\n        return resolvedRef(_refVal, refCode);\n      }\n    }\n\n    refCode = addLocalRef(ref);\n    var v = resolve.call(self, localCompile, root, ref);\n    if (v === undefined) {\n      var localSchema = localRefs && localRefs[ref];\n      if (localSchema) {\n        v = resolve.inlineRef(localSchema, opts.inlineRefs)\n            ? localSchema\n            : compile.call(self, localSchema, root, localRefs, baseId);\n      }\n    }\n\n    if (v === undefined) {\n      removeLocalRef(ref);\n    } else {\n      replaceLocalRef(ref, v);\n      return resolvedRef(v, refCode);\n    }\n  }\n\n  function addLocalRef(ref, v) {\n    var refId = refVal.length;\n    refVal[refId] = v;\n    refs[ref] = refId;\n    return 'refVal' + refId;\n  }\n\n  function removeLocalRef(ref) {\n    delete refs[ref];\n  }\n\n  function replaceLocalRef(ref, v) {\n    var refId = refs[ref];\n    refVal[refId] = v;\n  }\n\n  function resolvedRef(refVal, code) {\n    return typeof refVal == 'object' || typeof refVal == 'boolean'\n            ? { code: code, schema: refVal, inline: true }\n            : { code: code, $async: refVal && !!refVal.$async };\n  }\n\n  function usePattern(regexStr) {\n    var index = patternsHash[regexStr];\n    if (index === undefined) {\n      index = patternsHash[regexStr] = patterns.length;\n      patterns[index] = regexStr;\n    }\n    return 'pattern' + index;\n  }\n\n  function useDefault(value) {\n    switch (typeof value) {\n      case 'boolean':\n      case 'number':\n        return '' + value;\n      case 'string':\n        return util.toQuotedString(value);\n      case 'object':\n        if (value === null) return 'null';\n        var valueStr = stableStringify(value);\n        var index = defaultsHash[valueStr];\n        if (index === undefined) {\n          index = defaultsHash[valueStr] = defaults.length;\n          defaults[index] = value;\n        }\n        return 'default' + index;\n    }\n  }\n\n  function useCustomRule(rule, schema, parentSchema, it) {\n    if (self._opts.validateSchema !== false) {\n      var deps = rule.definition.dependencies;\n      if (deps && !deps.every(function(keyword) {\n        return Object.prototype.hasOwnProperty.call(parentSchema, keyword);\n      }))\n        throw new Error('parent schema must have all required keywords: ' + deps.join(','));\n\n      var validateSchema = rule.definition.validateSchema;\n      if (validateSchema) {\n        var valid = validateSchema(schema);\n        if (!valid) {\n          var message = 'keyword schema is invalid: ' + self.errorsText(validateSchema.errors);\n          if (self._opts.validateSchema == 'log') self.logger.error(message);\n          else throw new Error(message);\n        }\n      }\n    }\n\n    var compile = rule.definition.compile\n      , inline = rule.definition.inline\n      , macro = rule.definition.macro;\n\n    var validate;\n    if (compile) {\n      validate = compile.call(self, schema, parentSchema, it);\n    } else if (macro) {\n      validate = macro.call(self, schema, parentSchema, it);\n      if (opts.validateSchema !== false) self.validateSchema(validate, true);\n    } else if (inline) {\n      validate = inline.call(self, it, rule.keyword, schema, parentSchema);\n    } else {\n      validate = rule.definition.validate;\n      if (!validate) return;\n    }\n\n    if (validate === undefined)\n      throw new Error('custom keyword \"' + rule.keyword + '\"failed to compile');\n\n    var index = customRules.length;\n    customRules[index] = validate;\n\n    return {\n      code: 'customRule' + index,\n      validate: validate\n    };\n  }\n}\n\n\n/**\n * Checks if the schema is currently compiled\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Object} object with properties \"index\" (compilation index) and \"compiling\" (boolean)\n */\nfunction checkCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var index = compIndex.call(this, schema, root, baseId);\n  if (index >= 0) return { index: index, compiling: true };\n  index = this._compilations.length;\n  this._compilations[index] = {\n    schema: schema,\n    root: root,\n    baseId: baseId\n  };\n  return { index: index, compiling: false };\n}\n\n\n/**\n * Removes the schema from the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n */\nfunction endCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var i = compIndex.call(this, schema, root, baseId);\n  if (i >= 0) this._compilations.splice(i, 1);\n}\n\n\n/**\n * Index of schema compilation in the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Integer} compilation index\n */\nfunction compIndex(schema, root, baseId) {\n  /* jshint validthis: true */\n  for (var i=0; i<this._compilations.length; i++) {\n    var c = this._compilations[i];\n    if (c.schema == schema && c.root == root && c.baseId == baseId) return i;\n  }\n  return -1;\n}\n\n\nfunction patternCode(i, patterns) {\n  return 'var pattern' + i + ' = new RegExp(' + util.toQuotedString(patterns[i]) + ');';\n}\n\n\nfunction defaultCode(i) {\n  return 'var default' + i + ' = defaults[' + i + '];';\n}\n\n\nfunction refValCode(i, refVal) {\n  return refVal[i] === undefined ? '' : 'var refVal' + i + ' = refVal[' + i + '];';\n}\n\n\nfunction customRuleCode(i) {\n  return 'var customRule' + i + ' = customRules[' + i + '];';\n}\n\n\nfunction vars(arr, statement) {\n  if (!arr.length) return '';\n  var code = '';\n  for (var i=0; i<arr.length; i++)\n    code += statement(i, arr);\n  return code;\n}\n", "'use strict';\n\n\nvar Cache = module.exports = function Cache() {\n  this._cache = {};\n};\n\n\nCache.prototype.put = function Cache_put(key, value) {\n  this._cache[key] = value;\n};\n\n\nCache.prototype.get = function Cache_get(key) {\n  return this._cache[key];\n};\n\n\nCache.prototype.del = function Cache_del(key) {\n  delete this._cache[key];\n};\n\n\nCache.prototype.clear = function Cache_clear() {\n  this._cache = {};\n};\n", "'use strict';\n\nvar util = require('./util');\n\nvar DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nvar DAYS = [0,31,28,31,30,31,30,31,31,30,31,30,31];\nvar TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nvar HOSTNAME = /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i;\nvar URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nvar URIREF = /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\n// uri-template: https://tools.ietf.org/html/rfc6570\nvar URITEMPLATE = /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i;\n// For the source: https://gist.github.com/dperini/729294\n// For test cases: https://mathiasbynens.be/demo/url-regex\n// @todo Delete current URL in favour of the commented out URL rule when this issue is fixed https://github.com/eslint/eslint/issues/7983.\n// var URL = /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-)*[a-z\\u{00a1}-\\u{ffff}0-9]+)(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-)*[a-z\\u{00a1}-\\u{ffff}0-9]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu;\nvar URL = /^(?:(?:http[s\\u017F]?|ftp):\\/\\/)(?:(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+(?::(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?@)?(?:(?!10(?:\\.[0-9]{1,3}){3})(?!127(?:\\.[0-9]{1,3}){3})(?!169\\.254(?:\\.[0-9]{1,3}){2})(?!192\\.168(?:\\.[0-9]{1,3}){2})(?!172\\.(?:1[6-9]|2[0-9]|3[01])(?:\\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-)*(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)(?:\\.(?:(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-)*(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)*(?:\\.(?:(?:[a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\\/(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?$/i;\nvar UUID = /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;\nvar JSON_POINTER = /^(?:\\/(?:[^~/]|~0|~1)*)*$/;\nvar JSON_POINTER_URI_FRAGMENT = /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;\nvar RELATIVE_JSON_POINTER = /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/;\n\n\nmodule.exports = formats;\n\nfunction formats(mode) {\n  mode = mode == 'full' ? 'full' : 'fast';\n  return util.copy(formats[mode]);\n}\n\n\nformats.fast = {\n  // date: http://tools.ietf.org/html/rfc3339#section-5.6\n  date: /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/,\n  // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n  time: /^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i,\n  'date-time': /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i,\n  // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n  uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n  'uri-reference': /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  // email (sources from jsen validator):\n  // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n  // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'willful violation')\n  email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n  hostname: HOSTNAME,\n  // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  // optimized http://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  // uuid: http://tools.ietf.org/html/rfc4122\n  uuid: UUID,\n  // JSON-pointer: https://tools.ietf.org/html/rfc6901\n  // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n  'json-pointer': JSON_POINTER,\n  'json-pointer-uri-fragment': JSON_POINTER_URI_FRAGMENT,\n  // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nformats.full = {\n  date: date,\n  time: time,\n  'date-time': date_time,\n  uri: uri,\n  'uri-reference': URIREF,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n  hostname: HOSTNAME,\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  uuid: UUID,\n  'json-pointer': JSON_POINTER,\n  'json-pointer-uri-fragment': JSON_POINTER_URI_FRAGMENT,\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nfunction isLeapYear(year) {\n  // https://tools.ietf.org/html/rfc3339#appendix-C\n  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\n\n\nfunction date(str) {\n  // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n  var matches = str.match(DATE);\n  if (!matches) return false;\n\n  var year = +matches[1];\n  var month = +matches[2];\n  var day = +matches[3];\n\n  return month >= 1 && month <= 12 && day >= 1 &&\n          day <= (month == 2 && isLeapYear(year) ? 29 : DAYS[month]);\n}\n\n\nfunction time(str, full) {\n  var matches = str.match(TIME);\n  if (!matches) return false;\n\n  var hour = matches[1];\n  var minute = matches[2];\n  var second = matches[3];\n  var timeZone = matches[5];\n  return ((hour <= 23 && minute <= 59 && second <= 59) ||\n          (hour == 23 && minute == 59 && second == 60)) &&\n         (!full || timeZone);\n}\n\n\nvar DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction date_time(str) {\n  // http://tools.ietf.org/html/rfc3339#section-5.6\n  var dateTime = str.split(DATE_TIME_SEPARATOR);\n  return dateTime.length == 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\n\n\nvar NOT_URI_FRAGMENT = /\\/|:/;\nfunction uri(str) {\n  // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n  return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\n\n\nvar Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n  if (Z_ANCHOR.test(str)) return false;\n  try {\n    new RegExp(str);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n", "'use strict';\nmodule.exports = function generate_ref(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $async, $refCode;\n  if ($schema == '#' || $schema == '#/') {\n    if (it.isRoot) {\n      $async = it.async;\n      $refCode = 'validate';\n    } else {\n      $async = it.root.schema.$async === true;\n      $refCode = 'root.refVal[0]';\n    }\n  } else {\n    var $refVal = it.resolveRef(it.baseId, $schema, it.isRoot);\n    if ($refVal === undefined) {\n      var $message = it.MissingRefError.message(it.baseId, $schema);\n      if (it.opts.missingRefs == 'fail') {\n        it.logger.error($message);\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('$ref') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { ref: \\'' + (it.util.escapeQuotes($schema)) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'can\\\\\\'t resolve reference ' + (it.util.escapeQuotes($schema)) + '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: ' + (it.util.toQuotedString($schema)) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        if ($breakOnError) {\n          out += ' if (false) { ';\n        }\n      } else if (it.opts.missingRefs == 'ignore') {\n        it.logger.warn($message);\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n      } else {\n        throw new it.MissingRefError(it.baseId, $schema, $message);\n      }\n    } else if ($refVal.inline) {\n      var $it = it.util.copy(it);\n      $it.level++;\n      var $nextValid = 'valid' + $it.level;\n      $it.schema = $refVal.schema;\n      $it.schemaPath = '';\n      $it.errSchemaPath = $schema;\n      var $code = it.validate($it).replace(/validate\\.schema/g, $refVal.code);\n      out += ' ' + ($code) + ' ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n      }\n    } else {\n      $async = $refVal.$async === true || (it.async && $refVal.$async !== false);\n      $refCode = $refVal.code;\n    }\n  }\n  if ($refCode) {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    if (it.opts.passContext) {\n      out += ' ' + ($refCode) + '.call(this, ';\n    } else {\n      out += ' ' + ($refCode) + '( ';\n    }\n    out += ' ' + ($data) + ', (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ', rootData)  ';\n    var __callValidate = out;\n    out = $$outStack.pop();\n    if ($async) {\n      if (!it.async) throw new Error('async schema referenced by sync schema');\n      if ($breakOnError) {\n        out += ' var ' + ($valid) + '; ';\n      }\n      out += ' try { await ' + (__callValidate) + '; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = true; ';\n      }\n      out += ' } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = false; ';\n      }\n      out += ' } ';\n      if ($breakOnError) {\n        out += ' if (' + ($valid) + ') { ';\n      }\n    } else {\n      out += ' if (!' + (__callValidate) + ') { if (vErrors === null) vErrors = ' + ($refCode) + '.errors; else vErrors = vErrors.concat(' + ($refCode) + '.errors); errors = vErrors.length; } ';\n      if ($breakOnError) {\n        out += ' else { ';\n      }\n    }\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_allOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $currentBaseId = $it.baseId,\n    $allSchemasEmpty = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n        $allSchemasEmpty = false;\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    if ($allSchemasEmpty) {\n      out += ' if (true) { ';\n    } else {\n      out += ' ' + ($closingBraces.slice(0, -1)) + ' ';\n    }\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_anyOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $noEmptySchema = $schema.every(function($sch) {\n    return (it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all));\n  });\n  if ($noEmptySchema) {\n    var $currentBaseId = $it.baseId;\n    out += ' var ' + ($errs) + ' = errors; var ' + ($valid) + ' = false;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        out += ' ' + ($valid) + ' = ' + ($valid) + ' || ' + ($nextValid) + '; if (!' + ($valid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('anyOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should match some schema in anyOf\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_comment(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $schema = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $comment = it.util.toQuotedString($schema);\n  if (it.opts.$comment === true) {\n    out += ' console.log(' + ($comment) + ');';\n  } else if (typeof it.opts.$comment == 'function') {\n    out += ' self._opts.$comment(' + ($comment) + ', ' + (it.util.toQuotedString($errSchemaPath)) + ', validate.root.schema);';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_const(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!$isData) {\n    out += ' var schema' + ($lvl) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ' = equal(' + ($data) + ', schema' + ($lvl) + '); if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('const') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { allowedValue: schema' + ($lvl) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to constant\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_contains(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId,\n    $nonEmptySchema = (it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all));\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($nonEmptySchema) {\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($nextValid) + ' = false; for (var ' + ($idx) + ' = 0; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    out += ' if (' + ($nextValid) + ') break; }  ';\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($nextValid) + ') {';\n  } else {\n    out += ' if (' + ($data) + '.length == 0) {';\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('contains') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should contain a valid item\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } else { ';\n  if ($nonEmptySchema) {\n    out += '  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n  }\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_dependencies(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $schemaDeps = {},\n    $propertyDeps = {},\n    $ownProperties = it.opts.ownProperties;\n  for ($property in $schema) {\n    if ($property == '__proto__') continue;\n    var $sch = $schema[$property];\n    var $deps = Array.isArray($sch) ? $propertyDeps : $schemaDeps;\n    $deps[$property] = $sch;\n  }\n  out += 'var ' + ($errs) + ' = errors;';\n  var $currentErrorPath = it.errorPath;\n  out += 'var missing' + ($lvl) + ';';\n  for (var $property in $propertyDeps) {\n    $deps = $propertyDeps[$property];\n    if ($deps.length) {\n      out += ' if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      if ($breakOnError) {\n        out += ' && ( ';\n        var arr1 = $deps;\n        if (arr1) {\n          var $propertyKey, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $propertyKey = arr1[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ')) {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should have ';\n            if ($deps.length == 1) {\n              out += 'property ' + (it.util.escapeQuotes($deps[0]));\n            } else {\n              out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n            }\n            out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      } else {\n        out += ' ) { ';\n        var arr2 = $deps;\n        if (arr2) {\n          var $propertyKey, i2 = -1,\n            l2 = arr2.length - 1;\n          while (i2 < l2) {\n            $propertyKey = arr2[i2 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'should have ';\n                if ($deps.length == 1) {\n                  out += 'property ' + (it.util.escapeQuotes($deps[0]));\n                } else {\n                  out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n                }\n                out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n      out += ' }   ';\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n  }\n  it.errorPath = $currentErrorPath;\n  var $currentBaseId = $it.baseId;\n  for (var $property in $schemaDeps) {\n    var $sch = $schemaDeps[$property];\n    if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n      out += ' ' + ($nextValid) + ' = true; if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      out += ') { ';\n      $it.schema = $sch;\n      $it.schemaPath = $schemaPath + it.util.getProperty($property);\n      $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($property);\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += '   ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_enum(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $i = 'i' + $lvl,\n    $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ';';\n  if ($isData) {\n    out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n  }\n  out += '' + ($valid) + ' = false;for (var ' + ($i) + '=0; ' + ($i) + '<' + ($vSchema) + '.length; ' + ($i) + '++) if (equal(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + '])) { ' + ($valid) + ' = true; break; }';\n  if ($isData) {\n    out += '  }  ';\n  }\n  out += ' if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('enum') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { allowedValues: schema' + ($lvl) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to one of the allowed values\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_format(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  if (it.opts.format === false) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n    return out;\n  }\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $unknownFormats = it.opts.unknownFormats,\n    $allowUnknown = Array.isArray($unknownFormats);\n  if ($isData) {\n    var $format = 'format' + $lvl,\n      $isObject = 'isObject' + $lvl,\n      $formatType = 'formatType' + $lvl;\n    out += ' var ' + ($format) + ' = formats[' + ($schemaValue) + ']; var ' + ($isObject) + ' = typeof ' + ($format) + ' == \\'object\\' && !(' + ($format) + ' instanceof RegExp) && ' + ($format) + '.validate; var ' + ($formatType) + ' = ' + ($isObject) + ' && ' + ($format) + '.type || \\'string\\'; if (' + ($isObject) + ') { ';\n    if (it.async) {\n      out += ' var async' + ($lvl) + ' = ' + ($format) + '.async; ';\n    }\n    out += ' ' + ($format) + ' = ' + ($format) + '.validate; } if (  ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n    }\n    out += ' (';\n    if ($unknownFormats != 'ignore') {\n      out += ' (' + ($schemaValue) + ' && !' + ($format) + ' ';\n      if ($allowUnknown) {\n        out += ' && self._opts.unknownFormats.indexOf(' + ($schemaValue) + ') == -1 ';\n      }\n      out += ') || ';\n    }\n    out += ' (' + ($format) + ' && ' + ($formatType) + ' == \\'' + ($ruleType) + '\\' && !(typeof ' + ($format) + ' == \\'function\\' ? ';\n    if (it.async) {\n      out += ' (async' + ($lvl) + ' ? await ' + ($format) + '(' + ($data) + ') : ' + ($format) + '(' + ($data) + ')) ';\n    } else {\n      out += ' ' + ($format) + '(' + ($data) + ') ';\n    }\n    out += ' : ' + ($format) + '.test(' + ($data) + '))))) {';\n  } else {\n    var $format = it.formats[$schema];\n    if (!$format) {\n      if ($unknownFormats == 'ignore') {\n        it.logger.warn('unknown format \"' + $schema + '\" ignored in schema at path \"' + it.errSchemaPath + '\"');\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else if ($allowUnknown && $unknownFormats.indexOf($schema) >= 0) {\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else {\n        throw new Error('unknown format \"' + $schema + '\" is used in schema at path \"' + it.errSchemaPath + '\"');\n      }\n    }\n    var $isObject = typeof $format == 'object' && !($format instanceof RegExp) && $format.validate;\n    var $formatType = $isObject && $format.type || 'string';\n    if ($isObject) {\n      var $async = $format.async === true;\n      $format = $format.validate;\n    }\n    if ($formatType != $ruleType) {\n      if ($breakOnError) {\n        out += ' if (true) { ';\n      }\n      return out;\n    }\n    if ($async) {\n      if (!it.async) throw new Error('async format in sync schema');\n      var $formatRef = 'formats' + it.util.getProperty($schema) + '.validate';\n      out += ' if (!(await ' + ($formatRef) + '(' + ($data) + '))) { ';\n    } else {\n      out += ' if (! ';\n      var $formatRef = 'formats' + it.util.getProperty($schema);\n      if ($isObject) $formatRef += '.validate';\n      if (typeof $format == 'function') {\n        out += ' ' + ($formatRef) + '(' + ($data) + ') ';\n      } else {\n        out += ' ' + ($formatRef) + '.test(' + ($data) + ') ';\n      }\n      out += ') { ';\n    }\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('format') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { format:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match format \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_if(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $thenSch = it.schema['then'],\n    $elseSch = it.schema['else'],\n    $thenPresent = $thenSch !== undefined && (it.opts.strictKeywords ? (typeof $thenSch == 'object' && Object.keys($thenSch).length > 0) || $thenSch === false : it.util.schemaHasRules($thenSch, it.RULES.all)),\n    $elsePresent = $elseSch !== undefined && (it.opts.strictKeywords ? (typeof $elseSch == 'object' && Object.keys($elseSch).length > 0) || $elseSch === false : it.util.schemaHasRules($elseSch, it.RULES.all)),\n    $currentBaseId = $it.baseId;\n  if ($thenPresent || $elsePresent) {\n    var $ifClause;\n    $it.createErrors = false;\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($errs) + ' = errors; var ' + ($valid) + ' = true;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    out += '  ' + (it.validate($it)) + ' ';\n    $it.baseId = $currentBaseId;\n    $it.createErrors = true;\n    out += '  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; }  ';\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    if ($thenPresent) {\n      out += ' if (' + ($nextValid) + ') {  ';\n      $it.schema = it.schema['then'];\n      $it.schemaPath = it.schemaPath + '.then';\n      $it.errSchemaPath = it.errSchemaPath + '/then';\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' ' + ($valid) + ' = ' + ($nextValid) + '; ';\n      if ($thenPresent && $elsePresent) {\n        $ifClause = 'ifClause' + $lvl;\n        out += ' var ' + ($ifClause) + ' = \\'then\\'; ';\n      } else {\n        $ifClause = '\\'then\\'';\n      }\n      out += ' } ';\n      if ($elsePresent) {\n        out += ' else { ';\n      }\n    } else {\n      out += ' if (!' + ($nextValid) + ') { ';\n    }\n    if ($elsePresent) {\n      $it.schema = it.schema['else'];\n      $it.schemaPath = it.schemaPath + '.else';\n      $it.errSchemaPath = it.errSchemaPath + '/else';\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' ' + ($valid) + ' = ' + ($nextValid) + '; ';\n      if ($thenPresent && $elsePresent) {\n        $ifClause = 'ifClause' + $lvl;\n        out += ' var ' + ($ifClause) + ' = \\'else\\'; ';\n      } else {\n        $ifClause = '\\'else\\'';\n      }\n      out += ' } ';\n    }\n    out += ' if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('if') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { failingKeyword: ' + ($ifClause) + ' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should match \"\\' + ' + ($ifClause) + ' + \\'\" schema\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    out += ' }   ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_items(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId;\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if (Array.isArray($schema)) {\n    var $additionalItems = it.schema.additionalItems;\n    if ($additionalItems === false) {\n      out += ' ' + ($valid) + ' = ' + ($data) + '.length <= ' + ($schema.length) + '; ';\n      var $currErrSchemaPath = $errSchemaPath;\n      $errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += '  if (!' + ($valid) + ') {   ';\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ('additionalItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schema.length) + ' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should NOT have more than ' + ($schema.length) + ' items\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n      out += ' } ';\n      $errSchemaPath = $currErrSchemaPath;\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($i) + ') { ';\n          var $passData = $data + '[' + $i + ']';\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + '[' + $i + ']';\n          $it.errSchemaPath = $errSchemaPath + '/' + $i;\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $i, it.opts.jsonPointers, true);\n          $it.dataPathArr[$dataNxt] = $i;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n    if (typeof $additionalItems == 'object' && (it.opts.strictKeywords ? (typeof $additionalItems == 'object' && Object.keys($additionalItems).length > 0) || $additionalItems === false : it.util.schemaHasRules($additionalItems, it.RULES.all))) {\n      $it.schema = $additionalItems;\n      $it.schemaPath = it.schemaPath + '.additionalItems';\n      $it.errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($schema.length) + ') {  for (var ' + ($idx) + ' = ' + ($schema.length) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n      $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n      var $passData = $data + '[' + $idx + ']';\n      $it.dataPathArr[$dataNxt] = $idx;\n      var $code = it.validate($it);\n      $it.baseId = $currentBaseId;\n      if (it.util.varOccurences($code, $nextData) < 2) {\n        out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n      } else {\n        out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n      }\n      if ($breakOnError) {\n        out += ' if (!' + ($nextValid) + ') break; ';\n      }\n      out += ' } }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  } else if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += '  for (var ' + ($idx) + ' = ' + (0) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    if ($breakOnError) {\n      out += ' if (!' + ($nextValid) + ') break; ';\n    }\n    out += ' }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate__limit(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $isMax = $keyword == 'maximum',\n    $exclusiveKeyword = $isMax ? 'exclusiveMaximum' : 'exclusiveMinimum',\n    $schemaExcl = it.schema[$exclusiveKeyword],\n    $isDataExcl = it.opts.$data && $schemaExcl && $schemaExcl.$data,\n    $op = $isMax ? '<' : '>',\n    $notOp = $isMax ? '>' : '<',\n    $errorKeyword = undefined;\n  if (!($isData || typeof $schema == 'number' || $schema === undefined)) {\n    throw new Error($keyword + ' must be number');\n  }\n  if (!($isDataExcl || $schemaExcl === undefined || typeof $schemaExcl == 'number' || typeof $schemaExcl == 'boolean')) {\n    throw new Error($exclusiveKeyword + ' must be number or boolean');\n  }\n  if ($isDataExcl) {\n    var $schemaValueExcl = it.util.getData($schemaExcl.$data, $dataLvl, it.dataPathArr),\n      $exclusive = 'exclusive' + $lvl,\n      $exclType = 'exclType' + $lvl,\n      $exclIsNumber = 'exclIsNumber' + $lvl,\n      $opExpr = 'op' + $lvl,\n      $opStr = '\\' + ' + $opExpr + ' + \\'';\n    out += ' var schemaExcl' + ($lvl) + ' = ' + ($schemaValueExcl) + '; ';\n    $schemaValueExcl = 'schemaExcl' + $lvl;\n    out += ' var ' + ($exclusive) + '; var ' + ($exclType) + ' = typeof ' + ($schemaValueExcl) + '; if (' + ($exclType) + ' != \\'boolean\\' && ' + ($exclType) + ' != \\'undefined\\' && ' + ($exclType) + ' != \\'number\\') { ';\n    var $errorKeyword = $exclusiveKeyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || '_exclusiveLimit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'' + ($exclusiveKeyword) + ' should be boolean\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else if ( ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n    }\n    out += ' ' + ($exclType) + ' == \\'number\\' ? ( (' + ($exclusive) + ' = ' + ($schemaValue) + ' === undefined || ' + ($schemaValueExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ') ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValueExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) : ( (' + ($exclusive) + ' = ' + ($schemaValueExcl) + ' === true) ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValue) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { var op' + ($lvl) + ' = ' + ($exclusive) + ' ? \\'' + ($op) + '\\' : \\'' + ($op) + '=\\'; ';\n    if ($schema === undefined) {\n      $errorKeyword = $exclusiveKeyword;\n      $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n      $schemaValue = $schemaValueExcl;\n      $isData = $isDataExcl;\n    }\n  } else {\n    var $exclIsNumber = typeof $schemaExcl == 'number',\n      $opStr = $op;\n    if ($exclIsNumber && $isData) {\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ( ' + ($schemaValue) + ' === undefined || ' + ($schemaExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ' ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { ';\n    } else {\n      if ($exclIsNumber && $schema === undefined) {\n        $exclusive = true;\n        $errorKeyword = $exclusiveKeyword;\n        $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n        $schemaValue = $schemaExcl;\n        $notOp += '=';\n      } else {\n        if ($exclIsNumber) $schemaValue = Math[$isMax ? 'min' : 'max']($schemaExcl, $schema);\n        if ($schemaExcl === ($exclIsNumber ? $schemaValue : true)) {\n          $exclusive = true;\n          $errorKeyword = $exclusiveKeyword;\n          $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n          $notOp += '=';\n        } else {\n          $exclusive = false;\n          $opStr += '=';\n        }\n      }\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' || ' + ($data) + ' !== ' + ($data) + ') { ';\n    }\n  }\n  $errorKeyword = $errorKeyword || $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { comparison: ' + ($opExpr) + ', limit: ' + ($schemaValue) + ', exclusive: ' + ($exclusive) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be ' + ($opStr) + ' ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate__limitItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxItems' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' ' + ($data) + '.length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxItems') {\n        out += 'more';\n      } else {\n        out += 'fewer';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' items\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate__limitLength(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxLength' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  if (it.opts.unicode === false) {\n    out += ' ' + ($data) + '.length ';\n  } else {\n    out += ' ucs2length(' + ($data) + ') ';\n  }\n  out += ' ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitLength') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT be ';\n      if ($keyword == 'maxLength') {\n        out += 'longer';\n      } else {\n        out += 'shorter';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' characters\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate__limitProperties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxProperties' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' Object.keys(' + ($data) + ').length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxProperties') {\n        out += 'more';\n      } else {\n        out += 'fewer';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' properties\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_multipleOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  out += 'var division' + ($lvl) + ';if (';\n  if ($isData) {\n    out += ' ' + ($schemaValue) + ' !== undefined && ( typeof ' + ($schemaValue) + ' != \\'number\\' || ';\n  }\n  out += ' (division' + ($lvl) + ' = ' + ($data) + ' / ' + ($schemaValue) + ', ';\n  if (it.opts.multipleOfPrecision) {\n    out += ' Math.abs(Math.round(division' + ($lvl) + ') - division' + ($lvl) + ') > 1e-' + (it.opts.multipleOfPrecision) + ' ';\n  } else {\n    out += ' division' + ($lvl) + ' !== parseInt(division' + ($lvl) + ') ';\n  }\n  out += ' ) ';\n  if ($isData) {\n    out += '  )  ';\n  }\n  out += ' ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('multipleOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { multipleOf: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be multiple of ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_not(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($errs) + ' = errors;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.createErrors = false;\n    var $allErrorsOption;\n    if ($it.opts.allErrors) {\n      $allErrorsOption = $it.opts.allErrors;\n      $it.opts.allErrors = false;\n    }\n    out += ' ' + (it.validate($it)) + ' ';\n    $it.createErrors = true;\n    if ($allErrorsOption) $it.opts.allErrors = $allErrorsOption;\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (' + ($nextValid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n  } else {\n    out += '  var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if ($breakOnError) {\n      out += ' if (false) { ';\n    }\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_oneOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $currentBaseId = $it.baseId,\n    $prevValid = 'prevValid' + $lvl,\n    $passingSchemas = 'passingSchemas' + $lvl;\n  out += 'var ' + ($errs) + ' = errors , ' + ($prevValid) + ' = false , ' + ($valid) + ' = false , ' + ($passingSchemas) + ' = null; ';\n  var $wasComposite = it.compositeRule;\n  it.compositeRule = $it.compositeRule = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n      } else {\n        out += ' var ' + ($nextValid) + ' = true; ';\n      }\n      if ($i) {\n        out += ' if (' + ($nextValid) + ' && ' + ($prevValid) + ') { ' + ($valid) + ' = false; ' + ($passingSchemas) + ' = [' + ($passingSchemas) + ', ' + ($i) + ']; } else { ';\n        $closingBraces += '}';\n      }\n      out += ' if (' + ($nextValid) + ') { ' + ($valid) + ' = ' + ($prevValid) + ' = true; ' + ($passingSchemas) + ' = ' + ($i) + '; }';\n    }\n  }\n  it.compositeRule = $it.compositeRule = $wasComposite;\n  out += '' + ($closingBraces) + 'if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('oneOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { passingSchemas: ' + ($passingSchemas) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match exactly one schema in oneOf\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; return false; ';\n    }\n  }\n  out += '} else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; }';\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_pattern(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $regexp = $isData ? '(new RegExp(' + $schemaValue + '))' : it.usePattern($schema);\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n  }\n  out += ' !' + ($regexp) + '.test(' + ($data) + ') ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('pattern') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { pattern:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match pattern \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_properties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $key = 'key' + $lvl,\n    $idx = 'idx' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $dataProperties = 'dataProperties' + $lvl;\n  var $schemaKeys = Object.keys($schema || {}).filter(notProto),\n    $pProperties = it.schema.patternProperties || {},\n    $pPropertyKeys = Object.keys($pProperties).filter(notProto),\n    $aProperties = it.schema.additionalProperties,\n    $someProperties = $schemaKeys.length || $pPropertyKeys.length,\n    $noAdditional = $aProperties === false,\n    $additionalIsSchema = typeof $aProperties == 'object' && Object.keys($aProperties).length,\n    $removeAdditional = it.opts.removeAdditional,\n    $checkAdditional = $noAdditional || $additionalIsSchema || $removeAdditional,\n    $ownProperties = it.opts.ownProperties,\n    $currentBaseId = it.baseId;\n  var $required = it.schema.required;\n  if ($required && !(it.opts.$data && $required.$data) && $required.length < it.opts.loopRequired) {\n    var $requiredHash = it.util.toHash($required);\n  }\n\n  function notProto(p) {\n    return p !== '__proto__';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($nextValid) + ' = true;';\n  if ($ownProperties) {\n    out += ' var ' + ($dataProperties) + ' = undefined;';\n  }\n  if ($checkAdditional) {\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    if ($someProperties) {\n      out += ' var isAdditional' + ($lvl) + ' = !(false ';\n      if ($schemaKeys.length) {\n        if ($schemaKeys.length > 8) {\n          out += ' || validate.schema' + ($schemaPath) + '.hasOwnProperty(' + ($key) + ') ';\n        } else {\n          var arr1 = $schemaKeys;\n          if (arr1) {\n            var $propertyKey, i1 = -1,\n              l1 = arr1.length - 1;\n            while (i1 < l1) {\n              $propertyKey = arr1[i1 += 1];\n              out += ' || ' + ($key) + ' == ' + (it.util.toQuotedString($propertyKey)) + ' ';\n            }\n          }\n        }\n      }\n      if ($pPropertyKeys.length) {\n        var arr2 = $pPropertyKeys;\n        if (arr2) {\n          var $pProperty, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $pProperty = arr2[$i += 1];\n            out += ' || ' + (it.usePattern($pProperty)) + '.test(' + ($key) + ') ';\n          }\n        }\n      }\n      out += ' ); if (isAdditional' + ($lvl) + ') { ';\n    }\n    if ($removeAdditional == 'all') {\n      out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n    } else {\n      var $currentErrorPath = it.errorPath;\n      var $additionalProperty = '\\' + ' + $key + ' + \\'';\n      if (it.opts._errorDataPathProperty) {\n        it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n      }\n      if ($noAdditional) {\n        if ($removeAdditional) {\n          out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n        } else {\n          out += ' ' + ($nextValid) + ' = false; ';\n          var $currErrSchemaPath = $errSchemaPath;\n          $errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          var $$outStack = $$outStack || [];\n          $$outStack.push(out);\n          out = ''; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('additionalProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { additionalProperty: \\'' + ($additionalProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'';\n              if (it.opts._errorDataPathProperty) {\n                out += 'is an invalid additional property';\n              } else {\n                out += 'should NOT have additional properties';\n              }\n              out += '\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          var __err = out;\n          out = $$outStack.pop();\n          if (!it.compositeRule && $breakOnError) {\n            /* istanbul ignore if */\n            if (it.async) {\n              out += ' throw new ValidationError([' + (__err) + ']); ';\n            } else {\n              out += ' validate.errors = [' + (__err) + ']; return false; ';\n            }\n          } else {\n            out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n          }\n          $errSchemaPath = $currErrSchemaPath;\n          if ($breakOnError) {\n            out += ' break; ';\n          }\n        }\n      } else if ($additionalIsSchema) {\n        if ($removeAdditional == 'failing') {\n          out += ' var ' + ($errs) + ' = errors;  ';\n          var $wasComposite = it.compositeRule;\n          it.compositeRule = $it.compositeRule = true;\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' if (!' + ($nextValid) + ') { errors = ' + ($errs) + '; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete ' + ($data) + '[' + ($key) + ']; }  ';\n          it.compositeRule = $it.compositeRule = $wasComposite;\n        } else {\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n        }\n      }\n      it.errorPath = $currentErrorPath;\n    }\n    if ($someProperties) {\n      out += ' } ';\n    }\n    out += ' }  ';\n    if ($breakOnError) {\n      out += ' if (' + ($nextValid) + ') { ';\n      $closingBraces += '}';\n    }\n  }\n  var $useDefaults = it.opts.useDefaults && !it.compositeRule;\n  if ($schemaKeys.length) {\n    var arr3 = $schemaKeys;\n    if (arr3) {\n      var $propertyKey, i3 = -1,\n        l3 = arr3.length - 1;\n      while (i3 < l3) {\n        $propertyKey = arr3[i3 += 1];\n        var $sch = $schema[$propertyKey];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          var $prop = it.util.getProperty($propertyKey),\n            $passData = $data + $prop,\n            $hasDefault = $useDefaults && $sch.default !== undefined;\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + $prop;\n          $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($propertyKey);\n          $it.errorPath = it.util.getPath(it.errorPath, $propertyKey, it.opts.jsonPointers);\n          $it.dataPathArr[$dataNxt] = it.util.toQuotedString($propertyKey);\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            $code = it.util.varReplace($code, $nextData, $passData);\n            var $useData = $passData;\n          } else {\n            var $useData = $nextData;\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ';\n          }\n          if ($hasDefault) {\n            out += ' ' + ($code) + ' ';\n          } else {\n            if ($requiredHash && $requiredHash[$propertyKey]) {\n              out += ' if ( ' + ($useData) + ' === undefined ';\n              if ($ownProperties) {\n                out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n              }\n              out += ') { ' + ($nextValid) + ' = false; ';\n              var $currentErrorPath = it.errorPath,\n                $currErrSchemaPath = $errSchemaPath,\n                $missingProperty = it.util.escapeQuotes($propertyKey);\n              if (it.opts._errorDataPathProperty) {\n                it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n              }\n              $errSchemaPath = it.errSchemaPath + '/required';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'';\n                  if (it.opts._errorDataPathProperty) {\n                    out += 'is a required property';\n                  } else {\n                    out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) {\n                /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              $errSchemaPath = $currErrSchemaPath;\n              it.errorPath = $currentErrorPath;\n              out += ' } else { ';\n            } else {\n              if ($breakOnError) {\n                out += ' if ( ' + ($useData) + ' === undefined ';\n                if ($ownProperties) {\n                  out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ') { ' + ($nextValid) + ' = true; } else { ';\n              } else {\n                out += ' if (' + ($useData) + ' !== undefined ';\n                if ($ownProperties) {\n                  out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ' ) { ';\n              }\n            }\n            out += ' ' + ($code) + ' } ';\n          }\n        }\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($pPropertyKeys.length) {\n    var arr4 = $pPropertyKeys;\n    if (arr4) {\n      var $pProperty, i4 = -1,\n        l4 = arr4.length - 1;\n      while (i4 < l4) {\n        $pProperty = arr4[i4 += 1];\n        var $sch = $pProperties[$pProperty];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          $it.schema = $sch;\n          $it.schemaPath = it.schemaPath + '.patternProperties' + it.util.getProperty($pProperty);\n          $it.errSchemaPath = it.errSchemaPath + '/patternProperties/' + it.util.escapeFragment($pProperty);\n          if ($ownProperties) {\n            out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n          } else {\n            out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n          }\n          out += ' if (' + (it.usePattern($pProperty)) + '.test(' + ($key) + ')) { ';\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n          out += ' } ';\n          if ($breakOnError) {\n            out += ' else ' + ($nextValid) + ' = true; ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_propertyNames(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  out += 'var ' + ($errs) + ' = errors;';\n  if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    var $key = 'key' + $lvl,\n      $idx = 'idx' + $lvl,\n      $i = 'i' + $lvl,\n      $invalidName = '\\' + ' + $key + ' + \\'',\n      $dataNxt = $it.dataLevel = it.dataLevel + 1,\n      $nextData = 'data' + $dataNxt,\n      $dataProperties = 'dataProperties' + $lvl,\n      $ownProperties = it.opts.ownProperties,\n      $currentBaseId = it.baseId;\n    if ($ownProperties) {\n      out += ' var ' + ($dataProperties) + ' = undefined; ';\n    }\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    out += ' var startErrs' + ($lvl) + ' = errors; ';\n    var $passData = $key;\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (!' + ($nextValid) + ') { for (var ' + ($i) + '=startErrs' + ($lvl) + '; ' + ($i) + '<errors; ' + ($i) + '++) { vErrors[' + ($i) + '].propertyName = ' + ($key) + '; }   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('propertyNames') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { propertyName: \\'' + ($invalidName) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'property name \\\\\\'' + ($invalidName) + '\\\\\\' is invalid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    if ($breakOnError) {\n      out += ' break; ';\n    }\n    out += ' } }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_required(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    if ($schema.length < it.opts.loopRequired && it.schema.properties && Object.keys(it.schema.properties).length) {\n      var $required = [];\n      var arr1 = $schema;\n      if (arr1) {\n        var $property, i1 = -1,\n          l1 = arr1.length - 1;\n        while (i1 < l1) {\n          $property = arr1[i1 += 1];\n          var $propertySch = it.schema.properties[$property];\n          if (!($propertySch && (it.opts.strictKeywords ? (typeof $propertySch == 'object' && Object.keys($propertySch).length > 0) || $propertySch === false : it.util.schemaHasRules($propertySch, it.RULES.all)))) {\n            $required[$required.length] = $property;\n          }\n        }\n      }\n    } else {\n      var $required = $schema;\n    }\n  }\n  if ($isData || $required.length) {\n    var $currentErrorPath = it.errorPath,\n      $loopRequired = $isData || $required.length >= it.opts.loopRequired,\n      $ownProperties = it.opts.ownProperties;\n    if ($breakOnError) {\n      out += ' var missing' + ($lvl) + '; ';\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        out += ' var ' + ($valid) + ' = true; ';\n        if ($isData) {\n          out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { ' + ($valid) + ' = ' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] !== undefined ';\n        if ($ownProperties) {\n          out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += '; if (!' + ($valid) + ') break; } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n        out += '  if (!' + ($valid) + ') {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      } else {\n        out += ' if ( ';\n        var arr2 = $required;\n        if (arr2) {\n          var $propertyKey, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $propertyKey = arr2[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ') {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      }\n    } else {\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        if ($isData) {\n          out += ' if (' + ($vSchema) + ' && !Array.isArray(' + ($vSchema) + ')) {  var err =   '; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'';\n              if (it.opts._errorDataPathProperty) {\n                out += 'is a required property';\n              } else {\n                out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n              }\n              out += '\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (' + ($vSchema) + ' !== undefined) { ';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { if (' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] === undefined ';\n        if ($ownProperties) {\n          out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += ') {  var err =   '; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n      } else {\n        var arr3 = $required;\n        if (arr3) {\n          var $propertyKey, i3 = -1,\n            l3 = arr3.length - 1;\n          while (i3 < l3) {\n            $propertyKey = arr3[i3 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'';\n                if (it.opts._errorDataPathProperty) {\n                  out += 'is a required property';\n                } else {\n                  out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                }\n                out += '\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n    }\n    it.errorPath = $currentErrorPath;\n  } else if ($breakOnError) {\n    out += ' if (true) {';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_uniqueItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (($schema || $isData) && it.opts.uniqueItems !== false) {\n    if ($isData) {\n      out += ' var ' + ($valid) + '; if (' + ($schemaValue) + ' === false || ' + ($schemaValue) + ' === undefined) ' + ($valid) + ' = true; else if (typeof ' + ($schemaValue) + ' != \\'boolean\\') ' + ($valid) + ' = false; else { ';\n    }\n    out += ' var i = ' + ($data) + '.length , ' + ($valid) + ' = true , j; if (i > 1) { ';\n    var $itemType = it.schema.items && it.schema.items.type,\n      $typeIsArray = Array.isArray($itemType);\n    if (!$itemType || $itemType == 'object' || $itemType == 'array' || ($typeIsArray && ($itemType.indexOf('object') >= 0 || $itemType.indexOf('array') >= 0))) {\n      out += ' outer: for (;i--;) { for (j = i; j--;) { if (equal(' + ($data) + '[i], ' + ($data) + '[j])) { ' + ($valid) + ' = false; break outer; } } } ';\n    } else {\n      out += ' var itemIndices = {}, item; for (;i--;) { var item = ' + ($data) + '[i]; ';\n      var $method = 'checkDataType' + ($typeIsArray ? 's' : '');\n      out += ' if (' + (it.util[$method]($itemType, 'item', it.opts.strictNumbers, true)) + ') continue; ';\n      if ($typeIsArray) {\n        out += ' if (typeof item == \\'string\\') item = \\'\"\\' + item; ';\n      }\n      out += ' if (typeof itemIndices[item] == \\'number\\') { ' + ($valid) + ' = false; j = itemIndices[item]; break; } itemIndices[item] = i; } ';\n    }\n    out += ' } ';\n    if ($isData) {\n      out += '  }  ';\n    }\n    out += ' if (!' + ($valid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('uniqueItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { i: i, j: j } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT have duplicate items (items ## \\' + j + \\' and \\' + i + \\' are identical)\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema:  ';\n        if ($isData) {\n          out += 'validate.schema' + ($schemaPath);\n        } else {\n          out += '' + ($schema);\n        }\n        out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n", "'use strict';\n\n//all requires must be explicit because browserify won't work with dynamic requires\nmodule.exports = {\n  '$ref': require('./ref'),\n  allOf: require('./allOf'),\n  anyOf: require('./anyOf'),\n  '$comment': require('./comment'),\n  const: require('./const'),\n  contains: require('./contains'),\n  dependencies: require('./dependencies'),\n  'enum': require('./enum'),\n  format: require('./format'),\n  'if': require('./if'),\n  items: require('./items'),\n  maximum: require('./_limit'),\n  minimum: require('./_limit'),\n  maxItems: require('./_limitItems'),\n  minItems: require('./_limitItems'),\n  maxLength: require('./_limitLength'),\n  minLength: require('./_limitLength'),\n  maxProperties: require('./_limitProperties'),\n  minProperties: require('./_limitProperties'),\n  multipleOf: require('./multipleOf'),\n  not: require('./not'),\n  oneOf: require('./oneOf'),\n  pattern: require('./pattern'),\n  properties: require('./properties'),\n  propertyNames: require('./propertyNames'),\n  required: require('./required'),\n  uniqueItems: require('./uniqueItems'),\n  validate: require('./validate')\n};\n", "'use strict';\n\nvar ruleModules = require('../dotjs')\n  , toHash = require('./util').toHash;\n\nmodule.exports = function rules() {\n  var RULES = [\n    { type: 'number',\n      rules: [ { 'maximum': ['exclusiveMaximum'] },\n               { 'minimum': ['exclusiveMinimum'] }, 'multipleOf', 'format'] },\n    { type: 'string',\n      rules: [ 'maxLength', 'minLength', 'pattern', 'format' ] },\n    { type: 'array',\n      rules: [ 'maxItems', 'minItems', 'items', 'contains', 'uniqueItems' ] },\n    { type: 'object',\n      rules: [ 'maxProperties', 'minProperties', 'required', 'dependencies', 'propertyNames',\n               { 'properties': ['additionalProperties', 'patternProperties'] } ] },\n    { rules: [ '$ref', 'const', 'enum', 'not', 'anyOf', 'oneOf', 'allOf', 'if' ] }\n  ];\n\n  var ALL = [ 'type', '$comment' ];\n  var KEYWORDS = [\n    '$schema', '$id', 'id', '$data', '$async', 'title',\n    'description', 'default', 'definitions',\n    'examples', 'readOnly', 'writeOnly',\n    'contentMediaType', 'contentEncoding',\n    'additionalItems', 'then', 'else'\n  ];\n  var TYPES = [ 'number', 'integer', 'string', 'array', 'object', 'boolean', 'null' ];\n  RULES.all = toHash(ALL);\n  RULES.types = toHash(TYPES);\n\n  RULES.forEach(function (group) {\n    group.rules = group.rules.map(function (keyword) {\n      var implKeywords;\n      if (typeof keyword == 'object') {\n        var key = Object.keys(keyword)[0];\n        implKeywords = keyword[key];\n        keyword = key;\n        implKeywords.forEach(function (k) {\n          ALL.push(k);\n          RULES.all[k] = true;\n        });\n      }\n      ALL.push(keyword);\n      var rule = RULES.all[keyword] = {\n        keyword: keyword,\n        code: ruleModules[keyword],\n        implements: implKeywords\n      };\n      return rule;\n    });\n\n    RULES.all.$comment = {\n      keyword: '$comment',\n      code: ruleModules.$comment\n    };\n\n    if (group.type) RULES.types[group.type] = group;\n  });\n\n  RULES.keywords = toHash(ALL.concat(KEYWORDS));\n  RULES.custom = {};\n\n  return RULES;\n};\n", "'use strict';\n\nvar KEYWORDS = [\n  'multipleOf',\n  'maximum',\n  'exclusiveMaximum',\n  'minimum',\n  'exclusiveMinimum',\n  'maxLength',\n  'minLength',\n  'pattern',\n  'additionalItems',\n  'maxItems',\n  'minItems',\n  'uniqueItems',\n  'maxProperties',\n  'minProperties',\n  'required',\n  'additionalProperties',\n  'enum',\n  'format',\n  'const'\n];\n\nmodule.exports = function (metaSchema, keywordsJsonPointers) {\n  for (var i=0; i<keywordsJsonPointers.length; i++) {\n    metaSchema = JSON.parse(JSON.stringify(metaSchema));\n    var segments = keywordsJsonPointers[i].split('/');\n    var keywords = metaSchema;\n    var j;\n    for (j=1; j<segments.length; j++)\n      keywords = keywords[segments[j]];\n\n    for (j=0; j<KEYWORDS.length; j++) {\n      var key = KEYWORDS[j];\n      var schema = keywords[key];\n      if (schema) {\n        keywords[key] = {\n          anyOf: [\n            schema,\n            { $ref: 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#' }\n          ]\n        };\n      }\n    }\n  }\n\n  return metaSchema;\n};\n", "'use strict';\n\nvar MissingRefError = require('./error_classes').MissingRef;\n\nmodule.exports = compileAsync;\n\n\n/**\n * Creates validating function for passed schema with asynchronous loading of missing schemas.\n * `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.\n * @this  Ajv\n * @param {Object}   schema schema object\n * @param {Boolean}  meta optional true to compile meta-schema; this parameter can be skipped\n * @param {Function} callback an optional node-style callback, it is called with 2 parameters: error (or null) and validating function.\n * @return {Promise} promise that resolves with a validating function.\n */\nfunction compileAsync(schema, meta, callback) {\n  /* eslint no-shadow: 0 */\n  /* global Promise */\n  /* jshint validthis: true */\n  var self = this;\n  if (typeof this._opts.loadSchema != 'function')\n    throw new Error('options.loadSchema should be a function');\n\n  if (typeof meta == 'function') {\n    callback = meta;\n    meta = undefined;\n  }\n\n  var p = loadMetaSchemaOf(schema).then(function () {\n    var schemaObj = self._addSchema(schema, undefined, meta);\n    return schemaObj.validate || _compileAsync(schemaObj);\n  });\n\n  if (callback) {\n    p.then(\n      function(v) { callback(null, v); },\n      callback\n    );\n  }\n\n  return p;\n\n\n  function loadMetaSchemaOf(sch) {\n    var $schema = sch.$schema;\n    return $schema && !self.getSchema($schema)\n            ? compileAsync.call(self, { $ref: $schema }, true)\n            : Promise.resolve();\n  }\n\n\n  function _compileAsync(schemaObj) {\n    try { return self._compile(schemaObj); }\n    catch(e) {\n      if (e instanceof MissingRefError) return loadMissingSchema(e);\n      throw e;\n    }\n\n\n    function loadMissingSchema(e) {\n      var ref = e.missingSchema;\n      if (added(ref)) throw new Error('Schema ' + ref + ' is loaded but ' + e.missingRef + ' cannot be resolved');\n\n      var schemaPromise = self._loadingSchemas[ref];\n      if (!schemaPromise) {\n        schemaPromise = self._loadingSchemas[ref] = self._opts.loadSchema(ref);\n        schemaPromise.then(removePromise, removePromise);\n      }\n\n      return schemaPromise.then(function (sch) {\n        if (!added(ref)) {\n          return loadMetaSchemaOf(sch).then(function () {\n            if (!added(ref)) self.addSchema(sch, ref, undefined, meta);\n          });\n        }\n      }).then(function() {\n        return _compileAsync(schemaObj);\n      });\n\n      function removePromise() {\n        delete self._loadingSchemas[ref];\n      }\n\n      function added(ref) {\n        return self._refs[ref] || self._schemas[ref];\n      }\n    }\n  }\n}\n", "'use strict';\nmodule.exports = function generate_custom(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $rule = this,\n    $definition = 'definition' + $lvl,\n    $rDef = $rule.definition,\n    $closingBraces = '';\n  var $compile, $inline, $macro, $ruleValidate, $validateCode;\n  if ($isData && $rDef.$data) {\n    $validateCode = 'keywordValidate' + $lvl;\n    var $validateSchema = $rDef.validateSchema;\n    out += ' var ' + ($definition) + ' = RULES.custom[\\'' + ($keyword) + '\\'].definition; var ' + ($validateCode) + ' = ' + ($definition) + '.validate;';\n  } else {\n    $ruleValidate = it.useCustomRule($rule, $schema, it.schema, it);\n    if (!$ruleValidate) return;\n    $schemaValue = 'validate.schema' + $schemaPath;\n    $validateCode = $ruleValidate.code;\n    $compile = $rDef.compile;\n    $inline = $rDef.inline;\n    $macro = $rDef.macro;\n  }\n  var $ruleErrs = $validateCode + '.errors',\n    $i = 'i' + $lvl,\n    $ruleErr = 'ruleErr' + $lvl,\n    $asyncKeyword = $rDef.async;\n  if ($asyncKeyword && !it.async) throw new Error('async keyword in sync schema');\n  if (!($inline || $macro)) {\n    out += '' + ($ruleErrs) + ' = null;';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($isData && $rDef.$data) {\n    $closingBraces += '}';\n    out += ' if (' + ($schemaValue) + ' === undefined) { ' + ($valid) + ' = true; } else { ';\n    if ($validateSchema) {\n      $closingBraces += '}';\n      out += ' ' + ($valid) + ' = ' + ($definition) + '.validateSchema(' + ($schemaValue) + '); if (' + ($valid) + ') { ';\n    }\n  }\n  if ($inline) {\n    if ($rDef.statements) {\n      out += ' ' + ($ruleValidate.validate) + ' ';\n    } else {\n      out += ' ' + ($valid) + ' = ' + ($ruleValidate.validate) + '; ';\n    }\n  } else if ($macro) {\n    var $it = it.util.copy(it);\n    var $closingBraces = '';\n    $it.level++;\n    var $nextValid = 'valid' + $it.level;\n    $it.schema = $ruleValidate.validate;\n    $it.schemaPath = '';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it).replace(/validate\\.schema/g, $validateCode);\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($code);\n  } else {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    out += '  ' + ($validateCode) + '.call( ';\n    if (it.opts.passContext) {\n      out += 'this';\n    } else {\n      out += 'self';\n    }\n    if ($compile || $rDef.schema === false) {\n      out += ' , ' + ($data) + ' ';\n    } else {\n      out += ' , ' + ($schemaValue) + ' , ' + ($data) + ' , validate.schema' + (it.schemaPath) + ' ';\n    }\n    out += ' , (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ' , rootData )  ';\n    var def_callRuleValidate = out;\n    out = $$outStack.pop();\n    if ($rDef.errors === false) {\n      out += ' ' + ($valid) + ' = ';\n      if ($asyncKeyword) {\n        out += 'await ';\n      }\n      out += '' + (def_callRuleValidate) + '; ';\n    } else {\n      if ($asyncKeyword) {\n        $ruleErrs = 'customErrors' + $lvl;\n        out += ' var ' + ($ruleErrs) + ' = null; try { ' + ($valid) + ' = await ' + (def_callRuleValidate) + '; } catch (e) { ' + ($valid) + ' = false; if (e instanceof ValidationError) ' + ($ruleErrs) + ' = e.errors; else throw e; } ';\n      } else {\n        out += ' ' + ($ruleErrs) + ' = null; ' + ($valid) + ' = ' + (def_callRuleValidate) + '; ';\n      }\n    }\n  }\n  if ($rDef.modifying) {\n    out += ' if (' + ($parentData) + ') ' + ($data) + ' = ' + ($parentData) + '[' + ($parentDataProperty) + '];';\n  }\n  out += '' + ($closingBraces);\n  if ($rDef.valid) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  } else {\n    out += ' if ( ';\n    if ($rDef.valid === undefined) {\n      out += ' !';\n      if ($macro) {\n        out += '' + ($nextValid);\n      } else {\n        out += '' + ($valid);\n      }\n    } else {\n      out += ' ' + (!$rDef.valid) + ' ';\n    }\n    out += ') { ';\n    $errorKeyword = $rule.keyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    var def_customError = out;\n    out = $$outStack.pop();\n    if ($inline) {\n      if ($rDef.errors) {\n        if ($rDef.errors != 'full') {\n          out += '  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } ';\n        }\n      } else {\n        if ($rDef.errors === false) {\n          out += ' ' + (def_customError) + ' ';\n        } else {\n          out += ' if (' + ($errs) + ' == errors) { ' + (def_customError) + ' } else {  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } } ';\n        }\n      }\n    } else if ($macro) {\n      out += '   var err =   '; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError(vErrors); ';\n        } else {\n          out += ' validate.errors = vErrors; return false; ';\n        }\n      }\n    } else {\n      if ($rDef.errors === false) {\n        out += ' ' + (def_customError) + ' ';\n      } else {\n        out += ' if (Array.isArray(' + ($ruleErrs) + ')) { if (vErrors === null) vErrors = ' + ($ruleErrs) + '; else vErrors = vErrors.concat(' + ($ruleErrs) + '); errors = vErrors.length;  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + ';  ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\";  ';\n        if (it.opts.verbose) {\n          out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n        }\n        out += ' } } else { ' + (def_customError) + ' } ';\n      }\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  }\n  return out;\n}\n", "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$id\": \"http://json-schema.org/draft-07/schema#\",\n    \"title\": \"Core schema meta-schema\",\n    \"definitions\": {\n        \"schemaArray\": {\n            \"type\": \"array\",\n            \"minItems\": 1,\n            \"items\": { \"$ref\": \"#\" }\n        },\n        \"nonNegativeInteger\": {\n            \"type\": \"integer\",\n            \"minimum\": 0\n        },\n        \"nonNegativeIntegerDefault0\": {\n            \"allOf\": [\n                { \"$ref\": \"#/definitions/nonNegativeInteger\" },\n                { \"default\": 0 }\n            ]\n        },\n        \"simpleTypes\": {\n            \"enum\": [\n                \"array\",\n                \"boolean\",\n                \"integer\",\n                \"null\",\n                \"number\",\n                \"object\",\n                \"string\"\n            ]\n        },\n        \"stringArray\": {\n            \"type\": \"array\",\n            \"items\": { \"type\": \"string\" },\n            \"uniqueItems\": true,\n            \"default\": []\n        }\n    },\n    \"type\": [\"object\", \"boolean\"],\n    \"properties\": {\n        \"$id\": {\n            \"type\": \"string\",\n            \"format\": \"uri-reference\"\n        },\n        \"$schema\": {\n            \"type\": \"string\",\n            \"format\": \"uri\"\n        },\n        \"$ref\": {\n            \"type\": \"string\",\n            \"format\": \"uri-reference\"\n        },\n        \"$comment\": {\n            \"type\": \"string\"\n        },\n        \"title\": {\n            \"type\": \"string\"\n        },\n        \"description\": {\n            \"type\": \"string\"\n        },\n        \"default\": true,\n        \"readOnly\": {\n            \"type\": \"boolean\",\n            \"default\": false\n        },\n        \"examples\": {\n            \"type\": \"array\",\n            \"items\": true\n        },\n        \"multipleOf\": {\n            \"type\": \"number\",\n            \"exclusiveMinimum\": 0\n        },\n        \"maximum\": {\n            \"type\": \"number\"\n        },\n        \"exclusiveMaximum\": {\n            \"type\": \"number\"\n        },\n        \"minimum\": {\n            \"type\": \"number\"\n        },\n        \"exclusiveMinimum\": {\n            \"type\": \"number\"\n        },\n        \"maxLength\": { \"$ref\": \"#/definitions/nonNegativeInteger\" },\n        \"minLength\": { \"$ref\": \"#/definitions/nonNegativeIntegerDefault0\" },\n        \"pattern\": {\n            \"type\": \"string\",\n            \"format\": \"regex\"\n        },\n        \"additionalItems\": { \"$ref\": \"#\" },\n        \"items\": {\n            \"anyOf\": [\n                { \"$ref\": \"#\" },\n                { \"$ref\": \"#/definitions/schemaArray\" }\n            ],\n            \"default\": true\n        },\n        \"maxItems\": { \"$ref\": \"#/definitions/nonNegativeInteger\" },\n        \"minItems\": { \"$ref\": \"#/definitions/nonNegativeIntegerDefault0\" },\n        \"uniqueItems\": {\n            \"type\": \"boolean\",\n            \"default\": false\n        },\n        \"contains\": { \"$ref\": \"#\" },\n        \"maxProperties\": { \"$ref\": \"#/definitions/nonNegativeInteger\" },\n        \"minProperties\": { \"$ref\": \"#/definitions/nonNegativeIntegerDefault0\" },\n        \"required\": { \"$ref\": \"#/definitions/stringArray\" },\n        \"additionalProperties\": { \"$ref\": \"#\" },\n        \"definitions\": {\n            \"type\": \"object\",\n            \"additionalProperties\": { \"$ref\": \"#\" },\n            \"default\": {}\n        },\n        \"properties\": {\n            \"type\": \"object\",\n            \"additionalProperties\": { \"$ref\": \"#\" },\n            \"default\": {}\n        },\n        \"patternProperties\": {\n            \"type\": \"object\",\n            \"additionalProperties\": { \"$ref\": \"#\" },\n            \"propertyNames\": { \"format\": \"regex\" },\n            \"default\": {}\n        },\n        \"dependencies\": {\n            \"type\": \"object\",\n            \"additionalProperties\": {\n                \"anyOf\": [\n                    { \"$ref\": \"#\" },\n                    { \"$ref\": \"#/definitions/stringArray\" }\n                ]\n            }\n        },\n        \"propertyNames\": { \"$ref\": \"#\" },\n        \"const\": true,\n        \"enum\": {\n            \"type\": \"array\",\n            \"items\": true,\n            \"minItems\": 1,\n            \"uniqueItems\": true\n        },\n        \"type\": {\n            \"anyOf\": [\n                { \"$ref\": \"#/definitions/simpleTypes\" },\n                {\n                    \"type\": \"array\",\n                    \"items\": { \"$ref\": \"#/definitions/simpleTypes\" },\n                    \"minItems\": 1,\n                    \"uniqueItems\": true\n                }\n            ]\n        },\n        \"format\": { \"type\": \"string\" },\n        \"contentMediaType\": { \"type\": \"string\" },\n        \"contentEncoding\": { \"type\": \"string\" },\n        \"if\": {\"$ref\": \"#\"},\n        \"then\": {\"$ref\": \"#\"},\n        \"else\": {\"$ref\": \"#\"},\n        \"allOf\": { \"$ref\": \"#/definitions/schemaArray\" },\n        \"anyOf\": { \"$ref\": \"#/definitions/schemaArray\" },\n        \"oneOf\": { \"$ref\": \"#/definitions/schemaArray\" },\n        \"not\": { \"$ref\": \"#\" }\n    },\n    \"default\": true\n}\n", "'use strict';\n\nvar metaSchema = require('./refs/json-schema-draft-07.json');\n\nmodule.exports = {\n  $id: 'https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js',\n  definitions: {\n    simpleTypes: metaSchema.definitions.simpleTypes\n  },\n  type: 'object',\n  dependencies: {\n    schema: ['validate'],\n    $data: ['validate'],\n    statements: ['inline'],\n    valid: {not: {required: ['macro']}}\n  },\n  properties: {\n    type: metaSchema.properties.type,\n    schema: {type: 'boolean'},\n    statements: {type: 'boolean'},\n    dependencies: {\n      type: 'array',\n      items: {type: 'string'}\n    },\n    metaSchema: {type: 'object'},\n    modifying: {type: 'boolean'},\n    valid: {type: 'boolean'},\n    $data: {type: 'boolean'},\n    async: {type: 'boolean'},\n    errors: {\n      anyOf: [\n        {type: 'boolean'},\n        {const: 'full'}\n      ]\n    }\n  }\n};\n", "'use strict';\n\nvar IDENTIFIER = /^[a-z_$][a-z0-9_$-]*$/i;\nvar customRuleCode = require('./dotjs/custom');\nvar definitionSchema = require('./definition_schema');\n\nmodule.exports = {\n  add: addKeyword,\n  get: getKeyword,\n  remove: removeKeyword,\n  validate: validateKeyword\n};\n\n\n/**\n * Define custom keyword\n * @this  Ajv\n * @param {String} keyword custom keyword, should be unique (including different from all standard, custom and macro keywords).\n * @param {Object} definition keyword definition object with properties `type` (type(s) which the keyword applies to), `validate` or `compile`.\n * @return {Ajv} this for method chaining\n */\nfunction addKeyword(keyword, definition) {\n  /* jshint validthis: true */\n  /* eslint no-shadow: 0 */\n  var RULES = this.RULES;\n  if (RULES.keywords[keyword])\n    throw new Error('Keyword ' + keyword + ' is already defined');\n\n  if (!IDENTIFIER.test(keyword))\n    throw new Error('Keyword ' + keyword + ' is not a valid identifier');\n\n  if (definition) {\n    this.validateKeyword(definition, true);\n\n    var dataType = definition.type;\n    if (Array.isArray(dataType)) {\n      for (var i=0; i<dataType.length; i++)\n        _addRule(keyword, dataType[i], definition);\n    } else {\n      _addRule(keyword, dataType, definition);\n    }\n\n    var metaSchema = definition.metaSchema;\n    if (metaSchema) {\n      if (definition.$data && this._opts.$data) {\n        metaSchema = {\n          anyOf: [\n            metaSchema,\n            { '$ref': 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#' }\n          ]\n        };\n      }\n      definition.validateSchema = this.compile(metaSchema, true);\n    }\n  }\n\n  RULES.keywords[keyword] = RULES.all[keyword] = true;\n\n\n  function _addRule(keyword, dataType, definition) {\n    var ruleGroup;\n    for (var i=0; i<RULES.length; i++) {\n      var rg = RULES[i];\n      if (rg.type == dataType) {\n        ruleGroup = rg;\n        break;\n      }\n    }\n\n    if (!ruleGroup) {\n      ruleGroup = { type: dataType, rules: [] };\n      RULES.push(ruleGroup);\n    }\n\n    var rule = {\n      keyword: keyword,\n      definition: definition,\n      custom: true,\n      code: customRuleCode,\n      implements: definition.implements\n    };\n    ruleGroup.rules.push(rule);\n    RULES.custom[keyword] = rule;\n  }\n\n  return this;\n}\n\n\n/**\n * Get keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Object|Boolean} custom keyword definition, `true` if it is a predefined keyword, `false` otherwise.\n */\nfunction getKeyword(keyword) {\n  /* jshint validthis: true */\n  var rule = this.RULES.custom[keyword];\n  return rule ? rule.definition : this.RULES.keywords[keyword] || false;\n}\n\n\n/**\n * Remove keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Ajv} this for method chaining\n */\nfunction removeKeyword(keyword) {\n  /* jshint validthis: true */\n  var RULES = this.RULES;\n  delete RULES.keywords[keyword];\n  delete RULES.all[keyword];\n  delete RULES.custom[keyword];\n  for (var i=0; i<RULES.length; i++) {\n    var rules = RULES[i].rules;\n    for (var j=0; j<rules.length; j++) {\n      if (rules[j].keyword == keyword) {\n        rules.splice(j, 1);\n        break;\n      }\n    }\n  }\n  return this;\n}\n\n\n/**\n * Validate keyword definition\n * @this  Ajv\n * @param {Object} definition keyword definition object.\n * @param {Boolean} throwError true to throw exception if definition is invalid\n * @return {boolean} validation result\n */\nfunction validateKeyword(definition, throwError) {\n  validateKeyword.errors = null;\n  var v = this._validateKeyword = this._validateKeyword\n                                  || this.compile(definitionSchema, true);\n\n  if (v(definition)) return true;\n  validateKeyword.errors = v.errors;\n  if (throwError)\n    throw new Error('custom keyword definition is invalid: '  + this.errorsText(v.errors));\n  else\n    return false;\n}\n", "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$id\": \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n    \"description\": \"Meta-schema for $data reference (JSON Schema extension proposal)\",\n    \"type\": \"object\",\n    \"required\": [ \"$data\" ],\n    \"properties\": {\n        \"$data\": {\n            \"type\": \"string\",\n            \"anyOf\": [\n                { \"format\": \"relative-json-pointer\" }, \n                { \"format\": \"json-pointer\" }\n            ]\n        }\n    },\n    \"additionalProperties\": false\n}\n", "'use strict';\n\nvar compileSchema = require('./compile')\n  , resolve = require('./compile/resolve')\n  , Cache = require('./cache')\n  , SchemaObject = require('./compile/schema_obj')\n  , stableStringify = require('fast-json-stable-stringify')\n  , formats = require('./compile/formats')\n  , rules = require('./compile/rules')\n  , $dataMetaSchema = require('./data')\n  , util = require('./compile/util');\n\nmodule.exports = Ajv;\n\nAjv.prototype.validate = validate;\nAjv.prototype.compile = compile;\nAjv.prototype.addSchema = addSchema;\nAjv.prototype.addMetaSchema = addMetaSchema;\nAjv.prototype.validateSchema = validateSchema;\nAjv.prototype.getSchema = getSchema;\nAjv.prototype.removeSchema = removeSchema;\nAjv.prototype.addFormat = addFormat;\nAjv.prototype.errorsText = errorsText;\n\nAjv.prototype._addSchema = _addSchema;\nAjv.prototype._compile = _compile;\n\nAjv.prototype.compileAsync = require('./compile/async');\nvar customKeyword = require('./keyword');\nAjv.prototype.addKeyword = customKeyword.add;\nAjv.prototype.getKeyword = customKeyword.get;\nAjv.prototype.removeKeyword = customKeyword.remove;\nAjv.prototype.validateKeyword = customKeyword.validate;\n\nvar errorClasses = require('./compile/error_classes');\nAjv.ValidationError = errorClasses.Validation;\nAjv.MissingRefError = errorClasses.MissingRef;\nAjv.$dataMetaSchema = $dataMetaSchema;\n\nvar META_SCHEMA_ID = 'http://json-schema.org/draft-07/schema';\n\nvar META_IGNORE_OPTIONS = [ 'removeAdditional', 'useDefaults', 'coerceTypes', 'strictDefaults' ];\nvar META_SUPPORT_DATA = ['/properties'];\n\n/**\n * Creates validator instance.\n * Usage: `Ajv(opts)`\n * @param {Object} opts optional options\n * @return {Object} ajv instance\n */\nfunction Ajv(opts) {\n  if (!(this instanceof Ajv)) return new Ajv(opts);\n  opts = this._opts = util.copy(opts) || {};\n  setLogger(this);\n  this._schemas = {};\n  this._refs = {};\n  this._fragments = {};\n  this._formats = formats(opts.format);\n\n  this._cache = opts.cache || new Cache;\n  this._loadingSchemas = {};\n  this._compilations = [];\n  this.RULES = rules();\n  this._getId = chooseGetId(opts);\n\n  opts.loopRequired = opts.loopRequired || Infinity;\n  if (opts.errorDataPath == 'property') opts._errorDataPathProperty = true;\n  if (opts.serialize === undefined) opts.serialize = stableStringify;\n  this._metaOpts = getMetaSchemaOptions(this);\n\n  if (opts.formats) addInitialFormats(this);\n  if (opts.keywords) addInitialKeywords(this);\n  addDefaultMetaSchema(this);\n  if (typeof opts.meta == 'object') this.addMetaSchema(opts.meta);\n  if (opts.nullable) this.addKeyword('nullable', {metaSchema: {type: 'boolean'}});\n  addInitialSchemas(this);\n}\n\n\n\n/**\n * Validate data using schema\n * Schema will be compiled and cached (using serialized JSON as key. [fast-json-stable-stringify](https://github.com/epoberezkin/fast-json-stable-stringify) is used to serialize.\n * @this   Ajv\n * @param  {String|Object} schemaKeyRef key, ref or schema object\n * @param  {Any} data to be validated\n * @return {Boolean} validation result. Errors from the last validation will be available in `ajv.errors` (and also in compiled schema: `schema.errors`).\n */\nfunction validate(schemaKeyRef, data) {\n  var v;\n  if (typeof schemaKeyRef == 'string') {\n    v = this.getSchema(schemaKeyRef);\n    if (!v) throw new Error('no schema with key or ref \"' + schemaKeyRef + '\"');\n  } else {\n    var schemaObj = this._addSchema(schemaKeyRef);\n    v = schemaObj.validate || this._compile(schemaObj);\n  }\n\n  var valid = v(data);\n  if (v.$async !== true) this.errors = v.errors;\n  return valid;\n}\n\n\n/**\n * Create validating function for passed schema.\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Boolean} _meta true if schema is a meta-schema. Used internally to compile meta schemas of custom keywords.\n * @return {Function} validating function\n */\nfunction compile(schema, _meta) {\n  var schemaObj = this._addSchema(schema, undefined, _meta);\n  return schemaObj.validate || this._compile(schemaObj);\n}\n\n\n/**\n * Adds schema to the instance.\n * @this   Ajv\n * @param {Object|Array} schema schema or array of schemas. If array is passed, `key` and other parameters will be ignored.\n * @param {String} key Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n * @param {Boolean} _skipValidation true to skip schema validation. Used internally, option validateSchema should be used instead.\n * @param {Boolean} _meta true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n * @return {Ajv} this for method chaining\n */\nfunction addSchema(schema, key, _skipValidation, _meta) {\n  if (Array.isArray(schema)){\n    for (var i=0; i<schema.length; i++) this.addSchema(schema[i], undefined, _skipValidation, _meta);\n    return this;\n  }\n  var id = this._getId(schema);\n  if (id !== undefined && typeof id != 'string')\n    throw new Error('schema id must be string');\n  key = resolve.normalizeId(key || id);\n  checkUnique(this, key);\n  this._schemas[key] = this._addSchema(schema, _skipValidation, _meta, true);\n  return this;\n}\n\n\n/**\n * Add schema that will be used to validate other schemas\n * options in META_IGNORE_OPTIONS are alway set to false\n * @this   Ajv\n * @param {Object} schema schema object\n * @param {String} key optional schema key\n * @param {Boolean} skipValidation true to skip schema validation, can be used to override validateSchema option for meta-schema\n * @return {Ajv} this for method chaining\n */\nfunction addMetaSchema(schema, key, skipValidation) {\n  this.addSchema(schema, key, skipValidation, true);\n  return this;\n}\n\n\n/**\n * Validate schema\n * @this   Ajv\n * @param {Object} schema schema to validate\n * @param {Boolean} throwOrLogError pass true to throw (or log) an error if invalid\n * @return {Boolean} true if schema is valid\n */\nfunction validateSchema(schema, throwOrLogError) {\n  var $schema = schema.$schema;\n  if ($schema !== undefined && typeof $schema != 'string')\n    throw new Error('$schema must be a string');\n  $schema = $schema || this._opts.defaultMeta || defaultMeta(this);\n  if (!$schema) {\n    this.logger.warn('meta-schema not available');\n    this.errors = null;\n    return true;\n  }\n  var valid = this.validate($schema, schema);\n  if (!valid && throwOrLogError) {\n    var message = 'schema is invalid: ' + this.errorsText();\n    if (this._opts.validateSchema == 'log') this.logger.error(message);\n    else throw new Error(message);\n  }\n  return valid;\n}\n\n\nfunction defaultMeta(self) {\n  var meta = self._opts.meta;\n  self._opts.defaultMeta = typeof meta == 'object'\n                            ? self._getId(meta) || meta\n                            : self.getSchema(META_SCHEMA_ID)\n                              ? META_SCHEMA_ID\n                              : undefined;\n  return self._opts.defaultMeta;\n}\n\n\n/**\n * Get compiled schema from the instance by `key` or `ref`.\n * @this   Ajv\n * @param  {String} keyRef `key` that was passed to `addSchema` or full schema reference (`schema.id` or resolved id).\n * @return {Function} schema validating function (with property `schema`).\n */\nfunction getSchema(keyRef) {\n  var schemaObj = _getSchemaObj(this, keyRef);\n  switch (typeof schemaObj) {\n    case 'object': return schemaObj.validate || this._compile(schemaObj);\n    case 'string': return this.getSchema(schemaObj);\n    case 'undefined': return _getSchemaFragment(this, keyRef);\n  }\n}\n\n\nfunction _getSchemaFragment(self, ref) {\n  var res = resolve.schema.call(self, { schema: {} }, ref);\n  if (res) {\n    var schema = res.schema\n      , root = res.root\n      , baseId = res.baseId;\n    var v = compileSchema.call(self, schema, root, undefined, baseId);\n    self._fragments[ref] = new SchemaObject({\n      ref: ref,\n      fragment: true,\n      schema: schema,\n      root: root,\n      baseId: baseId,\n      validate: v\n    });\n    return v;\n  }\n}\n\n\nfunction _getSchemaObj(self, keyRef) {\n  keyRef = resolve.normalizeId(keyRef);\n  return self._schemas[keyRef] || self._refs[keyRef] || self._fragments[keyRef];\n}\n\n\n/**\n * Remove cached schema(s).\n * If no parameter is passed all schemas but meta-schemas are removed.\n * If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n * Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n * @this   Ajv\n * @param  {String|Object|RegExp} schemaKeyRef key, ref, pattern to match key/ref or schema object\n * @return {Ajv} this for method chaining\n */\nfunction removeSchema(schemaKeyRef) {\n  if (schemaKeyRef instanceof RegExp) {\n    _removeAllSchemas(this, this._schemas, schemaKeyRef);\n    _removeAllSchemas(this, this._refs, schemaKeyRef);\n    return this;\n  }\n  switch (typeof schemaKeyRef) {\n    case 'undefined':\n      _removeAllSchemas(this, this._schemas);\n      _removeAllSchemas(this, this._refs);\n      this._cache.clear();\n      return this;\n    case 'string':\n      var schemaObj = _getSchemaObj(this, schemaKeyRef);\n      if (schemaObj) this._cache.del(schemaObj.cacheKey);\n      delete this._schemas[schemaKeyRef];\n      delete this._refs[schemaKeyRef];\n      return this;\n    case 'object':\n      var serialize = this._opts.serialize;\n      var cacheKey = serialize ? serialize(schemaKeyRef) : schemaKeyRef;\n      this._cache.del(cacheKey);\n      var id = this._getId(schemaKeyRef);\n      if (id) {\n        id = resolve.normalizeId(id);\n        delete this._schemas[id];\n        delete this._refs[id];\n      }\n  }\n  return this;\n}\n\n\nfunction _removeAllSchemas(self, schemas, regex) {\n  for (var keyRef in schemas) {\n    var schemaObj = schemas[keyRef];\n    if (!schemaObj.meta && (!regex || regex.test(keyRef))) {\n      self._cache.del(schemaObj.cacheKey);\n      delete schemas[keyRef];\n    }\n  }\n}\n\n\n/* @this   Ajv */\nfunction _addSchema(schema, skipValidation, meta, shouldAddSchema) {\n  if (typeof schema != 'object' && typeof schema != 'boolean')\n    throw new Error('schema should be object or boolean');\n  var serialize = this._opts.serialize;\n  var cacheKey = serialize ? serialize(schema) : schema;\n  var cached = this._cache.get(cacheKey);\n  if (cached) return cached;\n\n  shouldAddSchema = shouldAddSchema || this._opts.addUsedSchema !== false;\n\n  var id = resolve.normalizeId(this._getId(schema));\n  if (id && shouldAddSchema) checkUnique(this, id);\n\n  var willValidate = this._opts.validateSchema !== false && !skipValidation;\n  var recursiveMeta;\n  if (willValidate && !(recursiveMeta = id && id == resolve.normalizeId(schema.$schema)))\n    this.validateSchema(schema, true);\n\n  var localRefs = resolve.ids.call(this, schema);\n\n  var schemaObj = new SchemaObject({\n    id: id,\n    schema: schema,\n    localRefs: localRefs,\n    cacheKey: cacheKey,\n    meta: meta\n  });\n\n  if (id[0] != '#' && shouldAddSchema) this._refs[id] = schemaObj;\n  this._cache.put(cacheKey, schemaObj);\n\n  if (willValidate && recursiveMeta) this.validateSchema(schema, true);\n\n  return schemaObj;\n}\n\n\n/* @this   Ajv */\nfunction _compile(schemaObj, root) {\n  if (schemaObj.compiling) {\n    schemaObj.validate = callValidate;\n    callValidate.schema = schemaObj.schema;\n    callValidate.errors = null;\n    callValidate.root = root ? root : callValidate;\n    if (schemaObj.schema.$async === true)\n      callValidate.$async = true;\n    return callValidate;\n  }\n  schemaObj.compiling = true;\n\n  var currentOpts;\n  if (schemaObj.meta) {\n    currentOpts = this._opts;\n    this._opts = this._metaOpts;\n  }\n\n  var v;\n  try { v = compileSchema.call(this, schemaObj.schema, root, schemaObj.localRefs); }\n  catch(e) {\n    delete schemaObj.validate;\n    throw e;\n  }\n  finally {\n    schemaObj.compiling = false;\n    if (schemaObj.meta) this._opts = currentOpts;\n  }\n\n  schemaObj.validate = v;\n  schemaObj.refs = v.refs;\n  schemaObj.refVal = v.refVal;\n  schemaObj.root = v.root;\n  return v;\n\n\n  /* @this   {*} - custom context, see passContext option */\n  function callValidate() {\n    /* jshint validthis: true */\n    var _validate = schemaObj.validate;\n    var result = _validate.apply(this, arguments);\n    callValidate.errors = _validate.errors;\n    return result;\n  }\n}\n\n\nfunction chooseGetId(opts) {\n  switch (opts.schemaId) {\n    case 'auto': return _get$IdOrId;\n    case 'id': return _getId;\n    default: return _get$Id;\n  }\n}\n\n/* @this   Ajv */\nfunction _getId(schema) {\n  if (schema.$id) this.logger.warn('schema $id ignored', schema.$id);\n  return schema.id;\n}\n\n/* @this   Ajv */\nfunction _get$Id(schema) {\n  if (schema.id) this.logger.warn('schema id ignored', schema.id);\n  return schema.$id;\n}\n\n\nfunction _get$IdOrId(schema) {\n  if (schema.$id && schema.id && schema.$id != schema.id)\n    throw new Error('schema $id is different from id');\n  return schema.$id || schema.id;\n}\n\n\n/**\n * Convert array of error message objects to string\n * @this   Ajv\n * @param  {Array<Object>} errors optional array of validation errors, if not passed errors from the instance are used.\n * @param  {Object} options optional options with properties `separator` and `dataVar`.\n * @return {String} human readable string with all errors descriptions\n */\nfunction errorsText(errors, options) {\n  errors = errors || this.errors;\n  if (!errors) return 'No errors';\n  options = options || {};\n  var separator = options.separator === undefined ? ', ' : options.separator;\n  var dataVar = options.dataVar === undefined ? 'data' : options.dataVar;\n\n  var text = '';\n  for (var i=0; i<errors.length; i++) {\n    var e = errors[i];\n    if (e) text += dataVar + e.dataPath + ' ' + e.message + separator;\n  }\n  return text.slice(0, -separator.length);\n}\n\n\n/**\n * Add custom format\n * @this   Ajv\n * @param {String} name format name\n * @param {String|RegExp|Function} format string is converted to RegExp; function should return boolean (true when valid)\n * @return {Ajv} this for method chaining\n */\nfunction addFormat(name, format) {\n  if (typeof format == 'string') format = new RegExp(format);\n  this._formats[name] = format;\n  return this;\n}\n\n\nfunction addDefaultMetaSchema(self) {\n  var $dataSchema;\n  if (self._opts.$data) {\n    $dataSchema = require('./refs/data.json');\n    self.addMetaSchema($dataSchema, $dataSchema.$id, true);\n  }\n  if (self._opts.meta === false) return;\n  var metaSchema = require('./refs/json-schema-draft-07.json');\n  if (self._opts.$data) metaSchema = $dataMetaSchema(metaSchema, META_SUPPORT_DATA);\n  self.addMetaSchema(metaSchema, META_SCHEMA_ID, true);\n  self._refs['http://json-schema.org/schema'] = META_SCHEMA_ID;\n}\n\n\nfunction addInitialSchemas(self) {\n  var optsSchemas = self._opts.schemas;\n  if (!optsSchemas) return;\n  if (Array.isArray(optsSchemas)) self.addSchema(optsSchemas);\n  else for (var key in optsSchemas) self.addSchema(optsSchemas[key], key);\n}\n\n\nfunction addInitialFormats(self) {\n  for (var name in self._opts.formats) {\n    var format = self._opts.formats[name];\n    self.addFormat(name, format);\n  }\n}\n\n\nfunction addInitialKeywords(self) {\n  for (var name in self._opts.keywords) {\n    var keyword = self._opts.keywords[name];\n    self.addKeyword(name, keyword);\n  }\n}\n\n\nfunction checkUnique(self, id) {\n  if (self._schemas[id] || self._refs[id])\n    throw new Error('schema with key or id \"' + id + '\" already exists');\n}\n\n\nfunction getMetaSchemaOptions(self) {\n  var metaOpts = util.copy(self._opts);\n  for (var i=0; i<META_IGNORE_OPTIONS.length; i++)\n    delete metaOpts[META_IGNORE_OPTIONS[i]];\n  return metaOpts;\n}\n\n\nfunction setLogger(self) {\n  var logger = self._opts.logger;\n  if (logger === false) {\n    self.logger = {log: noop, warn: noop, error: noop};\n  } else {\n    if (logger === undefined) logger = console;\n    if (!(typeof logger == 'object' && logger.log && logger.warn && logger.error))\n      throw new Error('logger must implement log, warn and error methods');\n    self.logger = logger;\n  }\n}\n\n\nfunction noop() {}\n", "export * from './api';\nexport * from './extensionLogger';\nexport * from './project';\nexport * from './specification/schemaAccess';\n\nexport * from '@sap/ux-specification-types';\n", "/**\n * This file implements the interface 'Specification' from ./types and serves as API to specification\n */\nimport { FioriElementsVersion, SchemaType, TemplateType } from '@sap/ux-specification-types';\nimport type {\n    ExportResults,\n    File,\n    GenerateSchemaParameters,\n    ExportConfigParameters,\n    ImportConfigParameters,\n    ImportProjectParameters,\n    ApiVersion,\n    UI5Version\n} from '@sap/ux-specification-types';\nimport {\n    generateListReportInterfaceV2,\n    generateObjectPageInterfaceV2,\n    generateOVPInterfaceV2,\n    generateAnalyticalListPageInterfaceV2\n} from './sync/v2/generate';\nimport {\n    generateFreestyleInterfaceV4,\n    generateListReportInterfaceV4,\n    generateObjectPageInterfaceV4\n} from './sync/v4/generate';\nimport { exportPageV2 } from './sync/v2/export/exportPage';\nimport {\n    createListReportConfig as createListReportConfigV2,\n    createObjectPageConfigV2,\n    createOverviewPageConfig as createOverviewPageConfigV2,\n    createAnalyticalListPageConfig as createAnalyticalListPageConfigV2\n} from './sync/v2/import';\nimport { exportPageV4 } from './sync/v4/export/export';\nimport { createListReportConfig as createListReportConfigV4, createObjectPageConfigV4 } from './sync/v4/import';\nimport { importProjectSchemaAndConfig, importProjectSchema as importProjectSchemaOnly } from './sync/common';\n\n/**\n * Return the generic (project independent) JSON schema\n * @param specification - reference to spec\n * @param version - Fiori elements version (v2 or v4)\n * @param schemaType - type of the schema, e.g. ListReport, ObjectPage\n */\nexport { getGenericSchema } from './specification/schemaAccess';\n\n/**\n * Generate JSON schema for a given Fiori elements version and page type\n * @param generateParameters: the input structure that contains the version, schema type, and parameters\n */\nexport function generateSchema(generateParameters: GenerateSchemaParameters): object {\n    let schema: object;\n    if (generateParameters[FioriElementsVersion.v2]) {\n        /**\n         * Handle v2 schema generation\n         */\n        const v2Params = generateParameters[FioriElementsVersion.v2];\n        if (v2Params[SchemaType.ListReport]) {\n            const { genericSchema, entitySet, annotations, manifest, fragments, logger } =\n                v2Params[SchemaType.ListReport];\n            schema = generateListReportInterfaceV2(genericSchema, entitySet, annotations, manifest, fragments, logger);\n        } else if (v2Params[SchemaType.ObjectPage]) {\n            const { genericSchema, entitySet, annotations, manifest, fragments, logger } =\n                v2Params[SchemaType.ObjectPage];\n            schema = generateObjectPageInterfaceV2(genericSchema, entitySet, annotations, manifest, fragments, logger);\n        } else if (v2Params[SchemaType.OverviewPage]) {\n            const { genericSchema, manifest } = v2Params[SchemaType.OverviewPage];\n            schema = generateOVPInterfaceV2(genericSchema, manifest);\n        } else if (v2Params[SchemaType.AnalyticalListPage]) {\n            const { genericSchema, entitySet, annotations, manifest, fragments, logger } =\n                v2Params[SchemaType.AnalyticalListPage];\n            schema = generateAnalyticalListPageInterfaceV2(\n                genericSchema,\n                entitySet,\n                annotations,\n                manifest,\n                fragments,\n                logger\n            );\n        }\n    } else if (generateParameters[FioriElementsVersion.v4]) {\n        /**\n         * Handle v4 schema generation\n         */\n        const v4Params = generateParameters[FioriElementsVersion.v4];\n        if (v4Params[SchemaType.ListReport]) {\n            const { genericSchema, entitySet, annotations, logger, manifest } = v4Params[SchemaType.ListReport];\n            schema = generateListReportInterfaceV4(\n                TemplateType.ListReportObjectPageV4,\n                genericSchema,\n                entitySet,\n                annotations,\n                logger,\n                manifest\n            );\n        } else if (v4Params[SchemaType.ObjectPage]) {\n            const { genericSchema, entitySet, annotations, manifest, logger, fragments } =\n                v4Params[SchemaType.ObjectPage];\n            schema = generateObjectPageInterfaceV4(genericSchema, entitySet, annotations, manifest, logger, fragments);\n        } else if (v4Params[SchemaType.AnalyticalListPage]) {\n            const { genericSchema, entitySet, annotations, logger, manifest } = v4Params[SchemaType.AnalyticalListPage];\n            //As of now, the LR logic can also be applied to ALP\n            schema = generateListReportInterfaceV4(\n                TemplateType.AnalyticalListPageV4,\n                genericSchema,\n                entitySet,\n                annotations,\n                logger,\n                manifest\n            );\n        } else if (v4Params[SchemaType.FreestylePage]) {\n            const { genericSchema, entitySet, annotations, logger, manifest } = v4Params[SchemaType.FreestylePage];\n            schema = generateFreestyleInterfaceV4(\n                TemplateType.FreestylePageV4,\n                genericSchema,\n                annotations,\n                manifest,\n                entitySet,\n                logger\n            );\n        }\n    }\n    return schema;\n}\n\n/**\n * Exports a config (src/*.json, src/pages/*.json) to flex changes and manifest settings\n * @param exportParameters - parameters to control the export\n */\nexport function exportConfig(exportParameters: ExportConfigParameters): ExportResults {\n    let exportResults: ExportResults;\n    const ui5Config: UI5Version = { ui5Version: exportParameters.ui5Version, layer: exportParameters.layer };\n    if (exportParameters[FioriElementsVersion.v2]) {\n        /**\n         * Handle v2 export\n         */\n        const v2Params = exportParameters[FioriElementsVersion.v2];\n        exportResults = exportPageV2(v2Params, ui5Config);\n    } else if (exportParameters[FioriElementsVersion.v4]) {\n        /**\n         * Handle v4 export\n         */\n        const v4Params = exportParameters[FioriElementsVersion.v4];\n        exportResults = exportPageV4(v4Params, ui5Config);\n    }\n    return exportResults;\n}\n\n/**\n * Imports manifest settings and flex changes to a config (src/*.json, src/pages/*.json)\n * @param importParameters - parameters to control the import\n */\nexport function importConfig(importParameters: ImportConfigParameters): object | undefined {\n    let config;\n    if (importParameters[FioriElementsVersion.v2]) {\n        /**\n         * Handle v2 import\n         */\n        const v2Params = importParameters[FioriElementsVersion.v2];\n        if (v2Params[SchemaType.ListReport]) {\n            config = createListReportConfigV2(v2Params[SchemaType.ListReport]);\n        } else if (v2Params[SchemaType.ObjectPage]) {\n            config = createObjectPageConfigV2(v2Params[SchemaType.ObjectPage]);\n        } else if (v2Params[SchemaType.OverviewPage]) {\n            config = createOverviewPageConfigV2(v2Params[SchemaType.OverviewPage]);\n        } else if (v2Params[SchemaType.AnalyticalListPage]) {\n            config = createAnalyticalListPageConfigV2(v2Params[SchemaType.AnalyticalListPage]);\n        }\n    } else if (importParameters[FioriElementsVersion.v4]) {\n        /**\n         * Handle v4 import\n         */\n        const v4Params = importParameters[FioriElementsVersion.v4];\n        if (v4Params[SchemaType.ListReport]) {\n            config = createListReportConfigV4(v4Params[SchemaType.ListReport], SchemaType.ListReport);\n        } else if (v4Params[SchemaType.ObjectPage]) {\n            config = createObjectPageConfigV4(v4Params[SchemaType.ObjectPage]);\n        } else if (v4Params[SchemaType.AnalyticalListPage]) {\n            config = createListReportConfigV4(v4Params[SchemaType.AnalyticalListPage], SchemaType.AnalyticalListPage);\n        }\n    }\n    return config;\n}\n\n/**\n * Evaluates all project files and generates app schemas and configs out of it\n * @param importParameters - parameters to control the import; here: all relevant project files\n * @returns a list of files, comprising app schemas and configs\n */\nexport async function importProject(importParameters: ImportProjectParameters): Promise<File[]> {\n    return importProjectSchemaAndConfig(importParameters);\n}\n\n/**\n * Evaluates all project files and generates app schemas out of it, but no configs\n * @param importParameters - parameters to control the import; here: all relevant project files\n * @returns a list of files, comprising all app schemas\n */\nexport async function importProjectSchema(importParameters: ImportProjectParameters): Promise<File[]> {\n    return importProjectSchemaOnly(importParameters);\n}\n\n/**\n * Returns specification API version.\n * @return {ApiVersion} Object of API version.\n */\nexport function getApiVersion(): ApiVersion {\n    return {\n        version: '12'\n    };\n}\n", "import type { Definition } from 'typescript-json-schema';\nimport type { MetadataInstanceInterface } from './decoration/factory';\nimport type {\n    Manifest,\n    ExtensionLogger,\n    FacetConfig,\n    FacetConfigs,\n    FacetSection,\n    FileData,\n    SchemaFilePath\n} from '@sap/ux-specification-types';\nimport {\n    DirName,\n    FacetBase,\n    FacetTitlePrefix,\n    MANIFESTPATH,\n    SchemaTag,\n    TemplateType,\n    SchemaKeyName,\n    UIVOCABULARY,\n    VOCWITHSLASH,\n    v4,\n    v2,\n    ALPViewType,\n    FioriElementsVersion,\n    ManifestSection,\n    PageTypeV2,\n    LogSeverity,\n    PageTypeV4,\n    SchemaType,\n    UIVOCABULARYDOT,\n    UIVOCABULARYALPHADOT\n} from '@sap/ux-specification-types';\nimport type {\n    DataField,\n    DataFieldAbstractTypes,\n    DataFieldForAction,\n    DataFieldForAnnotation,\n    DataFieldWithIntentBasedNavigation,\n    DataFieldWithUrl,\n    FacetTypes,\n    ReferenceFacetTypes\n} from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport type {\n    ConvertedMetadata,\n    EntityType,\n    RawMetadata,\n    PropertyPath,\n    PropertyAnnotationValue\n} from '@sap-ux/vocabularies-types';\n\nimport i18next from 'i18next';\nimport merge from 'deepmerge';\nimport { convert } from '@sap-ux/annotation-converter';\nimport { merge as mergeParser, parse } from '@sap-ux/edmx-parser';\nimport { UIAnnotationTypes, UIAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport { CommunicationAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/Communication';\nimport { log } from '../../extensionLogger';\nimport type { PropertyAnnotations } from '@sap-ux/vocabularies-types/vocabularies/Edm_Types';\n\nexport const DEFINITION_LINK_PREFIX = '#/definitions/';\n\n/**\n * Function returns annotation path for schema based on received params.\n * @param entityTypeName - Entity type name.\n * @param term - Annotation term.\n * @param qualifier - Annotation qualifier.\n * @returns Annotation path based on received params\n */\nexport const createAnnotationPath = (entityTypeName: string, term: string, qualifier?: string): string | undefined => {\n    if (!entityTypeName) {\n        return undefined;\n    }\n    let annotationPath = `/${entityTypeName}/@${term}`;\n    if (qualifier) {\n        annotationPath += `#${qualifier}`;\n    }\n    return annotationPath;\n};\n\n/**\n * Parses, merges, and converts a list of annotation files with aid of tools from annotation-vocabularies-tools\n * @param annotationFiles - The list of all annotation files, in JSON format\n * @returns the complete service information\n */\nexport function parseAndMergeAndConvert(annotationFiles: FileData[], logger: ExtensionLogger): ConvertedMetadata {\n    const parseResult: RawMetadata[] = [];\n    let converterOutput: ConvertedMetadata;\n    if (annotationFiles) {\n        annotationFiles.forEach(function (annotationData: FileData) {\n            try {\n                parseResult.push(parse(annotationData.fileContent, annotationData.dataSourceUri));\n            } catch (error) {\n                log(\n                    logger,\n                    {\n                        severity: LogSeverity.Error,\n                        message: i18next.t('ANNOERR'),\n                        location: { path: i18next.t('ANNOTATIONFILE', { file: annotationData.dataSourceUri }) }\n                    },\n                    error\n                );\n                return converterOutput;\n            }\n        });\n    }\n    if (parseResult.length > 0) {\n        converterOutput = convert(mergeParser(...parseResult));\n    }\n\n    return converterOutput;\n}\n\nexport const getAnnotationPropertyValue = (annotationProperty: DataField['Value']): string =>\n    annotationProperty?.value || annotationProperty?.path;\n\n/**\n * Checks for Common.Label and overwrites the label from it if present\n * @param {PropertyAnnotations} annotations - property annotations\n * @param {EntityType} entityType - entity type\n * @param {string} label - label, to be actualized\n */\nexport function evaluateCommonLabel(annotations: PropertyAnnotations, entityType: EntityType, label: string): string {\n    if (annotations?.Common?.Label) {\n        if (typeof annotations.Common.Label === 'string') {\n            label = annotations.Common.Label;\n        } else if (annotations.Common.Label['type'] === 'Path') {\n            const targetProperty = entityType && entityType.resolvePath(annotations.Common.Label['path']);\n            if (targetProperty?.value) {\n                label = targetProperty.value;\n            } else if (typeof targetProperty?.Common?.Label === 'string') {\n                label = targetProperty.annotations.Common.Label;\n            }\n        } else if (typeof annotations.Common?.Label?.toString() === 'string') {\n            label = annotations.Common.Label.toString();\n        }\n    }\n    return label;\n}\n\n/**\n * Determines the label for a property path\n * @param {PropertyPath} propertyPath - property path\n * @param {EntityType} entityType - entity type\n * @returns label, derived from Common.Label or from property value\n */\nexport function getLabelForPropertyPath(propertyPath: PropertyPath, entityType: EntityType): string {\n    let label = propertyPath.value;\n    if (propertyPath.$target) {\n        label = evaluateCommonLabel(propertyPath.$target.annotations, entityType, label);\n    }\n    return label;\n}\n\n/**\n * Determines the label for a LineItem record\n * @param {DataFieldAbstractType} field - Line item record\n * @param {EntityType} entityType - entity type\n * @returns label, derived from Common.Label or from property value\n */\nexport function getLabelForDataField(field: DataFieldAbstractTypes, entityType: EntityType): string {\n    let label: string, property;\n    if (field['Value']) {\n        if (typeof field['Value'] === 'string') {\n            property = entityType && entityType.entityProperties.find((ep) => ep.name === field['Value']);\n        } else {\n            property = entityType && entityType.resolvePath(field['Value'].path);\n            if (!property) {\n                property = field['Value'].$target;\n            }\n        }\n    } else if (field['Target'] && field['Target'].$target) {\n        if (field['Target'].$target.Value) {\n            property = field['Target'].$target.Value.$target;\n        } else if (field['Target'].$target.Label) {\n            label = field['Target'].$target.Label;\n        }\n    }\n    if (property?.annotations?.Common?.Label) {\n        label = evaluateCommonLabel(property.annotations, entityType, label);\n    }\n    return label;\n}\n\n/**\n * Function to resolve the dataField label\n * @param dataFieldLabel - Given dataField label; might be of type string, or an object in case of a path reference\n * @param entityType - the entity type as part of the AVT ConvertedMetadata\n * @returns undefined or the right string value\n */\nfunction getLabel(dataFieldLabel: any, entityType: EntityType): string {\n    if (typeof dataFieldLabel === 'string') {\n        return dataFieldLabel;\n    } else if (typeof dataFieldLabel === 'object' && dataFieldLabel.path) {\n        const property = entityType && entityType.resolvePath(dataFieldLabel.path);\n        if (!property || property.length === 0) {\n            return undefined;\n        } else {\n            const singleProperty = property[0];\n            if (singleProperty?.annotations?.Common?.Label) {\n                const label: string = dataFieldLabel;\n                return evaluateCommonLabel(singleProperty.annotations, entityType, label);\n            }\n        }\n    } else {\n        return undefined;\n    }\n}\n\nfunction getTitleForDataField(dataField: DataField, entityType: EntityType, dataFieldLabel: string): string {\n    const propertyCommonLabel = getLabelForDataField(dataField as DataFieldAbstractTypes, entityType);\n    return (\n        dataFieldLabel ||\n        propertyCommonLabel ||\n        (dataField.Value.$target ? dataField.Value.$target.name : dataField.Value.value || dataField.Value.path)\n    );\n}\n\n/**\n * Determines the description of a data field, e.g. for the column header\n * @param dataFieldAbstract - the given record of the line item annotation\n * @param entityType - the entity type as part of the AVT ConvertedMetadata\n */\nexport function getDataFieldDescription(dataFieldAbstract: DataFieldAbstractTypes, entityType: EntityType): string {\n    let title = '',\n        propertyCommonLabel,\n        dataField;\n    const dataFieldLabel = getLabel(dataFieldAbstract.Label, entityType);\n\n    switch (dataFieldAbstract.$Type) {\n        case UIAnnotationTypes.DataField:\n            dataField = dataFieldAbstract as DataField;\n            title = getTitleForDataField(dataField, entityType, dataFieldLabel);\n            break;\n        case UIAnnotationTypes.DataFieldWithUrl:\n            dataField = dataFieldAbstract as DataFieldWithUrl;\n            propertyCommonLabel = getLabelForDataField(dataFieldAbstract, entityType);\n            title =\n                dataFieldLabel ||\n                propertyCommonLabel ||\n                (typeof dataField.Value === 'string' ? dataField.Value : dataField.Value.path);\n            break;\n        case UIAnnotationTypes.DataFieldForAnnotation:\n            dataField = dataFieldAbstract as DataFieldForAnnotation;\n            propertyCommonLabel = getLabelForDataField(dataFieldAbstract, entityType);\n            title = dataFieldLabel || propertyCommonLabel || dataField.Target.$target.Title || dataField.Target.value;\n            break;\n        case UIAnnotationTypes.DataFieldForAction:\n        case UIAnnotationTypes.DataFieldWithAction:\n        case UIAnnotationTypes.DataFieldForIntentBasedNavigation:\n            dataField = dataFieldAbstract as DataFieldForAction;\n            if (dataFieldLabel) {\n                title = typeof dataFieldLabel === 'string' ? dataFieldLabel : (dataField.Action as string);\n            } else {\n                title = dataFieldAbstract.Action as string;\n            }\n            break;\n        case UIAnnotationTypes.DataFieldWithIntentBasedNavigation:\n            dataField = dataFieldAbstract as DataFieldWithIntentBasedNavigation;\n            propertyCommonLabel = getLabelForDataField(dataFieldAbstract, entityType);\n            title = propertyCommonLabel || dataField.Value.path;\n            break;\n        case UIAnnotationTypes.DataFieldWithNavigationPath:\n            dataField = dataFieldAbstract;\n            title = getTitleForDataField(dataField, entityType, dataFieldLabel);\n            break;\n        default:\n            break;\n    }\n    return title;\n}\n\n/**\n * Prepare string for reference use in schema\n * @param refInput string to be character checked and replaced\n * @returns string with replaced characters\n */\nexport function prepareRef(refInput: string | PropertyAnnotationValue<String>): string {\n    return (refInput as string).replace('#', '::').replace(/\\//g, ':2f');\n}\n\n/**\n * Return the page type for a given V2 page in manifest\n * @param name - page component name\n */\nexport function getPageTypeV2(name: string): PageTypeV2 | undefined {\n    if (name) {\n        const templatePart = `${v2.FE_TEMPLATE_V2}.`;\n        return name.split(templatePart)[1] as PageTypeV2;\n    }\n}\n\n/**\n * Return the page type for a given V4 page in manifest\n * @param name - page component name\n */\nexport function getPageTypeV4(v4App: v4.SapUiAppPageV4 | v4.SapUi5RoutingTargetCustomPageV4): PageTypeV4 | undefined {\n    if ((v4App as v4.SapUiAppPageV4).name && (v4App as v4.SapUiAppPageV4).name !== v4.FE_TEMPLATE_V4_CUSTOM_PAGE) {\n        const templatePart = `${v4.FE_TEMPLATE_V4}.`;\n        return (v4App as v4.SapUiAppPageV4).name.split(templatePart)[1] as PageTypeV4;\n    } else if (\n        (v4App as v4.SapUiAppPageV4)?.name === v4.FE_TEMPLATE_V4_CUSTOM_PAGE ||\n        (v4App as v4.SapUi5RoutingTargetCustomPageV4).viewId ||\n        (v4App as v4.SapUi5RoutingTargetCustomPageV4).viewName\n    ) {\n        return PageTypeV4.CustomPage;\n    }\n}\n\nfunction getTargetAnnotationName(targetAnnotation: any, keyForRelatedFacetKeys = false): string {\n    const termWithQualifier = `${targetAnnotation.term}#${targetAnnotation.qualifier}`;\n    return `${!keyForRelatedFacetKeys ? '@' : ''}${\n        targetAnnotation.qualifier ? termWithQualifier : targetAnnotation.term\n    }`;\n}\n\n/**\n * Finds the alias for a given namespace in the references' section of the converted service metadata\n * @param {string} namespace - complete namespace, e.g. 'com.sap.vocabularies.UI.v1'\n * @param {ConvertedMetadata} oDataServiceAVT - combined service metadata, as returned by annotation vocabularies tools\n * @returns alias for the given namespace\n */\nexport function findAlias(namespace: string, oDataServiceAVT: ConvertedMetadata): string | undefined {\n    if (!oDataServiceAVT) {\n        return;\n    }\n    let aliasReference = oDataServiceAVT.references.find((reference) => {\n        return reference.namespace === namespace;\n    });\n    if (!aliasReference) {\n        aliasReference = oDataServiceAVT.references.find((reference) => {\n            return reference.alias === namespace;\n        });\n    }\n    if (!aliasReference) {\n        aliasReference = oDataServiceAVT.references.find((reference) => {\n            return (\n                reference.alias.toUpperCase() ===\n                namespace.split('SAP__')[namespace.split('SAP__').length - 1].toUpperCase()\n            );\n        });\n    }\n    return aliasReference?.alias;\n}\n\n/**\n * Determines the target annotation\n * @param navigationParts - parts of the target annotation path\n * @param entityType - entity type\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n * @returns the target annotation\n */\nfunction determineTargetAnnotation(\n    navigationParts: string[],\n    entityType: EntityType,\n    oDataServiceAVT: ConvertedMetadata\n): any {\n    const lastNavigationPart = navigationParts[navigationParts.length - 1];\n    const annotation = lastNavigationPart.substring(lastNavigationPart.lastIndexOf('.') + 1, lastNavigationPart.length);\n    const alias = findAlias(\n        lastNavigationPart.substring(0, lastNavigationPart.lastIndexOf('.')).replace('@', ''),\n        oDataServiceAVT\n    );\n    return entityType?.annotations[alias]?.[annotation];\n}\n\n/**\n * Adjust key by considering navigation\n * @param key - given key\n * @param keyForRelatedFacetKeys - construct key for 'keyForRelatedFacetKeys' property(used to define custom sections) - we should not add '@' symbol there.\n * @param navigationParts - parts of the target annotation path\n */\nfunction adjustKey(key: string, navigationParts: string[], keyForRelatedFacetKeys: boolean): string {\n    const uiClass = navigationParts[navigationParts.length - 1].split('#')[0];\n    if (uiClass.includes('.LineItem')) {\n        const pathParts = key.split('::');\n        pathParts[pathParts.length - 1] = `${!keyForRelatedFacetKeys ? '@' : ''}${UIAnnotationTerms.LineItem}`;\n        key = pathParts.join('::');\n    } else {\n        key = uiClass.replace('@UI', `${!keyForRelatedFacetKeys ? '@' : ''}${UIVOCABULARY}`);\n    }\n    return key;\n}\n\nfunction getKeyAndEntityTypeOfReferenceFacet(\n    oDataServiceAVT: ConvertedMetadata,\n    key: string,\n    entityType: EntityType,\n    propertyValue: string,\n    oDataVersion = FioriElementsVersion.v2,\n    keyForRelatedFacetKeys = false\n): { key: string; entityType: EntityType; stopProcessing: boolean; namespace: string } {\n    let stopProcessing = false;\n    let namespace: string;\n    const navigationParts = propertyValue.split('/');\n    const navigation = navigationParts.length > 1;\n    if (navigation && entityType) {\n        entityType = entityType.resolvePath(propertyValue.substring(0, propertyValue.lastIndexOf('/')))?.targetType;\n    }\n    key = adjustKey(key, navigationParts, keyForRelatedFacetKeys);\n\n    const targetAnnotation = determineTargetAnnotation(navigationParts, entityType, oDataServiceAVT);\n    if (targetAnnotation) {\n        const separator = oDataVersion === FioriElementsVersion.v2 ? '::' : '#';\n        key = getTargetAnnotationName(targetAnnotation, keyForRelatedFacetKeys).replace('#', separator);\n        namespace = targetAnnotation.fullyQualifiedName?.split('@')[0];\n    } else {\n        stopProcessing = true;\n        return { key, entityType, stopProcessing, namespace };\n    }\n\n    if (navigation) {\n        const navSeparator = oDataVersion === FioriElementsVersion.v2 ? '::' : '/';\n        navigationParts.pop();\n        const navigationIDs = [...navigationParts].join(navSeparator);\n        key = `${navigationIDs}${navSeparator}${key}`;\n    }\n    return { key, entityType, stopProcessing, namespace };\n}\n\n/**\n * Resolve page section(get key and label->description).\n * @param facetDefinition - the actual annotation record\n * @param keyForRelatedFacetKeys - construct key for 'keyForRelatedFacetKeys' property(used to define custom sections) - we should not add '@' symbol there.\n * @param {FioriElementsVersion} oDataVersion - OData version\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n * @param {ExtensionLogger} logger - Logger class for logging messages\n * @returns {FacetSection} - object comprising the relevant facet information\n */\nexport function getSectionFacet(\n    facetDefinition: FacetTypes,\n    sourceEntityType: EntityType,\n    oDataServiceAVT: ConvertedMetadata,\n    logger?: ExtensionLogger,\n    oDataVersion = FioriElementsVersion.v2,\n    keyForRelatedFacetKeys = false\n): FacetSection | undefined {\n    //Take facet ID as fallback\n    const facetName = facetDefinition.fullyQualifiedName?.substring(\n        facetDefinition.fullyQualifiedName?.lastIndexOf('@')\n    );\n    let key: string = facetDefinition.ID ? facetDefinition.ID.toString() : facetName;\n    let namespace = facetDefinition.fullyQualifiedName?.split('@')[0];\n    let entityType = sourceEntityType; //default\n\n    //If reference facet: overwrite with target annotation if present\n    if (facetDefinition.$Type !== UIAnnotationTypes.CollectionFacet && 'Target' in facetDefinition) {\n        const propertyValue = getAnnotationPropertyValue(facetDefinition.Target);\n        if (!propertyValue) {\n            log(logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOTARGET', { target: facetDefinition.Target })\n            });\n            return;\n        }\n        const {\n            key: newKey,\n            entityType: newEntityType,\n            stopProcessing,\n            namespace: sectionNameSpace\n        } = getKeyAndEntityTypeOfReferenceFacet(\n            oDataServiceAVT,\n            key,\n            entityType,\n            propertyValue,\n            oDataVersion,\n            keyForRelatedFacetKeys\n        );\n        if (stopProcessing) {\n            return;\n        }\n        key = newKey;\n        entityType = newEntityType;\n        namespace = sectionNameSpace;\n    }\n    key = key.replace(/\\//gi, '::');\n    if (key) {\n        return {\n            key,\n            ...(facetDefinition.Label && { label: facetDefinition.Label.toString() }),\n            ...(facetDefinition.ID && { ID: facetDefinition.ID.toString() }),\n            entityType,\n            namespace\n        };\n    } else {\n        return undefined;\n    }\n}\n\n/**\n * Finds the alias for a given namespace in the references' section of the converted service metadata.\n * An empty object is created if the path element does not exist yet.\n * Exception: if an empty array is the next element  of the 'path' definition, an empty array is created instead of an empty object.\n * @param {object} manifest - manifest that is being modified during export\n * @param {string} path - path of the property in the manifest\n * @param {string} targetAnnotation - target annotation (optional)\n * @param {string} targetAnnotationEncoded - target annotation in its encoded form, as used in manifest settings\n * @param {boolean} importScenario - indicates if the function is called for the import, else it is the export\n * @returns returns section of the manifest based on path, generates an empty object in case it does not exists\n */\nexport const getManifestSectionByPathV4 = (\n    manifest: object,\n    path: string,\n    targetAnnotation?: string,\n    targetAnnotationEncoded?: string,\n    importScenario = false\n): object | undefined => {\n    if (!path) {\n        return undefined;\n    }\n    let manifestSection = manifest;\n    const pathElements = path.split('/');\n    for (let index = 0; index < pathElements.length; index++) {\n        const element = pathElements[index];\n        if (element === '[]') {\n            continue;\n        }\n        const decodedElement =\n            targetAnnotationEncoded && targetAnnotationEncoded === element\n                ? targetAnnotation\n                : element.replace('??', '/');\n        //?? can be used in path functions to encode /\n        if (!manifestSection[decodedElement]) {\n            if (importScenario) {\n                return undefined;\n            }\n            if (pathElements[index + 1] === '[]') {\n                manifestSection[decodedElement] = [];\n            } else {\n                manifestSection[decodedElement] = {};\n            }\n        }\n        manifestSection = manifestSection[decodedElement];\n    }\n    return manifestSection;\n};\n\nexport function getSchemaKeyOfLineItemRecord(lineItemRecord: DataFieldAbstractTypes): string {\n    let schemaKey, target, value;\n    switch (lineItemRecord.$Type) {\n        case UIAnnotationTypes.DataField:\n            schemaKey = getAnnotationPropertyValue(lineItemRecord.Value);\n            break;\n        case UIAnnotationTypes.DataFieldWithUrl:\n            schemaKey =\n                typeof lineItemRecord.Value === 'string'\n                    ? lineItemRecord.Value\n                    : getAnnotationPropertyValue(lineItemRecord.Value);\n            break;\n        case UIAnnotationTypes.DataFieldForAnnotation:\n            target = lineItemRecord.Target.value;\n            if (target) {\n                schemaKey =\n                    'DataFieldForAnnotation:::sTarget::' +\n                    target\n                        .replace('@UI', `@${UIVOCABULARY}`)\n                        .replace('@Communication', '@com.sap.vocabularies.Communication.v1')\n                        .replace('@Contact', '@com.sap.vocabularies.Contact.v1');\n            }\n            break;\n        case UIAnnotationTypes.DataFieldForAction:\n            if (lineItemRecord.Inline) {\n                schemaKey = `DataFieldForAction:::sAction::${prepareRef(lineItemRecord.Action as string)}`;\n            }\n            break;\n        case UIAnnotationTypes.DataFieldWithIntentBasedNavigation:\n            value = getAnnotationPropertyValue(lineItemRecord.Value);\n            schemaKey = `DataFieldWithIntentBasedNavigation:::sProperty::${value}:::sSemanticObject::${lineItemRecord.SemanticObject}:::sAction::${lineItemRecord.Action}`;\n            break;\n        case UIAnnotationTypes.DataFieldForIntentBasedNavigation:\n            if (lineItemRecord.Inline) {\n                schemaKey = `DataFieldForIntentBasedNavigation:::sSemanticObject::${\n                    lineItemRecord.SemanticObject\n                }:::sAction::${prepareRef(lineItemRecord.Action)}`;\n            }\n            break;\n        case UIAnnotationTypes.DataFieldWithNavigationPath:\n            value = getAnnotationPropertyValue(lineItemRecord.Value);\n            target = getAnnotationPropertyValue(lineItemRecord.Target);\n            schemaKey = 'DataFieldWithNavigationPath:::sProperty::' + value + ':::sTarget::' + target;\n            break;\n        default:\n            break;\n    }\n\n    return schemaKey;\n}\n\n/**\n * Determines if type of given annotation term is of UIAnnotationTerm\n * @param {string} path path in manifest\n * @param {string} alias for a given namespace\n * @param {EntityType} entityType - the entity type\n * @returns UI annotation term type\n */\nfunction getUIAnnotationTerm(path: string, alias: string, entityType: EntityType): UIAnnotationTerms | undefined {\n    if (path.includes(UIAnnotationTerms.Chart) || path.includes(alias + '.Chart')) {\n        return UIAnnotationTerms.Chart;\n    } else if (path.includes(UIAnnotationTerms.Identification) || path.includes(alias + '.Identification')) {\n        return UIAnnotationTerms.Identification;\n    } else if ((entityType && path.includes(UIAnnotationTerms.LineItem)) || path.includes(alias + '.LineItem')) {\n        return UIAnnotationTerms.LineItem;\n    } else if (path.includes(UIAnnotationTerms.FieldGroup) || path.includes(alias + '.FieldGroup')) {\n        return UIAnnotationTerms.FieldGroup;\n    } else if (path.includes(UIAnnotationTerms.DataPoint) || path.includes(alias + '.DataPoint')) {\n        return UIAnnotationTerms.DataPoint;\n    } else if (path.includes(UIAnnotationTerms.PresentationVariant) || path.includes(alias + '.PresentationVariant')) {\n        return UIAnnotationTerms.PresentationVariant;\n    } else {\n        return undefined;\n    }\n}\n\n/**\n * Determines if type of given annotation term is of CommunicationAnnotationTerm\n * @param {string} path path in manifest\n * @param {string} alias for a given namespace\n * @param {EntityType} entityType - the entity type\n * @returns Communication annotation term type\n */\nfunction getCommunicationAnnotationTerm(path: string, alias: string): CommunicationAnnotationTerms | undefined {\n    if (path.includes('com.sap.vocabularies.Communication.v1.Contact') || path.includes(alias + '.Contact')) {\n        return CommunicationAnnotationTerms.Contact;\n    } else if (path.includes('com.sap.vocabularies.Communication.v1.Address') || path.includes(alias + '.Address')) {\n        return CommunicationAnnotationTerms.Address;\n    } else {\n        return undefined;\n    }\n}\n\n/**\n * Determines the type of given annotation term\n * @param {string} path path in manifest\n * @param {string} alias for a given namespace\n * @param {EntityType} entityType - the entity type\n * @returns annotation term type\n */\nfunction getAnnotationTerm(\n    path: string,\n    alias: string,\n    entityType: EntityType\n): UIAnnotationTerms | CommunicationAnnotationTerms | undefined {\n    return getUIAnnotationTerm(path, alias, entityType) || getCommunicationAnnotationTerm(path, alias);\n}\n\n/**\n * Evaluates the target annotation of a reference facet and actualizes the facets for the config\n * @param {AnnotationTerm} annotationRecord - the actual annotation record\n * @param {FacetConfigs} facets - list of facets in config format, to be updated\n * @param {EntityType} entityType - the entity type\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n * @param {FioriElementsVersion} oDataVersion - OData version\n * @param {ExtensionLogger} logger - Logger class for logging messages\n */\nfunction evaluateTargetAnnotation(\n    section: FacetSection,\n    annotationRecord: ReferenceFacetTypes,\n    facets: FacetConfigs,\n    entityType: EntityType,\n    oDataServiceAVT: ConvertedMetadata,\n    oDataVersion = FioriElementsVersion.v2,\n    logger?: ExtensionLogger\n): void {\n    const alias = findAlias(UIVOCABULARY, oDataServiceAVT);\n    let path = section ? section.key : '';\n    const targetEntityType = section.entityType;\n    const annotationTerm = getAnnotationTerm(path, alias, entityType);\n\n    switch (annotationTerm) {\n        case UIAnnotationTerms.Chart: {\n            facets[path] = { base: FacetBase.Chart };\n            facets[path].target = annotationRecord?.Target?.$target;\n            facets[path].entityType = targetEntityType;\n            facets[path].namespace = section.namespace;\n            break;\n        }\n        case UIAnnotationTerms.Identification: {\n            facets[path] = { base: FacetBase.Identification };\n            facets[path].target = annotationRecord?.Target?.$target;\n            facets[path].entityType = targetEntityType;\n            facets[path].namespace = section.namespace;\n            break;\n        }\n        case UIAnnotationTerms.LineItem: {\n            if (!path.includes(UIAnnotationTerms.LineItem) && path.includes('.LineItem')) {\n                const pathParts = path.split('::');\n                pathParts[pathParts.length - 1] = `@${UIAnnotationTerms.LineItem}`;\n                path = pathParts.join('::');\n            }\n            facets[path] = { base: FacetBase.LineItem };\n            facets[path].target = annotationRecord?.Target?.$target;\n            facets[path].entityType = targetEntityType;\n            facets[path].namespace = section.namespace;\n            break;\n        }\n        case UIAnnotationTerms.FieldGroup: {\n            facets[path] = { base: FacetBase.Form };\n            facets[path].target = annotationRecord?.Target?.$target;\n            facets[path].entityType = targetEntityType;\n            facets[path].namespace = section.namespace;\n            break;\n        }\n        case UIAnnotationTerms.DataPoint: {\n            facets[path] = { base: FacetBase.DataPoint };\n            facets[path].Label = annotationRecord?.Target?.$target['Title'];\n            facets[path].target = annotationRecord?.Target?.$target;\n            facets[path].entityType = targetEntityType;\n            facets[path].namespace = section.namespace;\n            break;\n        }\n        case UIAnnotationTerms.PresentationVariant: {\n            facets[path] = { base: FacetBase.PresentationVariant };\n            facets[path].target = annotationRecord?.Target?.$target;\n            facets[path].entityType = targetEntityType;\n            facets[path].namespace = section.namespace;\n            break;\n        }\n        case CommunicationAnnotationTerms.Contact: {\n            facets[path] = { base: FacetBase.Contact };\n            facets[path].target = annotationRecord?.Target?.$target;\n            facets[path].entityType = targetEntityType;\n            facets[path].namespace = section.namespace;\n            break;\n        }\n        case CommunicationAnnotationTerms.Address: {\n            facets[path] = { base: FacetBase.Address };\n            facets[path].target = annotationRecord?.Target?.$target;\n            facets[path].entityType = targetEntityType;\n            facets[path].namespace = section.namespace;\n            break;\n        }\n        default: {\n            facets[path] = { base: FacetBase.Unknown };\n        }\n    }\n\n    if (facets[path]) {\n        facets[path].annotationPath = `/${annotationRecord.fullyQualifiedName.replace(\n            '@com.sap.vocabularies',\n            VOCWITHSLASH\n        )}`;\n        if (annotationRecord.Label) {\n            facets[path].Label = annotationRecord.Label as unknown as string;\n        }\n        // Add Facet ID\n        if (annotationRecord.ID) {\n            facets[path]['ID'] = annotationRecord.ID as string;\n        }\n        if (section && section.entityType) {\n            facets[path].entityType = section.entityType;\n        }\n    }\n}\n\n/**\n * Adds the information from facets to the config\n * @param {AnnotationTerm} annotationRecord - the actual annotation record\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n * @param {string} serviceName - name of the service of the app\n * @param {string} entityName - the entity (type) name\n * @param {FacetConfigs} facets - list of facets in config format, to be updated\n * @param {FioriElementsVersion} oDataVersion - OData version\n * @param {ExtensionLogger} logger - Logger class for logging messages\n */\nfunction addFacetToConfig(\n    annotationRecord: FacetTypes,\n    oDataServiceAVT: ConvertedMetadata,\n    serviceName: string,\n    entityType: EntityType,\n    facets: FacetConfigs,\n    oDataVersion = FioriElementsVersion.v2,\n    logger?: ExtensionLogger\n): void {\n    const section: FacetSection = getSectionFacet(\n        annotationRecord,\n        entityType,\n        oDataServiceAVT,\n        logger,\n        oDataVersion,\n        false\n    );\n    if (section) {\n        switch (annotationRecord.$Type) {\n            case UIAnnotationTypes.ReferenceFacet: {\n                evaluateTargetAnnotation(\n                    section,\n                    annotationRecord,\n                    facets,\n                    entityType,\n                    oDataServiceAVT,\n                    oDataVersion,\n                    logger\n                );\n                break;\n            }\n            case UIAnnotationTypes.CollectionFacet: {\n                const annotationPath = `/${entityType.fullyQualifiedName}/${\n                    annotationRecord.fullyQualifiedName.split(entityType.fullyQualifiedName)[1]\n                }`;\n                const facet = (facets[section.key] = {\n                    base: FacetBase.CollectionFacet,\n                    facets: {},\n                    ID: section.ID,\n                    annotationPath: annotationPath,\n                    Label: section.label,\n                    namespace: section.namespace\n                });\n                if (!facet.ID && oDataVersion === FioriElementsVersion.v4) {\n                    log(logger, {\n                        severity: LogSeverity.Error,\n                        message: i18next.t('NOID4SECTION', { facet: annotationRecord.fullyQualifiedName })\n                    });\n                }\n                annotationRecord.Facets?.forEach((collectionItem) => {\n                    addFacetToConfig(\n                        collectionItem,\n                        oDataServiceAVT,\n                        serviceName,\n                        entityType,\n                        facet.facets,\n                        oDataVersion,\n                        logger\n                    );\n                });\n                break;\n            }\n        }\n    }\n}\n\n/**\n * Retrieve header facet configurations that can be used to generate ObjectPage schemas\n * @param {QualifiedName} entityTypeName - the name of the actual entity type\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n * @param {FioriElementsVersion} oDataVersion - OData version\n * @param {ExtensionLogger} logger - Logger class for logging messages\n */\nexport function getObjectPageHeaderFacets(\n    entityType: EntityType,\n    oDataServiceAVT: ConvertedMetadata,\n    oDataVersion = FioriElementsVersion.v2,\n    logger?: ExtensionLogger\n): FacetConfigs | undefined {\n    const facets: FacetConfigs = {};\n    if (!entityType || !entityType.annotations) {\n        return;\n    }\n    const alias = findAlias(UIVOCABULARY, oDataServiceAVT);\n    const facetAnnotation = alias && entityType?.annotations?.[alias]?.HeaderFacets;\n    if (facetAnnotation) {\n        const lastDot = entityType && entityType.fullyQualifiedName.lastIndexOf('.');\n        const serviceName = entityType && entityType.fullyQualifiedName.substring(0, lastDot);\n\n        // Add facets to configuration\n        facetAnnotation.forEach((item) => {\n            addFacetToConfig(item, oDataServiceAVT, serviceName, entityType, facets, oDataVersion, logger);\n        });\n    }\n    return facets;\n}\n\n/**\n * Retrieve facet configurations that can be used to generate ObjectPage schemas\n * @param {QualifiedName} entityTypeName - the name of the actual entity type\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n * @param {FioriElementsVersion} oDataVersion - OData version\n * @param {ExtensionLogger} logger - Logger class for logging messages\n */\nexport function getObjectPageFacets(\n    entityType: EntityType,\n    oDataServiceAVT: ConvertedMetadata,\n    oDataVersion = FioriElementsVersion.v2,\n    logger?: ExtensionLogger\n): FacetConfigs | undefined {\n    const facets: FacetConfigs = {};\n    if (!entityType || !entityType.annotations) {\n        return;\n    }\n    const alias = findAlias(UIVOCABULARY, oDataServiceAVT);\n    const facetAnnotation = alias && entityType?.annotations[alias]?.Facets;\n    if (facetAnnotation) {\n        const lastDot = entityType && entityType.fullyQualifiedName.lastIndexOf('.');\n        const serviceName = entityType && entityType.fullyQualifiedName.substring(0, lastDot);\n\n        // Add facets to configuration\n        facetAnnotation.forEach((item) => {\n            addFacetToConfig(item, oDataServiceAVT, serviceName, entityType, facets, oDataVersion, logger);\n        });\n    }\n    return facets;\n}\n\n/**\n * Returns the version of Fiori elements (v2/v4) from a given manifest\n * @param manifest - the manifest.json file\n */\nexport function getVersionFromManifest(manifest: Manifest): FioriElementsVersion {\n    if (manifest[ManifestSection.generic] || manifest[ManifestSection.ovp]) {\n        return FioriElementsVersion.v2;\n    } else {\n        return FioriElementsVersion.v4;\n    }\n}\n\n/**\n * Determines the template type of a V2 app\n * @param manifest - the manifest.json file\n * @param {ExtensionLogger} logger - Logger class for logging messages\n * @returns {TemplateType} the template type\n */\nexport function determineV2Template(manifest: Manifest, logger: ExtensionLogger): TemplateType | undefined {\n    let templateType: TemplateType;\n    if (manifest[ManifestSection.generic]) {\n        const v2Pages = manifest[ManifestSection.generic].pages;\n        if (!v2Pages) {\n            log(logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOPAGES', { appId: manifest['sap.app']['id'] }),\n                location: {\n                    path: MANIFESTPATH,\n                    range: [ManifestSection.generic]\n                }\n            });\n            return;\n        }\n        for (const pageKey in v2Pages) {\n            const v2Page = v2Pages[pageKey];\n            if (getPageTypeV2(v2Page.component?.name) === PageTypeV2.AnalyticalListPage) {\n                templateType = TemplateType.AnalyticalListPageV2;\n                break;\n            } else if (getPageTypeV2(v2Page.component?.name) === PageTypeV2.ListReport) {\n                templateType = TemplateType.ListReportObjectPageV2;\n                break;\n            }\n        }\n    } else {\n        if (!templateType) {\n            log(logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOTEMPLATE', { section: ManifestSection.generic }),\n                location: {\n                    path: MANIFESTPATH,\n                    range: [ManifestSection.generic]\n                }\n            });\n        }\n    }\n    return templateType;\n}\n\n/**\n * Determines the template type of a single page\n * @param v4Page - single page from routing targets\n * @returns {TemplateType | undefined} the template type\n */\nexport function determineV4PageTemplateType(v4Page: v4.SapUiAppPageV4): TemplateType | undefined {\n    let templateType: TemplateType;\n    const pageType = getPageTypeV4(v4Page);\n    if (pageType === PageTypeV4.AnalyticalListPage) {\n        templateType = TemplateType.AnalyticalListPageV4;\n    } else if (pageType === PageTypeV4.ListReport) {\n        const viewPath = (v4Page.options?.settings?.views?.paths as v4.SapUi5ALPPaths)?.[0];\n        if (viewPath && (viewPath[ALPViewType.Primary] || viewPath[ALPViewType.Secondary])) {\n            templateType = TemplateType.AnalyticalListPageV4;\n        } else {\n            templateType = TemplateType.ListReportObjectPageV4;\n        }\n    } else if (pageType === PageTypeV4.ObjectPage) {\n        templateType = TemplateType.ListReportObjectPageV4;\n        //fixed now for FEOP scenario, bit continue to check if LR/ALP exists\n    } else if (pageType === PageTypeV4.CustomPage) {\n        templateType = TemplateType.FreestylePageV4;\n    }\n    return templateType;\n}\n\n/**\n * Determines the template type, based on the given manifest routing target entries of the app\n * @param v4Pages - pages from routing targets\n * @returns {TemplateType | undefined} the template type\n */\nfunction determineV4TemplateFromPages(v4Pages: v4.SapUi5RoutingTargetsV4): TemplateType | undefined {\n    let templateType: TemplateType;\n    for (const pageKey in v4Pages) {\n        const v4Page = v4Pages[pageKey] as v4.SapUiAppPageV4;\n        templateType = determineV4PageTemplateType(v4Page);\n        if (templateType) {\n            break;\n        }\n    }\n    return templateType;\n}\n\n/**\n * Determines the template type of a V4 app\n * @param manifest - the manifest.json file\n * @param {ExtensionLogger} logger - Logger class for logging messages\n * @returns {TemplateType} the template type\n */\nexport function determineV4Template(manifest: Manifest, logger: ExtensionLogger): TemplateType | undefined {\n    const v4Pages =\n        manifest[ManifestSection.ui5].routing &&\n        (manifest[ManifestSection.ui5].routing.targets as v4.SapUi5RoutingTargetsV4);\n    // if there are no pages in routing targets, we use LROPV4 as default template type\n    if (!v4Pages || Object.keys(v4Pages).length === 0) {\n        log(logger, {\n            severity: LogSeverity.Info,\n            message: i18next.t('NOPAGES', { appId: manifest['sap.app']['id'] }),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.ui5, 'routing']\n            }\n        });\n        return TemplateType.ListReportObjectPageV4;\n    }\n    // else try to determine template type from routing targets\n    const templateType = determineV4TemplateFromPages(v4Pages);\n    if (!templateType) {\n        log(logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOTEMPLATE', { section: ManifestSection.ui5 }),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.ui5, 'routing', 'targets']\n            }\n        });\n    }\n    return templateType;\n}\n\n/**\n * Determines the template type, based on the given manifest entries of the app\n * @param manifest - the manifest.json file\n * @param {FioriElementsVersion} fioriElementsVersion - OData or FE version\n * @param {ExtensionLogger} logger - Logger class for logging messages\n * @returns {TemplateType} the template type\n */\nexport function getTemplateTypeFromManifest(\n    manifest: Manifest,\n    fioriElementsVersion: FioriElementsVersion,\n    logger: ExtensionLogger\n): TemplateType | undefined {\n    let templateType: TemplateType;\n    if (manifest[ManifestSection.ovp]) {\n        templateType = TemplateType.OverviewPageV2;\n    } else if (fioriElementsVersion === FioriElementsVersion.v2) {\n        templateType = determineV2Template(manifest, logger);\n    } else if (fioriElementsVersion === FioriElementsVersion.v4) {\n        templateType = determineV4Template(manifest, logger);\n    } else {\n        if (!templateType) {\n            log(logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOFE'),\n                location: {\n                    path: MANIFESTPATH\n                }\n            });\n        }\n    }\n    return templateType;\n}\n\n/**\n * Adds title and description to a section or header section in an app schema\n * @param facet - intermediate facet structure comprising annotation information\n * @param section - section in the app schema\n * @param facetKey - key of the facet\n */\nexport function addSectionTitleAndDescription(facet: FacetConfig, section: Definition, facetKey: string): void {\n    if (facet?.ID) {\n        section.title = FacetTitlePrefix + facet.ID;\n        section[SchemaTag.keys] = [{ name: SchemaKeyName.id, value: facet.ID }];\n    } else {\n        section.title = facetKey.replace(/@com.sap/g, 'com.sap');\n        section[SchemaTag.keys] = [{ name: SchemaKeyName.id, value: facetKey.replace(UIVOCABULARYALPHADOT, '') }];\n    }\n    // Description\n    if (facet?.Label) {\n        section.description = facet.Label;\n    } else if (facet?.ID) {\n        section.description = facet.ID;\n    } else {\n        section.description = facetKey.substring(facetKey.lastIndexOf('.') + 1);\n    }\n}\n\n/**\n * Adds target title or description to a section or header section in an app schema\n * @param facet - intermediate facet structure comprising annotation information\n * @param section - section in the app schema\n * @param facetKey - key of the facet\n */\nexport function addTargetTitleAndSectionDescription(facet: FacetConfig, section: Definition, facetKey: string): void {\n    addSectionTitleAndDescription(facet, section, facetKey);\n    if (facet?.Label) {\n        section.description = facet?.Label;\n    } else if (facet?.['Title']) {\n        section.description = facet['Title'];\n    } else if (facet?.target?.['Title']) {\n        section.description = facet.target['Title'];\n    }\n}\n\n/**\n * Creates a default object for a new section or subsection, and adds the ID as title if present.\n * @param facet Facet configuration, to be analyzed\n * @returns the new section object\n */\nexport function createDefaultSection(appSchema: Definition, facet: FacetConfig, facetKey: string): Definition {\n    if (!facet) {\n        return undefined;\n    }\n    let section: Definition;\n    if (appSchema.definitions.ObjectPageSection) {\n        //base type in V2, with properties\n        section = JSON.parse(JSON.stringify(appSchema.definitions.ObjectPageSection));\n    } else {\n        section = {\n            type: 'object',\n            properties: {},\n            additionalProperties: false\n        };\n        section[SchemaTag.isViewNode] = true;\n    }\n    section[SchemaTag.annotationPath] = facet.annotationPath;\n    addSectionTitleAndDescription(facet, section, facetKey);\n    return section;\n}\n\n/**\n * Retrieve page section data(so far id/key and label/description).\n * @param {EntityType} entityType The actual entityType\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n * @param {ExtensionLogger} logger - Logger class for logging messages\n * @param {FioriElementsVersion} oDataVersion - OData version\n * @param {boolean} [checkUnresolvableFacets=false] - Check and avoid facets and sections without ID and Target.\n * @returns {FacetSection[]} - Array of facets or sections\n */\nexport function getObjectPageFacetSection(\n    entityType: EntityType,\n    oDataServiceAVT: ConvertedMetadata,\n    logger?: ExtensionLogger,\n    oDataVersion = FioriElementsVersion.v2,\n    checkUnresolvableFacets = false\n): FacetSection[] {\n    const alias = findAlias(UIVOCABULARY, oDataServiceAVT);\n    let sections: FacetSection[] = [];\n    if (entityType) {\n        const facetAnnotation = alias && entityType?.annotations?.[alias]?.Facets;\n\n        if (facetAnnotation) {\n            sections = facetAnnotation.reduce(function (result: FacetSection[], item: FacetTypes) {\n                if (checkUnresolvableFacets && !item['ID'] && !('Target' in item && item['Target'])) {\n                    return result;\n                }\n                const section: FacetSection = getSectionFacet(\n                    item,\n                    entityType,\n                    oDataServiceAVT,\n                    logger,\n                    oDataVersion,\n                    true\n                );\n                if (section) {\n                    result.push(section);\n                }\n                return result;\n            }, sections);\n        }\n        return sections;\n    }\n}\n\n/**\n * Cleans empty sub-structures from the export result for manifest\n * @param manifest - manifest.json part of the export result\n * @param path  - path in the manifest\n * @param targetAnnotation - target annotation (optional, in case of sections, subsections)\n * @param targetAnnotationEncoded - encoded version of the target annotation, as represented in the manifest\n */\nexport const deleteEmptyStructure = (\n    manifest: object,\n    path: string,\n    targetAnnotation?: string,\n    targetAnnotationEncoded?: string\n): void => {\n    if (!path) {\n        return;\n    }\n    let manifestSection = manifest;\n    const pathArray = path.split('/');\n    pathArray.forEach(function (element) {\n        const decodedElement =\n            targetAnnotationEncoded && targetAnnotationEncoded === element\n                ? targetAnnotation\n                : element.replace('??', '/');\n        if (!manifestSection[decodedElement]) {\n            return;\n        }\n        if (Object.keys(manifestSection[decodedElement]).length === 0) {\n            if (Array.isArray(manifestSection)) {\n                manifestSection.splice(Number(decodedElement), 1);\n            } else {\n                delete manifestSection[decodedElement];\n            }\n            pathArray.pop();\n            deleteEmptyStructure(manifest, pathArray.join('/'), targetAnnotation, targetAnnotationEncoded);\n            return;\n        }\n        manifestSection = manifestSection && manifestSection[decodedElement];\n    });\n};\n\n/**\n * Method which returns generic schema file name.\n * @param {SchemaType | PageTypeV2} schemaType Schema type or Page type.\n * @return {string} File name of generic schema.\n */\nconst getGenericSchemaFileName = (schemaType: SchemaType | PageTypeV2 | PageTypeV4): string => {\n    if (schemaType === SchemaType.FreestylePage) {\n        return PageTypeV2.CustomPage;\n    }\n    return `${schemaType}`;\n};\n\n/**\n * Method which returns schema file name and path depending on passed schema or page type.\n * @param {SchemaType | PageTypeV2} schemaType Schema type or Page type.\n * @param {string} [entitySet] Entity set string.\n * @return {SchemaFilePath} File path info.\n */\nexport const getSchemaFilePath = (\n    schemaType: SchemaType | PageTypeV2 | PageTypeV4,\n    entitySet?: string\n): SchemaFilePath => {\n    const schemaFile: SchemaFilePath = {\n        filename: '',\n        path: ''\n    };\n    switch (schemaType) {\n        // Application schema\n        case SchemaType.Application: {\n            // File name\n            schemaFile.filename = `App`;\n            // Full path\n            schemaFile.path = `./${DirName.Schemas}/${schemaFile.filename}`;\n            break;\n        }\n        // List report and object page\n        case SchemaType.ListReport:\n        case SchemaType.ObjectPage: {\n            // File name\n            schemaFile.filename = entitySet ? `${schemaType}_${entitySet}` : getGenericSchemaFileName(schemaType);\n            // Full path\n            schemaFile.path = `../${DirName.Schemas}/${schemaFile.filename}`;\n            break;\n        }\n        // Other page configs\n        default: {\n            // File name\n            schemaFile.filename = getGenericSchemaFileName(schemaType);\n            // Full path\n            schemaFile.path = `../${DirName.Schemas}/${schemaFile.filename}`;\n            break;\n        }\n    }\n    schemaFile.path += '.json';\n    return schemaFile;\n};\n\n/**\n * Method which generates id of page according to passed parameters\n * @param appVersion - Fiori Elements version - V2 or V4\n * @param pageType - Page type\n * @param entitySet - Entity Set\n * @param viewId - Custom page's viewId (optional)\n * @param pageName - Page name in manifest. Used if entitySet is empty\n * @returns {string} Generated page id\n */\n\nexport function generatePageId(\n    pageType: PageTypeV2 | PageTypeV4,\n    entitySet: string,\n    viewId?: string,\n    pageName?: string\n): string {\n    if (pageType === PageTypeV2.CustomPage) {\n        const names = viewId && viewId.split('.');\n        return names && names[names.length - 1] + 'Page';\n    }\n    const parts: string[] = [];\n    parts.push(pageType);\n    if (entitySet) {\n        parts.push(entitySet);\n    } else if (pageName) {\n        parts.push(pageName.replace('|', '').replace(pageType, ''));\n    }\n    return parts.join('_');\n}\n\nexport type NextDefinition = {\n    configObject?: object;\n    targetDefinition?: object;\n    title?: string;\n};\n\nfunction fillArrayFromAnyOfReference(\n    element: Definition,\n    appSchema: Definition,\n    currentConfigObject: object,\n    definitionArray: any[]\n) {\n    const $ref = element.$ref;\n    if ($ref) {\n        const definitionKey = $ref.split(DEFINITION_LINK_PREFIX)[1];\n        if (appSchema.definitions[definitionKey]) {\n            const controlProperty = appSchema.definitions[definitionKey]['controlProperty'];\n            if ($ref.includes(currentConfigObject[controlProperty])) {\n                definitionArray.push(definitionKey);\n            }\n        }\n    }\n}\n\n/**\n * Fills an array of next definitions from given references in the JSON schema\n * @param propertyDefinition - Definition of the current property in schema\n * @param currentConfigObject - Current object in the config JSON. Evaluated to get the right value of a controlling property,\n *                              for making the right choice in case of multiple options (anyOf)\n * @param appSchema - app-specific JSON schema\n * @returns an array of definitions to proceed with\n */\nfunction fillArrayFromPropertyDefinition(\n    propertyDefinition: Definition,\n    currentConfigObject: object,\n    appSchema: Definition\n): any[] {\n    const definitionArray = [];\n    if (propertyDefinition.$ref) {\n        definitionArray.push(propertyDefinition.$ref.split(DEFINITION_LINK_PREFIX)[1]);\n    } else if (propertyDefinition.anyOf) {\n        if (currentConfigObject) {\n            propertyDefinition.anyOf.forEach((element) => {\n                fillArrayFromAnyOfReference(element as Definition, appSchema, currentConfigObject, definitionArray);\n            });\n        }\n        if (definitionArray.length === 0) {\n            return undefined;\n        }\n    }\n    return definitionArray;\n}\n\n/**\n * Determines the next definition to be handled, based on the definition array.\n * It also creates the Metadata instance for the next definition, to subsequently access metadata like the syncRule\n * @param definitionArray - Array of definitions, as determined by fillArrayFromNextDefinition\n * @param appSchema - app-specific JSON schema\n * @param title - default title\n * @param currentConfigObject - Current object in the config JSON.\n * @param key - actual key\n * @param {MetadataInstanceInterface} factory - factory for creating metadata instances\n * @param pageType - page type\n * @param propertyDefinition - Definition of the current property in schema\n * @returns {NextDefinition} - Next target definition to process\n */\nfunction determineNextDefinitionFromDefinitionArray(\n    definitionArray: any[],\n    appSchema: object,\n    title: string,\n    currentConfigObject: object,\n    key: string,\n    factory: MetadataInstanceInterface,\n    pageType: PageTypeV2 | PageTypeV4,\n    propertyDefinition: object\n): NextDefinition {\n    let nextDefinition: NextDefinition = {\n        configObject: undefined,\n        targetDefinition: {},\n        title: ''\n    };\n    if (definitionArray.length) {\n        const lastDefinition = definitionArray[definitionArray.length - 1];\n        nextDefinition.targetDefinition = appSchema['definitions'][lastDefinition];\n\n        if (nextDefinition?.targetDefinition?.['$ref'] || nextDefinition?.targetDefinition?.['type'] === 'array') {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            nextDefinition = getNextTargetDefinition(\n                appSchema,\n                title,\n                currentConfigObject,\n                nextDefinition.targetDefinition,\n                key,\n                factory,\n                pageType\n            );\n            return nextDefinition;\n        }\n        if (definitionArray.length > 1) {\n            definitionArray.forEach((element) => {\n                if (element !== '') {\n                    nextDefinition.targetDefinition['properties'] = {\n                        ...nextDefinition.targetDefinition['properties'],\n                        ...appSchema['definitions'][element]['properties']\n                    };\n                }\n            });\n        }\n        nextDefinition.title = nextDefinition?.targetDefinition?.['title']\n            ? nextDefinition.targetDefinition['title']\n            : title;\n        const factoryKey = lastDefinition?.split('<')[0];\n        const targetObject = currentConfigObject ? currentConfigObject : {};\n        nextDefinition.configObject = factory.createInstance(\n            pageType,\n            factoryKey,\n            targetObject,\n            nextDefinition?.targetDefinition?.['controlProperty']\n        );\n    } else {\n        //e.g. sections ==> loop over all properties = subsections or other\n        nextDefinition.targetDefinition = propertyDefinition;\n        nextDefinition.title = nextDefinition.targetDefinition['title']\n            ? nextDefinition.targetDefinition['title']\n            : key;\n        nextDefinition.configObject = currentConfigObject;\n    }\n    return nextDefinition;\n}\n\n/**\n * Recursive function to determine the next config part, next definition in the app schema and the title\n * @param appSchema - app-specific JSON schema\n * @param title - default title\n * @param currentConfigObject - current part of the configuration that gets traversed\n * @param propertyDefinition - definition of a given property in the app schema\n * @param key - actual key\n * @param {MetadataInstanceInterface} factory - factory for creating metadata instances\n * @param pageType - page type\n */\nexport function getNextTargetDefinition(\n    appSchema: object,\n    title: string,\n    currentConfigObject: object,\n    propertyDefinition: object,\n    key: string,\n    factory: MetadataInstanceInterface,\n    pageType: PageTypeV2 | PageTypeV4\n): NextDefinition {\n    let nextDefinition: NextDefinition;\n    if (propertyDefinition['type'] === 'array') {\n        nextDefinition = getNextTargetDefinition(\n            appSchema,\n            title,\n            currentConfigObject,\n            propertyDefinition['items'],\n            key,\n            factory,\n            pageType\n        );\n        return nextDefinition;\n    }\n    const definitionArray = fillArrayFromPropertyDefinition(propertyDefinition, currentConfigObject, appSchema);\n    if (!definitionArray) {\n        return undefined;\n    }\n    nextDefinition = determineNextDefinitionFromDefinitionArray(\n        definitionArray,\n        appSchema,\n        title,\n        currentConfigObject,\n        key,\n        factory,\n        pageType,\n        propertyDefinition\n    );\n    return nextDefinition;\n}\n\n/**\n * Custom array merge function called by deepmerge's merge function\n *\n * @param {*} target Target array\n * @param {*} source Source array\n * @param {*} options options object provided by deepmerge's merge function\n * @returns\n */\nexport const arrayCombineMerge = (target, source, options): string[] => {\n    const destination = target.slice();\n    source.forEach((item, index) => {\n        if (typeof destination[index] === 'undefined') {\n            destination[index] = options.cloneUnlessOtherwiseSpecified(item, options);\n        } else if (options.isMergeableObject(item)) {\n            destination[index] = merge(target[index], item, options);\n        } else if (target.indexOf(item) === -1) {\n            destination.push(item);\n        }\n    });\n    return destination;\n};\n\n/**\n * Converts an enum into a CSV\n * @param {object} manifestSection - manifestSection where the key exists\n * @param {object} configPart - Property as mentioned in config file\n * @param {string} key - Property to be exported to manifest\n */\nexport function convertEnumToCSV(manifestSection, configPart, key: string): void {\n    manifestSection[key] = JSON.parse(JSON.stringify(configPart[key]));\n    // convert enum array to joined string\n    const field = configPart[key];\n    manifestSection[key] = field.join();\n}\n\n/**\n * Converts an action ID from the internal format (schema, config) to the stable ID representation\n * @param actionId - the (unique) internal format of the action ID\n * @returns the converted action ID\n */\nexport function convertActionKeyToStableId(actionId: string): string | undefined {\n    if (!actionId) {\n        return;\n    }\n    return (actionId.indexOf('??') > -1 ? actionId.split('??')[1] : actionId).replace(/@/g, '::');\n}\n\n/**\n * Method returns definition key for passed '$ref' property by removing 'definition' prefix\n * @param {string} $ref Definition reference.\n * @returns Definition key.\n */\nexport function getDefinitionKey($ref: string): string {\n    return $ref?.split(DEFINITION_LINK_PREFIX)[1];\n}\n\n/**\n * Method adds indices (propertyIndex property) to app-specific JSON schema properties.\n *\n * @param {Definition} [schema] App-specific JSON schema.\n * @param {string[]} [order] Order of properties.\n * @returns {void} Updates app-specific JSON schema properties with indices.\n */\nexport function updatePropertyIndices(schema: Definition, order: string[]): void {\n    order.forEach((propertyName: string, index: number) => {\n        if (schema.properties[propertyName]) {\n            schema.properties[propertyName]['propertyIndex'] = index;\n        }\n    });\n}\n\n/**\n * Method to remove namespaces\n * @param {string } [sId]\n * @returns {string} modified string without namespace\n */\nexport function removeNamespaces(sId: string): string {\n    sId = sId.replace(UIVOCABULARYDOT, '');\n    sId = sId.replace('com.sap.vocabularies.Communication.v1.', '');\n    return sId;\n}\n\n/**\n * Method to replace namespaces with short hand form\n * @param {string } [sId]\n * @returns {string} modified string with replaced namespaces\n */\nexport function replaceNamespaces(sId: string): string {\n    sId = sId.replace(UIVOCABULARY, 'UI');\n    sId = sId.replace('com.sap.vocabularies.Communication.v1', 'Communication');\n    return sId;\n}\n", "export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}", "export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}", "import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}", "import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}", "import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}", "export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}", "export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}", "import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}", "import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}", "export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}", "import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}", "export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}", "export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}", "export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}", "import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}", "export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}", "import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}", "import _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _toArray from '@babel/runtime/helpers/esm/toArray';\n\nfunction ownKeys$6(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$6(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$6(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$6(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar consoleLogger = {\n  type: 'logger',\n  log: function log(args) {\n    this.output('log', args);\n  },\n  warn: function warn(args) {\n    this.output('warn', args);\n  },\n  error: function error(args) {\n    this.output('error', args);\n  },\n  output: function output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\nvar Logger = function () {\n  function Logger(concreteLogger) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Logger);\n    this.init(concreteLogger, options);\n  }\n  _createClass(Logger, [{\n    key: \"init\",\n    value: function init(concreteLogger) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.prefix = options.prefix || 'i18next:';\n      this.logger = concreteLogger || consoleLogger;\n      this.options = options;\n      this.debug = options.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(bool) {\n      this.debug = bool;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return this.forward(args, 'log', '', true);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return this.forward(args, 'warn', '', true);\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      return this.forward(args, 'error', '');\n    }\n  }, {\n    key: \"deprecate\",\n    value: function deprecate() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n    }\n  }, {\n    key: \"forward\",\n    value: function forward(args, lvl, prefix, debugOnly) {\n      if (debugOnly && !this.debug) return null;\n      if (typeof args[0] === 'string') args[0] = \"\".concat(prefix).concat(this.prefix, \" \").concat(args[0]);\n      return this.logger[lvl](args);\n    }\n  }, {\n    key: \"create\",\n    value: function create(moduleName) {\n      return new Logger(this.logger, _objectSpread$6(_objectSpread$6({}, {\n        prefix: \"\".concat(this.prefix, \":\").concat(moduleName, \":\")\n      }), this.options));\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(options) {\n      options = options || this.options;\n      options.prefix = options.prefix || this.prefix;\n      return new Logger(this.logger, options);\n    }\n  }]);\n  return Logger;\n}();\nvar baseLogger = new Logger();\n\nvar EventEmitter = function () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n    this.observers = {};\n  }\n  _createClass(EventEmitter, [{\n    key: \"on\",\n    value: function on(events, listener) {\n      var _this = this;\n      events.split(' ').forEach(function (event) {\n        _this.observers[event] = _this.observers[event] || [];\n        _this.observers[event].push(listener);\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      if (!this.observers[event]) return;\n      if (!listener) {\n        delete this.observers[event];\n        return;\n      }\n      this.observers[event] = this.observers[event].filter(function (l) {\n        return l !== listener;\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      if (this.observers[event]) {\n        var cloned = [].concat(this.observers[event]);\n        cloned.forEach(function (observer) {\n          observer.apply(void 0, args);\n        });\n      }\n      if (this.observers['*']) {\n        var _cloned = [].concat(this.observers['*']);\n        _cloned.forEach(function (observer) {\n          observer.apply(observer, [event].concat(args));\n        });\n      }\n    }\n  }]);\n  return EventEmitter;\n}();\n\nfunction defer() {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(function (m) {\n    if (s[m]) t[m] = s[m];\n  });\n}\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    var key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\nfunction setPath(object, path, newValue) {\n  var _getLastOfPath = getLastOfPath(object, path, Object),\n    obj = _getLastOfPath.obj,\n    k = _getLastOfPath.k;\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  var _getLastOfPath2 = getLastOfPath(object, path, Object),\n    obj = _getLastOfPath2.obj,\n    k = _getLastOfPath2.k;\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  var _getLastOfPath3 = getLastOfPath(object, path),\n    obj = _getLastOfPath3.obj,\n    k = _getLastOfPath3.k;\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  var value = getPath(data, key);\n  if (value !== undefined) {\n    return value;\n  }\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (var prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, function (s) {\n      return _entityMap[s];\n    });\n  }\n  return data;\n}\nvar isIE10 = typeof window !== 'undefined' && window.navigator && typeof window.navigator.userAgentData === 'undefined' && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1;\nvar chars = [' ', ',', '?', '!', ';'];\nfunction looksLikeObjectPath(key, nsSeparator, keySeparator) {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  var possibleChars = chars.filter(function (c) {\n    return nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0;\n  });\n  if (possibleChars.length === 0) return true;\n  var r = new RegExp(\"(\".concat(possibleChars.map(function (c) {\n    return c === '?' ? '\\\\?' : c;\n  }).join('|'), \")\"));\n  var matched = !r.test(key);\n  if (!matched) {\n    var ki = key.indexOf(keySeparator);\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n  return matched;\n}\nfunction deepFind(obj, path) {\n  var keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  var paths = path.split(keySeparator);\n  var current = obj;\n  for (var i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n    if (current[paths[i]] === undefined) {\n      var j = 2;\n      var p = paths.slice(i, i + j).join(keySeparator);\n      var mix = current[p];\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n      if (mix === undefined) return undefined;\n      if (mix === null) return null;\n      if (path.endsWith(p)) {\n        if (typeof mix === 'string') return mix;\n        if (p && typeof mix[p] === 'string') return mix[p];\n      }\n      var joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n    current = current[paths[i]];\n  }\n  return current;\n}\n\nfunction ownKeys$5(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$5(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper$3(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$3(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct$3() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar ResourceStore = function (_EventEmitter) {\n  _inherits(ResourceStore, _EventEmitter);\n  var _super = _createSuper$3(ResourceStore);\n  function ResourceStore(data) {\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n    _classCallCheck(this, ResourceStore);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    _this.data = data || {};\n    _this.options = options;\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n    if (_this.options.ignoreJSONStructure === undefined) {\n      _this.options.ignoreJSONStructure = true;\n    }\n    return _this;\n  }\n  _createClass(ResourceStore, [{\n    key: \"addNamespaces\",\n    value: function addNamespaces(ns) {\n      if (this.options.ns.indexOf(ns) < 0) {\n        this.options.ns.push(ns);\n      }\n    }\n  }, {\n    key: \"removeNamespaces\",\n    value: function removeNamespaces(ns) {\n      var index = this.options.ns.indexOf(ns);\n      if (index > -1) {\n        this.options.ns.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(lng, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n      var path = [lng, ns];\n      if (key && typeof key !== 'string') path = path.concat(key);\n      if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n      }\n      var result = getPath(this.data, path);\n      if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n      return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(lng, ns, key, value) {\n      var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n        silent: false\n      };\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var path = [lng, ns];\n      if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        value = ns;\n        ns = path[1];\n      }\n      this.addNamespaces(ns);\n      setPath(this.data, path, value);\n      if (!options.silent) this.emit('added', lng, ns, key, value);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(lng, ns, resources) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n        silent: false\n      };\n      for (var m in resources) {\n        if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n          silent: true\n        });\n      }\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"addResourceBundle\",\n    value: function addResourceBundle(lng, ns, resources, deep, overwrite) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n        silent: false\n      };\n      var path = [lng, ns];\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        deep = resources;\n        resources = ns;\n        ns = path[1];\n      }\n      this.addNamespaces(ns);\n      var pack = getPath(this.data, path) || {};\n      if (deep) {\n        deepExtend(pack, resources, overwrite);\n      } else {\n        pack = _objectSpread$5(_objectSpread$5({}, pack), resources);\n      }\n      setPath(this.data, path, pack);\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"removeResourceBundle\",\n    value: function removeResourceBundle(lng, ns) {\n      if (this.hasResourceBundle(lng, ns)) {\n        delete this.data[lng][ns];\n      }\n      this.removeNamespaces(ns);\n      this.emit('removed', lng, ns);\n    }\n  }, {\n    key: \"hasResourceBundle\",\n    value: function hasResourceBundle(lng, ns) {\n      return this.getResource(lng, ns) !== undefined;\n    }\n  }, {\n    key: \"getResourceBundle\",\n    value: function getResourceBundle(lng, ns) {\n      if (!ns) ns = this.options.defaultNS;\n      if (this.options.compatibilityAPI === 'v1') return _objectSpread$5(_objectSpread$5({}, {}), this.getResource(lng, ns));\n      return this.getResource(lng, ns);\n    }\n  }, {\n    key: \"getDataByLanguage\",\n    value: function getDataByLanguage(lng) {\n      return this.data[lng];\n    }\n  }, {\n    key: \"hasLanguageSomeTranslations\",\n    value: function hasLanguageSomeTranslations(lng) {\n      var data = this.getDataByLanguage(lng);\n      var n = data && Object.keys(data) || [];\n      return !!n.find(function (v) {\n        return data[v] && Object.keys(data[v]).length > 0;\n      });\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.data;\n    }\n  }]);\n  return ResourceStore;\n}(EventEmitter);\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor: function addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle: function handle(processors, value, key, options, translator) {\n    var _this = this;\n    processors.forEach(function (processor) {\n      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$4(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper$2(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$2(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct$2() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar checkedLoadedFor = {};\nvar Translator = function (_EventEmitter) {\n  _inherits(Translator, _EventEmitter);\n  var _super = _createSuper$2(Translator);\n  function Translator(services) {\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Translator);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, _assertThisInitialized(_this));\n    _this.options = options;\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n    _this.logger = baseLogger.create('translator');\n    return _this;\n  }\n  _createClass(Translator, [{\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng) {\n      if (lng) this.language = lng;\n    }\n  }, {\n    key: \"exists\",\n    value: function exists(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      if (key === undefined || key === null) {\n        return false;\n      }\n      var resolved = this.resolve(key, options);\n      return resolved && resolved.res !== undefined;\n    }\n  }, {\n    key: \"extractFromKey\",\n    value: function extractFromKey(key, options) {\n      var nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n      if (nsSeparator === undefined) nsSeparator = ':';\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var namespaces = options.ns || this.options.defaultNS || [];\n      var wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n      var seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n      if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n        var m = key.match(this.interpolator.nestingRegexp);\n        if (m && m.length > 0) {\n          return {\n            key: key,\n            namespaces: namespaces\n          };\n        }\n        var parts = key.split(nsSeparator);\n        if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n        key = parts.join(keySeparator);\n      }\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      return {\n        key: key,\n        namespaces: namespaces\n      };\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(keys, options, lastKey) {\n      var _this2 = this;\n      if (_typeof(options) !== 'object' && this.options.overloadTranslationOptionHandler) {\n        options = this.options.overloadTranslationOptionHandler(arguments);\n      }\n      if (_typeof(options) === 'object') options = _objectSpread$4({}, options);\n      if (!options) options = {};\n      if (keys === undefined || keys === null) return '';\n      if (!Array.isArray(keys)) keys = [String(keys)];\n      var returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var _this$extractFromKey = this.extractFromKey(keys[keys.length - 1], options),\n        key = _this$extractFromKey.key,\n        namespaces = _this$extractFromKey.namespaces;\n      var namespace = namespaces[namespaces.length - 1];\n      var lng = options.lng || this.language;\n      var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n      if (lng && lng.toLowerCase() === 'cimode') {\n        if (appendNamespaceToCIMode) {\n          var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n          if (returnDetails) {\n            return {\n              res: \"\".concat(namespace).concat(nsSeparator).concat(key),\n              usedKey: key,\n              exactUsedKey: key,\n              usedLng: lng,\n              usedNS: namespace\n            };\n          }\n          return \"\".concat(namespace).concat(nsSeparator).concat(key);\n        }\n        if (returnDetails) {\n          return {\n            res: key,\n            usedKey: key,\n            exactUsedKey: key,\n            usedLng: lng,\n            usedNS: namespace\n          };\n        }\n        return key;\n      }\n      var resolved = this.resolve(keys, options);\n      var res = resolved && resolved.res;\n      var resUsedKey = resolved && resolved.usedKey || key;\n      var resExactUsedKey = resolved && resolved.exactUsedKey || key;\n      var resType = Object.prototype.toString.apply(res);\n      var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n      var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n      var handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n      var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n      if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n        if (!options.returnObjects && !this.options.returnObjects) {\n          if (!this.options.returnedObjectHandler) {\n            this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n          }\n          var r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, _objectSpread$4(_objectSpread$4({}, options), {}, {\n            ns: namespaces\n          })) : \"key '\".concat(key, \" (\").concat(this.language, \")' returned an object instead of string.\");\n          if (returnDetails) {\n            resolved.res = r;\n            return resolved;\n          }\n          return r;\n        }\n        if (keySeparator) {\n          var resTypeIsArray = resType === '[object Array]';\n          var copy = resTypeIsArray ? [] : {};\n          var newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n          for (var m in res) {\n            if (Object.prototype.hasOwnProperty.call(res, m)) {\n              var deepKey = \"\".concat(newKeyToUse).concat(keySeparator).concat(m);\n              copy[m] = this.translate(deepKey, _objectSpread$4(_objectSpread$4({}, options), {\n                joinArrays: false,\n                ns: namespaces\n              }));\n              if (copy[m] === deepKey) copy[m] = res[m];\n            }\n          }\n          res = copy;\n        }\n      } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n        res = res.join(joinArrays);\n        if (res) res = this.extendTranslation(res, keys, options, lastKey);\n      } else {\n        var usedDefault = false;\n        var usedKey = false;\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var hasDefaultValue = Translator.hasDefaultValue(options);\n        var defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n        var defaultValue = options[\"defaultValue\".concat(defaultValueSuffix)] || options.defaultValue;\n        if (!this.isValidLookup(res) && hasDefaultValue) {\n          usedDefault = true;\n          res = defaultValue;\n        }\n        if (!this.isValidLookup(res)) {\n          usedKey = true;\n          res = key;\n        }\n        var missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n        var resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n        var updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n        if (usedKey || usedDefault || updateMissing) {\n          this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n          if (keySeparator) {\n            var fk = this.resolve(key, _objectSpread$4(_objectSpread$4({}, options), {}, {\n              keySeparator: false\n            }));\n            if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n          }\n          var lngs = [];\n          var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n          if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n            for (var i = 0; i < fallbackLngs.length; i++) {\n              lngs.push(fallbackLngs[i]);\n            }\n          } else if (this.options.saveMissingTo === 'all') {\n            lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n          } else {\n            lngs.push(options.lng || this.language);\n          }\n          var send = function send(l, k, specificDefaultValue) {\n            var defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n            if (_this2.options.missingKeyHandler) {\n              _this2.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n            } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {\n              _this2.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n            }\n            _this2.emit('missingKey', l, namespace, k, res);\n          };\n          if (this.options.saveMissing) {\n            if (this.options.saveMissingPlurals && needsPluralHandling) {\n              lngs.forEach(function (language) {\n                _this2.pluralResolver.getSuffixes(language, options).forEach(function (suffix) {\n                  send([language], key + suffix, options[\"defaultValue\".concat(suffix)] || defaultValue);\n                });\n              });\n            } else {\n              send(lngs, key, defaultValue);\n            }\n          }\n        }\n        res = this.extendTranslation(res, keys, options, resolved, lastKey);\n        if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = \"\".concat(namespace, \":\").concat(key);\n        if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n          if (this.options.compatibilityAPI !== 'v1') {\n            res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? \"\".concat(namespace, \":\").concat(key) : key, usedDefault ? res : undefined);\n          } else {\n            res = this.options.parseMissingKeyHandler(res);\n          }\n        }\n      }\n      if (returnDetails) {\n        resolved.res = res;\n        return resolved;\n      }\n      return res;\n    }\n  }, {\n    key: \"extendTranslation\",\n    value: function extendTranslation(res, key, options, resolved, lastKey) {\n      var _this3 = this;\n      if (this.i18nFormat && this.i18nFormat.parse) {\n        res = this.i18nFormat.parse(res, _objectSpread$4(_objectSpread$4({}, this.options.interpolation.defaultVariables), options), resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n          resolved: resolved\n        });\n      } else if (!options.skipInterpolation) {\n        if (options.interpolation) this.interpolator.init(_objectSpread$4(_objectSpread$4({}, options), {\n          interpolation: _objectSpread$4(_objectSpread$4({}, this.options.interpolation), options.interpolation)\n        }));\n        var skipOnVariables = typeof res === 'string' && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n        var nestBef;\n        if (skipOnVariables) {\n          var nb = res.match(this.interpolator.nestingRegexp);\n          nestBef = nb && nb.length;\n        }\n        var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n        if (this.options.interpolation.defaultVariables) data = _objectSpread$4(_objectSpread$4({}, this.options.interpolation.defaultVariables), data);\n        res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n        if (skipOnVariables) {\n          var na = res.match(this.interpolator.nestingRegexp);\n          var nestAft = na && na.length;\n          if (nestBef < nestAft) options.nest = false;\n        }\n        if (!options.lng && this.options.compatibilityAPI !== 'v1' && resolved && resolved.res) options.lng = resolved.usedLng;\n        if (options.nest !== false) res = this.interpolator.nest(res, function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          if (lastKey && lastKey[0] === args[0] && !options.context) {\n            _this3.logger.warn(\"It seems you are nesting recursively key: \".concat(args[0], \" in key: \").concat(key[0]));\n            return null;\n          }\n          return _this3.translate.apply(_this3, args.concat([key]));\n        }, options);\n        if (options.interpolation) this.interpolator.reset();\n      }\n      var postProcess = options.postProcess || this.options.postProcess;\n      var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n      if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n        res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? _objectSpread$4({\n          i18nResolved: resolved\n        }, options) : options, this);\n      }\n      return res;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(keys) {\n      var _this4 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var found;\n      var usedKey;\n      var exactUsedKey;\n      var usedLng;\n      var usedNS;\n      if (typeof keys === 'string') keys = [keys];\n      keys.forEach(function (k) {\n        if (_this4.isValidLookup(found)) return;\n        var extracted = _this4.extractFromKey(k, options);\n        var key = extracted.key;\n        usedKey = key;\n        var namespaces = extracted.namespaces;\n        if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && _this4.pluralResolver.shouldUseIntlApi();\n        var needsContextHandling = options.context !== undefined && (typeof options.context === 'string' || typeof options.context === 'number') && options.context !== '';\n        var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language, options.fallbackLng);\n        namespaces.forEach(function (ns) {\n          if (_this4.isValidLookup(found)) return;\n          usedNS = ns;\n          if (!checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] && _this4.utils && _this4.utils.hasLoadedNamespace && !_this4.utils.hasLoadedNamespace(usedNS)) {\n            checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] = true;\n            _this4.logger.warn(\"key \\\"\".concat(usedKey, \"\\\" for languages \\\"\").concat(codes.join(', '), \"\\\" won't get resolved as namespace \\\"\").concat(usedNS, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n          }\n          codes.forEach(function (code) {\n            if (_this4.isValidLookup(found)) return;\n            usedLng = code;\n            var finalKeys = [key];\n            if (_this4.i18nFormat && _this4.i18nFormat.addLookupKeys) {\n              _this4.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n            } else {\n              var pluralSuffix;\n              if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count, options);\n              var zeroSuffix = \"\".concat(_this4.options.pluralSeparator, \"zero\");\n              if (needsPluralHandling) {\n                finalKeys.push(key + pluralSuffix);\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(key + zeroSuffix);\n                }\n              }\n              if (needsContextHandling) {\n                var contextKey = \"\".concat(key).concat(_this4.options.contextSeparator).concat(options.context);\n                finalKeys.push(contextKey);\n                if (needsPluralHandling) {\n                  finalKeys.push(contextKey + pluralSuffix);\n                  if (needsZeroSuffixLookup) {\n                    finalKeys.push(contextKey + zeroSuffix);\n                  }\n                }\n              }\n            }\n            var possibleKey;\n            while (possibleKey = finalKeys.pop()) {\n              if (!_this4.isValidLookup(found)) {\n                exactUsedKey = possibleKey;\n                found = _this4.getResource(code, ns, possibleKey, options);\n              }\n            }\n          });\n        });\n      });\n      return {\n        res: found,\n        usedKey: usedKey,\n        exactUsedKey: exactUsedKey,\n        usedLng: usedLng,\n        usedNS: usedNS\n      };\n    }\n  }, {\n    key: \"isValidLookup\",\n    value: function isValidLookup(res) {\n      return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(code, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n      return this.resourceStore.getResource(code, ns, key, options);\n    }\n  }], [{\n    key: \"hasDefaultValue\",\n    value: function hasDefaultValue(options) {\n      var prefix = 'defaultValue';\n      for (var option in options) {\n        if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }]);\n  return Translator;\n}(EventEmitter);\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\nvar LanguageUtil = function () {\n  function LanguageUtil(options) {\n    _classCallCheck(this, LanguageUtil);\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n  _createClass(LanguageUtil, [{\n    key: \"getScriptPartFromCode\",\n    value: function getScriptPartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return null;\n      var p = code.split('-');\n      if (p.length === 2) return null;\n      p.pop();\n      if (p[p.length - 1].toLowerCase() === 'x') return null;\n      return this.formatLanguageCode(p.join('-'));\n    }\n  }, {\n    key: \"getLanguagePartFromCode\",\n    value: function getLanguagePartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return code;\n      var p = code.split('-');\n      return this.formatLanguageCode(p[0]);\n    }\n  }, {\n    key: \"formatLanguageCode\",\n    value: function formatLanguageCode(code) {\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n        var p = code.split('-');\n        if (this.options.lowerCaseLng) {\n          p = p.map(function (part) {\n            return part.toLowerCase();\n          });\n        } else if (p.length === 2) {\n          p[0] = p[0].toLowerCase();\n          p[1] = p[1].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        } else if (p.length === 3) {\n          p[0] = p[0].toLowerCase();\n          if (p[1].length === 2) p[1] = p[1].toUpperCase();\n          if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n          if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n        }\n        return p.join('-');\n      }\n      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n    }\n  }, {\n    key: \"isSupportedCode\",\n    value: function isSupportedCode(code) {\n      if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n        code = this.getLanguagePartFromCode(code);\n      }\n      return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n    }\n  }, {\n    key: \"getBestMatchFromCodes\",\n    value: function getBestMatchFromCodes(codes) {\n      var _this = this;\n      if (!codes) return null;\n      var found;\n      codes.forEach(function (code) {\n        if (found) return;\n        var cleanedLng = _this.formatLanguageCode(code);\n        if (!_this.options.supportedLngs || _this.isSupportedCode(cleanedLng)) found = cleanedLng;\n      });\n      if (!found && this.options.supportedLngs) {\n        codes.forEach(function (code) {\n          if (found) return;\n          var lngOnly = _this.getLanguagePartFromCode(code);\n          if (_this.isSupportedCode(lngOnly)) return found = lngOnly;\n          found = _this.options.supportedLngs.find(function (supportedLng) {\n            if (supportedLng === lngOnly) return supportedLng;\n            if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;\n            if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n          });\n        });\n      }\n      if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n      return found;\n    }\n  }, {\n    key: \"getFallbackCodes\",\n    value: function getFallbackCodes(fallbacks, code) {\n      if (!fallbacks) return [];\n      if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n      if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n      if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n      if (!code) return fallbacks[\"default\"] || [];\n      var found = fallbacks[code];\n      if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n      if (!found) found = fallbacks[this.formatLanguageCode(code)];\n      if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n      if (!found) found = fallbacks[\"default\"];\n      return found || [];\n    }\n  }, {\n    key: \"toResolveHierarchy\",\n    value: function toResolveHierarchy(code, fallbackCode) {\n      var _this2 = this;\n      var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n      var codes = [];\n      var addCode = function addCode(c) {\n        if (!c) return;\n        if (_this2.isSupportedCode(c)) {\n          codes.push(c);\n        } else {\n          _this2.logger.warn(\"rejecting language code not found in supportedLngs: \".concat(c));\n        }\n      };\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n        if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n        if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n      } else if (typeof code === 'string') {\n        addCode(this.formatLanguageCode(code));\n      }\n      fallbackCodes.forEach(function (fc) {\n        if (codes.indexOf(fc) < 0) addCode(_this2.formatLanguageCode(fc));\n      });\n      return codes;\n    }\n  }]);\n  return LanguageUtil;\n}();\n\nvar sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nvar _rulesPluralsTypes = {\n  1: function _(n) {\n    return Number(n > 1);\n  },\n  2: function _(n) {\n    return Number(n != 1);\n  },\n  3: function _(n) {\n    return 0;\n  },\n  4: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function _(n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function _(n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function _(n) {\n    return Number(n >= 2);\n  },\n  10: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function _(n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function _(n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function _(n) {\n    return Number(n !== 0);\n  },\n  14: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function _(n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function _(n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\nvar deprecatedJsonVersions = ['v1', 'v2', 'v3'];\nvar suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\nfunction createRules() {\n  var rules = {};\n  sets.forEach(function (set) {\n    set.lngs.forEach(function (l) {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\nvar PluralResolver = function () {\n  function PluralResolver(languageUtils) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, PluralResolver);\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    if ((!this.options.compatibilityJSON || this.options.compatibilityJSON === 'v4') && (typeof Intl === 'undefined' || !Intl.PluralRules)) {\n      this.options.compatibilityJSON = 'v3';\n      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');\n    }\n    this.rules = createRules();\n  }\n  _createClass(PluralResolver, [{\n    key: \"addRule\",\n    value: function addRule(lng, obj) {\n      this.rules[lng] = obj;\n    }\n  }, {\n    key: \"getRule\",\n    value: function getRule(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (this.shouldUseIntlApi()) {\n        try {\n          return new Intl.PluralRules(code, {\n            type: options.ordinal ? 'ordinal' : 'cardinal'\n          });\n        } catch (_unused) {\n          return;\n        }\n      }\n      return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n    }\n  }, {\n    key: \"needsPlural\",\n    value: function needsPlural(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n      if (this.shouldUseIntlApi()) {\n        return rule && rule.resolvedOptions().pluralCategories.length > 1;\n      }\n      return rule && rule.numbers.length > 1;\n    }\n  }, {\n    key: \"getPluralFormsOfKey\",\n    value: function getPluralFormsOfKey(code, key) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.getSuffixes(code, options).map(function (suffix) {\n        return \"\".concat(key).concat(suffix);\n      });\n    }\n  }, {\n    key: \"getSuffixes\",\n    value: function getSuffixes(code) {\n      var _this = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n      if (!rule) {\n        return [];\n      }\n      if (this.shouldUseIntlApi()) {\n        return rule.resolvedOptions().pluralCategories.sort(function (pluralCategory1, pluralCategory2) {\n          return suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2];\n        }).map(function (pluralCategory) {\n          return \"\".concat(_this.options.prepend).concat(pluralCategory);\n        });\n      }\n      return rule.numbers.map(function (number) {\n        return _this.getSuffix(code, number, options);\n      });\n    }\n  }, {\n    key: \"getSuffix\",\n    value: function getSuffix(code, count) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var rule = this.getRule(code, options);\n      if (rule) {\n        if (this.shouldUseIntlApi()) {\n          return \"\".concat(this.options.prepend).concat(rule.select(count));\n        }\n        return this.getSuffixRetroCompatible(rule, count);\n      }\n      this.logger.warn(\"no plural rule found for: \".concat(code));\n      return '';\n    }\n  }, {\n    key: \"getSuffixRetroCompatible\",\n    value: function getSuffixRetroCompatible(rule, count) {\n      var _this2 = this;\n      var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n      var suffix = rule.numbers[idx];\n      if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        if (suffix === 2) {\n          suffix = 'plural';\n        } else if (suffix === 1) {\n          suffix = '';\n        }\n      }\n      var returnSuffix = function returnSuffix() {\n        return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();\n      };\n      if (this.options.compatibilityJSON === 'v1') {\n        if (suffix === 1) return '';\n        if (typeof suffix === 'number') return \"_plural_\".concat(suffix.toString());\n        return returnSuffix();\n      } else if (this.options.compatibilityJSON === 'v2') {\n        return returnSuffix();\n      } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        return returnSuffix();\n      }\n      return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n    }\n  }, {\n    key: \"shouldUseIntlApi\",\n    value: function shouldUseIntlApi() {\n      return !deprecatedJsonVersions.includes(this.options.compatibilityJSON);\n    }\n  }]);\n  return PluralResolver;\n}();\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$3(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction deepFindWithDefaults(data, defaultData, key) {\n  var keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';\n  var ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  var path = getPathWithDefaults(data, defaultData, key);\n  if (!path && ignoreJSONStructure && typeof key === 'string') {\n    path = deepFind(data, key, keySeparator);\n    if (path === undefined) path = deepFind(defaultData, key, keySeparator);\n  }\n  return path;\n}\nvar Interpolator = function () {\n  function Interpolator() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Interpolator);\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n    this.format = options.interpolation && options.interpolation.format || function (value) {\n      return value;\n    };\n    this.init(options);\n  }\n  _createClass(Interpolator, [{\n    key: \"init\",\n    value: function init() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!options.interpolation) options.interpolation = {\n        escapeValue: true\n      };\n      var iOpts = options.interpolation;\n      this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n      this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n      this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n      this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n      this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n      this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n      this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n      this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n      this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n      this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n      this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n      this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n      this.resetRegExp();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.options) this.init(this.options);\n    }\n  }, {\n    key: \"resetRegExp\",\n    value: function resetRegExp() {\n      var regexpStr = \"\".concat(this.prefix, \"(.+?)\").concat(this.suffix);\n      this.regexp = new RegExp(regexpStr, 'g');\n      var regexpUnescapeStr = \"\".concat(this.prefix).concat(this.unescapePrefix, \"(.+?)\").concat(this.unescapeSuffix).concat(this.suffix);\n      this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n      var nestingRegexpStr = \"\".concat(this.nestingPrefix, \"(.+?)\").concat(this.nestingSuffix);\n      this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(str, data, lng, options) {\n      var _this = this;\n      var match;\n      var value;\n      var replaces;\n      var defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n      function regexSafe(val) {\n        return val.replace(/\\$/g, '$$$$');\n      }\n      var handleFormat = function handleFormat(key) {\n        if (key.indexOf(_this.formatSeparator) < 0) {\n          var path = deepFindWithDefaults(data, defaultData, key, _this.options.keySeparator, _this.options.ignoreJSONStructure);\n          return _this.alwaysFormat ? _this.format(path, undefined, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n            interpolationkey: key\n          })) : path;\n        }\n        var p = key.split(_this.formatSeparator);\n        var k = p.shift().trim();\n        var f = p.join(_this.formatSeparator).trim();\n        return _this.format(deepFindWithDefaults(data, defaultData, k, _this.options.keySeparator, _this.options.ignoreJSONStructure), f, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n          interpolationkey: k\n        }));\n      };\n      this.resetRegExp();\n      var missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n      var skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n      var todos = [{\n        regex: this.regexpUnescape,\n        safeValue: function safeValue(val) {\n          return regexSafe(val);\n        }\n      }, {\n        regex: this.regexp,\n        safeValue: function safeValue(val) {\n          return _this.escapeValue ? regexSafe(_this.escape(val)) : regexSafe(val);\n        }\n      }];\n      todos.forEach(function (todo) {\n        replaces = 0;\n        while (match = todo.regex.exec(str)) {\n          var matchedVar = match[1].trim();\n          value = handleFormat(matchedVar);\n          if (value === undefined) {\n            if (typeof missingInterpolationHandler === 'function') {\n              var temp = missingInterpolationHandler(str, match, options);\n              value = typeof temp === 'string' ? temp : '';\n            } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {\n              value = '';\n            } else if (skipOnVariables) {\n              value = match[0];\n              continue;\n            } else {\n              _this.logger.warn(\"missed to pass in variable \".concat(matchedVar, \" for interpolating \").concat(str));\n              value = '';\n            }\n          } else if (typeof value !== 'string' && !_this.useRawValueToEscape) {\n            value = makeString(value);\n          }\n          var safeValue = todo.safeValue(value);\n          str = str.replace(match[0], safeValue);\n          if (skipOnVariables) {\n            todo.regex.lastIndex += value.length;\n            todo.regex.lastIndex -= match[0].length;\n          } else {\n            todo.regex.lastIndex = 0;\n          }\n          replaces++;\n          if (replaces >= _this.maxReplaces) {\n            break;\n          }\n        }\n      });\n      return str;\n    }\n  }, {\n    key: \"nest\",\n    value: function nest(str, fc) {\n      var _this2 = this;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var match;\n      var value;\n      var clonedOptions;\n      function handleHasOptions(key, inheritedOptions) {\n        var sep = this.nestingOptionsSeparator;\n        if (key.indexOf(sep) < 0) return key;\n        var c = key.split(new RegExp(\"\".concat(sep, \"[ ]*{\")));\n        var optionsString = \"{\".concat(c[1]);\n        key = c[0];\n        optionsString = this.interpolate(optionsString, clonedOptions);\n        var matchedSingleQuotes = optionsString.match(/'/g);\n        var matchedDoubleQuotes = optionsString.match(/\"/g);\n        if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {\n          optionsString = optionsString.replace(/'/g, '\"');\n        }\n        try {\n          clonedOptions = JSON.parse(optionsString);\n          if (inheritedOptions) clonedOptions = _objectSpread$3(_objectSpread$3({}, inheritedOptions), clonedOptions);\n        } catch (e) {\n          this.logger.warn(\"failed parsing options string in nesting for key \".concat(key), e);\n          return \"\".concat(key).concat(sep).concat(optionsString);\n        }\n        delete clonedOptions.defaultValue;\n        return key;\n      }\n      while (match = this.nestingRegexp.exec(str)) {\n        var formatters = [];\n        clonedOptions = _objectSpread$3({}, options);\n        clonedOptions = clonedOptions.replace && typeof clonedOptions.replace !== 'string' ? clonedOptions.replace : clonedOptions;\n        clonedOptions.applyPostProcessor = false;\n        delete clonedOptions.defaultValue;\n        var doReduce = false;\n        if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n          var r = match[1].split(this.formatSeparator).map(function (elem) {\n            return elem.trim();\n          });\n          match[1] = r.shift();\n          formatters = r;\n          doReduce = true;\n        }\n        value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n        if (value && match[0] === str && typeof value !== 'string') return value;\n        if (typeof value !== 'string') value = makeString(value);\n        if (!value) {\n          this.logger.warn(\"missed to resolve \".concat(match[1], \" for nesting \").concat(str));\n          value = '';\n        }\n        if (doReduce) {\n          value = formatters.reduce(function (v, f) {\n            return _this2.format(v, f, options.lng, _objectSpread$3(_objectSpread$3({}, options), {}, {\n              interpolationkey: match[1].trim()\n            }));\n          }, value.trim());\n        }\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n      }\n      return str;\n    }\n  }]);\n  return Interpolator;\n}();\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction parseFormatStr(formatStr) {\n  var formatName = formatStr.toLowerCase().trim();\n  var formatOptions = {};\n  if (formatStr.indexOf('(') > -1) {\n    var p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    var optStr = p[1].substring(0, p[1].length - 1);\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      var opts = optStr.split(';');\n      opts.forEach(function (opt) {\n        if (!opt) return;\n        var _opt$split = opt.split(':'),\n          _opt$split2 = _toArray(_opt$split),\n          key = _opt$split2[0],\n          rest = _opt$split2.slice(1);\n        var val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n        if (!formatOptions[key.trim()]) formatOptions[key.trim()] = val;\n        if (val === 'false') formatOptions[key.trim()] = false;\n        if (val === 'true') formatOptions[key.trim()] = true;\n        if (!isNaN(val)) formatOptions[key.trim()] = parseInt(val, 10);\n      });\n    }\n  }\n  return {\n    formatName: formatName,\n    formatOptions: formatOptions\n  };\n}\nfunction createCachedFormatter(fn) {\n  var cache = {};\n  return function invokeFormatter(val, lng, options) {\n    var key = lng + JSON.stringify(options);\n    var formatter = cache[key];\n    if (!formatter) {\n      formatter = fn(lng, options);\n      cache[key] = formatter;\n    }\n    return formatter(val);\n  };\n}\nvar Formatter = function () {\n  function Formatter() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Formatter);\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.NumberFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      currency: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.NumberFormat(lng, _objectSpread$2(_objectSpread$2({}, opt), {}, {\n          style: 'currency'\n        }));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      datetime: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.DateTimeFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      relativetime: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.RelativeTimeFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val, opt.range || 'day');\n        };\n      }),\n      list: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.ListFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val);\n        };\n      })\n    };\n    this.init(options);\n  }\n  _createClass(Formatter, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      var iOpts = options.interpolation;\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n    }\n  }, {\n    key: \"add\",\n    value: function add(name, fc) {\n      this.formats[name.toLowerCase().trim()] = fc;\n    }\n  }, {\n    key: \"addCached\",\n    value: function addCached(name, fc) {\n      this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);\n    }\n  }, {\n    key: \"format\",\n    value: function format(value, _format, lng) {\n      var _this = this;\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var formats = _format.split(this.formatSeparator);\n      var result = formats.reduce(function (mem, f) {\n        var _parseFormatStr = parseFormatStr(f),\n          formatName = _parseFormatStr.formatName,\n          formatOptions = _parseFormatStr.formatOptions;\n        if (_this.formats[formatName]) {\n          var formatted = mem;\n          try {\n            var valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};\n            var l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n            formatted = _this.formats[formatName](mem, l, _objectSpread$2(_objectSpread$2(_objectSpread$2({}, formatOptions), options), valOptions));\n          } catch (error) {\n            _this.logger.warn(error);\n          }\n          return formatted;\n        } else {\n          _this.logger.warn(\"there was no format function for \".concat(formatName));\n        }\n        return mem;\n      }, value);\n      return result;\n    }\n  }]);\n  return Formatter;\n}();\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction removePending(q, name) {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n}\nvar Connector = function (_EventEmitter) {\n  _inherits(Connector, _EventEmitter);\n  var _super = _createSuper$1(Connector);\n  function Connector(backend, store, services) {\n    var _this;\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    _classCallCheck(this, Connector);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    _this.backend = backend;\n    _this.store = store;\n    _this.services = services;\n    _this.languageUtils = services.languageUtils;\n    _this.options = options;\n    _this.logger = baseLogger.create('backendConnector');\n    _this.waitingReads = [];\n    _this.maxParallelReads = options.maxParallelReads || 10;\n    _this.readingCalls = 0;\n    _this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    _this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n    _this.state = {};\n    _this.queue = [];\n    if (_this.backend && _this.backend.init) {\n      _this.backend.init(services, options.backend, options);\n    }\n    return _this;\n  }\n  _createClass(Connector, [{\n    key: \"queueLoad\",\n    value: function queueLoad(languages, namespaces, options, callback) {\n      var _this2 = this;\n      var toLoad = {};\n      var pending = {};\n      var toLoadLanguages = {};\n      var toLoadNamespaces = {};\n      languages.forEach(function (lng) {\n        var hasAllNamespaces = true;\n        namespaces.forEach(function (ns) {\n          var name = \"\".concat(lng, \"|\").concat(ns);\n          if (!options.reload && _this2.store.hasResourceBundle(lng, ns)) {\n            _this2.state[name] = 2;\n          } else if (_this2.state[name] < 0) ; else if (_this2.state[name] === 1) {\n            if (pending[name] === undefined) pending[name] = true;\n          } else {\n            _this2.state[name] = 1;\n            hasAllNamespaces = false;\n            if (pending[name] === undefined) pending[name] = true;\n            if (toLoad[name] === undefined) toLoad[name] = true;\n            if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n          }\n        });\n        if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n      });\n      if (Object.keys(toLoad).length || Object.keys(pending).length) {\n        this.queue.push({\n          pending: pending,\n          pendingCount: Object.keys(pending).length,\n          loaded: {},\n          errors: [],\n          callback: callback\n        });\n      }\n      return {\n        toLoad: Object.keys(toLoad),\n        pending: Object.keys(pending),\n        toLoadLanguages: Object.keys(toLoadLanguages),\n        toLoadNamespaces: Object.keys(toLoadNamespaces)\n      };\n    }\n  }, {\n    key: \"loaded\",\n    value: function loaded(name, err, data) {\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      if (err) this.emit('failedLoading', lng, ns, err);\n      if (data) {\n        this.store.addResourceBundle(lng, ns, data);\n      }\n      this.state[name] = err ? -1 : 2;\n      var loaded = {};\n      this.queue.forEach(function (q) {\n        pushPath(q.loaded, [lng], ns);\n        removePending(q, name);\n        if (err) q.errors.push(err);\n        if (q.pendingCount === 0 && !q.done) {\n          Object.keys(q.loaded).forEach(function (l) {\n            if (!loaded[l]) loaded[l] = {};\n            var loadedKeys = q.loaded[l];\n            if (loadedKeys.length) {\n              loadedKeys.forEach(function (n) {\n                if (loaded[l][n] === undefined) loaded[l][n] = true;\n              });\n            }\n          });\n          q.done = true;\n          if (q.errors.length) {\n            q.callback(q.errors);\n          } else {\n            q.callback();\n          }\n        }\n      });\n      this.emit('loaded', loaded);\n      this.queue = this.queue.filter(function (q) {\n        return !q.done;\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(lng, ns, fcName) {\n      var _this3 = this;\n      var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;\n      var callback = arguments.length > 5 ? arguments[5] : undefined;\n      if (!lng.length) return callback(null, {});\n      if (this.readingCalls >= this.maxParallelReads) {\n        this.waitingReads.push({\n          lng: lng,\n          ns: ns,\n          fcName: fcName,\n          tried: tried,\n          wait: wait,\n          callback: callback\n        });\n        return;\n      }\n      this.readingCalls++;\n      var resolver = function resolver(err, data) {\n        _this3.readingCalls--;\n        if (_this3.waitingReads.length > 0) {\n          var next = _this3.waitingReads.shift();\n          _this3.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n        }\n        if (err && data && tried < _this3.maxRetries) {\n          setTimeout(function () {\n            _this3.read.call(_this3, lng, ns, fcName, tried + 1, wait * 2, callback);\n          }, wait);\n          return;\n        }\n        callback(err, data);\n      };\n      var fc = this.backend[fcName].bind(this.backend);\n      if (fc.length === 2) {\n        try {\n          var r = fc(lng, ns);\n          if (r && typeof r.then === 'function') {\n            r.then(function (data) {\n              return resolver(null, data);\n            })[\"catch\"](resolver);\n          } else {\n            resolver(null, r);\n          }\n        } catch (err) {\n          resolver(err);\n        }\n        return;\n      }\n      return fc(lng, ns, resolver);\n    }\n  }, {\n    key: \"prepareLoading\",\n    value: function prepareLoading(languages, namespaces) {\n      var _this4 = this;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n      if (!this.backend) {\n        this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n        return callback && callback();\n      }\n      if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      var toLoad = this.queueLoad(languages, namespaces, options, callback);\n      if (!toLoad.toLoad.length) {\n        if (!toLoad.pending.length) callback();\n        return null;\n      }\n      toLoad.toLoad.forEach(function (name) {\n        _this4.loadOne(name);\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {}, callback);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {\n        reload: true\n      }, callback);\n    }\n  }, {\n    key: \"loadOne\",\n    value: function loadOne(name) {\n      var _this5 = this;\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      this.read(lng, ns, 'read', undefined, undefined, function (err, data) {\n        if (err) _this5.logger.warn(\"\".concat(prefix, \"loading namespace \").concat(ns, \" for language \").concat(lng, \" failed\"), err);\n        if (!err && data) _this5.logger.log(\"\".concat(prefix, \"loaded namespace \").concat(ns, \" for language \").concat(lng), data);\n        _this5.loaded(name, err, data);\n      });\n    }\n  }, {\n    key: \"saveMissing\",\n    value: function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n      var clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : function () {};\n      if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n        this.logger.warn(\"did not save key \\\"\".concat(key, \"\\\" as the namespace \\\"\").concat(namespace, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        return;\n      }\n      if (key === undefined || key === null || key === '') return;\n      if (this.backend && this.backend.create) {\n        var opts = _objectSpread$1(_objectSpread$1({}, options), {}, {\n          isUpdate: isUpdate\n        });\n        var fc = this.backend.create.bind(this.backend);\n        if (fc.length < 6) {\n          try {\n            var r;\n            if (fc.length === 5) {\n              r = fc(languages, namespace, key, fallbackValue, opts);\n            } else {\n              r = fc(languages, namespace, key, fallbackValue);\n            }\n            if (r && typeof r.then === 'function') {\n              r.then(function (data) {\n                return clb(null, data);\n              })[\"catch\"](clb);\n            } else {\n              clb(null, r);\n            }\n          } catch (err) {\n            clb(err);\n          }\n        } else {\n          fc(languages, namespace, key, fallbackValue, clb, opts);\n        }\n      }\n      if (!languages || !languages[0]) return;\n      this.store.addResource(languages[0], namespace, key, fallbackValue);\n    }\n  }]);\n  return Connector;\n}(EventEmitter);\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: true,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (_typeof(args[1]) === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n      if (_typeof(args[2]) === 'object' || _typeof(args[3]) === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: function format(value, _format, lng, options) {\n        return value;\n      },\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000,\n      skipOnVariables: true\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n  return options;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction noop() {}\nfunction bindMemberFunctions(inst) {\n  var mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(function (mem) {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n}\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n  var _super = _createSuper(I18n);\n  function I18n() {\n    var _this;\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n    _classCallCheck(this, I18n);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n    bindMemberFunctions(_assertThisInitialized(_this));\n    if (callback && !_this.isInitialized && !options.isClone) {\n      if (!_this.options.initImmediate) {\n        _this.init(options, callback);\n        return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n      }\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n    return _this;\n  }\n  _createClass(I18n, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n      if (!options.defaultNS && options.defaultNS !== false && options.ns) {\n        if (typeof options.ns === 'string') {\n          options.defaultNS = options.ns;\n        } else if (options.ns.indexOf('translation') < 0) {\n          options.defaultNS = options.ns[0];\n        }\n      }\n      var defOpts = get();\n      this.options = _objectSpread(_objectSpread(_objectSpread({}, defOpts), this.options), transformOptions(options));\n      if (this.options.compatibilityAPI !== 'v1') {\n        this.options.interpolation = _objectSpread(_objectSpread({}, defOpts.interpolation), this.options.interpolation);\n      }\n      if (options.keySeparator !== undefined) {\n        this.options.userDefinedKeySeparator = options.keySeparator;\n      }\n      if (options.nsSeparator !== undefined) {\n        this.options.userDefinedNsSeparator = options.nsSeparator;\n      }\n      function createClassOnDemand(ClassOrObject) {\n        if (!ClassOrObject) return null;\n        if (typeof ClassOrObject === 'function') return new ClassOrObject();\n        return ClassOrObject;\n      }\n      if (!this.options.isClone) {\n        if (this.modules.logger) {\n          baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n        } else {\n          baseLogger.init(null, this.options);\n        }\n        var formatter;\n        if (this.modules.formatter) {\n          formatter = this.modules.formatter;\n        } else if (typeof Intl !== 'undefined') {\n          formatter = Formatter;\n        }\n        var lu = new LanguageUtil(this.options);\n        this.store = new ResourceStore(this.options.resources, this.options);\n        var s = this.services;\n        s.logger = baseLogger;\n        s.resourceStore = this.store;\n        s.languageUtils = lu;\n        s.pluralResolver = new PluralResolver(lu, {\n          prepend: this.options.pluralSeparator,\n          compatibilityJSON: this.options.compatibilityJSON,\n          simplifyPluralSuffix: this.options.simplifyPluralSuffix\n        });\n        if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n          s.formatter = createClassOnDemand(formatter);\n          s.formatter.init(s, this.options);\n          this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n        }\n        s.interpolator = new Interpolator(this.options);\n        s.utils = {\n          hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n        };\n        s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n        s.backendConnector.on('*', function (event) {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        if (this.modules.languageDetector) {\n          s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n          if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);\n        }\n        if (this.modules.i18nFormat) {\n          s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n          if (s.i18nFormat.init) s.i18nFormat.init(this);\n        }\n        this.translator = new Translator(this.services, this.options);\n        this.translator.on('*', function (event) {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        this.modules.external.forEach(function (m) {\n          if (m.init) m.init(_this2);\n        });\n      }\n      this.format = this.options.interpolation.format;\n      if (!callback) callback = noop;\n      if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n        var codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n      }\n      if (!this.services.languageDetector && !this.options.lng) {\n        this.logger.warn('init: no languageDetector is used and no lng is defined');\n      }\n      var storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n      storeApi.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store;\n          return (_this2$store = _this2.store)[fcName].apply(_this2$store, arguments);\n        };\n      });\n      var storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n      storeApiChained.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store2;\n          (_this2$store2 = _this2.store)[fcName].apply(_this2$store2, arguments);\n          return _this2;\n        };\n      });\n      var deferred = defer();\n      var load = function load() {\n        var finish = function finish(err, t) {\n          if (_this2.isInitialized && !_this2.initializedStoreOnce) _this2.logger.warn('init: i18next is already initialized. You should call init just once!');\n          _this2.isInitialized = true;\n          if (!_this2.options.isClone) _this2.logger.log('initialized', _this2.options);\n          _this2.emit('initialized', _this2.options);\n          deferred.resolve(t);\n          callback(err, t);\n        };\n        if (_this2.languages && _this2.options.compatibilityAPI !== 'v1' && !_this2.isInitialized) return finish(null, _this2.t.bind(_this2));\n        _this2.changeLanguage(_this2.options.lng, finish);\n      };\n      if (this.options.resources || !this.options.initImmediate) {\n        load();\n      } else {\n        setTimeout(load, 0);\n      }\n      return deferred;\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(language) {\n      var _this3 = this;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var usedCallback = callback;\n      var usedLng = typeof language === 'string' ? language : this.language;\n      if (typeof language === 'function') usedCallback = language;\n      if (!this.options.resources || this.options.partialBundledLanguages) {\n        if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback();\n        var toLoad = [];\n        var append = function append(lng) {\n          if (!lng) return;\n          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n          lngs.forEach(function (l) {\n            if (toLoad.indexOf(l) < 0) toLoad.push(l);\n          });\n        };\n        if (!usedLng) {\n          var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n          fallbacks.forEach(function (l) {\n            return append(l);\n          });\n        } else {\n          append(usedLng);\n        }\n        if (this.options.preload) {\n          this.options.preload.forEach(function (l) {\n            return append(l);\n          });\n        }\n        this.services.backendConnector.load(toLoad, this.options.ns, function (e) {\n          if (!e && !_this3.resolvedLanguage && _this3.language) _this3.setResolvedLanguage(_this3.language);\n          usedCallback(e);\n        });\n      } else {\n        usedCallback(null);\n      }\n    }\n  }, {\n    key: \"reloadResources\",\n    value: function reloadResources(lngs, ns, callback) {\n      var deferred = defer();\n      if (!lngs) lngs = this.languages;\n      if (!ns) ns = this.options.ns;\n      if (!callback) callback = noop;\n      this.services.backendConnector.reload(lngs, ns, function (err) {\n        deferred.resolve();\n        callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"use\",\n    value: function use(module) {\n      if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n      if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n      if (module.type === 'backend') {\n        this.modules.backend = module;\n      }\n      if (module.type === 'logger' || module.log && module.warn && module.error) {\n        this.modules.logger = module;\n      }\n      if (module.type === 'languageDetector') {\n        this.modules.languageDetector = module;\n      }\n      if (module.type === 'i18nFormat') {\n        this.modules.i18nFormat = module;\n      }\n      if (module.type === 'postProcessor') {\n        postProcessor.addPostProcessor(module);\n      }\n      if (module.type === 'formatter') {\n        this.modules.formatter = module;\n      }\n      if (module.type === '3rdParty') {\n        this.modules.external.push(module);\n      }\n      return this;\n    }\n  }, {\n    key: \"setResolvedLanguage\",\n    value: function setResolvedLanguage(l) {\n      if (!l || !this.languages) return;\n      if (['cimode', 'dev'].indexOf(l) > -1) return;\n      for (var li = 0; li < this.languages.length; li++) {\n        var lngInLngs = this.languages[li];\n        if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n        if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n          this.resolvedLanguage = lngInLngs;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng, callback) {\n      var _this4 = this;\n      this.isLanguageChangingTo = lng;\n      var deferred = defer();\n      this.emit('languageChanging', lng);\n      var setLngProps = function setLngProps(l) {\n        _this4.language = l;\n        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n        _this4.resolvedLanguage = undefined;\n        _this4.setResolvedLanguage(l);\n      };\n      var done = function done(err, l) {\n        if (l) {\n          setLngProps(l);\n          _this4.translator.changeLanguage(l);\n          _this4.isLanguageChangingTo = undefined;\n          _this4.emit('languageChanged', l);\n          _this4.logger.log('languageChanged', l);\n        } else {\n          _this4.isLanguageChangingTo = undefined;\n        }\n        deferred.resolve(function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n        if (callback) callback(err, function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n      };\n      var setLng = function setLng(lngs) {\n        if (!lng && !lngs && _this4.services.languageDetector) lngs = [];\n        var l = typeof lngs === 'string' ? lngs : _this4.services.languageUtils.getBestMatchFromCodes(lngs);\n        if (l) {\n          if (!_this4.language) {\n            setLngProps(l);\n          }\n          if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n          if (_this4.services.languageDetector && _this4.services.languageDetector.cacheUserLanguage) _this4.services.languageDetector.cacheUserLanguage(l);\n        }\n        _this4.loadResources(l, function (err) {\n          done(err, l);\n        });\n      };\n      if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n        setLng(this.services.languageDetector.detect());\n      } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n        if (this.services.languageDetector.detect.length === 0) {\n          this.services.languageDetector.detect().then(setLng);\n        } else {\n          this.services.languageDetector.detect(setLng);\n        }\n      } else {\n        setLng(lng);\n      }\n      return deferred;\n    }\n  }, {\n    key: \"getFixedT\",\n    value: function getFixedT(lng, ns, keyPrefix) {\n      var _this5 = this;\n      var fixedT = function fixedT(key, opts) {\n        var options;\n        if (_typeof(opts) !== 'object') {\n          for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            rest[_key3 - 2] = arguments[_key3];\n          }\n          options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n        } else {\n          options = _objectSpread({}, opts);\n        }\n        options.lng = options.lng || fixedT.lng;\n        options.lngs = options.lngs || fixedT.lngs;\n        options.ns = options.ns || fixedT.ns;\n        options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;\n        var keySeparator = _this5.options.keySeparator || '.';\n        var resultKey;\n        if (options.keyPrefix && Array.isArray(key)) {\n          resultKey = key.map(function (k) {\n            return \"\".concat(options.keyPrefix).concat(keySeparator).concat(k);\n          });\n        } else {\n          resultKey = options.keyPrefix ? \"\".concat(options.keyPrefix).concat(keySeparator).concat(key) : key;\n        }\n        return _this5.t(resultKey, options);\n      };\n      if (typeof lng === 'string') {\n        fixedT.lng = lng;\n      } else {\n        fixedT.lngs = lng;\n      }\n      fixedT.ns = ns;\n      fixedT.keyPrefix = keyPrefix;\n      return fixedT;\n    }\n  }, {\n    key: \"t\",\n    value: function t() {\n      var _this$translator;\n      return this.translator && (_this$translator = this.translator).translate.apply(_this$translator, arguments);\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      var _this$translator2;\n      return this.translator && (_this$translator2 = this.translator).exists.apply(_this$translator2, arguments);\n    }\n  }, {\n    key: \"setDefaultNamespace\",\n    value: function setDefaultNamespace(ns) {\n      this.options.defaultNS = ns;\n    }\n  }, {\n    key: \"hasLoadedNamespace\",\n    value: function hasLoadedNamespace(ns) {\n      var _this6 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (!this.isInitialized) {\n        this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n        return false;\n      }\n      if (!this.languages || !this.languages.length) {\n        this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n        return false;\n      }\n      var lng = options.lng || this.resolvedLanguage || this.languages[0];\n      var fallbackLng = this.options ? this.options.fallbackLng : false;\n      var lastLng = this.languages[this.languages.length - 1];\n      if (lng.toLowerCase() === 'cimode') return true;\n      var loadNotPending = function loadNotPending(l, n) {\n        var loadState = _this6.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n        return loadState === -1 || loadState === 2;\n      };\n      if (options.precheck) {\n        var preResult = options.precheck(this, loadNotPending);\n        if (preResult !== undefined) return preResult;\n      }\n      if (this.hasResourceBundle(lng, ns)) return true;\n      if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n      if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n      return false;\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(ns, callback) {\n      var _this7 = this;\n      var deferred = defer();\n      if (!this.options.ns) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n      if (typeof ns === 'string') ns = [ns];\n      ns.forEach(function (n) {\n        if (_this7.options.ns.indexOf(n) < 0) _this7.options.ns.push(n);\n      });\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"loadLanguages\",\n    value: function loadLanguages(lngs, callback) {\n      var deferred = defer();\n      if (typeof lngs === 'string') lngs = [lngs];\n      var preloaded = this.options.preload || [];\n      var newLngs = lngs.filter(function (lng) {\n        return preloaded.indexOf(lng) < 0;\n      });\n      if (!newLngs.length) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n      this.options.preload = preloaded.concat(newLngs);\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"dir\",\n    value: function dir(lng) {\n      if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n      if (!lng) return 'rtl';\n      var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n      var languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());\n      return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n    }\n  }, {\n    key: \"cloneInstance\",\n    value: function cloneInstance() {\n      var _this8 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var mergedOptions = _objectSpread(_objectSpread(_objectSpread({}, this.options), options), {\n        isClone: true\n      });\n      var clone = new I18n(mergedOptions);\n      if (options.debug !== undefined || options.prefix !== undefined) {\n        clone.logger = clone.logger.clone(options);\n      }\n      var membersToCopy = ['store', 'services', 'language'];\n      membersToCopy.forEach(function (m) {\n        clone[m] = _this8[m];\n      });\n      clone.services = _objectSpread({}, this.services);\n      clone.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      clone.translator = new Translator(clone.services, clone.options);\n      clone.translator.on('*', function (event) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n        clone.emit.apply(clone, [event].concat(args));\n      });\n      clone.init(mergedOptions, callback);\n      clone.translator.options = clone.options;\n      clone.translator.backendConnector.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      return clone;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        options: this.options,\n        store: this.store,\n        language: this.language,\n        languages: this.languages,\n        resolvedLanguage: this.resolvedLanguage\n      };\n    }\n  }]);\n  return I18n;\n}(EventEmitter);\n_defineProperty(I18n, \"createInstance\", function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var callback = arguments.length > 1 ? arguments[1] : undefined;\n  return new I18n(options, callback);\n});\nvar instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nvar createInstance = instance.createInstance;\nvar dir = instance.dir;\nvar init = instance.init;\nvar loadResources = instance.loadResources;\nvar reloadResources = instance.reloadResources;\nvar use = instance.use;\nvar changeLanguage = instance.changeLanguage;\nvar getFixedT = instance.getFixedT;\nvar t = instance.t;\nvar exists = instance.exists;\nvar setDefaultNamespace = instance.setDefaultNamespace;\nvar hasLoadedNamespace = instance.hasLoadedNamespace;\nvar loadNamespaces = instance.loadNamespaces;\nvar loadLanguages = instance.loadLanguages;\n\nexport { changeLanguage, createInstance, instance as default, dir, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n", "import type { ExtensionLogger, LogSeverity, Location, LogMessage } from '@sap/ux-specification-types';\nimport { LogSeverityLabel } from '@sap/ux-specification-types';\n\n/**\n * Internal representation of one log entry\n */\ninterface LogEntry {\n    severity: LogSeverity;\n    message: string;\n    location?: Location;\n}\n\n/**\n * Function to create a new log entry and add it to the logger.\n * If no logger is passed, puts the message to the console\n * @param logger - the logger instance\n * @param message - the log message\n * @param meta - option list of strings/objects\n */\nexport const log = (logger: ExtensionLogger, logEntry: LogEntry, ...meta: LogMessage[]): void => {\n    if (logger) {\n        logger[logEntry.severity](logEntry.message, { location: logEntry.location, ...meta });\n    } else {\n        if (logEntry.location) {\n            if (logEntry.location.range) {\n                console.log(\n                    `${LogSeverityLabel[logEntry.severity]}: ${logEntry.message}, location: ${\n                        logEntry.location.path\n                    }, ${logEntry.location.range}`,\n                    ...meta\n                );\n            } else {\n                console.log(\n                    `${LogSeverityLabel[logEntry.severity]}: ${logEntry.message}, location: ${logEntry.location.path}`,\n                    ...meta\n                );\n            }\n        } else {\n            console.log(`${LogSeverityLabel[logEntry.severity]}: ${logEntry.message}`, ...meta);\n        }\n    }\n};\n", "import type { AnnotationTerm, ConvertedMetadata, EntityType } from '@sap-ux/vocabularies-types';\nimport type { LineItem } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport { UIAnnotationTerms, UIAnnotationTypes } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport type {\n    v2,\n    FacetConfigs,\n    FacetConfig,\n    FileData,\n    GenerateAppSchemaParameters,\n    ExtensionLogger\n} from '@sap/ux-specification-types';\nimport {\n    ActionType,\n    ArtifactType,\n    SchemaKeyName,\n    ControlType,\n    SectionType,\n    FioriElementsVersion,\n    ManifestSection,\n    FacetBase,\n    FacetTitlePrefix,\n    DefinitionName,\n    MANIFESTPATH,\n    LogSeverity,\n    PropertyName,\n    SchemaTag\n} from '@sap/ux-specification-types';\nimport type {} from '../../common';\nimport { updatePropertyIndices } from '../../common';\nimport {\n    getObjectPageFacets,\n    createDefaultSection,\n    getObjectPageFacetSection,\n    DEFINITION_LINK_PREFIX,\n    addFieldsType,\n    addDefinitionForRelatedFacetKeys,\n    addSectionTitleAndDescription,\n    handleAddressContact,\n    handleForm,\n    addPatternForBindingChangeOfEnumOP,\n    getActionNameAndId,\n    addFooterActions,\n    addHeaderActions,\n    addCommonHeaderSchema,\n    prepareRef,\n    determineEntitySetOfFacet,\n    addEnumForSingleTabVariant\n} from '../../common';\nimport { addLineItemsType, addTableColumnExtensions } from './utils';\nimport { findObjectPageV2 } from '../import';\nimport { log } from '../../../extensionLogger';\nimport i18next from 'i18next';\nimport { initI18n } from '../../../i18n/i18n';\nimport { SectionTypeV2 } from '../types';\nimport type { Definition } from 'typescript-json-schema';\n\nconst ROOT_PROPERTIES_ORDER: string[] = ['header', 'sections', 'footer'];\n\n/**\n * Adds flexChange properties for sub(sections)\n * @param appSchema - app schema in general\n * @param schemaSection - current section\n * @param property - property that will be enhanced\n * @param sectionType - type of section\n */\nfunction addFlexChangeForSection(\n    appSchema: Definition,\n    schemaSection: Definition,\n    property: string,\n    sectionType: SectionTypeV2\n) {\n    schemaSection.properties[property][SchemaTag.artifactType] = ArtifactType.FlexChange;\n    let controlType: ControlType;\n    switch (sectionType) {\n        case SectionTypeV2.Section:\n        case SectionTypeV2.SectionForm:\n        case SectionTypeV2.SectionChart:\n        case SectionTypeV2.SectionTable:\n            controlType = ControlType.Section;\n            break;\n        case SectionTypeV2.SubSection:\n            controlType = ControlType.SubSection;\n            break;\n        case SectionTypeV2.SubSectionForm:\n            controlType = ControlType.Group;\n            break;\n        case SectionTypeV2.SubSectionChart:\n            controlType = ControlType.SmartChart;\n            break;\n        case SectionTypeV2.SubSectionTable:\n            controlType = ControlType.SmartTable;\n            break;\n    }\n    if (!controlType) {\n        return;\n    }\n    addPatternForBindingChangeOfEnumOP(appSchema, schemaSection, property);\n    schemaSection.properties[property][SchemaTag.controlType] = controlType;\n}\n\n/**\n * Callback for adding a single action to headerActions of V2\n * @param {EntityType} entityType - current entity type\n * @param {object} appSchema Schema of the app\n * @param actionAnnotation - annotation as present in AVT ConvertedMetadata\n * @param headerActions - list of header actions, to be enhanced\n */\nfunction addHeaderActionCallBackV2(\n    entityType,\n    appSchema: Definition,\n    actionAnnotation: any,\n    headerActions: {\n        type: string;\n        properties: {};\n        description: string;\n        additionalProperties: boolean;\n        isViewNode: boolean;\n    },\n    oDataServiceAVT: ConvertedMetadata\n): any {\n    return (item, index) => {\n        if (!item['Determining'] && item.$Type === UIAnnotationTypes.DataFieldForAction) {\n            const { actionName, actionId, namespace } = getActionNameAndId(item, oDataServiceAVT);\n            //actionId is used as key in V2, as this is the right part for building the full stable ID\n            if (!actionId) {\n                return;\n            }\n            const description = item.Label || actionName;\n            const actionDefinitionKey = `HeaderAction<${prepareRef(actionId)}>`;\n            appSchema.definitions[actionDefinitionKey] = JSON.parse(\n                JSON.stringify(appSchema.definitions['HeaderAction'])\n            );\n            const convertedIdentification = actionAnnotation.fullyQualifiedName.replace(\n                `@${UIAnnotationTerms.Identification}`,\n                `/@${UIAnnotationTerms.Identification}`\n            );\n            appSchema.definitions[actionDefinitionKey][\n                SchemaTag.annotationPath\n            ] = `/${convertedIdentification}/${index}`;\n            (appSchema.definitions[actionDefinitionKey] as Definition)[SchemaTag.actionType] = ActionType.Annotation;\n            (appSchema.definitions[actionDefinitionKey] as Definition).description = description;\n            appSchema.definitions[actionDefinitionKey][SchemaTag.keys] = [\n                { name: SchemaKeyName.action, value: actionName }\n            ];\n            if (namespace) {\n                appSchema.definitions[actionDefinitionKey][SchemaTag.target] = namespace;\n            }\n\n            headerActions.properties[actionId] = {\n                $ref: `${DEFINITION_LINK_PREFIX}${actionDefinitionKey}`\n            };\n        }\n    };\n}\n\n/**\n * Method ensures that definitions for custom columns are created for passed entitySet.\n * @param {object} appSchema App schema in general\n * @param {object} manifest manifest.json of the app\n * @param {string} entitySetName Entity set name.\n * @param {string} entityTypeName Entity type name.\n * @param {ConvertedMetadata} oDataServiceAVT Complete service information, as returned by annotation vocabularies tool\n * @param {FacetConfig} facet information\n * @param {string} facetKey - key of the facet, as listed in FacetConfigs\n * @param {FileData[]} [fragments] Array with XML fragments.\n * @return {string} Name of custom columns definition.\n */\nfunction ensureCustomColumnDefinitionExists(\n    appSchema: Definition,\n    manifest: object,\n    entitySetName: string,\n    entityTypeName: string,\n    oDataServiceAVT: ConvertedMetadata,\n    facet: FacetConfig,\n    facetKey: string,\n    fragments?: FileData[]\n): string {\n    let suffix, customColumnsDefinitionName;\n    if (facet.ID && facet.Label) {\n        suffix = facet.ID + facet.Label.replace(/\\s+/g, '');\n    } else if (facet.ID) {\n        suffix = facet.ID;\n    } else if (facet.Label) {\n        suffix = facet.Label.replace(/\\s+/g, '');\n    }\n    if (suffix) {\n        customColumnsDefinitionName = `${DefinitionName.CustomColumns}<${entitySetName}><${facetKey}><${suffix}>`;\n    } else {\n        customColumnsDefinitionName = `${DefinitionName.CustomColumns}<${entitySetName}><${facetKey}>`;\n    }\n\n    if (appSchema.definitions[customColumnsDefinitionName]) {\n        // Definition is already created - we do not need to create it again\n        return customColumnsDefinitionName;\n    }\n    // Create type specific 'TableCustomColumn' definition - use entity set as type.\n    const customColumnDefinitionName = `${DefinitionName.CustomColumn}<${entitySetName}>`;\n    const customColumnDefinition = JSON.parse(JSON.stringify(appSchema.definitions['TableCustomColumn']));\n    appSchema.definitions[customColumnDefinitionName] = customColumnDefinition;\n    // Update definitions for type specific custom columns\n    const pageKeys = [];\n    const entityType = oDataServiceAVT?.entityTypes.find((et) => et.name === entityTypeName);\n    const v2Page = findObjectPageV2(manifest[ManifestSection.generic].pages, entitySetName, pageKeys);\n    addTableColumnExtensions(\n        appSchema,\n        entityType,\n        v2Page,\n        manifest,\n        fragments,\n        customColumnsDefinitionName,\n        customColumnDefinitionName,\n        facet.ID\n    );\n\n    return customColumnsDefinitionName;\n}\n\n/**\n * Method fills new app schema section with properties.\n * @param {Definition} appSchema App schema in general\n * @param {object} appSchemaSection app schema section to be filled\n * @param {SectionTypeV2} sectionType (sub)section type\n * @param {SectionTypeV2} mainSectionType main section type, used to fill app schema section\n */\nfunction addAppSchemaDefinition(\n    appSchema: Definition,\n    appSchemaSection: Definition,\n    sectionType: SectionTypeV2,\n    mainSectionType: SectionTypeV2\n): void {\n    appSchemaSection.properties = JSON.parse(\n        JSON.stringify((appSchema.definitions[mainSectionType] as Definition).properties)\n    );\n    if (appSchemaSection.properties.visible) {\n        addFlexChangeForSection(appSchema, appSchemaSection, 'visible', sectionType);\n    }\n}\n\n/**\n * Method adds reference to section property key.\n * @param {object} sections - schema of current sections definition\n * @param {string} key section key which will contain the reference\n * @param {string} definitionKey key which the section should point to\n */\nfunction addSectionReference(sections: Definition, key: string, definitionKey: string) {\n    sections.properties[key] = { $ref: `${DEFINITION_LINK_PREFIX}${definitionKey}` };\n}\n\n/**\n * Reuse function for all table types, copies and adapts the generic definition\n * @param tableType - Table type\n * @param facetId - facet ID, as derived for the given section\n * @param facet - facet or section information\n * @param appSchema - app-specific schema, to be updated\n */\nfunction addTableDefinition(tableType: string, facetId: string, facet: FacetConfig, appSchema: Definition): void {\n    const schemaId = prepareRef(`${tableType}<${facetId}>`);\n    appSchema.definitions[schemaId] = JSON.parse(JSON.stringify(appSchema.definitions[tableType]));\n    appSchema.definitions[schemaId]['properties']['columns']['$ref'] = DEFINITION_LINK_PREFIX + facetId;\n    (appSchema.definitions[schemaId] as Definition).properties.toolBar[\n        '$ref'\n    ] = `${DEFINITION_LINK_PREFIX}ObjectPageToolBar<${facetId}>`;\n    appSchema.definitions[schemaId][SchemaTag.annotationPath] = facet.annotationPath;\n    if (facet.ID !== undefined) {\n        (appSchema.definitions[schemaId] as Definition).title = FacetTitlePrefix + facet.ID;\n        appSchema.definitions[schemaId][SchemaTag.keys] = [{ name: `ID`, value: facet.ID }];\n    }\n    (appSchema.definitions[schemaId] as Definition).description = DefinitionName.Table;\n\n    //adjust quickVariantSelection\n    (appSchema.definitions[schemaId] as Definition).properties['quickVariantSelection'][\n        '$ref'\n    ] = `${DEFINITION_LINK_PREFIX}QuickVariantSelectionOP<${facetId}>`;\n    appSchema.definitions[`QuickVariantSelectionOP<${facetId}>`] = JSON.parse(\n        JSON.stringify(appSchema.definitions['QuickVariantSelectionOP'])\n    );\n    appSchema.definitions[`QuickVariant<${facetId}>`] = JSON.parse(\n        JSON.stringify(appSchema.definitions['QuickVariant'])\n    );\n    (\n        (appSchema.definitions[`QuickVariantSelectionOP<${facetId}>`] as Definition).properties.variants as Definition\n    ).patternProperties['^[0-9]+$']['$ref'] = `${DEFINITION_LINK_PREFIX}QuickVariant<${facetId}>`;\n\n    addEnumForSingleTabVariant(facet.entityType, appSchema, `QuickVariant<${facetId}>`);\n}\n\n/**\n * Adds definitions for line items in object page sections to the app schema\n * @param {GenerateSchemaParameters} generateParameters - list of API input parameters\n * @param {string} facetKey - key of the facet, as listed in FacetConfigs\n * @param {Definition} appSchema - app schema in general\n * @param {FacetConfig} facet - the given facet from the UI annotations\n * @param {FacetConfigs} facets - list of all facets\n * @param {SectionTypeV2} sectionType (sub)section type\n */\nfunction handleLineItem(\n    generateParameters: GenerateAppSchemaParameters,\n    facetKey: string,\n    appSchema: Definition,\n    facet: FacetConfig,\n    facets: FacetConfigs,\n    sectionType?: SectionTypeV2\n): void {\n    if (facet.base !== FacetBase.LineItem || !facetKey) {\n        //no properties\n        return;\n    }\n    const navigationProperty = facetKey.split('::')[0];\n    const schemaIdForOpSection = `${sectionType}<${facetKey}>`;\n\n    appSchema.definitions[schemaIdForOpSection] = createDefaultSection(appSchema, facet, facetKey);\n    const appSchemaSection = appSchema.definitions[schemaIdForOpSection] as Definition;\n    addAppSchemaDefinition(appSchema, appSchemaSection, sectionType, SectionTypeV2.SectionTable);\n    appSchemaSection.properties.table = JSON.parse(\n        JSON.stringify(appSchema.definitions[SectionTypeV2.SectionTable]['properties'][PropertyName.table])\n    );\n    (appSchemaSection.properties.table as Definition).anyOf = [\n        {\n            $ref: `${DEFINITION_LINK_PREFIX}ObjectPageResponsiveTableWithMultiSelect<${facetKey}>`\n        },\n        {\n            $ref: `${DEFINITION_LINK_PREFIX}ObjectPageResponsiveTableWithInlineDelete<${facetKey}>`\n        },\n        {\n            $ref: `${DEFINITION_LINK_PREFIX}ObjectPageAnalyticalTable<${facetKey}>`\n        },\n        {\n            $ref: `${DEFINITION_LINK_PREFIX}ObjectPageGridTable<${facetKey}>`\n        },\n        {\n            $ref: `${DEFINITION_LINK_PREFIX}ObjectPageTreeTable<${facetKey}>`\n        }\n    ];\n    appSchemaSection[SchemaTag.annotationPath] = facet.annotationPath;\n    addSectionTitleAndDescription(facet, appSchemaSection, facetKey);\n\n    addTableDefinition('ObjectPageResponsiveTableWithMultiSelect', facetKey, facet, appSchema);\n    addTableDefinition('ObjectPageResponsiveTableWithInlineDelete', facetKey, facet, appSchema);\n    addTableDefinition('ObjectPageGridTable', facetKey, facet, appSchema);\n    addTableDefinition('ObjectPageTreeTable', facetKey, facet, appSchema);\n    addTableDefinition('ObjectPageAnalyticalTable', facetKey, facet, appSchema);\n\n    let customColumnDefinitionKey;\n    // Find target entity\n    const targetEntitySet = determineEntitySetOfFacet(facet, generateParameters.serviceAVT);\n    if (targetEntitySet) {\n        // Make sure that custom columns definitions are created for passed entity\n        customColumnDefinitionKey = ensureCustomColumnDefinitionExists(\n            appSchema,\n            generateParameters.manifest,\n            targetEntitySet.name,\n            facet.entityType.name,\n            generateParameters.serviceAVT,\n            facet,\n            facetKey,\n            generateParameters.fragments\n        );\n    }\n    for (const facetItem in facets) {\n        if (facets[facetItem].base === FacetBase.LineItem && facetItem.includes(navigationProperty)) {\n            addLineItemsType(\n                appSchema,\n                facets[facetItem].target as AnnotationTerm<LineItem>,\n                facets[facetItem].entityType,\n                facetItem,\n                customColumnDefinitionKey\n            );\n        }\n    }\n}\n\n/**\n * Adds definitions for subsections in object page sections to the app schema\n * @param {Definition} appSchema - app schema in general\n * @param {string} definitionKey - key of app schema definition to be filled\n * @param {FacetConfig} facet facet or section information\n * @param {string} facetId - key of the facet, as listed in FacetConfigs\n * @param {SectionTypeV2} sectionType (sub)section type\n */\nfunction handleSubSection(\n    appSchema: Definition,\n    definitionKey: string,\n    facet: FacetConfig,\n    facetId: string,\n    sectionType: SectionTypeV2\n): void {\n    appSchema.definitions[definitionKey] = createDefaultSection(appSchema, facet, facetId);\n    const appSchemaSection = appSchema.definitions[definitionKey] as Definition;\n    addAppSchemaDefinition(appSchema, appSchemaSection, sectionType, SectionTypeV2.SubSection);\n    appSchemaSection.properties.subsections = {\n        type: 'object',\n        description: 'Subsections',\n        properties: {},\n        additionalProperties: false\n    };\n    appSchemaSection.properties.subsections[SchemaTag.isViewNode] = true;\n}\n\n/**\n * Method fills new chart section with properties.\n * @param {Definition} appSchema App schema in general\n * @param {string} definitionKey - key of app schema definition to be filled\n * @param {FacetConfig} facet facet or section information\n * @param {string} facetKey - facet key.\n * @param {SectionTypeV2} sectionType (sub)section type\n */\nfunction handleSectionChart(\n    appSchema: Definition,\n    definitionKey: string,\n    facet: FacetConfig,\n    facetKey: string,\n    sectionType: SectionTypeV2\n) {\n    appSchema.definitions[definitionKey] = createDefaultSection(appSchema, facet, facetKey);\n    const appSchemaSection = appSchema.definitions[definitionKey] as Definition;\n    addAppSchemaDefinition(appSchema, appSchemaSection, sectionType, SectionTypeV2.SectionChart);\n}\n\n/**\n * Method fills new form section in app schema with properties.\n * @param {Definition} appSchema App schema in general\n * @param {string} definitionKey - key of app schema definition to be filled\n * @param {FacetConfig} facet facet or section information\n * @param {string} facetKey - facet key.\n * @param {SectionTypeV2} sectionType (sub)section type\n * @return {object} returns filled form section in app schema.\n */\nfunction handleFormSection(\n    appSchema: Definition,\n    definitionKey: string,\n    facet: FacetConfig,\n    facetKey: string,\n    sectionType: SectionTypeV2\n) {\n    appSchema.definitions[definitionKey] = createDefaultSection(appSchema, facet, facetKey);\n    const appSchemaSection = appSchema.definitions[definitionKey] as Definition;\n    addAppSchemaDefinition(appSchema, appSchemaSection, sectionType, SectionTypeV2.SectionForm);\n    appSchemaSection[SchemaTag.annotationPath] = facet.annotationPath;\n    appSchemaSection[SchemaTag.isViewNode] = true;\n    return appSchemaSection;\n}\n\n/**\n * Mapping of facet type to (sub)section type to enable correct further handling\n * @param {FacetBase} facetType - facet type to be mapped\n * @param {boolean} isSubSection - if section is subsection of section\n * @return {SectionTypeV2} sectionType (sub)section type\n */\nfunction getSectionType(facetType: FacetBase, isSubSection: boolean) {\n    const sectionTypeMapping = new Map<FacetBase, SectionTypeV2>([\n        [FacetBase.CollectionFacet, SectionTypeV2.Section],\n        [FacetBase.LineItem, SectionTypeV2.SectionTable],\n        [FacetBase.Chart, SectionTypeV2.SectionChart],\n        [FacetBase.Address, SectionTypeV2.SectionAddress],\n        [FacetBase.Contact, SectionTypeV2.SectionContact],\n        [FacetBase.Form, SectionTypeV2.SectionForm],\n        [FacetBase.Identification, SectionTypeV2.SectionForm]\n    ]);\n    const subSectionTypeMapping = new Map<FacetBase, SectionTypeV2>([\n        [FacetBase.CollectionFacet, SectionTypeV2.SubSection],\n        [FacetBase.LineItem, SectionTypeV2.SubSectionTable],\n        [FacetBase.Chart, SectionTypeV2.SubSectionChart],\n        [FacetBase.Address, SectionTypeV2.SubSectionAddress],\n        [FacetBase.Contact, SectionTypeV2.SubSectionContact],\n        [FacetBase.Form, SectionTypeV2.SubSectionForm],\n        [FacetBase.Identification, SectionTypeV2.SubSectionForm]\n    ]);\n    if (isSubSection) {\n        return subSectionTypeMapping.get(facetType);\n    } else {\n        return sectionTypeMapping.get(facetType);\n    }\n}\n\n/**\n * Method returns reference key, special handling of (sub)sections\n * @param {FacetConfig} facet facet or section information\n * @param {string} facetKey - facet key.\n * @param {SectionTypeV2} sectionType (sub)section type\n * @return {string} reference key\n */\nfunction getReferenceKey(facet, facetKey, sectionType): string {\n    let referenceKey = facetKey;\n    if (sectionType === (SectionTypeV2.Section || SectionTypeV2.SubSection)) {\n        referenceKey = referenceKey.replace(`@${UIAnnotationTerms.Facets}`, facet.base);\n    }\n    return `${referenceKey}`;\n}\n\n/**\n * Creates a section definition in app schema.\n * @param {GenerateSchemaParameters} generateParameters - list of API input parameters\n * @param {FacetConfigs} facets - list of all facets.\n * @param {string} facetKey - facet key.\n * @param {object} sections - schema of current sections definition.\n * @param {Definition} appSchema - app specific schema that potentially gets enhanced.\n * @param {boolean} isSubSection - if section is subsection of section\n */\nfunction addSection(\n    generateParameters: GenerateAppSchemaParameters,\n    facets: FacetConfigs,\n    facetKey: string,\n    sections: Definition,\n    appSchema: Definition,\n    isSubSection = false\n): void {\n    const facet: FacetConfig = facets[facetKey];\n    const sectionType = getSectionType(facet.base, isSubSection);\n    const referenceKey = getReferenceKey(facet, facetKey, sectionType);\n    const definitionKey = `${sectionType}<${referenceKey}>`;\n    addSectionReference(sections, referenceKey, definitionKey);\n    switch (sectionType) {\n        case SectionTypeV2.Section:\n        case SectionTypeV2.SubSection: {\n            //handle collection facets\n            isSubSection = true;\n            handleSubSection(appSchema, definitionKey, facet, facetKey, sectionType);\n            const subSections = (appSchema.definitions[definitionKey] as Definition).properties\n                .subsections as Definition;\n            for (const key in facet.facets) {\n                addSection(generateParameters, facet.facets, key, subSections, appSchema, isSubSection);\n            }\n            break;\n        }\n        case SectionTypeV2.SectionTable:\n        case SectionTypeV2.SubSectionTable: {\n            handleLineItem(generateParameters, facetKey, appSchema, facet, facets, sectionType);\n            //add fields for createWithParameterDialog\n            const floorplanSuffix = 'OP';\n            addFieldsType(appSchema, facet.entityType, floorplanSuffix);\n            break;\n        }\n        case SectionTypeV2.SectionChart:\n        case SectionTypeV2.SubSectionChart: {\n            //handle reference facet (if comprising chart)\n            handleSectionChart(appSchema, definitionKey, facet, facetKey, sectionType);\n\n            break;\n        }\n        case SectionTypeV2.SectionForm:\n        case SectionTypeV2.SubSectionForm: {\n            const appSchemaSection = handleFormSection(appSchema, definitionKey, facet, facetKey, sectionType);\n            handleForm(SectionType.Section, facet, appSchemaSection, appSchema, FioriElementsVersion.v2, facetKey);\n            break;\n        }\n        case SectionTypeV2.SectionAddress:\n        case SectionTypeV2.SectionContact: {\n            handleAddressContact(facet, facetKey, sections, appSchema, SectionType.Section, undefined, 'V2');\n            break;\n        }\n        case SectionTypeV2.SubSectionAddress:\n        case SectionTypeV2.SubSectionContact: {\n            handleAddressContact(\n                facet,\n                facetKey,\n                sections,\n                appSchema,\n                SectionType.Section,\n                SectionType.SubSection,\n                'V2'\n            );\n            break;\n        }\n        default: {\n            // Other facets -> only default properties of ObjectPageSection\n            sections.properties[facetKey] = createDefaultSection(appSchema, facet, facetKey);\n        }\n    }\n}\n\n/**\n * Adds the sections to the app schema\n * @param {GenerateSchemaParameters} generateParameters - list of API input parameters\n * @param {Definition} appSchema - app specific schema that potentially gets enhanced\n * @param {SapUiAppPagesV2} pages - list of (manifest) pages\n */\nfunction addSections(\n    generateParameters: GenerateAppSchemaParameters,\n    appSchema: Definition,\n    pages: v2.SapUiAppPagesV2\n): void {\n    const sections = appSchema.definitions[DefinitionName.Sections] as Definition;\n    sections[SchemaTag.isViewNode] = true;\n    if (generateParameters.entitySet?.entityType) {\n        sections[\n            SchemaTag.annotationPath\n        ] = `/${generateParameters.entitySet.entityType.fullyQualifiedName}/@${UIAnnotationTerms.Facets}`;\n    }\n\n    if (!pages) {\n        return;\n    }\n    // Get facet annotations\n    const facets: FacetConfigs = getObjectPageFacets(\n        generateParameters.entitySet?.entityType,\n        generateParameters.serviceAVT,\n        FioriElementsVersion.v2,\n        generateParameters.logger\n    );\n    if (!facets || Object.keys(facets).length === 0) {\n        return;\n    }\n\n    // Loop on all pages, look for the right entity set\n    for (const key in pages) {\n        const element = pages[key];\n        if (generateParameters.entitySet?.name?.includes(element.entitySet)) {\n            // Loop on all facets (of the given entitySet)\n            for (const facetKey in facets) {\n                addSection(generateParameters, facets, facetKey, sections, appSchema);\n            }\n        } else {\n            addSections(generateParameters, appSchema, element.pages);\n        }\n    }\n\n    // Add custom sections\n    const customSections = appSchema.definitions['CustomSections'] as Definition;\n    for (const name in customSections.properties) {\n        sections.properties[name] = customSections.properties[name];\n    }\n}\n\n/**\n * Add Object Page Header to app-specific schema\n *\n * @param {object} appSchema Schema of the app\n * @param {EntityType} entityType - current entity type\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n */\nfunction addHeader(appSchema: object, entityType: EntityType, oDataServiceAVT: ConvertedMetadata): void {\n    addCommonHeaderSchema(appSchema, entityType);\n\n    //Add header actions\n    addHeaderActions(appSchema, entityType, oDataServiceAVT, addHeaderActionCallBackV2, true);\n}\n\n/**\n * Adds the related facets keys 'enum' to the app schema\n * @param schema - app specific schema that potentially gets enhanced\n * @param {EntityType} entityType - current entity type\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n * @param {ExtensionLogger} logger - Logger class for logging messages\n */\nfunction addRelatedFacetKeysType(\n    schema: object,\n    entityType: EntityType,\n    oDataServiceAVT: ConvertedMetadata,\n    logger?: ExtensionLogger\n): void {\n    // Find sections from annotation\n    // And create new definition in schema as enum with description\n    const facetSections = getObjectPageFacetSection(entityType, oDataServiceAVT, logger, undefined, true);\n    if (facetSections) {\n        addDefinitionForRelatedFacetKeys(\n            schema,\n            ['ObjectPageCustomSectionFragment', 'ObjectPageCustomSectionView'],\n            facetSections,\n            ['ID', 'key']\n        );\n    }\n}\n\n/**\n * Generates an app specific schema out of the generic schema.\n * @param {GenerateSchemaParameters} generateParameters - list of API input parameters\n * @param genericSchema - generic JSON schema of an object page\n *\n * @returns the app specific JSON schema\n */\nexport function generateObjectPageSchemaV2(\n    generateParameters: GenerateAppSchemaParameters,\n    genericSchema: object\n): object {\n    // Initialize i18next\n    initI18n();\n\n    const appSchema = JSON.parse(JSON.stringify(genericSchema)) as Definition;\n\n    // Custom sections as part of sections\n    const additionalSections = {};\n    for (const name in appSchema.definitions['CustomSections']['properties']) {\n        additionalSections[name] = (appSchema.definitions['CustomSections'] as Definition).properties[name];\n    }\n\n    // Change reference to generated sections\n    appSchema.properties[PropertyName.sections] = {\n        $ref: DEFINITION_LINK_PREFIX + 'Sections'\n    };\n\n    const entityType = generateParameters.entitySet?.entityType;\n    generateParameters.entityType = entityType;\n    const pages = generateParameters.manifest[ManifestSection.generic].pages;\n    if (!pages) {\n        log(generateParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOPAGES', { appId: generateParameters.manifest['sap.app']['id'] }),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.generic]\n            }\n        });\n        return appSchema;\n    }\n\n    // Add header\n    addHeader(appSchema, entityType, generateParameters.serviceAVT);\n\n    // Add sections\n    appSchema.definitions[DefinitionName.Sections] = {\n        type: 'object',\n        properties: {},\n        description: 'Sections',\n        additionalProperties: false\n    };\n    addSections(generateParameters, appSchema, pages as v2.SapUiAppPagesV2);\n\n    // Custom section facets\n    addRelatedFacetKeysType(appSchema, entityType, generateParameters.serviceAVT, generateParameters.logger);\n\n    if (!appSchema.definitions.Sections) {\n        if (appSchema.definitions.RelatedFacetKeys && appSchema.definitions.RelatedFacetKeys['oneOf'].length) {\n            // If related facets exists - then we need sections definition\n            appSchema.definitions.Sections = {\n                type: 'object',\n                properties: additionalSections,\n                additionalProperties: false\n            };\n            appSchema.definitions.Sections[SchemaTag.isViewNode] = true;\n        } else {\n            delete appSchema.properties[PropertyName.sections];\n        }\n    }\n    addFooterActions(appSchema, generateParameters, FioriElementsVersion.v2, pages as v2.SapUiAppPagesV2);\n\n    // Eliminate generic definitions\n    delete appSchema.definitions['GenericSections'];\n    delete appSchema.definitions['GenericSubSections'];\n    delete appSchema.definitions['ObjectPageSectionTableV2'];\n    delete appSchema.definitions['GenericColumns'];\n    delete appSchema.definitions['TableColumnAction'];\n    delete appSchema.definitions['ObjectPageSectionFormV2'];\n    delete appSchema.definitions['ObjectPageSectionTableV2'];\n    delete appSchema.definitions['ObjectPageSubSectionV2'];\n    delete appSchema.definitions['ObjectPageResponsiveTableWithMultiSelect'];\n    delete appSchema.definitions['ObjectPageResponsiveTableWithInlineDelete'];\n    delete appSchema.definitions['ObjectPageAnalyticalTable'];\n    delete appSchema.definitions['ObjectPageTreeTable'];\n    delete appSchema.definitions['ObjectPageGridTable'];\n    delete appSchema.definitions['ObjectPageToolBar'];\n    delete appSchema.definitions['ObjectPageToolBarActions'];\n    delete appSchema.definitions['ObjectPageForm'];\n    delete appSchema.definitions['ObjectPageFormFields'];\n    delete appSchema.definitions['ObjectPageFormActions'];\n    delete appSchema.definitions['FieldPathOP'];\n    updatePropertyIndices(appSchema, ROOT_PROPERTIES_ORDER);\n    return appSchema;\n}\n", "import type { Definition } from 'typescript-json-schema';\nimport type { ControlTypeFunction } from '@sap/ux-specification-types';\nimport {\n    FacetBase,\n    FacetTitlePrefix,\n    BindingPropertyRegexAsString,\n    VOCWITHSLASH,\n    PropertyName\n} from '@sap/ux-specification-types';\nimport { DEFINITION_LINK_PREFIX } from '../utils';\n\n/**\n * General export rule, joining all given breadcrumbs to the base ID\n * @param baseId - base ID, first part of the stable ID\n * @param idBreadcrumbs - array of ID parts\n */\nexport const buildControlIdFromParent = (baseId: string, idBreadcrumbs: string[]): string => {\n    return baseId + idBreadcrumbs.join('::');\n};\n\n/**\n * Export rule for pages\n * @param baseId - base ID, first part of the stable ID\n * @param idBreadcrumbs - array of ID parts\n * @param breadcrumbs - array of breadcrumbs\n */\nexport const buildControlIdForPage = (baseId: string, idBreadcrumbs: string[], breadcrumbs: string[]): string => {\n    return baseId + idBreadcrumbs.join('::') + breadcrumbs[0];\n};\n\n/**\n * Converts the section id to the right string for the stable id:\n * If the corresponsing facet has ID maintained, we must take this ID. If ID is not present, take the navigation path.\n * @param sectionId - old ID that shall get converted\n * @param breadcrumbs - array of breadcrumbs\n * @param title - title from JSON schema, comprising the facet ID\n */\nexport const convertSectionId = (sectionId: string, title: string): string => {\n    let convertedSectionId: string;\n    const prefix: string = FacetTitlePrefix;\n    if (title !== undefined && title.includes(prefix)) {\n        convertedSectionId = title.split(prefix)[1];\n    } else {\n        convertedSectionId = sectionId.replace(new RegExp('/@', 'g'), '::').replace(/@com.sap/g, 'com.sap');\n    }\n    return convertedSectionId;\n};\n\nexport function escapeId(sParam: string): string {\n    /* escape all characters not allowed in stable ids with :<hexcode>\n     * as we use : as escape character, also escape :\n     */\n    return sParam.replace(/[^-A-Za-z0-9_.:]/g, function (c) {\n        const sCode = c.charCodeAt(0).toString(16);\n        return `:${sCode.length === 1 ? '0' : ''}${sCode}`;\n    });\n}\n\n/**\n * Binding Change values, will be added on object pages  */\nexport enum BindingValue {\n    Editable = '{ui>/editable}',\n    NotEditable = '{= !${ui>/editable}}'\n}\n\n/**\n * Consolidates the list of id's and other breadcrumbs into one list, for finding the right stable ID for a column\n * @param idBreadcrumbs - array of ID parts\n * @param localBreadcrumbs - array of breadcrumbs\n * @param title - (section) title = facet ID\n * @returns the consolidated breadcrumbs' list\n */\nfunction mapBreadcrumbs(idBreadcrumbs: string[], localBreadcrumbs: string[], title: string) {\n    let sectionId: string;\n    idBreadcrumbs = idBreadcrumbs.map(function (item) {\n        if (item === PropertyName.sections) {\n            for (let index = 0; index < localBreadcrumbs.length; index++) {\n                const breadcrumb = localBreadcrumbs[index];\n                if (breadcrumb === PropertyName.sections) {\n                    sectionId = localBreadcrumbs[index + 1];\n                    if (sectionId.indexOf(FacetBase.LineItem) !== -1) {\n                        localBreadcrumbs[index + 1] = convertSectionId(sectionId, title) + '::Table';\n                        return localBreadcrumbs[index + 1];\n                    }\n                }\n            }\n        }\n        return item;\n    });\n    return { idBreadcrumbs };\n}\n\n/**\n * Export rule for table columns\n * @param baseId - base ID, first part of the stable ID\n * @param idBreadcrumbs - array of ID parts\n * @param breadcrumbs - array of breadcrumbs\n * @param controlType - controlType function of ecorators, not used here\n * @param title - title from JSON schema, comprising the facet ID\n */\nexport const buildColumnControlId = (\n    baseId: string,\n    idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    _controlType: ControlTypeFunction,\n    title: string\n): string => {\n    let tableId = 'listReport'; //default\n    const localBreadcrumbs = [...breadcrumbs];\n\n    ({ idBreadcrumbs } = mapBreadcrumbs(idBreadcrumbs, localBreadcrumbs, title));\n    if (localBreadcrumbs[0] === PropertyName.sections) {\n        tableId = localBreadcrumbs[1]\n            .replace(/::com.sap.vocabularies/g, VOCWITHSLASH)\n            .replace(/::@com.sap.vocabularies/g, VOCWITHSLASH);\n    } else if (idBreadcrumbs[0] === PropertyName.table) {\n        tableId = idBreadcrumbs[0];\n    }\n    const lastIdPart = localBreadcrumbs[localBreadcrumbs.length - 1]\n        .replace(/::com.sap.vocabularies/g, VOCWITHSLASH)\n        .replace(/::@com.sap.vocabularies/g, VOCWITHSLASH)\n        .replace('sTarget/@', 'sTarget::@')\n        .replace('/', ':2f');\n    let fullId: string;\n    const splitPoint = lastIdPart.indexOf(':::');\n    if (lastIdPart.startsWith('DataField') && splitPoint > -1) {\n        fullId = `${baseId}template:::TableColumn:::${lastIdPart.substring(\n            0,\n            splitPoint\n        )}:::sSmartTableId::${tableId.replace('::Table', ':3a:3aTable')}:::${lastIdPart.substring(splitPoint + 3)}`;\n    } else {\n        fullId = `${baseId}${idBreadcrumbs.join('::')}-${lastIdPart}`;\n    }\n    return escapeId(fullId);\n};\n\n/**\n * Split up action breadcrumb and return different parts from it\n * @param breadcrumbs - array of breadcrumbs\n * @returns {object} - actionType, semanticObjectId, actionId of action\n */\nexport const getActionBreadcrumbParts = (\n    breadcrumbs: string[]\n): { actionType: string | undefined; semanticObjectId: string | undefined; actionId: string } => {\n    const actionIdParts = breadcrumbs[breadcrumbs.length - 1].split(':::');\n    let actionType, semanticObjectId, actionId;\n    if (actionIdParts.length > 2) {\n        actionType = actionIdParts[0];\n        semanticObjectId = actionIdParts[1].split('::')[1];\n        actionId = actionIdParts[2].split('::')[1];\n    } else if (actionIdParts.length === 2) {\n        actionType = actionIdParts[0];\n        actionId = actionIdParts[1].split('sAction::')[1];\n    } else {\n        actionId = actionIdParts[0];\n    }\n    return { actionType, semanticObjectId, actionId };\n};\n\n/**\n * Determines the valid pattern for a binding change\n * @param schemaDefinition - definition in the JSON schema\n * @returns the pattern as string\n */\nfunction determinePattern(schemaDefinition: Definition): string {\n    let pattern = BindingPropertyRegexAsString;\n    if (schemaDefinition.enum) {\n        let enumPattern;\n        schemaDefinition.enum.forEach((enumValue) => {\n            if (!enumValue.toString().startsWith('{')) {\n                enumPattern = enumPattern ? `${enumPattern}|${enumValue.toString()}` : enumValue.toString();\n            }\n        });\n        pattern = `^(${enumPattern})$|${pattern}`;\n    }\n    if (schemaDefinition['type'] && schemaDefinition['type'] === 'boolean') {\n        pattern = `^(false|true)$|${pattern}`;\n    }\n    return pattern;\n}\n\n/**\n * Reuseable function for strings that allow binding changes\n * @param schema - the complete JSON schema\n * @param definition - definition in the JSON schema, to be updated\n * @param propertyName - property in the properties' list of the given definition\n * @param bindingValues - values that shall be added to the resulting enum\n */\nconst addPatternForBindingChangeOfEnum = (\n    schema: object,\n    definition: object,\n    propertyName: string,\n    bindingValues?: BindingValue[]\n): void => {\n    const propertyList = definition && definition['properties'];\n    if (propertyList[propertyName].pattern) {\n        return; //as already processed\n    }\n    const originalDefinition = propertyList[propertyName];\n    let resultDefinition = originalDefinition;\n    const targetDefinition = originalDefinition.$ref\n        ? schema['definitions'][originalDefinition.$ref.split(DEFINITION_LINK_PREFIX)[1]]\n        : originalDefinition;\n    const description = originalDefinition.description ? originalDefinition.description : targetDefinition.description;\n    const pattern = determinePattern(targetDefinition);\n    if (targetDefinition['type'] && targetDefinition['type'] === 'boolean') {\n        //Always an enum, always with more than one value\n        resultDefinition = { enum: [false, true] };\n    }\n    if (bindingValues && resultDefinition['enum']) {\n        bindingValues.forEach((value) => {\n            if (resultDefinition['enum'].indexOf(value) === -1) {\n                resultDefinition['enum'].push(value);\n            }\n        });\n    }\n    propertyList[propertyName] = {\n        pattern: pattern,\n        anyOf: [\n            resultDefinition,\n            {\n                type: 'string'\n            }\n        ]\n    };\n    if (description) {\n        propertyList[propertyName].description = description;\n        delete originalDefinition.description;\n    }\n};\n\nexport const addPatternForBindingChangeOfEnumLR = (schema: object, definition: object, propertyName: string): void => {\n    addPatternForBindingChangeOfEnum(schema, definition, propertyName);\n};\n\nexport const addPatternForBindingChangeOfEnumOP = (schema: object, definition: object, propertyName: string): void => {\n    const bindingValues = Object.values(BindingValue);\n    addPatternForBindingChangeOfEnum(schema, definition, propertyName, bindingValues);\n};\n", "/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122 \u00A7 4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n", "import 'reflect-metadata';\nimport type { SyncRule, PageLayoutInformation, ValidityInformation } from '@sap/ux-specification-types';\n\nexport const reflectMetadataKey = Symbol('specificationMetadataKey');\nexport const syncRule = (propSpec: SyncRule): any => {\n    return Reflect.metadata(reflectMetadataKey, propSpec);\n};\n\nexport function getReflectMetadata(target: object, propertyName: string): SyncRule | undefined {\n    let rule: SyncRule;\n    if (target) {\n        rule = Reflect.getMetadata(reflectMetadataKey, target, propertyName);\n    }\n    return rule;\n}\n\nexport const pageLayoutInformation =\n    (pageInfo: PageLayoutInformation) =>\n    (constructor: Function): void => {\n        constructor.prototype.pageLayoutInformation = pageInfo;\n    };\n\nconst childIdKey = Symbol('childId');\nexport const childId = (id: string): any => {\n    return Reflect.metadata(childIdKey, id);\n};\n\nexport const getChildId = (target: any, propertyName: string): string => {\n    return Reflect.getMetadata(childIdKey, target, propertyName);\n};\n\nexport const getPageLayoutInformation = (target: any): PageLayoutInformation => {\n    return Object.getPrototypeOf(target).pageLayoutInformation;\n};\n\n/*\n * Validity decorator and functions for it\n */\n\nexport const validityMetadataKey = Symbol('validityMetadataKey');\nexport const validity = (propSpec: ValidityInformation): any => {\n    return Reflect.metadata(validityMetadataKey, propSpec);\n};\n\nexport function getTextForDeprecated(key: string, validityInformation?: ValidityInformation): string {\n    let text = `${key} is deprecated`;\n    if (validityInformation && validityInformation.deprecated) {\n        text = validityInformation.deprecated.since ? `${text} since ${validityInformation.deprecated.since}` : text;\n        text = validityInformation.deprecated.text ? `${text}. ${validityInformation.deprecated.text}` : text;\n    }\n\n    return text;\n}\n", "import type {\n    Manifest,\n    UI5Version,\n    ChangeDefinition,\n    ChangeDefinitionInCreation,\n    SyncRule\n} from '@sap/ux-specification-types';\nimport * as flexUtils from '@ui5/flexibility-utils';\nimport { FlexChangeLayer } from '@sap/ux-specification-types';\n\nconst changesUtils = flexUtils.default.change;\n\nconst defaultValues = {\n    isCustomer: false,\n    sapui5Version: ' ', // UI5 version should be set via exportConfig(). This is the fallback in case it's missing\n    creatingTool: 'SAPFioriTools',\n    type: 'propertyChange'\n};\n\n/**\n * Create a change as string (calls changeUtils from ui5-flexibility-utils)\n * @param change - properties required to create the change\n * @param manifest - the manifest.json file\n */\nexport function createChangeString(change: ChangeDefinitionInCreation, manifest: Manifest): string {\n    let changeString = '';\n    try {\n        for (const defaultValue in defaultValues) {\n            if (change[defaultValue] === undefined) {\n                change[defaultValue] = defaultValues[defaultValue];\n            }\n        }\n        changeString = changesUtils.createChangeString(change, manifest);\n    } catch (error) {\n        console.error(`Error while create flex change.`, error);\n    }\n    return changeString;\n}\n\n/**\n * Parse string and return the change as object (calls changeUtils from ui5-flexibility-utils)\n * @param changeString - string with serialized change\n */\nexport function parseChangeString(changeString: string): ChangeDefinition | boolean {\n    try {\n        return changesUtils.parse(changeString);\n    } catch (error) {\n        return false;\n    }\n}\n\n/**\n * Creates a flex change based on the given config information\n * @param configObject - current (sub)object of the configuration file\n * @param breadcrumbs - list of breadcrumbs, i.e. ID parts for building the stable ID\n * @param syncRule - export rule from the object classes decorator\n * @param ui5Version - SAP UI5 version\n * @param baseId - selector id of the current page\n * @param ids - list of parent & child ids\n * @param title - title from the app schema (comprising for instance the facet ID)\n * @param key - key of the given property\n * @param layer - layer\n * @returns {ChangeDefinitionInCreation} - the newly created flex change\n */\nexport function fillFlexChangeContent(\n    configObject: object,\n    syncRule: SyncRule,\n    ui5Version: UI5Version,\n    key: string,\n    controlId: string\n): ChangeDefinitionInCreation {\n    const isCustomer = ui5Version.layer ? ui5Version.layer === FlexChangeLayer.Customer : true;\n\n    const flexChange: ChangeDefinitionInCreation = {\n        controlId, //syncRule.flex.controlId(baseId, ids, breadcrumbs, syncRule.flex.controlType, title),\n        controlType: syncRule.flex.controlType(),\n        content: {\n            property: key\n        },\n        sapui5Version: ui5Version.ui5Version,\n        isCustomer\n    };\n    if (configObject[key] !== undefined) {\n        if (syncRule.flex.exportFlexValue) {\n            syncRule.flex.exportFlexValue(flexChange, configObject, key);\n        } else if (configObject[key].toString().startsWith('{')) {\n            flexChange.content.newBinding = configObject[key];\n            flexChange.type = 'propertyBindingChange';\n        } else {\n            flexChange.content.newValue = configObject[key];\n        }\n    } else {\n        flexChange.content.newValue = null;\n    }\n    return flexChange;\n}\n", "import { createChangeString } from '../flexUtils';\nimport type { Manifest, ChangeDefinitionInCreation } from '@sap/ux-specification-types';\n\nexport function exportToFlexChange(change: ChangeDefinitionInCreation, manifest: Manifest): string {\n    return createChangeString(change, manifest);\n}\n", "import { DEFINITION_LINK_PREFIX, getTextForDeprecated } from '../';\nimport { log } from '../../../extensionLogger';\nimport type { Definition } from 'typescript-json-schema';\nimport type { SyncRule, DeprecatedProperties, ExtensionLogger } from '@sap/ux-specification-types/dist';\nimport { LogSeverity, FacetTitlePrefix, DefinitionName } from '@sap/ux-specification-types/dist';\n\n/**\n * Transfers the value of a single manifest setting to the config\n * @param syncRule - Metadata rule\n * @param manifestSection - Section in manifest.json\n * @param propertyKey - Key of the property or setting\n * @param configPart - Part of the config JSON\n * @param sectionId - Section or facet ID\n * @param breadcrumbs - list of breadcrumbs or id's describing the keys of all hierarchy levels\n */\nexport function importProperty(\n    syncRule: SyncRule,\n    manifestSection: {},\n    propertyKey: string,\n    configPart: { [key: string]: any },\n    sectionId?: string,\n    breadcrumbs?: string[]\n): void {\n    const manifestKey = syncRule.manifest.key || propertyKey;\n    const importHandler = syncRule.manifest.import;\n    if (importHandler && typeof importHandler === 'function') {\n        const value = importHandler(manifestSection, sectionId, propertyKey, breadcrumbs);\n        if (value !== undefined) {\n            configPart[propertyKey] = value;\n        }\n    } else if (manifestSection[manifestKey] !== undefined) {\n        configPart[propertyKey] = manifestSection[manifestKey];\n    }\n}\n\n/**\n * Validation during import: check if properties are marked as deprecated.\n * If so, log them.\n * @param deprecatedProperties - existing list, to be actualized\n * @param manifestSection - Section in manifest.json\n * @param path - path to the section in manifest\n * @param {ExtensionLogger} logger - Logger class for logging messages\n */\nexport function checkDeprecatedProperties(\n    deprecatedProperties: DeprecatedProperties | undefined,\n    manifestSection: {},\n    path: string,\n    logger?: ExtensionLogger\n): void {\n    if (manifestSection && deprecatedProperties) {\n        for (const key in manifestSection) {\n            const deprecated = deprecatedProperties[key];\n            if (deprecated) {\n                log(logger, {\n                    severity: LogSeverity.Warning,\n                    message: getTextForDeprecated(key, deprecated),\n                    location: {\n                        path: 'webapp/manifest.json/',\n                        range: path.split('/')\n                    }\n                });\n                delete deprecatedProperties[key];\n            }\n        }\n    }\n}\n\n/**\n * Determines the title of a section representation in the app schema, main aspect is checking the facet ID\n * @param schemaSection - Section in manifest.json\n * @param jsonSchema - app specific schema\n */\nexport function getSectionTitle(schemaSection: Definition, jsonSchema: Definition): string | undefined {\n    if (schemaSection.$ref && !schemaSection.title) {\n        const refTitle = jsonSchema.definitions[schemaSection.$ref.split(DEFINITION_LINK_PREFIX)[1]] as Definition;\n        return getSectionTitle(refTitle, jsonSchema);\n    } else if (schemaSection.title) {\n        if (schemaSection.title.startsWith(FacetTitlePrefix)) {\n            return schemaSection.title.split(FacetTitlePrefix)[1].replace(/com.sap/g, '@com.sap');\n        } else {\n            return schemaSection.title.replace(/com.sap/g, '@com.sap');\n        }\n    } else {\n        return undefined;\n    }\n}\n\n/**\n * Method returns target by resolving custom column reference name.\n * For example - 'TableCustomColumns<dummyTarget>' is resolved as 'dummyTarget'.\n * @param {string} ref Reference key.\n * @returns {string | undefined} Resolved target.\n */\nexport function getTargetFromCustomColumnRef(ref: string): string | undefined {\n    const refParts = ref.split(`${DefinitionName.CustomColumns}<`);\n    if (refParts[1]) {\n        return refParts[1].split('>')[0];\n    }\n    return undefined;\n}\n\n/**\n * Removes part of a given config, if empty\n * @param {object} config - config part\n * @param {string} structure - part of config to be removed\n */\nexport function removeEmptyStructure(config: object, structure: string): void {\n    if (!config[structure]) {\n        return;\n    }\n    if (Object.keys(config[structure]).length < 1) {\n        delete config[structure];\n    }\n}\n", "import type { ConvertedMetadata, EntitySet, EntityType } from '@sap-ux/vocabularies-types';\nimport type { DataFieldAbstractTypes, DataFieldForAnnotation } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport { UIAnnotationTerms, UIAnnotationTypes } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport { getStableIdPartFromDataField } from '../../v4/utils/StableIdHelper';\nimport type { FacetConfig, GenerateAppSchemaParameters, SchemaDefinition } from '@sap/ux-specification-types';\nimport {\n    DefinitionName,\n    FacetBase,\n    FioriElementsVersion,\n    PropertyName,\n    SchemaKeyName,\n    SchemaTag,\n    SectionType,\n    UIVOCABULARY,\n    v2\n} from '@sap/ux-specification-types';\nimport {\n    DEFINITION_LINK_PREFIX,\n    getDataFieldDescription,\n    createAnnotationPath,\n    findAlias,\n    prepareRef,\n    addDataTypeToDefinition,\n    replaceNamespaces\n} from '..';\nimport type { Definition } from 'typescript-json-schema';\nimport { addStandardFooterActionsOP, addStandardHeaderActions, isDraftEnabled } from '../../v2/generate/utils';\n\ntype DefinitionsProperties = { [key: string]: SchemaDefinition };\n\ninterface FieldsContainerSchema {\n    fields?: DefinitionsProperties;\n    actions?: DefinitionsProperties;\n}\n\n/**\n * Copies the field properties from the generic definition to the specific field definition\n * @param {FioriElementsVersion} version - Fiori Elements version\n * @param {Definition} appSchema - App schema in general\n * @param {DataFieldAbstractTypes} field - field definition in parser output (AVT)\n * @param {string} fieldDefinition - the unique ID for the given field definition\n */\nfunction copyFieldProperties(\n    version: FioriElementsVersion,\n    appSchema: Definition,\n    field: DataFieldAbstractTypes,\n    fieldDefinition: string\n) {\n    if (version === FioriElementsVersion.v4 && appSchema['definitions']['Field']) {\n        switch (field.$Type) {\n            case UIAnnotationTypes.DataField:\n            case UIAnnotationTypes.DataFieldForAnnotation:\n            case UIAnnotationTypes.DataFieldWithNavigationPath:\n            case UIAnnotationTypes.DataFieldWithUrl: {\n                (appSchema.definitions[fieldDefinition] as Definition).properties =\n                    appSchema.definitions.Field['properties'];\n                break;\n            }\n        }\n    } else if (version === FioriElementsVersion.v2 && appSchema['definitions']['Field']) {\n        switch (field.$Type) {\n            case UIAnnotationTypes.DataField:\n            case UIAnnotationTypes.DataFieldForAnnotation:\n            case UIAnnotationTypes.DataFieldWithUrl: {\n                (appSchema.definitions[fieldDefinition] as Definition).properties =\n                    appSchema.definitions.Field['properties'];\n                break;\n            }\n        }\n    }\n}\n\n/**\n * Determines the name for a field definition in app schema\n * @param {FioriElementsVersion} version - Fiori Elements version\n * @param fieldReferenceId - the stable ID representation of the field\n * @param {string} targetID - unique ID, identifies the parent object (form)\n * @param fieldReference - the reference to the field definition in schema\n * @returns the field definition name in schema\n */\nfunction determineFieldDefinitionName(\n    version: FioriElementsVersion,\n    fieldReferenceId: string,\n    targetID: string,\n    fieldReference: string\n): string {\n    const fieldReferenceType =\n        version === FioriElementsVersion.v2 && fieldReferenceId && fieldReferenceId.includes('::')\n            ? fieldReferenceId.split('::')[0].replace('DataField', 'Field')\n            : undefined;\n    if (version === FioriElementsVersion.v2) {\n        return `${fieldReferenceType}<${targetID}::${fieldReference}>`;\n    } else {\n        return `${targetID}::${fieldReference}`;\n    }\n}\n\n/**\n * Add the keys and target tag for Datafield\n * @param field - the given field definition\n * @param appSchema - the app schema to be updated\n * @param schemaKeyOfField - key for the given field in the app schema\n */\nfunction addKeysTagForDataField(field, appSchema: Definition, schemaKeyOfField: string) {\n    if (typeof field.Value !== 'string' && field.Value.type === 'Path') {\n        appSchema.definitions[schemaKeyOfField][SchemaTag.keys] = [\n            {\n                name: 'Value',\n                value: field.Value.path\n            }\n        ];\n        appSchema.definitions[schemaKeyOfField][SchemaTag.target] = field.Value.$target\n            ? field.Value.$target.fullyQualifiedName.split('/')[0]\n            : field.Value.path;\n    } else if (typeof field.Value === 'string' && field.Value) {\n        appSchema.definitions[schemaKeyOfField][SchemaTag.keys] = [\n            {\n                name: 'Value',\n                value: field.Value\n            }\n        ];\n        appSchema.definitions[schemaKeyOfField][SchemaTag.target] = field.fullyQualifiedName.split('@')[0];\n    }\n}\n\n/**\n * Adds the \"keys\" tag to a field definition in schema\n * @param field - the given field definition\n * @param appSchema - the app schema to be updated\n * @param schemaKeyOfField - key for the given field in the app schema\n */\nfunction addKeysTagToField(field: DataFieldAbstractTypes, appSchema: Definition, schemaKeyOfField: string) {\n    if (\n        field.$Type === UIAnnotationTypes.DataField ||\n        field.$Type === UIAnnotationTypes.DataFieldWithUrl ||\n        field.$Type === UIAnnotationTypes.DataFieldWithNavigationPath\n    ) {\n        addKeysTagForDataField(field, appSchema, schemaKeyOfField);\n    } else if (field.$Type === UIAnnotationTypes.DataFieldForAnnotation) {\n        appSchema.definitions[schemaKeyOfField][SchemaTag.keys] = [\n            {\n                name: 'Target',\n                value: replaceNamespaces(field.Target.value)\n            }\n        ];\n        appSchema.definitions[schemaKeyOfField][SchemaTag.target] =\n            field.Target.$target.fullyQualifiedName.split('@')[0];\n    } else if (field.$Type === UIAnnotationTypes.DataFieldForAction) {\n        const separator = field.Action.lastIndexOf('.');\n        if (separator === -1) {\n            appSchema.definitions[schemaKeyOfField][SchemaTag.keys] = [\n                {\n                    name: 'Action',\n                    value: field.Action\n                }\n            ];\n        } else {\n            appSchema.definitions[schemaKeyOfField][SchemaTag.keys] = [\n                {\n                    name: 'Action',\n                    value: field.Action.substring(separator + 1, field.Action.length)\n                }\n            ];\n            appSchema.definitions[schemaKeyOfField][SchemaTag.target] = field.Action.substring(0, separator);\n        }\n    } else if (field.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation) {\n        appSchema.definitions[schemaKeyOfField][SchemaTag.keys] = [\n            {\n                name: SchemaKeyName.semanticObject,\n                value: field.SemanticObject\n            }\n        ];\n        if (field.Action) {\n            appSchema.definitions[schemaKeyOfField][SchemaTag.keys].push({\n                name: 'Action',\n                value: field.Action\n            });\n        }\n        appSchema.definitions[schemaKeyOfField][SchemaTag.target] = field.fullyQualifiedName.split('@')[0];\n    }\n}\n\n/**\n * Method checks if passed field is connected field.\n * @param field Field to check.\n * @returns True if passed field's target is ConnectedFieldsType.\n */\nfunction isConnectedField(field: DataFieldAbstractTypes): field is DataFieldForAnnotation {\n    return (\n        field.$Type === UIAnnotationTypes.DataFieldForAnnotation &&\n        field.Target?.$target?.$Type === UIAnnotationTypes.ConnectedFieldsType\n    );\n}\n\n/**\n * Method stores connected fields into schema definitions.\n * @param {SectionType} sectionType - prefix to distinguish Section and HeaderSection\n * @param {Definition} appSchema - App schema in general\n * @param {DataFieldAbstractTypes} field - field definition in parser output (AVT)\n * @param {FacetConfig} section - current section of the object page\n * @param {FioriElementsVersion} version - Fiori Elements version\n * @returns Resolved connected fields with reference to stored schema definitions.\n */\nfunction addConnectedFields(\n    sectionType: SectionType,\n    appSchema: Definition,\n    field: DataFieldForAnnotation,\n    section: FacetConfig,\n    version: FioriElementsVersion\n): DefinitionsProperties {\n    const target = field.Target.$target;\n    const properties: DefinitionsProperties = {};\n    if (target.$Type === UIAnnotationTypes.ConnectedFieldsType) {\n        const template = target.Template || '';\n        const templateParts = template.match(/(?<=\\{)[^}{]*(?=\\})/g) || [];\n        const targetData = target.Data;\n        // Maintain fallback index which should be used for fields which are not listed in 'Template'\n        let fallbackIndex = templateParts.length;\n        for (const innerKey in targetData) {\n            const innerField = targetData[innerKey];\n            if (typeof innerField === 'object' && '$Type' in innerField) {\n                let index = templateParts.findIndex((templateKey) => templateKey === innerKey);\n                if (index === -1) {\n                    index = fallbackIndex;\n                    fallbackIndex++;\n                }\n                // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                addField(\n                    sectionType,\n                    appSchema,\n                    innerField,\n                    `ConnectedFields::${target.qualifier}`,\n                    index.toString(),\n                    section,\n                    version,\n                    undefined,\n                    {\n                        actions: properties,\n                        fields: properties\n                    },\n                    target.fullyQualifiedName.split('@')[0]\n                );\n            }\n        }\n    }\n    return properties;\n}\n\n/**\n * Method returns schema container properties where to store fields.\n * @param {Definition} appSchema - App schema in general\n * @param {string} ref - Container reference id.\n * @param {DefinitionsProperties} [properties] - Preferable container properties to use.\n * @returns Schema container properties where to store fields.\n */\nfunction getFieldsSchemaContainer(\n    appSchema: Definition,\n    ref: string,\n    properties?: DefinitionsProperties\n): DefinitionsProperties {\n    if (properties) {\n        return properties;\n    }\n    const fieldsDefinition = prepareRef(ref);\n    return appSchema.definitions[fieldsDefinition]['properties'];\n}\n\n/**\n * Adds a field definition to the app specific schema\n * @param {SectionType} sectionType - prefix to distinguish Section and HeaderSection\n * @param {Definition} appSchema - App schema in general\n * @param {DataFieldAbstractTypes} field - field definition in parser output (AVT)\n * @param {string} targetID - unique ID, identifies the parent object (form)\n * @param {string} key - current field key\n * @param {FacetConfig} section - current section of the object page\n * @param {FioriElementsVersion} version - Fiori Elements version\n * @param {boolean} [withActions=true] - Fields with actions\n * @param {FieldsContainerSchema} containersSchema - Schema definitions to store fields and actions.\n * @param {string} [entityTypeName=section.entityType.fullyQualifiedNam] - Entity type name for annotation path resoluton.\n */\nfunction addField(\n    sectionType: SectionType,\n    appSchema: Definition,\n    field: DataFieldAbstractTypes,\n    targetID: string,\n    key: string,\n    section: FacetConfig,\n    version: FioriElementsVersion,\n    withActions = true,\n    containersSchema: FieldsContainerSchema = {},\n    entityTypeName = section.entityType.fullyQualifiedName\n): void {\n    // Calculate field reference\n    const fieldReferenceId = getStableIdPartFromDataField(field);\n    const fieldReference =\n        version === FioriElementsVersion.v2 && fieldReferenceId && fieldReferenceId.includes('::')\n            ? fieldReferenceId.split('::').splice(1).join('::')\n            : fieldReferenceId;\n    // Determine field definition name\n    const schemaKeyOfField = determineFieldDefinitionName(version, fieldReferenceId, targetID, fieldReference);\n    // Field properties\n    let properties: DefinitionsProperties = {};\n    // Evaluate field type, set field reference of properties of fields' or actions' definition\n    if (!field || !field.$Type) {\n        return;\n    } else if (\n        field.$Type === UIAnnotationTypes.DataFieldForAction ||\n        field.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation\n    ) {\n        if (withActions && sectionType === SectionType.Section) {\n            const actionsProperties = getFieldsSchemaContainer(\n                appSchema,\n                `${sectionType}${DefinitionName.Actions}<${targetID}>`,\n                containersSchema.actions\n            );\n            const fieldInSchema = (actionsProperties[fieldReference] = {\n                $ref: `${DEFINITION_LINK_PREFIX}${schemaKeyOfField}`\n            });\n            fieldInSchema[SchemaTag.propertyIndex] = parseInt(key);\n        }\n    } else {\n        const fieldsProperties = getFieldsSchemaContainer(\n            appSchema,\n            `${sectionType}${DefinitionName.Fields}<${targetID}>`,\n            containersSchema.fields\n        );\n        fieldsProperties[fieldReference] = {\n            $ref: `${DEFINITION_LINK_PREFIX}${schemaKeyOfField}`,\n            propertyIndex: parseInt(key)\n        };\n        if (isConnectedField(field)) {\n            // Populate connected fields\n            properties = addConnectedFields(sectionType, appSchema, field, section, version);\n        }\n    }\n    // Now set up the field definition\n    appSchema.definitions[schemaKeyOfField] = {\n        type: 'object',\n        properties,\n        description: getDataFieldDescription(field, section.entityType),\n        additionalProperties: false\n    };\n    //Add tags\n    addKeysTagToField(field, appSchema, schemaKeyOfField);\n    appSchema.definitions[schemaKeyOfField][SchemaTag.annotationPath] = `/${entityTypeName}/${\n        field.fullyQualifiedName.split(entityTypeName)[1]\n    }`;\n    appSchema.definitions[schemaKeyOfField][SchemaTag.annotationType] = field.$Type;\n    appSchema.definitions[schemaKeyOfField][SchemaTag.isViewNode] = true;\n\n    addDataTypeToDefinition(appSchema.definitions[schemaKeyOfField] as Definition, field);\n\n    // Copy the generic definition of field properties to the specific one\n    copyFieldProperties(version, appSchema, field, schemaKeyOfField);\n    if (field.$Type === UIAnnotationTypes.DataFieldForAction && appSchema.definitions?.['FormAction']) {\n        (appSchema.definitions[schemaKeyOfField] as Definition).properties = (\n            appSchema.definitions[DefinitionName.FormAction] as Definition\n        ).properties;\n    }\n}\n\n/**\n * The function determines the target ID that shall be used in the app schema for a form\n * @param section - object describing the section or facet\n * @returns the target ID (string)\n */\nfunction determineTargetIdOfForm(section: FacetConfig) {\n    let targetID: string;\n    if (section.target && section.target['qualifier'] && section.entityType) {\n        targetID = `${section.entityType.name}::${section.base}::${section.target['qualifier']}`;\n    } else if (section.entityType) {\n        targetID = `${section.entityType.name}::${section.base}`;\n    } else {\n        targetID = section.ID;\n    }\n    return targetID;\n}\n\n/**\n * Adds the specific definitions of the form fields to a schema\n * @param {FacetConfig} section - section definition, as prepared from the annotations\n * @param {SectionType} sectionType - prefix to distinguish Section and HeaderSection\n * @param {object} appSchema - app specific schema that gets enhanced\n * @param {string } targetID - target id of form\n * @param {FioriElementsVersion} version - Fiori Elements version\n */\nfunction addFieldsToFormDefinition(\n    section: FacetConfig,\n    sectionType: SectionType,\n    appSchema: Definition,\n    targetID: string,\n    version: FioriElementsVersion,\n    withActions = true\n): void {\n    if (!section.target) {\n        return;\n    }\n    const formDefinition = prepareRef(`${sectionType}${DefinitionName.Form}<${targetID}>`);\n    const fieldsDefinition = prepareRef(`${sectionType}${DefinitionName.Fields}<${targetID}>`);\n    const actionsDefinition = prepareRef(`${sectionType}${DefinitionName.Actions}<${targetID}>`);\n\n    // Form definition\n    appSchema.properties['form'] = { $ref: `${DEFINITION_LINK_PREFIX}${formDefinition}` };\n\n    if (sectionType === SectionType.Section && withActions) {\n        appSchema['definitions'][formDefinition] = {\n            type: 'object',\n            properties: {\n                actions: {\n                    $ref: `${DEFINITION_LINK_PREFIX}${actionsDefinition}`\n                },\n                fields: { $ref: `${DEFINITION_LINK_PREFIX}${fieldsDefinition}` }\n            },\n            description: 'Form',\n            additionalProperties: false\n        };\n        appSchema['definitions'][actionsDefinition] = {\n            type: 'object',\n            properties: {},\n            description: 'Actions',\n            additionalProperties: false\n        };\n        appSchema['definitions'][actionsDefinition][SchemaTag.isViewNode] = true;\n    } else {\n        appSchema['definitions'][formDefinition] = {\n            type: 'object',\n            properties: {\n                fields: { $ref: `${DEFINITION_LINK_PREFIX}${fieldsDefinition}` }\n            },\n            description: 'Form',\n            additionalProperties: false\n        };\n    }\n    appSchema.definitions[formDefinition][SchemaTag.isViewNode] = true;\n\n    if (section.entityType?.name) {\n        appSchema.definitions[formDefinition][SchemaTag.annotationPath] = createAnnotationPath(\n            section.entityType.fullyQualifiedName,\n            section.target['term'],\n            section.target['qualifier']\n        );\n    }\n\n    // Fields definition\n    appSchema.definitions[fieldsDefinition] = {\n        type: 'object',\n        properties: {},\n        description: 'Fields',\n        additionalProperties: false\n    };\n    appSchema.definitions[fieldsDefinition][SchemaTag.isViewNode] = true;\n    // Add fields\n    if (section.base === FacetBase.Identification) {\n        for (const key in section.target) {\n            const field = section.target[key];\n            if (field) {\n                addField(sectionType, appSchema, field, targetID, key, section, version, withActions);\n            }\n        }\n    } else {\n        for (const key in section.target['Data']) {\n            const field = section.target['Data'][key];\n            addField(sectionType, appSchema, field, targetID, key, section, version);\n        }\n    }\n}\n\n/**\n * Adds the schema tags for a form definition\n * @param {FacetConfig} section - section definition, as prepared from the annotations\n * @param {object} appSchema - app specific schema that gets enhanced\n * @param {string} formDefinitionKey - key of the form definition in schema\n */\nfunction addTagsToFormDefinition(section: FacetConfig, appSchema: Definition, formDefinitionKey: string) {\n    if (section.target) {\n        const targetValue = section.target['qualifier']\n            ? `${section.target['term']}#${section.target['qualifier']}`\n            : `${section.target['term']}`;\n        appSchema.definitions[formDefinitionKey][SchemaTag.keys] = [\n            {\n                name: SchemaKeyName.target,\n                value: targetValue.replace(/com.sap.vocabularies.UI.v1./g, '')\n            }\n        ];\n        appSchema.definitions[formDefinitionKey][SchemaTag.target] =\n            section.target['fullyQualifiedName']?.split('@')[0];\n    }\n    appSchema.definitions[formDefinitionKey][SchemaTag.isViewNode] = true;\n\n    if (section.entityType?.name) {\n        appSchema.definitions[formDefinitionKey][SchemaTag.annotationPath] = createAnnotationPath(\n            section.entityType.fullyQualifiedName,\n            section.target['term'],\n            section.target['qualifier']\n        );\n    }\n}\n\n/**\n * Adds definitions for forms in object page sections to the app schema\n * @param {SectionType} sectionType - prefix to distinguish Section and HeaderSection\n * @param {FacetConfig} section - section definition, as prepared from the annotations\n * @param {object} appSchemaSection - current definition of facet or section in the JSON schema\n * @param {object} appSchema - app specific schema that gets enhanced\n * @param {FioriElementsVersion} version - Fiori Elements version\n * @param {string} facetKey - facet key\n * @returns {string | undefined} target id of form\n */\nexport function handleForm(\n    sectionType: SectionType,\n    section: FacetConfig,\n    appSchemaSection: Definition,\n    appSchema: Definition,\n    version: FioriElementsVersion,\n    facetKey: string\n): string | undefined {\n    if (!section.target) {\n        return;\n    }\n    const targetID: string = determineTargetIdOfForm(section);\n    const formDefinitionKey = prepareRef(`${sectionType}${DefinitionName.Form}<${targetID}>`);\n    const fieldsDefinitionKey = prepareRef(`${sectionType}${DefinitionName.Fields}<${targetID}>`);\n    const actionsDefinitionKey = prepareRef(`${sectionType}${DefinitionName.Actions}<${targetID}>`);\n    const withActions = section.base === FacetBase.Identification && facetKey.indexOf('#') < 0 ? false : true;\n\n    // Form definition\n    appSchemaSection.properties.form = { $ref: `${DEFINITION_LINK_PREFIX}${formDefinitionKey}` };\n\n    if (sectionType === SectionType.Section && withActions) {\n        appSchema.definitions[formDefinitionKey] = {\n            type: 'object',\n            properties: {\n                actions: {\n                    $ref: `${DEFINITION_LINK_PREFIX}${actionsDefinitionKey}`\n                },\n                fields: { $ref: `${DEFINITION_LINK_PREFIX}${fieldsDefinitionKey}` }\n            },\n            description: 'Form',\n            additionalProperties: false\n        };\n        appSchema.definitions[actionsDefinitionKey] = {\n            type: 'object',\n            properties: {},\n            description: 'Actions',\n            additionalProperties: false\n        };\n        appSchema.definitions[actionsDefinitionKey][SchemaTag.isViewNode] = true;\n    } else {\n        appSchema.definitions[formDefinitionKey] = {\n            type: 'object',\n            properties: {\n                fields: { $ref: `${DEFINITION_LINK_PREFIX}${fieldsDefinitionKey}` }\n            },\n            description: 'Form',\n            additionalProperties: false\n        };\n    }\n    //Add schema tags\n    addTagsToFormDefinition(section, appSchema, formDefinitionKey);\n\n    // Fields definition\n    appSchema.definitions[fieldsDefinitionKey] = {\n        type: 'object',\n        properties: {},\n        description: 'Fields',\n        additionalProperties: false\n    };\n    appSchema.definitions[fieldsDefinitionKey][SchemaTag.isViewNode] = true;\n    // Add fields\n    addFieldsToFormDefinition(section, sectionType, appSchema, targetID, version, withActions);\n    return targetID;\n}\n\n/**\n * Replaces an alias in an annotation ID or reference, based on the AVT references' list\n * @param annotationIdentifier - annotation ID or reference\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n * @returns the converted string\n */\nexport function replaceAlias(annotationIdentifier: string, oDataServiceAVT: ConvertedMetadata): string {\n    const potentialAlias = annotationIdentifier.indexOf('.') > -1 ? annotationIdentifier.split('.')[0] : undefined;\n    let result = annotationIdentifier;\n    if (potentialAlias && oDataServiceAVT) {\n        const searchTerm = potentialAlias.replace('SAP__', '');\n        const reference = oDataServiceAVT.references.find((ref) => {\n            return ref.alias === searchTerm;\n        });\n        if (reference) {\n            result = annotationIdentifier.replace(potentialAlias, reference.namespace);\n        }\n    }\n    return result;\n}\n\n/**\n * Common routine to determine the name and the ID of a header action\n * @param action - action as given by AVT\n * @returns an object comprising action name and action id\n */\n\nexport function getActionNameAndId(\n    item: any,\n    oDataServiceAVT: ConvertedMetadata\n): { actionName: string; actionId: string; namespace: string } {\n    const action = replaceAlias(item.Action, oDataServiceAVT);\n\n    let relevantAction = action;\n    let separatorIndex = action.indexOf('(');\n\n    if (separatorIndex > 0) {\n        relevantAction = action.substring(0, separatorIndex);\n    }\n    separatorIndex = relevantAction.lastIndexOf('/');\n    if (separatorIndex === -1) {\n        separatorIndex = relevantAction.lastIndexOf('.');\n    }\n    let actionName: string, actionId: string, namespace: string;\n    if (separatorIndex > -1) {\n        actionName = relevantAction.substring(separatorIndex + 1);\n        namespace = relevantAction.substring(0, separatorIndex);\n        actionId = `${relevantAction.substring(0, separatorIndex)}::${actionName}`;\n    } else {\n        actionName = relevantAction;\n        namespace = item.fullyQualifiedName.split('@')[0];\n        if (actionName && actionName !== '') {\n            actionId = `${namespace.substring(0, namespace.length - 1)}::${actionName}`;\n        }\n    }\n    return { actionName, actionId, namespace };\n}\n\n/**\n * Checks if requested Entity Set is same as first Object Page\n * @param {SapUiAppPagesV2} pages - pages found in manifest\n * @param {GenerateAppSchemaParameters} generateParameters - Schema parameters\n * @returns {boolean} If found Object Page is first Object Page\n */\nfunction isFirstObjectPage(pages: v2.SapUiAppPagesV2, generateParameters: GenerateAppSchemaParameters): boolean {\n    for (const key in pages) {\n        const element = pages[key];\n        if (element.component?.name === v2.FE_TEMPLATE_V2_OBJECT_PAGE) {\n            if (generateParameters.entitySet?.name === element.entitySet) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n        return isFirstObjectPage(element.pages, generateParameters);\n    }\n}\n\n/**\n * Add Object Page Footer Action Buttons to app-specific schema\n *\n * @param {object} appSchema Schema of the app\n * @param {GenerateAppSchemaParameters} generateParameters - Schema parameters\n * @param {FioriElementsVersion} version - Fiori elements versions\n * @param {SapUiAppPagesV2} pages - pages found in manifest\n */\nexport function addFooterActions(\n    appSchema: Definition,\n    generateParameters: GenerateAppSchemaParameters,\n    version?: FioriElementsVersion,\n    pages?: v2.SapUiAppPagesV2\n): void {\n    appSchema.definitions[DefinitionName.ObjectPageFooter] = JSON.parse(\n        JSON.stringify(appSchema.definitions[`${DefinitionName.ObjectPageFooter}<ObjectPageFooterActions>`])\n    );\n    // Change reference of footer\n    appSchema.properties['footer'] = {\n        $ref: `${DEFINITION_LINK_PREFIX}${DefinitionName.ObjectPageFooter}`\n    };\n    // Add action to configuration\n    (appSchema.definitions[DefinitionName.ObjectPageFooter] as Definition).properties[PropertyName.actions] = {\n        $ref: `${DEFINITION_LINK_PREFIX}${DefinitionName.FooterActions}`\n    };\n    const footerActions = (appSchema.definitions[DefinitionName.FooterActions] = {\n        type: 'object',\n        properties: {},\n        description: 'Actions',\n        additionalProperties: false\n    });\n    footerActions[SchemaTag.isViewNode] = true;\n\n    const alias = findAlias(UIVOCABULARY, generateParameters.serviceAVT);\n    const entityType = generateParameters.entitySet?.entityType;\n    const actionAnnotation = alias && entityType?.annotations?.[alias]?.Identification;\n    if (actionAnnotation) {\n        const convertedIdentification = actionAnnotation.fullyQualifiedName.replace(\n            `@${UIAnnotationTerms.Identification}`,\n            `/@${UIAnnotationTerms.Identification}`\n        );\n        footerActions[SchemaTag.annotationPath] = `/${convertedIdentification}`;\n        actionAnnotation.forEach((item, index) => {\n            if (item['Determining'] && item.$Type === UIAnnotationTypes.DataFieldForAction) {\n                const { actionName, actionId } = getActionNameAndId(item, generateParameters.serviceAVT);\n                const description = item.Label || actionName;\n                const actionDefinitionKey = prepareRef(`${DefinitionName.ObjectPageFooterAction}<${actionId}>`);\n                if (appSchema.definitions[DefinitionName.ObjectPageFooterAction]) {\n                    appSchema.definitions[actionDefinitionKey] = {\n                        ...JSON.parse(JSON.stringify(appSchema.definitions[DefinitionName.ObjectPageFooterAction])),\n                        description,\n                        annotationPath: `/${convertedIdentification}/${index}`\n                    };\n                } else {\n                    appSchema.definitions[actionDefinitionKey] = {\n                        type: 'object',\n                        properties: {},\n                        description: description\n                    };\n                    appSchema.definitions[actionDefinitionKey][SchemaTag.isViewNode] = true;\n                    appSchema.definitions[actionDefinitionKey][\n                        SchemaTag.annotationPath\n                    ] = `/${convertedIdentification}/${index}`;\n                }\n                footerActions.properties[actionId] = {\n                    $ref: `${DEFINITION_LINK_PREFIX}${actionDefinitionKey}`\n                };\n            }\n        });\n    } else if (entityType) {\n        footerActions[\n            SchemaTag.annotationPath\n        ] = `/${entityType.fullyQualifiedName}/@${UIAnnotationTerms.Identification}`;\n    }\n    if (\n        version === FioriElementsVersion.v2 &&\n        isFirstObjectPage(pages, generateParameters) &&\n        !isDraftEnabled(entityType)\n    ) {\n        addStandardFooterActionsOP(appSchema, footerActions);\n    }\n    delete appSchema.definitions[DefinitionName.ObjectPageFooterActions];\n    delete appSchema.definitions[`${DefinitionName.ObjectPageFooter}<${DefinitionName.ObjectPageFooterActions}>`];\n}\n\n/**\n * Add Object Page Header Action Buttons to app-specific schema\n * @param {object} appSchema Schema of the app\n * @param {EntityType} entityType - current entity type\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n */\nexport function addHeaderActions(\n    appSchema: Definition,\n    entityType: EntityType,\n    oDataServiceAVT: ConvertedMetadata,\n    addHeaderActionCallBack,\n    isV2 = false\n): void {\n    const actionsDefinition = DefinitionName.HeaderActions;\n    const actions = appSchema.definitions[actionsDefinition] as Definition;\n    (appSchema.definitions[DefinitionName.ObjectPageHeader] as Definition).properties[PropertyName.actions] = {\n        $ref: `${DEFINITION_LINK_PREFIX}${actionsDefinition}`\n    };\n    const headerActions = (appSchema.definitions[actionsDefinition] = {\n        type: 'object',\n        properties: {},\n        description: 'Actions',\n        additionalProperties: false\n    });\n    headerActions[SchemaTag.isViewNode] = true;\n\n    const alias = findAlias(UIVOCABULARY, oDataServiceAVT);\n    const identification = alias && entityType?.annotations?.[alias]?.Identification;\n\n    if (identification) {\n        headerActions[SchemaTag.annotationPath] =\n            '/' +\n            identification.fullyQualifiedName.replace(\n                `@${UIAnnotationTerms.Identification}`,\n                `/@${UIAnnotationTerms.Identification}`\n            );\n        identification.forEach(\n            addHeaderActionCallBack(entityType, appSchema, identification, headerActions, oDataServiceAVT)\n        );\n    } else if (entityType) {\n        headerActions[\n            SchemaTag.annotationPath\n        ] = `/${entityType.fullyQualifiedName}/@${UIAnnotationTerms.Identification}`;\n    }\n    if (isV2) {\n        // handle header actions\n        addStandardHeaderActions(appSchema, true, actions);\n    }\n    delete appSchema.definitions[DefinitionName.GenericActions];\n    delete appSchema.definitions[`${DefinitionName.ObjectPageHeader}<${DefinitionName.GenericActions}>`];\n}\n\n/**\n * Adds common Object Page Header definitions to the app schema\n * @param appSchema - app-specific JSOn schema\n * @param entityType - current entity Type\n */\nexport function addCommonHeaderSchema(appSchema: Definition, entityType: EntityType): void {\n    appSchema.properties['header'] = {\n        $ref: `${DEFINITION_LINK_PREFIX}${DefinitionName.ObjectPageHeader}`\n    };\n    appSchema.definitions[DefinitionName.ObjectPageHeader] = JSON.parse(\n        JSON.stringify(appSchema.definitions[`${DefinitionName.ObjectPageHeader}<${DefinitionName.GenericActions}>`])\n    );\n    if (entityType) {\n        appSchema.definitions[DefinitionName.ObjectPageHeader][\n            SchemaTag.annotationPath\n        ] = `/${entityType.fullyQualifiedName}/@${UIAnnotationTerms.HeaderInfo}`;\n    }\n}\n\n/**\n * Common logic to determine the EntitySet of a facet\n * @param facet - current facet or section\n * @param serviceAVT - AVT converter output, comprising all annotation information\n * @returns the entity set as defined in AVT, if found\n */\nexport function determineEntitySetOfFacet(facet: FacetConfig, serviceAVT: ConvertedMetadata): EntitySet | undefined {\n    return facet.entityType\n        ? serviceAVT.entitySets.find(\n              (es) => es.entityType.name === facet.entityType.name || es.name === facet.entityType.name\n          )\n        : undefined;\n}\n", "import { UIAnnotationTypes } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport { removeNamespaces } from '../../common/utils';\n\n/**\n * Stable Id helper (parts copied from sap.fe.core/helpers/StableIdHelper.ts)\n */\n\nexport function replaceSpecialChars(sId: string): string {\n    if (typeof sId !== 'string') {\n        return;\n    }\n    sId = sId\n        .replace(/^\\/|^@|^#|^\\*/, '') // remove special characters from the beginning of the string\n        .replace(/\\/$|@$|#$|\\*$/, '') // remove special characters from the end of the string\n        .replace(/[/@()#*]/g, '::'); // replace special characters with ::\n\n    // Replace double occurrences of the separator with a single separator\n    while (sId.indexOf('::::') > -1) {\n        sId = sId.replace('::::', '::');\n    }\n\n    // If there is a :: at the end of the ID remove it\n    if (sId.slice(-2) === '::') {\n        sId = sId.slice(0, -2);\n    }\n\n    return sId;\n}\n\nexport const prepareId = function (sId: string): string {\n    return replaceSpecialChars(removeNamespaces(sId));\n};\n\nfunction evaluateConcat(oValue: any) {\n    let sPathConcat = '';\n    for (const applyValue of oValue.Apply.Path) {\n        if (applyValue._text) {\n            if (sPathConcat) {\n                sPathConcat += '::';\n            }\n            sPathConcat += applyValue._text;\n        }\n    }\n    return sPathConcat;\n}\n\nexport function getStableIdPartFromValue(oValue: any): string | undefined {\n    if (oValue?.$Path || oValue?.path) {\n        return oValue.$Path || oValue.path;\n    }\n\n    if (oValue?.Apply?._attributes.Function === 'odata.concat') {\n        return evaluateConcat(oValue);\n    }\n\n    if (oValue) {\n        if (typeof oValue === 'string') {\n            return replaceSpecialChars(oValue.replace(/ /g, '_'));\n        }\n    }\n}\n\nexport const getStableIdPartFromSemanticObjectAndAction = function (oDataField: any): string {\n    let sIdPart = '';\n    if (typeof oDataField.SemanticObject === 'string') {\n        sIdPart += oDataField.SemanticObject;\n    } else if (oDataField.SemanticObject.$Path) {\n        sIdPart += oDataField.SemanticObject.$Path;\n    }\n    if (typeof oDataField.Action === 'string') {\n        sIdPart += '::' + oDataField.Action;\n    } else if (oDataField.Action && oDataField.Action.$Path) {\n        sIdPart += '::' + oDataField.Action.$Path;\n    }\n    if (oDataField['RequiresContext']) {\n        sIdPart += '::RequiresContext';\n    }\n    return sIdPart;\n};\n\nexport const getStableIdPartFromDataField = function (oDataField: any): string | undefined {\n    let sIdPart = '';\n\n    if (oDataField.$Type && oDataField.$Type === UIAnnotationTypes.DataFieldForAction) {\n        sIdPart = 'DataFieldForAction::';\n        sIdPart += oDataField.Action;\n        return prepareId(sIdPart);\n    } else if (oDataField.$Type && oDataField.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation) {\n        sIdPart = 'DataFieldForIntentBasedNavigation::';\n        sIdPart += getStableIdPartFromSemanticObjectAndAction(oDataField);\n        return sIdPart;\n    } else if (oDataField.$Type && oDataField.$Type === UIAnnotationTypes.DataFieldForAnnotation) {\n        sIdPart = 'DataFieldForAnnotation::';\n        sIdPart += prepareId(oDataField.Target.$AnnotationPath || oDataField.Target.value);\n        return sIdPart;\n    } else if (oDataField.$Type && oDataField.$Type === UIAnnotationTypes.DataFieldWithAction) {\n        sIdPart = 'DataFieldWithAction::';\n        if (oDataField.Value) {\n            sIdPart += getStableIdPartFromValue(oDataField.Value) + '::';\n        }\n        sIdPart += oDataField.Action;\n        return prepareId(sIdPart);\n    } else if (oDataField.$Type && oDataField.$Type === UIAnnotationTypes.DataField) {\n        sIdPart = 'DataField::';\n        sIdPart += getStableIdPartFromValue(oDataField.Value);\n        return prepareId(sIdPart);\n    } else if (oDataField.$Type && oDataField.$Type === UIAnnotationTypes.DataFieldWithIntentBasedNavigation) {\n        sIdPart = 'DataFieldWithIntentBasedNavigation::';\n        sIdPart += getStableIdPartFromValue(oDataField.Value) + '::';\n        sIdPart += getStableIdPartFromSemanticObjectAndAction(oDataField);\n        return prepareId(sIdPart);\n    } else if (oDataField.$Type && oDataField.$Type === UIAnnotationTypes.DataFieldWithNavigationPath) {\n        sIdPart = 'DataFieldWithNavigationPath::';\n        sIdPart += getStableIdPartFromValue(oDataField.Value);\n        if (oDataField.Target && oDataField.Target['$NavigationPropertyPath']) {\n            sIdPart += '::' + oDataField.Target['$NavigationPropertyPath'];\n        }\n        return prepareId(sIdPart);\n    } else if (oDataField.$Type && oDataField.$Type === UIAnnotationTypes.DataFieldWithUrl) {\n        sIdPart = 'DataFieldWithUrl::';\n        sIdPart += getStableIdPartFromValue(oDataField.Value);\n        return prepareId(sIdPart);\n    } else {\n        // In case of a string or unknown property\n        // Log.error(\"Stable ID Helper: Unable to create a stable ID. Please check the annotations.\");\n    }\n    return undefined;\n};\n", "import type { Definition } from 'typescript-json-schema';\nimport type { MetadataInstanceInterface } from '../../common/decoration/factory';\nimport type { v2, PageTypeV2, PageTypeV4, FileData, SyncRule } from '@sap/ux-specification-types';\nimport { ArtifactType, DefinitionName, SchemaTag, SchemaKeyName, ActionType } from '@sap/ux-specification-types';\nimport type { AnnotationTerm, EntityType } from '@sap-ux/vocabularies-types';\nimport type { DataFieldAbstractTypes, LineItem, SelectionFields } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport {\n    addKeyToDefinition,\n    getActionKey,\n    DEFINITION_LINK_PREFIX,\n    addDataTypeToDefinition,\n    addCommonLineItemDefinitions,\n    createAnnotationPath,\n    determineDataType,\n    getDataFieldDescription,\n    getLabelForPropertyPath,\n    getNextTargetDefinition,\n    getSchemaKeyOfLineItemRecord,\n    prepareRef,\n    addEnumToSchema\n} from '../../common';\nimport { getReflectMetadata } from '../../common/decoration/decorators';\nimport { UIAnnotationTypes, UIAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport { sep } from 'path';\nimport { xml2json } from 'xml-js';\nimport { ActionTypeV2 } from '../types';\n\n/**\n * Common function for enhancing the LineItems definiton of app schema by custom columns\n * @param appSchema - app-specific JSON schema\n * @param customColumnsDefinitionName - custom column definition name (plural)\n * @param customColumnDefinitionName - custom column definition name (singular)\n */\nfunction addCustomColumnDefinition(\n    appSchema: Definition,\n    customColumnsDefinitionName: string,\n    customColumnDefinitionName: string\n): void {\n    if (appSchema.definitions[DefinitionName.LineItems]) {\n        (appSchema.definitions[DefinitionName.LineItems] as Definition).properties['custom'] = {\n            $ref: `${DEFINITION_LINK_PREFIX}${customColumnsDefinitionName}`\n        };\n    }\n    appSchema.definitions[customColumnsDefinitionName] = {\n        type: 'array',\n        items: {\n            $ref: `${DEFINITION_LINK_PREFIX}${customColumnDefinitionName}`\n        },\n        description: 'Custom Columns'\n    };\n    appSchema.definitions[customColumnsDefinitionName][SchemaTag.isViewNode] = true;\n    const extensionType = (appSchema.definitions[customColumnDefinitionName] as Definition).properties['extensionType'];\n    if (extensionType) {\n        extensionType[SchemaTag.artifactType] = ArtifactType.Manifest;\n    }\n}\n\n/**\n * Prepares and returns id of action for further use and reference\n * @param actionType - type of action\n * @param lineItemProperties - properties of the line item collection: lineItemPath, lineItemRecord, lineItemId\n * @returns {string} actionId\n */\nfunction getActionId(\n    actionType: ActionTypeV2,\n    lineItemProperties: { lineItemPath: any; lineItemRecord: any; lineItemId: any; entityType: EntityType }\n): string {\n    let actionId: string;\n    if (actionType === ActionTypeV2.ColumnIntentBased) {\n        actionId = getSchemaKeyOfLineItemRecord(lineItemProperties.lineItemRecord);\n    } else if (actionType === ActionTypeV2.ToolBarIntentBased || actionType === ActionTypeV2.FooterIntentBased) {\n        actionId = prepareRef(\n            `${lineItemProperties.lineItemRecord.SemanticObject}::${lineItemProperties.lineItemRecord.Action}`\n        );\n    } else if (\n        actionType === ActionTypeV2.Column &&\n        lineItemProperties.lineItemRecord.$Type === UIAnnotationTypes.DataFieldForAction\n    ) {\n        actionId = prepareRef(`DataFieldForAction:::sAction::${lineItemProperties.lineItemRecord.Action}`);\n    } else {\n        actionId = prepareRef(lineItemProperties.lineItemRecord.Action);\n    }\n    if (lineItemProperties.lineItemId && lineItemProperties.lineItemId !== 'LineItems') {\n        return `${lineItemProperties.lineItemId}??${actionId}`;\n    } else {\n        return actionId;\n    }\n}\n\n/**\n * Processes a LineItem record of type DataFieldForAction and DataFieldForIntentBasedNavigation during app schema generation\n * @param appSchema - the app specific schema that shall get enhanced\n * @param entityType - the entity type as part of the AVT ConvertedMetadata\n * @param actions - actions definition in schema, parent object\n * @param lineItemProperties - properties of the line item collection: lineItemPath, lineItemRecord, lineItemId\n * @param actionType - type of action\n * @param recordIndex - record index in the collection\n */\nexport function handleActionRecord(\n    appSchema: Definition,\n    actions: Definition,\n    lineItemProps: { lineItemPath; lineItemRecord; lineItemId; entityType: EntityType },\n    actionType: ActionTypeV2,\n    recordIndex: number\n): void {\n    let actionReferenceType;\n    const actionTemplate = lineItemProps.lineItemId === DefinitionName.LineItems ? '' : 'ObjectPage';\n    const actionId = getActionId(actionType, lineItemProps);\n\n    if (actionType === ActionTypeV2.Footer || actionType === ActionTypeV2.FooterIntentBased) {\n        actionReferenceType = `Action`;\n        actionType = ActionTypeV2.Footer;\n    } else if (actionType === ActionTypeV2.Column || actionType === ActionTypeV2.ColumnIntentBased) {\n        actionReferenceType = `TableColumnAction`;\n    } else {\n        actionReferenceType = actionTemplate !== '' ? `${actionTemplate}${actionType}` : `Action`;\n        actionType = ActionTypeV2.ToolBar;\n    }\n    const actionDefinition = `${actionTemplate}${actionType}<${actionId}>`;\n    const description = getDataFieldDescription(\n        lineItemProps.lineItemRecord as DataFieldAbstractTypes,\n        lineItemProps.entityType\n    );\n    actions.properties[actionId] = {\n        $ref: DEFINITION_LINK_PREFIX + actionDefinition\n    };\n    actions.properties[actionId][SchemaTag.propertyIndex] = recordIndex;\n    const { key, ns } = getActionKey(lineItemProps.lineItemRecord.Action, true);\n    if (appSchema.definitions[actionReferenceType]) {\n        appSchema.definitions[actionDefinition] = {\n            ...JSON.parse(JSON.stringify(appSchema.definitions[actionReferenceType])),\n            description,\n            keys: [{ name: 'Action', value: key }],\n            annotationPath: `${lineItemProps.lineItemPath}/${recordIndex}`\n        };\n        if (ns) {\n            appSchema.definitions[actionDefinition][SchemaTag.target] = ns;\n        }\n    } else {\n        appSchema.definitions[actionDefinition] = {\n            type: 'object',\n            properties: {},\n            description,\n            additionalProperties: false\n        };\n        appSchema.definitions[actionDefinition][SchemaTag.isViewNode] = true;\n        appSchema.definitions[actionDefinition][SchemaTag.keys] = [{ name: SchemaKeyName.action, value: key }];\n        if (ns) {\n            appSchema.definitions[actionDefinition][SchemaTag.target] = ns;\n        }\n        appSchema.definitions[actionDefinition][\n            SchemaTag.annotationPath\n        ] = `${lineItemProps.lineItemPath}/${recordIndex}`;\n    }\n}\n\n/**\n * Returns the type of a column lineItem action\n * @param lineItemId - optional: in case of OP the parameter must be passed to distinguish the OP tables;\n * @param {object} lineItemRecord - actual record of the line item collection\n * @param actionTypes - array of action types to be filled\n */\nfunction getColumnActionType(lineItemId: string, lineItemRecord, actionTypes: ActionTypeV2[]) {\n    if (\n        lineItemId !== DefinitionName.LineItems &&\n        lineItemRecord.Inline === true &&\n        (lineItemRecord.$Type === UIAnnotationTypes.DataFieldForAction ||\n            lineItemRecord.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation)\n    ) {\n        actionTypes.push(ActionTypeV2.OPColumn);\n    } else if (lineItemRecord.Inline === true && lineItemRecord.$Type === UIAnnotationTypes.DataFieldForAction) {\n        actionTypes.push(ActionTypeV2.Column);\n    } else if (\n        lineItemRecord.Inline === true &&\n        lineItemRecord.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation\n    ) {\n        actionTypes.push(ActionTypeV2.ColumnIntentBased);\n    }\n}\n\n/**\n * Returns the type of a lineItem action\n * @param {object} lineItemRecord - actual record of the line item collection\n * @returns {string[] | undefined } ActionTypeV2[] - action type(s) of the lineItem\n */\nfunction getActionType(lineItemRecord: DataFieldAbstractTypes, lineItemId: string): ActionTypeV2[] | undefined {\n    const actionTypes: ActionTypeV2[] = [];\n    if (\n        lineItemRecord.$Type !== UIAnnotationTypes.DataFieldForAction &&\n        lineItemRecord.$Type !== UIAnnotationTypes.DataFieldForIntentBasedNavigation\n    ) {\n        return undefined;\n    }\n    if (\n        lineItemRecord.Inline !== true &&\n        lineItemRecord.Determining !== true &&\n        lineItemRecord.$Type === UIAnnotationTypes.DataFieldForAction\n    ) {\n        actionTypes.push(ActionTypeV2.ToolBar);\n    } else if (\n        lineItemRecord.Inline !== true &&\n        lineItemRecord.Determining !== true &&\n        lineItemRecord.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation\n    ) {\n        actionTypes.push(ActionTypeV2.ToolBarIntentBased);\n    } else if (lineItemRecord.Determining === true && lineItemRecord.$Type === UIAnnotationTypes.DataFieldForAction) {\n        actionTypes.push(ActionTypeV2.Footer);\n    } else if (\n        lineItemRecord.Determining === true &&\n        lineItemRecord.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation\n    ) {\n        actionTypes.push(ActionTypeV2.FooterIntentBased);\n    }\n    getColumnActionType(lineItemId, lineItemRecord, actionTypes);\n    return actionTypes;\n}\n\ntype LineItemProperties = {\n    lineItemPath: string;\n    lineItemRecord: DataFieldAbstractTypes;\n    lineItemId: string;\n    entityType: EntityType;\n};\n\nfunction generateGenericColumn(lineItemProperties: LineItemProperties, appSchema: Definition, recordIndex: number) {\n    const schemaKey = getSchemaKeyOfLineItemRecord(lineItemProperties.lineItemRecord);\n    if (schemaKey) {\n        const lineItemDefinition = appSchema.definitions[lineItemProperties.lineItemId] as Definition;\n        lineItemDefinition.properties[schemaKey] = {\n            $ref: DEFINITION_LINK_PREFIX + DefinitionName.TableColumn,\n            description: getDataFieldDescription(lineItemProperties.lineItemRecord, lineItemProperties.entityType)\n            // Custom property in schema - for object properties ordering purpose\n        };\n        lineItemDefinition.properties[schemaKey][SchemaTag.propertyIndex] = recordIndex;\n        lineItemDefinition.properties[schemaKey][\n            SchemaTag.annotationPath\n        ] = `${lineItemProperties.lineItemPath}/${recordIndex}`;\n        addDataTypeToDefinition(\n            lineItemDefinition.properties[schemaKey] as Definition,\n            lineItemProperties.lineItemRecord\n        );\n        addKeyToDefinition(lineItemProperties.lineItemRecord, lineItemDefinition.properties, schemaKey);\n    }\n}\n\nfunction handleAnyAction(\n    actionType: ActionTypeV2,\n    appSchema: Definition,\n    actions: object,\n    lineItemProperties: LineItemProperties,\n    recordIndex: number,\n    footerActions: object,\n    lineItemId: string\n) {\n    switch (actionType) {\n        case ActionTypeV2.ToolBar:\n        case ActionTypeV2.ToolBarIntentBased: {\n            handleActionRecord(appSchema, actions, lineItemProperties, actionType, recordIndex);\n            break;\n        }\n        case ActionTypeV2.Footer:\n        case ActionTypeV2.FooterIntentBased: {\n            if (footerActions) {\n                handleActionRecord(appSchema, footerActions, lineItemProperties, actionType, recordIndex);\n            }\n            break;\n        }\n        case ActionTypeV2.Column:\n        case ActionTypeV2.ColumnIntentBased: {\n            handleActionRecord(\n                appSchema,\n                appSchema.definitions[lineItemId] as Definition,\n                lineItemProperties,\n                actionType,\n                recordIndex\n            );\n            break;\n        }\n        case ActionTypeV2.OPColumn: {\n            generateGenericColumn(lineItemProperties, appSchema, recordIndex);\n        }\n    }\n}\n\n/**\n * Adds the line item records to the app schema (for the list report or an object page section comprising a table)\n * @param appSchema - the app specific schema that shall get enhanced\n * @param lineItemAnnotation - the UI.LineItem annotation, comprising all records\n * @param entityType - the entity type as part of the AVT ConvertedMetadata\n * @param lineItemId - optional: in case of OP the parameter must be passed to distinguish the OP tables;\n *                      in case of LR or ALP no ID is passed, 'LineItems' is taken then.\n * @param customColumnRef - schema reference to custom column definition.\n */\nexport function addLineItemsType(\n    appSchema: Definition,\n    lineItemAnnotation: AnnotationTerm<LineItem>,\n    entityType: EntityType,\n    lineItemId?: string,\n    customColumnRef?: string\n): void {\n    // Add the correct lineItem definition\n    lineItemId = lineItemId || DefinitionName.LineItems;\n\n    const { actions, footerActions, lineItemPath } = addCommonLineItemDefinitions(\n        appSchema,\n        lineItemAnnotation,\n        entityType,\n        lineItemId\n    );\n\n    if (lineItemAnnotation) {\n        let recordIndex = 0;\n        lineItemAnnotation.forEach((lineItemRecord) => {\n            const lineItemProperties: LineItemProperties = { lineItemPath, lineItemRecord, lineItemId, entityType };\n            const actionTypes = getActionType(lineItemRecord, lineItemId);\n            if (actionTypes) {\n                actionTypes.forEach((actionType) => {\n                    handleAnyAction(\n                        actionType,\n                        appSchema,\n                        actions,\n                        lineItemProperties,\n                        recordIndex,\n                        footerActions,\n                        lineItemId\n                    );\n                });\n            } else {\n                generateGenericColumn(lineItemProperties, appSchema, recordIndex);\n            }\n            recordIndex++;\n        });\n    }\n    if (customColumnRef) {\n        (appSchema.definitions[lineItemId] as Definition).properties['custom'] = {\n            $ref: `${DEFINITION_LINK_PREFIX}${customColumnRef}`\n        };\n    }\n}\n\n/**\n * Adds enum entries of possible leading properties for 'leadingProperty' property in TableCustomColumn properties.\n * @param appSchema - the app specific schema that shall get enhanced\n * @param entityType - the entity type as part of the AVT ConvertedMetadata\n * @param definitionName - definition name of CustomColumn definition\n */\nexport function addListReportLeadingProperties(\n    appSchema: Definition,\n    entityType: EntityType,\n    definitionName: string\n): void {\n    // Leading Property\n    const leadingPropertySchema = appSchema.definitions[definitionName]?.['properties']?.[\n        'leadingProperty'\n    ] as Definition;\n    if (leadingPropertySchema) {\n        const properties = [\n            //  Entity properties\n            ...(entityType?.entityProperties || []),\n            // Navigation Properties\n            ...(entityType?.navigationProperties || [])\n        ];\n        leadingPropertySchema['enum'] = properties?.reduce((result: string[], property) => {\n            if (!result.includes(property.name)) {\n                result.push(property.name);\n            }\n            return result;\n        }, []);\n    }\n}\n\n/**\n * Adds enum entries of posible tabKey properties for 'leadingProperty' property in TableCustomColumn properties.\n * @param appSchema - the app specific schema that shall get enhanced\n * @param definitionName - definition name of CustomColumn definition\n * @param page - sapui5 page object\n * @param {string} facet ID -  The facet ID\n */\nexport function addTabkeyEnum(\n    appSchema: Definition,\n    definitionName: string,\n    page?: v2.SapUiAppPageV2,\n    facetID?: string\n): void {\n    const tabkeyPropertySchema = appSchema.definitions[definitionName]?.['properties']?.['tabKey'];\n    if (!page) {\n        if (facetID) {\n            tabkeyPropertySchema.description =\n                'In case of Object Page, the tabkey in manifest is equivalent to the facet ID.';\n            tabkeyPropertySchema['enum'] = [facetID];\n        }\n        return;\n    }\n    const quickVariantsX = page.component?.settings?.quickVariantSelectionX?.['variants'];\n    if (quickVariantsX) {\n        const enumEntries = [];\n        Object.keys(quickVariantsX).reduce((result: string[], variant) => {\n            const key =\n                quickVariantsX[variant] && quickVariantsX[variant]['key'] !== undefined\n                    ? quickVariantsX[variant]['key']\n                    : undefined;\n            // Avoid duplicates\n            if (key !== undefined && !result.includes(key)) {\n                result.push(key);\n            }\n            return result;\n        }, enumEntries);\n        addEnumToSchema(enumEntries, tabkeyPropertySchema);\n    }\n}\n\n/**\n * Adds enum entries of posible fragment entries.\n * @param {object} appSchema The app specific schema that shall get enhanced.\n * @param {FileData[]} fragments Array of fragments.\n * @param {string[]} appId Application id.\n * @param {string} property Property name.\n * @param {string} definitionName Definition name of CustomColumn definition.\n */\nexport function addFragmentEnum(\n    appSchema: Definition,\n    fragments: FileData[],\n    appId: string,\n    property: string,\n    definitionName: string\n): void {\n    if (!fragments || !appId || appId.startsWith('${')) {\n        return;\n    }\n    const enumEntries = [];\n    fragments.forEach((fragment) => {\n        let relPath = fragment.dataSourceUri.split('webapp')[1];\n        if (relPath && relPath.indexOf('.fragment.xml') > 0) {\n            const fragmentJson = JSON.parse(xml2json(fragment.fileContent, { compact: true }))[\n                'core:FragmentDefinition'\n            ];\n            if (\n                (property === 'fragmentName' &&\n                    (!fragmentJson ||\n                        fragmentJson.Column ||\n                        fragmentJson['table:Column'] ||\n                        fragmentJson['table:AnalyticalColumn'])) ||\n                (property === 'cellsFragmentName' &&\n                    (!fragmentJson ||\n                        (!fragmentJson.Column &&\n                            !fragmentJson['table:Column'] &&\n                            !fragmentJson['table:AnalyticalColumn'] &&\n                            !fragmentJson['smartfilterbar:ControlConfiguration'])))\n            ) {\n                relPath = relPath.replace(new RegExp('\\\\' + sep, 'g'), '/');\n                const fragmentName = appId + relPath.split('.fragment.xml')[0].replace(/\\//g, '.');\n                enumEntries.push(fragmentName);\n            }\n        }\n    });\n    addEnumToSchema(enumEntries, appSchema.definitions[definitionName]?.['properties']?.[property]);\n}\n\n/**\n * Adds the custom columns to the line item records of the app schema (for the list report comprising a table).\n * @param {object} appSchema The app specific schema that shall get enhanced.\n * @param {EntityType} entityType The entity type as part of the AVT ConvertedMetadata.\n * @param {SapUiAppPageV2} page Sapui5 page object.\n * @param {object} manifest Application manifest.\n * @param {FileData[]} [fragments] Array of fragments.\n * @param {string} [customColumnsDefinitionName=DefinitionName.CustomColumns] Definition name of Custom Columns definition.\n * @param {string} [customColumnDefinitionName=DefinitionName.CustomColumn] Definition name of Custom Column definition.\n * @param {string} facetID -  Facet ID\n */\nexport function addTableColumnExtensions(\n    appSchema: object,\n    entityType: EntityType,\n    page: v2.SapUiAppPageV2,\n    manifest: object,\n    fragments?: FileData[],\n    customColumnsDefinitionName: string = DefinitionName.CustomColumns,\n    customColumnDefinitionName: string = DefinitionName.CustomColumn,\n    facetID?: string\n): void {\n    addCustomColumnDefinition(appSchema, customColumnsDefinitionName, customColumnDefinitionName);\n\n    // Leading Property\n    addListReportLeadingProperties(appSchema, entityType, customColumnDefinitionName);\n    // Tab key property\n    addTabkeyEnum(appSchema, customColumnDefinitionName, page, facetID);\n    // Fragment property\n    const appId = manifest && manifest['sap.app'] && manifest['sap.app']['id'];\n    addFragmentEnum(appSchema, fragments, appId, 'fragmentName', customColumnDefinitionName);\n    //tools-suite does not distinguish by section ID, looks at the generic entry\n    addFragmentEnum(appSchema, fragments, appId, 'fragmentName', DefinitionName.CustomColumn);\n    addFragmentEnum(appSchema, fragments, appId, 'cellsFragmentName', customColumnDefinitionName);\n    addFragmentEnum(appSchema, fragments, appId, 'cellsFragmentName', DefinitionName.CustomColumn);\n}\n\n/**\n * Processes an anyOf definition of the generic schema\n * @param propertyDefinition - current definition in the generic schema\n * @param schema - the app-specific schema\n * @param propertyKey - key of the single property\n * @param factory - factory for creating metadata instances\n * @param pageType - page type\n */\nfunction processAnyOf(\n    propertyDefinition: any,\n    schema: object,\n    propertyKey: string,\n    factory: MetadataInstanceInterface,\n    pageType: PageTypeV2 | PageTypeV4\n) {\n    propertyDefinition['anyOf'].forEach((element) => {\n        const nextDefinition = getNextTargetDefinition(schema, '', {}, element, propertyKey, factory, pageType);\n        if (nextDefinition) {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            processMetadata(schema, nextDefinition.targetDefinition, nextDefinition.configObject, pageType, factory);\n        }\n    });\n}\n\n/**\n * Processes an object reference of the generic schema\n * @param schema\n * @param propertyDefinition - current definition in the generic schema\n * @param propertyKey - key of the single property\n * @param factory - factory for creating metadata instances\n * @param pageType - page type\n */\nfunction processObject(\n    schema: object,\n    propertyDefinition: any,\n    propertyKey: string,\n    factory: MetadataInstanceInterface,\n    pageType: PageTypeV2 | PageTypeV4\n) {\n    const nextDefinition = getNextTargetDefinition(schema, '', {}, propertyDefinition, propertyKey, factory, pageType);\n    if (nextDefinition) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        processMetadata(schema, nextDefinition.targetDefinition, nextDefinition.configObject, pageType, factory);\n    }\n}\n\n/**\n * Determines the artifact type of a property and adds it to the property definition in schema\n * @param syncRule - sync rule of the current property\n * @param propertyDefinition - current definition in the generic schema\n */\nfunction addArtifactType(syncRule: SyncRule, propertyDefinition: any) {\n    if (syncRule.manifest !== undefined) {\n        propertyDefinition.artifactType = ArtifactType.Manifest;\n    } else if (syncRule.flex !== undefined) {\n        propertyDefinition.artifactType = ArtifactType.FlexChange;\n        //Add control type\n        if (syncRule.flex.controlType) {\n            propertyDefinition.controlType = syncRule.flex.controlType();\n        }\n    } else {\n        propertyDefinition.artifactType = ArtifactType.Annotation;\n    }\n}\n\n/**\n * After the generation of a generic schema, apply post-generation rule to a single property\n * @param metaDataDefinition\n * @param schema - given app schema, to be adapted\n * @param pageType - page type\n * @param factory - factory for creating metadata instances\n * @param propertyDefinition - definition of the single property\n * @param propertyKey - key of the single property\n * @param schemaDefinition - the current entry point or definition in the app schema\n */\nfunction processSingleProperty(\n    metaDataDefinition: { [key: string]: any },\n    schema: object,\n    pageType: PageTypeV2 | PageTypeV4,\n    factory: MetadataInstanceInterface,\n    propertyDefinition: any,\n    propertyKey: string,\n    schemaDefinition: object\n): void {\n    if (metaDataDefinition) {\n        const syncRule = getReflectMetadata(metaDataDefinition, propertyKey);\n        if (syncRule) {\n            if (typeof syncRule.generate === 'function') {\n                syncRule.generate(schema, schemaDefinition, propertyKey);\n                propertyDefinition = schemaDefinition['properties'][propertyKey];\n            }\n            //Add artifact type\n            addArtifactType(syncRule, propertyDefinition);\n        }\n        if (propertyDefinition.type === 'object' || propertyDefinition.$ref) {\n            processObject(schema, propertyDefinition, propertyKey, factory, pageType);\n        } else if (propertyDefinition['anyOf']) {\n            processAnyOf(propertyDefinition, schema, propertyKey, factory, pageType);\n        }\n    }\n}\n\n/**\n * After the generation of a generic schema, apply rules to a list of properties of the given schema section\n * @param schema - given app schema, to be adapted\n * @param schemaDefinition - the current entry point or definition in the app schema\n * @param pageType - page type\n * @param factory - factory for creating metadata instances\n */\nfunction processProperties(\n    schema: object,\n    schemaDefinition: object,\n    metaDataDefinition: { [key: string]: any },\n    propertiesSection: string,\n    pageType: PageTypeV2 | PageTypeV4,\n    factory: MetadataInstanceInterface\n) {\n    if (schemaDefinition[propertiesSection]) {\n        for (const propertyKey in schemaDefinition[propertiesSection]) {\n            if (propertyKey === 'anyOf') {\n                processAnyOf(schemaDefinition[propertiesSection], schema, propertyKey, factory, pageType);\n            } else {\n                const propertyDefinition = schemaDefinition[propertiesSection][propertyKey];\n                if (propertyDefinition['anyOf']) {\n                    processAnyOf(propertyDefinition, schema, propertyKey, factory, pageType);\n                } else if (propertyKey === '$ref') {\n                    processObject(schema, schemaDefinition[propertiesSection], propertyKey, factory, pageType);\n                } else {\n                    processSingleProperty(\n                        metaDataDefinition,\n                        schema,\n                        pageType,\n                        factory,\n                        propertyDefinition,\n                        propertyKey,\n                        schemaDefinition\n                    );\n                }\n            }\n        }\n    }\n}\n\n/**\n * Apply post-processing rules as specified in form of \"generate\" at the syncRule\n * @param schema - given app schema, to be adapted\n * @param schemaDefinition - the current entry point or definition in the app schema\n * @param pageType - page type\n * @param factory - factory for creating metadata instances\n */\nexport function processMetadata(\n    schema: object,\n    schemaDefinition: object,\n    metaDataDefinition: { [key: string]: any },\n    pageType: PageTypeV2 | PageTypeV4,\n    factory: MetadataInstanceInterface\n): void {\n    processProperties(schema, schemaDefinition, metaDataDefinition, 'properties', pageType, factory);\n    processProperties(schema, schemaDefinition, metaDataDefinition, 'additionalProperties', pageType, factory);\n    processProperties(schema, schemaDefinition, metaDataDefinition, 'patternProperties', pageType, factory);\n}\n\n/**\n * Method updates passed 'enum' array by removing passed matching entries.\n * @param {Array<unknown>} values Array of values.\n * @param {Array<unknown>} valuesToRemove Array of values to remove.\n */\nexport function removeElementsFromEnum(values: Array<unknown>, valuesToRemove: Array<unknown>): void {\n    for (const value of valuesToRemove) {\n        const index = values.indexOf(value);\n        if (index !== -1) {\n            // Value exists - remove it\n            values.splice(index, 1);\n        }\n    }\n}\n\n/**\n * Adds the selection fields to the app schema, as properties of the Filterbar\n * @param entityType - the entity type as part of the AVT ConvertedMetadata\n * @param appSchema - the app specific schema that shall get enhanced\n * @param selectionFieldsAnnotation - the UI.SelectionField annotation\n */\nexport function addSelectionFields(\n    appSchema: Definition,\n    selectionFieldsAnnotation: AnnotationTerm<SelectionFields>,\n    entityType: EntityType\n): void {\n    appSchema.definitions.SelectionFields = {\n        ...(appSchema.definitions.SelectionFields as object),\n        properties: {},\n        additionalProperties: false\n    };\n    const selectionFieldsDefinition = appSchema.definitions.SelectionFields;\n    const annotationPath = createAnnotationPath(entityType?.fullyQualifiedName, UIAnnotationTerms.SelectionFields);\n    if (annotationPath) {\n        selectionFieldsDefinition[SchemaTag.annotationPath] = annotationPath;\n    }\n    if (!selectionFieldsAnnotation) {\n        return;\n    }\n    let i = 0;\n    selectionFieldsAnnotation.forEach((selectionField) => {\n        let description = selectionField.value;\n        const fieldDefinition = `SelectionField<${prepareRef(selectionField.value)}>`;\n        const dataType = determineDataType(selectionField);\n        if (selectionField.type === 'PropertyPath') {\n            description = getLabelForPropertyPath(selectionField, entityType);\n        }\n        selectionFieldsDefinition.properties[selectionField.value] = {\n            $ref: DEFINITION_LINK_PREFIX + fieldDefinition\n        };\n        selectionFieldsDefinition.properties[selectionField.value][SchemaTag.propertyIndex] = i;\n        appSchema.definitions[fieldDefinition] = {\n            type: 'object',\n            description,\n            additionalProperties: false\n        };\n        appSchema.definitions[fieldDefinition][SchemaTag.isViewNode] = true;\n        appSchema.definitions[fieldDefinition][SchemaTag.annotationType] = selectionField?.type;\n        appSchema.definitions[fieldDefinition][SchemaTag.dataType] = dataType;\n        appSchema.definitions[fieldDefinition][SchemaTag.keys] = [\n            { name: SchemaKeyName.value, value: `${selectionField.value}` }\n        ];\n        appSchema.definitions[fieldDefinition][SchemaTag.annotationPath] = `${\n            selectionFieldsDefinition[SchemaTag.annotationPath]\n        }/${i}`;\n\n        if (['Date', 'DateTime', 'DateTimeOffset'].includes(dataType)) {\n            appSchema.definitions[fieldDefinition]['$ref'] = `${DEFINITION_LINK_PREFIX}SelectionFieldDateSettings`;\n        } else {\n            appSchema.definitions[fieldDefinition]['properties'] = {};\n        }\n        i++;\n    });\n}\n\n/**\n * Checks if app is draft-enabled\n * @param {EntityType} entityType Entity Type of the page\n * @returns if app is draft enabled\n */\nexport function isDraftEnabled(entityType: EntityType): boolean {\n    const hasDraftAdministrativeData = entityType.navigationProperties.find(\n        (property) => property.name === 'DraftAdministrativeData'\n    );\n    return !!hasDraftAdministrativeData;\n}\n\n/**\n * Adds standard header actions to schema (LR, ALP or OP)\n * @param {Definition} appSchema - app-specific JSON schema\n * @param {boolean} isOP - flag to add to either LR/ALP or OP definition\n * @param {Definition} actions - optional standard actions definition\n */\nexport function addStandardHeaderActions(appSchema: Definition, isOP = false, actions?: Definition): void {\n    // add standard header actions definitions\n    let headerActionsDefinitionKey = DefinitionName.HeaderActionsStandard;\n    let headerActionsKey = DefinitionName.HeaderActionsStandard;\n    let actionDefinition = DefinitionName.HeaderActionStandard;\n    if (isOP) {\n        headerActionsDefinitionKey = DefinitionName.GenericActions;\n        headerActionsKey = DefinitionName.HeaderActions;\n        actionDefinition = DefinitionName.ObjectPageHeaderActionStandard;\n    }\n    const headerActionsDefinition = appSchema.definitions[headerActionsDefinitionKey] as Definition;\n    const headerActions = appSchema.definitions[headerActionsKey] as Definition;\n    headerActions[SchemaTag.isViewNode] = true;\n    headerActions.description = 'Actions';\n    const standardActions = actions || headerActionsDefinition;\n    Object.entries(standardActions.properties).forEach(([name, definition]) => {\n        const actionRef = definition['$ref'].split(DEFINITION_LINK_PREFIX)[1];\n        const actionKey = `${actionDefinition}<${actionRef}>`;\n        headerActions.properties[name] = { $ref: `${DEFINITION_LINK_PREFIX}${actionKey}` };\n        appSchema.definitions[actionKey] = appSchema.definitions[actionRef];\n        appSchema.definitions[actionRef][SchemaTag.actionType] = ActionType.Standard;\n    });\n}\n\n/**\n * Adds standard footer actions to schema of Object Page\n * @param {Definition} appSchema - app-specific JSON schema\n * @param {EntityType} entityType Entity Type of the page\n * @param {Definition} actions - optional standard actions definition\n */\nexport function addStandardFooterActionsOP(appSchema: Definition, actions: Definition): void {\n    const standardActions = appSchema.definitions[DefinitionName.ObjectPageFooterActions] as Definition;\n    for (const action in standardActions.properties) {\n        const actionRef = standardActions.properties[action]['$ref'].split(DEFINITION_LINK_PREFIX)[1];\n        const actionKey = `${DefinitionName.ObjectPageFooterActionStandard}<${actionRef}>`;\n        actions.properties[action] = { $ref: `${DEFINITION_LINK_PREFIX}${actionKey}` };\n        appSchema.definitions[actionKey] = appSchema.definitions[actionRef];\n        appSchema.definitions[actionRef][SchemaTag.actionType] = ActionType.Standard;\n    }\n}\n", "import type { UI5Version, ExtensionLogger, ExportResults } from '../..';\nimport type { v2, PageTypeV2 } from '@sap/ux-specification-types';\nimport type { FlexChangesForTransfer } from './import/controls/table';\nimport type { MetadataFactory, MetadataInstanceInterface } from '../common/decoration/factory';\nimport type * as v2controls from './export/controls';\nimport type * as v2pages from './export/pages';\nimport type { Definition } from 'typescript-json-schema';\n\nexport type V2Controls = typeof v2controls;\nexport type V2Pages = typeof v2pages;\n\nexport type TransferParameterTypeV2 = {\n    v2Page: v2.SapUiAppPageV2;\n    exportResults: ExportResults;\n    appId: string;\n    baseId: string;\n    appSchema: object;\n    ui5Version: UI5Version;\n    factory: MetadataFactory;\n    pageKeys: string[];\n    pageType: PageTypeV2;\n    logger: ExtensionLogger;\n    propertyDefinition?: object;\n    nextDefinition?: object;\n};\n\nexport const MULTISELECTTABLE = 'ResponsiveTableWithMultiSelect<LineItems>';\nexport const INLINEDELETETABLE = 'ResponsiveTableWithInlineDelete<LineItems>';\nexport const TREETABLE = 'TreeTable<LineItems>';\nexport const ANALYTICALTABLE = 'AnalyticalTable<LineItems>';\nexport const GRIDTABLE = 'GridTable<LineItems>';\n\nexport const OP_STANDARD_HEADER_ACTION_PREFIX = 'template::';\nexport const OP_STANDARD_FOOTER_ACTION_PREFIX = 'template:::ObjectPageAction:::';\n\nexport enum SectionTypeV2 {\n    SectionAddress = 'ObjectPageSectionAddressV2',\n    SectionChart = 'ObjectPageSectionChartV2',\n    SectionContact = 'ObjectPageSectionContactV2',\n    SectionForm = 'ObjectPageSectionFormV2',\n    Section = 'ObjectPageSectionV2',\n    SubSection = 'ObjectPageSubSectionV2',\n    SectionTable = 'ObjectPageSectionTableV2',\n    SubSectionForm = 'ObjectPageSubSectionFormV2',\n    SubSectionTable = 'ObjectPageSubSectionTableV2',\n    SubSectionAddress = 'ObjectPageSubSectionAddressV2',\n    SubSectionContact = 'ObjectPageSubSectionContactV2',\n    SubSectionChart = 'ObjectPageSubSectionChartV2'\n}\n\nexport enum ActionTypeV2 {\n    Form = 'FormAction',\n    Header = 'HeaderAction',\n    OPToolBar = 'ObjectPageToolBarAction',\n    OPFooter = 'ObjectPageFooterAction',\n    OPColumn = 'ObjectPageTableColumnAction',\n    ToolBar = 'ToolBarAction',\n    Footer = 'FooterAction',\n    Column = 'TableColumnAction',\n    ToolBarIntentBased = 'ToolBarActionIntentBased',\n    FooterIntentBased = 'FooterActionIntentBased',\n    ColumnIntentBased = 'TableColumnActionIntentBased',\n    HeaderStandard = 'HeaderActionStandard',\n    OPHeaderStandard = 'ObjectPageHeaderActionStandard',\n    OPFooterStandard = 'ObjectPageFooterActionStandard'\n}\n\nexport type ObjectPageV2ConfigParameters = {\n    factory: MetadataInstanceInterface;\n    pageKeys: string[];\n    flexChanges: FlexChangesForTransfer;\n    v2Page: v2.SapUiAppPageV2;\n    objectPageConfig?: v2.ObjectPageConfigV2;\n};\n\nexport type SectionPartProperties = {\n    id?: string;\n    type?: SectionTypeV2;\n    schema?: Definition;\n    title?: string;\n};\n", "import type { AnnotationTerm, ConvertedMetadata, EntitySet, EntityType } from '@sap-ux/vocabularies-types';\nimport type { LineItem } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport { UIAnnotationTypes, UIAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport type { Definition, DefinitionOrBoolean } from 'typescript-json-schema';\nimport type { SectionTypeV2 } from '../../v2/types';\nimport type { PresentationVariantV4 } from '../../v4/types';\nimport {\n    DEFINITION_LINK_PREFIX,\n    createAnnotationPath,\n    prepareRef,\n    addSectionTitleAndDescription,\n    replaceNamespaces\n} from '..';\nimport type { FacetConfig, FacetSection, SectionType } from '@sap/ux-specification-types';\nimport { DefinitionName, SchemaTag, SchemaKeyName, UIVOCABULARY } from '@sap/ux-specification-types';\nimport { getStableIdPartFromValue } from '../../v4/utils/StableIdHelper';\n\n/**\n * Adds enum values to the app schema. Either as 'enum' -  if multiple entries exist,\n * or as 'const', if it is only a single value\n * @param enumEntries - array of strings for setting up the enum definition\n * @param currentDefinition - currentDefinition in the schema\n */\nexport function addEnumToSchema(enumEntries: string[], currentDefinition: Definition) {\n    if (!currentDefinition) {\n        return;\n    }\n    if (enumEntries.length > 0) {\n        if (enumEntries.length > 1) {\n            currentDefinition.enum = enumEntries;\n        } else {\n            currentDefinition.const = enumEntries[0];\n        }\n    }\n}\n\n/**\n * Adds an enum filled with existing UI annotations of the given list (validAnnotations)\n * @param {EntityType} entityType\n * @param {UIAnnotationTerms[]} validAnnotations\n * @param {Definition} annoPath - the annotation path property in the app schema where the enum shall be added\n */\nexport function addEnumForValidAnnotations(\n    entityType: EntityType,\n    validAnnotations: UIAnnotationTerms[],\n    annoPath: Definition\n): void {\n    const UiAnnotations = entityType?.annotations?.UI;\n    if (!UiAnnotations) {\n        return;\n    }\n    const enumEntries = [];\n    for (const key in UiAnnotations) {\n        const annotation = UiAnnotations[key];\n        if (validAnnotations.indexOf(annotation.term) > -1) {\n            const enumEntry = annotation.qualifier\n                ? `${annotation.term}#${annotation.qualifier}`\n                : `${annotation.term}`;\n            if (enumEntries.indexOf(enumEntry) === -1) {\n                enumEntries.push(enumEntry);\n            }\n        }\n    }\n    addEnumToSchema(enumEntries, annoPath);\n}\n\n/**\n * Adds an enum filled with existing UI annotations for single-tab variants of a table\n * @param {EntityType} entityType\n * @param {Definition} appSchema - app specific JSON schema\n * @param definitionName - name of the definition in the app schema\n */\nexport function addEnumForSingleTabVariant(\n    entityType: EntityType,\n    appSchema: Definition,\n    definitionName: string\n): void {\n    const annoPath = (appSchema.definitions[definitionName] as Definition).properties[SchemaTag.annotationPath];\n    const validAnnotations = [UIAnnotationTerms.SelectionVariant, UIAnnotationTerms.SelectionPresentationVariant];\n    addEnumForValidAnnotations(entityType, validAnnotations, annoPath as Definition);\n}\n\n/**\n * Adds an enum filled with existing UI annotations for multi-tab variants of a table\n * @param appSchema - app specific JSOn schema\n * @param definitionName - name of the definition in the app schema\n * @param {EntitySet} entitySet - current entity set of the page or view\n */\nexport function addEnumForMultiTabVariant(appSchema: Definition, definitionName: string, entitySet: EntitySet): void {\n    const annoPath = (appSchema.definitions[definitionName] as Definition)?.properties.annotationPath;\n    const validAnnotations = [UIAnnotationTerms.SelectionVariant, UIAnnotationTerms.SelectionPresentationVariant];\n    addEnumForValidAnnotations(entitySet.entityType, validAnnotations, annoPath as Definition);\n}\n\n/**\n * Adds the enum values for entitySet as part of the multiple view scenario\n * @param {ConvertedMetadata} oDataServiceAVT - combined service metadata, as returned by annotation vocabularies tools\n * @param appSchema - app specific JSOn schema\n * @param definitionName - name of the definition in the app schema\n */\nexport function addEnumForVariantEntitySet(\n    oDataServiceAVT: ConvertedMetadata,\n    appSchema: Definition,\n    definitionName: string\n): void {\n    const entitySet = (appSchema.definitions[definitionName] as Definition).properties.entitySet as Definition;\n    const enumEntries = [];\n    if (!oDataServiceAVT) {\n        return;\n    }\n\n    oDataServiceAVT.entitySets.forEach((es: EntitySet) => {\n        enumEntries.push(es.name);\n    });\n    addEnumToSchema(enumEntries, entitySet);\n}\n\n/**\n * Method adds definition for 'RelatedFacetKeys' as enum with description and adds references to 'RelatedFacetKeys' for custom section definitions.\n * @param {object} appSchema App specific schema that potentially gets enhanced\n * @param {string[]>} sectionDefinitions array of section definitions which should be updated with new reference to 'RelatedFacetKeys' enum.\n * @param {FacetSection[]} facetSections Array of facet section objects which is used to generate enum values.\n * @param {Array<keyof Omit<FacetSection, 'custom'>>} idProperties Array of property names which should be looked up in 'FacetSection' object.\n *  Please note that method depends on order and takes first non empty value associated to passed properties.\n */\nexport function addDefinitionForRelatedFacetKeys(\n    appSchema: Definition,\n    sectionDefinitions: string[],\n    facetSections: FacetSection[],\n    idProperties: Array<keyof Omit<FacetSection, 'custom'>>\n): void {\n    const oneOfSections = facetSections.map((section: FacetSection) => {\n        // Loop acceptable properties in received order and find first entry with value\n        const propertyName = idProperties.find((property) => !!section[property]);\n        const schemaIdForSection = section[propertyName];\n        const label = section.label || section.title;\n        return {\n            const: schemaIdForSection,\n            ...(label && { description: label }),\n            ...(section.custom && { custom: section.custom })\n        };\n    });\n    // Change 'relatedFacet' only when we have entries for sections - otherwise use generic.\n    if (oneOfSections.length) {\n        // Create new definition in schema as 'oneOf'.\n        // Simpler way would be to use 'enum', but then there no option to pass description.\n        appSchema.definitions[DefinitionName.RelatedFacetKeys] = {\n            type: 'string',\n            oneOf: oneOfSections\n        } as Definition;\n\n        // Add enum definition\n        for (const name of sectionDefinitions) {\n            const definition = appSchema.definitions[name] as Definition;\n            const property = definition.properties['relatedFacet'];\n            definition.properties['relatedFacet'] = {\n                anyOf: [\n                    {\n                        ...(typeof property === 'object' ? property : undefined),\n                        $ref: `${DEFINITION_LINK_PREFIX}${DefinitionName.RelatedFacetKeys}`\n                    },\n                    property\n                ]\n            };\n        }\n    }\n}\n\n/**\n * Receives a facet key and returns the key as used in schema\n * @param facetKey - key of the facet, as used in annotation\n * @returns facetKeyInSchema - key of the facet, as used in schema\n */\nexport function getFacetKeyInSchema(facetKey: string): string {\n    return facetKey.replace('#', '::');\n}\n\n/**\n * Returns the name of a facet and definition, as key in definition\n * @param definition name of definition, as used in schema\n * @param facetKey - key of the facet, as used in annotation\n * @returns definition key of facet, as used in definition\n */\nfunction getFacetDefinitionKey(definition: string, facetKey: string): string {\n    return `${definition}<${getFacetKeyInSchema(facetKey)}>`;\n}\n\n/**\n * Adds an existing schema definition to a new definition in the app schema\n * @param definition name of definition, as used in schema\n * @param facetKey - key of the facet, as used in annotation\n * @param {Definition} appSchema App schema in general\n * @param {boolean} useDefinitionAsKey If set to false, facet key will solely be used as key, else encapsulated within definition key `definition<facetKey>`\n * @param subDefinitionName - sub definition, if different from the definition (e.g. subsection vs. section)\n * @returns {Definition} part of app schema that has been added and filled\n */\nexport function parseSchemaDefinition(\n    definition: string,\n    facetKey: string,\n    appSchema: Definition,\n    useDefinitionAsKey = true,\n    subDefinitionName?: DefinitionName\n): Definition {\n    let facetDefinitionKey = facetKey;\n    if (useDefinitionAsKey) {\n        facetDefinitionKey = getFacetDefinitionKey(subDefinitionName ? subDefinitionName : definition, facetKey);\n    }\n    if (definition && definition !== facetDefinitionKey) {\n        const schemaDefinition = JSON.parse(JSON.stringify(appSchema.definitions[definition])) as Definition;\n        appSchema.definitions[facetDefinitionKey] = schemaDefinition;\n    }\n    return appSchema.definitions[facetDefinitionKey] as Definition;\n}\n\n/**\n * Functions used both by V2 and V4 to add the common definitions for a line item to the app schema\n * @param appSchema - the app specific schema that shall get enhanced\n * @param lineItemAnnotation - the UI.LineItem annotation, comprising all records\n * @param entityType - the entity type as part of the AVT ConvertedMetadata\n * @param lineItemId - line item ID, as comprise in stable ID\n * @returns the actions definition plus the annotation path to the given line item\n */\nexport function addCommonLineItemDefinitions(\n    appSchema: Definition,\n    lineItemAnnotation: AnnotationTerm<LineItem>,\n    entityType: EntityType,\n    lineItemId: string,\n    customColumnDefinitionName?: string\n): { actions: Definition; footerActions: Definition; lineItemPath: string } {\n    let lineItemPath: string;\n\n    appSchema.definitions[lineItemId] = {\n        type: 'object',\n        properties: {},\n        description: 'Columns'\n    };\n    (appSchema.definitions[lineItemId] as Definition).additionalProperties = false;\n    appSchema.definitions[lineItemId][SchemaTag.isViewNode] = true;\n    let additionalPropertiesRef: string;\n    if (\n        lineItemId === DefinitionName.LineItems ||\n        lineItemId === 'LineItemsOfSPV::LineItem' ||\n        lineItemId === '@com.sap.vocabularies.UI.v1.LineItem'\n    ) {\n        additionalPropertiesRef = `${DEFINITION_LINK_PREFIX}${customColumnDefinitionName}`;\n    } else {\n        additionalPropertiesRef = `${DEFINITION_LINK_PREFIX}${customColumnDefinitionName}<${lineItemId}>`;\n        parseSchemaDefinition(customColumnDefinitionName, lineItemId, appSchema, true);\n    }\n    (appSchema.definitions[lineItemId] as Definition).additionalProperties = customColumnDefinitionName\n        ? { $ref: `${additionalPropertiesRef}` }\n        : false;\n    // Copy toolbar\n    const toolBar = lineItemId.startsWith(DefinitionName.LineItems)\n        ? DefinitionName.ToolBar\n        : DefinitionName.ObjectPageToolBar;\n    const schemaIdForToolBar = `${toolBar}<${lineItemId}>`;\n    appSchema.definitions[schemaIdForToolBar] = JSON.parse(JSON.stringify(appSchema.definitions[`${toolBar}`]));\n\n    const schemaIdForActions = `${DefinitionName.Actions}<${prepareRef(lineItemId)}>`;\n    (appSchema.definitions[schemaIdForToolBar] as Definition).properties.actions['$ref'] =\n        DEFINITION_LINK_PREFIX + schemaIdForActions;\n\n    const actionId = lineItemId.startsWith(DefinitionName.LineItems)\n        ? DefinitionName.Actions\n        : DefinitionName.ObjectPageToolBarActions;\n    const actions = (appSchema.definitions[schemaIdForActions] = JSON.parse(\n        JSON.stringify(appSchema.definitions[actionId])\n    ));\n    actions.properties = {};\n    actions.additionalProperties = false;\n\n    // Copy LR footer\n    let footerActions, schemaIdForFooter;\n    if (lineItemId === DefinitionName.LineItems && appSchema.properties['footer']) {\n        schemaIdForFooter = `${DefinitionName.Footer}<${lineItemId}>`;\n        (appSchema.properties['footer'] as Definition).$ref = `${DEFINITION_LINK_PREFIX}${schemaIdForFooter}`;\n\n        appSchema.definitions[schemaIdForFooter] = JSON.parse(\n            JSON.stringify(appSchema.definitions[DefinitionName.GenericFooter])\n        );\n        const schemaIdForFooterActions = `${DefinitionName.FooterActions}<${prepareRef(lineItemId)}>`;\n        (appSchema.definitions[schemaIdForFooter] as Definition).properties.actions['$ref'] =\n            DEFINITION_LINK_PREFIX + schemaIdForFooterActions;\n\n        footerActions = appSchema.definitions[schemaIdForFooterActions] = JSON.parse(\n            JSON.stringify(appSchema.definitions[DefinitionName.Actions])\n        );\n        footerActions.properties = {};\n        footerActions.additionalProperties = false;\n    }\n    //Determine annotation path\n    if (lineItemAnnotation) {\n        lineItemPath = createAnnotationPath(\n            entityType?.fullyQualifiedName,\n            lineItemAnnotation.term,\n            lineItemAnnotation.qualifier\n        );\n        if (lineItemPath) {\n            appSchema.definitions[lineItemId][SchemaTag.annotationPath] = appSchema.definitions[schemaIdForToolBar][\n                SchemaTag.annotationPath\n            ] = lineItemPath;\n            if (footerActions) {\n                appSchema.definitions[schemaIdForFooter][SchemaTag.annotationPath] = lineItemPath;\n            }\n        }\n    }\n\n    return { actions, footerActions, lineItemPath };\n}\n\nexport enum DataType {\n    String = 'String',\n    Rating = 'Rating',\n    Progress = 'Progress',\n    DataPoint = 'DataPoint',\n    Contact = 'Contact',\n    Address = 'Address',\n    Chart = 'Chart',\n    FieldGroup = 'FieldGroup',\n    IntentBasedNavigation = 'IntentBasedNavigation'\n}\n\n/**\n * Common logic to build the dataType tag from an annotation type\n * @param {string} annotation - the annotation type\n * @returns the dataType as string\n */\nexport function getDataTypeFromAnnotation(annotation: string): string {\n    const dataType = annotation.substring(annotation.lastIndexOf('.') + 1);\n    return dataType.replace(/Type$/, '');\n}\n\n/**\n * Determines the dataType of the target that shall be added to a property in schema\n * @param target - the given target\n * @returns - the dataType as string\n */\nexport function determineDataTypeOfTarget(target: any): string | undefined {\n    let dataType: string;\n\n    if (target.Value) {\n        if (target.Visualization === 'UI.VisualizationType/Rating') {\n            dataType = DataType.Rating;\n        } else if (target.Visualization === 'UI.VisualizationType/Progress') {\n            dataType = DataType.Progress;\n        } else if (target.$Type === 'com.sap.vocabularies.UI.v1.DataPointType') {\n            dataType = DataType.DataPoint;\n        } else {\n            dataType = target.Value?.$target?.type.replace('Edm.', '');\n        }\n    } else if (target.$Type?.startsWith('com.sap.vocabularies.')) {\n        dataType = getDataTypeFromAnnotation(target.$Type);\n    }\n    return dataType;\n}\n\n/**\n * Determines the dataType that shall be added to a property in schema, for any kind of field like\n * - field of a field group\n * - line item record\n * - selection field\n * @param field - the given field\n * @returns - the dataType as string\n */\nexport function determineDataType(field: object): string | undefined {\n    let dataType: string;\n\n    if (field['Value']) {\n        if (field['Value'].$target?.type) {\n            dataType = field['Value'].$target.type.replace('Edm.', '');\n        } else {\n            dataType = DataType.String;\n        }\n    } else if (field['Target']) {\n        dataType = determineDataTypeOfTarget(field['Target'].$target);\n    } else if (field['$target']) {\n        dataType = field['$target'].type.replace('Edm.', '');\n    } else if (field['$Type']?.startsWith('com.sap.vocabularies.')) {\n        dataType = getDataTypeFromAnnotation(field['$Type']);\n    } else if (field['type']) {\n        dataType = field['type'];\n    }\n\n    return dataType;\n}\n\n/**\n * Adds the dataType to the given schema field definition, if the data type cane be determined\n * @param definition - given schema definition\n * @param field - given field definition = annotation property, at AVT\n */\nexport function addDataTypeToDefinition(definition: object, field: object): void {\n    const dataType = determineDataType(field);\n    if (dataType) {\n        definition[SchemaTag.dataType] = dataType;\n    }\n}\n\n/**\n * Creates a definition link for a facet and definition name\n * @param {DefinitionName} definition - name of definition, as used in schema\n * @param {string} facetKey - key of the facet, as used in annotation\n * @returns definition link of facet, as used in definition\n */\nexport function getFacetDefinitionLink(definition: DefinitionName | SectionTypeV2, facetKey: string): string {\n    return `${DEFINITION_LINK_PREFIX}${getFacetDefinitionKey(definition, facetKey)}`;\n}\n\n/**\n * Creates and adds a reference link to a definition\n * @param {Definition} schemaPart - part of schema to add $ref to\n * @param {string} schemaRef - reference to be added\n * @param {string} schemaKey - key to be encapsulated within reference as `schemaRef<schemaKey>`\n * @returns reference link of facet, as used in definition\n */\nexport function addDefinitionRef(schemaPart: Definition, schemaRef: string, schemaKey?: string): void {\n    const schemaLink = schemaKey ? `${schemaRef}<${schemaKey}>` : schemaRef;\n    schemaPart.$ref = `${DEFINITION_LINK_PREFIX}${schemaLink}`;\n}\n\n/**\n * Extracts annotationPath from facet or Chart/LineItem fullyQualifiedName\n * @param facet facet or Chart/LineItem\n * @returns {string} annotationPath\n */\nexport function getFacetAnnotationPath(facet: FacetConfig | PresentationVariantV4 | object): string | undefined {\n    if ((facet as FacetConfig).annotationPath) {\n        return (facet as FacetConfig).annotationPath;\n    } else if ((facet as PresentationVariantV4).fullyQualifiedName) {\n        const [namespace, target] = (facet as PresentationVariantV4).fullyQualifiedName.split(`@${UIVOCABULARY}`);\n        return `/${namespace}/@${UIVOCABULARY}${target}`;\n    }\n    return undefined;\n}\n\n/**\n * Adds definitions for Address and Contact items in object page sections to the app schema\n * @param {FacetConfig} facet - current facet.\n * @param {string} facetKey - facet key.\n * @param {object} sections - schema of current sections definition.\n * @param {object} appSchema - app specific schema that potentially gets enhanced.\n * @param {SectionType} sectionPrefix - prefix to distinguish Section and HeaderSection\n */\nexport function handleAddressContact(\n    facet: FacetConfig,\n    facetKey: string,\n    sections: Definition,\n    appSchema: Definition,\n    sectionPrefix: SectionType,\n    subSectionPrefix?: SectionType,\n    versionPostfix = ''\n) {\n    const definitionName = `ObjectPage${sectionPrefix}${facet.base}${versionPostfix}` as DefinitionName;\n    const subDefinitionName = `ObjectPage${subSectionPrefix}${facet.base}${versionPostfix}` as DefinitionName;\n    sections.properties[facetKey] = {\n        $ref: getFacetDefinitionLink(subSectionPrefix ? subDefinitionName : definitionName, facetKey)\n    };\n    const definition = parseSchemaDefinition(\n        subSectionPrefix ? subDefinitionName : definitionName,\n        facetKey,\n        appSchema,\n        true,\n        subSectionPrefix ? subDefinitionName : undefined\n    );\n    addSectionTitleAndDescription(facet, definition, facetKey);\n    definition[SchemaTag.annotationPath] = facet.annotationPath;\n    definition[SchemaTag.isViewNode] = true;\n}\n\n/**\n * Method updates schema definition's property.\n * @param {DefinitionOrBoolean} definition Definition object.\n * @param {string} key Property name.\n * @param {unknown} value New value.\n */\nfunction updateSchemaProperty(definition: DefinitionOrBoolean, key: string, value: unknown): void {\n    if (typeof definition === 'object') {\n        definition[key] = value;\n    }\n}\n\n/**\n * Add schema definitions for fields of createWithParameterDialog\n * @param {object} appSchema - Application-specific schema, to be enhanced\n * @param {EntityType} entityType - Given entity type for which entries shall get generated\n * @param {string=} suffix - floorplan specific suffix (optional)\n */\nexport function addFieldsType(appSchema: Definition, entityType: EntityType, suffix = prepareRef('')): void {\n    const itemsEnum = entityType.entityProperties.map((property) => property.name);\n    const fields4Dialog = appSchema.definitions[`${DefinitionName.Fields4Dialog}${suffix}`] as Definition;\n    updateSchemaProperty(fields4Dialog.properties.fields['items'], 'enum', itemsEnum);\n}\n\n/**\n * Extracts the key of an action that shall be added to schema as SchemaTag.keys\n * @param action - full-blown action ID\n * @param isAction - indicates an action\n * @returns action ID stripped down to the last key part\n */\nexport function getActionKey(action: string, isAction: boolean): { key: string; ns: string } {\n    let actionKey = action;\n    let namespace;\n    if (actionKey.indexOf('(') > 0) {\n        actionKey = actionKey.substring(0, actionKey.indexOf('('));\n    }\n    if (isAction && actionKey.indexOf('/') > 0) {\n        namespace = actionKey.substring(0, actionKey.indexOf('/'));\n        actionKey = actionKey.substring(actionKey.lastIndexOf('/') + 1);\n    }\n    if (isAction && actionKey.indexOf('.') > 0) {\n        namespace = actionKey.substring(0, actionKey.lastIndexOf('.'));\n        actionKey = actionKey.substring(actionKey.lastIndexOf('.') + 1);\n    }\n    if (!namespace) {\n        namespace = action.substring(0, action.lastIndexOf('.'));\n    }\n    return { key: actionKey.replace(/@/g, ''), ns: namespace };\n}\n\n/**\n * Adds the schema tag key to a line item record or property in schema\n * @param lineItemRecord - the given line item record\n * @param properties - list of all properties in schema\n * @param schemaKey - key of the given property\n */\nexport function addKeyToDefinition(lineItemRecord: object, properties: object, schemaKey: string): void {\n    if (lineItemRecord['Value']) {\n        properties[schemaKey][SchemaTag.keys] = [\n            { name: SchemaKeyName.value, value: getStableIdPartFromValue(lineItemRecord['Value']) }\n        ];\n    } else if (\n        lineItemRecord['$Type'] === UIAnnotationTypes.DataFieldWithAction ||\n        lineItemRecord['$Type'] === UIAnnotationTypes.DataFieldForAction\n    ) {\n        const { key, ns } = getActionKey(lineItemRecord['Action'], true);\n        properties[schemaKey][SchemaTag.keys] = [{ name: SchemaKeyName.action, value: key }];\n        if (ns) {\n            properties[schemaKey][SchemaTag.target] = ns;\n        }\n    } else if (lineItemRecord['$Type'] === UIAnnotationTypes.DataFieldForAnnotation) {\n        const { key } = getActionKey(lineItemRecord['Target'].value, false);\n        properties[schemaKey][SchemaTag.keys] = [{ name: SchemaKeyName.target, value: replaceNamespaces(key) }];\n        properties[schemaKey][SchemaTag.target] = lineItemRecord['Target'].$target.fullyQualifiedName.split('@')[0];\n    } else if (\n        lineItemRecord['$Type'] === UIAnnotationTypes.DataFieldForIntentBasedNavigation ||\n        lineItemRecord['$Type'] === UIAnnotationTypes.DataFieldWithIntentBasedNavigation\n    ) {\n        properties[schemaKey][SchemaTag.keys] = [\n            { name: `SemanticObject`, value: lineItemRecord[SchemaKeyName.semanticObject] },\n            { name: `Action`, value: lineItemRecord['Action'] }\n        ];\n    }\n}\n", "import type { ExtensionLogger } from '@sap/ux-specification-types';\nimport { LogSeverity, MANIFESTPATH } from '@sap/ux-specification-types';\nimport { log } from '../../extensionLogger';\nimport i18next from 'i18next';\nimport * as distTagsJSON from './dist_tag.json';\nimport { version as packageJsonVersion } from '../../../package.json';\n\nexport class DistTagEvaluator {\n    static distTagsOfSpec: string[] = [];\n\n    constructor() {\n        if (DistTagEvaluator.distTagsOfSpec.length === 0) {\n            DistTagEvaluator.distTagsOfSpec = this.getDistTagsOfVersion();\n        }\n    }\n\n    /**\n     * Resets the buffered list of dist tags (used for unit tests)\n     */\n    static resetDistTagsOfSpec(): void {\n        DistTagEvaluator.distTagsOfSpec = [];\n    }\n\n    /**\n     * Retrieves the actual spec version from package.json\n     * @returns the version, if found in package.json\n     */\n    public getSpecVersion(): string | undefined {\n        return packageJsonVersion;\n    }\n\n    /**\n     * Determines the relevant list of dist tags for the current spec version.\n     * The dist tags are read from the dist_tag.json (copy from https://github.wdf.sap.corp/NPMJS/FIORI_ELEMENT_SPECIFICATION-1.0.0/blob/master/dist_tag.json).\n     * The spec vrsion is read from package.json.\n     * @returns an array of the dist tags\n     */\n    public getDistTagsOfVersion(): string[] {\n        let result: string[] = [];\n        const distTags = distTagsJSON.distTags;\n\n        let specVersion = this.getSpecVersion();\n        if (specVersion) {\n            if (specVersion.startsWith('9.9.9')) {\n                //master ==> take the newest version\n                result = distTags[0].distTag;\n            } else {\n                specVersion = specVersion.substring(0, specVersion.lastIndexOf('.'));\n                const tag = distTags.find((tag) => tag.version.startsWith(specVersion));\n                if (tag) {\n                    result = tag.distTag;\n                }\n            }\n        }\n        return result;\n    }\n\n    /**\n     * Checks if the given minUI5Version and spec version fit together, based on the distTags stord in ./dist_tag.json\n     * @param {string} minUI5Version - minUI5Version from manifest\n     * @param {ExtensionLogger} logger - logger as passed from the API\n     */\n    public doesUi5VersionFitDistTags(minUI5Version: string, logger: ExtensionLogger): void {\n        //env variable is used by tests to disable the check, as test projects may not correspond to the given spec version\n        if (process.env.SPEC_NO_VERSION_CHECK === 'true') {\n            return;\n        }\n        if (!minUI5Version || minUI5Version.startsWith('$')) {\n            const message = i18next.t('UNKNOWNMINUI5VERSION', { minUI5Version });\n            log(logger, {\n                severity: LogSeverity.Info,\n                message,\n                location: {\n                    path: MANIFESTPATH\n                }\n            });\n            return;\n        }\n        const actualVersion =\n            minUI5Version === 'latest' ? 'latest' : minUI5Version.substring(0, minUI5Version.lastIndexOf('.'));\n        if (!DistTagEvaluator.distTagsOfSpec.includes(actualVersion)) {\n            const message = i18next.t('WRONGMINUI5VERSION', { minUI5Version });\n            log(logger, {\n                severity: LogSeverity.Warning,\n                message,\n                location: {\n                    path: MANIFESTPATH\n                }\n            });\n        }\n    }\n}\n", "{\n  \"schema-version\": \"1.0\",\n  \"externalRepository\": \"npmjs.org\",\n  \"org\": \"sap\",\n  \"project\": \"ux-specification\",\n  \"rootPpmsObjectId\": \"73555000100200012888\",\n  \"rootPpmsObject\": \"FIORI ELEMENT SPEC 1.0\",\n  \"distTags\": [\n    {\n      \"version\": \"1.120\",\n      \"distTag\": [\n        \"latest\",\n        \"UI5-1.120\",\n        \"UI5-1.121\",\n        \"UI5-1.122\",\n        \"UI5-1.123\",\n        \"UI5-1.124\"\n      ]\n    },\n    {\n      \"version\": \"1.108\",\n      \"distTag\": [\n        \"UI5-1.108\",\n        \"UI5-1.109\",\n        \"UI5-1.110\",\n        \"UI5-1.111\",\n        \"UI5-1.112\",\n        \"UI5-1.113\",\n        \"UI5-1.114\",\n        \"UI5-1.115\",\n        \"UI5-1.116\",\n        \"UI5-1.117\",\n        \"UI5-1.118\",\n        \"UI5-1.119\"\n      ]\n    },\n    {\n      \"version\": \"1.102\",\n      \"distTag\": [\n        \"UI5-1.100\",\n        \"UI5-1.101\",\n        \"UI5-1.102\",\n        \"UI5-1.103\",\n        \"UI5-1.104\",\n        \"UI5-1.105\",\n        \"UI5-1.106\",\n        \"UI5-1.107\"\n      ]\n    },\n    {\n      \"version\": \"1.96\",\n      \"distTag\": [\n        \"UI5-1.90\",\n        \"UI5-1.91\",\n        \"UI5-1.92\",\n        \"UI5-1.93\",\n        \"UI5-1.94\",\n        \"UI5-1.95\",\n        \"UI5-1.96\",\n        \"UI5-1.97\",\n        \"UI5-1.98\",\n        \"UI5-1.99\"\n      ]\n    },\n    {\n      \"version\": \"1.84\",\n      \"distTag\": [\n        \"UI5-1.78\",\n        \"UI5-1.79\",\n        \"UI5-1.80\",\n        \"UI5-1.81\",\n        \"UI5-1.82\",\n        \"UI5-1.83\",\n        \"UI5-1.84\",\n        \"UI5-1.85\",\n        \"UI5-1.86\",\n        \"UI5-1.87\",\n        \"UI5-1.88\",\n        \"UI5-1.89\"\n      ]\n    },\n    {\n      \"version\": \"1.71\",\n      \"distTag\": [\n        \"UI5-1.52\",\n        \"UI5-1.53\",\n        \"UI5-1.54\",\n        \"UI5-1.55\",\n        \"UI5-1.56\",\n        \"UI5-1.57\",\n        \"UI5-1.58\",\n        \"UI5-1.59\",\n        \"UI5-1.60\",\n        \"UI5-1.61\",\n        \"UI5-1.62\",\n        \"UI5-1.63\",\n        \"UI5-1.64\",\n        \"UI5-1.65\",\n        \"UI5-1.66\",\n        \"UI5-1.67\",\n        \"UI5-1.68\",\n        \"UI5-1.69\",\n        \"UI5-1.70\",\n        \"UI5-1.71\",\n        \"UI5-1.72\",\n        \"UI5-1.73\",\n        \"UI5-1.74\",\n        \"UI5-1.75\",\n        \"UI5-1.76\",\n        \"UI5-1.77\"\n      ]\n    }\n  ]\n}", "{\n  \"name\": \"@sap/ux-specification\",\n  \"version\": \"1.84.78\",\n  \"displayName\": \"SAP Fiori tools - Specification\",\n  \"description\": \"SAP Fiori tools - Specification\",\n  \"files\": [\n    \"dist\",\n    \"CHANGELOG.md\",\n    \"!dist/scripts\"\n  ],\n  \"main\": \"dist/index-min.js\",\n  \"engines\": {\n    \"node\": \">= 18.0.0 < 19.0.0 || >= 20.0.0 < 21.0.0 || >= 22.0.0\",\n    \"yarn\": \">=1.22.19 < 2\"\n  },\n  \"scripts\": {\n    \"clean:before\": \"rimraf ./dist ./types ./schemas\",\n    \"clean:doc\": \"rimraf ./dist/documentation\",\n    \"compile\": \"tsc --project ./tsconfig.build.json\",\n    \"compile:watch\": \"tsc --build ./tsconfig.build.json --pretty --watch\",\n    \"bundle\": \"node esbuild\",\n    \"bundle:dev\": \"node esbuild --minify=false\",\n    \"bundle:watch\": \"node esbuild --watch --stats --minify=false\",\n    \"build\": \"npm-run-all -l -s clean:before -s compile -p create-json-schemas copy-templates -p copy-json-schemas htmlV2 htmlV4 -s bundle\",\n    \"build:dev\": \"npm-run-all -l -s clean:before -s compile -p create-json-schemas copy-templates -s copy-json-schemas bundle:dev\",\n    \"build:doc\": \"npm-run-all -l -s clean:doc -s compile -p htmlV2 htmlV4 -s bundle\",\n    \"build:schemas\": \"npm-run-all -l -s create-json-schemas copy-json-schemas\",\n    \"build:snap\": \"yarn build:dev && yarn update-snapshots\",\n    \"create-json-schemas\": \"ts-node ./scripts/to-json-schema.ts \",\n    \"copy-json-schemas\": \"cpy ./schemas/** dist --parents\",\n    \"copy-templates\": \"cpy src/sync/v2/export/templates/** dist/templates\",\n    \"deleteSnapshots\": \"rimraf **/_file_snapshots_\",\n    \"docuV2\": \"ts-node ./scripts/extractDocu.ts --version=v2 format=excel\",\n    \"docuV4\": \"ts-node ./scripts/extractDocu.ts --version=v4 format=excel\",\n    \"htmlV2\": \"ts-node ./scripts/extractDocu.ts --version=v2 --format=html\",\n    \"htmlV4\": \"ts-node ./scripts/extractDocu.ts --version=v4 --format=html\",\n    \"iXiaSoftV2\": \"ts-node ./scripts/extractDocu.ts --version=v2 --format=iXiaSoft\",\n    \"iXiaSoftV4\": \"ts-node ./scripts/extractDocu.ts --version=v4 --format=iXiaSoft\",\n    \"lint\": \"eslint . --ext .ts\",\n    \"lint:summary\": \"eslint . --ext .ts -f summary\",\n    \"lint:fix\": \"eslint . --ext .ts --fix\",\n    \"lint:report\": \"eslint . --ext .ts -f multiple\",\n    \"lint:report:jslint\": \"eslint . --ext .ts -o reports/lint/eslint.jslint.xml -f jslint-xml\",\n    \"test\": \"jest && node ../../scripts/scov.js reports/test/unit/coverage/lcov.info\",\n    \"test:ci\": \"jest --ci --forceExit --detectOpenHandles && node ../../scripts/scov.js reports/test/unit/coverage/lcov.info\",\n    \"update-snapshots\": \"jest --updateSnapshot\",\n    \"watch\": \"npm-run-all -l -s clean:before -p compile create-json-schemas copy-templates -p copy-json-schemas -s bundle:watch\",\n    \"watch:doc\": \"npm-run-all -l -s clean:doc -s compile -p htmlV2 htmlV4 -s bundle:watch\"\n  },\n  \"publisher\": \"SAPSE\",\n  \"license\": \"SEE LICENSE IN LICENSE\",\n  \"dependencies\": {\n    \"@sap-ux/vocabularies-types\": \"0.10.0\"\n  },\n  \"devDependencies\": {\n    \"@sap-ux/annotation-converter\": \"0.8.0\",\n    \"@sap/ux-specification-types\": \"1.84.78\",\n    \"@sap-ux/edmx-parser\": \"0.7.0\",\n    \"@sapui5/ts-types\": \"1.84.39\",\n    \"@types/d3\": \"7.4.3\",\n    \"@types/jquery\": \"3.5.27\",\n    \"@ui5/flexibility-utils\": \"0.1.3\",\n    \"ajv\": \"6.12.6\",\n    \"axios\": \"1.6.0\",\n    \"cpy-cli\": \"3.1.1\",\n    \"d3\": \"7.8.5\",\n    \"deepmerge\": \"4.3.1\",\n    \"ejs\": \"3.1.9\",\n    \"excel4node\": \"1.8.2\",\n    \"i18next\": \"22.5.1\",\n    \"jquery\": \"3.7.1\",\n    \"jsdom\": \"22.1.0\",\n    \"lodash.unset\": \"4.5.2\",\n    \"path\": \"0.12.7\",\n    \"reflect-metadata\": \"0.1.13\",\n    \"typescript-json-schema\": \"0.57.0\",\n    \"xml-js\": \"1.6.11\"\n  },\n  \"husky\": {\n    \"hooks\": {\n      \"pre-commit\": \"lint-staged\"\n    }\n  },\n  \"lint-staged\": {},\n  \"jestSonar\": {\n    \"reportFile\": \"test-report.xml\",\n    \"reportPath\": \"reports/test/unit\"\n  },\n  \"eslint-formatter-multiple\": {\n    \"formatters\": [\n      {\n        \"name\": \"stylish\",\n        \"output\": \"console\"\n      },\n      {\n        \"name\": \"json\",\n        \"output\": \"file\",\n        \"path\": \"reports/lint/eslint.json\"\n      },\n      {\n        \"name\": \"checkstyle\",\n        \"output\": \"file\",\n        \"path\": \"reports/lint/eslint.checkstyle.xml\"\n      }\n    ]\n  }\n}\n", "import type { ConvertedMetadata, EntitySet } from '@sap-ux/vocabularies-types';\nimport { UIAnnotationTypes } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport type {\n    File,\n    ImportProjectParameters,\n    GenerateAppSchemaParameters,\n    ImportAllConfigsParameters\n} from '@sap/ux-specification-types';\nimport {\n    LogSeverity,\n    TemplateType,\n    v2,\n    v4,\n    DirName,\n    FileName,\n    METADATAPATH,\n    UIVOCABULARY,\n    FioriElementsVersion,\n    ManifestSection,\n    SchemaType\n} from '@sap/ux-specification-types';\nimport {\n    generateAnalyticalListReportSchemaV2,\n    generateListReportSchemaV2,\n    generateObjectPageSchemaV2,\n    generateOVPInterfaceV2\n} from '../v2/generate';\nimport { getPages as getPagesV2, V2AppProvider } from '../v2/import/app/appProvider';\nimport { V2OvpProvider } from '../v2/import/app/ovpProvider';\nimport { generateObjectPageSchemaV4, generateListReportSchemaV4 } from '../v4/generate';\nimport { getPages as getPagesV4, V4AppProvider } from '../v4/import/app';\nimport type { AppProvider } from './appProvider';\nimport {\n    findAlias,\n    getSchemaFilePath,\n    getTemplateTypeFromManifest,\n    getVersionFromManifest,\n    parseAndMergeAndConvert,\n    determineV4PageTemplateType\n} from './utils';\nimport i18next from 'i18next';\nimport { log } from '../../extensionLogger';\nimport { initI18n } from '../../i18n/i18n';\nimport { getGenericSchema } from '../../specification/schemaAccess';\nimport { DistTagEvaluator } from './distTagEvaluator';\n\ninterface UiEntityTypes {\n    Facets: string[];\n    LineItems: string[];\n}\n\ninterface Schemas {\n    [type: string]: object;\n}\n\n/**\n * Generates an object comprising all generic schemas\n * @param {TemplateType} templateType - Template type\n * @param {FioriElementsVersion} fioriElementsVersion - Fiori Elements version\n * @returns {Object} genericSchemas\n */\nasync function getGenericSchemas(\n    templateType: TemplateType,\n    fioriElementsVersion: FioriElementsVersion\n): Promise<Schemas> {\n    const genericSchemas: Schemas = {};\n    let schemaTypes = [];\n    schemaTypes = [SchemaType.Application];\n    switch (templateType) {\n        case TemplateType.ListReportObjectPageV4:\n        case TemplateType.AnalyticalListPageV4:\n            schemaTypes.push(SchemaType.ListReport, SchemaType.ObjectPage);\n            break;\n        case TemplateType.FreestylePageV4:\n            schemaTypes.push(SchemaType.ListReport, SchemaType.ObjectPage, SchemaType.FreestylePage);\n            break;\n        case TemplateType.ListReportObjectPageV2:\n            schemaTypes.push(SchemaType.ListReport, SchemaType.ObjectPage);\n            break;\n        case TemplateType.AnalyticalListPageV2:\n            schemaTypes.push(SchemaType.AnalyticalListPage, SchemaType.ObjectPage);\n            break;\n        case TemplateType.OverviewPageV2:\n            schemaTypes.push(SchemaType.OverviewPage);\n            break;\n        default:\n            break;\n    }\n    for (const schemaType of schemaTypes) {\n        const schemaFile = getSchemaFilePath(schemaType);\n        genericSchemas[schemaFile.filename] = await getGenericSchema(fioriElementsVersion, schemaType);\n    }\n    return genericSchemas;\n}\n\n/**\n * Get the relevant UI.ListItem and UI.Facet entity sets\n * @param {ConvertedMetadata} oDataServiceAVT - Annotations as converted by AVT\n * @returns a fitered list of facet and line item annotations\n */\nfunction getAnnotationsForUi(oDataServiceAVT: ConvertedMetadata): UiEntityTypes {\n    const filteredEntityTypes: UiEntityTypes = {\n        Facets: [],\n        LineItems: []\n    };\n    const allEntityTypes = oDataServiceAVT?.entityTypes;\n    if (!allEntityTypes) {\n        return filteredEntityTypes;\n    }\n    const alias = findAlias(UIVOCABULARY, oDataServiceAVT);\n    for (const entity of allEntityTypes) {\n        if (!entity.annotations || !entity.annotations[alias]) {\n            continue;\n        }\n        const { LineItem, Facets } = entity.annotations[alias];\n        if (LineItem && !LineItem.qualifier) {\n            filteredEntityTypes.LineItems.push(entity.name);\n        }\n        if (Facets && !Facets.qualifier) {\n            filteredEntityTypes.Facets.push(entity.name);\n        }\n    }\n    return filteredEntityTypes;\n}\n\nexport function getEntitySetByEntitySetName(entitySetName: string, oDataServiceAVT: ConvertedMetadata): EntitySet {\n    return oDataServiceAVT?.entitySets && oDataServiceAVT.entitySets.find((es) => es.name === entitySetName);\n}\n\n/**\n * The function generates one app schema per entitySet that is linked with an object page in V2\n * @param {GenerateSchemaParameters} generateParameters - list of API input parameters\n * @param {Schema} genericSchemas - The generic schemas\n * @param {Schema} appSchemas - the list of app schemas that shall get extended\n */\nfunction generateObjectPageSchemasV2(\n    generateParameters: GenerateAppSchemaParameters,\n    genericSchemas: Schemas,\n    appSchemas: Schemas\n): void {\n    const allPages = getPagesV2(\n        generateParameters.manifest[ManifestSection.generic].pages as v2.SapUiAppPagesV2,\n        v2.FE_TEMPLATE_V2_OBJECT_PAGE,\n        generateParameters.logger\n    );\n    for (const page in allPages) {\n        const entitySetName = allPages[page].entitySet;\n        const entitySet = getEntitySetByEntitySetName(entitySetName, generateParameters.serviceAVT);\n        if (!entitySet) {\n            log(generateParameters.logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('ENTITYSETNOTFOUND', { entitySetName: entitySetName }),\n                location: {\n                    path: METADATAPATH\n                }\n            });\n        }\n        generateParameters.entitySet = entitySet;\n        const schemaFile = getSchemaFilePath(SchemaType.ObjectPage, entitySet?.name || entitySetName);\n        const genericSchemaFile = getSchemaFilePath(SchemaType.ObjectPage);\n        appSchemas[schemaFile.filename] = generateObjectPageSchemaV2(\n            generateParameters,\n            genericSchemas[genericSchemaFile.filename]\n        );\n    }\n}\n\n/**\n * The function generates one app schema per entitySet that is linked with a list report/alp page in V4\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {Schemas} genericSchemas - The generic schemas\n * @param {Schemas} appSchemas - the list of app schemas that shall get extended\n */\nfunction generateListReportSchemasV4(\n    generateParameters: GenerateAppSchemaParameters,\n    genericSchemas: Schemas,\n    appSchemas: Schemas\n) {\n    const lrPages = getPagesV4(generateParameters.manifest, v4.FE_TEMPLATE_V4_LIST_REPORT);\n    const alpPages = getPagesV4(generateParameters.manifest, v4.FE_TEMPLATE_V4_ALP);\n    const pages = { ...lrPages, ...alpPages };\n    for (const pageId in pages) {\n        const entitySetName = pages[pageId].options.settings.entitySet;\n        const entitySet = getEntitySetByEntitySetName(entitySetName, generateParameters.serviceAVT);\n        const schemaFile = getSchemaFilePath(SchemaType.ListReport, entitySet?.name || entitySetName);\n        const genericSchemaFile = getSchemaFilePath(SchemaType.ListReport);\n        // Get ALP/LR template type for existing LR page in freestyle app\n        if (generateParameters.templateType === TemplateType.FreestylePageV4) {\n            generateParameters.templateType = determineV4PageTemplateType(pages[pageId]);\n        }\n        appSchemas[schemaFile.filename] = generateListReportSchemaV4(\n            generateParameters,\n            genericSchemas[genericSchemaFile.filename],\n            entitySet,\n            pages[pageId].name\n        );\n    }\n}\n/**\n * Looks for List Report(s) in a V2 manifest and triggers the schema generation\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {Schemas} genericSchemas - The generic schemas\n * @param {Schemas} appSchemas - the list of app schemas that shall get extended\n */\nfunction generateAppSchemaV2LR(\n    generateParameters: GenerateAppSchemaParameters,\n    appSchemas: Schemas,\n    genericSchemas: Schemas\n) {\n    const allPages = getPagesV2(\n        generateParameters.manifest[ManifestSection.generic].pages as v2.SapUiAppPagesV2,\n        v2.FE_TEMPLATE_V2_LIST_REPORT,\n        generateParameters.logger\n    );\n\n    for (const page in allPages) {\n        //Should only be one entry\n        const entitySetName = allPages[page].entitySet;\n        generateParameters.entitySet = getEntitySetByEntitySetName(entitySetName, generateParameters.serviceAVT);\n        const schemaFile = getSchemaFilePath(\n            SchemaType.ListReport,\n            generateParameters.entitySet?.name || entitySetName\n        );\n        const genericSchemaFile = getSchemaFilePath(SchemaType.ListReport);\n        appSchemas[schemaFile.filename] = generateListReportSchemaV2(\n            generateParameters,\n            genericSchemas[genericSchemaFile.filename]\n        );\n    }\n}\n\n/**\n * The function generates one app schema per entitySet that is linked with an object page in V4\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {Schemas} genericSchemas - The generic schemas\n * @param {Schemas} appSchemas - the list of app schemas that shall get extended\n */\nfunction generateObjectPageSchemasV4(\n    generateParameters: GenerateAppSchemaParameters,\n    genericSchemas: Schemas,\n    appSchemas: Schemas\n): void {\n    const pages = getPagesV4(generateParameters.manifest, v4.FE_TEMPLATE_V4_OBJECT_PAGE);\n    for (const page in pages) {\n        const entitySetName = pages[page].options.settings.entitySet;\n        const entitySet = getEntitySetByEntitySetName(entitySetName, generateParameters.serviceAVT);\n        if (!entitySet) {\n            log(generateParameters.logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('ENTITYSETNOTFOUND', { entitySet: entitySetName }),\n                location: {\n                    path: METADATAPATH\n                }\n            });\n        }\n        const schemaFile = getSchemaFilePath(SchemaType.ObjectPage, entitySet?.name || entitySetName);\n        const genericSchemaFile = getSchemaFilePath(SchemaType.ObjectPage);\n        appSchemas[schemaFile.filename] = generateObjectPageSchemaV4(\n            generateParameters,\n            genericSchemas[genericSchemaFile.filename],\n            entitySet\n        );\n    }\n}\n\n/**\n * Generates all app specific schemas for a Fiori Elements V2 application\n * @param {GenerateSchemaParameters} generateParameters - list of API input parameters\n * @param {Schemas} genericSchemas - The generic schemas\n * @param {UiEntityTypes} uiEntityTypes - list of all entity types, as comprised in oDataServiceAVT\n * @param {TemplateType} templateType - the given Fiori Elements' template type\n */\nfunction generateAppSchemasV2(\n    generateParameters: GenerateAppSchemaParameters,\n    genericSchemas: Schemas,\n    uiEntityTypes: UiEntityTypes,\n    templateType: TemplateType\n): Schemas {\n    const appSchemas: Schemas = {};\n    if (templateType === TemplateType.ListReportObjectPageV2 && uiEntityTypes) {\n        /*--- List Report ----*/\n        generateAppSchemaV2LR(generateParameters, appSchemas, genericSchemas);\n        /*--- Object Pages ----*/\n        generateObjectPageSchemasV2(generateParameters, genericSchemas, appSchemas);\n    } else if (templateType === TemplateType.AnalyticalListPageV2 && uiEntityTypes) {\n        /*--- Analytical List Page ----*/\n        const allPages = getPagesV2(\n            generateParameters.manifest[ManifestSection.generic].pages as v2.SapUiAppPagesV2,\n            v2.FE_TEMPLATE_V2_ALP,\n            generateParameters.logger\n        );\n        for (const page in allPages) {\n            const entitySetName = allPages[page].entitySet;\n            generateParameters.entitySet = getEntitySetByEntitySetName(entitySetName, generateParameters.serviceAVT);\n            const schemaFile = getSchemaFilePath(\n                SchemaType.AnalyticalListPage,\n                generateParameters.entitySet?.name || entitySetName\n            );\n            const genericSchemaFile = getSchemaFilePath(SchemaType.AnalyticalListPage);\n            appSchemas[schemaFile.filename] = generateAnalyticalListReportSchemaV2(\n                generateParameters,\n                genericSchemas[genericSchemaFile.filename]\n            );\n        }\n        /*--- Object Pages ----*/\n        generateObjectPageSchemasV2(generateParameters, genericSchemas, appSchemas);\n    } else if (templateType === TemplateType.OverviewPageV2) {\n        /*--- Overview Page ----*/\n        const schemaFile = getSchemaFilePath(SchemaType.OverviewPage);\n        const genericSchemaFile = getSchemaFilePath(SchemaType.OverviewPage);\n        appSchemas[schemaFile.filename] = generateOVPInterfaceV2(\n            genericSchemas[genericSchemaFile.filename],\n            generateParameters.manifest\n        );\n    }\n    return { ...genericSchemas, ...appSchemas };\n}\n\n/**\n * Generates all app specific schemas for a Fiori Elements V4 application\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {Schemas} genericSchemas - The generic schemas\n * @param {UiEntityTypes} uiEntityTypes - list of all entity types, as comprised in oDataServiceAVT\n * @param {TemplateType} templateType - the given Fiori Elements' template type\n */\nfunction generateAppSchemasV4(\n    generateParameters: GenerateAppSchemaParameters,\n    genericSchemas: Schemas,\n    uiEntityTypes: UiEntityTypes\n): Schemas {\n    const appSchemas: Schemas = {};\n\n    if (uiEntityTypes) {\n        generateListReportSchemasV4(generateParameters, genericSchemas, appSchemas);\n        generateObjectPageSchemasV4(generateParameters, genericSchemas, appSchemas);\n    }\n    return { ...genericSchemas, ...appSchemas };\n}\n\n/**\n * Generates app specific schemas by adding annotation information to copies of the generic schemas, thus replacing all generic definitions.\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {UiEntityTypes} uiEntityTypes - list of all entity types from the service metadata\n * @param templateType - type of the Fiori Elements' template\n */\nasync function generateAppSchemas(\n    generateParameters: GenerateAppSchemaParameters,\n    uiEntityTypes: UiEntityTypes,\n    templateType: TemplateType\n): Promise<Schemas> {\n    const genericSchemas = await getGenericSchemas(templateType, generateParameters.fioriElementsVersion);\n\n    if (generateParameters.fioriElementsVersion === FioriElementsVersion.v4) {\n        return generateAppSchemasV4(generateParameters, genericSchemas, uiEntityTypes);\n    } else {\n        return generateAppSchemasV2(generateParameters, genericSchemas, uiEntityTypes, templateType);\n    }\n}\n\n/**\n * Imports manifest and flex changes into configuration files with aid of the relevant app provider\n * @param {ImportAllConfigsParameters} importParameters - structure comprising all input parameters\n *\n * @returns {File[]} a list of all configuration files as generated by the function\n */\nfunction importConfigs(importParameters: ImportAllConfigsParameters): File[] {\n    let provider: AppProvider;\n    const files: File[] = [];\n\n    switch (importParameters.templateType) {\n        case TemplateType.ListReportObjectPageV2:\n        case TemplateType.AnalyticalListPageV2:\n            provider = new V2AppProvider(importParameters);\n            break;\n        case TemplateType.AnalyticalListPageV4:\n        case TemplateType.ListReportObjectPageV4:\n        case TemplateType.FreestylePageV4:\n            provider = new V4AppProvider(importParameters);\n            break;\n        case TemplateType.OverviewPageV2:\n            provider = new V2OvpProvider(importParameters);\n            break;\n        default:\n            break;\n    }\n    if (provider) {\n        const { appConfig, pageConfigs } = provider.createConfigFiles();\n        for (const app in appConfig) {\n            files.push({ dataSourceUri: app, fileContent: JSON.stringify(appConfig[app], null, 4) });\n        }\n        for (const config in pageConfigs) {\n            files.push({ dataSourceUri: config, fileContent: JSON.stringify(pageConfigs[config], null, 4) });\n        }\n    }\n    return files;\n}\n\nfunction getFileList(schema: Schemas, configs?: File[]): File[] {\n    let files: File[] = [];\n    for (const schemaName of Object.keys(schema).sort()) {\n        let dataSourceUri;\n        if (schemaName === SchemaType.Application) {\n            dataSourceUri = `${DirName.Schemas}/${FileName.App[0].toUpperCase()}${FileName.App.slice(1)}`;\n        } else {\n            dataSourceUri = `${DirName.Schemas}/${schemaName}.json`;\n        }\n        files.push({ dataSourceUri, fileContent: JSON.stringify(schema[schemaName], null, 4) });\n    }\n    if (configs) {\n        files = files.concat(configs);\n    }\n    return files;\n}\n\n/**\n * Import the schema and config files for a given project\n * @param {ImportProjectParameters} importParameters - files of the project: manifest, flex changes, odata files\n */\nexport async function importProjectSchema(importProjectParameters: ImportProjectParameters): Promise<File[]> {\n    // Initialize i18next\n    initI18n();\n    const { manifest, annotations, logger, fragments, views, featureToggles } = importProjectParameters;\n    const versionChecker = new DistTagEvaluator();\n    versionChecker.doesUi5VersionFitDistTags(manifest['sap.ui5']?.dependencies?.minUI5Version, logger);\n    const fioriElementsVersion = getVersionFromManifest(manifest);\n    const oDataServiceAVT = parseAndMergeAndConvert(annotations, logger);\n    const uiEntityTypes = getAnnotationsForUi(oDataServiceAVT);\n    const templateType = getTemplateTypeFromManifest(manifest, fioriElementsVersion, logger);\n    const generateParameters: GenerateAppSchemaParameters = {\n        templateType,\n        manifest,\n        serviceAVT: oDataServiceAVT,\n        fragments,\n        views,\n        fioriElementsVersion,\n        logger,\n        featureToggles\n    };\n\n    const appSchemas = await generateAppSchemas(generateParameters, uiEntityTypes, templateType);\n    return getFileList(appSchemas);\n}\n\n/**\n * Import the schema and config files for a given project\n * @param {ImportProjectParameters} importParameters - files of the project: manifest, flex changes, odata files\n */\nexport async function importProjectSchemaAndConfig(importProjectParameters: ImportProjectParameters): Promise<File[]> {\n    // Initialize i18next\n    initI18n();\n    const { manifest, annotations, logger, fragments, views, flex, featureToggles } = importProjectParameters;\n    const versionChecker = new DistTagEvaluator();\n    versionChecker.doesUi5VersionFitDistTags(manifest['sap.ui5']?.dependencies?.minUI5Version, logger);\n    const fioriElementsVersion = getVersionFromManifest(manifest);\n    const oDataServiceAVT = parseAndMergeAndConvert(annotations, logger);\n    const templateType = getTemplateTypeFromManifest(manifest, fioriElementsVersion, logger);\n\n    //Generate Schemas\n    const generateParameters: GenerateAppSchemaParameters = {\n        templateType,\n        manifest,\n        serviceAVT: oDataServiceAVT,\n        fragments,\n        views,\n        fioriElementsVersion,\n        logger,\n        featureToggles\n    };\n    const uiEntityTypes = getAnnotationsForUi(oDataServiceAVT);\n    const appSchemas = await generateAppSchemas(generateParameters, uiEntityTypes, templateType);\n\n    //Import to configs\n    const importConfigsParameters: ImportAllConfigsParameters = {\n        manifest,\n        flexChanges: flex,\n        appSchemas,\n        templateType,\n        logger,\n        serviceAVT: oDataServiceAVT,\n        fragments,\n        views\n    };\n\n    const configFiles = importConfigs(importConfigsParameters);\n    return getFileList(appSchemas, configFiles);\n}\n", "import type {\n    FileData,\n    ExtensionLogger,\n    ImportListReportV2Parameters,\n    ImportALPV2Parameters,\n    ImportObjectPageV2Parameters,\n    ImportAllConfigsParameters\n} from '@sap/ux-specification-types';\nimport {\n    LogSeverity,\n    MANIFESTPATH,\n    FioriElementsVersion,\n    PageTypeV2,\n    ManifestSection,\n    v2,\n    SchemaType\n} from '@sap/ux-specification-types';\nimport { AppProvider } from '../../../common/appProvider';\nimport { transferSettingsOfObject } from '../common';\nimport { createListReportConfig } from '../pages/listReport';\nimport { createAnalyticalListPageConfig } from '../pages/analyticalListPage';\nimport { createObjectPageConfigV2 } from '../pages/objectPage';\nimport { AppSettings } from '../../application';\nimport { getSchemaFilePath, generatePageId, getPageTypeV2 } from '../../../common';\nimport i18next from 'i18next';\nimport { initI18n } from '../../../../i18n/i18n';\nimport { log } from '../../../../extensionLogger';\n\n/**\n * Method which generates id for passed page\n * @param page - Generic Page object.\n * @param pageName - Page name in manifest. Used if entitySet is empty\n * @returns {string} Generated page id\n */\nfunction generateId(page: v2.SapUiAppPageV2, pageName: string): string {\n    if (page.component?.name) {\n        return generatePageId(getPageTypeV2(page.component?.name), page.entitySet, undefined, pageName);\n    } else {\n        return pageName;\n    }\n}\n\nfunction getPageConfigsAndNavigations(\n    page: v2.Page,\n    v2Page: v2.SapUiAppPageV2,\n    flex: string[],\n    manifest: any,\n    schemas: any,\n    fragments: FileData[],\n    pages: { [key: string]: v2.Page }\n) {\n    page.navigation = {};\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    const targets: { [key: string]: v2.Page } = getPagesAndConfigs(v2Page.pages, flex, manifest, schemas, fragments);\n    for (const pageId in targets) {\n        const target = targets[pageId];\n        pages[pageId] = target;\n    }\n    for (const v2ChildPageName in v2Page.pages) {\n        const id = generateId(v2Page.pages[v2ChildPageName], v2ChildPageName);\n        if (page.entitySet) {\n            page.navigation[id] = targets[id].navigationProperty\n                ? `${page.entitySet}.${targets[id].navigationProperty}`\n                : page.entitySet;\n        } else {\n            page.navigation[id] = targets[id].navigationProperty ? targets[id].navigationProperty : id;\n        }\n    }\n}\n\n/**\n * Sets up page definitions, including the configurations for them\n * @param {SapUiAppPagesV2} v2Pages - lisr of all pages\n * @param flex - list of flexibility changes\n * @param manifest - manifest.json of the app\n * @param schemas - list of all app-specific schemas\n * @param fragments - list of fragments\n * @param {ExtensionLogger} logger - logger for messages\n * @returns an index table of page definitions\n */\nfunction getPagesAndConfigs(\n    v2Pages: v2.SapUiAppPagesV2,\n    flex: string[],\n    manifest,\n    schemas,\n    fragments?: FileData[],\n    logger?: ExtensionLogger\n): { [key: string]: v2.Page } {\n    const pages: { [key: string]: v2.Page } = {};\n    for (const v2PageName in v2Pages) {\n        const v2Page = v2Pages[v2PageName];\n        const id = generateId(v2Page, v2PageName);\n        if (!id) {\n            continue;\n        }\n        const page: v2.Page = {\n            pageType: getPageTypeV2(v2Page.component?.name),\n            entitySet: v2Page.entitySet,\n            ...(v2Page.navigationProperty && { navigationProperty: v2Page.navigationProperty }),\n            ...(v2Page.defaultLayoutType && { defaultLayoutType: v2Page.defaultLayoutType })\n        };\n        pages[id] = page;\n\n        // Get the JSON schema for the page. If no page specific schema exists, fall back top the generic schema for the page type\n        const schemaKey: string =\n            Object.keys(schemas).find((element) => element.includes(id)) ||\n            Object.keys(schemas).find((element) => element.includes(id.slice(0, -1))) ||\n            Object.keys(schemas).find((element) => element.includes(page.pageType));\n\n        // convert settings to config\n        if (schemaKey) {\n            if (page.pageType === PageTypeV2.ListReport) {\n                const importParameters: ImportListReportV2Parameters = {\n                    manifest,\n                    flex,\n                    jsonSchema: schemas[schemaKey],\n                    fragments,\n                    logger\n                };\n                page.config = createListReportConfig(importParameters);\n            } else if (page.pageType === PageTypeV2.AnalyticalListPage) {\n                const importParameters: ImportALPV2Parameters = {\n                    manifest,\n                    flex,\n                    jsonSchema: schemas[schemaKey],\n                    fragments,\n                    logger\n                };\n                page.config = createAnalyticalListPageConfig(importParameters);\n            } else {\n                const importParameters: ImportObjectPageV2Parameters = {\n                    manifest,\n                    flex,\n                    jsonSchema: schemas[schemaKey],\n                    entitySet: page.entitySet,\n                    fragments,\n                    logger\n                };\n                page.config = createObjectPageConfigV2(importParameters);\n            }\n        }\n        if (v2Page.pages) {\n            getPageConfigsAndNavigations(page, v2Page, flex, manifest, schemas, fragments, pages);\n        }\n    }\n    return pages;\n}\n\n/**\n * The V2AppProvider collects all the app information for a Fiori Elements V2 app\n */\nexport class V2AppProvider extends AppProvider {\n    public constructor(importParameters: ImportAllConfigsParameters) {\n        initI18n();\n        let v2Pages: v2.SapUiAppPagesV2;\n        if (!importParameters.manifest[ManifestSection.generic]) {\n            log(importParameters.logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOFE'),\n                location: {\n                    path: MANIFESTPATH,\n                    range: [ManifestSection.generic]\n                }\n            });\n        } else {\n            v2Pages = importParameters.manifest[ManifestSection.generic].pages as v2.SapUiAppPagesV2;\n        }\n        if (!v2Pages) {\n            log(importParameters.logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOPAGES', { appId: importParameters.manifest['sap.app']['id'] }),\n                location: {\n                    path: MANIFESTPATH,\n                    range: [ManifestSection.generic]\n                }\n            });\n        }\n        const pageKey = v2Pages && Object.keys(v2Pages)[0];\n        const pageId = v2Pages && generateId(v2Pages[pageKey], pageKey);\n        // Import settings\n        const appSettings = new AppSettings();\n        const schemaFile = getSchemaFilePath(SchemaType.Application);\n        const appSchema = importParameters.appSchemas[schemaFile.filename];\n        transferSettingsOfObject(\n            appSettings,\n            importParameters.manifest,\n            appSchema['definitions']['AppSettings'],\n            undefined\n        );\n        // Call base\n        super(\n            importParameters.manifest,\n            importParameters.appSchemas,\n            pageId,\n            getPagesAndConfigs(\n                v2Pages,\n                importParameters.flexChanges,\n                importParameters.manifest,\n                importParameters.appSchemas,\n                importParameters.fragments,\n                importParameters.logger\n            ),\n            FioriElementsVersion.v2,\n            appSettings\n        );\n    }\n}\n\n/**\n * Collects all pages of a V2 app from the manifest, by traversing the V2 page hierarchy.\n * @param v2Pages - entry point = complex page definition in manifest\n * @param componentName - Component name\n * @returns index table of pages\n */\nexport function getPages(v2Pages: v2.SapUiAppPagesV2, componentName: string, logger?: ExtensionLogger): v2.Pages {\n    const pages: v2.Pages = {};\n    for (const v2PageName in v2Pages) {\n        const v2Page = v2Pages[v2PageName];\n        if (!v2Page.component?.name) {\n            log(logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('COMPONENTNOTDEFINED', { pageName: v2PageName }),\n                location: {\n                    path: MANIFESTPATH\n                }\n            });\n        }\n        if (v2Page.component?.name === componentName) {\n            const id = generateId(v2Page, v2PageName);\n            pages[id] = v2Page;\n        }\n        if (componentName === v2.FE_TEMPLATE_V2_OBJECT_PAGE && v2Page.pages) {\n            const subPages = getPages(v2Page.pages, componentName, logger);\n            for (const subPageId in subPages) {\n                pages[subPageId] = subPages[subPageId];\n            }\n        }\n    }\n    return pages;\n}\n", "import type { ExtensionLogger, Application, Files, Manifest, PagesBase, v2, v4 } from '@sap/ux-specification-types';\nimport {\n    PageType,\n    DirName,\n    FileName,\n    FioriElementsVersion,\n    OdataVersion,\n    SchemaType\n} from '@sap/ux-specification-types';\nimport { getSchemaFilePath } from './utils';\n\nexport interface Controllers {\n    [key: string]: string;\n}\n\nexport abstract class AppProvider {\n    public readonly app: Application;\n    public readonly logger: ExtensionLogger;\n    public readonly schemas: Files;\n    // Store controller names which should be handled latelly\n    public unhandledControllers: Array<string> = [];\n\n    protected constructor(\n        manifest: Manifest,\n        schemas: Files,\n        home: string,\n        pages: PagesBase,\n        version: FioriElementsVersion,\n        settings?: v2.AppSettings | v4.AppSettings,\n        logger?: ExtensionLogger\n    ) {\n        const schemaFile = getSchemaFilePath(SchemaType.Application);\n        this.app = {\n            $schema: schemaFile.path,\n            id: manifest['sap.app'].id,\n            pages,\n            home,\n            target: {\n                fioriElements: version,\n                odata: version === FioriElementsVersion.v2 ? OdataVersion.v2 : OdataVersion.v4\n            },\n            ...(settings && { settings })\n        };\n        this.schemas = schemas;\n        this.logger = logger;\n    }\n\n    /**\n     * Create config files for app (app.json) and pages (pages/{name}.json).\n     * This is basically a copy of createFiles optimized to be used in FTFS:\n     * it always uses posix path notation with forward slash (/)\n     * @param {ConvertedMetadata} oDataServiceAVT - Complete service information, as returned by annotation vocabularies tool\n     * @returns app and page files as separate objects\n     */\n    public createConfigFiles(): { appConfig: Files; pageConfigs: Files } {\n        const pageConfigs: Files = {};\n        const appConfig: Files = {};\n        let page: v2.Page | v4.Page;\n        // add schema reference to all pages\n        for (const pageId in this.app.pages) {\n            page = this.app.pages[pageId];\n            if (page.config) {\n                const config = page.config;\n                if (page.pageType !== PageType.CustomPage) {\n                    const schemaFile = getSchemaFilePath(page.pageType, page.entitySet);\n                    if (this.schemas[schemaFile.filename]) {\n                        config.$schema = schemaFile.path;\n                    } else {\n                        const genericSchemaFile = getSchemaFilePath(page.pageType);\n                        config.$schema = genericSchemaFile.path;\n                    }\n                    pageConfigs[`${DirName.Pages}/${pageId}.json`] = config;\n                }\n            }\n        }\n        // remove config before converting to JSON\n        const app: Application = JSON.parse(JSON.stringify(this.app));\n        for (const pageId in app.pages) {\n            delete app.pages[pageId].config;\n        }\n        appConfig[FileName.App] = app;\n\n        return { appConfig, pageConfigs };\n    }\n}\n", "import {\n    v2,\n    FRAGMENTNAMEPART,\n    PropertyName,\n    ControlType,\n    PageTypeV2,\n    PAGETYPE_VIEW_EXTENSION_TEMPLATE_MAP,\n    ViewTemplateType,\n    LogSeverity,\n    ManifestSection,\n    DefinitionName\n} from '@sap/ux-specification-types';\nimport type { FlexForTransfer } from '../controls/table';\nimport { addFlexForTable } from '../controls/table';\nimport type {\n    ChangeDefinition,\n    FileData,\n    ObjectPageSectionData,\n    Manifest,\n    ExtensionLogger\n} from '@sap/ux-specification-types';\nimport {\n    convertActionKeyToStableId,\n    checkDeprecatedProperties,\n    importProperty,\n    parseChangeString\n} from '../../../common';\nimport type { MetadataInstanceInterface } from '../../../common/decoration/factory';\nimport { getReflectMetadata } from '../../../common/decoration/decorators';\nimport { ensureManifestSectionByPathV2 } from '../../export/manifest';\nimport { log } from '../../../../extensionLogger';\nimport i18next from 'i18next';\nimport { xml2json } from 'xml-js';\nimport type { TableCustomColumn } from '../../export/controls';\nimport { FRAGMENT_DEFINITION, getRootCustomColumnFromFragmentJSON } from '../../export/controls';\nimport { ActionTypeV2 } from '../../types';\nimport type { Definition } from 'typescript-json-schema';\n\nexport type LROPConfigsType = v2.ListReportConfigV2 | v2.AnalyticalListPageConfigV2 | v2.ObjectPageConfigV2;\n\nexport function convertActionKey(actionProperty: string) {\n    return actionProperty.replace('/', '::');\n}\n\n/**\n * Unescapes the selector ID of a flex change\n * @param selectorId - escaped selector ID\n * @returns unescaped ID\n */\nexport function convertSelector(selectorId: string): string {\n    return selectorId.replace(/:2f/g, '/').replace(/:23/g, '#').replace(/:40/g, '@');\n}\n\n/**\n * Adds flex changes to Smart Filter Bar in config file\n * @param {ListReportConfig | AnalyticalListPageConfig} config - the configuration to be filled\n * @param {string} changePropertyKey - property key of current change\n * @param {ChangeDefinition} change - change definition\n * @param {object} jsonSchema - application specific schema\n */\nfunction addSmartFilterBarFlex(\n    config: v2.ListReportConfigV2 | v2.AnalyticalListPageConfigV2,\n    changePropertyKey: string,\n    change: ChangeDefinition,\n    jsonSchema: object\n) {\n    const schemaProperty =\n        jsonSchema['definitions']?.['ListReportFilterBar']?.properties[changePropertyKey] ||\n        jsonSchema['definitions']?.['AnalyticalListPageFilterBar']?.properties[changePropertyKey];\n    if (schemaProperty) {\n        config.filterBar[changePropertyKey] = change.content.newBinding\n            ? change.content.newBinding\n            : change.content.newValue;\n    }\n}\n\n/**\n * Creates a map to connect action types to the correct schema definition and config part\n * @param definitionType action type that will be filtered for\n * @param jsonSchema application specific schema\n * @returns {Map} actionMap - mapping of actionId, id for schema reference and id for config\n */\nfunction filterActions(definitionType: string, jsonSchema) {\n    const actions = Object.keys(jsonSchema['definitions']).filter(\n        (definition) => definition.startsWith(`${definitionType}`) && definition.includes('<')\n    );\n    const actionMap: Map<string, string> = new Map();\n    actions.forEach((definitionActionId) => {\n        const fullActionId = convertActionKeyToStableId(definitionActionId.split('<')[1]?.split('>')[0]);\n        const splitPoint = fullActionId.indexOf(':::');\n        if (fullActionId.startsWith('DataField') && splitPoint > -1) {\n            const actionIdParts = fullActionId.split(':::');\n            const sSemanticObject = actionIdParts.find((part) => part.startsWith('sSemanticObject'));\n            const sAction = actionIdParts.find((part) => part.startsWith('sAction'));\n            const shortAction = sAction.split('sAction::')[1].replace(':2f', '::');\n            if (sSemanticObject) {\n                const shortActionId = `${sSemanticObject.split('::')[1]}::${shortAction}`;\n                const shortDefinitionActionId = `${actionIdParts[0]}:::${sSemanticObject}:::${sAction}`;\n                actionMap.set(shortActionId, definitionActionId);\n                actionMap.set(definitionActionId, shortDefinitionActionId);\n            } else {\n                actionMap.set(shortAction, definitionActionId);\n                actionMap.set(definitionActionId, fullActionId);\n            }\n        } else {\n            actionMap.set(fullActionId.replace(':2f', '::'), definitionActionId);\n            actionMap.set(definitionActionId, fullActionId);\n        }\n    });\n    return actionMap;\n}\n\n/**\n * Adds a new action column to config\n * @param action - action part of config to be filled\n * @param config - the config of ALP/LR\n * @param configId - id of action to be used in config\n */\nfunction addColumnActionConfigPart(\n    action: { name: ActionTypeV2; configPart: v2.Actions | v2.GenericColumns | v2.HeaderActionsStandard; id: string },\n    config: v2.ListReportConfigV2 | v2.AnalyticalListPageConfigV2,\n    configId: string\n) {\n    if (!action.configPart) {\n        action.configPart = config.table.columns = {};\n    }\n    if (!action.configPart[`${configId}`]) {\n        action.configPart[`${configId}`] = {};\n    }\n}\n\n/**\n * Return action id of change\n * @param {ChangeDefinition} change - change definition\n * @returns {string} action id\n */\nfunction getActionId(change: ChangeDefinition): string | undefined {\n    if (change.controlId?.includes('--template::')) {\n        return change.controlId.split('--template::')[1];\n    }\n    return change.controlId?.split('--action::')[1];\n}\n\n/**\n * Adds flex changes to Actions in config file\n * @param {ListReportConfig | AnalyticalListPageConfig} config - the configuration to be filled\n * @param {string} changePropertyKey - property key of current change\n * @param {ChangeDefinition} change - change definition\n * @param {object} jsonSchema - application specific schema\n */\nfunction addActionFlex(\n    config: v2.ListReportConfigV2 | v2.AnalyticalListPageConfigV2,\n    changePropertyKey: string,\n    change: ChangeDefinition,\n    jsonSchema: Definition,\n    id: string\n) {\n    const actionTypes = [\n        { name: ActionTypeV2.HeaderStandard, configPart: config.header.actions, id },\n        { name: ActionTypeV2.OPHeaderStandard, configPart: config.header.actions, id },\n        {\n            name: ActionTypeV2.Footer,\n            configPart: config.footer.actions,\n            id: id && id.includes('Determining') && id.split('::Determining')[0]\n        },\n        { name: ActionTypeV2.OPFooterStandard, configPart: config.footer.actions, id },\n        { name: ActionTypeV2.ToolBar, configPart: config.table.toolBar.actions, id },\n        { name: ActionTypeV2.Column, configPart: config.table.columns, id }\n    ];\n    actionTypes.forEach((action) => {\n        const schemaActions = filterActions(action.name, jsonSchema);\n        if (schemaActions.has(action.id)) {\n            const referenceId = schemaActions.get(action.id);\n            const configId = referenceId.split('<')[1]?.split('>')[0];\n            if (action.name === ActionTypeV2.Column) {\n                addColumnActionConfigPart(action, config, configId);\n            }\n            const configPart = action.configPart[configId];\n            const schemaProperty = (jsonSchema.definitions[referenceId] as Definition)?.properties[changePropertyKey];\n            if (schemaProperty && configPart) {\n                configPart[changePropertyKey] = change.content.newBinding\n                    ? change.content.newBinding\n                    : change.content.newValue;\n            }\n        }\n    });\n}\n\n/**\n * Adds flex changes to Smart Chart in config file\n * @param {ListReportConfig | AnalyticalListPageConfig} config - the configuration to be filled\n * @param {string} changePropertyKey - property key of current change\n * @param {ChangeDefinition} change - change definition\n * @param {object} jsonSchema - application specific schema\n */\nfunction addSmartChartFlex(\n    config: v2.ListReportConfigV2 | v2.AnalyticalListPageConfigV2,\n    changePropertyKey: string,\n    change: ChangeDefinition,\n    jsonSchema: object\n) {\n    const schemaProperty = jsonSchema['definitions']['ChartSettings'].properties[changePropertyKey];\n    if (schemaProperty) {\n        const syncRule = getReflectMetadata(config[PropertyName.chart], changePropertyKey);\n        if (syncRule?.flex?.importFlexValue) {\n            syncRule.flex.importFlexValue(change, config[PropertyName.chart], changePropertyKey);\n        } else {\n            config[PropertyName.chart][changePropertyKey] = change.content.newBinding\n                ? change.content.newBinding\n                : change.content.newValue;\n        }\n    }\n}\n\n/**\n * Checks and adds further flex changes to in config file\n * @param {ListReportConfig | AnalyticalListPageConfig} config - the configuration to be filled\n * @param {ChangeDefinition} change - change definition\n * @param {object} jsonSchema - application specific schema\n */\nfunction addAdditionalFlexChanges(\n    config: v2.ListReportConfigV2 | v2.AnalyticalListPageConfigV2,\n    change: ChangeDefinition,\n    jsonSchema: object\n) {\n    const flexForTransfer: FlexForTransfer = {\n        controlId: change.controlId,\n        propertyId: change.content.property,\n        newValue: change.content.newBinding ? change.content.newBinding : change.content.newValue,\n        controlType: change.controlType,\n        creation: change.creation\n    };\n    let constructorName;\n    if (\n        (!config.table.type || config.table.type === v2.TableTypeV2.ResponsiveTable) &&\n        !flexForTransfer.controlId?.includes(PAGETYPE_VIEW_EXTENSION_TEMPLATE_MAP.get(PageTypeV2.AnalyticalListPage))\n    ) {\n        constructorName = 'ResponsiveTableWithMultiSelect';\n    } else {\n        constructorName = config.table.constructor.name;\n    }\n    const schemaProperty =\n        jsonSchema['definitions'][`${constructorName}<LineItems>`].properties[flexForTransfer.propertyId];\n    if (schemaProperty || flexForTransfer.controlType === ControlType.TableColumn) {\n        addFlexForTable(config.table, flexForTransfer, jsonSchema);\n    }\n}\n\n/**\n * Adds flex changes to config file\n * @param {ListReportConfig | AnalyticalListPageConfig} config - the configuration to be filled\n * @param {string} changeString - change file as string\n * @param {object} appSchema - application specific schema\n * @param {ExtensionLogger} logger - Logger class for logging messages\n */\nexport function addFlex(\n    config: v2.ListReportConfigV2 | v2.AnalyticalListPageConfigV2,\n    changeString: string,\n    appSchema: object,\n    logger?: ExtensionLogger\n): void {\n    try {\n        const change = parseChangeString(changeString) as ChangeDefinition;\n        const changePropertyKey = change.content.property;\n        if (\n            change.controlId?.includes(PageTypeV2.ListReport) ||\n            change.controlId?.includes(PageTypeV2.AnalyticalListPage)\n        ) {\n            change.controlId = convertSelector(change.controlId);\n            switch (change.controlType) {\n                case ControlType.SmartFilterBar: {\n                    addSmartFilterBarFlex(config, changePropertyKey, change, appSchema);\n                    break;\n                }\n                case ControlType.DynamicPage: {\n                    const schemaProperty = appSchema['properties'][changePropertyKey];\n                    if (schemaProperty) {\n                        config[change.content.property] = change.content.newValue;\n                    }\n                    break;\n                }\n                case ControlType.Button: {\n                    const actionId = getActionId(change);\n                    actionId && addActionFlex(config, changePropertyKey, change, appSchema, actionId);\n                    break;\n                }\n                case ControlType.SmartChart: {\n                    addSmartChartFlex(config, changePropertyKey, change, appSchema);\n                    break;\n                }\n                default: {\n                    addAdditionalFlexChanges(config, change, appSchema);\n                    break;\n                }\n            }\n        }\n    } catch (error) {\n        log(\n            logger,\n            {\n                severity: LogSeverity.Error,\n                message: i18next.t('FLEXERROR')\n            },\n            ...error\n        );\n    }\n}\n\n/**\n * Special post-processing for quickVariantSelectionX during the import\n * @param propertyKey - key of the current schema property\n * @param configPart  - part of the configuration to be enhanced\n */\nfunction adjustQuickVariantSelectionX(propertyKey: string, configPart: { [key: string]: any }) {\n    if (propertyKey === 'quickVariantSelectionX' && configPart[propertyKey]) {\n        for (const variant in configPart[propertyKey]['variants']) {\n            const currentQuickVariantX = configPart[propertyKey]['variants'][variant];\n            if (currentQuickVariantX['tableSettings']) {\n                for (const key in currentQuickVariantX['tableSettings']) {\n                    currentQuickVariantX[key] = currentQuickVariantX['tableSettings'][key];\n                }\n                delete currentQuickVariantX['tableSettings'];\n            }\n        }\n    }\n}\n\n/**\n * Transfers settings from manifest to object page config\n * @param configPart - part of the configuration to be filled\n * @param manifest - manifest.json of the app\n * @param appSchema - app specific schema\n * @param pageID - ID of the given object page\n * @param sectionId (optional) - ID of the given section (optional)\n * @param {ExtensionLogger} logger - Logger class for logging messages\n */\nexport function transferSettingsOfObject(\n    configPart: { [key: string]: any },\n    manifest: Manifest,\n    appSchema: object,\n    pageKey: string,\n    logger?: ExtensionLogger,\n    kpiKey?: string\n): void {\n    if (!appSchema) {\n        return;\n    }\n    let manifestSection = {};\n    const deprecatedProperties = configPart.getDeprecated ? configPart.getDeprecated() : undefined;\n\n    if (appSchema['properties']) {\n        for (const propertyKey in appSchema['properties']) {\n            const syncRule = getReflectMetadata(configPart, propertyKey);\n            if (syncRule?.manifest) {\n                const path = syncRule.manifest.path([pageKey], manifest, kpiKey);\n                manifestSection = ensureManifestSectionByPathV2(manifest, path);\n                importProperty(syncRule, manifestSection, propertyKey, configPart);\n                checkDeprecatedProperties(deprecatedProperties, manifestSection, path, logger);\n            }\n            // Adjustment of 'quickVariantSelectionX' - tableSettings\n            adjustQuickVariantSelectionX(propertyKey, configPart);\n        }\n    }\n}\n\n/**\n * Determines the table type for a given LR or ALP table, based on the component name and its table settings\n * This does not exactly reflect the run time behavior of Fiori elements but a best guess and expectation.\n * @param manifest - manifest.json file content of the app\n * @param pageKey - key of the page in the manifest\n */\nexport function determineTableType(manifest: Manifest, pageKey: string): v2.TableTypeV2 {\n    const page = manifest[ManifestSection.generic].pages[pageKey];\n    let tableType: v2.TableTypeV2 = v2.TableTypeV2.ResponsiveTable;\n    if (\n        manifest[ManifestSection.generic].pages[pageKey].component?.settings &&\n        (manifest[ManifestSection.generic].pages[pageKey].component.settings?.tableSettings?.['type'] ||\n            manifest[ManifestSection.generic].pages[pageKey].component.settings?.['tableType'])\n    ) {\n        tableType = page.component?.settings?.tableSettings?.['type'] || page.component?.settings['tableType'];\n    } else if (page.component?.name === 'sap.suite.ui.generic.template.AnalyticalListPage') {\n        tableType = v2.TableTypeV2.AnalyticalTable;\n    }\n    return tableType;\n}\n\nfunction evaluateFragmentColumn(\n    column: any,\n    viewExtensionsOfPage: any,\n    manifestKey: string,\n    keyPart3: string,\n    config: v2.ListReportConfigV2,\n    extensionType: v2.TableColumnExtensionTypeV2,\n    cellsFragmentName?: string\n): void {\n    if (column['customData'] || column['table:customData']) {\n        const p13nData = column['customData']\n            ? column['customData']['core:CustomData']._attributes.value\n            : column['table:customData']['core:CustomData']._attributes.value;\n        const columnParts = JSON.parse(p13nData.substr(1, p13nData.length));\n        let columnText = column['Text'] && column['Text']._attributes && column['Text']._attributes['text'];\n        if (!columnText) {\n            columnText = column['Label'] && column['Label']._attributes && column['Label']._attributes['text'];\n        }\n        const customElement: TableCustomColumn = {\n            id: column._attributes && column._attributes['id'],\n            text: columnText,\n            ...columnParts,\n            columnKey: columnParts['columnKey'],\n            columnIndex: columnParts['columnIndex'] !== undefined ? Number(columnParts['columnIndex']) : undefined,\n            leadingProperty: columnParts['leadingProperty'],\n            className: viewExtensionsOfPage[manifestKey].className,\n            fragmentName: viewExtensionsOfPage[manifestKey].fragmentName,\n            tabKey: keyPart3,\n            extensionType\n        };\n        if (cellsFragmentName) {\n            customElement.cellsFragmentName = cellsFragmentName;\n        }\n        if (!config.table['columns']['custom']) {\n            config.table['columns']['custom'] = [];\n        }\n        const customColumns = config.table['columns']['custom'] as v2.TableCustomColumns;\n        customColumns.push(customElement);\n    }\n}\n\nfunction determineCellsFragmentName(\n    extensionType: any,\n    viewExtensionsOfPage: any,\n    keyEntitySet: string,\n    referenceId: string\n) {\n    let cellsFragmentName;\n    if (extensionType === ViewTemplateType.ResponsiveTableColumnsExtension) {\n        for (const cellsKey of Object.keys(viewExtensionsOfPage)) {\n            const [cellsKeyType, cellsKeyEntitySet, cellsKeyTab] = cellsKey.split('|');\n            if (\n                cellsKeyType === ViewTemplateType.ResponsiveTableCellsExtension &&\n                cellsKeyEntitySet === keyEntitySet &&\n                cellsKeyTab === referenceId\n            ) {\n                cellsFragmentName = viewExtensionsOfPage[cellsKey].fragmentName;\n            }\n        }\n    }\n    return cellsFragmentName;\n}\n\nfunction analyzeFilteredFragments(\n    filteredFragments: FileData[],\n    config: LROPConfigsType,\n    viewExtensionsOfPage: any,\n    manifestKey: string,\n    keyTab: string,\n    extensionType: any,\n    cellsFragmentName: any\n) {\n    if (filteredFragments[0]) {\n        const fragmentJson = JSON.parse(xml2json(filteredFragments[0].fileContent, { compact: true }));\n        const fragmentDefintion = fragmentJson[FRAGMENT_DEFINITION];\n        const columnDefinition = getRootCustomColumnFromFragmentJSON(fragmentDefintion);\n        if (columnDefinition) {\n            if (!config[PropertyName.table]?.['columns']) {\n                config[PropertyName.table]['columns'] = {};\n            }\n            if (Array.isArray(columnDefinition)) {\n                for (const def of columnDefinition) {\n                    evaluateFragmentColumn(\n                        def,\n                        viewExtensionsOfPage,\n                        manifestKey,\n                        keyTab,\n                        config,\n                        extensionType,\n                        cellsFragmentName\n                    );\n                }\n            } else {\n                evaluateFragmentColumn(\n                    columnDefinition,\n                    viewExtensionsOfPage,\n                    manifestKey,\n                    keyTab,\n                    config,\n                    extensionType,\n                    cellsFragmentName\n                );\n            }\n        }\n    }\n}\n\nfunction processViewExtensions(\n    viewExtensionsOfPage: object,\n    targetKeyEntitySet: string,\n    objectPageSectionData: ObjectPageSectionData,\n    config: LROPConfigsType,\n    fragments?: FileData[]\n) {\n    for (const manifestKey of Object.keys(viewExtensionsOfPage)) {\n        const manifestKeyParts = manifestKey.split('|');\n        const [keyExtensionType, keyEntitySet] = manifestKeyParts;\n        // If Object Page section have key, then Ignore it as it is not from QuickVariantSelectionX\n        const referenceId = manifestKeyParts[2];\n        const keyTab = objectPageSectionData && referenceId === objectPageSectionData.key ? undefined : referenceId;\n        const extensionType = ViewTemplateType[keyExtensionType];\n        if (extensionType && '|' + keyEntitySet === targetKeyEntitySet) {\n            const fragmentType = viewExtensionsOfPage[manifestKey].type\n                ? viewExtensionsOfPage[manifestKey].type.toLowerCase()\n                : 'xml';\n            let fragmentName = viewExtensionsOfPage[manifestKey].fragmentName;\n            if (!fragmentName) {\n                continue;\n            }\n            // Responsive Table ==> check cells' fragment name\n            const cellsFragmentName = determineCellsFragmentName(\n                extensionType,\n                viewExtensionsOfPage,\n                keyEntitySet,\n                referenceId\n            );\n\n            // Retrieve information from fragment\n            const fragmentParts = fragmentName.split('.');\n            fragmentName = fragmentParts[fragmentParts.length - 1] + FRAGMENTNAMEPART + fragmentType;\n            const filteredFragments = fragments.filter((fragment) => fragment['dataSourceUri'].endsWith(fragmentName));\n            analyzeFilteredFragments(\n                filteredFragments,\n                config,\n                viewExtensionsOfPage,\n                manifestKey,\n                keyTab,\n                extensionType,\n                cellsFragmentName\n            );\n        }\n    }\n}\n\n/**\n * Adds custom column information from manifest and fragments to the configuration\n * @param config - configuration, to be enhanced\n * @param manifest - actual manifest.json\n * @param v2Page - actual page in the manifest\n * @param pageType - type of the page\n * @param fragments - list of all fragments\n * @param objectPageSectionData - optional information, for object page\n */\nexport function addFragments(\n    config: LROPConfigsType,\n    manifest: object,\n    v2Page: v2.SapUiAppPageV2,\n    pageType: PageTypeV2,\n    fragments?: FileData[],\n    objectPageSectionData?: ObjectPageSectionData\n): void {\n    if (!fragments) {\n        return;\n    }\n    const targetKeyEntitySet =\n        '|' + (objectPageSectionData && objectPageSectionData.target ? objectPageSectionData.target : v2Page.entitySet);\n\n    if (\n        manifest[ManifestSection.ui5] &&\n        manifest[ManifestSection.ui5]['extends'] &&\n        manifest[ManifestSection.ui5]['extends']['extensions'] &&\n        manifest[ManifestSection.ui5]['extends']['extensions']['sap.ui.viewExtensions']\n    ) {\n        const viewExtension = PAGETYPE_VIEW_EXTENSION_TEMPLATE_MAP.get(pageType);\n        const viewExtensionsOfPage =\n            manifest[ManifestSection.ui5]['extends']['extensions']['sap.ui.viewExtensions'][viewExtension];\n        if (!viewExtensionsOfPage) {\n            return;\n        }\n        processViewExtensions(viewExtensionsOfPage, targetKeyEntitySet, objectPageSectionData, config, fragments);\n    }\n}\n\n/**\n * Prepares header standard actions information for LR/ALP config\n * @param {ListReportConfig} listReportConfig - LR config, to be filled\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param {Definition} schemaDefinitions - app schema definitions\n */\nexport function importHeaderActions(\n    listReportConfig: v2.ListReportConfigV2,\n    factory: MetadataInstanceInterface,\n    schemaDefinitions: Definition\n) {\n    listReportConfig.header = { actions: {} };\n    if (schemaDefinitions[DefinitionName.HeaderActionsStandard]) {\n        const headerActions = schemaDefinitions[DefinitionName.HeaderActionsStandard].properties;\n        for (const actionKey in headerActions) {\n            listReportConfig.header.actions[actionKey] = factory.createInstance(PageTypeV2.ListReport, actionKey, {});\n        }\n    }\n}\n", "import type { v2 } from '@sap/ux-specification-types';\nimport { ControlType, DefinitionName, VOCWITHCOLONS } from '@sap/ux-specification-types';\nimport type { Definition } from 'typescript-json-schema';\n\nexport type FlexForTransfer = {\n    controlId: string;\n    controlType: string;\n    propertyId: string;\n    facetId?: string;\n    newValue: any;\n    creation: string;\n};\n\nexport interface FlexChangesForTransfer {\n    [controlId: string]: FlexForTransfer;\n}\n\nexport type ConfigTableType = v2.ResponsiveTable | v2.TreeTable | v2.AnalyticalTable | v2.GridTable | v2.TableALP;\n\nexport function addFlexForTable(config: ConfigTableType, change: FlexForTransfer, jsonSchema: Definition): void {\n    if (change.controlType.endsWith(DefinitionName.Table)) {\n        config[change.propertyId] = change.newValue;\n    } else if (change.controlType === ControlType.TableColumn) {\n        const schemaProperty = (jsonSchema?.definitions[DefinitionName.TableColumn] as Definition).properties[\n            change.propertyId\n        ];\n        if (!schemaProperty) {\n            return;\n        }\n        const idParts = change.controlId.split('-');\n        const lastIdPart = idParts[idParts.length - 1];\n        // As the last stable Id part is still too long in some cases, strip off the fixed parts.\n        // It must the be added again by the export!\n        const annotationPart = lastIdPart.split('template:::TableColumn:::');\n        const colId = annotationPart[annotationPart.length - 1]\n            .replace(/sSmartTableId.+?:::/, '')\n            .replace('::com.sap.vocabularies', VOCWITHCOLONS)\n            .replace('/', ':2f');\n        if (!config.columns) {\n            config.columns = {};\n        }\n        if (!config.columns[colId]) {\n            config.columns[colId] = {};\n        }\n        config.columns[colId][change.propertyId] = change.newValue;\n    }\n}\n", "import type { PageTypeV4 } from '@sap/ux-specification-types';\nimport { v2, PageTypeV2 } from '@sap/ux-specification-types';\n\n/**\n * Method searches in manifest object by passed path and returns found value.\n * If value was not found in manifest object,\n *   then method created empty object in manifest object within passed path.\n * @param manifest - target manifest object\n * @param path - path to lookup in manifest\n * @returns Found or created value\n */\nexport const ensureManifestSectionByPathV2 = (manifest: object, path: string): object => {\n    let manifestSection = manifest;\n    path.split('/').forEach(function (element) {\n        if (!manifestSection[element]) {\n            manifestSection[element] = {};\n        }\n        manifestSection = manifestSection && manifestSection[element];\n    });\n    return manifestSection ? manifestSection : {};\n};\n\n/**\n * Method searches in manifest object by passed path and returns found value.\n * If value was not found in manifest object, then 'undefined' is returned.\n * @param manifest - target manifest file\n * @param path - path to lookup in manifest\n * @returns Found value\n */\nexport const getManifestSectionByPathV2 = (manifest: object, path: string): object | undefined => {\n    let manifestSection = manifest;\n    const elements = path.split('/');\n    for (const element of elements) {\n        if (!manifestSection[element]) {\n            return undefined;\n        }\n        manifestSection = manifestSection && manifestSection[element];\n    }\n    return manifestSection ? manifestSection : {};\n};\n\nexport const deleteManifestSectionByPathV2 = (manifest: object, path: string): void => {\n    let manifestSection = manifest;\n    for (let index = 0; index < path.split('/').length; index++) {\n        const element = path.split('/')[index];\n        if (index === path.split('/').length - 1) {\n            delete manifestSection[element];\n        } else {\n            manifestSection = manifestSection && manifestSection[element];\n        }\n    }\n};\n\nfunction getNewPageTemplate(pageType: PageTypeV2 | PageTypeV4): object {\n    return {\n        component: {\n            name: 'sap.suite.ui.generic.template.' + pageType\n        }\n    };\n}\n\n/**\n * Method finds matching pages by 'entitySet' and 'navigationProperty' in passed pages object.\n * @param {SapUiAppPagesV2} pages Object with pages.\n * @param {string} [entitySet] Entity set.\n * @param {string} [navigationProperty] Navigation property.\n * @returns {SapUiAppPageV2 | undefined} Matching page object.\n */\nfunction findPageInManifest(\n    pages: v2.SapUiAppPagesV2,\n    entitySet?: string,\n    navigationProperty?: string\n): v2.SapUiAppPageV2 | undefined {\n    if (!pages) {\n        return;\n    }\n    for (const pageId in pages) {\n        const page = pages[pageId];\n        if (page.entitySet === entitySet && page.navigationProperty === navigationProperty) {\n            return page;\n        }\n    }\n}\n\nfunction transformPageFromAssociation(configPages: v2.Pages, association: string, manifestPage: object) {\n    //Handling partial deletion of a page\n    if (!configPages[association]) {\n        return;\n    }\n    if (manifestPage['pages'] && !Object.values(manifestPage['pages'])[0]) {\n        manifestPage['pages'][`${configPages[association].pageType}|${configPages[association].entitySet}`] =\n            getNewPageTemplate(configPages[association].pageType);\n    }\n    if (!manifestPage['pages']) {\n        manifestPage['pages'] = {\n            [`${configPages[association].pageType}|${configPages[association].entitySet}`]: getNewPageTemplate(\n                configPages[association].pageType\n            )\n        };\n    }\n    if (!Array.isArray(manifestPage['pages'])) {\n        let associatedManifestPage = findPageInManifest(\n            manifestPage['pages'],\n            configPages[association].entitySet,\n            configPages[association].navigationProperty\n        );\n\n        if (!associatedManifestPage) {\n            manifestPage['pages'][`${configPages[association].pageType}|${configPages[association].entitySet}`] =\n                associatedManifestPage = getNewPageTemplate(configPages[association].pageType);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        transformPageToNewManifestV2(association, configPages, associatedManifestPage);\n    }\n}\n\nfunction deletePage(manifestPage: object, configPages: v2.Pages, configPage: v2.Page) {\n    if (manifestPage['pages']) {\n        Object.keys(manifestPage['pages']).forEach((key) => {\n            const currentPage = manifestPage['pages'][key];\n            if (currentPage.component?.name === v2.FE_TEMPLATE_V2_OBJECT_PAGE) {\n                const configKey = `ObjectPage_${currentPage.entitySet}`;\n                if (!configPages[configKey]) {\n                    delete manifestPage['pages'][key];\n                }\n            }\n        });\n    }\n    if (\n        (configPage.pageType === PageTypeV2.ListReport || configPage.pageType === PageTypeV2.AnalyticalListPage) &&\n        Object.keys(configPage.navigation).length === 0\n    ) {\n        delete manifestPage['pages'];\n    }\n}\n\n/**\n * Transfers pages and routings from manifest to the config pages\n * @param pageId - page ID\n * @param configPages - config definitions of each page\n * @param manifestPage - top page definition in manifest\n */\nexport function transformPageToNewManifestV2(pageId: string, configPages: v2.Pages, manifestPage: object): void {\n    const configPage = configPages[pageId];\n    if (!configPage) {\n        return;\n    }\n    if (configPage.entitySet) {\n        manifestPage['entitySet'] = configPage.entitySet;\n    }\n    if (configPage.pageType === PageTypeV2.ListReport) {\n        manifestPage['component']['list'] = true;\n    }\n    if (configPage.navigationProperty) {\n        manifestPage['navigationProperty'] = configPage.navigationProperty;\n    }\n    if (configPage.defaultLayoutType) {\n        manifestPage['defaultLayoutType'] = configPage.defaultLayoutType;\n    } else if ('defaultLayoutType' in manifestPage) {\n        delete manifestPage['defaultLayoutType'];\n    }\n    if (configPage.navigation) {\n        for (const association in configPage.navigation) {\n            transformPageFromAssociation(configPages, association, manifestPage);\n        }\n        // Delete page\n        if (!Array.isArray(manifestPage['pages'])) {\n            deletePage(manifestPage, configPages, configPage);\n        }\n    }\n}\n", "export * from './Card';\nexport * from './Field';\nexport * from './FilterBar';\nexport * from './FormAction';\nexport * from './Fragment';\nexport * from './Table';\nexport * from './TableColumn';\nexport * from './ToolBar';\nexport * from './Action';\nexport * from './AnalyticalListPageChart';\nexport * from './AnalyticalListPageKPI';\nexport * from './ObjectPageHeader';\nexport * from './ObjectPageHeaderAction';\nexport * from './ObjectPageFooterAction';\nexport * from './ObjectPageLayout';\nexport * from './ObjectPageCustomSection';\nexport * from './ObjectPageSectionsV2';\nexport * from './ObjectPageChart';\nexport * from './ObjectPageTable';\nexport * from './ObjectPageToolBarAction';\n", "import { syncRule, childId, validity } from '../common/decoration';\nimport type {\n    TableColumnVerticalAlignment,\n    Target,\n    Application,\n    FlexibleColumnLayout,\n    Manifest\n} from '@sap/ux-specification-types';\nimport { v2, ManifestSection, GENERICAPPSETTINGS, VOCWITHCOLONS } from '@sap/ux-specification-types';\n\nexport const getAppSettingPathV2 = (pageKeys: string[]): string => {\n    return `${ManifestSection.generic}/pages/${pageKeys[0]}/component/settings`;\n};\n\nexport const getTableSettingPathV2 = (pageKeys: string[]): string => {\n    return getAppSettingPathV2(pageKeys) + '/tableSettings';\n};\n\nexport const getChartSettingPathV2 = (pageKeys: string[]): string => {\n    return getAppSettingPathV2(pageKeys) + '/chartSettings';\n};\n\nexport const getDataLoadSettingPathV2 = (pageKeys: string[]): string => {\n    return getAppSettingPathV2(pageKeys) + '/dataLoadSettings';\n};\n\nexport const getCreationFieldsPathV2 = (pageKeys: string[], key: string): string => {\n    return `${getTableSettingPathV2(pageKeys)}/createWithParameterDialog/fields/${key}`;\n};\n\nexport const getOVPsettingPath = (): string => {\n    return ManifestSection.ovp;\n};\n\nexport const getCardSettingsPath = (cardKey: string[]): string => {\n    const pathParts: string[] = [ManifestSection.ovp + '/cards'];\n    cardKey.forEach((block) => {\n        if (block in v2.CardSettingsType) {\n            pathParts.push('settings');\n        } else {\n            pathParts.push(block);\n        }\n    });\n    pathParts.pop();\n    return pathParts.join('/');\n};\n\nexport const getGlobalSettingsPath = (cardKey: string[]): string => {\n    const pathParts: string[] = [ManifestSection.ovp];\n    cardKey.forEach((block) => {\n        pathParts.push(block);\n    });\n    pathParts.pop();\n    return pathParts.join('/');\n};\n\n// This corresponds to ALP KPI settings\nexport const getKPISettingsPath = (pageKeys: string[], kpiKey: string): string => {\n    return `${ManifestSection.generic}/pages/${pageKeys[0]}/component/settings/keyPerformanceIndicators/${kpiKey}`;\n};\n\n// This corresponds to List Report and Object page global settings\nexport const getAppRootSettingOBJPath = (pageKeys: string[]): string => {\n    const pathParts: string[] = [ManifestSection.generic];\n    pageKeys.forEach((pageKey) => {\n        pathParts.push('pages/' + pageKey);\n    });\n    return pathParts.join('/');\n};\n\n// This corresponds to global object page settings\nexport const getAppSettingOBJPathV2 = (pageKeys: string[]): string => {\n    const pathParts: string[] = [];\n    pathParts.push(getAppRootSettingOBJPath(pageKeys));\n    pathParts.push('component/settings');\n    return pathParts.join('/');\n};\n\nexport const getAppSettingOBJsectionPathV2 = (pageKeys: string[], _manifest: Manifest, sectionId: string): string => {\n    const pathParts: string[] = [];\n    pathParts.push(getAppRootSettingOBJPath(pageKeys));\n    const manifestSectionId = sectionId.replace(VOCWITHCOLONS, '::com.sap.vocabularies');\n    pathParts.push('component/settings/sections/' + manifestSectionId);\n    return pathParts.join('/');\n};\n\nexport const getTableSettingsOBJsectionPathV2 = (\n    pageKeys: string[],\n    _manifest: Manifest,\n    sectionId: string\n): string => {\n    const path = getAppSettingOBJsectionPathV2(pageKeys, {} as Manifest, sectionId);\n    return path + '/tableSettings';\n};\n\nexport const getChartSettingsOBJsectionPathV2 = (\n    pageKeys: string[],\n    _manifest: Manifest,\n    sectionId: string\n): string => {\n    const path = getAppSettingOBJsectionPathV2(pageKeys, {} as Manifest, sectionId);\n    return path + '/chartSettings';\n};\n\nexport const getViewExtensionsPath = (): string => {\n    return `sap.ui5/extends/extensions/${v2.SAPUI5_VIEW_EXTENSION}/${v2.SAPUI5_VIEW_EXTENSION_OBJECT_PAGE}`;\n};\n\nexport const getObjectPageCustomSectionPath = (\n    pageName: string[],\n    _manifest: Manifest,\n    sectionId: string,\n    ...pathParts: string[]\n): string => {\n    const separator = '|';\n    const sectionIdParts = sectionId.split(separator);\n    const pageNameParts = pageName[pageName.length - 1].split(separator);\n    let idLastPart = '';\n    if (sectionIdParts.length === 4) {\n        // Four parts ==> the last one is incremented to avoid getting the same path\n        // We need to merge 3 and 4\n        idLastPart = [sectionIdParts[2], sectionIdParts[3]].join(separator);\n    } else if (sectionIdParts.length === 3) {\n        idLastPart = sectionIdParts[2];\n    }\n    const customSectionId = [sectionIdParts[0], pageNameParts[pageNameParts.length - 1], idLastPart].join(separator);\n    // Sub-path parts are passed\n    pathParts.unshift(customSectionId);\n\n    return `${getViewExtensionsPath()}/${pathParts.join('/')}`;\n};\n\nexport class ApplicationV2 implements Application {\n    id?: string;\n    pages?: v2.Pages;\n    home?: string;\n    target?: Target;\n    @childId('settings')\n    settings?: AppSettings;\n}\n\nexport class AppSettings implements v2.AppSettings {\n    @syncRule({\n        manifest: {\n            path: (): string => 'sap.app'\n        }\n    })\n    title?: string;\n\n    @syncRule({\n        manifest: {\n            path: (): string => 'sap.app'\n        }\n    })\n    description?: string;\n\n    @syncRule({\n        manifest: {\n            path: (): string => GENERICAPPSETTINGS\n        }\n    })\n    @validity({\n        since: '1.50.0'\n    })\n    flexibleColumnLayout?: FlexibleColumnLayout;\n\n    @syncRule({\n        manifest: {\n            path: (): string => GENERICAPPSETTINGS\n        }\n    })\n    @validity({\n        since: '1.46.0'\n    })\n    forceGlobalRefresh?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (): string => GENERICAPPSETTINGS\n        }\n    })\n    @validity({\n        since: '1.74.0'\n    })\n    tableColumnVerticalAlignment?: TableColumnVerticalAlignment;\n\n    @syncRule({\n        manifest: {\n            path: (): string => 'sap.ui5'\n        }\n    })\n    @validity({\n        since: '1.56.0'\n    })\n    flexEnabled?: boolean;\n}\n", "import type {\n    v2,\n    SapOvpDefaultSpanDef,\n    SapOvpTabSetting,\n    SapOvpPlotAreaDef,\n    SapOvpTimeAxisDef\n} from '@sap/ux-specification-types';\nimport { syncRule } from '../../../common/decoration/decorators';\nimport { getCardSettingsPath } from '../../application';\n\nexport class CommonCardSettings implements v2.CommonCardSettings {\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    entitySet?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    title: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    subTitle?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    identificationAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    selectionAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    presentationAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    defaultSpan?: SapOvpDefaultSpanDef;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    requireAppAuthorization?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    tabs?: [SapOvpTabSetting];\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    addODataSelect?: boolean;\n}\n\nexport class CustomCard extends CommonCardSettings implements v2.CustomCard, v2.CustomCardSettings {\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    model: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    template: v2.CardTemplateType;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    settings?: v2.CustomCardSettings;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    itemText?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    valueSelectionInfo?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    staticContent?: {\n        [k: string]: any;\n    }[];\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    listFlavor?: 'standard' | 'bar' | 'carousel';\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    listType?: 'extended' | 'condensed';\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    sortBy?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    sortOrder?: 'ascending' | 'descending';\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    annotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    chartAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    dataPointAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    kpiAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    selectionPresentationAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    dynamicSubtitleAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    ignoreSapText?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    objectStreamCardsSettings?: {\n        showFirstActionInFooter?: boolean;\n        annotationPath?: string;\n    };\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    enableLocaleCurrencyFormatting?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    navigation?: 'dataPointNav' | 'chartNav' | 'headerNav' | 'noHeaderNav';\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    showFilterInHeader?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    showSortingInHeader?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    imageSupported?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    showLineItemDetail?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    showLabelText?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    customParams?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    chartProperties?: {\n        plotArea?: SapOvpPlotAreaDef;\n        timeAxis?: SapOvpTimeAxisDef;\n    };\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    colorPalette?:\n        | {\n              [k: string]: any;\n          }[]\n        | {\n              [k: string]: any;\n          };\n    [k: string]: any;\n}\n\nexport class ListCard extends CommonCardSettings implements v2.ListCard {\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    model: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    template: v2.CardTemplateType.list | v2.CardTemplateType.listv4;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    settings: v2.ListCardSettings;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    listCardSettings: v2.ListCardSettings;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    listFlavor?: 'standard' | 'bar' | 'carousel';\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    listType?: 'extended' | 'condensed';\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    annotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    valueSelectionInfo?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    sortBy?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    sortOrder?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    dataPointAnnotationPath?: string;\n}\n\nexport class AnalyticalCard extends CommonCardSettings implements v2.AnalyticalCard {\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    model: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    template: v2.CardTemplateType.analytical | v2.CardTemplateType.analyticalv4;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    settings: v2.AnalyticalCardSettings;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    analyticalCardSettings: v2.AnalyticalCardSettings | v2.AnalyticalCardSettingsv4;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    chartAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    dataPointAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    valueSelectionInfo?: string;\n}\n\nexport class StackCard extends CommonCardSettings implements v2.StackCard {\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    model: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    template: v2.CardTemplateType.stack;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    settings: v2.StackCardSettings;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    stackCardSettings: v2.StackCardSettings;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    itemText?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    objectStreamCardsNavigationProperty?: string;\n}\n\nexport class LinklistCard extends CommonCardSettings implements v2.LinklistCard {\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    model: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    template: v2.CardTemplateType.linklist;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    settings: v2.LinkListCardSettings;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    linkListCardSettings: v2.LinkListCardSettings;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    title: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    subTitle?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    targetUri?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    listFlavor?: 'standard' | 'bar' | 'carousel';\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    sortBy?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    sortOrder?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    headerAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    identificationAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    defaultSpan?: SapOvpDefaultSpanDef;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    staticContent?: v2.StaticContent[];\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    requireAppAuthorization?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    annotationPath?: string;\n}\n\nexport class TableCard extends CommonCardSettings implements v2.TableCard {\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    model: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    template: v2.CardTemplateType.table | v2.CardTemplateType.tablev4;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    disableTableCardFlexibility?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    settings: v2.TableCardSettings;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    tableCardSettings: v2.TableCardSettings;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    annotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    listFlavor?: 'standard' | 'bar' | 'carousel';\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    listType?: 'extended' | 'condensed';\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    dataPointAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    selectionPresentationAnnotationPath?: string;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getCardSettingsPath(cardKeys)\n        }\n    })\n    valueSelectionInfo?: string;\n}\n", "import type { v2, ControlTypeFunction } from '@sap/ux-specification-types';\nimport { ControlType } from '@sap/ux-specification-types';\nimport { syncRule, exportToFlexChange, buildControlIdFromParent } from '../../../common/decoration';\nimport { addPatternForBindingChangeOfEnumOP, convertSectionId } from '../../../common';\n\n/**\n * Create stable ID for Object Page Form Field\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @param {ControlTypeFunction} controlType\n * @param {string} facetID title from the app schema (comprising for instance the facet ID)\n * @returns {string} stable ID of Object Page Form Action button\n */\nconst getSmartFieldControlId = (\n    baseId: string,\n    _idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    _controlType: ControlTypeFunction,\n    facetId: string\n): string => {\n    const convertedId = convertSectionId(breadcrumbs[1], facetId);\n    const fieldCrumb = breadcrumbs.slice(-1)[0];\n    const breadcrumbsTrail = [convertedId, fieldCrumb, 'GroupElement'];\n    return buildControlIdFromParent(baseId, breadcrumbsTrail);\n};\n\nexport class Field implements v2.Field {\n    @syncRule({\n        flex: {\n            controlId: getSmartFieldControlId,\n            controlType: (): ControlType => ControlType.GroupElement,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n", "import { syncRule, validity } from '../../../common/decoration/decorators';\nimport { buildControlIdFromParent, exportToFlexChange } from '../../../common/decoration';\nimport { getAppSettingPathV2 } from '../../application';\nimport { ControlType, DATESETTINGSPATH, v2 } from '@sap/ux-specification-types';\n\nexport function importDateSettings(manifestSection: object): DateRange {\n    if (!manifestSection || !manifestSection['dateSettings']) {\n        return undefined;\n    }\n    const configPart: DateRange = JSON.parse(JSON.stringify(manifestSection['dateSettings']));\n    // converted CSV format to array of strings\n    if (typeof manifestSection['dateSettings']['selectedValues'] === 'string') {\n        configPart.selectedValues = manifestSection['dateSettings']['selectedValues'].split(',') as v2.DateRangeType[];\n    }\n    delete configPart['fields'];\n    return configPart;\n}\n\nexport function exportDateSettings(manifestSection: unknown, configPart: DateRange, key: string): void {\n    manifestSection[key] = JSON.parse(JSON.stringify(configPart[key]));\n    //now convert enum array to joined string\n    const field = configPart[key];\n    if (key === 'selectedValues') {\n        manifestSection[key] = field.join();\n    }\n}\n\nfunction importDateSettingsField(manifestSection: string | Array<object>, _sectionId: string, propertyKey: string) {\n    const configPart = manifestSection?.[propertyKey]\n        ? JSON.parse(JSON.stringify(manifestSection?.[propertyKey]))\n        : undefined;\n    let selectionField;\n    if (propertyKey === 'selectedValues' && typeof configPart === 'string') {\n        selectionField = configPart.split(',') as v2.DateRangeType[];\n    }\n    if (propertyKey === 'filter' && typeof configPart === 'object') {\n        selectionField = [];\n        configPart.forEach((section, index) => {\n            selectionField[index] = section;\n            if (section['equals'] && typeof section['equals'] === 'string') {\n                selectionField[index].equals = section['equals'].split(',') as v2.DateRangeType[];\n            }\n        });\n    }\n    return selectionField;\n}\n\nexport function exportDateSettingsField(manifestSection: unknown, configPart: DateRange, key: string): void {\n    manifestSection[key] = JSON.parse(JSON.stringify(configPart[key]));\n    const field = configPart[key];\n    if (key === 'selectedValues') {\n        manifestSection[key] = field.join();\n    }\n    if (key === 'filter') {\n        for (const filterKey in field) {\n            const filterValue = field[filterKey];\n            manifestSection[key][filterKey] = filterValue;\n            if (filterValue.equals && Array.isArray(filterValue.equals)) {\n                manifestSection[key][filterKey].equals = filterValue.equals.join();\n            }\n        }\n    }\n}\n\nexport class DateRange implements v2.DateRange {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => {\n                return getAppSettingPathV2(pageKeys) + DATESETTINGSPATH;\n            }\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    useDateRange?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys) + DATESETTINGSPATH,\n            import: importDateSettings,\n            export: exportDateSettings\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    selectedValues?: v2.DateRangeType[];\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys) + DATESETTINGSPATH\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    exclude?: boolean;\n}\n\nconst flexRuleForSmartFilterBar = {\n    controlId: buildControlIdFromParent,\n    controlType: (): ControlType => ControlType.SmartFilterBar,\n    createFlexChange: exportToFlexChange\n};\n\nconst manifestRuleForSelectionField = {\n    path: (pageKeys, _manifest, breadcrumbs): string =>\n        `${getAppSettingPathV2(pageKeys)}${DATESETTINGSPATH}/fields/${breadcrumbs}`\n};\n\nconst manifestRuleForSelectionFieldWithArrays = {\n    ...manifestRuleForSelectionField,\n    import: importDateSettingsField,\n    export: exportDateSettingsField\n};\n\nexport class SelectionFieldDateSettings implements v2.SelectionFieldDateSettings {\n    @syncRule({\n        manifest: manifestRuleForSelectionFieldWithArrays\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    selectedValues?: v2.DateRangeType[];\n\n    @syncRule({\n        manifest: manifestRuleForSelectionField\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    exclude?: boolean;\n\n    @syncRule({\n        manifest: manifestRuleForSelectionField\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    customDateRangeImplementation?: string;\n\n    @syncRule({\n        manifest: manifestRuleForSelectionFieldWithArrays\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    filter?: v2.FilterType[];\n}\n\nexport class SelectionFields implements v2.SelectionFields {\n    [key: string]: v2.SelectionField | v2.SelectionFieldDateSettings;\n}\n\nexport class ListReportFilterBar implements v2.ListReportFilterBar {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.38.0'\n    })\n    smartVariantManagement?: boolean;\n\n    @syncRule({\n        flex: flexRuleForSmartFilterBar\n    })\n    @validity({\n        since: '1.40.0'\n    })\n    liveMode?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.48.0'\n    })\n    variantManagementHidden: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.52.0' // Available in 1.52 so exact validity information is not required\n    })\n    subTitleIfVariantMgmtHidden?: string;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys) + '/filterSettings',\n            import: importDateSettings\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    dateSettings?: DateRange;\n\n    selectionFields?: SelectionFields;\n\n    @syncRule({\n        flex: flexRuleForSmartFilterBar\n    })\n    @validity({\n        since: '1.28.0'\n    })\n    showClearOnFB?: boolean;\n\n    @syncRule({\n        flex: flexRuleForSmartFilterBar\n    })\n    @validity({\n        since: '1.38.0'\n    })\n    showFilterConfiguration?: boolean;\n\n    @syncRule({\n        flex: flexRuleForSmartFilterBar\n    })\n    @validity({\n        since: '1.28.0'\n    })\n    showRestoreOnFB?: boolean;\n}\n\nexport class AnalyticalListPageFilterBar extends ListReportFilterBar implements v2.AnalyticalListPageFilterBar {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    showGoButtonOnFilterBar?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.60.0'\n    })\n    filterDefaultsFromSelectionVariant?: boolean;\n}\n", "import type { v2, ControlTypeFunction } from '@sap/ux-specification-types';\nimport { ControlType } from '@sap/ux-specification-types';\nimport {\n    syncRule,\n    exportToFlexChange,\n    buildControlIdFromParent,\n    validity,\n    convertSectionId\n} from '../../../common/decoration';\nimport { addPatternForBindingChangeOfEnumOP } from '../../../common';\n\n/**\n * Create stable ID for Object Page Form Action button\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @param {ControlTypeFunction} controlType\n * @param {string} facetID title from the app schema (comprising for instance the facet ID)\n * @returns {string} stable ID of Object Page Form Action button\n */\nconst getFormActionButtonId = (\n    baseId: string,\n    idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    controlType: ControlTypeFunction,\n    facetID: string\n): string => {\n    if (controlType() === ControlType.Button) {\n        const entity = breadcrumbs[breadcrumbs.length - 1];\n        const section = convertSectionId(breadcrumbs[1], facetID);\n        return `${baseId}action::${entity}::${section}::FormAction`;\n    }\n    return buildControlIdFromParent(baseId, idBreadcrumbs);\n};\n\nexport class FormAction implements v2.FormAction {\n    @syncRule({\n        flex: {\n            controlId: getFormActionButtonId,\n            controlType: (): ControlType => ControlType.Button,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getFormActionButtonId,\n            controlType: (): ControlType => ControlType.Button,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    tooltip?: string; // sap.ui.core.TooltipBase\n\n    @syncRule({\n        flex: {\n            controlId: getFormActionButtonId,\n            controlType: (): ControlType => ControlType.Button,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    icon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: {\n            controlId: getFormActionButtonId,\n            controlType: (): ControlType => ControlType.Button,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    activeIcon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: {\n            controlId: getFormActionButtonId,\n            controlType: (): ControlType => ControlType.Button,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    @validity({\n        since: '1.73.0'\n    })\n    type?: v2.ButtonType;\n}\n\nexport class FieldForAction implements v2.FormAction {\n    @syncRule({\n        flex: {\n            controlId: getFormActionButtonId,\n            controlType: (): ControlType => ControlType.Button,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getFormActionButtonId,\n            controlType: (): ControlType => ControlType.Button,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    tooltip?: string; // sap.ui.core.TooltipBase\n\n    @syncRule({\n        flex: {\n            controlId: getFormActionButtonId,\n            controlType: (): ControlType => ControlType.Button,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    icon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: {\n            controlId: getFormActionButtonId,\n            controlType: (): ControlType => ControlType.Button,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    activeIcon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: {\n            controlId: getFormActionButtonId,\n            controlType: (): ControlType => ControlType.Button,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    @validity({\n        since: '1.73.0'\n    })\n    type?: v2.ButtonType;\n}\n", "import { v2, FRAGMENTNAMEPART, ViewTemplateType, LogSeverity } from '@sap/ux-specification-types';\nimport type { ExportResults, FileData, ExtensionLogger } from '@sap/ux-specification-types';\nimport { xml2json, json2xml } from 'xml-js';\nimport {\n    getSingleColumnContent,\n    getColumnFragmentContent,\n    getResponsiveTableCellsFragment\n} from '../view-controller-generator';\nimport i18next from 'i18next';\nimport { log } from '../../../../extensionLogger';\nimport { deleteManifestSectionByPathV2, ensureManifestSectionByPathV2 } from '../manifest';\nimport { sep } from 'path';\n\nexport const FRAGMENT_DEFINITION = 'core:FragmentDefinition';\nexport const SAP_UI_TABLE = 'sap.ui.table';\n\nconst VIEW_TEMPLATE_TAGTYPE_MAP: Map<ViewTemplateType, { namespace: string; name: string }> = new Map([\n    [ViewTemplateType.ResponsiveTableColumnsExtension, { namespace: 'sap.m', name: 'Column' }],\n    [ViewTemplateType.TreeTableColumnsExtension, { namespace: SAP_UI_TABLE, name: 'Column' }],\n    [ViewTemplateType.GridTableColumnsExtension, { namespace: SAP_UI_TABLE, name: 'Column' }],\n    [ViewTemplateType.AnalyticalTableColumnsExtension, { namespace: SAP_UI_TABLE, name: 'AnalyticalColumn' }]\n]);\n\nconst FE_TEMPLATE_VIEW_EXTENSION_MAP: Map<string, string> = new Map([\n    [v2.FE_TEMPLATE_V2_LIST_REPORT, v2.SAPUI5_VIEW_EXTENSION_LIST_REPORT],\n    [v2.FE_TEMPLATE_V2_ALP, v2.SAPUI5_VIEW_EXTENSION_ANALYTICAL_LIST_PAGE],\n    [v2.FE_TEMPLATE_V2_OBJECT_PAGE, v2.SAPUI5_VIEW_EXTENSION_OBJECT_PAGE]\n]);\n\nconst dummyEntry = {\n    type: 'element',\n    name: 'Text',\n    attributes: { text: 'Placeholder' }\n};\nconst dummyEntryAsString = JSON.stringify(dummyEntry);\n\n/**\n * Lists namespaces available in fragment to consider\n * @param fragment - fragment content\n * @param isCoreFragmentDefinition - If set to true, only the namespaces in core definition will be considered\n * @returns {Map<string, string[]> | undefined} - If available, namespaces will be returned as Map (key: alias, values: name[])\n */\nfunction getFragmentNamespaces(fragment, isCoreFragmentDefinition: boolean): Map<string, string[]> | undefined {\n    const fragmentAttributes = isCoreFragmentDefinition\n        ? fragment[FRAGMENT_DEFINITION]['_attributes']\n        : fragment['_attributes'];\n    if (fragmentAttributes) {\n        const allFragmentNamespaces = new Map<string, string[]>();\n        Object.keys(fragmentAttributes)\n            .filter((attribute) => attribute.startsWith('xmlns'))\n            .forEach((xmlns) => {\n                const existingNamespaces = allFragmentNamespaces.get(fragmentAttributes[xmlns]);\n                allFragmentNamespaces.set(\n                    fragmentAttributes[xmlns],\n                    existingNamespaces\n                        ? [...existingNamespaces, xmlns.split(':')[1] || xmlns]\n                        : [xmlns.split(':')[1] || xmlns]\n                );\n            });\n        return allFragmentNamespaces;\n    }\n}\n\n/**\n * Considers namespace of fragment and returns combined tag name\n * @param tag - tag name and namespace\n * @param {string[]} fragmentNamespace namespaces of fragment\n * @returns {string} tag name consisting of namespace and name\n */\nfunction getTagName(tag: { namespace: string; name: string }, fragmentNamespaces: string[]): string {\n    if (!fragmentNamespaces) {\n        return `${tag.namespace}:${tag.name}`;\n    } else if (fragmentNamespaces.includes('xmlns')) {\n        return tag.name;\n    } else {\n        return `${fragmentNamespaces}:${tag.name}`;\n    }\n}\n\n/**\n * Maps the column template type to the fragment namespace and returns the tag name with namespace of root column definition.\n * @param definition - fragment or content definition\n * @param viewTemplateType - name of the view template that shall be applied\n * @param fragment - fragment definition\n * @returns {unknown | undefined} Root column tag name.\n */\nfunction getTagNameFromFragmentJSON(\n    definition: unknown,\n    viewTemplateType?: ViewTemplateType,\n    fragment: unknown = definition\n): string | undefined {\n    const namespaces = getFragmentNamespaces(fragment, viewTemplateType || fragment !== definition ? true : false);\n    if (viewTemplateType) {\n        const tag = VIEW_TEMPLATE_TAGTYPE_MAP.get(viewTemplateType);\n        return getTagName(tag, namespaces.get(tag.namespace));\n    } else {\n        const keys = VIEW_TEMPLATE_TAGTYPE_MAP.keys();\n        for (const key of keys) {\n            const tag = VIEW_TEMPLATE_TAGTYPE_MAP.get(key);\n            const tagName = namespaces ? getTagName(tag, namespaces.get(tag.namespace)) : tag.name;\n            if (definition[tagName]) {\n                return tagName;\n            }\n        }\n    }\n    return undefined;\n}\n\n/**\n * Method which receives fragment definition node and reads root column definition.\n * @param {unknown} definition - Application or Page Config object.\n * @param {unknown} fragment - fragment definition\n * @returns {unknown | undefined} Root column read from definition.\n */\nexport function getRootCustomColumnFromFragmentJSON(\n    definition: unknown,\n    fragment = definition\n): string | unknown | undefined {\n    const name = getTagNameFromFragmentJSON(definition, undefined, fragment);\n    return definition[name];\n}\n\n/**\n * Internal function adding content to config column\n * @param configColumns - list of all columns in the config\n * @param columnIndex - index of column\n * @returns - filled personalization data\n */\nfunction addP13nData(configColumns: v2.TableCustomColumns, columnIndex: number): string {\n    const columnProperties = [\n        'id',\n        'text',\n        'className',\n        'fragmentName',\n        'tabKey',\n        'extensionType',\n        'cellsFragmentName'\n    ];\n    let p13nData = `\\\\{`;\n    for (const key in configColumns[columnIndex]) {\n        const value = configColumns[columnIndex][key];\n        if (!columnProperties.includes(key) && value !== undefined && value.length !== 0) {\n            if (p13nData !== '\\\\{') {\n                p13nData += `, `;\n            }\n            p13nData += `\"${key}\": \"${value.toString()}\"`;\n        }\n    }\n    p13nData += '}';\n    return p13nData;\n}\n\n/**\n * Internal function handling a single fragment column if detected in the fragment\n * @param columnsInFragment - list of all columns in fragment\n * @param configColumns - list of all columns in the config\n */\nfunction handleFragmentColumn(columnsInFragment: object, configColumns: v2.TableCustomColumns): boolean {\n    let foundInConfig = false;\n    const customData = columnsInFragment['customData'] || columnsInFragment['table:customData'];\n    if (!customData) {\n        return false;\n    }\n\n    let p13nData = customData['core:CustomData']._attributes.value;\n    const columnParts = JSON.parse(p13nData.substr(1, p13nData.length));\n    const columnIndex = configColumns.findIndex((column) => {\n        return column.columnKey === columnParts.columnKey;\n    });\n    if (columnIndex < 0) {\n        return false;\n    }\n\n    //Found ==> update scenario\n    foundInConfig = true;\n    p13nData = addP13nData(configColumns, columnIndex);\n    customData['core:CustomData']._attributes.value = p13nData;\n    if (!columnsInFragment['Text'] && !columnsInFragment['Label'] && configColumns[columnIndex]?.text) {\n        columnsInFragment['Text'] = {\n            _attributes: {}\n        };\n    }\n    if (columnsInFragment['Text'] && columnsInFragment['Text']['_attributes']) {\n        columnsInFragment['Text']._attributes['text'] = configColumns[columnIndex]?.text;\n    } else if (columnsInFragment['Label'] && columnsInFragment['Label']['_attributes']) {\n        columnsInFragment['Label']._attributes['text'] = configColumns[columnIndex]?.text;\n    }\n    if (!columnsInFragment['_attributes']) {\n        columnsInFragment['_attributes'] = {};\n    }\n    columnsInFragment['_attributes']['id'] = configColumns[columnIndex].id;\n    configColumns.splice(columnIndex, 1);\n    return foundInConfig;\n}\n\n/**\n * Deletes obsolete custom columns from the relevant fragment(s)\n * @param manifestSection - Section in manifest.json comprising the extensions\n * @param fragments - list of all fragments\n * @param pattern - Search string to identify the extension in manifest\n * @param appId - application ID\n */\nfunction deleteColumnsFromFragment(\n    manifestSection: object,\n    fragments: FileData[],\n    pattern: string,\n    appId: string\n): void {\n    const fragmentId = manifestSection[pattern].fragmentName.substr(appId.length + 1);\n    const fragmentType = manifestSection['type'] ? manifestSection['type'].toLowerCase() : 'xml';\n    const fragmentParts = fragmentId.split('.');\n    const fragmentName = fragmentParts[fragmentParts.length - 1] + FRAGMENTNAMEPART + fragmentType;\n    for (const fragment of fragments) {\n        const fragmentPathArray = fragment['dataSourceUri'].split(sep);\n        if (fragmentPathArray[fragmentPathArray.length - 1] === fragmentName) {\n            const fragmentJson = JSON.parse(xml2json(fragment.fileContent, { compact: true }));\n            const tagName = getTagNameFromFragmentJSON(fragmentJson[FRAGMENT_DEFINITION]);\n            if (tagName) {\n                delete fragmentJson[FRAGMENT_DEFINITION][tagName];\n                fragment.fileContent = json2xml(JSON.stringify(fragmentJson), { compact: true, spaces: 4 });\n            }\n            break;\n        }\n    }\n}\n\n/**\n * Deletes a given number of (dummy) cells from a fragment\n * @param fragmentCells - list of all cells in the parsed fragment\n * @param noOfEntriesToBeDeleted - number of entries to be deleted\n */\nfunction deleteNumberOfCells(fragmentCells: any, noOfEntriesToBeDeleted: number): void {\n    //only dummy entry will be deleted automatically!\n    for (let index = 0; index < Object.keys(fragmentCells).length; index++) {\n        if (JSON.stringify(fragmentCells[index]) === dummyEntryAsString) {\n            fragmentCells.splice(index, 1);\n            noOfEntriesToBeDeleted -= 1;\n            if (noOfEntriesToBeDeleted === 0) {\n                break;\n            }\n        }\n    }\n}\n\n/**\n * Deletes cells from the relevant fragment\n * @param cellManifestSection - section in mnifest referring the cells'fragment\n * @param fragments - list of all fragments\n * @param appId - application ID\n */\nfunction deleteCellsFromFragment(cellManifestSection: object, fragments: FileData[], appId: string): void {\n    const fragmentType = cellManifestSection['type'] ? cellManifestSection['type'].toLowerCase() : 'xml';\n    const fragmentParts = cellManifestSection['fragmentName'].substr(appId.length + 1).split('.');\n    const fragmentName = fragmentParts[fragmentParts.length - 1] + FRAGMENTNAMEPART + fragmentType;\n    for (const fragment of fragments) {\n        if (fragment['dataSourceUri'].endsWith(fragmentName)) {\n            const fragmentJson = JSON.parse(xml2json(fragment.fileContent));\n            const fragmentCells =\n                fragmentJson.elements[0].elements &&\n                fragmentJson.elements[0].elements.filter((element) => {\n                    return element.type === 'element';\n                });\n            if (fragmentCells) {\n                deleteNumberOfCells(fragmentJson.elements[0].elements, fragmentCells.length);\n            }\n            fragment.fileContent = json2xml(JSON.stringify(fragmentJson), { spaces: 4 });\n            break;\n        }\n    }\n}\n\n/**\n * Identifies the right extensions based on a pattern, then deletes all corresponding columns and cells\n * @param manifestSection - Section in manifest.json comprising the extensions\n * @param pattern - Search string to identify the extension in manifest\n * @param appId - application ID\n * @param fragments - list of all fragments\n */\nexport function deleteColumnFromFragment(\n    manifestSection: object,\n    pattern: string,\n    appId: string,\n    fragments: FileData[]\n): void {\n    if (fragments) {\n        //delete columns\n        deleteColumnsFromFragment(manifestSection, fragments, pattern, appId);\n        //delete cells\n        const cellsPath = pattern.replace(\n            ViewTemplateType.ResponsiveTableColumnsExtension,\n            ViewTemplateType.ResponsiveTableCellsExtension\n        );\n        const cellManifestSection = manifestSection[cellsPath];\n        if (cellManifestSection) {\n            deleteCellsFromFragment(cellManifestSection, fragments, appId);\n        }\n    }\n}\n\n/**\n * Adds new (dummy) columns to a given fragment, as many as we have entries in the config\n * @param fragmentCells - list of all cells in fragment\n * @param fragmentJson - complete fragment, parsed as JSON\n * @param config - actual config.json\n */\nfunction addNewColumnsInFragment(fragmentCells: any, fragmentJson: any, config: v2.TableCustomColumns): void {\n    const startIndex = fragmentCells ? Object.keys(fragmentCells).length : 0;\n    if (!fragmentJson.elements[0].elements) {\n        fragmentJson.elements[0].elements = [];\n    }\n    for (let index = startIndex; index < Object.keys(config).length; index++) {\n        fragmentJson.elements[0].elements.push(dummyEntry);\n    }\n}\n\n/**\n * Updates non-empty cells in a given fragment, from the config information\n * @param fragment - identified cells' fragment\n * @param config - config.json that lists the new cells' information\n */\nfunction updateNonEmptyCellsFragment(fragment: FileData, config: v2.TableCustomColumns): void {\n    const fragmentJson = JSON.parse(xml2json(fragment.fileContent));\n    const fragmentCells =\n        fragmentJson.elements[0].elements &&\n        fragmentJson.elements[0].elements.filter((element) => {\n            return element.type === 'element';\n        });\n    if (!fragmentCells || Object.keys(fragmentCells).length !== Object.keys(config).length) {\n        if (!fragmentCells || Object.keys(fragmentCells).length < Object.keys(config).length) {\n            addNewColumnsInFragment(fragmentCells, fragmentJson, config);\n        } else if (Object.keys(fragmentCells).length > Object.keys(config).length) {\n            const noOfEntriesToBeDeleted = Object.keys(fragmentCells).length - Object.keys(config).length;\n            const fragmentElements = fragmentJson.elements[0].elements;\n            deleteNumberOfCells(fragmentElements, noOfEntriesToBeDeleted);\n        }\n        fragment.fileContent = json2xml(JSON.stringify(fragmentJson), { spaces: 4 });\n    }\n}\n\n/**\n * Updates the content of a cell fragment file\n * @param fragments - list of existing fragments, to be enhanced\n * @param cellFragmentFileName - file name of the given cell fragment, as calculated from the config entry\n * @param config - current config JSON\n * @returns a boolean value to indicate if the cell fragment could be found n the given list of fragments\n */\nfunction updateCellsFragment(\n    fragments: FileData[],\n    cellFragmentFileName: string,\n    config: v2.TableCustomColumns\n): boolean {\n    let cellsFragmentFound = false;\n    for (const fragment of fragments) {\n        const fragmentPathArray = fragment['dataSourceUri'].split(sep);\n        if (fragmentPathArray[fragmentPathArray.length - 1] === cellFragmentFileName) {\n            cellsFragmentFound = true;\n            if (!fragment.fileContent || Object.keys(fragment.fileContent).length === 0) {\n                // Empty fragment - use template\n                fragment.fileContent = getResponsiveTableCellsFragment(config);\n            } else {\n                updateNonEmptyCellsFragment(fragment, config);\n            }\n            break;\n        }\n    }\n    return cellsFragmentFound;\n}\n\n/**\n * Adapt manifest from the given custom columns' definition in manifest\n * @param manifestPath - path to the current section of the manifest that describes the extension\n * @param {ExportResults} exportResults - export result comprising fragments and manifest\n * @param config - current config part, describing the new image of the extension\n * @param appId - application ID\n * @param {ExtensionLogger} logger - logger instance for exceptions\n * @returns everything that is needed for further processing the fragment\n */\nfunction exportCustomColumnsToManifest(\n    manifestPath: string,\n    exportResults: ExportResults,\n    config: v2.TableCustomColumns,\n    appId: string,\n    logger?: ExtensionLogger\n): { manifestSection: object; lsFilePath: string; cellsFragmentName: string; fragmentType: string } {\n    let lsFilePath: string;\n    let cellsFragmentName: string;\n    const manifest = exportResults.manifest;\n    const manifestSection = ensureManifestSectionByPathV2(manifest, manifestPath);\n    const fragmentType = manifestSection['type'] ? manifestSection['type'].toLowerCase() : 'xml';\n    manifestSection['type'] = fragmentType.toUpperCase();\n\n    for (const configElement of config) {\n        //last one wins -as there can only be one reference in the manifest\n        if (!configElement.fragmentName) {\n            log(logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOFRAGMENT', { columnKey: configElement.columnKey })\n            });\n            continue;\n        }\n        manifestSection['fragmentName'] = configElement.fragmentName;\n        manifestSection['className'] = configElement.className;\n        lsFilePath =\n            configElement.fragmentName?.replace(appId, '<root>/webapp').replace(/[.]/g, sep) +\n            FRAGMENTNAMEPART +\n            fragmentType;\n    }\n    if (manifestPath.indexOf(ViewTemplateType.ResponsiveTableColumnsExtension) > -1) {\n        const cellsPath = manifestPath.replace(\n            ViewTemplateType.ResponsiveTableColumnsExtension,\n            ViewTemplateType.ResponsiveTableCellsExtension\n        );\n        const cellManifestSection = ensureManifestSectionByPathV2(manifest, cellsPath);\n        const cellsFragmentColumn = config.reduce((previousColumn, column) => {\n            return column.cellsFragmentName ? column : previousColumn;\n        });\n        if (cellsFragmentColumn && cellsFragmentColumn.cellsFragmentName) {\n            cellManifestSection['fragmentName'] = cellsFragmentName = cellsFragmentColumn.cellsFragmentName;\n            cellManifestSection['className'] = config[0].className;\n            cellManifestSection['type'] = fragmentType.toUpperCase();\n        } else {\n            deleteManifestSectionByPathV2(manifest, cellsPath);\n        }\n    }\n    return { manifestSection, lsFilePath, cellsFragmentName, fragmentType };\n}\n\n/**\n * Method inserts new custom column into array of existing columns in same place as it appears in column configs.\n * @param {TableCustomColumn} column - Custom column config object.\n * @param {ViewTemplateType} viewTemplateType - template type\n * @param {Object} columnsInFragmentDefinition - Existing columns definition\n * @param {unknown} fragment - fragment definition\n * @param {number} colPos - column position from config\n * @returns {object} Columns object.\n */\nfunction insertNewColumnInFragment(\n    column: v2.TableCustomColumn,\n    viewTemplateType: ViewTemplateType,\n    columnsInFragmentDefinition: {},\n    fragment: unknown,\n    colPos: number\n): object {\n    const newColumnFragment = getSingleColumnContent(column, viewTemplateType);\n    if (newColumnFragment) {\n        const newColumnDefinition = JSON.parse(xml2json(newColumnFragment, { compact: true }));\n        const newColumn = getRootCustomColumnFromFragmentJSON(newColumnDefinition, fragment);\n        if (Array.isArray(columnsInFragmentDefinition)) {\n            // avoid having same columns\n            const columnExists = columnsInFragmentDefinition.some(\n                (col) => JSON.stringify(col) === JSON.stringify(newColumn)\n            );\n            if (!columnExists) {\n                columnsInFragmentDefinition.push(newColumn);\n            }\n        } else {\n            if (columnsInFragmentDefinition) {\n                // insert new column in array at specific position\n                const newColumnsInFragmentDefinition = [columnsInFragmentDefinition];\n                newColumnsInFragmentDefinition.splice(colPos, 0, newColumn);\n                columnsInFragmentDefinition = newColumnsInFragmentDefinition;\n            } else {\n                columnsInFragmentDefinition = [newColumn];\n            }\n        }\n    }\n    return columnsInFragmentDefinition;\n}\n\nfunction processCustomColumnInArray(columnsInFragmentDefinition: any[], configColumns: v2.TableCustomColumns) {\n    // store indexes of columns not appearing in config for later deletion\n    const unexistingColumnIndicesInConfig = [];\n    for (let j = 0; j < columnsInFragmentDefinition.length; j++) {\n        const columnFoundInConfig = handleFragmentColumn(columnsInFragmentDefinition[j], configColumns);\n        if (!columnFoundInConfig) {\n            unexistingColumnIndicesInConfig.push(j);\n        }\n    }\n    for (let i = unexistingColumnIndicesInConfig.length - 1; i >= 0; i--) {\n        columnsInFragmentDefinition.splice(unexistingColumnIndicesInConfig[i], 1);\n    }\n}\n\nfunction maintainExistingColumnInFragment(\n    columnsInFragmentDefinition: {},\n    configColumns: v2.TableCustomColumns,\n    fragmentJson: any\n) {\n    if (columnsInFragmentDefinition) {\n        //find the right column in the identified fragment file\n        if (Array.isArray(columnsInFragmentDefinition)) {\n            processCustomColumnInArray(columnsInFragmentDefinition, configColumns);\n        } else {\n            const columnFoundInConfig = handleFragmentColumn(columnsInFragmentDefinition, configColumns);\n            if (!columnFoundInConfig) {\n                const coreTagName = getTagNameFromFragmentJSON(fragmentJson[FRAGMENT_DEFINITION]);\n                if (coreTagName) {\n                    delete fragmentJson[FRAGMENT_DEFINITION][coreTagName];\n                    columnsInFragmentDefinition = undefined;\n                }\n            }\n        }\n    }\n    return columnsInFragmentDefinition;\n}\n\n/**\n * Method inserts new custom columns into existing columns.\n * @param {v2.TableCustomColumns} configColumns - Custom columns config object.\n * @param {string} fragmentId - fragment file name\n * @param {Object} columnsInFragmentDefinition - Existing columns definition\n * @param {ViewTemplateType} viewTemplateType - template type\n * @param {unknown} fragment - fragment definition\n * @returns {object} Columns object.\n */\nfunction insertNewColumnsInFragment(\n    configColumns: v2.TableCustomColumns,\n    fragmentId: string,\n    columnsInFragmentDefinition: {},\n    viewTemplateType: ViewTemplateType,\n    fragment: unknown\n) {\n    for (const column of configColumns) {\n        if (column.fragmentName.endsWith(fragmentId)) {\n            const colPos = configColumns.indexOf(column);\n            columnsInFragmentDefinition = insertNewColumnInFragment(\n                column,\n                viewTemplateType,\n                columnsInFragmentDefinition,\n                fragment,\n                colPos\n            );\n        }\n    }\n    return columnsInFragmentDefinition;\n}\n\n/**\n * Actualizes the column information in a fragment\n * @param fragments - list of all fragments\n * @param fragmentName - name of the relevant fragment, as maintained in manifest\n * @param fragmentId - ID = substring of the fragment name without the app ID\n * @param configColumns - list of all custom columns in the config\n * @param viewTemplateType - enum value that determines the view template\n * @returns a boolean value indicating if the fragment was found\n */\nfunction updateColumnsInFragment(\n    fragments: FileData[],\n    fragmentName: string,\n    fragmentId: string,\n    configColumns: v2.TableCustomColumns,\n    viewTemplateType: ViewTemplateType\n): boolean {\n    let fragmentFound = false;\n\n    if (!fragments) {\n        return fragmentFound;\n    }\n\n    //find and update the columns' fragment file\n    for (const fragment of fragments) {\n        if (fragment['dataSourceUri'].endsWith(fragmentName)) {\n            let columnsInFragmentDefinition = {};\n            fragmentFound = true;\n            if (!fragment.fileContent || fragment.fileContent.length === 0) {\n                // Empty fragment - use template\n                fragment.fileContent = getColumnFragmentContent(configColumns, viewTemplateType);\n            } else {\n                const fragmentJson = JSON.parse(xml2json(fragment.fileContent, { compact: true }));\n                const originalFragmentJson = JSON.stringify(fragmentJson);\n                //find the right column in the fragment file\n                columnsInFragmentDefinition = getRootCustomColumnFromFragmentJSON(fragmentJson[FRAGMENT_DEFINITION]);\n                columnsInFragmentDefinition = maintainExistingColumnInFragment(\n                    columnsInFragmentDefinition,\n                    configColumns,\n                    fragmentJson\n                );\n                //Insert scenario for the remaining entries\n                columnsInFragmentDefinition = insertNewColumnsInFragment(\n                    configColumns,\n                    fragmentId,\n                    columnsInFragmentDefinition,\n                    viewTemplateType,\n                    fragmentJson\n                );\n                const tagName = getTagNameFromFragmentJSON(fragmentJson, viewTemplateType);\n                fragmentJson[FRAGMENT_DEFINITION][tagName] = columnsInFragmentDefinition;\n                const fragmentContent = JSON.stringify(fragmentJson);\n                if (fragmentContent !== originalFragmentJson) {\n                    fragment.fileContent = json2xml(fragmentContent, { compact: true, spaces: 4 });\n                }\n            }\n            break;\n        }\n    }\n    return fragmentFound;\n}\n\n/**\n * The function transfers ALL properties of one or more custom columns to a given fragment, or creates a new one if necesary.\n * @param {ExportResults} exportResults - export result comprising fragments and manifest\n * @param manifestPath - path to the current section of the manifest that describes the extension\n * @param config - current config part, describing the new image of the extension\n * @param appId - application ID\n * @param viewTemplateType - name of the view template that shall be applied\n * @param {ExtensionLogger} logger - logger instance for exceptions\n */\nexport function exportCustomColumnsToFragment(\n    exportResults: ExportResults,\n    manifestPath: string,\n    config: v2.TableCustomColumns,\n    appId: string,\n    viewTemplateType: ViewTemplateType,\n    logger?: ExtensionLogger\n): void {\n    const fragments: FileData[] = exportResults.fragments;\n\n    //Find and adapt manifest\n    const { manifestSection, lsFilePath, cellsFragmentName, fragmentType } = exportCustomColumnsToManifest(\n        manifestPath,\n        exportResults,\n        config,\n        appId,\n        logger\n    );\n\n    //Find and adapt fragment\n    const configColumns = JSON.parse(JSON.stringify(config));\n    let fragmentName = manifestSection['fragmentName'];\n    const fragmentId = fragmentName.substr(appId.length + 1);\n    const fragmentParts = fragmentId.split('.');\n    const templateType = fragmentParts[fragmentParts.length - 1];\n    fragmentName = templateType + FRAGMENTNAMEPART + fragmentType;\n    const cellFragmentParts = cellsFragmentName?.split('.');\n    const cellTemplateType = cellFragmentParts ? cellFragmentParts[cellFragmentParts.length - 1] : null;\n    const cellFragmentFileName = cellTemplateType ? cellTemplateType + FRAGMENTNAMEPART + fragmentType : null;\n\n    // update columns in fragment\n    const fragmentFound = updateColumnsInFragment(fragments, fragmentName, fragmentId, configColumns, viewTemplateType);\n\n    let cellsFragmentFound = false;\n    if (cellsFragmentName) {\n        //find an update the cells' fragment file\n        cellsFragmentFound = updateCellsFragment(fragments, cellFragmentFileName, config);\n    } else {\n        cellsFragmentFound = true; //not relevant\n    }\n    if (!fragmentFound) {\n        const fragment: FileData = {\n            fileContent: getColumnFragmentContent(configColumns, viewTemplateType),\n            dataSourceUri: lsFilePath\n        };\n        exportResults.fragments.push(fragment);\n    }\n    if (!cellsFragmentFound) {\n        const fragment: FileData = {\n            fileContent: getResponsiveTableCellsFragment(config),\n            dataSourceUri: lsFilePath.replace(fragmentName, cellFragmentFileName)\n        };\n        exportResults.fragments.push(fragment);\n    }\n}\n\n/**\n * Determines the manifest path of a column extension.\n * @param {string[]} page Page object from manifest.\n * @param {string} entitySet Table's entity set.\n * @param {string} [additionalKey] Key provided when defining the FacetID or QuickVariantSelectionX.\n * @param {string} [tableColumnExtensionType] Column extension type.\n */\nexport const getCustomColumnPath = (\n    page: v2.SapUiAppPageV2,\n    entitySet: string,\n    additionalKey?: string,\n    tableColumnExtensionType?: string\n): { path: string; viewTemplateType: ViewTemplateType } => {\n    const extension: string = FE_TEMPLATE_VIEW_EXTENSION_MAP.get(page.component?.name);\n    if (!tableColumnExtensionType) {\n        let tableType = page.component?.settings?.tableSettings?.['type'];\n        if (!tableType) {\n            tableType = 'ResponsiveTable';\n        }\n        if (extension === 'sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage') {\n            tableType = 'AnalyticalTable';\n        }\n        tableColumnExtensionType = tableType + 'ColumnsExtension';\n    }\n    const viewTemplateType = tableColumnExtensionType as ViewTemplateType;\n    let extensionKey = `${tableColumnExtensionType}|${entitySet}`;\n    if (additionalKey) {\n        extensionKey += '|' + additionalKey;\n    }\n    const path = 'sap.ui5/extends/extensions/sap.ui.viewExtensions/' + extension + '/' + extensionKey;\n\n    return { path, viewTemplateType };\n};\n", "import { join } from 'path';\nimport type { v2, ViewTemplateType } from '@sap/ux-specification-types';\nimport { DirName } from '@sap/ux-specification-types';\n\nimport { render } from 'ejs';\nimport { readFileSync } from 'fs';\n\nconst templatesPath = join(__dirname, 'templates');\n\nexport enum ViewTypes {\n    XML = 'xml',\n    HTML = 'html',\n    JS = 'js',\n    JSON = 'json'\n}\n\n/**\n * Method which reads passed template and renders it using passed template object.\n * @param {string} templatePath - Path to template.\n * @param {{ [key: string]: string }} templateData - Template data object.\n * @return {string} the rendered template's string\n */\nexport const renderTemplate = (templatePath: string, templateData: { [key: string]: string | boolean }): string => {\n    const template = readFileSync(templatePath, 'utf8');\n    return render(template, templateData);\n};\n\n/**\n * Method escapes view name.\n * @param {string} name - View's name.\n * @return {string} Escaped view name.\n */\nconst escapeViewName = (name: string): string => {\n    // Remove all special characters\n    return name.replace(/[^\\w\\s-]/gi, '');\n};\n\n/**\n * Method which reads passed template and renders it using passed template object.\n * @param {string} name - View's name.\n * @param {string} namespace - Application namespace.\n * @return {string} the rendered template's string\n */\nexport const getControllerContent = (\n    name: string,\n    namespace: string,\n    fcl = false,\n    newControllerRouting = false\n): string => {\n    const templateData = {\n        name: namespace + '.' + escapeViewName(name),\n        newControllerRouting\n    };\n    return renderTemplate(join(templatesPath, fcl ? 'controllerFcl.js' : 'controller.js'), templateData);\n};\n\n/**\n * Method which reads passed template and renders it using passed template object.\n * @param {string} name - View's name.\n * @param {string} namespace - Application namespace.\n * @param {ViewTypes} sourceType - View's source type like XML, HTML, JSON or JS.\n * @param {boolean} [controller=false] - Generate controller.\n * @param {boolean} [page=false] - Is view should contains page structure or not - page structure uses 'sap.m.App' in view template.\n * @return {string} the rendered template's string\n */\nexport const getViewContent = (\n    name: string,\n    namespace: string,\n    sourceType: ViewTypes,\n    controller = false,\n    page = true\n): string => {\n    const escapedName = escapeViewName(name);\n    const templateData: { [key: string]: string | boolean } = {\n        name: escapedName,\n        controllerName: '',\n        page\n    };\n    if (controller) {\n        templateData.controllerName = namespace + '.controller.' + escapedName;\n    }\n    return renderTemplate(join(templatesPath, 'view.' + sourceType), templateData);\n};\n\n/**\n * Method which reads template for fragment and returns rendered result of fragment.\n * @param {string} name - View's name.\n * @param {string} namespace - Application namespace.\n * @param {ViewTypes} sourceType - View's source type like XML, HTML, JSON or JS.\n * @param {boolean} handler - JS handler.\n * @return {string} the rendered template's string\n */\nexport const getFragmentContent = (name: string, namespace: string, sourceType: ViewTypes, handler = false): string => {\n    const escapedName = escapeViewName(name);\n    const templateData: { [key: string]: string } = {\n        name: escapedName,\n        handler: ''\n    };\n    if (handler) {\n        templateData.handler = `${namespace.replace(/\\./g, '/')}/${DirName.Fragment}/${escapedName}`;\n    }\n    return renderTemplate(join(templatesPath, 'fragment.' + sourceType), templateData);\n};\n\n/**\n * Method which reads passed template and renders it using passed template object.\n * @param {string} name - View's name.\n * @param {string} namespace - Application namespace.\n * @return {string} the rendered template's string\n */\nexport const getFragmentJsContent = (): string => {\n    return renderTemplate(join(templatesPath, 'fragment.js'), {});\n};\n\n/**\n * Method which reads the template for a single column extension that shall be added to a fragment\n * @param {TableCustomColumn} column - data (from config) to be inserted in the template\n * @return {string} the rendered template's string\n */\nexport const getSingleColumnContent = (column: v2.TableCustomColumn, template: ViewTemplateType): string => {\n    const templateData: { [key: string]: string } = {\n        id: column.id,\n        text: column.text,\n        columnKey: column.columnKey,\n        columnIndex: column.columnIndex !== undefined ? column.columnIndex.toString() : undefined,\n        leadingProperty: column.leadingProperty\n    };\n    return renderTemplate(join(templatesPath, template + '.xml'), templateData);\n};\n\n/**\n * Method which reads the template for a column extension fragment and returns rendered result of fragment.\n * @param {TableCustomColumns} customColumns - array of all column extensions' data\n * @return {string} the rendered template's string\n */\nexport const getColumnFragmentContent = (\n    customColumns: v2.TableCustomColumns,\n    templateType: ViewTemplateType\n): string => {\n    let fragment = '';\n    fragment = '<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns:table=\"sap.ui.table\" xmlns=\"sap.m\">';\n    if (customColumns) {\n        for (const column of customColumns) {\n            const newContent = getSingleColumnContent(column, templateType);\n            fragment = fragment + '\\n' + newContent;\n        }\n    }\n    return fragment + '\\n' + '</core:FragmentDefinition>';\n};\n\n/**\n * Creates the content for a ResponsiveTableCellsExtesnion fragment\n * @param customColumns - list of custom columns; for each of them a dummy entry gets created in the view content.\n * @returns {string} the rendered template's string\n */\nexport const getResponsiveTableCellsFragment = (customColumns: v2.TableCustomColumns): string => {\n    let fragment = '<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\">';\n    if (customColumns) {\n        customColumns.forEach(() => {\n            fragment = fragment + '\\n<Text text=\"Placeholder\"></Text>';\n        });\n    }\n    return fragment + '\\n' + '</core:FragmentDefinition>';\n};\n", "import type { v2, ControlTypeFunction, DeprecatedProperties } from '@sap/ux-specification-types';\nimport {\n    ControlType,\n    GENERICAPPSETTINGS,\n    PropertyName,\n    QUICKVARPATH,\n    QUICKVARPATHX\n} from '@sap/ux-specification-types';\nimport { addPatternForBindingChangeOfEnumLR } from '../../../common';\nimport { buildControlIdFromParent, exportToFlexChange, childId, syncRule, validity } from '../../../common/decoration';\nimport { getAppSettingPathV2, getDataLoadSettingPathV2, getTableSettingPathV2 } from '../../application';\n\nexport const getSmartTableControlId = (\n    baseId: string,\n    idBreadcrumbs: string[],\n    _breadcrumbs: string[],\n    controlType: ControlTypeFunction\n): string => {\n    if (controlType() === 'sap.m.Table') {\n        return baseId + 'responsiveTable';\n    } else if (controlType() === 'sap.ui.comp.smarttable.SmartTable' && baseId?.includes('AnalyticalListPage')) {\n        return baseId + PropertyName.table;\n    }\n    return buildControlIdFromParent(baseId, idBreadcrumbs);\n};\n\n// import createWithParameterDialog (only) fields to Array: { field: { path: field } } => fields[]\nexport function importCreateParameters(manifestSection: object): object {\n    if (!manifestSection['createWithParameterDialog']?.fields) {\n        return undefined;\n    }\n    const manifestDialogFields = JSON.parse(JSON.stringify(manifestSection['createWithParameterDialog'].fields));\n    const configPart = { fields: [] } as Fields4Dialog;\n    for (const manifestField in manifestDialogFields) {\n        configPart.fields.push(manifestField);\n    }\n    return configPart;\n}\n\n// export createWithParameterDialog fields[] => { field: { path: field } }\nexport function exportCreateParametersFields(manifestSection: unknown, configPart: Fields4Dialog, key: string): void {\n    const fields: string[] = configPart[key];\n    if (fields.length === 0) {\n        delete manifestSection[key];\n        return;\n    }\n    const manifestFields = {};\n    if (!manifestSection[key]) {\n        manifestSection[key] = {};\n    }\n    fields.forEach((entry) => (manifestFields[entry] = manifestSection[key][entry] || { path: entry }));\n    manifestSection[key] = manifestFields;\n}\n\nfunction exportVariants(manifestSection: object, configObject: object): void {\n    for (const variant in configObject['variants']) {\n        const variantConfig = configObject['variants'][variant];\n        const tablesettings: string[] = ['type', 'multiSelect', 'selectAll', 'selectionLimit', 'inlineDelete'];\n        for (const key in variantConfig) {\n            if (tablesettings.indexOf(key) !== -1) {\n                if (!variantConfig['tableSettings']) {\n                    variantConfig['tableSettings'] = {};\n                }\n                variantConfig['tableSettings'][key] = variantConfig[key];\n                delete variantConfig[key];\n            }\n        }\n        if (manifestSection['variants']) {\n            manifestSection['variants'][variant] = variantConfig;\n        } else {\n            manifestSection['variants'] = {\n                [variant]: variantConfig\n            };\n        }\n    }\n}\n\nfunction exportQuickVariantSelectionX(manifestSection: object, configObject: object): void {\n    if (!configObject['variants']) {\n        return;\n    }\n    if (Object.keys(configObject['variants']).length > 0) {\n        exportVariants(manifestSection, configObject);\n    } else {\n        delete manifestSection['variants'];\n    }\n}\n\nexport class CreateWithFilters {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys) + '/createWithFilters'\n        }\n    })\n    strategy: v2.Strategy;\n}\n\n//import && export table type\nfunction importType(manifestSection: object): string {\n    if (manifestSection?.['tableSettings']?.['type']) {\n        return manifestSection['tableSettings']['type'];\n    } else if (manifestSection?.['tableType']) {\n        return manifestSection['tableType'];\n    }\n}\n\n//export table type\nexport function exportType(manifestSection: unknown, configPart: object): void {\n    if (configPart?.['type']) {\n        if (!manifestSection['tableSettings']) {\n            manifestSection['tableSettings'] = {};\n        }\n        manifestSection['tableSettings']['type'] = configPart['type'];\n        if (manifestSection?.['tableType']) {\n            //old format\n            delete manifestSection['tableType'];\n        }\n    }\n}\n\nexport function deleteType(manifestSection: unknown): void {\n    if (manifestSection?.['tableSettings']?.['type']) {\n        delete manifestSection['tableSettings']['type'];\n    }\n    if (manifestSection?.['tableType']) {\n        //old format\n        delete manifestSection['tableType'];\n    }\n}\n\nexport class DataLoadSettings {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getDataLoadSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.75.2'\n    })\n    loadDataOnAppLaunch: v2.LoadDataOnAppLaunchSettings;\n}\n\nexport class Fields4Dialog implements v2.Fields4Dialog {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getTableSettingPathV2(pageKeys) + '/createWithParameterDialog',\n            export: exportCreateParametersFields\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    fields: string[];\n}\n\nexport class QuickVariantSelection {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys) + QUICKVARPATH\n        }\n    })\n    @validity({\n        since: '1.48.0'\n    })\n    showCounts?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys) + QUICKVARPATH\n        }\n    })\n    @validity({\n        since: '1.48.0'\n    })\n    variants: {\n        [key: number]: v2.QuickVariant;\n    };\n}\n\nexport class QuickVariantSelectionX implements v2.QuickVariantSelectionX {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys) + QUICKVARPATHX\n        }\n    })\n    @validity({\n        since: '1.48.0'\n    })\n    showCounts?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys) + QUICKVARPATHX\n        }\n    })\n    @validity({\n        since: '1.48.0'\n    })\n    enableAutoBinding?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys) + QUICKVARPATHX,\n            export: exportQuickVariantSelectionX\n        }\n    })\n    @validity({\n        since: '1.48.0'\n    })\n    variants: {\n        [key: number]: v2.QuickVariantX;\n    };\n}\n\nexport class CommonTableSettings<COLS = v2.GenericColumns> implements v2.CommonTableSettings<COLS> {\n    getDeprecated = (): DeprecatedProperties => {\n        return {\n            tableType: {\n                since: '1.50.0',\n                deprecated: {\n                    since: '1.70.0',\n                    text: 'Use tableSettings.type instead'\n                }\n            },\n            enableAutoBinding: {\n                since: '1.40.0',\n                deprecated: {\n                    since: '1.75.2',\n                    text: 'Use tableSettings.loadDataOnAppLaunch instead'\n                }\n            }\n        };\n    };\n\n    @syncRule({\n        manifest: {\n            key: 'createWithParameterDialog',\n            path: (pageKeys): string => getTableSettingPathV2(pageKeys),\n            import: importCreateParameters\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    createWithParameterDialog?: Fields4Dialog;\n\n    @syncRule({\n        flex: {\n            controlId: buildControlIdFromParent,\n            controlType: (): ControlType => ControlType.SmartTable,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    @validity({\n        since: '1.38.0'\n    })\n    showTablePersonalisation?: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.SmartTable,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    @validity({\n        since: '1.26.0'\n    })\n    useExportToExcel?: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.SmartTable,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    @validity({\n        since: '1.50.0'\n    })\n    exportType?: v2.ExportType;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.SmartTable,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    fitContainer?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.48.0'\n    })\n    quickVariantSelection?: QuickVariantSelection;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.48.0'\n    })\n    quickVariantSelectionX?: QuickVariantSelectionX;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getTableSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.38.0'\n    })\n    multiSelect?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getTableSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.70.0'\n    })\n    selectAll?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getTableSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.70.0'\n    })\n    selectionLimit?: number;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.75.2'\n    })\n    dataLoadSettings?: DataLoadSettings;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.42.0'\n    })\n    condensedTableLayout?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.56.0'\n    })\n    enableTableFilterInPageVariant?: boolean;\n\n    @childId('toolBar')\n    toolBar?: v2.ToolBar;\n}\nexport class ResponsiveTable extends CommonTableSettings implements v2.ResponsiveTable {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys),\n            import: importType,\n            export: exportType,\n            delete: deleteType\n        }\n    })\n    @validity({\n        since: '1.50.0'\n    })\n    type?: v2.TableTypeV2.ResponsiveTable;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.54.0'\n    })\n    createWithFilters?: CreateWithFilters;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.Table,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumLR\n    })\n    @validity({\n        since: '1.52.0'\n    })\n    popinLayout?: v2.PopinLayout;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.Table,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    includeItemInSelection?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getTableSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    inlineDelete?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (): string => GENERICAPPSETTINGS\n        }\n    })\n    @validity({\n        since: '1.63.0'\n    })\n    showDraftToggle?: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.Table,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    @validity({\n        since: '1.16.0'\n    })\n    growingThreshold?: number;\n}\n\nexport class TreeTable extends CommonTableSettings implements v2.TreeTable {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys),\n            import: importType,\n            export: exportType,\n            delete: deleteType\n        }\n    })\n    @validity({\n        since: '1.50.0'\n    })\n    type?: v2.TableTypeV2.TreeTable;\n\n    @syncRule({\n        manifest: {\n            path: (): string => GENERICAPPSETTINGS\n        }\n    })\n    @validity({\n        since: '1.63.0'\n    })\n    showDraftToggle?: boolean;\n}\n\nexport class AnalyticalTable extends CommonTableSettings implements v2.AnalyticalTable {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys),\n            import: importType,\n            export: exportType,\n            delete: deleteType\n        }\n    })\n    @validity({\n        since: '1.50.0'\n    })\n    type?: v2.TableTypeV2.AnalyticalTable;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    qualifier?: string;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.38.0'\n    })\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    defaultContentView?: v2.DefaultContentView;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    defaultFilterMode?: v2.DefaultFilterMode;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.60.0'\n    })\n    contentTitle?: string;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    autoHide?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.78.0'\n    })\n    allFiltersAsInParameters?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.54.0'\n    })\n    createWithFilters?: CreateWithFilters;\n\n    @syncRule({\n        manifest: {\n            path: (): string => GENERICAPPSETTINGS\n        }\n    })\n    @validity({\n        since: '1.63.0'\n    })\n    showDraftToggle?: boolean;\n}\n\nexport class TableALP extends CommonTableSettings implements v2.TableALP {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys),\n            import: importType,\n            export: exportType,\n            delete: deleteType\n        }\n    })\n    @validity({\n        since: '1.50.0'\n    })\n    type?: v2.TableTypeV2.AnalyticalTable & v2.TableTypeV2.ResponsiveTable & v2.TableTypeV2.GridTable;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    qualifier?: string;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.38.0'\n    })\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    defaultContentView?: v2.DefaultContentView;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    defaultFilterMode?: v2.DefaultFilterMode;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.60.0'\n    })\n    contentTitle?: string;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    autoHide?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.78.0'\n    })\n    allFiltersAsInParameters?: boolean;\n}\n\nexport class ALPResponsiveTable extends TableALP {\n    /*No sync rule needed for type as it is already part of TableALP. This also caused sync issues with flexChanges in release 1.60 as tabletype is not explicity set to ResponsiveTable in 1.60\n    During import, Table type is used in function \"addFlex\" to refer to correct definition in schema.\n    */\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.Table,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    @validity({\n        since: '1.16.0'\n    })\n    growingThreshold?: number;\n}\n\nexport class ALPGridTable extends TableALP {}\n\nexport class ALPAnalyticalTable extends TableALP {}\n\nexport class GridTable extends CommonTableSettings implements v2.GridTable {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys),\n            import: importType,\n            export: exportType,\n            delete: deleteType\n        }\n    })\n    @validity({\n        since: '1.50.0'\n    })\n    type?: v2.TableTypeV2.GridTable;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.54.0'\n    })\n    createWithFilters?: CreateWithFilters;\n\n    @syncRule({\n        manifest: {\n            path: (): string => GENERICAPPSETTINGS\n        }\n    })\n    @validity({\n        since: '1.63.0'\n    })\n    showDraftToggle?: boolean;\n}\n", "import type { v2 } from '@sap/ux-specification-types';\nimport { ControlType } from '@sap/ux-specification-types';\nimport { syncRule, exportToFlexChange, addPatternForBindingChangeOfEnumOP } from '../../../common/decoration';\nimport { getActionBreadcrumbParts, convertActionKeyToStableId } from '../../../common';\nimport { OP_STANDARD_FOOTER_ACTION_PREFIX } from '../../types';\n\n/**\n * Create stable ID for Simple Action button\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} _idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @returns {string} stable ID of Action button\n */\nconst getActionButtonId = (baseId: string, _idBreadcrumbs: string[], breadcrumbs: string[]): string => {\n    const { actionId } = getActionBreadcrumbParts(breadcrumbs);\n    return `${baseId}action::${convertActionKeyToStableId(actionId).replace(':2f', '::')}`;\n};\n\n/**\n * Create stable ID for Standard Action button\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} _idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @returns {string} stable ID of Action button\n */\nconst getStandardActionButtonId = (baseId: string, _idBreadcrumbs: string[], breadcrumbs: string[]): string => {\n    const { actionId } = getActionBreadcrumbParts(breadcrumbs);\n    return `${baseId}template::${actionId}`;\n};\n\n/**\n * Create stable ID for Standard Action button on Object Page Footer\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} _idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @returns {string} stable ID of Action button\n */\nconst getStandardFooterActionOPButtonId = (baseId: string, _idBreadcrumbs: string[], breadcrumbs: string[]): string => {\n    const { actionId } = getActionBreadcrumbParts(breadcrumbs);\n    return `${baseId}${OP_STANDARD_FOOTER_ACTION_PREFIX}${actionId}`;\n};\n\n/**\n * Create stable ID for Intent Based Action button\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} _idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @returns {string} stable ID of Intent Based Action button\n */\nexport const buildIntentBasedActionId = (baseId: string, _idBreadcrumbs: string[], breadcrumbs: string[]): string => {\n    const { semanticObjectId, actionId } = getActionBreadcrumbParts(breadcrumbs);\n    return `${baseId}action::${semanticObjectId}::${convertActionKeyToStableId(actionId)}`;\n};\n\n/**\n * Create stable ID for (Intent Based) Footer Action button\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} _idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @returns {string} stable ID of Footer Action button\n */\nconst getFooterActionButtonId = (baseId: string, _idBreadcrumbs: string[], breadcrumbs: string[]): string => {\n    const { actionId } = getActionBreadcrumbParts(breadcrumbs);\n    return `${baseId}action::${convertActionKeyToStableId(actionId).replace(':2f', '::')}::Determining`;\n};\n\nconst flexRuleForAction = {\n    controlId: getActionButtonId,\n    controlType: (): ControlType => ControlType.Button,\n    createFlexChange: exportToFlexChange\n};\n\nconst flexRuleForStandardAction = {\n    controlId: getStandardActionButtonId,\n    controlType: (): ControlType => ControlType.Button,\n    createFlexChange: exportToFlexChange\n};\n\nconst flexRuleForStandardFooterActionOP = {\n    controlId: getStandardFooterActionOPButtonId,\n    controlType: (): ControlType => ControlType.Button,\n    createFlexChange: exportToFlexChange\n};\n\nconst flexRuleForFooterAction = {\n    controlId: getFooterActionButtonId,\n    controlType: (): ControlType => ControlType.Button,\n    createFlexChange: exportToFlexChange\n};\n\nexport class Action implements v2.Action {\n    @syncRule({\n        flex: flexRuleForAction\n    })\n    tooltip?: string;\n\n    @syncRule({\n        flex: flexRuleForAction\n    })\n    icon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForAction\n    })\n    activeIcon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForAction\n    })\n    type?: v2.ButtonType;\n}\n\nexport class ToolBarAction implements v2.Action {\n    @syncRule({\n        flex: flexRuleForAction\n    })\n    tooltip?: string;\n\n    @syncRule({\n        flex: flexRuleForAction\n    })\n    icon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForAction\n    })\n    activeIcon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForAction\n    })\n    type?: v2.ButtonType;\n}\n\nexport class FooterAction implements v2.Action {\n    @syncRule({\n        flex: flexRuleForFooterAction\n    })\n    tooltip?: string;\n\n    @syncRule({\n        flex: flexRuleForFooterAction\n    })\n    icon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForFooterAction\n    })\n    activeIcon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForFooterAction\n    })\n    type?: v2.ButtonType;\n}\n\nexport class Share implements v2.Share {\n    @syncRule({\n        flex: flexRuleForStandardAction\n    })\n    visible?: boolean;\n}\n\nexport class ShareOP implements v2.ShareOP {\n    @syncRule({\n        flex: flexRuleForStandardAction\n    })\n    visible?: boolean;\n}\n\nexport class UpAndDownNavigationOP implements v2.UpAndDownNavigationOP {\n    @syncRule({\n        flex: flexRuleForStandardAction\n    })\n    visible?: boolean;\n}\n\nexport class SaveAndEditOP implements v2.SaveAndEditOP {\n    @syncRule({\n        flex: flexRuleForStandardFooterActionOP,\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n\nexport class HeaderActionStandard implements v2.HeaderActionStandard {\n    @syncRule({\n        flex: flexRuleForStandardAction\n    })\n    visible?: boolean;\n}\n\nexport class ObjectPageHeaderActionStandard implements v2.ObjectPageHeaderActionStandard {\n    @syncRule({\n        flex: flexRuleForStandardAction\n    })\n    visible?: boolean;\n}\n\nexport class ObjectPageFooterActionStandard implements v2.ObjectPageFooterActionStandard {\n    @syncRule({\n        flex: flexRuleForStandardFooterActionOP\n    })\n    visible?: boolean;\n}\n", "import { buildIntentBasedActionId } from './Action';\nimport type { v2, SAPUI5_FRAGMENT_CLASS } from '@sap/ux-specification-types';\nimport { ControlType } from '@sap/ux-specification-types';\nimport { syncRule, exportToFlexChange, buildColumnControlId } from '../../../common/decoration';\nimport { addPatternForBindingChangeOfEnumLR, getActionBreadcrumbParts } from '../../../common';\n\n/**\n * Create stable ID for Action Column\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} _idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @returns {string} stable ID of Action Column\n */\nconst buildColumnActionId = (baseId: string, idBreadcrumbs: string[], breadcrumbs: string[]): string => {\n    const columnTemplate = 'template:::TableColumn';\n    const { actionType, actionId } = getActionBreadcrumbParts(breadcrumbs);\n    const smartTableId = `sSmartTableId::${idBreadcrumbs[0]}`;\n    return `${baseId}${columnTemplate}:::${actionType}:::${smartTableId}:::sAction::${actionId}`;\n};\n/**\n * Create stable ID for Intent Based Action Column\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} _idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @returns {string} stable ID of Action Column\n */\nconst buildColumnIntentBasedId = (baseId: string, idBreadcrumbs: string[], breadcrumbs: string[]): string => {\n    const columnTemplate = 'template:::TableColumn';\n    const { actionType, actionId, semanticObjectId } = getActionBreadcrumbParts(breadcrumbs);\n    const smartTableId = `sSmartTableId::${idBreadcrumbs[0]}`;\n    return `${baseId}${columnTemplate}:::${actionType}:::${smartTableId}:::sSemanticObject::${semanticObjectId}:::sAction::${actionId}`;\n};\n\n/**\n * Create stable ID for Column Action button\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} _idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @returns {string} stable ID of Column Action button\n */\nconst buildColumnActionButtonId = (baseId: string, _idBreadcrumbs: string[], breadcrumbs: string[]): string => {\n    const { actionId } = getActionBreadcrumbParts(breadcrumbs);\n    return `${baseId}action::${actionId.replace(':2f', '::')}`;\n};\n\n// TableColumnAction column properties\nconst flexRuleForColumn = {\n    controlId: buildColumnActionId,\n    controlType: (): ControlType => ControlType.TableColumn,\n    createFlexChange: exportToFlexChange\n};\n\n// TableColumnAction action properties\nconst flexRuleForColumnAction = {\n    controlId: buildColumnActionButtonId,\n    controlType: (): ControlType => ControlType.Button,\n    createFlexChange: exportToFlexChange\n};\n\n// TableColumnActionIntentBased main properties\nconst flexRuleForColumnIntentBased = {\n    ...flexRuleForColumn,\n    controlId: buildColumnIntentBasedId\n};\n\n// TableColumnActionIntentBased action properties\nconst flexRuleForColumnIntentBasedAction = {\n    ...flexRuleForColumnAction,\n    controlId: buildIntentBasedActionId\n};\n\nexport class TableColumn implements v2.TableColumn {\n    @syncRule({\n        flex: {\n            controlId: buildColumnControlId,\n            controlType: (): ControlType => ControlType.TableColumn,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    width?: string;\n    @syncRule({\n        flex: {\n            controlId: buildColumnControlId,\n            controlType: (): ControlType => ControlType.TableColumn,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumLR\n    })\n    hAlign?: v2.HAlign;\n}\n\nexport class TableColumnAction implements v2.TableColumnAction {\n    @syncRule({\n        flex: flexRuleForColumn\n    })\n    width?: string;\n\n    @syncRule({\n        flex: flexRuleForColumn,\n        generate: addPatternForBindingChangeOfEnumLR\n    })\n    hAlign?: v2.HAlign;\n\n    @syncRule({\n        flex: flexRuleForColumnAction\n    })\n    tooltip?: string;\n\n    @syncRule({\n        flex: flexRuleForColumnAction\n    })\n    icon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForColumnAction\n    })\n    activeIcon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForColumnAction\n    })\n    type?: v2.ButtonType;\n}\n\nexport class TableColumnActionIntentBased extends TableColumnAction {\n    @syncRule({\n        flex: flexRuleForColumnIntentBased\n    })\n    width?: string;\n\n    @syncRule({\n        flex: flexRuleForColumnIntentBased,\n        generate: addPatternForBindingChangeOfEnumLR\n    })\n    hAlign?: v2.HAlign;\n\n    @syncRule({\n        flex: flexRuleForColumnIntentBasedAction\n    })\n    tooltip?: string;\n\n    @syncRule({\n        flex: flexRuleForColumnIntentBasedAction\n    })\n    icon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForColumnIntentBasedAction\n    })\n    activeIcon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForColumnIntentBasedAction\n    })\n    type?: v2.ButtonType;\n}\n\n/**\n * No sync rules are defined for table custom columns, as they are transferred altogether.\n * This approach is needed to support inserts as well as deletions of manifest extensions and fragments\n */\nexport class TableCustomColumn implements v2.TableCustomColumn {\n    id?: string;\n    text?: string;\n    columnKey: string;\n    columnIndex?: number;\n    leadingProperty?: string;\n    className: typeof SAPUI5_FRAGMENT_CLASS;\n    fragmentName: string;\n    cellsFragmentName?: string;\n    tabKey?: string;\n    extensionType: v2.TableColumnExtensionTypeV2;\n}\n", "import type { v2 } from '@sap/ux-specification-types';\n\nexport class ToolBar implements v2.ToolBar {\n    actions: v2.Actions;\n}\n", "import type { v2, ChangeDefinitionInCreation } from '@sap/ux-specification-types';\nimport { ControlType, PropertyName } from '@sap/ux-specification-types';\nimport { exportToFlexChange } from '../../../common/decoration';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\nimport { getChartSettingPathV2 } from '../../application';\n\nexport const getSmartChartControlId = (baseId: string): string => {\n    return baseId + PropertyName.chart;\n};\n\nexport class ChartSettings implements v2.ChartSettings {\n    @syncRule({\n        flex: {\n            controlId: getSmartChartControlId,\n            controlType: (): ControlType => ControlType.SmartChart,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    showLegendButton?: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartChartControlId,\n            controlType: (): ControlType => ControlType.SmartChart,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    showDownloadButton?: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartChartControlId,\n            controlType: (): ControlType => ControlType.SmartChart,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    showChartTypeSelectionButton?: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartChartControlId,\n            controlType: (): ControlType => ControlType.SmartChart,\n            exportFlexValue: (flexChange: ChangeDefinitionInCreation, configObject: object, key: string): void => {\n                flexChange.content.newValue = configObject[key].join();\n            },\n            importFlexValue: (flexChange: ChangeDefinitionInCreation, configObject: object, key: string): void => {\n                flexChange.content['newValue'] = flexChange.content['newValue'] as string;\n                configObject[key] = flexChange.content['newValue'].split(',') as v2.ChartType[];\n            },\n            createFlexChange: exportToFlexChange\n        }\n    })\n    ignoredChartTypes?: v2.ChartType[];\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getChartSettingPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.81.0'\n    })\n    showDataLabel: boolean;\n}\n", "import type { v2 } from '@sap/ux-specification-types';\nimport { syncRule } from '../../../common/decoration/decorators';\nimport { getKPISettingsPath } from '../../application';\n\nexport class KPISettings implements v2.KPISettings {\n    @syncRule({\n        manifest: {\n            path: (pageKeys, _manifest, KPIKey): string => getKPISettingsPath(pageKeys, KPIKey)\n        }\n    })\n    model: string;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys, _manifest, KPIKey): string => getKPISettingsPath(pageKeys, KPIKey)\n        }\n    })\n    entitySet?: string;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys, _manifest, KPIKey): string => getKPISettingsPath(pageKeys, KPIKey)\n        }\n    })\n    qualifier?: string;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys, _manifest, KPIKey): string => getKPISettingsPath(pageKeys, KPIKey)\n        }\n    })\n    filterable?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys, _manifest, KPIKey): string => getKPISettingsPath(pageKeys, KPIKey)\n        }\n    })\n    detailNavigation?: string;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys, _manifest, KPIKey): string => getKPISettingsPath(pageKeys, KPIKey)\n        }\n    })\n    groupId?: string;\n}\n", "import type { v2 } from '@sap/ux-specification-types';\nimport { ControlType } from '@sap/ux-specification-types';\nimport { syncRule, validity, buildControlIdFromParent, exportToFlexChange } from '../../../common/decoration';\nimport { getAppSettingOBJPathV2 } from '../../application';\nimport { addPatternForBindingChangeOfEnumOP } from '../../../common';\n\nconst getAvatarControlId = (baseId: string, idBreadcrumbs: string[]): string => {\n    const idBreadcrumbsCopy = idBreadcrumbs.slice(0);\n    idBreadcrumbsCopy[idBreadcrumbs.length - 1] = 'objectImage';\n    return buildControlIdFromParent(baseId, idBreadcrumbsCopy);\n};\n\nexport class ObjectPageHeader<ACT = v2.GenericActions> implements v2.ObjectPageHeader<ACT> {\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingOBJPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.46.0'\n    })\n    showRelatedApps?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingOBJPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.46.0'\n    })\n    editableHeaderContent?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys): string => getAppSettingOBJPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.48.0'\n    })\n    simpleHeaderFacets?: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getAvatarControlId,\n            controlType: (): ControlType => ControlType.Avatar,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    displayShape?: v2.AvatarShape;\n\n    actions?: ACT;\n}\n", "import type { v2, ControlTypeFunction } from '@sap/ux-specification-types';\nimport { ControlType } from '@sap/ux-specification-types';\nimport { syncRule, exportToFlexChange, buildControlIdFromParent } from '../../../common/decoration';\nimport { addPatternForBindingChangeOfEnumOP, convertActionKeyToStableId } from '../../../common';\n\n/**\n * Create stable ID for Object Page Header Action button\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @param {ControlTypeFunction} controlType\n * @returns {string} stable ID of Object Page Header Action button\n */\nconst getActionButtonId = (\n    baseId: string,\n    idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    controlType: ControlTypeFunction\n): string => {\n    if (controlType() === ControlType.Button || controlType() === ControlType.HeaderAction) {\n        const actionId = breadcrumbs[2];\n        return `${baseId}action::${convertActionKeyToStableId(actionId)}`;\n    }\n    return buildControlIdFromParent(baseId, idBreadcrumbs);\n};\n\nconst flexRuleForHeaderAction = {\n    controlId: getActionButtonId,\n    controlType: (): ControlType => ControlType.HeaderAction,\n    createFlexChange: exportToFlexChange\n};\n\nexport class HeaderAction implements v2.HeaderAction {\n    @syncRule({\n        flex: flexRuleForHeaderAction,\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible: boolean;\n\n    @syncRule({\n        flex: flexRuleForHeaderAction\n    })\n    tooltip?: string;\n\n    @syncRule({\n        flex: flexRuleForHeaderAction\n    })\n    icon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForHeaderAction\n    })\n    activeIcon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForHeaderAction\n    })\n    type?: v2.ButtonType;\n}\n", "import type { v2, ControlTypeFunction } from '@sap/ux-specification-types';\nimport { ControlType } from '@sap/ux-specification-types';\nimport { syncRule, exportToFlexChange, buildControlIdFromParent } from '../../../common/decoration';\nimport {\n    addPatternForBindingChangeOfEnumOP,\n    getActionBreadcrumbParts,\n    convertActionKeyToStableId\n} from '../../../common';\n\n/**\n * Create stable ID for Object Page Footer Action button\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @param {ControlTypeFunction} controlType\n * @returns {string} stable ID of Object Page Footer Action button\n */\nconst getFooterActionButtonId = (\n    baseId: string,\n    idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    controlType: ControlTypeFunction\n): string => {\n    if (controlType() === ControlType.Button) {\n        const { actionId } = getActionBreadcrumbParts(breadcrumbs);\n        return `${baseId}action::${convertActionKeyToStableId(actionId)}::Determining`;\n    }\n    return buildControlIdFromParent(baseId, idBreadcrumbs);\n};\n\nconst flexRuleForFooterAction = {\n    controlId: getFooterActionButtonId,\n    controlType: (): ControlType => ControlType.Button,\n    createFlexChange: exportToFlexChange\n};\n\nexport class ObjectPageFooterAction implements v2.ObjectPageFooterAction {\n    @syncRule({\n        flex: flexRuleForFooterAction,\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible: boolean;\n\n    @syncRule({\n        flex: flexRuleForFooterAction\n    })\n    tooltip?: string;\n\n    @syncRule({\n        flex: flexRuleForFooterAction\n    })\n    icon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForFooterAction\n    })\n    activeIcon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForFooterAction\n    })\n    type?: v2.ButtonType;\n}\n", "import type { v2 } from '@sap/ux-specification-types';\nimport { ControlType } from '@sap/ux-specification-types';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\nimport {\n    addPatternForBindingChangeOfEnumOP,\n    buildControlIdFromParent,\n    exportToFlexChange\n} from '../../../common/decoration';\n\nconst getControlId = (baseId: string, idBreadcrumbs: string[]): string => {\n    const idBreadcrumbsCopy = idBreadcrumbs.slice(0);\n    idBreadcrumbsCopy[idBreadcrumbs.length - 1] = 'objectPage';\n    return buildControlIdFromParent(baseId, idBreadcrumbsCopy);\n};\n\nexport class ObjectPageLayout implements v2.ObjectPageLayout {\n    @syncRule({\n        flex: {\n            controlId: getControlId,\n            controlType: (): ControlType => ControlType.ObjectPageLayout,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    showHeaderContent?: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getControlId,\n            controlType: (): ControlType => ControlType.ObjectPageLayout,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    showAnchorBar?: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getControlId,\n            controlType: (): ControlType => ControlType.ObjectPageLayout,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    useIconTabBar?: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getControlId,\n            controlType: (): ControlType => ControlType.ObjectPageLayout,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    @validity({\n        since: '1.34.0'\n    })\n    alwaysShowContentHeader?: boolean;\n}\n", "import { ManifestSection } from '@sap/ux-specification-types';\nimport type { SAPUI5_FRAGMENT_CLASS, SAPUI5_VIEW_CLASS, Manifest, ViewTypes, v2 } from '@sap/ux-specification-types';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\nimport { getObjectPageCustomSectionPath } from '../../application';\n\nexport class BaseCustomSection implements v2.ObjectPageCustomSectionBase {\n    @syncRule({\n        manifest: {\n            path: getObjectPageCustomSectionPath,\n            export: false,\n            import: (\n                _manifest: v2.SapUi5ViewExtensionView | v2.SapUi5ViewExtensionFragment,\n                sectionId: string\n            ): string => {\n                const sectionParts = sectionId.split('|');\n                return sectionParts[2];\n            }\n        }\n    })\n    @validity({\n        since: '1.52.0'\n    })\n    relatedFacet: string;\n\n    @syncRule({\n        manifest: {\n            path: getObjectPageCustomSectionPath,\n            export: false,\n            import: (\n                _manifest: v2.SapUi5ViewExtensionView | v2.SapUi5ViewExtensionFragment,\n                sectionId: string\n            ): string => {\n                return sectionId.split('|')[0];\n            }\n        }\n    })\n    @validity({\n        since: '1.52.0'\n    })\n    relativePosition: v2.SectionPosition;\n\n    @syncRule({\n        manifest: {\n            path: (entitySet: string[], _manifest: Manifest, sectionId: string): string =>\n                getObjectPageCustomSectionPath(entitySet, {} as Manifest, sectionId, ManifestSection.generic)\n        }\n    })\n    @validity({\n        since: '1.52.0'\n    })\n    title: string;\n\n    @syncRule({\n        manifest: {\n            path: getObjectPageCustomSectionPath\n        }\n    })\n    @validity({\n        since: '1.52.0'\n    })\n    className: string;\n}\n\nexport class ObjectPageCustomSectionFragment extends BaseCustomSection implements v2.ObjectPageCustomSectionFragment {\n    className: typeof SAPUI5_FRAGMENT_CLASS;\n\n    @syncRule({\n        manifest: {\n            path: getObjectPageCustomSectionPath\n        }\n    })\n    @validity({\n        since: '1.52.0'\n    })\n    fragmentName: string;\n\n    @syncRule({\n        manifest: {\n            path: getObjectPageCustomSectionPath\n        }\n    })\n    @validity({\n        since: '1.52.0'\n    })\n    type: v2.ExtensionFragmentTypes;\n}\n\nexport class ObjectPageCustomSectionView extends BaseCustomSection implements v2.ObjectPageCustomSectionView {\n    className: typeof SAPUI5_VIEW_CLASS;\n\n    @syncRule({\n        manifest: {\n            path: getObjectPageCustomSectionPath\n        }\n    })\n    @validity({\n        since: '1.52.0'\n    })\n    viewName: string;\n\n    @syncRule({\n        manifest: {\n            path: getObjectPageCustomSectionPath\n        }\n    })\n    @validity({\n        since: '1.52.0'\n    })\n    type: ViewTypes;\n}\n", "import type { v2, ControlTypeFunction } from '@sap/ux-specification-types';\nimport { ControlType, DefinitionName } from '@sap/ux-specification-types';\nimport { syncRule } from '../../../common/decoration/decorators';\nimport {\n    addPatternForBindingChangeOfEnumOP,\n    buildControlIdFromParent,\n    exportToFlexChange,\n    convertSectionId\n} from '../../../common';\n\nexport const getTableSectionControlId = (\n    baseId: string,\n    _idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    _controlType: ControlTypeFunction,\n    facetId: string\n): string => {\n    const convertedId = convertSectionId(breadcrumbs[1], facetId);\n    const breadcrumbsTrail = [convertedId, DefinitionName.Table];\n    return buildControlIdFromParent(baseId, breadcrumbsTrail);\n};\nexport const getFormSectionControlId = (\n    baseId: string,\n    _idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    _controlType: ControlTypeFunction,\n    facetId: string\n): string => {\n    const convertedId = convertSectionId(breadcrumbs[1], facetId);\n    const breadcrumbsTrail = [convertedId, 'FormGroup'];\n    return buildControlIdFromParent(baseId, breadcrumbsTrail);\n};\n\nexport const getChartSectionControlId = (\n    baseId: string,\n    _idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    _controlType: ControlTypeFunction,\n    facetID: string\n): string => {\n    const convertedId = convertSectionId(breadcrumbs[1], facetID);\n    const breadcrumbsTrail = [convertedId, 'Chart'];\n    return buildControlIdFromParent(baseId, breadcrumbsTrail);\n};\n\nexport const getSectionControlId = (\n    baseId: string,\n    _idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    _controlType: ControlTypeFunction,\n    facetId: string\n): string => {\n    const convertedId = convertSectionId(breadcrumbs[1], facetId);\n    const breadcrumbsTrail = [convertedId, 'Section'];\n    return buildControlIdFromParent(baseId, breadcrumbsTrail);\n};\n\nexport const getSubSectionControlId = (\n    baseId: string,\n    _idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    _controlType: ControlTypeFunction,\n    facetId: string\n): string => {\n    const convertedId = convertSectionId(breadcrumbs[1], facetId);\n    const breadcrumbsTrail = [convertedId, 'SubSection'];\n    return buildControlIdFromParent(baseId, breadcrumbsTrail);\n};\n\nexport const getContactSubSectionControlId = (\n    baseId: string,\n    _idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    _controlType: ControlTypeFunction,\n    facetId: string\n): string => {\n    const convertedId = convertSectionId(breadcrumbs[1], facetId);\n    const breadcrumbsTrail = [convertedId, 'ContactsList'];\n    return buildControlIdFromParent(baseId, breadcrumbsTrail);\n};\nexport class ObjectPageSectionV2 implements v2.ObjectPageSectionV2 {\n    @syncRule({\n        flex: {\n            controlId: getSectionControlId,\n            controlType: (): ControlType => ControlType.Section,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n\nexport class ObjectPageSectionFormV2 implements v2.ObjectPageSectionFormV2 {\n    @syncRule({\n        flex: {\n            controlId: getSectionControlId,\n            controlType: (): ControlType => ControlType.Section,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n\nexport class ObjectPageSectionChartV2 implements v2.ObjectPageSectionChartV2 {\n    @syncRule({\n        flex: {\n            controlId: getSectionControlId,\n            controlType: (): ControlType => ControlType.Section,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n\nexport class ObjectPageSectionTableV2 implements v2.ObjectPageSectionTableV2 {\n    @syncRule({\n        flex: {\n            controlId: getSectionControlId,\n            controlType: (): ControlType => ControlType.Section,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n\nexport class ObjectPageSectionAddressV2 implements v2.ObjectPageSectionAddressV2 {\n    @syncRule({\n        flex: {\n            controlId: getSectionControlId,\n            controlType: (): ControlType => ControlType.Section,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n\nexport class ObjectPageSectionContactV2 implements v2.ObjectPageSectionContactV2 {\n    @syncRule({\n        flex: {\n            controlId: getSectionControlId,\n            controlType: (): ControlType => ControlType.Section,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n\nexport class ObjectPageSubSectionV2 implements v2.ObjectPageSubSectionV2 {\n    @syncRule({\n        flex: {\n            controlId: getSubSectionControlId,\n            controlType: (): ControlType => ControlType.SubSection,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n\nexport class ObjectPageSubSectionFormV2 implements v2.ObjectPageSubSectionV2 {\n    @syncRule({\n        flex: {\n            controlId: getFormSectionControlId,\n            controlType: (): ControlType => ControlType.Group,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n\nexport class ObjectPageSubSectionChartV2 implements v2.ObjectPageSubSectionV2 {\n    @syncRule({\n        flex: {\n            controlId: getChartSectionControlId,\n            controlType: (): ControlType => ControlType.SmartChart,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n\nexport class ObjectPageSubSectionContactV2 implements v2.ObjectPageSubSectionContactV2 {\n    @syncRule({\n        flex: {\n            controlId: getContactSubSectionControlId,\n            controlType: (): ControlType => ControlType.SubSection,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n\nexport class ObjectPageSubSectionTableV2 implements v2.ObjectPageSubSectionV2 {\n    @syncRule({\n        flex: {\n            controlId: getTableSectionControlId,\n            controlType: (): ControlType => ControlType.SmartTable,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible?: boolean;\n}\n", "import type { v2 } from '@sap/ux-specification-types';\nimport { getAppSettingOBJPathV2, getChartSettingsOBJsectionPathV2 } from '../../application';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\n\nexport class ObjectPageChart implements v2.ObjectPageChart {\n    @syncRule({\n        manifest: {\n            path: getChartSettingsOBJsectionPathV2\n        }\n    })\n    @validity({\n        since: '1.78.0'\n    })\n    variantManagement?: boolean;\n}\n\nexport class GlobalChartSettings implements v2.GlobalChartSettings {\n    @syncRule({\n        manifest: {\n            path: (pageKeys: string[]): string => getAppSettingOBJPathV2(pageKeys) + '/chartSettings'\n        }\n    })\n    @validity({\n        since: '1.78.0'\n    })\n    variantManagement?: boolean;\n}\n", "import type { v2, DeprecatedProperties, ControlTypeFunction } from '@sap/ux-specification-types';\nimport { ControlType, DefinitionName, QUICKVARPATH } from '@sap/ux-specification-types';\nimport {\n    syncRule,\n    validity,\n    buildControlIdFromParent,\n    exportToFlexChange,\n    convertSectionId,\n    childId\n} from '../../../common/decoration';\nimport { getAppSettingOBJsectionPathV2, getTableSettingsOBJsectionPathV2 } from '../../application';\nimport { addPatternForBindingChangeOfEnumOP } from '../../../common';\nimport { importCreateParameters, exportCreateParametersFields } from './Table';\n\nconst getSmartTableControlId = (\n    baseId: string,\n    _idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    controlType: ControlTypeFunction,\n    title: string\n): string => {\n    const breadCrumbsCopy = breadcrumbs.slice(1, 2);\n    let suffixId: string;\n\n    if (controlType() === 'sap.ui.comp.smarttable.SmartTable') {\n        suffixId = DefinitionName.Table;\n    } else if (controlType() === 'sap.m.Table') {\n        suffixId = 'responsiveTable';\n    }\n    breadCrumbsCopy.push(suffixId);\n    breadCrumbsCopy[0] = convertSectionId(breadCrumbsCopy[0], title);\n    return buildControlIdFromParent(baseId, breadCrumbsCopy);\n};\n\nexport class QuickVariantSelectionOP {\n    @syncRule({\n        manifest: {\n            path: (pageKeys, manifest, sectionId): string =>\n                getAppSettingOBJsectionPathV2(pageKeys, manifest, sectionId) + QUICKVARPATH\n        }\n    })\n    @validity({\n        since: '1.48.0'\n    })\n    showCounts?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys, manifest, sectionId): string =>\n                getAppSettingOBJsectionPathV2(pageKeys, manifest, sectionId) + QUICKVARPATH\n        }\n    })\n    @validity({\n        since: '1.48.0'\n    })\n    variants: {\n        [key: number]: v2.QuickVariant;\n    };\n}\n\nexport class Fields4DialogOP implements v2.Fields4Dialog {\n    @syncRule({\n        manifest: {\n            path: (pageKeys, manifest, sectionId): string =>\n                getTableSettingsOBJsectionPathV2(pageKeys, manifest, sectionId) + '/createWithParameterDialog',\n            export: exportCreateParametersFields\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    fields: string[];\n}\n\nexport class ObjectPageCommonTableSettings<COLS = v2.GenericColumns> implements v2.ObjectPageCommonTableSettings<COLS> {\n    getDeprecated = (): DeprecatedProperties => {\n        return {\n            tableType: {\n                since: '1.50.0',\n                deprecated: {\n                    since: '1.70.0',\n                    text: 'Use tableSettings.type instead'\n                }\n            }\n        };\n    };\n\n    @syncRule({\n        manifest: {\n            key: 'createWithParameterDialog',\n            path: getTableSettingsOBJsectionPathV2,\n            import: importCreateParameters\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    createWithParameterDialog?: Fields4DialogOP;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.SmartTable,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    @validity({\n        since: '1.28.0'\n    })\n    editable?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsOBJsectionPathV2\n        }\n    })\n    @validity({\n        since: '1.54.0'\n    })\n    multiSelect?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsOBJsectionPathV2\n        }\n    })\n    @validity({\n        since: '1.70.0'\n    })\n    selectAll?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsOBJsectionPathV2\n        }\n    })\n    @validity({\n        since: '1.70.0'\n    })\n    selectionLimit?: number;\n\n    @syncRule({\n        manifest: {\n            path: getAppSettingOBJsectionPathV2\n        }\n    })\n    @validity({\n        since: '1.63.0'\n    })\n    quickVariantSelection?: QuickVariantSelectionOP;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.SmartTable,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    @validity({\n        since: '1.26.0'\n    })\n    useExportToExcel?: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.SmartTable,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    @validity({\n        since: '1.50.0'\n    })\n    exportType?: v2.ExportType;\n\n    @syncRule({\n        manifest: {\n            path: getAppSettingOBJsectionPathV2\n        }\n    })\n    @validity({\n        since: '1.48.5'\n    })\n    createMode?: v2.CreateMode;\n\n    @syncRule({\n        manifest: {\n            path: getAppSettingOBJsectionPathV2\n        }\n    })\n    @validity({\n        since: '1.61.0'\n    })\n    disableDefaultInlineCreateSort?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsOBJsectionPathV2\n        }\n    })\n    @validity({\n        since: '1.78.0'\n    })\n    variantManagement?: boolean;\n\n    @childId('toolBar')\n    toolBar?: v2.ObjectPageToolBar;\n}\n\nexport class ObjectPageResponsiveTable extends ObjectPageCommonTableSettings implements v2.ObjectPageResponsiveTable {\n    @syncRule({\n        manifest: {\n            path: getTableSettingsOBJsectionPathV2\n        }\n    })\n    type?: v2.TableTypeV2.ResponsiveTable;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.Table,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    includeItemInSelection?: boolean;\n\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.Table,\n            createFlexChange: exportToFlexChange\n        },\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    @validity({\n        since: '1.52.0'\n    })\n    popinLayout?: v2.PopinLayout;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsOBJsectionPathV2\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    inlineDelete?: boolean;\n    @syncRule({\n        flex: {\n            controlId: getSmartTableControlId,\n            controlType: (): ControlType => ControlType.Table,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    @validity({\n        since: '1.16.0'\n    })\n    growingThreshold?: number;\n}\n\nexport class ObjectPageAnalyticalTable extends ObjectPageCommonTableSettings implements v2.ObjectPageAnalyticalTable {\n    @syncRule({\n        manifest: {\n            path: getTableSettingsOBJsectionPathV2\n        }\n    })\n    type?: v2.TableTypeV2.AnalyticalTable;\n\n    @syncRule({\n        manifest: {\n            path: getAppSettingOBJsectionPathV2\n        }\n    })\n    @validity({\n        since: '1.67.0'\n    })\n    condensedTableLayout?: boolean;\n}\n\nexport class ObjectPageGridTable extends ObjectPageCommonTableSettings implements v2.ObjectPageGridTable {\n    @syncRule({\n        manifest: {\n            path: getTableSettingsOBJsectionPathV2\n        }\n    })\n    type?: v2.TableTypeV2.GridTable;\n\n    @syncRule({\n        manifest: {\n            path: getAppSettingOBJsectionPathV2\n        }\n    })\n    @validity({\n        since: '1.67.0'\n    })\n    condensedTableLayout?: boolean;\n}\n\nexport class ObjectPageTreeTable extends ObjectPageCommonTableSettings implements v2.ObjectPageTreeTable {\n    @syncRule({\n        manifest: {\n            path: getTableSettingsOBJsectionPathV2\n        }\n    })\n    type?: v2.TableTypeV2.TreeTable;\n\n    @syncRule({\n        manifest: {\n            path: getAppSettingOBJsectionPathV2\n        }\n    })\n    @validity({\n        since: '1.67.0'\n    })\n    condensedTableLayout?: boolean;\n}\n", "import type { v2 } from '@sap/ux-specification-types';\nimport { ControlType } from '@sap/ux-specification-types';\nimport { syncRule, exportToFlexChange } from '../../../common/decoration';\nimport {\n    addPatternForBindingChangeOfEnumOP,\n    convertSectionId,\n    getActionBreadcrumbParts,\n    convertActionKeyToStableId\n} from '../../../common';\n\n/**\n * Create stable ID for Object Page Toolbar Action button\n *\n * @param {string} baseId Base Id of the control\n * @param {string[]} _idBreadcrumbs\n * @param {string[]} breadcrumbs\n * @param {ControlTypeFunction} controlType\n * @param {string} facetID title from the app schema (comprising for instance the facet ID)\n * @returns {string} stable ID of Object Page Toolbar Action button\n */\nconst getActionButtonId = (\n    baseId: string,\n    _idBreadcrumbs: string[],\n    breadcrumbs: string[],\n    _controlType,\n    facetID: string\n): string => {\n    const { actionId } = getActionBreadcrumbParts(breadcrumbs);\n    const section = convertSectionId(breadcrumbs[1], facetID);\n    return `${baseId}${section}::action::${convertActionKeyToStableId(actionId).replace(':2f', '::')}`;\n};\n\nconst flexRuleForToolBarActionOP = {\n    controlId: getActionButtonId,\n    controlType: (): ControlType => ControlType.Button,\n    createFlexChange: exportToFlexChange\n};\n\nexport class ObjectPageToolBarAction implements v2.ObjectPageToolBarAction {\n    @syncRule({\n        flex: flexRuleForToolBarActionOP,\n        generate: addPatternForBindingChangeOfEnumOP\n    })\n    visible: boolean;\n\n    @syncRule({\n        flex: flexRuleForToolBarActionOP\n    })\n    tooltip?: string;\n\n    @syncRule({\n        flex: flexRuleForToolBarActionOP\n    })\n    icon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForToolBarActionOP\n    })\n    activeIcon?: v2.SapUiCoreURI;\n\n    @syncRule({\n        flex: flexRuleForToolBarActionOP\n    })\n    type?: v2.ButtonType;\n}\n", "import {\n    determineTableType,\n    transferSettingsOfObject,\n    addFlex,\n    addFragments,\n    convertActionKey,\n    importHeaderActions\n} from '../common/index';\nimport type { v2, ImportListReportV2Parameters } from '@sap/ux-specification-types';\nimport { LogSeverity, DefinitionName, ManifestSection, PageTypeV2, METADATAPATH } from '@sap/ux-specification-types';\nimport { parseChangeString } from '../../../common';\nimport { log } from '../../../../extensionLogger';\nimport i18next from 'i18next';\nimport { initI18n } from '../../../../i18n/i18n';\nimport { checkV2Page, findListReportPageV2, getV2Pages, removeEmptySettings } from '../../import/utils';\nimport { MetadataInstanceFactoryV2 as Factory } from '../../export/factory';\nimport type { MetadataInstanceInterface } from '../../../common/decoration/factory';\nimport { INLINEDELETETABLE, MULTISELECTTABLE } from '../../types';\nimport type { Definition } from 'typescript-json-schema';\n\n/**\n * Imports filterbar information into the LR config\n * @param {ListReportConfig} listReportConfig - LR config, to be filled\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param {ImportListReportV2Parameters} importParameters  - object comprising all input data\n * @param {Definition} schemaDefinitions - app schema definitions\n * @param {string} pageKey - key of the page in manifest\n */\nfunction importFilterBar(\n    listReportConfig: v2.ListReportConfigV2,\n    factory: MetadataInstanceInterface,\n    importParameters: ImportListReportV2Parameters,\n    schemaDefinitions: Definition,\n    pageKey: string\n) {\n    listReportConfig.filterBar = factory.createInstance(\n        PageTypeV2.ListReport,\n        DefinitionName.ListReportFilterBar,\n        listReportConfig.filterBar\n    );\n    transferSettingsOfObject(\n        listReportConfig.filterBar,\n        importParameters.manifest,\n        schemaDefinitions[DefinitionName.ListReportFilterBar],\n        pageKey,\n        importParameters.logger\n    );\n    if (schemaDefinitions['SelectionFields']) {\n        listReportConfig.filterBar.selectionFields = factory.createInstance(\n            PageTypeV2.ListReport,\n            DefinitionName.ListReportFilterBar,\n            listReportConfig.filterBar.selectionFields\n        );\n        const schemaSelectionFields = schemaDefinitions['SelectionFields'].properties;\n        for (const selectionProperty in schemaSelectionFields) {\n            const selectionKey = selectionProperty;\n            listReportConfig.filterBar.selectionFields[selectionKey] = factory.createInstance(\n                PageTypeV2.ListReport,\n                'SelectionFieldDateSettings'\n            );\n            transferSettingsOfObject(\n                listReportConfig.filterBar.selectionFields[selectionKey],\n                importParameters.manifest,\n                schemaDefinitions['SelectionFieldDateSettings'],\n                pageKey,\n                importParameters.logger,\n                selectionKey\n            );\n        }\n    }\n}\n\n/**\n * Imports table information into the LR config\n * @param {TableTypeV2} tableType - table type\n * @param {Definition} schemaDefinitions - app schema definitions\n * @param {ListReportConfig} listReportConfig - LR config, to be filled\n * @param {ImportListReportV2Parameters} importParameters  - object comprising all input data\n * @param {string} pageKey - key of the page in manifest\n */\nfunction importTable(\n    tableType: v2.TableTypeV2,\n    schemaDefinitions: Definition,\n    listReportConfig: v2.ListReportConfigV2,\n    importParameters: ImportListReportV2Parameters,\n    pageKey: string\n) {\n    let localJsonSchema: Definition;\n\n    if (tableType === 'TreeTable' || tableType === 'AnalyticalTable' || tableType === 'GridTable') {\n        localJsonSchema = schemaDefinitions[tableType + '<LineItems>'];\n    } else {\n        if (schemaDefinitions[MULTISELECTTABLE] && schemaDefinitions[INLINEDELETETABLE]) {\n            localJsonSchema = JSON.parse(JSON.stringify(schemaDefinitions[MULTISELECTTABLE])) as Definition;\n            localJsonSchema.properties = {\n                ...localJsonSchema.properties,\n                ...(schemaDefinitions[INLINEDELETETABLE] as Definition).properties\n            };\n        }\n    }\n\n    transferSettingsOfObject(\n        listReportConfig.table,\n        importParameters.manifest,\n        localJsonSchema,\n        pageKey,\n        importParameters.logger\n    );\n\n    if (\n        (!schemaDefinitions['LineItems']?.properties ||\n            Object.keys(schemaDefinitions['LineItems'].properties).filter((item) => item !== 'custom').length < 1) &&\n        !listReportConfig.table.quickVariantSelection &&\n        !listReportConfig.table.quickVariantSelectionX\n    ) {\n        log(importParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOLINEITEMS'),\n            location: {\n                path: METADATAPATH\n            }\n        });\n    }\n}\n\n/**\n * Adds manifest settings to the config.json of List Report V2\n * @param {ImportListReportV2Parameters} importParameters  - object comprising all input data\n * @param {ListReportConfig} listReportConfig - the configuration to be filled\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param {string} pageKey - key of the page in manifest\n */\nfunction addSettings(\n    importParameters: ImportListReportV2Parameters,\n    listReportConfig: v2.ListReportConfigV2,\n    factory: MetadataInstanceInterface,\n    pageKey: string\n): void {\n    const schemaDefinitions = (importParameters.jsonSchema as Definition).definitions as Definition;\n    const tableType = determineTableType(importParameters.manifest, pageKey);\n    listReportConfig.table = factory.createInstance(PageTypeV2.ListReport, tableType, listReportConfig.table);\n\n    // Import standard header actions:\n    importHeaderActions(listReportConfig, factory, schemaDefinitions);\n\n    //Import table:\n    importTable(tableType, schemaDefinitions, listReportConfig, importParameters, pageKey);\n\n    //Import ToolBar:\n    listReportConfig.table.toolBar = factory.createInstance(PageTypeV2.ListReport, DefinitionName.ToolBar, {\n        actions: {}\n    });\n    transferSettingsOfObject(\n        listReportConfig.table.toolBar,\n        importParameters.manifest,\n        schemaDefinitions[DefinitionName.ToolBarLR],\n        pageKey,\n        importParameters.logger\n    );\n    if (schemaDefinitions[DefinitionName.ActionsLR]) {\n        for (const actionProperty in schemaDefinitions[DefinitionName.ActionsLR].properties) {\n            const actionKey = convertActionKey(actionProperty);\n            listReportConfig.table.toolBar.actions[actionKey] = factory.createInstance(\n                PageTypeV2.ListReport,\n                DefinitionName.Action\n            );\n            transferSettingsOfObject(\n                listReportConfig.table.toolBar.actions[actionKey],\n                importParameters.manifest,\n                schemaDefinitions[DefinitionName.Action],\n                pageKey,\n                importParameters.logger\n            );\n        }\n    }\n\n    //Import FilterBar:\n    importFilterBar(listReportConfig, factory, importParameters, schemaDefinitions, pageKey);\n\n    //Import Footer:\n    listReportConfig.footer = { actions: {} };\n    const footerAction = schemaDefinitions[DefinitionName.FooterActionsLR];\n    if (footerAction) {\n        for (const actionProperty in footerAction.properties) {\n            const actionKey = convertActionKey(actionProperty);\n            listReportConfig.footer.actions[actionKey] = factory.createInstance(\n                PageTypeV2.ListReport,\n                DefinitionName.FooterAction\n            );\n            transferSettingsOfObject(\n                listReportConfig.footer.actions[actionKey],\n                importParameters.manifest,\n                schemaDefinitions[DefinitionName.Action],\n                pageKey,\n                importParameters.logger\n            );\n        }\n    }\n}\n\n/**\n * Creates the configuration file content for a list report V2\n * @param {ImportListReportV2Parameters} importParameters  - object comprising all input data\n *\n * @returns {ListReportConfig} - the configuration (JSON) for the list report\n */\nexport function createListReportConfig(\n    importParameters: ImportListReportV2Parameters\n): v2.ListReportConfigV2 | undefined {\n    // Initialize i18next\n    initI18n();\n\n    const v2Pages = getV2Pages(importParameters);\n    if (!v2Pages) {\n        return;\n    }\n    const factory = new Factory();\n    //Instantiate Page\n    const config = factory.createPageInstance(PageTypeV2.ListReport);\n\n    const pageKeys: string[] = [];\n    const v2Page = findListReportPageV2(\n        importParameters.manifest[ManifestSection.generic].pages as v2.SapUiAppPagesV2,\n        pageKeys\n    );\n    checkV2Page(v2Page, importParameters.logger, v2Page?.entitySet);\n    if (!v2Page) {\n        return;\n    }\n\n    //Add manifest settings to config\n    addSettings(importParameters, config, factory, pageKeys[0]);\n\n    // Add flex changes to config\n    importParameters.flex.forEach((change) => {\n        if (parseChangeString(change)) {\n            addFlex(config, change, importParameters.jsonSchema, importParameters.logger);\n        }\n    });\n    addFragments(config, importParameters.manifest, v2Page, PageTypeV2.ListReport, importParameters.fragments);\n    removeEmptySettings(config);\n    return config;\n}\n", "import i18next from 'i18next';\nimport i18nEn from '@sap/ux-specification-types';\nimport { initI18n as initSyncI18n } from '../sync/i18n';\n\nexport function initI18n(language = 'en'): void {\n    // Initialize i18next of ide-extension\n    i18next.init({\n        resources: {\n            en: {\n                translation: i18nEn\n            }\n        },\n        lng: language,\n        fallbackLng: 'en',\n        joinArrays: '\\n\\n'\n    });\n\n    // Initialize i18next of core module\n    initSyncI18n(i18next);\n}\n", "{\n  \"WRONGMINUI5VERSION\": \"The minUI5Version {{- minUI5Version}} from manifest.json does not fit to the given version of @sap/ux-specification, update the specification version in package.json\",\n  \"UNKNOWNMINUI5VERSION\": \"The minUI5Version can not be determined from the pattern '{{- minUI5Version}}'\",\n  \"NOBASEPATH\": \"No base path was passed in the API call for creating a custom call, app id = '{{- appId}}'\",\n  \"NOPAGES\": \"No pages found in manifest for app with id '{{- appId}}'\",\n  \"NOFE\": \"The manifest passed is not correct for Fiori Elements V2: section sap.ui.generic.app is missing\",\n  \"NOGENERICSCHEMA\": \"No generic schema found while generating page schema for {{- pageType}}\",\n  \"NOPAGEFORENTITYSET\": \"No page found in manifest for entitySet '{{- entitySet}}'\",\n  \"NOENTITYSET\": \"No entitySet defined for page '{{- pageName}}'\",\n  \"NOENTITYTYPE4SET\": \"No entityType could be found for the given entity set '{{- entitySetName}}'\",\n  \"NOPRESENTATIONVARIANT\": \"No PresentationVariant defined for '{{- key}}'\",\n  \"ENTITYSETNOTFOUND\": \"Entity set '{{- entitySetName}}' was specified in manifest, but this entity set could not be found in metadata\",\n  \"CONTEXTPATHCOULDNOTBERESOLVED\": \"Either entitySet '{{- entitySet}}' or contextPath '{{- contextPath}}' was incorrectly specified in manifest, as this entity set or contextPath could not be found in metadata\",\n  \"NOLR\": \"No page found in manifest for list report\",\n  \"NOALP\": \"No page found in manifest for analytical list page\",\n  \"NOTEMPLATE\": \"No Fiori Elements template could be determined, as section '{{- section}}' is not defined in manifest\",\n  \"ANNOERR\": \"Error while parsing annotation files\",\n  \"ANNOTATIONFILE\": \"Annotation file: '{{- file}}'\",\n  \"COMPONENTNOTDEFINED\": \"Component name is not defined for page '{{- pageName}}'\",\n  \"NOROUTING\": \"Incomplete manifest definition: no routing defined\",\n  \"NOLINEITEMS\": \"UI.LineItem annotation has not been defined\",\n  \"NOTARGETS\": \"Incomplete manifest definition: no targets defined\",\n  \"NOTARGET\": \"Invalid reference: annotation target '{{- target}}' not found\",\n  \"NOROUTINGID\": \"No page found in manifest for routingId '{{- routingId}}'\",\n  \"FLEXERROR\": \"Error while parsing flex change\",\n  \"INVALIDANCHOR\": \"Custom column with ID '{{- id}}' has an invalid anchor '{{- anchor}}'\",\n  \"NOFRAGMENT\": \"fragmentName is undefined for columnKey '{{- columnKey}}'\",\n  \"INVALIDTARGETDEFINITION\": \"Invalid routing target definition in manifest: '{{- target}}'\",\n  \"NOID4SECTION\": \"No ID has been defined for collection facet '{{- facet}}'. As a consequence, no stable ID can be calculated.\",\n  \"XMLPARSEFAILURE\": \"Parsing of XML file failed with error - {{- error}}\"\n}\n", "import type { i18n } from 'i18next';\nimport * as i18nSyncEn from './common/i18n.json';\n\nexport function initI18n(i18nInstance: i18n): void {\n    i18nInstance.addResourceBundle(i18nInstance.language, 'translation', i18nSyncEn);\n}\n", "import type { CommonImportParameters } from '@sap/ux-specification-types';\nimport { v2, ManifestSection, PageTypeV2, MANIFESTPATH, LogSeverity } from '@sap/ux-specification-types';\nimport { ensureManifestSectionByPathV2 } from '../export/manifest';\nimport { getPageTypeV2 } from '../../common';\nimport i18next from 'i18next';\nimport type { ExtensionLogger } from '../../..';\nimport { log } from '../../../extensionLogger';\n\n/**\n * Determines a V2 object page in the manifest, based on the given entity set\n * @param v2Pages - manifest['sap.ui.generic.app'].pages\n * @param entitySet - current entityset\n * @param pageKeys - list of page keys, to be filled\n * @returns v2Page - page as specified in the manifest\n */\nexport function findObjectPageV2(\n    v2Pages: v2.SapUiAppPagesV2,\n    entitySet: string,\n    pageKeys: string[]\n): v2.SapUiAppPageV2 | undefined {\n    let foundPage;\n    for (const key in v2Pages) {\n        const v2Page = v2Pages[key];\n        if (getPageTypeV2(v2Page.component?.name) === PageTypeV2.ObjectPage && v2Page.entitySet === entitySet) {\n            pageKeys.unshift(key);\n            return v2Page;\n        } else if (v2Page.pages) {\n            foundPage = findObjectPageV2(v2Page.pages, entitySet, pageKeys);\n            if (foundPage) {\n                pageKeys.unshift(key);\n                return foundPage;\n            }\n        }\n    }\n}\n\n/**\n * Determines a V2 list report page in the manifest\n * @param v2Pages - manifest['sap.ui.generic.app'].pages\n * @param pageKeys - list of page keys, to be filled\n * @returns v2Page - page as specified in the manifest\n */\nexport function findListReportPageV2(v2Pages: v2.SapUiAppPagesV2, pageKeys: string[]): v2.SapUiAppPageV2 | undefined {\n    for (const key in v2Pages) {\n        const v2Page = v2Pages[key];\n        if (getPageTypeV2(v2Page.component?.name) === PageTypeV2.ListReport) {\n            pageKeys.push(key);\n            return v2Page;\n        }\n    }\n}\n\n/**\n * Validate the given page definition from manifest\n * @param {ImportListReportV2Parameters} importParameters  - object comprising all API input data\n * @returns {v2.SapUiAppPagesV2 | undefined} Pages definition in manifest if found\n */\nexport function getV2Pages(importParameters: CommonImportParameters): v2.SapUiAppPagesV2 | undefined {\n    if (!importParameters.manifest[ManifestSection.generic]) {\n        log(importParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOFE'),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.generic]\n            }\n        });\n        return;\n    }\n    const v2Pages = importParameters.manifest[ManifestSection.generic].pages as v2.SapUiAppPagesV2;\n    if (!v2Pages) {\n        log(importParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOPAGES', { appId: importParameters.manifest['sap.app']['id'] }),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.generic]\n            }\n        });\n        return;\n    }\n    return v2Pages;\n}\n\n/**\n * Validate the given page definition from manifest\n * @param v2Page - manifest page\n * @param logger - logger for writing the check results\n * @param entitySet - the given entiset from the API call\n */\nexport function checkV2Page(v2Page: v2.SapUiAppPageV2, logger: ExtensionLogger, entitySet: string): void {\n    if (!v2Page) {\n        log(logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOPAGEFORENTITYSET', { entitySet }),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.generic]\n            }\n        });\n        return;\n    }\n    if (!v2Page.entitySet) {\n        const pageName = v2Page.component?.name;\n        log(logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOENTITYSET', { pageName }),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.generic]\n            }\n        });\n    }\n}\n\n/**\n * Determines a V2 analytical list page in the manifest\n * @param v2Pages - manifest['sap.ui.generic.app'].pages\n * @param pageKeys - list of page keys, to be filled\n * @returns v2Page - page as specified in the manifest\n */\nexport function findAnalyticalListPage(\n    v2Pages: v2.SapUiAppPagesV2,\n    pageKeys: string[],\n    logger?: ExtensionLogger\n): v2.SapUiAppPageV2 | undefined {\n    for (const key in v2Pages) {\n        const v2Page = v2Pages[key];\n        pageKeys.push(key);\n        if (getPageTypeV2(v2Page.component?.name) === PageTypeV2.AnalyticalListPage) {\n            return v2Page;\n        }\n    }\n    //Not found ==> log\n    log(logger, {\n        severity: LogSeverity.Error,\n        message: i18next.t('NOALP'),\n        location: {\n            path: MANIFESTPATH,\n            range: [ManifestSection.generic]\n        }\n    });\n}\n\n/**\n * Method checks if passed extension key is associated to custom section with passed entity.\n * @param {string} extensionKey - Extension key.\n * @param {string} entity - Entity to check in extension.\n * @returns {boolean} Is extension key relates to custom section and associated to passed entity.\n */\nexport function isAssociatedCustomSection(extensionKey: string, entity: string): boolean {\n    const keyParts = extensionKey.split('|');\n    return v2.SectionPosition[keyParts[0]] && keyParts[1] === entity;\n}\n\n/**\n * Method which finds custom section extensions in manifest for passed entitySet\n * @param manifest - manifest.\n * @param entitySet - Entity set to lookup while searching custom section extensions.\n * @returns {object} Found object with custom sections\n */\nexport function findCustomSectionExtensions(manifest: object, entitySet: string): object {\n    const customSectionViews = ensureManifestSectionByPathV2(\n        manifest,\n        `sap.ui5/extends/extensions/${v2.SAPUI5_VIEW_EXTENSION}/${v2.SAPUI5_VIEW_EXTENSION_OBJECT_PAGE}`\n    );\n    const pageCustomSections = {};\n    for (const key in customSectionViews) {\n        if (isAssociatedCustomSection(key, entitySet)) {\n            pageCustomSections[key] = customSectionViews[key];\n        }\n    }\n    return pageCustomSections;\n}\n\n/**\n * Removes empty properties of Footer\n * @param {AnalyticalListPageConfig | ListReportConfig} config - the configuration to be checked\n */\nfunction removeEmptySettingsOfFooter(config: v2.AnalyticalListPageConfigV2 | v2.ListReportConfigV2) {\n    if (config.footer?.actions) {\n        for (const actionKey in config.footer.actions) {\n            if (Object.keys(config.footer.actions[actionKey]).length === 0) {\n                delete config.footer.actions[actionKey];\n            }\n        }\n        if (Object.keys(config.footer.actions).length === 0) {\n            delete config.footer.actions;\n        }\n        if (Object.keys(config.footer).length === 0) {\n            delete config.footer;\n        }\n    }\n}\n\n/**\n * Removes empty properties of FilterBar\n * @param {AnalyticalListPageConfig | ListReportConfig} config - the configuration to be checked\n */\nfunction removeEmptySettingsOfFilterBar(config: v2.AnalyticalListPageConfigV2 | v2.ListReportConfigV2) {\n    if (config.filterBar?.selectionFields) {\n        for (const fieldKey in config.filterBar.selectionFields) {\n            if (Object.keys(config.filterBar.selectionFields[fieldKey]).length === 0) {\n                delete config.filterBar.selectionFields[fieldKey];\n            }\n        }\n        if (Object.keys(config.filterBar?.selectionFields)?.length === 0) {\n            delete config.filterBar.selectionFields;\n        }\n    }\n}\n\n/**\n * Removes empty properties of ToolBar\n * @param {AnalyticalListPageConfig | ListReportConfig} config - the configuration to be checked\n */\nfunction removeEmptySettingsOfToolBar(config: v2.AnalyticalListPageConfigV2 | v2.ListReportConfigV2) {\n    if (config.table?.toolBar) {\n        for (const actionKey in config.table.toolBar.actions) {\n            if (Object.keys(config.table.toolBar.actions[actionKey]).length === 0) {\n                delete config.table.toolBar.actions[actionKey];\n            }\n        }\n        if (Object.keys(config.table.toolBar.actions).length === 0) {\n            delete config.table.toolBar.actions;\n        }\n        if (Object.keys(config.table.toolBar).length === 0) {\n            delete config.table.toolBar;\n        }\n    }\n}\n\n/**\n * Removes empty properties in the config.json of Analytical List Page V2 | ListReport Page V2\n * @param {AnalyticalListPageConfig | ListReportConfig} config - the configuration to be checked\n */\nexport function removeEmptySettings(config: v2.AnalyticalListPageConfigV2 | v2.ListReportConfigV2): void {\n    // Check ToolBar\n    removeEmptySettingsOfToolBar(config);\n    // Check FilterBar\n    removeEmptySettingsOfFilterBar(config);\n    // Check Footer\n    removeEmptySettingsOfFooter(config);\n}\n", "export * from './AnalyticalListPage';\nexport * from './ListReport';\nexport * from './ObjectPage';\nexport * from './OverviewPage';\n", "import { ControlType, v2 } from '@sap/ux-specification-types';\nimport type { AnalyticalTable } from '../controls/Table';\nimport { pageLayoutInformation, childId, syncRule } from '../../../common/decoration/decorators';\nimport { buildControlIdForPage, exportToFlexChange } from '../../../common/decoration';\n\n@pageLayoutInformation({\n    id: 'sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage',\n    pageId: v2.FE_TEMPLATE_V2_ALP\n})\nexport class AnalyticalListPage implements v2.AnalyticalListPageConfigV2 {\n    @syncRule({\n        flex: {\n            controlId: buildControlIdForPage,\n            controlType: (): ControlType => ControlType.DynamicPage,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    fitContent?: boolean;\n\n    @childId('table')\n    table?: AnalyticalTable;\n\n    @childId('template::SmartFilterBar')\n    filterBar?: v2.AnalyticalListPageFilterBar;\n\n    @childId('analyticalListPageChart')\n    chart?: v2.ChartSettings;\n\n    @childId('analyticalListFooter')\n    footer?: v2.GenericFooter;\n\n    keyPerformanceIndicators: {\n        [k: string]: v2.KPISettings;\n    };\n}\n", "import { ControlType, v2 } from '@sap/ux-specification-types';\nimport type { ResponsiveTable, TreeTable, AnalyticalTable, GridTable } from '../controls/Table';\nimport { pageLayoutInformation, childId, syncRule } from '../../../common/decoration/decorators';\nimport { buildControlIdForPage, exportToFlexChange } from '../../../common/decoration';\n\ntype TableClassType = ResponsiveTable | TreeTable | AnalyticalTable | GridTable;\n\n@pageLayoutInformation({\n    id: v2.SAPUI5_VIEW_EXTENSION_LIST_REPORT,\n    pageId: v2.FE_TEMPLATE_V2_LIST_REPORT\n})\nexport class ListReport implements v2.ListReportConfigV2 {\n    @syncRule({\n        flex: {\n            controlId: buildControlIdForPage,\n            controlType: (): ControlType => ControlType.DynamicPage,\n            createFlexChange: exportToFlexChange\n        }\n    })\n    fitContent?: boolean;\n\n    @childId('listReportFilter')\n    filterBar?: v2.ListReportFilterBar;\n\n    @childId('listReport')\n    table?: TableClassType;\n\n    @childId('listReportFooter')\n    footer?: v2.GenericFooter;\n}\n", "/**\n * The module is mapped to specification/v2/pages/ObjectPageConfig.ts\n * This comment is maintained as this module is named as ObjectPage.ts and the corresponding module is named as ObjectPageConfig.ts\n */\n\nimport { v2 } from '@sap/ux-specification-types';\nimport { pageLayoutInformation, childId, syncRule, validity } from '../../../common/decoration/decorators';\nimport { getAppSettingOBJPathV2, getAppRootSettingOBJPath } from '../../application';\nimport type { FlexibleColumnLayoutType } from '@sap/ux-specification-types';\n\n@pageLayoutInformation({\n    id: v2.SAPUI5_VIEW_EXTENSION_OBJECT_PAGE,\n    pageId: v2.FE_TEMPLATE_V2_OBJECT_PAGE\n})\nexport class ObjectPage implements v2.ObjectPageConfigV2 {\n    @syncRule({\n        manifest: {\n            path: (pageKeys: string[]): string => getAppSettingOBJPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.52.0'\n    })\n    showConfirmationOnDraftActivate?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys: string[]): string => getAppSettingOBJPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.52.1'\n    })\n    hideChevronForUnauthorizedExtNav?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys: string[]): string => getAppSettingOBJPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.48.0'\n    })\n    allowDeepLinking?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys: string[]): string => getAppSettingOBJPathV2(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.52.0'\n    })\n    navToListOnSave?: boolean;\n\n    @childId('header')\n    header?: v2.ObjectPageHeader;\n\n    @childId('sections')\n    sections?: v2.CustomSections | v2.GenericSections;\n\n    @childId('layout')\n    layout?: v2.ObjectPageLayout;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys: string[]): string => getAppRootSettingOBJPath(pageKeys)\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    defaultLayoutTypeIfExternalNavigation?: FlexibleColumnLayoutType.MidColumnFullScreen;\n\n    @syncRule({\n        manifest: {\n            path: (pageKeys: string[]): string => getAppSettingOBJPathV2(pageKeys),\n            import: (value: object): object | undefined => {\n                if ('chartSettings' in value) {\n                    return value['chartSettings'] as object | undefined;\n                }\n            },\n            key: 'chartSettings'\n        }\n    })\n    @validity({\n        since: '1.78.0'\n    })\n    globalChartSettings?: v2.GlobalChartSettings;\n}\n", "import type { v2 } from '@sap/ux-specification-types';\nimport { pageLayoutInformation, syncRule, validity } from '../../../common/decoration/decorators';\nimport { getOVPsettingPath, getGlobalSettingsPath } from '../../application';\nimport type { ListCard, AnalyticalCard, StackCard, LinklistCard, TableCard, CustomCard } from '../controls/Card';\n\nfunction importDateSettingsFieldsOVP(manifestSection: object, configPart) {\n    for (const propertyKey in manifestSection['dateSettings']['fields']) {\n        configPart.fields[propertyKey] = manifestSection['dateSettings']['fields'][propertyKey];\n        const selectedValues = manifestSection['dateSettings']['fields'][propertyKey].selectedValues;\n        if (typeof selectedValues === 'string') {\n            configPart.fields[propertyKey].selectedValues = selectedValues.split(',') as v2.DateRangeType[];\n        }\n        for (const filterKey in manifestSection['dateSettings']['fields'][propertyKey].filter) {\n            const filterValue = manifestSection['dateSettings']['fields'][propertyKey].filter[filterKey];\n            configPart.fields[propertyKey].filter[filterKey] = filterValue;\n            if (filterValue.equals && typeof filterValue.equals === 'string') {\n                configPart.fields[propertyKey].filter[filterKey].equals = filterValue.equals.split(\n                    ','\n                ) as v2.DateRangeType[];\n            }\n        }\n    }\n}\n\nexport function importDateSettingsOVP(manifestSection: object): v2.DateRange {\n    if (!manifestSection || !manifestSection['dateSettings']) {\n        return undefined;\n    }\n    const configPart: v2.DateRange = JSON.parse(JSON.stringify(manifestSection['dateSettings']));\n    // converted CSV format to array of strings\n    if (typeof manifestSection['dateSettings']['selectedValues'] === 'string') {\n        configPart.selectedValues = manifestSection['dateSettings']['selectedValues'].split(',') as v2.DateRangeType[];\n    }\n    if (manifestSection['dateSettings']['fields']) {\n        importDateSettingsFieldsOVP(manifestSection, configPart);\n    }\n    return configPart;\n}\n\nexport function importFilterSettings(manifestSection: object): object {\n    const configPart = {};\n    configPart['dateSettings'] = importDateSettingsOVP(manifestSection['filterSettings']);\n    return configPart;\n}\n\nfunction exportFilterFields(configPart: v2.FilterSettingsType, key: string, manifestSection: unknown) {\n    for (const fieldName in configPart['filterSettings'][key]['fields']) {\n        const field = configPart['filterSettings'][key]['fields'][fieldName];\n        if (field.selectedValues) {\n            manifestSection['filterSettings'][key]['fields'][fieldName].selectedValues = field.selectedValues.join();\n        }\n        if (field.filter) {\n            for (const filterKey in field.filter) {\n                const filterValue = field.filter[filterKey];\n                if (filterValue.equals && Array.isArray(filterValue.equals)) {\n                    manifestSection['filterSettings'][key]['fields'][fieldName].filter[filterKey].equals =\n                        filterValue.equals.join();\n                }\n            }\n        }\n    }\n}\n\nexport function exportFilterSettings(manifestSection: object, configPart: v2.FilterSettingsType): void {\n    if (!manifestSection['filterSettings']) {\n        manifestSection['filterSettings'] = {};\n    }\n    const key = 'dateSettings';\n    if (configPart['filterSettings'][key] === undefined) {\n        delete manifestSection['filterSettings'][key];\n    } else {\n        manifestSection['filterSettings'][key] = JSON.parse(JSON.stringify(configPart['filterSettings'][key]));\n        //now convert enum array to joined string\n        if (configPart['filterSettings'][key]['selectedValues']) {\n            manifestSection['filterSettings'][key]['selectedValues'] =\n                configPart['filterSettings'][key]['selectedValues'].join();\n        }\n        if (configPart['filterSettings'][key]['fields']) {\n            exportFilterFields(configPart, key, manifestSection);\n        }\n    }\n}\n\ntype CardClassType = ListCard | AnalyticalCard | StackCard | LinklistCard | TableCard | CustomCard;\n\n@pageLayoutInformation({\n    id: 'sap.suite.ui.generic.template.OverviewPage.view.Details',\n    pageId: 'sap.suite.ui.generic.template.OverviewPage'\n})\nexport class OverviewPage implements v2.OverviewPageConfigV2 {\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    globalFilterModel?: string;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    globalFilterEntityType?: string;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    globalFilterEntitySet?: string;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    containerLayout?: v2.ContainerLayoutType;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    smartVariantRequired?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    showDateInRelativeFormat?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    enableLiveFilter?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    imageSupported?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    considerAnalyticalParameters?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    refreshIntervalInMinutes?: number;\n\n    @syncRule({\n        manifest: { path: (): string => getOVPsettingPath() }\n    })\n    useDateRangeType?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (cardKeys): string => getGlobalSettingsPath(cardKeys)\n        }\n    })\n    @validity({\n        since: '1.80.0'\n    })\n    chartSettings?: v2.ChartSettingsType;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath(),\n            import: importFilterSettings,\n            export: exportFilterSettings\n        }\n    })\n    @validity({\n        since: '1.80.0'\n    })\n    filterSettings?: v2.FilterSettingsType;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    showBasicSearch?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    disableErrorPage?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (): string => getOVPsettingPath()\n        }\n    })\n    bHeaderExpanded?: boolean;\n\n    cards: {\n        [k: string]: CardClassType;\n    };\n}\n", "import type { PageTypeV2, PageTypeV4 } from '@sap/ux-specification-types';\nimport type { V2Controls, V2Pages } from '../../v2/types';\nimport type { V4Controls, V4Pages } from '../../v4/types';\n\n/**\n * Common interface that is used for all instantiations of (reflect) metadata classes\n */\nexport interface MetadataInstanceInterface {\n    createInstance(\n        pageType: PageTypeV2 | PageTypeV4,\n        schemaPropertyName: string,\n        data?: object,\n        controlPropertyValue?: string\n    ): any;\n    createPageInstance(pageType: PageTypeV2 | PageTypeV4, data?: object): object;\n}\n\nexport abstract class MetadataFactory implements MetadataInstanceInterface {\n    private readonly controls: V2Controls | V4Controls;\n    private readonly pages: V2Pages | V4Pages;\n    private readonly pageTypes: object;\n\n    /**\n     * Sub-classes for V2 and V4 have to pass their specific (reflect) metadata classes:\n     * @param controls - list of imported metadata classes for controls\n     * @param pages - list of imported metadata classes for pages\n     * @param pageTypes - list of supported pages, entry point to further definitions\n     */\n    protected constructor(controls: V2Controls | V4Controls, pages: V2Pages | V4Pages, pageTypes: object) {\n        this.controls = controls;\n        this.pages = pages;\n        this.pageTypes = pageTypes;\n    }\n\n    /**\n     * Creates an instance of a metadata class for a given (complex) property of a JSON schema\n     * @param {PageTypeV2} pageType - page type of a Fiori Element\n     * @param schemaPropertyName - name of the complex property in the JSON schema of the page.\n     *                             Used as fallback if no metadataclass can be found by evaluating controlPropertyValue.\n     * @param data - data object from which the values shall be taken over, representing a part of the config\n     * @param controlPropertyValue - value of a controling property that categorizes the complex property, e.g. table type or card template\n     * @returns a class instance comprising the reflect metadata for import or export.\n     *          If no metadata class could be identified, assumption is that no dedicated handler class exists; thus the original data object is returned as is.\n     */\n    createInstance(\n        pageType: PageTypeV2 | PageTypeV4,\n        schemaPropertyName: string,\n        data?: object,\n        controlPropertyValue?: string\n    ): any {\n        let metadataClass = this.controls[controlPropertyValue]\n            ? this.controls[controlPropertyValue]\n            : this.controls[schemaPropertyName];\n        if (!metadataClass) {\n            metadataClass = this.pageTypes[pageType][controlPropertyValue]\n                ? this.pageTypes[pageType][controlPropertyValue]\n                : this.pageTypes[pageType][schemaPropertyName];\n        }\n        return metadataClass ? Object.assign(new metadataClass(), data) : data;\n    }\n    /**\n     * Creates an instance of a metadata class for a given page\n     * @param {PageTypeV2} pageType - page type of a Fiori Element\n     * @param data - data to be taken over (from the config)\n     * @returns a class instance comprising the reflect metadata for import or export\n     */\n    createPageInstance(pageType: PageTypeV2 | PageTypeV4, data?: object): object {\n        const metadataClass = this.pages[pageType];\n        return Object.assign(new metadataClass(), data);\n    }\n}\n", "import * as controls from './controls';\nimport * as pages from './pages';\nimport type { MetadataInstanceInterface } from '../../common/decoration/factory';\nimport { MetadataFactory } from '../../common/decoration/factory';\nimport { v2, PageTypeV2, SAPUI5_FRAGMENT_CLASS, SAPUI5_VIEW_CLASS } from '@sap/ux-specification-types';\n\n/**\n * Note: If the key of the elements corresponds to the name of the definition in schema, you do not have to list it explicitly here.\n * The following tables only comprise entries for elements that do not follow the official pattern (yet)\n */\nconst ALPElements = {\n    //no deviations\n};\n\nconst LRElements = {\n    Table: controls.ResponsiveTable,\n    ResponsiveTableWithMultiSelect: controls.ResponsiveTable,\n    ResponsiveTableWithInlineDelete: controls.ResponsiveTable\n};\n\nconst OVPElements = {\n    [v2.CardSettingsType.listCardSettings]: controls.ListCard,\n    [v2.CardSettingsType.listCardSettingsv4]: controls.ListCard,\n    [v2.CardSettingsType.analyticalCardSettings]: controls.AnalyticalCard,\n    [v2.CardSettingsType.analyticalCardSettingsv4]: controls.AnalyticalCard,\n    [v2.CardSettingsType.stackCardSettings]: controls.StackCard,\n    [v2.CardSettingsType.linkListCardSettings]: controls.LinklistCard,\n    [v2.CardSettingsType.tableCardSettings]: controls.TableCard,\n    [v2.CardSettingsType.tableCardSettingsv4]: controls.TableCard\n};\n\nconst OPElements = {\n    [SAPUI5_VIEW_CLASS]: controls.ObjectPageCustomSectionView,\n    [SAPUI5_FRAGMENT_CLASS]: controls.ObjectPageCustomSectionFragment,\n    Table: controls.ObjectPageResponsiveTable, //default\n    ObjectPageResponsiveTableWithMultiSelect: controls.ObjectPageResponsiveTable,\n    ObjectPageResponsiveTableWithInlineDelete: controls.ObjectPageResponsiveTable\n};\n\nconst pageTypes = {\n    [PageTypeV2.AnalyticalListPage]: ALPElements,\n    [PageTypeV2.ListReport]: LRElements,\n    [PageTypeV2.ObjectPage]: OPElements,\n    [PageTypeV2.OverviewPage]: OVPElements\n};\n\n/**\n * V2 specific factory class for creating instances of (reflect) metadata classes\n */\nexport class MetadataInstanceFactoryV2 extends MetadataFactory implements MetadataInstanceInterface {\n    constructor() {\n        super(controls, pages, pageTypes);\n    }\n}\n", "import {\n    transferSettingsOfObject,\n    addFlex,\n    determineTableType,\n    addFragments,\n    convertActionKey,\n    importHeaderActions\n} from '../common/index';\nimport type { v2, ImportALPV2Parameters } from '@sap/ux-specification-types';\nimport { DefinitionName, ManifestSection, PageTypeV2 } from '@sap/ux-specification-types';\nimport { initI18n } from '../../../../i18n/i18n';\nimport { parseChangeString } from '../../../common';\nimport { checkV2Page, findAnalyticalListPage, getV2Pages, removeEmptySettings } from '../../import/utils';\nimport { MetadataInstanceFactoryV2 as Factory } from '../../export/factory';\nimport type { MetadataInstanceInterface } from '../../../common/decoration/factory';\nimport type { Definition } from 'typescript-json-schema';\n\n/**\n * Adds manifest settings to the config.json\n * @param {AnalyticalListPageConfig} analyticalListPageConfig - the configuration to be filled\n * @param {Manifest} manifest - manifest.json of the app\n * @param {object} jsonSchema - the app-specific schema\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param {string} pageKey - key of the page in manifest\n * @param {ExtensionLogger} logger - instance for logging exceptions\n */\nfunction addSettings(\n    importParameters: ImportALPV2Parameters,\n    analyticalListPageConfig: v2.AnalyticalListPageConfigV2,\n    factory: MetadataInstanceInterface,\n    pageKey: string\n): void {\n    const tableType = determineTableType(importParameters.manifest, pageKey);\n    const schemaDefinitions = (importParameters.jsonSchema as Definition).definitions as Definition;\n\n    // Import standard header actions:\n    importHeaderActions(analyticalListPageConfig, factory, schemaDefinitions);\n\n    analyticalListPageConfig.table = factory.createInstance(\n        PageTypeV2.AnalyticalListPage,\n        `ALP${tableType}`,\n        analyticalListPageConfig.table\n    );\n    transferSettingsOfObject(\n        analyticalListPageConfig.table,\n        importParameters.manifest,\n        schemaDefinitions[`ALP${tableType}<LineItems>`],\n        pageKey,\n        importParameters.logger\n    );\n    // ToolBar:\n    analyticalListPageConfig.table.toolBar = factory.createInstance(\n        PageTypeV2.AnalyticalListPage,\n        DefinitionName.ToolBar,\n        {\n            actions: {}\n        }\n    );\n    transferSettingsOfObject(\n        analyticalListPageConfig.table.toolBar,\n        importParameters.manifest,\n        schemaDefinitions[DefinitionName.ToolBar],\n        pageKey,\n        importParameters.logger\n    );\n    if (schemaDefinitions[DefinitionName.ActionsLR]) {\n        for (const actionProperty in schemaDefinitions[DefinitionName.ActionsLR].properties) {\n            const actionKey = convertActionKey(actionProperty);\n            analyticalListPageConfig.table.toolBar.actions[actionKey] = factory.createInstance(\n                PageTypeV2.AnalyticalListPage,\n                DefinitionName.Action\n            );\n            transferSettingsOfObject(\n                analyticalListPageConfig.table.toolBar.actions[actionKey],\n                importParameters.manifest,\n                schemaDefinitions[DefinitionName.Action],\n                pageKey,\n                importParameters.logger\n            );\n        }\n    }\n    //FilterBar:\n    analyticalListPageConfig.filterBar = factory.createInstance(\n        PageTypeV2.AnalyticalListPage,\n        DefinitionName.AnalyticalListPageFilterBar,\n        analyticalListPageConfig.filterBar\n    );\n    transferSettingsOfObject(\n        analyticalListPageConfig.filterBar,\n        importParameters.manifest,\n        schemaDefinitions[DefinitionName.AnalyticalListPageFilterBar],\n        pageKey,\n        importParameters.logger\n    );\n    if (schemaDefinitions[DefinitionName.SelectionFields]) {\n        analyticalListPageConfig.filterBar.selectionFields = factory.createInstance(\n            PageTypeV2.AnalyticalListPage,\n            DefinitionName.AnalyticalListPageFilterBar,\n            analyticalListPageConfig.filterBar.selectionFields\n        );\n        const schemaSelectionFields = schemaDefinitions[DefinitionName.SelectionFields].properties;\n        for (const selectionProperty in schemaSelectionFields) {\n            const selectionKey = selectionProperty;\n            analyticalListPageConfig.filterBar.selectionFields[selectionKey] = factory.createInstance(\n                PageTypeV2.AnalyticalListPage,\n                'SelectionFieldDateSettings'\n            );\n            transferSettingsOfObject(\n                analyticalListPageConfig.filterBar.selectionFields[selectionKey],\n                importParameters.manifest,\n                schemaDefinitions['SelectionFieldDateSettings'],\n                pageKey,\n                importParameters.logger,\n                selectionKey\n            );\n        }\n    }\n\n    //Chart settings:\n    analyticalListPageConfig.chart = factory.createInstance(\n        PageTypeV2.AnalyticalListPage,\n        'ChartSettings',\n        analyticalListPageConfig.chart\n    );\n    transferSettingsOfObject(\n        analyticalListPageConfig.chart,\n        importParameters.manifest,\n        schemaDefinitions['ChartSettings'],\n        pageKey,\n        importParameters.logger\n    );\n    //Footer:\n    analyticalListPageConfig.footer = { actions: {} };\n    const footerAction = schemaDefinitions[DefinitionName.FooterActionsLR];\n    if (footerAction) {\n        for (const actionProperty in footerAction.properties) {\n            const actionKey = convertActionKey(actionProperty);\n            analyticalListPageConfig.footer.actions[actionKey] = factory.createInstance(\n                PageTypeV2.AnalyticalListPage,\n                DefinitionName.FooterAction\n            );\n            transferSettingsOfObject(\n                analyticalListPageConfig.footer.actions[actionKey],\n                importParameters.manifest,\n                schemaDefinitions[DefinitionName.Action],\n                pageKey,\n                importParameters.logger\n            );\n        }\n    }\n\n    //KPI's:\n    analyticalListPageConfig.keyPerformanceIndicators = {};\n    const kpiCards =\n        importParameters.manifest[ManifestSection.generic]['pages'][pageKey].component?.settings\n            ?.keyPerformanceIndicators;\n    if (kpiCards) {\n        Object.keys(kpiCards).forEach((kpiKey) => {\n            analyticalListPageConfig.keyPerformanceIndicators[kpiKey] = factory.createInstance(\n                PageTypeV2.AnalyticalListPage,\n                'KPISettings'\n            );\n            analyticalListPageConfig.keyPerformanceIndicators = factory.createInstance(\n                PageTypeV2.AnalyticalListPage,\n                'KPISettings',\n                analyticalListPageConfig.keyPerformanceIndicators\n            );\n            transferSettingsOfObject(\n                analyticalListPageConfig.keyPerformanceIndicators[kpiKey],\n                importParameters.manifest,\n                schemaDefinitions['KPISettings'],\n                pageKey,\n                importParameters.logger,\n                kpiKey\n            );\n        });\n    }\n}\n\n/**\n * Creates the configuration file content for an analytical list page V2\n * @param {ImportALPV2Parameters} importParameters  - object comprising all input data\n *\n * @returns {AnalyticalListPageConfig} - the configuration (JSON)\n */\nexport function createAnalyticalListPageConfig(\n    importParameters: ImportALPV2Parameters\n): v2.AnalyticalListPageConfigV2 | undefined {\n    // Initialize i18next\n    initI18n();\n\n    const v2Pages = getV2Pages(importParameters);\n    if (!v2Pages) {\n        return;\n    }\n    const factory = new Factory();\n    //Instantiate Page\n    const config = factory.createPageInstance(PageTypeV2.AnalyticalListPage);\n\n    const pageKeys: string[] = [];\n    const v2Page = findAnalyticalListPage(\n        importParameters.manifest[ManifestSection.generic].pages as v2.SapUiAppPagesV2,\n        pageKeys,\n        importParameters.logger\n    );\n    checkV2Page(v2Page, importParameters.logger, v2Page?.entitySet);\n    if (!v2Page) {\n        return;\n    }\n\n    addSettings(importParameters, config, factory, pageKeys[0]);\n    importParameters.flex.forEach((change) => {\n        if (parseChangeString(change)) {\n            addFlex(config, change, importParameters.jsonSchema);\n        }\n    });\n    addFragments(config, importParameters.manifest, v2Page, PageTypeV2.AnalyticalListPage, importParameters.fragments);\n    removeEmptySettings(config);\n    return config;\n}\n", "import type {\n    SapUiGenericAppPageSettings as Settings,\n    ChangeDefinition,\n    DeprecatedProperties,\n    ExtensionLogger,\n    ImportObjectPageV2Parameters,\n    ObjectPageSectionData,\n    SyncRule,\n    Manifest\n} from '@sap/ux-specification-types';\nimport {\n    ControlType,\n    LogSeverity,\n    v2,\n    ActionTitlePrefix,\n    PageTypeV2,\n    DefinitionName,\n    PropertyName,\n    SchemaTag,\n    UIVOCABULARYALPHADOT,\n    VOCWITHSLASH\n} from '@sap/ux-specification-types';\nimport type { FlexChangesForTransfer, FlexForTransfer } from '../controls/table';\nimport { addFlexForTable } from '../controls/table';\nimport { log } from '../../../../extensionLogger';\nimport { findObjectPageV2, findCustomSectionExtensions, checkV2Page, getV2Pages } from '../utils';\nimport type {} from '../../../common';\nimport {\n    DEFINITION_LINK_PREFIX,\n    convertActionKeyToStableId,\n    getTargetFromCustomColumnRef,\n    getReflectMetadata,\n    getSectionTitle,\n    getTextForDeprecated,\n    parseChangeString\n} from '../../../common';\nimport { ensureManifestSectionByPathV2 } from '../../export/manifest';\nimport i18next from 'i18next';\nimport { initI18n } from '../../../../i18n/i18n';\nimport { MetadataInstanceFactoryV2 as Factory } from '../../export/factory';\nimport type { ObjectPageV2ConfigParameters, SectionPartProperties } from '../../types';\nimport {\n    ActionTypeV2,\n    SectionTypeV2,\n    OP_STANDARD_FOOTER_ACTION_PREFIX,\n    OP_STANDARD_HEADER_ACTION_PREFIX\n} from '../../types';\nimport { UIAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport { convertSelector, addFragments, convertActionKey } from '../common';\nimport type { Definition, DefinitionOrBoolean } from 'typescript-json-schema';\n\n// Comprises list of flexChanges that do not require a facet id\nconst SupportedFlexChangesWithoutFacetId = [ControlType.Avatar, ControlType.ObjectPageLayout, ControlType.DynamicPage];\n\n/**\n * Determines Facet ID from single string selector Id\n * @param {string} selectorId Selector ID\n * @returns {string} FacetID\n */\nfunction getSingleSelectorIdPart(selectorIdParts: string[], facetID: string) {\n    const lastIdParts = selectorIdParts[0].split('-');\n    const id = lastIdParts[lastIdParts.length - 1];\n    if (selectorIdParts[0].indexOf('::action::') >= 0 || selectorIdParts[0].startsWith('action::')) {\n        // Object Page ToolBar Actions\n        facetID =\n            lastIdParts[0].split('::action::')[0] ||\n            lastIdParts[0].split(`${UIAnnotationTerms.LineItem}::`)[1].split('::')[0];\n        facetID = `${ActionTitlePrefix}${facetID}`;\n    } else if (\n        selectorIdParts[0].indexOf(UIAnnotationTerms.LineItem) >= 0 ||\n        selectorIdParts[0].indexOf('UI.LineItem') >= 0 ||\n        selectorIdParts[0].indexOf('::Table') >= 0\n    ) {\n        facetID = lastIdParts[0].split('::Table')[0].split('::responsiveTable')[0];\n    } else {\n        const idParts = id.split('::');\n        if (idParts.length > 1) {\n            facetID = idParts[0];\n        } else if (lastIdParts[0].indexOf('::') > -1) {\n            facetID = lastIdParts[0].split('::')[0];\n        }\n    }\n    return facetID;\n}\n\n/**\n * Determines Facet ID of flex change\n * @param {string} selectorId Control ID of flex change\n * @returns {string} FacetID\n */\nfunction getFacetID(selectorId: string): string {\n    let facetID: string;\n    const selectorIdParts: string[] = selectorId.split(':::');\n    if (selectorIdParts.length === 1) {\n        facetID = getSingleSelectorIdPart(selectorIdParts, facetID);\n    } else if (selectorId.indexOf('sSmartTableId') >= 0) {\n        for (const element of selectorIdParts) {\n            if (element.startsWith('sSmartTableId')) {\n                facetID = element\n                    .split('sSmartTableId::')[1]\n                    .split('::Table')[0]\n                    .split('/responsiveTable')[0]\n                    .replace(`::${UIAnnotationTerms.LineItem}`, `/@${UIAnnotationTerms.LineItem}`);\n                break;\n            }\n        }\n    } else {\n        facetID = selectorIdParts[0];\n    }\n    return facetID;\n}\n\n/**\n * Prepares the list of flex changes\n * @param change - the flex change (UI Adaptation)\n * @returns {FlexChangesForTransfer} - list of prepared flex changes\n */\nfunction prepareFlexChanges(changes: string[], entitySet: string, logger?: ExtensionLogger): FlexChangesForTransfer {\n    const result: FlexChangesForTransfer = {};\n    const complexIdMatch = /.+DataField.+:::sSmartTableId::.+/;\n    changes.forEach((changeString) => {\n        try {\n            const change = parseChangeString(changeString) as ChangeDefinition;\n            const changeId = (change && change.controlId?.split('--')) || [];\n            if (change && changeId[0]?.includes(v2.FE_TEMPLATE_V2_OBJECT_PAGE) && changeId[0]?.endsWith(entitySet)) {\n                let selectorId = changeId[1].replace(/:3a:3a/g, '::');\n                if (complexIdMatch.exec(selectorId) !== null) {\n                    selectorId = selectorId.split('template:::TableColumn:::')[1];\n                }\n                const facetID: string = getFacetID(selectorId);\n                selectorId = convertSelector(selectorId)\n                    .replace(/:3a:3a/g, '::')\n                    .replace(/\\/@com.sap.vocabularies/g, '::com.sap.vocabularies');\n                result[`${selectorId}::${change.content.property}`] = {\n                    controlId: selectorId,\n                    propertyId: change.content.property,\n                    facetId: facetID,\n                    newValue:\n                        change.content.newBinding !== undefined ? change.content.newBinding : change.content.newValue,\n                    controlType: change.controlType,\n                    creation: change.creation\n                };\n            }\n        } catch (error) {\n            log(\n                logger,\n                {\n                    severity: LogSeverity.Error,\n                    message: i18next.t('FLEXERROR')\n                },\n                ...error\n            );\n        }\n    });\n    const sortedList = Object.entries(result).sort(\n        (a: [string, any], b: [string, any]) => a[1].creation - b[1].creation\n    );\n    return sortedList.reduce((accum, [k, v]) => {\n        accum[k] = v;\n        return accum;\n    }, {});\n}\n\n/**\n * Returns the type of a given section\n * @param schemaSection - current section\n * @returns {SectionTypeV2} - type of section, differentiated by level (Sub/Section)\n */\nconst getSectionType = (schemaSection: object): SectionTypeV2 => {\n    let reference;\n    if (schemaSection['$ref']) {\n        reference = schemaSection['$ref'].includes('<') ? schemaSection['$ref'].split('<')[0] : schemaSection['$ref'];\n        return reference.replace(DEFINITION_LINK_PREFIX, '');\n    } else if (schemaSection['properties']?.['subsections']?.['$ref']) {\n        reference = schemaSection['properties']['subsections']['$ref'];\n        reference = reference.includes('<') ? reference.split('<')[0] : reference;\n        return reference.replace(DEFINITION_LINK_PREFIX, '');\n    } else if (schemaSection['properties']?.['subsections']) {\n        return SectionTypeV2.SubSection;\n    }\n};\n\n/**\n * Import of flex changes of a table to the config JSON of OP\n * @param flexChanges - list of flex changes (pre-processed by prepareFlexChanges)\n * @param propertyKey - key of the current property in the app schema\n * @param configPart - part of the configuration to be filled\n * @param {ImportObjectPageV2Parameters} importParameters  - object comprising all input data\n * @param sectionTitle - title of the section (optional)\n * @param sectionId - ID of the given section (optional)\n */\nfunction importFlexChangesOfTable(\n    flexChanges: FlexChangesForTransfer,\n    propertyKey: string,\n    configPart: { [key: string]: any },\n    importParameters: ImportObjectPageV2Parameters,\n    sectionTitle: string,\n    sectionId: string\n) {\n    let facetIds;\n    if (sectionTitle) {\n        facetIds = [sectionTitle.replace(/@/g, '')];\n    } else {\n        facetIds = [sectionId.replace(/@/g, ''), sectionId?.replace(/::@com.sap.vocabularies/g, VOCWITHSLASH)];\n    }\n\n    for (const selector in flexChanges) {\n        const flexChange = flexChanges[selector];\n        const propertyIdMatch = flexChange.propertyId === propertyKey;\n        const isTableColumn = propertyKey === 'columns' && flexChange.controlType === ControlType.TableColumn;\n        if ((propertyIdMatch || isTableColumn) && facetIds.indexOf(flexChange?.facetId) > -1) {\n            addFlexForTable(configPart, flexChange, importParameters.jsonSchema);\n        }\n    }\n}\n\n/**\n * Helper function to evaluate if flex change is for standard action\n * @param flexChange - flex change\n * @param controlIdMatch - if ID of the control matches RegEx\n * @returns {boolean} is standard action flex change\n */\nfunction isStandardActionFlexChange(flexChange: FlexForTransfer, controlIdMatch: boolean) {\n    return flexChange.facetId === 'template' && controlIdMatch;\n}\n\n/**\n * RegEx check of the control Id and/or the section Id against the selector of a flex change\n * @param schemaDefinition - current section of the app specific schema\n * @param flexChange - flex change\n * @param controlIdChecker - RegEx for the controlId\n * @param selectionIdChecker - RegEx for the selectionId\n * @param sectionId - title of the section (optional)\n * @param controlId - ID of the given control, for e.g. GroupElement, Action (optional)\n * @returns the result of all checks\n */\nfunction matchSelector(\n    schemaDefinition: Definition,\n    flexChange: FlexForTransfer,\n    controlIdChecker: RegExp,\n    selectionIdChecker: RegExp,\n    sectionId?: string,\n    controlId?: string\n): boolean {\n    let idMatch = false,\n        controlIdMatch = false;\n    const idElementChecker = (arr, target) => target.every((v) => arr.includes(v));\n\n    if (controlId) {\n        idMatch = controlIdMatch = controlIdChecker.test(flexChange.controlId);\n        if (sectionId) {\n            idMatch = controlIdMatch && selectionIdChecker.test(flexChange.controlId);\n        }\n    } else if (sectionId) {\n        idMatch = selectionIdChecker.test(flexChange.controlId);\n    }\n    const controlIdParts = flexChange.controlId.split('::');\n\n    return (\n        (flexChange.controlType === ControlType.GroupElement && controlIdMatch) ||\n        (flexChange.facetId?.includes(ActionTitlePrefix) && !sectionId && idMatch) ||\n        (sectionId && idElementChecker(controlIdParts, sectionId.split('::')) && idMatch) ||\n        (schemaDefinition.title && idElementChecker(controlIdParts, schemaDefinition.title.split('::'))) ||\n        (!flexChange.facetId && SupportedFlexChangesWithoutFacetId.includes(flexChange.controlType as ControlType)) ||\n        isStandardActionFlexChange(flexChange, controlIdMatch)\n    );\n}\n\n/**\n * Import of (regular) flex changes to the config JSON of OP\n * @param schemaDefinition - current section of the app specific schema\n * @param configPart - part of the configuration to be filled\n * @param flexChanges - list of flex changes (pre-processed by prepareFlexChanges)\n * @param propertyKey - key of the current property in the app schema\n * @param sectionId - title of the section (optional)\n * @param elementId - stable ID part of the given element, for e.g. GroupElement, Action (optional)\n */\nfunction importFlexChanges(\n    schemaDefinition: Definition,\n    configPart: { [key: string]: any },\n    flexChanges: FlexChangesForTransfer,\n    propertyKey: string,\n    sectionId?: string,\n    elementId?: string\n) {\n    const controlIdChecker = new RegExp(`.*${elementId}`);\n    const selectionIdChecker = new RegExp(`.*${sectionId}`);\n\n    for (const selector in flexChanges) {\n        const flexChange = flexChanges[selector];\n        //Property match?\n        if (flexChange.propertyId !== propertyKey) {\n            continue;\n        }\n        //Control type match?\n        if (flexChange.controlType !== schemaDefinition.properties[flexChange.propertyId]?.[SchemaTag.controlType]) {\n            continue;\n        }\n        const match = matchSelector(\n            schemaDefinition,\n            flexChange,\n            controlIdChecker,\n            selectionIdChecker,\n            sectionId,\n            elementId\n        );\n        if (match) {\n            configPart[propertyKey] = flexChange.newValue;\n        }\n    }\n}\n\n/**\n * Checks for deprecated properties and writes them to the log\n * @param manifestSection - given section in the manifest\n * @param deprecatedProperties - list of deperecated properties\n * @param {ImportObjectPageV2Parameters} importParameters  - object comprising all input data\n * @param manifestPath - manifest path, as calcualted by the sync rule\n */\nfunction checkDeprecatedProperties(\n    manifestSection: object,\n    deprecatedProperties: DeprecatedProperties,\n    importParameters: ImportObjectPageV2Parameters,\n    manifestPath: string\n) {\n    if (manifestSection && deprecatedProperties) {\n        for (const key in manifestSection) {\n            const deprecated = deprecatedProperties[key];\n            if (deprecated) {\n                log(importParameters.logger, {\n                    severity: LogSeverity.Warning,\n                    message: getTextForDeprecated(key, deprecated),\n                    location: {\n                        path: 'webapp/manifest.json/',\n                        range: manifestPath.split('/')\n                    }\n                });\n                delete deprecatedProperties[key];\n            }\n        }\n    }\n}\n\n/**\n * Imports manifest settings to the object page config\n * @param syncRule - sync rule for accessing the reflect-metadata\n * @param pageKeys - list of page keys (comprises the one entry describing the given page)\n * @param {ImportObjectPageV2Parameters} importParameters  - object comprising all input data\n * @param configPart - part of the configuration to be filled\n * @param propertyKey  - key of the current property of the schema definition\n * @param deprecatedProperties - list od deperecated properties\n * @param sectionId - ID of the given section (optional)\n * @param sectionTitle - title of the section (optional)\n */\nfunction importManifestSetting(\n    syncRule: SyncRule,\n    pageKeys: string[],\n    importParameters: ImportObjectPageV2Parameters,\n    configPart: { [key: string]: any },\n    propertyKey: string,\n    deprecatedProperties: DeprecatedProperties,\n    sectionPart?: SectionPartProperties\n) {\n    const sectionIdInManifest = sectionPart?.id\n        ? sectionPart.id.replace(/\\/@/g, '::').replace(/@com.sap/g, 'com.sap')\n        : undefined;\n    let manifestPath: string;\n    let manifestSection: object;\n    if (sectionPart?.title) {\n        manifestPath = syncRule.manifest.path(pageKeys, {} as Manifest, sectionPart.title);\n        manifestSection = ensureManifestSectionByPathV2(importParameters.manifest, manifestPath);\n        if (Object.values(manifestSection).length === 0) {\n            manifestPath = syncRule.manifest.path(pageKeys, {} as Manifest, sectionIdInManifest);\n            manifestSection = ensureManifestSectionByPathV2(importParameters.manifest, manifestPath);\n        }\n    } else {\n        manifestPath = syncRule.manifest.path(pageKeys, {} as Manifest, sectionIdInManifest);\n        manifestSection = ensureManifestSectionByPathV2(importParameters.manifest, manifestPath);\n    }\n    const importHandler = syncRule.manifest.import;\n    if (importHandler && typeof importHandler === 'function') {\n        const value = importHandler(manifestSection, sectionPart?.id);\n        if (value !== undefined) {\n            configPart[propertyKey] = value;\n        }\n    } else {\n        const manifestKey = syncRule.manifest.key || propertyKey;\n        if (manifestKey in manifestSection) {\n            configPart[propertyKey] = manifestSection[manifestKey];\n        }\n    }\n    // Check for deprecated properties.\n    checkDeprecatedProperties(manifestSection, deprecatedProperties, importParameters, manifestPath);\n    return manifestSection;\n}\n\n/**\n * Transfers settings from manifest and flexChanges to object page config\n * @param {ImportObjectPageV2Parameters} importParameters  - object comprising all input data\n * @param configPart - part of the configuration to be filled\n * @param schemaDefinition - current section of the app specific schema\n * @param configParameters - comprises page keys and flex changes\n * @param sectionPart - structure comprising the section information\n * @param elementId - stable ID part of the given element (action, column, ...) (optional)\n */\nfunction transferSettingsAndFlexChanges(\n    importParameters: ImportObjectPageV2Parameters,\n    configPart: { [key: string]: any },\n    schemaDefinition: Definition,\n    configParameters: ObjectPageV2ConfigParameters,\n    sectionPart?: SectionPartProperties,\n    elementId?: string\n): void {\n    if (!schemaDefinition) {\n        return;\n    }\n    const deprecatedProperties: DeprecatedProperties = configPart?.getDeprecated ? configPart.getDeprecated() : {};\n    for (const propertyKey in schemaDefinition.properties || schemaDefinition) {\n        const syncRule = getReflectMetadata(configPart, propertyKey);\n        if (propertyKey === 'columns' || syncRule?.flex) {\n            if (\n                sectionPart?.type?.startsWith('ObjectPageSectionTableV2') ||\n                sectionPart?.type?.startsWith('ObjectPageSubSectionTableV2')\n            ) {\n                importFlexChangesOfTable(\n                    configParameters.flexChanges,\n                    propertyKey,\n                    configPart,\n                    importParameters,\n                    sectionPart.title,\n                    sectionPart.id\n                );\n            } else {\n                const facetId = sectionPart?.title || sectionPart?.id;\n                importFlexChanges(\n                    schemaDefinition,\n                    configPart,\n                    configParameters.flexChanges,\n                    propertyKey,\n                    facetId,\n                    elementId\n                );\n            }\n        } else if (syncRule?.manifest) {\n            importManifestSetting(\n                syncRule,\n                configParameters.pageKeys,\n                importParameters,\n                configPart,\n                propertyKey,\n                deprecatedProperties,\n                sectionPart\n            );\n        }\n    }\n}\n\n/**\n *\n * @param actionType - type of action\n * @param configActionId - id of action in config\n * @param {ActionTypeV2|string} importTypeId - type of action that was be initiated\n * @returns {string} actionId - to be used for import of flex changes\n */\nfunction getActionId(actionType: string, configActionId: string, importTypeId: string, facetId: string): string {\n    let actionId = convertActionKeyToStableId(configActionId);\n    switch (actionType) {\n        case ActionTypeV2.Form: {\n            actionId = `action::${actionId}::${facetId}::${importTypeId}`;\n            break;\n        }\n        case ActionTypeV2.OPFooter: {\n            actionId = `action::${actionId}::Determining`;\n            break;\n        }\n        case ActionTypeV2.OPToolBar: {\n            actionId = actionId.includes('sAction::')\n                ? `action::${actionId.split('sAction::')[1]}`\n                : `action::${actionId.replace(':2f', '::')}`;\n            break;\n        }\n        case ActionTypeV2.OPHeaderStandard: {\n            actionId = `${OP_STANDARD_HEADER_ACTION_PREFIX}${actionId}`;\n            break;\n        }\n        case ActionTypeV2.OPFooterStandard: {\n            actionId = `${OP_STANDARD_FOOTER_ACTION_PREFIX}${actionId}`;\n            break;\n        }\n    }\n    return actionId.replace(/@/g, '');\n}\n\n/**\n * Adds standard actions to the corresponding header/footer config\n * @param config actions config\n * @param actions existing actions definition\n */\nfunction fillStandardActions(\n    config,\n    actions: Definition,\n    importParameters: ImportObjectPageV2Parameters,\n    configParameters: ObjectPageV2ConfigParameters\n) {\n    for (const action in actions) {\n        const actionType = actions[action].$ref.split(DEFINITION_LINK_PREFIX)[1].split('<')[0];\n        if ([ActionTypeV2.OPHeaderStandard, ActionTypeV2.OPFooterStandard].includes(actionType)) {\n            const actionRef = actions[action].$ref.split('<')?.[1].split('>')[0];\n            const actionId = getActionId(actionType, action, '', '');\n            config.actions[action] = configParameters.factory.createInstance(PageTypeV2.ObjectPage, actionRef, {});\n            transferSettingsAndFlexChanges(\n                importParameters,\n                config[PropertyName.actions][action],\n                (importParameters.jsonSchema as Definition).definitions[actionRef] as Definition,\n                configParameters,\n                {},\n                actionId\n            );\n        }\n    }\n}\n\n/**\n *  Fills the action of the configuration\n * @param {ImportObjectPageV2Parameters} importParameters - object comprising all input data\n * @param {object} actionProperties - current properties' list (of action)\n * @param {object} configPart - the given part of the object page config\n * @param {ObjectPageV2ConfigParameters} configParameters - container for factory, pageKeys, flexChanges, v2Page, ObjectPageConfig\n * @param {ActionTypeV2|string} importTypeId - type of action that should be initiated\n */\nfunction fillActions(\n    importParameters: ImportObjectPageV2Parameters,\n    actionProperties: object,\n    configPart: object,\n    configParameters: ObjectPageV2ConfigParameters,\n    importTypeId: ActionTypeV2 | string,\n    facetId?: string\n): void {\n    configPart[PropertyName.actions] = {};\n    const actionType = importTypeId.split('::').pop();\n    if (configParameters.flexChanges && Object.keys(configParameters.flexChanges).length > 0) {\n        const sectionPart: SectionPartProperties = {};\n        if (facetId) {\n            sectionPart.id = facetId;\n        }\n        for (const actionProperty in actionProperties) {\n            const configActionId = convertActionKey(actionProperty);\n            const actionId = getActionId(actionType, configActionId, importTypeId, facetId);\n            if (actionId) {\n                configPart[PropertyName.actions][configActionId] = configParameters.factory.createInstance(\n                    PageTypeV2.ObjectPage,\n                    actionType\n                );\n                transferSettingsAndFlexChanges(\n                    importParameters,\n                    configPart[PropertyName.actions][configActionId],\n                    (importParameters.jsonSchema as Definition).definitions[actionType] as Definition,\n                    configParameters,\n                    sectionPart,\n                    actionId\n                );\n            }\n            if (\n                configPart[PropertyName.actions]?.[configActionId] &&\n                Object.keys(configPart[PropertyName.actions][configActionId]).length === 0\n            ) {\n                delete configPart[PropertyName.actions][configActionId];\n            }\n        }\n    }\n    fillStandardActions(configPart, actionProperties, importParameters, configParameters);\n    if (Object.keys(configPart[PropertyName.actions]).length === 0) {\n        delete configPart[PropertyName.actions];\n    }\n}\n\n/**\n *  Fills the fields of an object page form\n * @param {ImportObjectPageV2Parameters} importParameters - object comprising all input data\n * @param {sectionPartProperties} sectionPart - current properties' list of form section\n * @param fieldProperties - current properties' list (of fields)\n * @param configPart - the given part of the object page config\n * @param {ObjectPageV2ConfigParameters} configParameters - container for factory, pageKeys, flexChanges, v2Page, ObjectPageConfig\n */\nfunction fillFields(\n    importParameters: ImportObjectPageV2Parameters,\n    sectionPart: SectionPartProperties,\n    fieldProperties: object,\n    configPart: object,\n    configParameters: ObjectPageV2ConfigParameters\n): void {\n    let fieldId: string;\n    configPart[sectionPart.id]['form']['fields'] = {};\n    for (const fieldProperty in fieldProperties) {\n        fieldId = `${fieldProperty}::GroupElement`;\n        configPart[sectionPart.id]['form']['fields'][fieldProperty] = configParameters.factory.createInstance(\n            PageTypeV2.ObjectPage,\n            'Field'\n        );\n        const elementId = sectionPart.title?.includes(UIVOCABULARYALPHADOT)\n            ? `${sectionPart.id.replace(/@/g, '')}::${fieldId}`\n            : `${sectionPart.title}::${fieldId}`;\n        transferSettingsAndFlexChanges(\n            importParameters,\n            configPart[sectionPart.id]['form']['fields'][fieldProperty],\n            (importParameters.jsonSchema as Definition).definitions[DefinitionName.Field] as Definition,\n            configParameters,\n            {},\n            elementId\n        );\n        if (Object.keys(configPart[sectionPart.id]['form']['fields'][fieldProperty]).length === 0) {\n            delete configPart[sectionPart.id]['form']['fields'][fieldProperty];\n        }\n    }\n    if (Object.keys(configPart[sectionPart.id]['form']['fields']).length === 0) {\n        delete configPart[sectionPart.id]['form']['fields'];\n    }\n}\n\n/**\n * Adjusts the app schema by choosing the right table definition, depending on the table type\n * @param tableType - the type of the given table\n * @param {SectionPartProperties} sectionPart - current properties' list\n * @param schemaDefinitions - definitions' section of the app schema\n * @returns the right schema definition for the given table\n */\nfunction prepareTableSchema(\n    tableType: string,\n    sectionPart: SectionPartProperties,\n    schemaDefinitions: Definition\n): Definition {\n    let tableSchema: object;\n    if (tableType === 'TreeTable' || tableType === 'AnalyticalTable' || tableType === 'GridTable') {\n        tableSchema = schemaDefinitions[`ObjectPage${tableType}<${sectionPart.id}>`] as Definition;\n    } else if (\n        schemaDefinitions[`ObjectPageResponsiveTableWithMultiSelect<${sectionPart.id}>`] &&\n        schemaDefinitions[`ObjectPageResponsiveTableWithInlineDelete<${sectionPart.id}>`]\n    ) {\n        tableSchema = JSON.parse(\n            JSON.stringify(schemaDefinitions[`ObjectPageResponsiveTableWithMultiSelect<${sectionPart.id}>`])\n        );\n        tableSchema['properties'] = {\n            ...tableSchema['properties'],\n            ...schemaDefinitions[`ObjectPageResponsiveTableWithInlineDelete<${sectionPart.id}>`]['properties']\n        };\n    }\n    return tableSchema;\n}\n\n/**\n *  Fills the table section of the object page config\n * @param {ImportObjectPageV2Parameters} importParameters - object comprising all input data\n * @param {SectionPartProperties} sectionPart - current properties' list\n * @param {Settings} manifestSettings - object page settings section of the manifest\n * @param {object} configPart - the given part of the object page config\n * @param {ObjectPageV2ConfigParameters} configParameters - container for factory, pageKeys, flexChanges, v2Page, ObjectPageConfig\n */\nfunction fillTableInConfig(\n    importParameters: ImportObjectPageV2Parameters,\n    sectionPart: SectionPartProperties,\n    manifestSettings: Settings,\n    configPart: object,\n    configParameters: ObjectPageV2ConfigParameters\n): void {\n    const manifestKey = sectionPart.title || sectionPart.id.replace('@com.sap', 'com.sap');\n    const manifestSection = manifestSettings && manifestSettings.sections && manifestSettings.sections[manifestKey];\n\n    if (manifestSection || configParameters.flexChanges) {\n        const tableType: string = manifestSection?.tableSettings?.type || 'ResponsiveTable';\n\n        //Instantiate metadata\n        const OPtable = configParameters.factory.createInstance(PageTypeV2.ObjectPage, `ObjectPage${tableType}`, {\n            toolBar: {}\n        });\n        configPart[sectionPart.id] = configParameters.factory.createInstance(PageTypeV2.ObjectPage, sectionPart.type, {\n            table: {}\n        });\n        configPart[sectionPart.id][PropertyName.table] = OPtable;\n\n        const schemaDefinitions = (importParameters.jsonSchema as Definition).definitions;\n\n        const tableSchema = prepareTableSchema(tableType, sectionPart, schemaDefinitions);\n        //Transfer settings of (sub)section\n        transferSettingsAndFlexChanges(\n            importParameters,\n            configPart[sectionPart.id],\n            sectionPart.schema,\n            configParameters,\n            { title: sectionPart.title }\n        );\n        //Transfer settings of table\n        transferSettingsAndFlexChanges(\n            importParameters,\n            configPart[sectionPart.id][PropertyName.table],\n            tableSchema,\n            configParameters,\n            sectionPart\n        );\n        //Transfer settings of table toolbar actions\n        const toolBarActions = JSON.parse(JSON.stringify(schemaDefinitions))[\n            `Actions<${sectionPart.id}>`\n        ] as Definition;\n        if (toolBarActions?.properties) {\n            const facetId = sectionPart?.title\n                ? sectionPart.title.replace(/@/g, '::').replace(/::com/g, 'com')\n                : sectionPart?.id?.replace(/@/g, '::').replace(/::com/g, 'com');\n            fillActions(\n                importParameters,\n                toolBarActions.properties,\n                configPart[sectionPart.id][PropertyName.table]['toolBar'],\n                configParameters,\n                ActionTypeV2.OPToolBar,\n                facetId\n            );\n        }\n        if (Object.keys(configPart[sectionPart.id][PropertyName.table]['toolBar']).length === 0) {\n            delete configPart[sectionPart.id][PropertyName.table]['toolBar'];\n        }\n    }\n}\n\n/**\n * Fills custom columns in a V2 object page config JSON\n * @param {ImportObjectPageV2Parameters} importParameters - object comprising all input data\n * @param {string} escapedSectionId - escaped version of the section ID\n * @param {string} sectionTitle - title of current section, if available\n * @param {object} configPart - the given part of the object page config\n * @param {SapUiAppPageV2} v2Page - v2 page from manifest.\n */\nfunction fillCustomColumnsInConfig(\n    importParameters: ImportObjectPageV2Parameters,\n    escapedSectionId: string,\n    configPart: object,\n    v2Page: v2.SapUiAppPageV2\n) {\n    const customColumnSchemaProp = (\n        (importParameters.jsonSchema as Definition).definitions[escapedSectionId] as Definition\n    ).properties.custom as Definition;\n    const customColumnTarget = customColumnSchemaProp\n        ? getTargetFromCustomColumnRef(customColumnSchemaProp.$ref)\n        : undefined;\n    if (customColumnTarget) {\n        const objectPageSectionData: ObjectPageSectionData = {\n            key: escapedSectionId.replace('@', ''),\n            target: customColumnTarget\n        };\n        addFragments(\n            configPart[escapedSectionId],\n            importParameters.manifest,\n            v2Page,\n            PageTypeV2.ObjectPage,\n            importParameters.fragments,\n            objectPageSectionData\n        );\n    }\n}\n\n/**\n *  Fills the sections and subsections of the object page config (recursive function)\n * @param {ImportObjectPageV2Parameters} importParameters  - object comprising all input data\n * @param {sectionPartProperties} sectionPart - current properties' list of chart section\n * @param {Settings} manifestSettings - object page settings section of the manifest\n * @param {object} configPart - the given part of the object page config\n * @param {ObjectPageV2ConfigParameters} configParameters - container for factory, pageKeys, flexChanges, v2Page, ObjectPageConfig\n */\nfunction fillChartSection(\n    importParameters: ImportObjectPageV2Parameters,\n    sectionPart: SectionPartProperties,\n    manifestSettings: Settings,\n    configPart: object,\n    configParameters: ObjectPageV2ConfigParameters\n) {\n    const manifestKey = sectionPart.id.replace('@com.sap', 'com.sap');\n    const manifestSection = manifestSettings && manifestSettings.sections && manifestSettings.sections[manifestKey];\n    configPart[sectionPart.id] = configParameters.factory.createInstance(PageTypeV2.ObjectPage, sectionPart.type, {\n        chart: {}\n    });\n    configPart[sectionPart.id][PropertyName.chart] = configParameters.factory.createInstance(\n        PageTypeV2.ObjectPage,\n        'ObjectPageChart'\n    );\n    if (manifestSection || configParameters.flexChanges) {\n        transferSettingsAndFlexChanges(\n            importParameters,\n            configPart[sectionPart.id],\n            sectionPart.schema,\n            configParameters,\n            { title: sectionPart.title }\n        );\n        transferSettingsAndFlexChanges(\n            importParameters,\n            configPart[sectionPart.id][PropertyName.chart],\n            (importParameters.jsonSchema as Definition).definitions[DefinitionName.ObjectPageChart] as Definition,\n            configParameters,\n            sectionPart\n        );\n    }\n}\n\n/**\n * Fills the form section of the object page config\n * @param {ImportObjectPageV2Parameters} importParameters - object comprising all input data\n * @param {sectionPartProperties} sectionPart - current properties' list of form section\n * @param {object} configPart - the given part of the object page config\n * @param {ObjectPageV2ConfigParameters} configParameters - container for factory, pageKeys, flexChanges, v2Page, ObjectPageConfig\n */\nfunction fillFormSection(\n    importParameters: ImportObjectPageV2Parameters,\n    sectionPart: SectionPartProperties,\n    configPart: object,\n    configParameters: ObjectPageV2ConfigParameters\n) {\n    const formId = sectionPart.schema['properties']['form']['$ref'].split('SectionForm')[1];\n    configPart[sectionPart.id] = configParameters.factory.createInstance(PageTypeV2.ObjectPage, sectionPart.type, {\n        form: {}\n    });\n    if (configParameters.flexChanges) {\n        transferSettingsAndFlexChanges(\n            importParameters,\n            configPart[sectionPart.id],\n            sectionPart.schema,\n            configParameters,\n            { title: sectionPart.title }\n        );\n    }\n    const formActions = (importParameters.jsonSchema as Definition).definitions[\n        `SectionActions${formId}`\n    ] as Definition;\n    const facetId = sectionPart?.title\n        ? sectionPart.title.replace(/@/g, '::').replace(/::com/g, 'com')\n        : sectionPart?.id?.replace(/@/g, '::').replace(/::com/g, 'com');\n    if (formActions?.properties) {\n        fillActions(\n            importParameters,\n            formActions.properties,\n            configPart[sectionPart.id]['form'],\n            configParameters,\n            ActionTypeV2.Form,\n            facetId\n        );\n    }\n    const formFields = (importParameters.jsonSchema as Definition).definitions[`SectionFields${formId}`] as Definition;\n    if (formFields?.properties) {\n        fillFields(importParameters, sectionPart, formFields.properties, configPart, configParameters);\n    }\n    if (Object.keys(configPart[sectionPart.id]['form']).length === 0) {\n        delete configPart[sectionPart.id]['form'];\n    }\n    if (Object.keys(configPart[sectionPart.id]).length === 0) {\n        delete configPart[sectionPart.id];\n    }\n}\n\n/**\n *  Fills the subsection of the object page config\n * @param {ImportObjectPageV2Parameters} importParameters - object comprising all input data\n * @param {sectionPartProperties} sectionPart - current properties' list of subsection\n * @param {Settings} manifestSettings - object page settings section of the manifest\n * @param {object} configPart - the given part of the object page config\n * @param {ObjectPageV2ConfigParameters} configParameters - container for factory, pageKeys, flexChanges, v2Page, ObjectPageConfig\n */\nfunction fillSubSection(\n    importParameters: ImportObjectPageV2Parameters,\n    sectionPart: SectionPartProperties,\n    manifestSettings: Settings,\n    configPart: object,\n    configParameters: ObjectPageV2ConfigParameters\n) {\n    configPart[sectionPart.id] = configParameters.factory.createInstance(PageTypeV2.ObjectPage, sectionPart.type, {\n        subsections: {}\n    });\n    if (configParameters.flexChanges) {\n        transferSettingsAndFlexChanges(\n            importParameters,\n            configPart[sectionPart.id],\n            sectionPart.schema,\n            configParameters,\n            sectionPart\n        );\n    }\n    let currentSchemaSection;\n    const schemaProperties = sectionPart.schema.properties;\n    if ((schemaProperties?.subsections as Definition)?.properties) {\n        currentSchemaSection = (schemaProperties.subsections as Definition).properties;\n    } else {\n        currentSchemaSection = schemaProperties;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    fillSectionsInConfig(\n        importParameters,\n        currentSchemaSection,\n        manifestSettings,\n        configPart[sectionPart.id]['subsections'],\n        configParameters\n    );\n    if (Object.keys(configPart[sectionPart.id]['subsections']).length < 1) {\n        delete configPart[sectionPart.id]['subsections'];\n    }\n}\n\n/**\n * Fills the sections and subsections of the object page config (recursive function)\n * @param {ImportObjectPageV2Parameters} importParameters - object comprising all input data\n * @param {object} sectionProperties - current properties' list (of sections or subsections)\n * @param {Settings} manifestSettings - object page settings section of the manifest\n * @param {object} configPart - the given part of the object page config\n * @param {ObjectPageV2ConfigParameters} configParameters - container for factory, pageKeys, flexChanges, v2Page, ObjectPageConfig.\n */\nfunction fillSectionsInConfig(\n    importParameters: ImportObjectPageV2Parameters,\n    sectionProperties: object,\n    manifestSettings: Settings,\n    configPart: object,\n    configParameters: ObjectPageV2ConfigParameters\n): void {\n    const appSchemaDefinitions = (importParameters.jsonSchema as Definition).definitions;\n    for (const sectionId in sectionProperties) {\n        const escapedSectionId = sectionId.replace(/\\/@/g, '::');\n        const sectionPart: SectionPartProperties = {\n            id: escapedSectionId,\n            type: getSectionType(sectionProperties[sectionId]),\n            schema: sectionProperties[sectionId],\n            title: getSectionTitle(sectionProperties[sectionId], importParameters.jsonSchema)\n        };\n        if (sectionPart.schema['$ref'] && sectionPart.type) {\n            switch (sectionPart.type) {\n                case SectionTypeV2.SectionTable:\n                case SectionTypeV2.SubSectionTable: {\n                    sectionPart.schema = appSchemaDefinitions[`${sectionPart.type}<${sectionId}>`] as Definition;\n                    fillTableInConfig(importParameters, sectionPart, manifestSettings, configPart, configParameters);\n                    // Custom column ref\n                    fillCustomColumnsInConfig(importParameters, escapedSectionId, configPart, configParameters.v2Page);\n                    break;\n                }\n                case SectionTypeV2.SectionChart:\n                case SectionTypeV2.SubSectionChart: {\n                    // Section without subsections\n                    sectionPart.schema = appSchemaDefinitions[`${sectionPart.type}<${sectionId}>`] as Definition;\n                    fillChartSection(importParameters, sectionPart, manifestSettings, configPart, configParameters);\n                    break;\n                }\n                case SectionTypeV2.SectionForm:\n                case SectionTypeV2.SubSectionForm: {\n                    sectionPart.schema = appSchemaDefinitions[`${sectionPart.type}<${sectionId}>`] as Definition;\n                    fillFormSection(importParameters, sectionPart, configPart, configParameters);\n                    break;\n                }\n                case SectionTypeV2.Section:\n                case SectionTypeV2.SectionAddress:\n                case SectionTypeV2.SubSectionAddress:\n                case SectionTypeV2.SectionContact:\n                case SectionTypeV2.SubSectionContact:\n                case SectionTypeV2.SubSection: {\n                    // Section with subsections\n                    sectionPart.schema = appSchemaDefinitions[`${sectionPart.type}<${sectionId}>`] as Definition;\n                    fillSubSection(importParameters, sectionPart, manifestSettings, configPart, configParameters);\n                    break;\n                }\n            }\n        } else if (sectionPart.schema.properties?.['subsections']) {\n            sectionPart.schema = appSchemaDefinitions[`${sectionPart.type}<${sectionId}>`] as Definition;\n            fillSubSection(importParameters, sectionPart, manifestSettings, configPart, configParameters);\n        }\n    }\n}\n\n/**\n * Fills the custom sections in the v2 object page config\n * @param {object} customSections - list of custom sections, as defined in manifest\n * @param {ObjectPageConfig} objectPageConfig - the object page configuration (JSON)\n * @param {ObjectPageV2ConfigParameters} configParameters - object comprising input for filling the config\n * @param schemaDefinitions - definitions in the object page schema\n * @param {ImportObjectPageV2Parameters} importParameters  - object comprising API input data\n */\nfunction fillCustomSectionsInConfig(\n    customSections: object,\n    objectPageConfig: v2.ObjectPageConfigV2,\n    configParameters: ObjectPageV2ConfigParameters,\n    schemaDefinitions: {\n        [key: string]: DefinitionOrBoolean;\n    },\n    importParameters: ImportObjectPageV2Parameters\n): void {\n    if (Object.keys(customSections).length > 0) {\n        objectPageConfig.sections.custom = [];\n        for (const sectionId in customSections) {\n            const customSection =\n                'fragmentName' in customSections[sectionId]\n                    ? configParameters.factory.createInstance(PageTypeV2.ObjectPage, 'ObjectPageCustomSectionFragment')\n                    : configParameters.factory.createInstance(PageTypeV2.ObjectPage, 'ObjectPageCustomSectionView');\n            const customSectionDefinition =\n                schemaDefinitions[\n                    'fragmentName' in customSections[sectionId]\n                        ? 'ObjectPageCustomSectionFragment'\n                        : 'ObjectPageCustomSectionView'\n                ];\n            transferSettingsAndFlexChanges(\n                importParameters,\n                customSection,\n                customSectionDefinition as Definition,\n                configParameters,\n                { id: sectionId }\n            );\n            objectPageConfig.sections.custom.push(customSection);\n        }\n    }\n}\n\n/**\n * Fill properties of object page confg based on manifest settings\n * @param {ImportObjectPageV2Parameters} importParameters  - object comprising API input data\n * @param {ObjectPageV2ConfigParameters} configParameters - object comprising input for filling the config\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @returns {ObjectPageConfig} - the object page configuration (JSON)\n */\nfunction fillConfig(\n    importParameters: ImportObjectPageV2Parameters,\n    configParameters: ObjectPageV2ConfigParameters\n): v2.ObjectPageConfigV2 {\n    const objectPageConfig: v2.ObjectPageConfigV2 = configParameters.factory.createPageInstance(PageTypeV2.ObjectPage);\n\n    // Transfer page information\n    transferSettingsAndFlexChanges(\n        importParameters,\n        objectPageConfig,\n        importParameters.jsonSchema['properties'],\n        configParameters\n    );\n\n    // Transfer header information\n    objectPageConfig.header = configParameters.factory.createInstance(\n        PageTypeV2.ObjectPage,\n        DefinitionName.ObjectPageHeader\n    );\n    const definitions = (importParameters.jsonSchema as Definition).definitions;\n    const schemaDefinition = definitions[DefinitionName.ObjectPageHeader]\n        ? definitions[DefinitionName.ObjectPageHeader]\n        : definitions['ObjectPageHeader<GenericActions>'];\n    transferSettingsAndFlexChanges(\n        importParameters,\n        objectPageConfig.header,\n        schemaDefinition as Definition,\n        configParameters\n    );\n    const headerAction = definitions[DefinitionName.HeaderActions] as Definition;\n    if (headerAction) {\n        fillActions(\n            importParameters,\n            headerAction.properties,\n            objectPageConfig.header,\n            configParameters,\n            ActionTypeV2.Header\n        );\n    }\n    objectPageConfig.footer = {};\n    const footerAction = definitions[DefinitionName.FooterActions] as Definition;\n    if (footerAction) {\n        fillActions(\n            importParameters,\n            footerAction.properties,\n            objectPageConfig.footer,\n            configParameters,\n            ActionTypeV2.OPFooter\n        );\n    }\n\n    // Transfer Layout information\n    objectPageConfig.layout = configParameters.factory.createInstance(PageTypeV2.ObjectPage, 'ObjectPageLayout');\n    transferSettingsAndFlexChanges(\n        importParameters,\n        objectPageConfig.layout,\n        definitions[DefinitionName.ObjectPageLayout] as Definition,\n        configParameters\n    );\n    if (Object.keys(objectPageConfig.layout).length === 0) {\n        delete objectPageConfig.layout;\n    }\n\n    // Fill sections and subsections\n    objectPageConfig.sections = {};\n    const sections = definitions[DefinitionName.Sections] as Definition;\n    if (sections) {\n        const manifestSettings = configParameters.v2Page.component?.settings;\n        fillSectionsInConfig(\n            importParameters,\n            sections.properties,\n            manifestSettings,\n            objectPageConfig.sections,\n            configParameters\n        );\n    }\n\n    // Find custom sections\n    const customSections = findCustomSectionExtensions(importParameters.manifest, importParameters.entitySet);\n    fillCustomSectionsInConfig(customSections, objectPageConfig, configParameters, definitions, importParameters);\n\n    return objectPageConfig;\n}\n\n/**\n * Creates the configuration (file content) for a V2 object page\n * @param {ImportObjectPageV2Parameters} importParameters  - object comprising all input data\n *\n * @returns {ObjectPageConfig} - the object page configuration (JSON)\n */\nexport function createObjectPageConfigV2(\n    importParameters: ImportObjectPageV2Parameters\n): v2.ObjectPageConfigV2 | undefined {\n    // Initialize i18next\n    initI18n();\n\n    const v2Pages = getV2Pages(importParameters);\n    if (!v2Pages) {\n        return;\n    }\n    const entitySet = importParameters.entitySet;\n    const pageKeys: string[] = [];\n    const v2Page: v2.SapUiAppPageV2 = findObjectPageV2(v2Pages, importParameters.entitySet, pageKeys);\n    checkV2Page(v2Page, importParameters.logger, entitySet);\n    if (!v2Page) {\n        return;\n    }\n    const flexChangesForTransfer = prepareFlexChanges(importParameters.flex, entitySet);\n\n    const factory = new Factory();\n\n    //Fill config.json with manifest settings and flex changes\n    return fillConfig(importParameters, { pageKeys, flexChanges: flexChangesForTransfer, v2Page, factory });\n}\n", "import type { v2, ImportAllConfigsParameters, ImportOverviewPageV2Parameters } from '@sap/ux-specification-types';\nimport { FioriElementsVersion, PageTypeV2, ManifestSection, SchemaType } from '@sap/ux-specification-types';\nimport { AppProvider } from '../../../common/appProvider';\nimport { transferSettingsOfObject } from '../common';\nimport { createOverviewPageConfig } from '../pages/overviewPage';\nimport { AppSettings } from '../../application';\nimport { getSchemaFilePath, generatePageId } from '../../../common';\n\nexport class V2OvpProvider extends AppProvider {\n    public constructor(importParameters: ImportAllConfigsParameters) {\n        const pages: v2.Pages = {};\n        const sapOvp = importParameters.manifest[ManifestSection.ovp];\n        const appSettings = new AppSettings();\n        const schemaFile = getSchemaFilePath(SchemaType.Application);\n        transferSettingsOfObject(\n            appSettings,\n            importParameters.manifest,\n            importParameters.appSchemas[schemaFile.filename]['definitions']['AppSettings'],\n            undefined\n        );\n        const jsonSchema: string = Object.keys(importParameters.appSchemas).find((element) =>\n            element.includes(PageTypeV2.OverviewPage)\n        );\n        const parameters: ImportOverviewPageV2Parameters = {\n            manifest: importParameters.manifest,\n            jsonSchema: importParameters.appSchemas[jsonSchema]\n        };\n        const page: v2.Page = {\n            pageType: PageTypeV2.OverviewPage,\n            config: createOverviewPageConfig(parameters),\n            entitySet: sapOvp.globalFilterEntitySet\n        };\n        const id = generatePageId(page.pageType, page.entitySet);\n        pages[id] = page;\n        super(\n            importParameters.manifest,\n            importParameters.appSchemas,\n            id,\n            pages,\n            FioriElementsVersion.v2,\n            appSettings,\n            importParameters.logger\n        );\n    }\n}\n", "import type { Manifest } from '@sap/ux-specification-types';\nimport { v2, ManifestSection, PageTypeV2 } from '@sap/ux-specification-types';\nimport { getReflectMetadata } from '../../../common/decoration/decorators';\nimport { ensureManifestSectionByPathV2 } from '../../export/manifest';\nimport { MetadataInstanceFactoryV2 as Factory } from '../../export/factory';\nimport type { MetadataInstanceInterface } from '../../../common/decoration/factory';\nimport { assignReflectMetadataRules } from '../../export/export';\nimport { importProperty } from '../../../common';\nimport type { ImportOverviewPageV2Parameters } from '../../../..';\n\n/**\n * Transfers the card settings from manifest to config\n * @param propertyKey - Key of the property or setting\n * @param manifestSection - Section in manifest.json\n * @param configPart - Part of the config JSON\n * @param pathHierarchy - Parts of the path or breadcrumbs\n */\nfunction transferCardSettings(\n    propertyKey: string,\n    manifestSection: object,\n    configPart: { [key: string]: any },\n    pathHierarchy?: string[]\n): void {\n    if (propertyKey === 'settings') {\n        switch (manifestSection['template']) {\n            case 'sap.ovp.cards.charts.analytical':\n                configPart[pathHierarchy[0]][v2.CardSettingsType.analyticalCardSettings] = manifestSection[propertyKey];\n                break;\n            case 'sap.ovp.cards.v4.charts.analytical':\n                configPart[pathHierarchy[0]][v2.CardSettingsType.analyticalCardSettingsv4] =\n                    manifestSection[propertyKey];\n                break;\n            case 'sap.ovp.cards.list':\n            case 'sap.ovp.cards.v4.list':\n                configPart[pathHierarchy[0]][v2.CardSettingsType.listCardSettings] = manifestSection[propertyKey];\n                break;\n            case 'sap.ovp.cards.stack':\n                configPart[pathHierarchy[0]][v2.CardSettingsType.stackCardSettings] = manifestSection[propertyKey];\n                break;\n            case 'sap.ovp.cards.linklist':\n            case 'sap.ovp.cards.v4.linklist':\n                configPart[pathHierarchy[0]][v2.CardSettingsType.linkListCardSettings] = manifestSection[propertyKey];\n                break;\n            case 'sap.ovp.cards.table':\n            case 'sap.ovp.cards.v4.table':\n                configPart[pathHierarchy[0]][v2.CardSettingsType.tableCardSettings] = manifestSection[propertyKey];\n                break;\n            default:\n                configPart[pathHierarchy[0]].settings = manifestSection[propertyKey];\n                break;\n        }\n    } else {\n        configPart[pathHierarchy[0]][propertyKey] = manifestSection[propertyKey];\n    }\n}\n\n/**\n * Handles a list of properties of a given part of the schema, transfers the relevant property values or settings from manifest to config.\n * @param configPart - Part of the config JSON\n * @param manifest - manifest.json or app descriptor\n * @param appSchema - app specific JSON schema\n * @param pathHierarchy - Parts of the path or breadcrumbs\n */\nfunction transferSettingsOfObject(\n    configPart: { [key: string]: any },\n    manifest: Manifest,\n    appSchema: object,\n    pathHierarchy?: string[]\n): void {\n    for (const propertyKey in appSchema) {\n        const syncRule = getReflectMetadata(configPart, propertyKey);\n        if (syncRule?.manifest) {\n            const path = syncRule.manifest.path([...pathHierarchy, propertyKey]);\n            const manifestSection = ensureManifestSectionByPathV2(manifest, path);\n            if (Object.prototype.hasOwnProperty.call(manifestSection, propertyKey)) {\n                if (pathHierarchy.length !== 0) {\n                    transferCardSettings(propertyKey, manifestSection, configPart, pathHierarchy);\n                } else {\n                    importProperty(syncRule, manifestSection, propertyKey, configPart);\n                }\n            }\n        }\n    }\n}\n\n/**\n * OVP: Transfers all settings from manifest to config\n * @param pageConfig - the OVP configuration (JSON)\n * @param manifest  - manifest.json or app descriptor\n * @param appSchema - app specific JSON schema\n * @param factory - Metadata factory\n */\nfunction addSettings(\n    pageConfig: v2.OverviewPageConfigV2,\n    manifest: Manifest,\n    appSchema: object,\n    factory: MetadataInstanceInterface\n): void {\n    transferSettingsOfObject(pageConfig, manifest, appSchema['properties'], []);\n\n    pageConfig.cards = {};\n\n    Object.keys(manifest[ManifestSection.ovp]['cards']).forEach((newKey) => {\n        const cardTemplate = manifest[ManifestSection.ovp]['cards'][newKey].template;\n        const cardType = v2.cardTemplateTypeMap[cardTemplate];\n\n        //instantiate Card:\n        pageConfig.cards[newKey] = assignReflectMetadataRules(factory, cardType, {}, 'CustomCard') as v2.CardType;\n\n        pageConfig.cards = assignReflectMetadataRules(factory, cardType, pageConfig.cards, 'CustomCard') as {\n            [k: string]: v2.CardType;\n        };\n\n        //transfer settings:\n        transferSettingsOfObject(pageConfig.cards, manifest, manifest[ManifestSection.ovp]['cards'][newKey], [newKey]);\n    });\n}\n\n/**\n * Creates the configuration (file content) for an overview page\n * @param {object} manifest  - manifest of the app\n * @param {object} jsonSchema - app specific JSON schema\n *\n * @returns {object} - the OVP configuration (JSON)\n */\nexport function createOverviewPageConfig(importParameters: ImportOverviewPageV2Parameters): object {\n    const factory = new Factory();\n    //Instantiate Page\n    const config = factory.createPageInstance(PageTypeV2.OverviewPage);\n\n    if (importParameters.jsonSchema) {\n        addSettings(config, importParameters.manifest, importParameters.jsonSchema, factory);\n    }\n    return config;\n}\n", "// Note: the main functions or entry points reside in ./exportPage.ts\nimport merge from 'deepmerge';\nimport type { ObjectPageCustomSectionFragment, ObjectPageCustomSectionView } from './controls';\nimport { exportCustomColumnsToFragment, getCustomColumnPath, deleteColumnFromFragment } from './controls';\nimport type { NextDefinition } from '../../common';\nimport {\n    getReflectMetadata,\n    getChildId,\n    convertSectionId,\n    getNextTargetDefinition,\n    DEFINITION_LINK_PREFIX,\n    arrayCombineMerge,\n    deleteEmptyStructure,\n    fillFlexChangeContent,\n    getTargetFromCustomColumnRef\n} from '../../common';\nimport { getViewExtensionsPath } from '../application';\nimport { ensureManifestSectionByPathV2, getManifestSectionByPathV2 } from './manifest';\nimport { isAssociatedCustomSection } from '../import/utils';\nimport type { MetadataInstanceInterface } from '../../common/decoration/factory';\nimport type { TransferParameterTypeV2 } from '../types';\nimport type { Definition } from 'typescript-json-schema';\nimport type {\n    Manifest,\n    ExportHandlerFunction,\n    ExportResults,\n    ObjectPageSectionData,\n    SapOvp,\n    SyncRule\n} from '@sap/ux-specification-types';\nimport {\n    v2,\n    PropertyName,\n    ViewTemplateType,\n    ManifestSection,\n    PageTypeV2,\n    FacetTitlePrefix\n} from '@sap/ux-specification-types';\n\nconst exceptionList = ['colorPalette', 'tabs'];\n\n/**\n * Create missing card from the manifest\n * @param key - card name\n * @param ovp - OVP section of manifest, to be updated\n */\nfunction createCard(key: string, ovp: SapOvp): void {\n    if (!ovp.cards) {\n        ovp.cards = {};\n    }\n    if (!(key in ovp.cards)) {\n        ovp.cards[key] = {\n            template: ''\n        };\n    }\n}\n\n/**\n * Recursive function that searches for next avaialble id by increasing number by 1.\n * @param {boolean} sectionIds All ids in use.\n * @param {string} candidateId Candidate id to check if it is available.\n * @return {string} Id string.\n */\nfunction findAvailableId(sectionIds: string[], candidateId: string): string {\n    if (sectionIds.includes(candidateId)) {\n        const idParts = candidateId.split('|');\n        if (idParts.length === 3) {\n            idParts.push('1');\n        } else {\n            idParts[3] = (parseInt(idParts[3]) + 1).toString();\n        }\n        return findAvailableId(sectionIds, idParts.join('|'));\n    }\n    return candidateId;\n}\n\n/**\n * Private recursive function that traverses the content of the current object. It reads decorators and fills manifest entries and flex changes\n * @param configObject - current object to traverse\n * @param exportResults - object with all collected manifest entries and flex changes\n * @param jsonSchema - application specific schema\n * @param targetDefinition - the current entry point or definition in the app schema\n * @param {MetadataInstanceInterface} factory - factory for creating metadata instances\n * @param pathHierarchy -  elements of the path indicating the hierarchical level\n */\nexport function transferManifestEntriesOVP(\n    configObject: { [key: string]: any },\n    exportResults: ExportResults,\n    jsonSchema: object,\n    targetDefinition: object,\n    factory: MetadataInstanceInterface,\n    pathHierarchy?: string[]\n): void {\n    if (targetDefinition) {\n        if (targetDefinition['properties']) {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            processProperties(\n                configObject,\n                exportResults,\n                jsonSchema,\n                targetDefinition['properties'],\n                factory,\n                pathHierarchy\n            );\n        } else if (targetDefinition['additionalProperties']) {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            processProperties(\n                configObject,\n                exportResults,\n                jsonSchema,\n                targetDefinition['additionalProperties'],\n                factory,\n                pathHierarchy\n            );\n        }\n    }\n}\n\n/**\n * Assign sync rules to {currentObject}\n * @param {string} structureName - name of the complex structure in schema\n * @param {object} currentObject - the given part of the configuration\n * @param {string} defaultTypeName - name of the default type that shall be taken if no class is registered for structureName\n */\nexport function assignReflectMetadataRules(\n    factory: MetadataInstanceInterface,\n    structureName: string,\n    currentObject: object,\n    defaultTypeName: string\n): object {\n    return factory.createInstance(PageTypeV2.OverviewPage, defaultTypeName, currentObject, structureName);\n}\n\ntype ProcessDefinitionParams = {\n    pathHierarchy: string[];\n    propertyList: object;\n    appSchema: Definition;\n    currentObject: object;\n    configObject: { [key: string]: any };\n    factory: MetadataInstanceInterface;\n    exportResults: ExportResults;\n};\n\nfunction processAnyOfDefinitionsOfOVP(params: ProcessDefinitionParams): object {\n    params.pathHierarchy.pop();\n    let newConfigObject = params.currentObject;\n    for (const anyOfKey in params.propertyList['anyOf']) {\n        if (params.propertyList['anyOf'][anyOfKey].$ref) {\n            const definitionArray = params.propertyList['anyOf'][anyOfKey].$ref.split(DEFINITION_LINK_PREFIX);\n            const nextTargetDefinition = params.appSchema['definitions'][definitionArray[definitionArray.length - 1]];\n            const cardSettingsType = params.pathHierarchy[1];\n            params.currentObject = params.configObject[cardSettingsType];\n            newConfigObject = assignReflectMetadataRules(\n                params.factory,\n                cardSettingsType,\n                params.currentObject,\n                'CustomCard'\n            );\n            transferManifestEntriesOVP(\n                newConfigObject,\n                params.exportResults,\n                params.appSchema,\n                nextTargetDefinition as Definition,\n                params.factory,\n                [...params.pathHierarchy]\n            );\n        } else if (typeof params.propertyList['anyOf'][anyOfKey] === 'object') {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            processProperties(\n                params.configObject,\n                params.exportResults,\n                params.appSchema,\n                params.propertyList['anyOf'][anyOfKey].properties,\n                params.factory,\n                [...params.pathHierarchy, 'anyOfObject']\n            );\n        }\n    }\n    return newConfigObject;\n}\n\nfunction checkSyncRuleForExport(\n    exportHandler: boolean | ExportHandlerFunction,\n    manifestSection: object,\n    configObject: { [key: string]: any },\n    key: string,\n    currentObject: object\n) {\n    if (exportHandler && typeof exportHandler === 'function') {\n        exportHandler(manifestSection, configObject, key);\n    } else if (typeof currentObject === 'object' && !exceptionList.includes(key)) {\n        // colorPalette is an exception as it can contain anything as per our schema, so just replace the object\n        manifestSection[key] = merge(manifestSection[key] || {}, currentObject || {}, {\n            arrayMerge: arrayCombineMerge\n        });\n    } else {\n        manifestSection[key] = currentObject;\n    }\n}\n\n/**\n * Transfer manifest settings from config to manifest\n * @param syncRule - metadata rule used for import and export\n * @param pathHierarchy -  elements of the path indicating the hierarchical level\n * @param key\n * @param exportResults - overall result list, to be updated\n * @param currentObject\n * @param configObject\n */\nfunction transferToManifest(\n    syncRule: SyncRule,\n    pathHierarchy: string[],\n    key: string,\n    exportResults: ExportResults,\n    currentObject: object,\n    configObject: { [key: string]: any }\n) {\n    const path = syncRule.manifest.path([...pathHierarchy, key]);\n    const manifestSection = ensureManifestSectionByPathV2(exportResults.manifest, path);\n    if (key in v2.CardSettingsType || key === 'settings') {\n        manifestSection['settings'] = merge(manifestSection['settings'] || {}, currentObject || {}, {\n            arrayMerge: arrayCombineMerge\n        });\n    } else if (currentObject !== undefined) {\n        const exportHandler = syncRule.manifest.export;\n        if (exportHandler !== false) {\n            checkSyncRuleForExport(exportHandler, manifestSection, configObject, key, currentObject);\n        }\n    } else if (manifestSection[key] !== undefined) {\n        delete manifestSection[key];\n    }\n}\n\nfunction transferCards(\n    currentObject: object,\n    appSchema: Definition,\n    factory: MetadataInstanceInterface,\n    exportResults: ExportResults\n) {\n    Object.keys(currentObject).forEach((cardKey) => {\n        const cardType = currentObject[cardKey].template;\n        //Determine target defintion\n        let targetDefinition;\n        if (!Object.values(v2.CardTemplateType).includes(cardType)) {\n            targetDefinition = ['CustomCard'];\n        } else {\n            targetDefinition = Object.keys(appSchema.definitions).filter((definition) => {\n                const template = (appSchema.definitions[definition] as Definition).properties?.template as Definition;\n                if (template?.enum) {\n                    return template.enum.indexOf(currentObject[cardKey].template) > -1;\n                } else if (template?.const) {\n                    return template.const === currentObject[cardKey].template;\n                }\n            });\n        }\n        //Get metadata\n        currentObject[cardKey] = assignReflectMetadataRules(\n            factory,\n            targetDefinition[0],\n            currentObject[cardKey],\n            'CustomCard'\n        );\n        createCard(cardKey, exportResults['manifest'][ManifestSection.ovp]);\n        transferManifestEntriesOVP(\n            currentObject[cardKey],\n            exportResults,\n            appSchema,\n            appSchema.definitions[targetDefinition[0]] as Definition,\n            factory,\n            [cardKey]\n        );\n    });\n    //check for deletions:\n    Object.keys(exportResults.manifest[ManifestSection.ovp].cards).forEach((manifestCard) => {\n        if (!currentObject[manifestCard]) {\n            delete exportResults.manifest[ManifestSection.ovp].cards[manifestCard];\n        }\n    });\n}\n\nfunction exportOfObject(params: ProcessDefinitionParams, key: string, factory: MetadataInstanceInterface): void {\n    if (key === 'cards') {\n        //inserts and updates:\n        transferCards(params.currentObject, params.appSchema, factory, params.exportResults);\n    } else if (params.propertyList[key].$ref) {\n        const definitionArray = params.propertyList[key].$ref.split(DEFINITION_LINK_PREFIX);\n        const nextTargetDefinition = params.appSchema.definitions[definitionArray[definitionArray.length - 1]];\n        params.currentObject = assignReflectMetadataRules(\n            params.factory,\n            key,\n            params.currentObject,\n            key === 'settings' ? 'CustomCard' : ''\n        );\n        transferManifestEntriesOVP(\n            params.currentObject,\n            params.exportResults,\n            params.appSchema,\n            nextTargetDefinition as Definition,\n            factory,\n            [...params.pathHierarchy, key]\n        );\n    } else if (params.propertyList[key].anyOf) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        processProperties(\n            params.configObject,\n            params.exportResults,\n            params.appSchema,\n            params.propertyList[key],\n            factory,\n            [...params.pathHierarchy, key, 'anyOf']\n        );\n    } else if (params.propertyList[key]['properties'] !== undefined) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        processProperties(\n            params.configObject,\n            params.exportResults,\n            params.appSchema,\n            params.propertyList[key].properties,\n            params.factory,\n            [...params.pathHierarchy, key, 'objectProperties']\n        );\n    }\n}\n\n/**\n * Recursive function that transfers the content of a list of properties of a configuration to the overall exportResults\n * @param configObject - the given part of the configuration\n * @param exportResults - overall result list, to be updated\n * @param appSchema - app-specific JSON schema\n * @param propertyList - current property list of the config (properties or additional properties)\n * @param {MetadataInstanceInterface} factory - factory for creating metadata instances\n * @param pathHierarchy -  elements of the path indicating the hierarchical level\n */\nfunction processProperties(\n    configObject: { [key: string]: any },\n    exportResults: ExportResults,\n    appSchema: Definition,\n    propertyList: object,\n    factory: MetadataInstanceInterface,\n    pathHierarchy?: string[]\n): void {\n    let isAnyOfObject = false;\n    let isObjectProperty = false;\n\n    for (const key in propertyList) {\n        let currentObject = configObject[key];\n        let syncRule = getReflectMetadata(configObject, key);\n\n        if (pathHierarchy[pathHierarchy.length - 1] === 'anyOfObject') {\n            isAnyOfObject = true;\n            pathHierarchy.pop();\n        }\n        if (isAnyOfObject) {\n            currentObject = configObject[pathHierarchy[pathHierarchy.length - 1]][key];\n            syncRule = getReflectMetadata(configObject, pathHierarchy[pathHierarchy.length - 1]);\n        }\n\n        if (pathHierarchy[pathHierarchy.length - 1] === 'objectProperties') {\n            isObjectProperty = true;\n            pathHierarchy.pop();\n        }\n        if (isObjectProperty) {\n            currentObject = configObject[pathHierarchy[pathHierarchy.length - 1]][key];\n            syncRule = getReflectMetadata(configObject, pathHierarchy[pathHierarchy.length - 1]);\n        }\n\n        const processDefinitionParams: ProcessDefinitionParams = {\n            pathHierarchy,\n            propertyList,\n            appSchema,\n            currentObject,\n            configObject,\n            factory,\n            exportResults\n        };\n        if (pathHierarchy[pathHierarchy.length - 1] === 'anyOf') {\n            currentObject = processAnyOfDefinitionsOfOVP(processDefinitionParams);\n        }\n        if (syncRule?.manifest) {\n            transferToManifest(syncRule, pathHierarchy, key, exportResults, currentObject, configObject);\n        }\n        if (currentObject && typeof currentObject === 'object' && propertyList[key]) {\n            exportOfObject(processDefinitionParams, key, factory);\n        }\n    }\n}\n\n/**\n * Evaluates an export rule for a property, transfers to flex change\n * @param {TransferParameterTypeV2} transferParameters - list of input parameters for the recursive function call\n * @param breadcrumbs - list of breadcrumbs, i.e. ID parts for building the stable ID\n * @param syncRule - export rule from the object classes decorator\n * @param configObject - current (sub)object of the configuration file\n * @param ids - list of parent & child ids\n * @param title - title from the app schema (comprising for instance the facet ID)\n * @param key - key of the given property\n */\nfunction evaluateFlexRule(\n    transferParameters: TransferParameterTypeV2,\n    breadcrumbs: string[],\n    syncRule: SyncRule,\n    ids: string[],\n    title: string,\n    configObject: object,\n    key: string\n): void {\n    let localBreadcrumbs: string[];\n\n    if (breadcrumbs.length === 0) {\n        //only added on top = page level, do not forward\n        localBreadcrumbs = ['page'];\n    } else {\n        localBreadcrumbs = breadcrumbs;\n    }\n    const controlId = syncRule.flex.controlId(\n        transferParameters.baseId,\n        ids,\n        localBreadcrumbs,\n        syncRule.flex.controlType,\n        title\n    );\n    const flexChange = fillFlexChangeContent(configObject, syncRule, transferParameters.ui5Version, key, controlId);\n    const localManifest = JSON.parse(JSON.stringify(transferParameters.exportResults.manifest)) as Manifest;\n    localManifest['sap.app'].id = transferParameters.appId;\n    const completeFlexChange = syncRule.flex.createFlexChange(flexChange, localManifest);\n    const flexChangeExists = transferParameters.exportResults.flexChanges.find((change) => {\n        let result = false,\n            oldChange: object = JSON.parse(change);\n        oldChange = {\n            content: oldChange['content'],\n            selector: oldChange['selector']\n        };\n        let newChange: object = JSON.parse(completeFlexChange);\n        newChange = {\n            content: newChange['content'],\n            selector: newChange['selector']\n        };\n        if (JSON.stringify(oldChange) === JSON.stringify(newChange)) {\n            result = true;\n        }\n        return result;\n    });\n    if (!flexChangeExists) {\n        transferParameters.exportResults.flexChanges.push(completeFlexChange);\n    }\n}\n\n/**\n * Exports a given config property value to manifest\n * @param {TransferParameterTypeV2} transferParameters - list of input parameters for the recursive function call\n * @param syncRule - export rule from the object classes decorator\n * @param manifestSection - current section in manifest.json\n * @param configObject - current (sub)object of the configuration file\n * @param key - key of the given property in the config\n * @param manifestKey - key of the given property in manifest\n */\nfunction exportConfigValue(\n    transferParameters: TransferParameterTypeV2,\n    syncRule: SyncRule,\n    manifestSection: object,\n    configObject: object,\n    key: string,\n    manifestKey: string\n) {\n    if (\n        // In case of arrays we take over complete array\n        !(\n            transferParameters.propertyDefinition['type'] !== 'array' &&\n            transferParameters.nextDefinition &&\n            transferParameters.nextDefinition['targetDefinition'].type === 'object' &&\n            transferParameters.nextDefinition['targetDefinition'].properties\n        )\n    ) {\n        const exportHandler = syncRule.manifest.export;\n        if (exportHandler && typeof exportHandler === 'function') {\n            exportHandler(manifestSection, configObject, key, manifestKey);\n        } else if (exportHandler !== false) {\n            manifestSection[manifestKey] = configObject[key];\n        }\n    } else if (\n        transferParameters.propertyDefinition['type'] !== 'array' &&\n        manifestSection[manifestKey] === undefined\n    ) {\n        manifestSection[manifestKey] = {};\n    }\n}\n\n/**\n * Evaluates an export rule for a property, transfers to manifest setting\n * @param {TransferParameterTypeV2} transferParameters - list of input parameters for the recursive function call\n * @param syncRule - export rule from the object classes decorator\n * @param configObject - current (sub)object of the configuration file\n * @param ids - list of parent & child ids\n * @param title - title from the app schema (comprising for instance the facet ID)\n * @param key - key of the given property\n */\nfunction evaluateManifestRule(\n    transferParameters: TransferParameterTypeV2,\n    path: string,\n    syncRule: SyncRule,\n    key: string,\n    configObject: object\n) {\n    const manifestSection = ensureManifestSectionByPathV2(transferParameters.exportResults.manifest, path);\n    const manifestKey = syncRule.manifest.key || key;\n    if (configObject[key] !== undefined) {\n        exportConfigValue(transferParameters, syncRule, manifestSection, configObject, key, manifestKey);\n    } else {\n        //delete value\n        const deleteHandler = syncRule.manifest.delete;\n        if (deleteHandler && typeof deleteHandler === 'function') {\n            deleteHandler(manifestSection, configObject, key, manifestKey);\n        } else if (Object.prototype.hasOwnProperty.call(manifestSection, manifestKey)) {\n            delete manifestSection[manifestKey];\n        }\n    }\n    deleteEmptyStructure(transferParameters.exportResults.manifest, path);\n}\n\nfunction getManifestPathOfSections(\n    breadcrumbs: string[],\n    path: string,\n    syncRule: SyncRule,\n    transferParameters: TransferParameterTypeV2,\n    title: string\n) {\n    if (breadcrumbs[1] === 'custom') {\n        path = syncRule.manifest.path(transferParameters.pageKeys, {} as Manifest, breadcrumbs[2]);\n    } else {\n        path = syncRule.manifest.path(\n            transferParameters.pageKeys,\n            {} as Manifest,\n            title?.startsWith(FacetTitlePrefix) ? title.split(FacetTitlePrefix)[1] : breadcrumbs[1],\n            breadcrumbs[breadcrumbs.length - 1]\n        );\n        path = path.replace('/@', '::').replace(/VOCWITHCOLONS/g, '::com.sap.vocabularies');\n    }\n    return path;\n}\n\nfunction getManifestPathOfTable(\n    breadcrumbs: string[],\n    path: string,\n    syncRule: SyncRule,\n    transferParameters: TransferParameterTypeV2,\n    configObject: object\n) {\n    if (breadcrumbs[1] === 'columns' && breadcrumbs[2] === 'custom') {\n        path = syncRule.manifest.path(\n            transferParameters.pageKeys,\n            transferParameters.exportResults.manifest,\n            configObject['tabKey']\n        );\n    } else {\n        path = syncRule.manifest.path(transferParameters.pageKeys, {} as Manifest, breadcrumbs[breadcrumbs.length - 1]);\n    }\n    return path;\n}\n\n/**\n * Determines the path to a manifest setting, based on the syncRule\n * @param {TransferParameterTypeV2} transferParameters - list of input parameters for the recursive function call\n * @param breadcrumbs - list of breadcrumbs, i.e. ID parts for building the stable ID\n * @param {SyncRule} syncRule - export rule from the object classes decorator\n * @param configObject - current (sub)object of the configuration file\n * @param title - title from the app schema (comprising for instance the facet ID)\n * @returns the path to the manifest setting\n */\nfunction getManifestPath(\n    transferParameters: TransferParameterTypeV2,\n    breadcrumbs: string[],\n    syncRule: SyncRule,\n    configObject: object,\n    title: string\n): string {\n    let path: string;\n    if (breadcrumbs[0] === PropertyName.sections) {\n        path = getManifestPathOfSections(breadcrumbs, path, syncRule, transferParameters, title);\n    } else if (breadcrumbs[0] === PropertyName.table) {\n        path = getManifestPathOfTable(breadcrumbs, path, syncRule, transferParameters, configObject);\n    } else if (breadcrumbs[0] === 'keyPerformanceIndicators') {\n        path = syncRule.manifest.path(transferParameters.pageKeys, transferParameters.exportResults.manifest, title);\n    } else if (breadcrumbs[0] === 'filterBar' && breadcrumbs[1] === 'selectionFields') {\n        path = syncRule.manifest.path(\n            transferParameters.pageKeys,\n            transferParameters.exportResults.manifest,\n            breadcrumbs.slice(2).join('/')\n        );\n    } else {\n        path = syncRule.manifest.path(transferParameters.pageKeys);\n    }\n    return path;\n}\n\n/**\n * Evaluates an export rule for a property or object, transfers to flex change or manifest setting\n * @param {TransferParameterTypeV2} transferParameters - list of input parameters for the recursive function call\n * @param {SyncRule} syncRule - export rule from the object classes decorator\n * @param configObject - current (sub)object of the configuration file\n * @param breadcrumbs - list of breadcrumbs, i.e. ID parts for building the stable ID\n * @param ids - list of parent & child ids\n * @param title - title from the app schema (comprising for instance the facet ID)\n * @param key - key of the given property\n */\nfunction evaluateExportRule(\n    transferParameters: TransferParameterTypeV2,\n    syncRule: SyncRule,\n    configObject: object,\n    breadcrumbs: string[],\n    ids: string[],\n    title: string,\n    key: string\n): void {\n    if (!syncRule) {\n        return;\n    }\n    //eliminate subsections' hierarchy\n    let index = breadcrumbs.indexOf('subsections');\n    while (index > -1) {\n        breadcrumbs.splice(index - 1, 2);\n        index = breadcrumbs.indexOf('subsections');\n    }\n\n    if (syncRule.flex) {\n        evaluateFlexRule(transferParameters, breadcrumbs, syncRule, ids, title, configObject, key);\n    } else if (syncRule.manifest) {\n        const path = getManifestPath(transferParameters, breadcrumbs, syncRule, configObject, title);\n        evaluateManifestRule(transferParameters, path, syncRule, key, configObject);\n    }\n}\n\ntype ColumnParams = {\n    path: string;\n    exportResults: ExportResults;\n    entitySet: string;\n    config: v2.TableCustomColumns;\n    sectionKey: string;\n    extensionType: string;\n    appId: string;\n};\n\n/**\n * Deletes an obsolete custom column from manifest\n */\nfunction deleteObsoleteColumn(key: string, columnParams: ColumnParams, manifestSection: object) {\n    const keyParts = key.split('|');\n    const keyEntitySet = keyParts[1];\n    const keyTab = keyParts[2];\n    if (keyEntitySet === columnParams.entitySet) {\n        //relevant extension. still present in config?\n        const existingConfigEntries = columnParams.config?.filter(\n            (column) =>\n                (column.tabKey === keyTab ||\n                    (keyTab === undefined && column.tabKey === '') ||\n                    (keyTab && columnParams.sectionKey === keyTab)) &&\n                column.extensionType === columnParams.extensionType\n        );\n        if (!existingConfigEntries || existingConfigEntries.length === 0) {\n            deleteColumnFromFragment(manifestSection, key, columnParams.appId, columnParams.exportResults.fragments);\n            // delete from manifest\n            delete manifestSection[key];\n            // delete cells entry\n            if (key.startsWith(ViewTemplateType.ResponsiveTableColumnsExtension)) {\n                const cellsPattern = key.replace(\n                    ViewTemplateType.ResponsiveTableColumnsExtension,\n                    ViewTemplateType.ResponsiveTableCellsExtension\n                );\n                deleteColumnFromFragment(\n                    manifestSection,\n                    cellsPattern,\n                    columnParams.appId,\n                    columnParams.exportResults.fragments\n                );\n                // delete from manifest\n                delete manifestSection[cellsPattern];\n            }\n        }\n    }\n}\n\n/**\n * Walks through the extensions registered in manifest and compares the columns of the fragment with the ones present in config.\n * If not present anymore, the extension column gets deleted from fragment.\n * @param path - path to extesnions section in manifest\n * @param exportResults - result structure, including the fragments that may get updated\n * @param entitySet - current entity set\n * @param config - current config JSON\n * @param sectionKey - section key\n * @param extensionType - extensionType\n * @param appId - application ID\n */\nfunction deleteObsoleteColumnsFromFragment(columnParams: ColumnParams) {\n    const folderPath = columnParams.path.substring(0, columnParams.path.lastIndexOf('/'));\n    const manifestSection = getManifestSectionByPathV2(columnParams.exportResults.manifest, folderPath);\n    const extensionPattern = columnParams.path.substring(columnParams.path.lastIndexOf('/') + 1);\n    for (const key in manifestSection) {\n        if (key.startsWith(extensionPattern)) {\n            deleteObsoleteColumn(key, columnParams, manifestSection);\n        }\n    }\n}\n\n/**\n * Clusters the custom columns if a config by the extension's path in manifest\n * @param customColumnsInConfig - list of all custom columns in config\n * @param schemaDefinition - schema definition of the table custom column\n * @param v2Page - current page in manifest\n * @param entitySet - current entity set\n * @param sectionKey key of the section (in case of OP)\n * @returns the custom columns, clustered by the manifest path\n */\nfunction clusterConfigColumnsByPath(\n    customColumnsInConfig: v2.TableCustomColumns,\n    schemaDefinition: object,\n    v2Page: v2.SapUiAppPageV2,\n    entitySet: string,\n    sectionKey: string\n): object {\n    const cluster = {};\n    for (const customColumn of customColumnsInConfig) {\n        //verify that mandatory parameters are filled\n        if (\n            !customColumn['className'] ||\n            !customColumn['fragmentName'] ||\n            !customColumn['columnKey'] ||\n            !customColumn['extensionType']\n        ) {\n            continue;\n        }\n        //check fragment name\n        if (schemaDefinition['properties']['fragmentName']['pattern']) {\n            const namePattern = new RegExp(schemaDefinition['properties']['fragmentName']['pattern']);\n            if (namePattern.test(customColumn['fragmentName']) === false) {\n                continue;\n            }\n        }\n        const { path, viewTemplateType } = getCustomColumnPath(\n            v2Page,\n            entitySet,\n            customColumn.tabKey || sectionKey,\n            customColumn['extensionType']\n        );\n\n        if (!cluster[path]) {\n            cluster[path] = {\n                viewTemplateType: viewTemplateType,\n                columns: []\n            };\n        }\n        cluster[path].columns.push(customColumn);\n    }\n    return cluster;\n}\n\n/**\n * Transfers column extensions to manifest and fragment files\n * @param {TransferParameterTypeV2} transferParameters - list of input parameters for the recursive function call\n * @param {TableCustomColumns} customColumnsInConfig - config part comprising the table custom columns\n * @param {object} schemaDefinition - Column schema definition\n * @param {ObjectPageSectionData} [objectPageSectionData] - Object Page section's data containing target and key options.\n */\nfunction transferColumnExtensions(\n    transferParameters: TransferParameterTypeV2,\n    customColumnsInConfig: v2.TableCustomColumns,\n    schemaDefinition: object,\n    objectPageSectionData?: ObjectPageSectionData\n): void {\n    const sectionKey = objectPageSectionData ? objectPageSectionData.key : undefined;\n    const sectionTarget = objectPageSectionData ? objectPageSectionData.target : undefined;\n    const entitySet = sectionTarget || transferParameters.v2Page.entitySet;\n    for (const extensionType in v2.TableColumnExtensionTypeV2) {\n        const { path } = getCustomColumnPath(transferParameters.v2Page, entitySet, sectionKey, extensionType);\n        if (!path) {\n            continue;\n        }\n        const columParams = {\n            path,\n            exportResults: transferParameters.exportResults,\n            entitySet,\n            config: customColumnsInConfig,\n            sectionKey,\n            extensionType,\n            appId: transferParameters.appId\n        };\n        deleteObsoleteColumnsFromFragment(columParams);\n    }\n    if (customColumnsInConfig) {\n        //cluster existing custom columns by manifest path (or tab key)\n        const cluster = clusterConfigColumnsByPath(\n            customColumnsInConfig,\n            schemaDefinition,\n            transferParameters.v2Page,\n            entitySet,\n            sectionKey\n        );\n        //Export to fragment\n        for (const path in cluster) {\n            exportCustomColumnsToFragment(\n                transferParameters.exportResults,\n                path,\n                cluster[path].columns,\n                transferParameters.appId,\n                cluster[path].viewTemplateType,\n                transferParameters.logger\n            );\n        }\n    }\n}\n\n/**\n * Recursive function that traverses the content of the current object. It reads decorators and fills manifest entries and flex changes\n * @param {TransferParameterTypeV2} transferParameters - list of input parameters for the recursive function call\n * @param configSections - sections from configuration object\n * @param pageKey  - page key\n * @param parentIds - array of collected parent ids\n * @param breadcrumbs - array of properties that we are currently processing. Required for instance for table column name\n * @param targetDefinition - the current entry point or definition in the app schema\n */\nfunction transferManifestExtensions(\n    transferParameters: TransferParameterTypeV2,\n    configSections: (ObjectPageCustomSectionFragment | ObjectPageCustomSectionView)[],\n    pageKey: string,\n    parentIds: string[],\n    breadcrumbs: string[],\n    targetDefinition: object\n): void {\n    const sectionIds: string[] = [];\n    const entity = pageKey.split('|')[1];\n    if (!configSections) {\n        return;\n    }\n    for (const section of configSections) {\n        const id = findAvailableId(sectionIds, [section.relativePosition, entity, section.relatedFacet].join('|'));\n        sectionIds.push(id);\n    }\n    for (let index = 0; index < sectionIds.length; index++) {\n        const definition = targetDefinition['anyOf'].find((element) =>\n            element.$ref?.includes(configSections[index].constructor.name)\n        );\n        const definitionArray = definition.$ref.split(DEFINITION_LINK_PREFIX);\n        const nextTargetDefinition =\n            transferParameters.appSchema['definitions'][definitionArray[definitionArray.length - 1]];\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        transferManifestEntriesAndFlexChange(\n            transferParameters,\n            configSections[index],\n            parentIds,\n            [...breadcrumbs, sectionIds[index]],\n            nextTargetDefinition\n        );\n    }\n    // Delete removed manifest entries\n    const manifestSections = ensureManifestSectionByPathV2(\n        transferParameters.exportResults.manifest,\n        getViewExtensionsPath()\n    );\n    for (const key in manifestSections) {\n        if (isAssociatedCustomSection(key, entity) && !sectionIds.includes(key)) {\n            delete manifestSections[key];\n        }\n    }\n}\n\n/**\n * Method returns converted section id by resolving passed section id and title from schema.\n * @param {string[]} breadcrumbs Array of properties that we are currently processing. Required for instance for table column name.\n * @param {string} title Title from JSON schema, comprising the facet ID\n * @returns {string | undefined} Resolved section id.\n */\nfunction getSectionId(breadcrumbs: string[], title: string): string | undefined {\n    let sectionId = undefined;\n    for (let i = breadcrumbs.length - 1; i >= 0; i--) {\n        if (breadcrumbs[i] === PropertyName.table) {\n            sectionId = breadcrumbs[i - 1];\n            break;\n        }\n    }\n    return convertSectionId(sectionId, title);\n}\n\n/**\n * Processes index tables in schema\n */\nfunction transferIndexTable(\n    currentConfigObject: object,\n    transferParameters: TransferParameterTypeV2,\n    title: string,\n    key: string,\n    ids: string[],\n    breadcrumbs: string[]\n) {\n    const propertyDefinition = transferParameters.propertyDefinition as Definition;\n    if (!currentConfigObject || !propertyDefinition?.additionalProperties) {\n        return;\n    }\n    Object.keys(currentConfigObject).forEach((newKey) => {\n        const nextDefinition = getNextTargetDefinition(\n            transferParameters.appSchema,\n            title,\n            currentConfigObject[newKey],\n            propertyDefinition.additionalProperties as Definition,\n            key,\n            transferParameters.factory,\n            transferParameters.pageType\n        );\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        transferManifestEntriesAndFlexChange(\n            transferParameters,\n            nextDefinition.configObject,\n            ids,\n            [...breadcrumbs, key],\n            nextDefinition.targetDefinition,\n            newKey\n        );\n    });\n}\n\n/**\n * Transfers custom columns of schema\n */\nfunction transferCustomColumns(\n    propertyDefinition: any,\n    breadcrumbs: string[],\n    title: string,\n    transferParameters: TransferParameterTypeV2,\n    configObject: { [key: string]: any },\n    nextDefinition: NextDefinition\n) {\n    let objectPageSectionData: ObjectPageSectionData | undefined;\n    const target = getTargetFromCustomColumnRef(propertyDefinition.$ref);\n    if (target) {\n        objectPageSectionData = {\n            target,\n            key: getSectionId(breadcrumbs, title)\n        };\n    }\n    transferColumnExtensions(\n        transferParameters,\n        configObject?.custom as v2.TableCustomColumns,\n        nextDefinition.targetDefinition,\n        objectPageSectionData\n    );\n}\n\n/**\n * Processes anyOf definitions of schema\n */\nfunction handleAnyOfDefinitions(\n    propertyDefinition: any,\n    transferParameters: TransferParameterTypeV2,\n    title: string,\n    currentConfigObject: object,\n    key: string,\n    ids: string[],\n    breadcrumbs: string[]\n) {\n    propertyDefinition['anyOf'].forEach((element) => {\n        const nextDefinition = getNextTargetDefinition(\n            transferParameters.appSchema,\n            title,\n            currentConfigObject,\n            element,\n            key,\n            transferParameters.factory,\n            transferParameters.pageType\n        );\n        if (nextDefinition) {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            transferManifestEntriesAndFlexChange(\n                transferParameters,\n                nextDefinition.configObject,\n                ids,\n                [...breadcrumbs, key],\n                nextDefinition.targetDefinition,\n                nextDefinition.title\n            );\n        }\n    });\n}\n\n/**\n * Processes complex definitions of schema\n */\nfunction transferComplexProperty(\n    transferParameters: TransferParameterTypeV2,\n    breadcrumbs: string[],\n    configObject: { [key: string]: any },\n    ids: string[],\n    propertyKey: string,\n    nextDefinition: NextDefinition,\n    title?: string\n): void {\n    const propertyDefinition = transferParameters.propertyDefinition as Definition;\n    if (\n        propertyDefinition?.type === 'array' &&\n        (breadcrumbs[0] === 'sections' || breadcrumbs[0] === 'subsections') &&\n        propertyKey === 'custom'\n    ) {\n        transferManifestExtensions(\n            transferParameters,\n            configObject[propertyKey],\n            transferParameters.pageKeys[transferParameters.pageKeys.length - 1],\n            ids,\n            [...breadcrumbs, propertyKey],\n            propertyDefinition?.items as Definition\n        );\n    } else if (nextDefinition && propertyKey === 'custom') {\n        transferCustomColumns(propertyDefinition, breadcrumbs, title, transferParameters, configObject, nextDefinition);\n        return;\n    } else if (nextDefinition) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        transferManifestEntriesAndFlexChange(\n            transferParameters,\n            nextDefinition.configObject,\n            ids,\n            [...breadcrumbs, propertyKey],\n            nextDefinition.targetDefinition,\n            nextDefinition.title\n        );\n    } else if (propertyDefinition['anyOf']) {\n        handleAnyOfDefinitions(\n            propertyDefinition,\n            transferParameters,\n            title,\n            configObject?.[propertyKey],\n            propertyKey,\n            ids,\n            breadcrumbs\n        );\n    }\n}\n\n/**\n * Function that traverses the content of the current object. It reads decorators and fills manifest entries and flex changes\n * @param {TransferParameterTypeV2} transferParameters - list of input parameters for the recursive function call\n * @param configObject - current (sub)object of the configuration file\n * @param parentIds - array of collected parent ids\n * @param breadcrumbs - array of properties that we are currently processing. Required for instance for table column name\n * @param schemaDefinition - the current entry point or definition in the app schema\n * @param title - title from the app schema (comprising for instance the facet ID)\n */\nexport function transferManifestEntriesAndFlexChange(\n    transferParameters: TransferParameterTypeV2,\n    configObject: { [key: string]: any },\n    parentIds: string[],\n    breadcrumbs: string[],\n    schemaDefinition: Definition,\n    title?: string\n): void {\n    let currentConfigObject: object;\n\n    if (!schemaDefinition?.properties) {\n        return;\n    }\n    for (const propertyKey in schemaDefinition.properties) {\n        currentConfigObject = configObject?.[propertyKey];\n        const childId = configObject && getChildId(configObject, propertyKey);\n        const ids = childId ? [...parentIds, childId] : parentIds;\n        const syncRule = getReflectMetadata(configObject, propertyKey);\n        const propertyDefinition = (transferParameters.propertyDefinition = schemaDefinition.properties[\n            propertyKey\n        ] as Definition);\n        const nextDefinition = (transferParameters.nextDefinition = getNextTargetDefinition(\n            transferParameters.appSchema,\n            title,\n            currentConfigObject,\n            propertyDefinition,\n            propertyKey,\n            transferParameters.factory,\n            transferParameters.pageType\n        ));\n        //Evaluate sync rule for the export\n        evaluateExportRule(transferParameters, syncRule, configObject, [...breadcrumbs], ids, title, propertyKey);\n        //index table\n        transferIndexTable(currentConfigObject, transferParameters, title, propertyKey, ids, breadcrumbs);\n\n        if (currentConfigObject === undefined || typeof currentConfigObject === 'object') {\n            transferComplexProperty(\n                transferParameters,\n                breadcrumbs,\n                configObject,\n                ids,\n                propertyKey,\n                nextDefinition,\n                title\n            );\n        } else if (propertyDefinition?.$ref === DEFINITION_LINK_PREFIX + 'TableCustomColumns') {\n            //empty config ==> delete all given extensions\n            transferColumnExtensions(\n                transferParameters,\n                [],\n                transferParameters.appSchema['definitions']['TableCustomColumn']\n            );\n            continue;\n        }\n    }\n}\n", "import type {\n    LineItem,\n    DataFieldForActionAbstractTypes,\n    DataFieldAbstractTypes\n} from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport { UIAnnotationTypes } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport type { AnnotationTerm, ConvertedMetadata, EntitySet, EntityType } from '@sap-ux/vocabularies-types';\nimport { getDataFieldDescription, findAlias, DEFINITION_LINK_PREFIX } from '../../common/utils';\nimport { getStableIdPartFromDataField, replaceSpecialChars } from './StableIdHelper';\nimport {\n    addCommonLineItemDefinitions,\n    getFacetDefinitionLink,\n    parseSchemaDefinition,\n    prepareRef,\n    getActionKey,\n    addKeyToDefinition,\n    determineDataType\n} from '../../common';\nimport type { Definition } from 'typescript-json-schema';\nimport type { ExtensionLogger, GenerateAppSchemaParameters } from '@sap/ux-specification-types';\nimport {\n    v4,\n    SchemaTag,\n    SchemaKeyName,\n    DefinitionName,\n    UIVOCABULARY,\n    PropertyName,\n    TemplateType\n} from '@sap/ux-specification-types';\n\n/**\n * Processes a LineItem record of type DataFieldForAction during app schema generation\n * @param {LineItemDataForSchema} data: structure of input data\n * @param actions - actions definition in schema, parent object\n * @param lineItemPath - annotation path to the line item\n * @param lineItemRecord - actual record of the line item collection\n * @param recordIndex - record index in the collection\n */\nfunction addActionRecordToSchema(\n    data: LineItemDataForSchema,\n    actionsDefinition: Definition,\n    lineItemPath: string,\n    lineItemRecord: DataFieldForActionAbstractTypes,\n    recordIndex: number\n): void {\n    // Action but not inline action\n    if (lineItemRecord.Determining !== true) {\n        //no footer bar -> toolbar action\n        let actionDefinitionName: DefinitionName;\n        if (data.entitySet) {\n            actionDefinitionName = DefinitionName.ViewTableColumnBasicAction;\n        } else if (data.lineItemId.startsWith(DefinitionName.LineItemsOfView)) {\n            actionDefinitionName = DefinitionName.ViewToolBarAction;\n        } else if (data.lineItemId.startsWith(DefinitionName.LineItems)) {\n            actionDefinitionName = DefinitionName.ToolBarAction;\n        } else {\n            actionDefinitionName = DefinitionName.ObjectPageToolBarAction;\n        }\n        const actionId = (lineItemRecord.Action as string).replace('/', '::');\n        const description = getDataFieldDescription(lineItemRecord as DataFieldAbstractTypes, data.entityType);\n        const prefix = lineItemRecord.$Type.split(`${UIVOCABULARY}.`)[1];\n        const propertyKey = replaceSpecialChars(lineItemRecord.Action as string);\n        const actionDefinition = (actionsDefinition.properties[`${prefix}::${propertyKey}`] = {\n            $ref: getFacetDefinitionLink(actionDefinitionName, prepareRef(actionId)),\n            description\n        });\n        const { key, ns } = getActionKey(lineItemRecord.Action as string, true);\n        actionDefinition[SchemaTag.propertyIndex] = recordIndex;\n        actionDefinition[SchemaTag.dataType] = determineDataType(lineItemRecord);\n\n        //keys\n        actionDefinition[SchemaTag.keys] = [];\n        if (lineItemRecord[SchemaKeyName.semanticObject]) {\n            actionDefinition[SchemaTag.keys].push({\n                name: SchemaKeyName.semanticObject,\n                value: lineItemRecord[SchemaKeyName.semanticObject]\n            });\n        }\n        actionDefinition[SchemaTag.keys].push({ name: SchemaKeyName.action, value: key });\n\n        if (ns) {\n            actionDefinition[SchemaTag.target] = ns;\n        }\n        actionDefinition[SchemaTag.annotationType] = lineItemRecord.$Type;\n        const action = parseSchemaDefinition(actionDefinitionName, prepareRef(actionId), data.appSchema);\n        action[SchemaTag.annotationPath] = `${lineItemPath}/${recordIndex}`;\n    }\n}\n\n/**\n * Processes a LineItem record of type DataField during app schema generation\n * @param {LineItemDataForSchema} data: structure of input data\n * @param lineItem - object comprising the line item information:\n * { lineItemRecord, lineItemId, lineItemPath }\n * @param columnDefinitionName - Schema definition name for the column\n * @param recordIndex - record index in the collection\n */\nfunction addLineItemRecordToSchema(\n    data: LineItemDataForSchema,\n    lineItem: object,\n    columnDefinitionName: string,\n    recordIndex: number\n) {\n    const lineItemId = lineItem['lineItemId'];\n    const lineItemRecord = lineItem['lineItemRecord'];\n    if (lineItemRecord['Target']?.['value']) {\n        const regex = `@${findAlias(UIVOCABULARY, data.oDataServiceAVT)}.`;\n        lineItemRecord['Target']['value'] = lineItemRecord['Target']['value'].replace(regex, '@');\n    }\n    const schemaKey = getStableIdPartFromDataField(lineItemRecord);\n    if (schemaKey) {\n        const properties = (data.appSchema.definitions[lineItemId] as Definition).properties;\n        properties[schemaKey] = {\n            $ref: DEFINITION_LINK_PREFIX + columnDefinitionName,\n            description: getDataFieldDescription(lineItemRecord, data.entityType)\n        };\n        properties[schemaKey][SchemaTag.annotationType] = lineItemRecord?.$Type;\n        properties[schemaKey][SchemaTag.annotationPath] = `${lineItem['lineItemPath']}/${recordIndex}`;\n        properties[schemaKey][SchemaTag.propertyIndex] = recordIndex;\n        properties[schemaKey][SchemaTag.dataType] = determineDataType(lineItemRecord);\n        addKeyToDefinition(lineItemRecord, properties, schemaKey);\n    }\n}\n\nexport type LineItemDataForSchema = {\n    appSchema: Definition;\n    lineItemAnnotation: AnnotationTerm<LineItem>;\n    entityType: EntityType;\n    oDataServiceAVT: ConvertedMetadata;\n    lineItemId: string;\n    entitySet?: string;\n};\n\n/**\n * Adds the line item definition, columns and actions to the app schema (for the list report or an object page section comprising a table)\n * @param {LineItemDataForSchema} data: structure comprising\n * - appSchema - the app specific schema that shall get enhanced\n * - lineItemAnnotation - the UI.LineItem annotation, comprising all records\n * - entityType - the entity type as part of the AVT ConvertedMetadata\n * - oDataServiceAVT - complete service information, as returned by Annotation Vocabularies Tool\n * - lineItemId - in case of OP the parameter must be passed to distinguish the OP tables;\n *                in case of LR or ALP 'LineItems' is passed.\n * @param columnDefinitionName - name of the column definition, i.e. TableColumn or ObjectPageTableColumn\n */\nexport function addLineItemsTypeToSchema(\n    data: LineItemDataForSchema,\n    columnDefinitionName: string = DefinitionName.TableColumn\n): void {\n    // Add the correct lineItem definition\n\n    const { actions, lineItemPath } = addCommonLineItemDefinitions(\n        data.appSchema,\n        data.lineItemAnnotation,\n        data.entityType,\n        data.lineItemId\n    );\n\n    if (!data.lineItemAnnotation) {\n        return;\n    }\n    let i = 0;\n    data.lineItemAnnotation.forEach((lineItemRecord) => {\n        if (\n            (lineItemRecord.$Type === UIAnnotationTypes.DataFieldForAction ||\n                lineItemRecord.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation) &&\n            (lineItemRecord.Inline !== true || lineItemRecord.Determining === true)\n        ) {\n            addActionRecordToSchema(data, actions, lineItemPath, lineItemRecord, i);\n        } else {\n            const lineItem = { lineItemRecord, lineItemId: data.lineItemId, lineItemPath };\n            const columnDefinition =\n                lineItemRecord.$Type === UIAnnotationTypes.DataFieldForAction\n                    ? `${columnDefinitionName}Action`\n                    : columnDefinitionName;\n            addLineItemRecordToSchema(data, lineItem, columnDefinition, i);\n        }\n        i++;\n    });\n}\n\n/**\n * Find the relevant V4 page under the routing targets of manifest,json\n * @param pages - list of all pages in manifest\n * @param pageName - search criterion: page name\n * @param entitySet - search criterion: entity set\n * @param logger - logger for messages\n * @returns the page definition in manifest (if found)\n */\nexport function findPageV4(\n    pages: v4.SapUiAppPageV4[],\n    pageName: string,\n    entitySet: EntitySet,\n    logger: ExtensionLogger\n): v4.SapUiAppPageV4 | undefined {\n    let v4Page: v4.SapUiAppPageV4;\n    if (entitySet) {\n        for (const i in pages) {\n            if (\n                pages[i].options?.settings?.entitySet === entitySet.name &&\n                (pages[i].name === pageName ||\n                    (pageName === v4.FE_TEMPLATE_V4_ALP && pages[i].name === v4.FE_TEMPLATE_V4_LIST_REPORT))\n            ) {\n                v4Page = pages[i];\n                break;\n            }\n        }\n    }\n    return v4Page;\n}\n\n/**\n * Depending on the template type, strip down the app schema so that only the relevant views are part of it\n * @param {Definition} appSchema - app specific JSON schema, to be adjusted\n * @param {GenerateAppSchemaParameters} generateParameters - object comprising all input parameters\n * @returns the right definition name for the table in the schema\n */\nexport function alignSchemaWithTemplateType(\n    appSchema: Definition,\n    generateParameters: GenerateAppSchemaParameters\n): DefinitionName.Table | DefinitionName.ALPTableView {\n    let tableDefinitionName;\n    const tableDefinition = appSchema.properties[PropertyName.table] as Definition;\n    if (generateParameters.templateType === TemplateType.AnalyticalListPageV4) {\n        tableDefinitionName = DefinitionName.ALPTableView;\n\n        delete tableDefinition.anyOf;\n        tableDefinition.$ref = `${DEFINITION_LINK_PREFIX}${DefinitionName.ALPTableView}`;\n        delete appSchema.definitions[DefinitionName.Table];\n        delete appSchema.definitions[DefinitionName.LRChartView];\n        delete appSchema.definitions[DefinitionName.LRTableView];\n        delete appSchema.definitions[DefinitionName.MultiTableModeV4];\n    } else if (generateParameters.templateType === TemplateType.ListReportObjectPageV4) {\n        tableDefinitionName = DefinitionName.Table;\n\n        delete tableDefinition.anyOf;\n        tableDefinition.$ref = `${DEFINITION_LINK_PREFIX}${DefinitionName.Table}`;\n        (appSchema.definitions[tableDefinitionName] as Definition).properties[PropertyName.annotationPath][\n            SchemaTag.hidden\n        ] = true;\n        delete appSchema.definitions[DefinitionName.ALPTableView];\n        appSchema.properties[PropertyName.defaultPath][SchemaTag.hidden] = true;\n    }\n    return tableDefinitionName;\n}\n", "import type { LineItemDataForSchema } from '../utils/utils';\nimport { alignSchemaWithTemplateType, addLineItemsTypeToSchema, findPageV4 } from '../utils/utils';\n\nimport {\n    ArtifactType,\n    ManifestSection,\n    UIVOCABULARY,\n    TemplateType,\n    Visualization,\n    SchemaKeyName,\n    PropertyName,\n    DefinitionName,\n    FacetBase,\n    MANIFESTPATH,\n    SchemaTag,\n    LogSeverity,\n    UIVOCABULARYDOT,\n    METADATAPATH,\n    UIVOCABULARYALPHADOT\n} from '@sap/ux-specification-types';\nimport type { v4, GenerateAppSchemaParameters } from '@sap/ux-specification-types';\nimport type { AnnotationTerm, EntitySet, EntityType } from '@sap-ux/vocabularies-types';\nimport type { DataFieldAbstractTypes, LineItem, SelectionFields } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport { UIAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport i18next from 'i18next';\nimport { log } from '../../../extensionLogger';\nimport {\n    addEnumForSingleTabVariant,\n    createAnnotationPath,\n    DEFINITION_LINK_PREFIX,\n    determineDataType,\n    findAlias,\n    getDataFieldDescription,\n    getLabelForPropertyPath,\n    prepareRef,\n    parseSchemaDefinition,\n    addDefinitionRef,\n    updatePropertyIndices,\n    replaceNamespaces\n} from '../../common';\nimport type { Definition, DefinitionOrBoolean } from 'typescript-json-schema';\n\nconst ROOT_PROPERTIES_ORDER: Array<keyof v4.ListReportConfigV4> = ['filterBar', 'chart', 'table'];\n\n/**\n * Adds the selection fields to the app schema, as properties of the FilterBar\n * @param {EntityType} entityType - the entity type as part of the AVT ConvertedMetadata\n * @param {Definition} appSchema - the app specific schema that shall get enhanced\n * @param {AnnotationTerm<SelectionFields>} selectionFieldsAnnotation - the UI.SelectionField annotation\n * @param {Definition} [selectionFieldsDefinition] - Schema definitions of selection fields\n */\nexport function addSelectionFields(\n    entityType: EntityType,\n    appSchema: Definition,\n    selectionFieldsAnnotation: AnnotationTerm<SelectionFields>,\n    selectionFieldsDefinition?: Definition\n): Definition {\n    if (!selectionFieldsDefinition) {\n        selectionFieldsDefinition = appSchema.definitions.SelectionFields as Definition;\n        selectionFieldsDefinition.additionalProperties = false;\n        selectionFieldsDefinition.properties = {};\n    }\n    if (entityType) {\n        selectionFieldsDefinition[SchemaTag.annotationPath] = createAnnotationPath(\n            entityType.fullyQualifiedName,\n            UIAnnotationTerms.SelectionFields\n        );\n    }\n    if (selectionFieldsAnnotation) {\n        let i = 0;\n        selectionFieldsAnnotation?.forEach((selectionField) => {\n            let description = selectionField.value;\n            const fieldDefinition = 'SelectionField::' + prepareRef(selectionField.value);\n            if (selectionField.type === 'PropertyPath') {\n                description = getLabelForPropertyPath(selectionField, entityType);\n            }\n            selectionFieldsDefinition.properties[fieldDefinition] = {\n                $ref: DEFINITION_LINK_PREFIX + fieldDefinition\n            };\n            selectionFieldsDefinition.properties[fieldDefinition][SchemaTag.propertyIndex] = i;\n            const dataType = determineDataType(selectionField);\n            appSchema.definitions[fieldDefinition] = {\n                type: 'object',\n                properties: {},\n                description,\n                additionalProperties: false,\n                ...(dataType && { dataType })\n            };\n            appSchema.definitions[fieldDefinition][SchemaTag.isViewNode] = true;\n            appSchema.definitions[fieldDefinition][SchemaTag.keys] = [\n                { name: SchemaKeyName.value, value: `${selectionField.value}` }\n            ];\n            if (selectionField.$target?.fullyQualifiedName.indexOf('@') > -1) {\n                appSchema.definitions[fieldDefinition][SchemaTag.target] = selectionField.$target.fullyQualifiedName\n                    .split('@')[0]\n                    .split('/')[0];\n            } else if (selectionField.$target?.fullyQualifiedName) {\n                appSchema.definitions[fieldDefinition][SchemaTag.target] =\n                    selectionField.$target.fullyQualifiedName.split('/')[0];\n            }\n\n            appSchema.definitions[fieldDefinition][SchemaTag.annotationType] = selectionField?.type;\n            appSchema.definitions[fieldDefinition][SchemaTag.annotationPath] = `${\n                selectionFieldsDefinition[SchemaTag.annotationPath]\n            }/${i}`;\n            i++;\n        });\n    }\n    return selectionFieldsDefinition;\n}\n\nfunction defineActions(\n    appSchema: Definition,\n    schemaIdForActions: string,\n    annotations,\n    targetAnnotation: string,\n    entityType: EntityType\n) {\n    appSchema.definitions[schemaIdForActions] = JSON.parse(JSON.stringify(appSchema.definitions['Actions']));\n    const actions = appSchema.definitions[schemaIdForActions] as Definition;\n    actions.properties = {};\n    actions.additionalProperties = false;\n    const chartAnnotation = annotations[targetAnnotation?.split(`${UIVOCABULARY}.`)[1]];\n    if (chartAnnotation && chartAnnotation.Actions) {\n        let i = 0;\n        chartAnnotation.Actions.forEach((actionRecord) => {\n            const actionDefinition = prepareRef(`${DefinitionName.ChartToolBarAction}<${actionRecord.Action}>`);\n            const description = getDataFieldDescription(actionRecord as DataFieldAbstractTypes, entityType);\n            const prefix = actionRecord.$Type.split(`${UIVOCABULARY}.`)[1];\n            const action = (actions.properties[`${prefix}::${actionRecord.Action}`] = {\n                $ref: DEFINITION_LINK_PREFIX + actionDefinition,\n                description\n            });\n            //Add tags\n            action[SchemaTag.propertyIndex] = i;\n            action[SchemaTag.annotationType] = actionRecord.$Type;\n            action[SchemaTag.annotationPath] = `/${actionRecord.fullyQualifiedName}`;\n            //as ChartToolBarAction is an empty object, copy ViewToolBarAction and remove properties\n            appSchema.definitions[actionDefinition] = JSON.parse(\n                JSON.stringify(appSchema.definitions[DefinitionName.ViewToolBarAction])\n            );\n            (appSchema.definitions[actionDefinition] as Definition).properties = {};\n            appSchema.definitions[actionDefinition][SchemaTag.annotationPath] = actionRecord.fullyQualifiedName;\n            i++;\n        });\n    }\n}\n\n/**\n * Finds the right visualization for a given view\n * @param allVisualizations - list of visualizations for the given (S)PV\n * @param namespace - namespace for the UI annotations\n * @param viewKey - view key: primary, secondary, or anything else; may also be undefined. The first visualization is taken in this case.\n * @param visualizationType - allows to find the right visualization if there are many.\n * @returns the value of the first fitting visualization\n */\nfunction findTheRightVisualization(\n    allVisualizations: Array<object>,\n    namespace: string,\n    viewKey?: string,\n    visualizationType?: Visualization\n): { visualization: string; targetAnnotation: string } {\n    let visualization: string, visualizationObject: object, targetAnnotation: string;\n    if (allVisualizations) {\n        if (viewKey === 'primary') {\n            visualizationObject = allVisualizations.find((vis) => {\n                return vis['value'].indexOf('Chart') > -1;\n            });\n        } else if (viewKey === 'secondary') {\n            visualizationObject = allVisualizations.find((vis) => {\n                return vis['value'].indexOf(FacetBase.LineItem) > -1;\n            });\n        } else {\n            if (visualizationType) {\n                visualizationObject = allVisualizations.find((v) => v['value'].indexOf(visualizationType) > -1);\n            } else {\n                visualizationObject = allVisualizations[0];\n            }\n        }\n        visualization = replaceNamespaces(visualizationObject?.['value']);\n        if (visualizationObject?.['$target']?.fullyQualifiedName) {\n            targetAnnotation = `/${namespace}/${visualizationObject['$target'].fullyQualifiedName.split(namespace)[1]}`;\n        } else if (visualization) {\n            targetAnnotation = `/${namespace}/` + visualization.replace(`UI`, UIVOCABULARY);\n        }\n    }\n    return { visualization, targetAnnotation };\n}\n\n/**\n * An annotationPath must be analyzed, to find the right target annotation and visualization\n *\n */\nfunction analyzeChartAnnotation(\n    namespace: string,\n    annotationPath: string,\n    annotationAVT: object,\n    viewKey: string\n): { visualization: string; targetAnnotation: string; chartTitle: string } {\n    const visualization = '@UI.Chart';\n    const targetAnnotationFullName = `/${namespace}/@${annotationPath}`;\n    let chartTitle: string;\n\n    if (annotationAVT['Title']) {\n        chartTitle = annotationAVT['Title'];\n    } else {\n        chartTitle = `Chart View (${viewKey})`;\n    }\n    return { visualization, targetAnnotation: targetAnnotationFullName, chartTitle };\n}\n\n/**\n * An annotationPath must be analyzed, to find the right target annotation and visualization\n * @param annotationPath - given annotationPath\n * @param uIAnnotations - annotations of UI namespace of the given entityType\n * @param generateParameters - parameters required to generate app schema\n * @param viewKey - allows to distinguish the different view types (LR or ALP)\n * @param visualizationType - allows to find the right visualization if there are many.\n * @returns { visualization: string describing the visualization of the annotation,\n *            targetAnnotation: the target annotation behind the visualization\n *            namespace: namespace of the annotation,\n *            title: title to be shown, derived from the annotation }\n */\nfunction analyzeViewAnnotation(\n    annotationPath: string,\n    uIAnnotations: object,\n    generateParameters: GenerateAppSchemaParameters,\n    viewKey?: string,\n    visualizationType?: Visualization\n): { visualization: string; targetAnnotation: string; namespace: string; title: string } {\n    let namespace: string = undefined,\n        title: string;\n    const UILINEITEM = '@UI.LineItem';\n    const annotationInManifest = annotationPath?.split(`${UIVOCABULARY}.`)[1];\n    const annotationAVT = annotationInManifest && uIAnnotations[annotationInManifest];\n    if (!annotationAVT) {\n        return { visualization: undefined, targetAnnotation: undefined, namespace, title: `View (${viewKey})` };\n    }\n    title = annotationAVT.Text;\n    namespace = annotationAVT.fullyQualifiedName.split(UIVOCABULARYALPHADOT)[0];\n\n    if (annotationInManifest.startsWith('PresentationVariant')) {\n        const { visualization, targetAnnotation } = findTheRightVisualization(\n            annotationAVT.Visualizations,\n            namespace,\n            viewKey,\n            visualizationType\n        );\n        title = title || `View (${viewKey})`;\n        return { visualization, targetAnnotation, namespace, title };\n    } else if (annotationInManifest.startsWith('SelectionPresentationVariant')) {\n        let { visualization, targetAnnotation } = findTheRightVisualization(\n            annotationAVT.PresentationVariant?.Visualizations,\n            namespace,\n            viewKey,\n            visualizationType\n        );\n        if (!visualization) {\n            visualization = UILINEITEM; // default visualization\n            targetAnnotation = `/${namespace}/` + visualization.replace(`UI`, UIVOCABULARY); // default targetAnnotation\n        }\n        title = title || `View (${viewKey})`;\n        return { visualization, targetAnnotation, namespace, title };\n    } else if (annotationInManifest.startsWith('SelectionVariant')) {\n        const visualization = UILINEITEM;\n        const targetAnnotation = `/${namespace}/@${UIAnnotationTerms.LineItem}`;\n        title = title || `Table View (${viewKey})`;\n        return { visualization, targetAnnotation, namespace, title };\n    } else if (annotationInManifest.startsWith('LineItem')) {\n        const visualization = UILINEITEM;\n        const targetAnnotation = `/${namespace}/@${annotationPath}`;\n        title = title || `Table View (${viewKey})`;\n        return { visualization, targetAnnotation, namespace, title };\n    } else if (annotationInManifest.startsWith('Chart')) {\n        const { visualization, targetAnnotation, chartTitle } = analyzeChartAnnotation(\n            namespace,\n            annotationPath,\n            annotationAVT,\n            viewKey\n        );\n        return { visualization, targetAnnotation, namespace, title: chartTitle };\n    }\n    return { visualization: undefined, targetAnnotation: undefined, namespace, title: `View (${viewKey})` };\n}\n\n/**\n * Adds the ALP chart view to the app-specific schema\n * @param {Definition} appSchema - app-specific JSON schema\n * @param targetAnnotation - target annotation of the chart view, as determined by analyzeViewAnnotation\n * @param annotations - UI annotations, as determined by AVT\n */\nfunction addALPChartView(appSchema: Definition, chartAnnotationPath: string, targetAnnotation: string, annotations) {\n    const chartView = appSchema.definitions[DefinitionName.ALPChartView] as Definition;\n    appSchema.definitions[DefinitionName.ALPChart] = JSON.parse(JSON.stringify(chartView));\n    delete appSchema.definitions[DefinitionName.ALPChart][SchemaTag.isViewNode];\n    if (targetAnnotation) {\n        appSchema.definitions[DefinitionName.ALPChart][SchemaTag.annotationPath] = targetAnnotation;\n    }\n    (appSchema.definitions[DefinitionName.ALPChart] as Definition).properties.annotationPath[SchemaTag.hidden] = true;\n\n    chartView.properties.annotationPath[SchemaTag.hidden] = true;\n    chartView.additionalProperties = false;\n    chartView.description = `Chart (key: primary)`;\n    chartView.title = `Chart`;\n    chartView.$ref = `${DEFINITION_LINK_PREFIX}${DefinitionName.ALPChart}`;\n    if (chartAnnotationPath) {\n        const viewAnnotation = chartAnnotationPath.split(UIVOCABULARYDOT)[1];\n        const pathParts = annotations[viewAnnotation].fullyQualifiedName.split('@');\n        chartView[SchemaTag.annotationPath] = `/${pathParts[0]}/@${pathParts[1]}`;\n    }\n    chartView[SchemaTag.artifactType] = ArtifactType.Manifest;\n    chartView[SchemaTag.key] = 'primary';\n    chartView[SchemaTag.keys] = [{ name: SchemaKeyName.key, value: 'primary' }];\n}\n\n/**\n * Adds the ALP views to the app-specific schema\n * @param {Definition} appSchema - app-specific JSON schema\n * @param {Array<Object>} viewsPaths - views' paths' section in the manifest\n * @param {EntityType} entityType - actual entity type of the page's entitySet\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param templateAnnotation - defaultTemplateAnnotationPath as registered in manifest\n */\nfunction addALPViews(\n    appSchema: Definition,\n    viewsPaths: Array<Object>,\n    entityType: EntityType,\n    generateParameters: GenerateAppSchemaParameters,\n    templateAnnotation: string,\n    tableDefinitionName: string\n) {\n    const annotations = entityType?.annotations.UI;\n    //1. Chart View\n    const chartAnnotationPath = viewsPaths?.[0]?.['primary']?.[0]?.[SchemaTag.annotationPath];\n    const { targetAnnotation } = analyzeViewAnnotation(chartAnnotationPath, annotations, generateParameters, 'primary');\n    addALPChartView(appSchema, chartAnnotationPath, targetAnnotation, annotations);\n    // Copy toolbar\n    const schemaIdForActions = `Actions<ALPChart>`;\n    (appSchema.definitions[DefinitionName.ViewChartToolBar] as Definition).properties.actions['$ref'] =\n        DEFINITION_LINK_PREFIX + schemaIdForActions;\n\n    defineActions(appSchema, schemaIdForActions, annotations, targetAnnotation, entityType);\n\n    //2. Table View\n    const { visualization: tableVisualization, targetAnnotation: target } = analyzeViewAnnotation(\n        viewsPaths?.[0]?.['secondary']?.[0]?.[SchemaTag.annotationPath],\n        annotations,\n        generateParameters,\n        'secondary'\n    );\n    const tableDefinition = appSchema.definitions[tableDefinitionName] as Definition;\n    if (tableVisualization || templateAnnotation) {\n        tableDefinition.properties.toolBar['$ref'] = `${DEFINITION_LINK_PREFIX}${DefinitionName.ToolBarLR}`;\n        // Switch from generic column to specific definition\n        tableDefinition.properties['columns'] = {\n            $ref: DEFINITION_LINK_PREFIX + DefinitionName.LineItems\n        };\n        tableDefinition.properties.annotationPath[SchemaTag.hidden] = true;\n    } else {\n        tableDefinition.properties = {};\n    }\n    const tableView = appSchema.definitions[DefinitionName.ALPTableView] as Definition;\n    appSchema.definitions[DefinitionName.ALPTable] = JSON.parse(JSON.stringify(tableView));\n    delete appSchema.definitions[DefinitionName.ALPTable][SchemaTag.isViewNode];\n    tableView.additionalProperties = false;\n    tableView.description = `Table (key: secondary)`;\n    tableView.title = `Table`;\n    if (tableVisualization) {\n        delete tableView.properties;\n        tableView.$ref = `${DEFINITION_LINK_PREFIX}${DefinitionName.ALPTable}`;\n    } else if (!templateAnnotation) {\n        tableView.properties = {};\n    }\n    tableView[SchemaTag.artifactType] = ArtifactType.Manifest;\n\n    let annotationTerm: string, viewAnnotation: string;\n    if (tableVisualization && tableVisualization.indexOf(FacetBase.LineItem) > -1) {\n        annotationTerm = tableVisualization.split('.')[1];\n        viewAnnotation = viewsPaths[0]['secondary'][0].annotationPath.split(UIVOCABULARYDOT)[1];\n    } else if (templateAnnotation) {\n        annotationTerm = viewAnnotation = templateAnnotation.split(UIVOCABULARYDOT)[1];\n    }\n    if (annotationTerm) {\n        const dataForLineItem: LineItemDataForSchema = {\n            appSchema,\n            lineItemAnnotation: entityType?.annotations.UI[annotationTerm] as AnnotationTerm<LineItem>,\n            entityType,\n            oDataServiceAVT: generateParameters.serviceAVT,\n            lineItemId: DefinitionName.LineItems\n        };\n        addLineItemsTypeToSchema(dataForLineItem, DefinitionName.ViewTableColumn);\n        if (target) {\n            appSchema.definitions[DefinitionName.ALPTable][SchemaTag.annotationPath] = target;\n        }\n        const pathParts = annotations[viewAnnotation].fullyQualifiedName.split('@');\n        tableView[SchemaTag.annotationPath] = `/${pathParts[0]}/@${pathParts[1]}`;\n        tableView[SchemaTag.key] = 'secondary';\n        tableView[SchemaTag.keys] = [{ name: SchemaKeyName.key, value: 'secondary' }];\n    }\n}\n\ntype ViewsParameters = {\n    viewKey: string;\n    appSchema: Definition;\n    targetAnnotation: string;\n    navPropName: string;\n    targetEntityType: EntityType;\n    title: string;\n    entitySet?: string;\n};\n\n/**\n * Modifies the app schema, adds the right line chart settings\n * @param inputParameters - list of input parameters as collected by the calling instance\n * @param annotations - UI annotations of the given entityType\n * @returns the ID for the chart view in schema\n */\nfunction addViewChartDefinitions(inputParameters: ViewsParameters, annotations): string {\n    const idForChart = `${DefinitionName.LRChartView}<${inputParameters.viewKey}>`;\n    inputParameters.appSchema.definitions[idForChart] = JSON.parse(\n        JSON.stringify(inputParameters.appSchema.definitions[DefinitionName.LRChartView])\n    );\n    delete inputParameters.appSchema.definitions[idForChart][SchemaTag.isViewNode];\n    inputParameters.appSchema.definitions[idForChart][SchemaTag.annotationPath] = inputParameters.targetAnnotation;\n    if (inputParameters.navPropName) {\n        inputParameters.appSchema.definitions[idForChart]['navigationProperty'] = inputParameters.navPropName;\n    }\n    //Copy toolbar\n    const idForToolbar = `${DefinitionName.ViewChartToolBar}<${inputParameters.viewKey}>`;\n    inputParameters.appSchema.definitions[idForToolbar] = JSON.parse(\n        JSON.stringify(inputParameters.appSchema.definitions[DefinitionName.ViewChartToolBar])\n    );\n    inputParameters.appSchema.definitions[idForChart][\n        'properties'\n    ].toolBar.$ref = `${DEFINITION_LINK_PREFIX}${idForToolbar}`;\n    //Copy actions\n    const schemaIdForActions = `${DefinitionName.Actions}<${inputParameters.viewKey}>`;\n    defineActions(\n        inputParameters.appSchema,\n        schemaIdForActions,\n        annotations,\n        inputParameters.targetAnnotation,\n        inputParameters.targetEntityType\n    );\n    inputParameters.appSchema.definitions[idForToolbar]['properties'][PropertyName.actions][\n        '$ref'\n    ] = `${DEFINITION_LINK_PREFIX}${schemaIdForActions}`;\n\n    return idForChart;\n}\n\n/**\n * Adds the definition of a chart view to the app schema\n * @param inputParameters - list of input parameters as collected by the calling instance\n * @param UIAnnotations - AVT UI annotations of the given entity type\n * @param appSchema - app schema\n * @param viewsDefinition - the views definition in app schema (MultiTableModeV4)\n * @param viewKey - view key\n * @param title - view title\n */\nfunction addViewChart(\n    inputParameters: ViewsParameters,\n    UIAnnotations,\n    appSchema: Definition,\n    viewsDefinition: Definition,\n    viewKey: string,\n    title: string\n) {\n    const idForChart = addViewChartDefinitions(inputParameters, UIAnnotations);\n    (appSchema.definitions[idForChart] as Definition).properties.annotationPath[SchemaTag.hidden] = true;\n    (appSchema.definitions[idForChart] as Definition).properties.index[SchemaTag.hidden] = true;\n    (appSchema.definitions[idForChart] as Definition).properties.entitySet[SchemaTag.hidden] = true;\n    const titleOnHover = `Chart View (key: ${viewKey})`;\n    viewsDefinition.properties[viewKey] = {\n        $ref: `${DEFINITION_LINK_PREFIX}${idForChart}`,\n        description: title ? title : titleOnHover,\n        title: titleOnHover\n    };\n}\n\n/**\n * Empties properties for given definition.\n * @param {DefinitionOrBoolean} definition - the given definition\n */\nfunction createEmptyProperties(definition: DefinitionOrBoolean): Definition {\n    if (typeof definition === 'object') {\n        return {\n            ...definition,\n            properties: {}\n        };\n    }\n    return {\n        properties: {}\n    };\n}\n\n/**\n * Modifies the app schema, adds the right line item settings as derived from the visualization\n * @param inputParameters - list of input parameters as collected by the calling instance\n * @param viewsDefinition - the views definition in app schema (MultiTableModeV4)\n * @param visualization - visualization from the given (S)PV\n * @param templateAnnotation - defaultTemplateAnnotationPath as registered in manifest\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n */\nfunction addViewLineItems(\n    inputParameters: ViewsParameters,\n    viewsDefinition: Definition,\n    visualization: string,\n    templateAnnotation: string,\n    generateParameters: GenerateAppSchemaParameters\n): void {\n    const tableId = `${DefinitionName.LRTableView}<${inputParameters.viewKey}>`;\n    const viewId = `${DefinitionName.LineItemsOfView}::${inputParameters.viewKey}`;\n    const lrTableView = parseSchemaDefinition(\n        DefinitionName.LRTableView,\n        inputParameters.viewKey,\n        inputParameters.appSchema\n    );\n    delete lrTableView[SchemaTag.isViewNode];\n    lrTableView[SchemaTag.annotationPath] = inputParameters.targetAnnotation;\n    if (inputParameters.navPropName) {\n        lrTableView['navigationProperty'] = inputParameters.navPropName;\n    }\n    if (inputParameters.entitySet) {\n        lrTableView['entitySet'] = inputParameters.entitySet;\n    }\n    //Copy toolbar\n    addDefinitionRef(lrTableView.properties.toolBar as Definition, DefinitionName.ToolBar, viewId);\n    const title = `Table View (key: ${inputParameters.viewKey})`;\n    viewsDefinition.properties[inputParameters.viewKey] = {\n        $ref: `${DEFINITION_LINK_PREFIX}${tableId}`,\n        description: inputParameters.title || title,\n        title\n    };\n    addDefinitionRef(lrTableView.properties.columns as Definition, viewId);\n    lrTableView.properties.annotationPath[SchemaTag.hidden] = true;\n    lrTableView.properties.index[SchemaTag.hidden] = true;\n    lrTableView.properties.entitySet[SchemaTag.hidden] = true;\n    const annotationTerm = visualization?.split('.')[1] || templateAnnotation.split(UIVOCABULARYDOT)[1];\n    const dataForLineItem: LineItemDataForSchema = {\n        appSchema: inputParameters.appSchema,\n        lineItemAnnotation: inputParameters.targetEntityType?.annotations.UI[\n            annotationTerm\n        ] as AnnotationTerm<LineItem>,\n        entityType: inputParameters.targetEntityType,\n        oDataServiceAVT: generateParameters.serviceAVT,\n        lineItemId: viewId,\n        entitySet: lrTableView['entitySet']\n    };\n    let columnDefinitionName: string = DefinitionName.ViewTableColumn;\n    // handle basic columns and basic actions for view with different entity set (remove properties)\n    if (lrTableView['entitySet'] !== undefined) {\n        const { definitions } = inputParameters.appSchema;\n        // will be used as new reference\n        columnDefinitionName = DefinitionName.ViewTableColumnBasic;\n        const originalReference = definitions[DefinitionName.ViewTableColumn];\n        definitions[columnDefinitionName] = createEmptyProperties(originalReference);\n        const actionRef = DefinitionName.ViewTableColumnBasicAction;\n        const originalActionRef = `${DefinitionName.ViewTableColumnAction}`;\n        definitions[actionRef] = createEmptyProperties(definitions[originalActionRef]);\n    }\n    addLineItemsTypeToSchema(dataForLineItem, columnDefinitionName);\n}\n\n/**\n * Adds the schema tags to a given view\n * @param viewsDefinition - the views definition in app schema (MultiTableModeV4)\n * @param viewKey - key property of the view\n * @param namespace - target namespace for annotations\n * @param view - the given view\n */\nfunction addTagsToView(viewsDefinition: Definition, viewKey: string, namespace: string, view: Object) {\n    viewsDefinition.properties[viewKey][SchemaTag.isViewNode] = true;\n    viewsDefinition.properties[viewKey][SchemaTag.annotationPath] = namespace\n        ? `/${namespace}/@${view[SchemaTag.annotationPath]}`\n        : undefined;\n    viewsDefinition.properties[viewKey][SchemaTag.artifactType] = ArtifactType.Manifest;\n    viewsDefinition.properties[viewKey][SchemaTag.key] = viewKey;\n    viewsDefinition.properties[viewKey][SchemaTag.keys] = [{ name: SchemaKeyName.key, value: viewKey }];\n}\n\n/**\n * Adjusts the entity type if a different entity set is maintained for a view\n * @param {EntitySet} entitySet - actual entity set (AVT information)\n * @param view - the current view in manifest\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {EntityType} entityType - actual entity type of the page's entitySet\n * @returns the target entity type\n */\nfunction getTargetEntityType(\n    entitySet: EntitySet,\n    view: Object,\n    generateParameters: GenerateAppSchemaParameters,\n    entityType: EntityType\n): EntityType {\n    let targetEntityType = entityType;\n    let viewEntitySet = entitySet;\n    if (view['entitySet'] && view['entitySet'] !== entitySet.name) {\n        viewEntitySet = generateParameters.serviceAVT?.entitySets.find((es) => {\n            return es.name === view['entitySet'];\n        });\n        targetEntityType = viewEntitySet.entityType;\n    }\n    return targetEntityType;\n}\n\n/**\n * Handles manifest properties for given view definition excluding passed ones.\n * @param {Definition} definition - the given definition\n * @param {string[]} validProperties - properties to skip from deletion\n */\nfunction handleViewProperties(definition: Definition, validProperties: string[]) {\n    const { properties } = definition;\n    if (properties) {\n        for (const i in properties) {\n            if (properties[i]['artifactType'] === ArtifactType.Manifest && validProperties.indexOf(i) === -1) {\n                delete properties[i];\n            }\n        }\n    }\n}\n\n/**\n * Adds definition parts to a LR View (LineItem/Chart)\n * @param {string} templateAnnotation - defaultTemplateAnnotationPath as registered in manifest\n * @param {string} visualization - visualization of the annotation\n * @param viewsDefinition - the views definition in app schema (MultiTableModeV4)\n * @param {object} commonInputParameters - list of input parameters as collected by the calling instance\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {SapUiAppPageV4} v4Page - the given page in manifest\n * @param {object} uiAnnotations - UI annotations of the given entityType\n * @param {object} view - the given view\n */\nfunction addLRViewParts(\n    visualization: string,\n    viewsDefinition: Definition,\n    commonInputParameters: ViewsParameters,\n    generateParameters: GenerateAppSchemaParameters,\n    v4Page: v4.SapUiAppPageV4,\n    uiAnnotations: object,\n    view: object\n) {\n    if (visualization?.indexOf(Visualization.LineItem) > -1) {\n        //Add Line item view\n        addViewLineItems(\n            commonInputParameters,\n            viewsDefinition,\n            visualization,\n            commonInputParameters.targetAnnotation,\n            generateParameters\n        );\n        if (view['entitySet'] !== undefined) {\n            // handle root properties of current view if entity set is different\n            handleViewProperties(\n                commonInputParameters.appSchema.definitions[\n                    `${DefinitionName.LRTableView}<${view['key']}>`\n                ] as Definition,\n                ['visible']\n            );\n        }\n    } else if (visualization?.indexOf('Chart') > -1) {\n        //Add Chart view\n        addViewChart(\n            commonInputParameters,\n            uiAnnotations,\n            commonInputParameters.appSchema,\n            viewsDefinition,\n            commonInputParameters.viewKey,\n            commonInputParameters.title\n        );\n    } else if (view['template']) {\n        const titleOnHover = view['label'] || `Custom View (key: ${commonInputParameters.viewKey})`;\n        viewsDefinition.properties[commonInputParameters.viewKey] = {\n            description: commonInputParameters.title || titleOnHover,\n            title: titleOnHover,\n            // Default view - use table view reference as default\n            $ref: `${DEFINITION_LINK_PREFIX}${DefinitionName.TableViewExtension}`\n        };\n    } else {\n        const titleOnHover = `View (key: ${commonInputParameters.viewKey})`;\n        viewsDefinition.properties[commonInputParameters.viewKey] = {\n            description: commonInputParameters.title || titleOnHover,\n            title: titleOnHover,\n            // Default view - use table view reference as default\n            $ref: `${DEFINITION_LINK_PREFIX}${DefinitionName.LRTableView}`\n        };\n    }\n}\n\n/**\n * Add list report views to the app-specific schema\n * @param {Definition} appSchema - app-specific JSON schema\n * @param {Array<Object>} viewsPaths - views' paths' section in the manifest\n * @param {EntityType} entityType - actual entity type of the page's entitySet\n * @param {EntitySet} entitySet - actual entity set (AVT information)\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {string} templateAnnotation - defaultTemplateAnnotationPath as registered in manifest\n * @param {SapUiAppPageV4} v4Page - the given page in manifest\n */\nfunction addLRViews(\n    appSchema: Definition,\n    viewsPaths: Array<Object>,\n    entityType: EntityType,\n    entitySet: EntitySet,\n    generateParameters: GenerateAppSchemaParameters,\n    v4Page: v4.SapUiAppPageV4,\n    tableDefinitionName: DefinitionName.Table | DefinitionName.ALPTableView\n) {\n    const tableDefinition = appSchema.definitions[tableDefinitionName] as Definition;\n    tableDefinition.properties = {\n        annotationPath: tableDefinition.properties.annotationPath,\n        initialLoad: tableDefinition.properties.initialLoad,\n        views: tableDefinition.properties.views\n    };\n    const viewsDefinition = appSchema.definitions.MultiTableModeV4 as Definition;\n    for (const view of viewsPaths) {\n        if (!view[SchemaTag.key]) {\n            continue;\n        }\n        let navPropName: string = undefined;\n        const targetEntityType = getTargetEntityType(entitySet, view, generateParameters, entityType);\n        const uiAnnotations = targetEntityType?.annotations.UI;\n        const { visualization, targetAnnotation, namespace, title } = analyzeViewAnnotation(\n            view?.[SchemaTag.annotationPath],\n            uiAnnotations,\n            generateParameters,\n            view[SchemaTag.key]\n        );\n        if (view['entitySet']) {\n            navPropName = entityType.navigationProperties.find((np) => {\n                return np.targetTypeName === namespace;\n            })?.name;\n        }\n        const viewKey = prepareRef(view[SchemaTag.key]);\n        const commonInputParameters: ViewsParameters = {\n            viewKey,\n            appSchema,\n            targetAnnotation,\n            navPropName,\n            targetEntityType,\n            title,\n            entitySet: view['entitySet']\n        };\n        addLRViewParts(\n            visualization,\n            viewsDefinition,\n            commonInputParameters,\n            generateParameters,\n            v4Page,\n            uiAnnotations,\n            view\n        );\n        addTagsToView(viewsDefinition, viewKey, namespace, view);\n    }\n}\n\n/**\n * Adapts the table definition in schema.\n * Evaluates the path depending on if defaultTemplateAnnotationPath or Selection-/PresentationVariant is present.\n * @param {SapUiAppPageV4} v4Page - the given page in manifest\n * @param {EntityType} entityType - the current entity type, as defined in AVT\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param appSchema - the app-specific JSON schema\n * @param alias - alias definition for the UI vocabulary\n */\nfunction adaptTableDefinition(\n    appSchema: Definition,\n    entityType: EntityType,\n    generateParameters: GenerateAppSchemaParameters,\n    templateAnnotation: string,\n    v4Page: v4.SapUiAppPageV4,\n    alias: string,\n    tableDefinitionName: DefinitionName.Table | DefinitionName.ALPTableView\n) {\n    //here: tableDefinitionName = DefinitionName.Table\n    const tableDefinition = appSchema.definitions[tableDefinitionName] as Definition;\n    const { visualization, targetAnnotation, namespace } = analyzeViewAnnotation(\n        templateAnnotation,\n        entityType.annotations.UI,\n        generateParameters,\n        undefined,\n        Visualization.LineItem\n    );\n    if (visualization) {\n        const annotationTerm = visualization.split('.')[1];\n        const annotationTermInSchema = `${DefinitionName.LineItems}OfSPV::${prepareRef(annotationTerm)}`;\n        const spvTable = (appSchema.definitions[`${tableDefinitionName}SPV`] = JSON.parse(\n            JSON.stringify(appSchema.definitions[tableDefinitionName])\n        ) as Definition);\n        delete spvTable[SchemaTag.isViewNode];\n        addDefinitionRef(spvTable.properties.toolBar as Definition, DefinitionName.ToolBar, annotationTermInSchema);\n        // Switch from generic column to specific definition\n        spvTable[SchemaTag.annotationPath] = targetAnnotation;\n        spvTable.properties.columns = {} as Definition;\n        addDefinitionRef(spvTable.properties.columns, annotationTermInSchema);\n\n        delete tableDefinition.properties;\n        addDefinitionRef(tableDefinition, `${tableDefinitionName}SPV`);\n        tableDefinition[SchemaTag.annotationPath] = `/${namespace}/@${templateAnnotation}`;\n        const lineItemAnnotation = entityType?.annotations.UI[annotationTerm] as AnnotationTerm<LineItem>;\n        if (!lineItemAnnotation) {\n            log(generateParameters.logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOTARGET', { target: annotationTerm }),\n                location: {\n                    path: METADATAPATH\n                }\n            });\n        }\n        const dataForLineItem: LineItemDataForSchema = {\n            appSchema,\n            lineItemAnnotation,\n            entityType,\n            oDataServiceAVT: generateParameters.serviceAVT,\n            lineItemId: annotationTermInSchema\n        };\n        addLineItemsTypeToSchema(dataForLineItem);\n    } else {\n        tableDefinition.properties.toolBar['$ref'] = `${DEFINITION_LINK_PREFIX}${DefinitionName.ToolBarLR}`;\n        // Switch from generic column to specific definition\n        addDefinitionRef(tableDefinition.properties.columns as Definition, DefinitionName.LineItems);\n        const lineItemAnnotation = entityType?.annotations?.[alias]?.LineItem;\n        if (!lineItemAnnotation) {\n            log(generateParameters.logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOLINEITEMS'),\n                location: {\n                    path: METADATAPATH\n                }\n            });\n        }\n        const dataForLineItem: LineItemDataForSchema = {\n            appSchema,\n            lineItemAnnotation,\n            entityType,\n            oDataServiceAVT: generateParameters.serviceAVT,\n            lineItemId: DefinitionName.LineItems\n        };\n        addLineItemsTypeToSchema(dataForLineItem);\n        const term = lineItemAnnotation ? lineItemAnnotation.term : UIAnnotationTerms.LineItem;\n        tableDefinition[SchemaTag.annotationPath] = createAnnotationPath(\n            entityType?.fullyQualifiedName,\n            term,\n            lineItemAnnotation?.qualifier\n        );\n    }\n}\n\n/**\n * Checks for the default annotation path to use for LR table\n * @param {SapUiAppPageV4} v4Page - actual page in the manifest\n * @param {EntityType} entityType - actual entity type (AVT information)\n * @returns {string} annotation term\n */\nfunction getDefaultAnnotationPath(\n    v4Page: v4.SapUiAppPageV4,\n    entityType: EntityType,\n    templateType: TemplateType\n): string | undefined {\n    if (v4Page.options.settings?.views?.paths && templateType === TemplateType.ListReportObjectPageV4) {\n        return;\n    }\n    if (v4Page.options.settings?.defaultTemplateAnnotationPath) {\n        return v4Page.options.settings.defaultTemplateAnnotationPath;\n    }\n    if (templateType === TemplateType.ListReportObjectPageV4) {\n        return (\n            entityType.annotations.UI?.SelectionPresentationVariant?.term ||\n            entityType.annotations.UI?.PresentationVariant?.term\n        );\n    }\n}\n\n/**\n * Add views to schema (LR or ALP)\n * @param {Definition} appSchema - app-specific JSON schema\n * @param {SapUiAppPageV4} v4Page - actual page in the manifest\n * @param {EntityType} entityType - actual entity type (AVT information)\n * @param {EntitySet} entitySet - actual entity set (AVT information)\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n */\nfunction addTableAndViews(\n    appSchema: Definition,\n    v4Page: v4.SapUiAppPageV4,\n    entityType: EntityType,\n    entitySet: EntitySet,\n    generateParameters: GenerateAppSchemaParameters,\n    alias: string\n): void {\n    const viewsPaths = v4Page.options?.settings?.views?.paths;\n    const defaultAnnotation = getDefaultAnnotationPath(v4Page, entityType, generateParameters.templateType);\n    const tableDefinitionName = alignSchemaWithTemplateType(appSchema, generateParameters);\n    if (generateParameters.templateType === TemplateType.ListReportObjectPageV4) {\n        if (viewsPaths) {\n            addLRViews(appSchema, viewsPaths, entityType, entitySet, generateParameters, v4Page, tableDefinitionName);\n        } else {\n            if (!v4Page.options?.settings?.views) {\n                (appSchema.definitions.MultiTableModeV4 as Definition).properties = {};\n            }\n            adaptTableDefinition(\n                appSchema,\n                entityType,\n                generateParameters,\n                defaultAnnotation,\n                v4Page,\n                alias,\n                tableDefinitionName\n            );\n        }\n        appSchema.properties[PropertyName.chart][SchemaTag.hidden] = true;\n    } else if (generateParameters.templateType === TemplateType.AnalyticalListPageV4) {\n        addALPViews(appSchema, viewsPaths, entityType, generateParameters, defaultAnnotation, tableDefinitionName);\n    }\n}\n\n/**\n * Generates an app specific schema for the FE V4 ListReport from the generic schema.\n * Generic types are replaced by information from the app specific annotations.\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param genericSchema  - generic JSON schema of an object page\n * @param {EntitySet} entitySet - entity set (AVT object) that is relevant for the given page\n * @param {string} templateName - allows to distinguish list report from ALP\n *\n * @returns {object} application-specific schema of the list report\n */\nexport function generateListReportSchemaV4(\n    generateParameters: GenerateAppSchemaParameters,\n    genericSchema: object,\n    entitySet: EntitySet,\n    templateName: string\n): object {\n    const appSchema: Definition = JSON.parse(JSON.stringify(genericSchema));\n    const entityType = entitySet?.entityType;\n    const alias = generateParameters.serviceAVT && findAlias(UIVOCABULARY, generateParameters.serviceAVT);\n    //Add selection fields\n    const selectionFieldAnnotation = alias && entityType?.annotations?.[alias]?.SelectionFields;\n    addSelectionFields(entityType, appSchema, selectionFieldAnnotation);\n\n    appSchema.properties[PropertyName.defaultTemplateAnnotationPath][SchemaTag.hidden] = true;\n\n    //enum for annotation path as part of QuickVariantSelection\n    addEnumForSingleTabVariant(entityType, appSchema, DefinitionName.AnnotationPathAsObject);\n\n    if (generateParameters.manifest) {\n        //Find page in targets\n        const pages = generateParameters.manifest[ManifestSection.ui5].routing\n            .targets as unknown as v4.SapUiAppPageV4[];\n        if (!pages) {\n            log(generateParameters.logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOPAGES', { appId: generateParameters.manifest['sap.app']['id'] }),\n                location: {\n                    path: MANIFESTPATH,\n                    range: [ManifestSection.generic]\n                }\n            });\n            return appSchema;\n        }\n        const v4Page = findPageV4(pages, templateName, entitySet, generateParameters.logger);\n        if (!v4Page) {\n            return appSchema;\n        }\n        addTableAndViews(appSchema, v4Page, entityType, entitySet, generateParameters, alias);\n    }\n    delete appSchema.definitions.GenericColumns;\n    delete appSchema.definitions.Action;\n    updatePropertyIndices(appSchema, ROOT_PROPERTIES_ORDER);\n    return appSchema;\n}\n", "import type { Definition } from 'typescript-json-schema';\nimport type { GenerateAppSchemaParameters } from '../../..';\nimport type { PresentationVariantV4 } from '../types';\nimport type { AnnotationTerm, ConvertedMetadata, EntitySet, EntityType } from '@sap-ux/vocabularies-types';\nimport type {\n    Chart,\n    DataFieldAbstractTypes,\n    LineItem,\n    PresentationVariant\n} from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport i18next from 'i18next';\nimport { log } from '../../../extensionLogger';\nimport { UIAnnotationTerms, UIAnnotationTypes } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport {\n    v4,\n    FioriElementsVersion,\n    ManifestSection,\n    SectionType,\n    Visualization,\n    DefinitionName,\n    SchemaKeyName,\n    MANIFESTPATH,\n    METADATAPATH,\n    LogSeverity,\n    SchemaTag,\n    FacetBase,\n    UIVOCABULARYDOT\n} from '@sap/ux-specification-types';\nimport type { FacetConfig, FacetConfigs, FacetSection } from '@sap/ux-specification-types';\nimport {\n    DEFINITION_LINK_PREFIX,\n    addCommonHeaderSchema,\n    addDefinitionForRelatedFacetKeys,\n    addEnumForSingleTabVariant,\n    addFooterActions,\n    addHeaderActions,\n    addSectionTitleAndDescription,\n    addTargetTitleAndSectionDescription,\n    createDefaultSection,\n    determineDataType,\n    determineDataTypeOfTarget,\n    getActionNameAndId,\n    getDataFieldDescription,\n    getFacetAnnotationPath,\n    getFacetDefinitionLink,\n    getFacetKeyInSchema,\n    getObjectPageFacets,\n    getObjectPageHeaderFacets,\n    getObjectPageFacetSection,\n    handleAddressContact,\n    handleForm,\n    parseSchemaDefinition,\n    prepareRef,\n    replaceAlias,\n    updatePropertyIndices\n} from '../../common';\nimport type { LineItemDataForSchema } from '../utils/utils';\nimport { addLineItemsTypeToSchema, findPageV4 } from '../utils/utils';\nimport { getStableIdPartFromDataField } from '../utils/StableIdHelper';\n\nconst ROOT_PROPERTIES_ORDER: Array<keyof v4.ObjectPageConfigV4> = ['header', 'layout', 'sections', 'footer'];\n\n/**\n * Callback for adding a single action to headerActions of V4\n * @param {EntityType} entityType - current entity type\n * @param {Definition} appSchema Schema of the app\n * @param actionAnnotation - annotation as present in AVT ConvertedMetadata\n * @param {Definition} headerActions - list of header actions, to be enhanced\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n */\nfunction addHeaderActionCallBackV4(\n    entityType,\n    appSchema: Definition,\n    actionAnnotation: any,\n    headerActions: {\n        type: string;\n        properties: {};\n        description: string;\n        additionalProperties: boolean;\n        isViewNode: boolean;\n    },\n    oDataServiceAVT: ConvertedMetadata\n): any {\n    return (item, index) => {\n        if (\n            (!item['Determining'] && item.$Type === UIAnnotationTypes.DataFieldForAction) ||\n            item.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation\n        ) {\n            const { actionName, actionId, namespace } = getActionNameAndId(item, oDataServiceAVT);\n            if (!actionId) {\n                return;\n            }\n            const stableId = getStableIdPartFromDataField(item);\n            //stableId is used as key in V4, as the DataFieldForAction:: prefix shall be present in manifest settings\n            const convertedIdentification = actionAnnotation.fullyQualifiedName.replace(\n                `@${UIAnnotationTerms.Identification}`,\n                `/@${UIAnnotationTerms.Identification}`\n            );\n            const actionDefinitionKey = `HeaderAction<${prepareRef(stableId)}>`;\n            const headerAction = (appSchema.definitions[actionDefinitionKey] = {\n                type: 'object',\n                properties: {},\n                description: item.Label || actionName\n            });\n            headerAction[SchemaTag.isViewNode] = true;\n            headerAction[SchemaTag.dataType] = determineDataType(item);\n\n            //keys\n            headerAction[SchemaTag.keys] = [];\n            if (item[SchemaKeyName.semanticObject]) {\n                headerAction[SchemaTag.keys].push({\n                    name: SchemaKeyName.semanticObject,\n                    value: item[SchemaKeyName.semanticObject]\n                });\n            }\n            headerAction[SchemaTag.keys].push({ name: SchemaKeyName.action, value: actionName });\n\n            if (namespace) {\n                appSchema.definitions[actionDefinitionKey][SchemaTag.target] = namespace;\n            }\n            headerAction[SchemaTag.annotationPath] = `/${convertedIdentification}/${index}`;\n            headerActions.properties[stableId] = {\n                $ref: `${DEFINITION_LINK_PREFIX}${actionDefinitionKey}`\n            };\n        }\n    };\n}\n\n/**\n * Adds definitions for line items in object page sections to the app schema\n * @param {FacetConfig} facet - the given facet from the UI annotations\n * @param {string} facetKey - key of the facet, as used in annotation\n * @param {Definition} appSchema - app schema in general\n * @param {object} lineItemFacet - current lineItem facet\n * @param {ConvertedMetadata} oDataServiceAVT - complete service information, as returned by annotation vocabularies tool\n * @param {SapUiAppPageV4} v4Page Current page in manifest\n * @param {ExtensionLogger} logger - logger for exceptions\n */\nfunction handleLineItem(\n    facet: FacetConfig,\n    facetKey: string,\n    appSchema: Definition,\n    lineItemFacet: object,\n    oDataServiceAVT: ConvertedMetadata\n): Definition {\n    const lineItemId = getFacetKeyInSchema(facetKey);\n    const index = facetKey.lastIndexOf('::');\n    const annotation = index > -1 ? facetKey.substring(index + 2) : facetKey;\n    const tableDefinition = parseSchemaDefinition(DefinitionName.ObjectPageTable, facetKey, appSchema);\n    if (facet.entityType && annotation) {\n        tableDefinition[SchemaTag.annotationPath] = `/${facet.entityType.fullyQualifiedName}/${annotation}`;\n    }\n    tableDefinition.properties.columns = {\n        $ref: `${DEFINITION_LINK_PREFIX}${lineItemId}`\n    };\n    (tableDefinition.properties.toolBar as Definition).$ref = getFacetDefinitionLink(\n        DefinitionName.ObjectPageToolBar,\n        facetKey\n    );\n    //adjust quickVariantSelection\n    (tableDefinition.properties.quickVariantSelection as Definition).$ref = getFacetDefinitionLink(\n        DefinitionName.QuickVariantSelectionV4OP,\n        facetKey\n    );\n    const tableQVS = parseSchemaDefinition(DefinitionName.QuickVariantSelectionV4OP, facetKey, appSchema);\n    tableQVS.properties.paths['items'].$ref = getFacetDefinitionLink(DefinitionName.AnnotationPathAsObject, facetKey);\n    parseSchemaDefinition(DefinitionName.AnnotationPathAsObject, facetKey, appSchema);\n\n    addEnumForSingleTabVariant(facet.entityType, appSchema, `${DefinitionName.AnnotationPathAsObject}<${lineItemId}>`);\n    const dataForLineItem: LineItemDataForSchema = {\n        appSchema,\n        lineItemAnnotation: lineItemFacet['target'] as AnnotationTerm<LineItem>,\n        entityType: lineItemFacet['entityType'],\n        oDataServiceAVT,\n        lineItemId\n    };\n    addLineItemsTypeToSchema(dataForLineItem, DefinitionName.ObjectPageTableColumn);\n    return tableDefinition;\n}\n\n/**\n * Adds definitions for table section in object page sections to the app schema\n * @param {FacetConfig} facet - current facet.\n * @param {string} facetKey - facet key.\n * @param {Definition} appSchema - app specific schema that potentially gets enhanced.\n * @param {object} lineItemFacet - current lineItem facet\n * @param {GenerateSchemaParameters} generateParameters - list of API input parameters\n * @param {SapUiAppPageV4} v4Page Current page in manifest\n * @param {Definition} sections - schema of current sections definition.\n * @returns {object} sectionTable - section of app schema containing added table section\n */\nfunction handleSectionTable(\n    facet: FacetConfig,\n    facetKey: string,\n    appSchema: Definition,\n    lineItemFacet: FacetConfig,\n    generateParameters: GenerateAppSchemaParameters,\n    sections?: Definition\n): { sectionTable: Definition; table: Definition } {\n    if (sections) {\n        sections.properties[facetKey] = {\n            $ref: getFacetDefinitionLink(DefinitionName.ObjectPageSectionTableV4, facetKey)\n        };\n    }\n    const sectionTable = parseSchemaDefinition(DefinitionName.ObjectPageSectionTableV4, facetKey, appSchema);\n    addSectionTitleAndDescription(facet, sectionTable, getFacetKeyInSchema(facetKey));\n    sectionTable[SchemaTag.annotationPath] = facet.annotationPath;\n    sectionTable[SchemaTag.target] = facet.namespace;\n    sectionTable.properties.table['$ref'] = getFacetDefinitionLink(DefinitionName.ObjectPageTable, facetKey);\n    const table = handleLineItem(facet, facetKey, appSchema, lineItemFacet, generateParameters.serviceAVT);\n    return { sectionTable, table };\n}\n\n/**\n * Adds definitions for Identification and Form facet items in object page sections to the app schema\n * @param {FacetConfig} facet - current facet\n * @param {v4.SapUiAppPageV4} v4Page Current page in manifest\n * @param {string} facetKey - facet key\n * @param {object} sections - schema of current sections definition\n * @param {object} appSchema - app specific schema that potentially gets enhanced\n * @param {SectionType} sectionPrefix - prefix to distinguish Section and HeaderSection\n */\nfunction handleFormIdentification(\n    facet: FacetConfig,\n    facetKey: string,\n    sections: Definition,\n    appSchema: Definition,\n    sectionPrefix: SectionType\n) {\n    let definitionType: DefinitionName;\n    if (sectionPrefix === SectionType.Section) {\n        definitionType = DefinitionName.ObjectPageSectionForm;\n    } else if (sectionPrefix === SectionType.HeaderSection) {\n        definitionType = DefinitionName.ObjectPageHeaderSectionForm;\n    }\n    sections['properties'][facetKey] = {\n        $ref: getFacetDefinitionLink(definitionType, facetKey)\n    };\n    const formSection: Definition = parseSchemaDefinition(definitionType, facetKey, appSchema);\n    if (!facet.ID) {\n        formSection.properties = {};\n    }\n    addSectionTitleAndDescription(facet, formSection, facetKey);\n    formSection[SchemaTag.annotationPath] = facet.annotationPath;\n    formSection[SchemaTag.target] = facet.namespace;\n    formSection[SchemaTag.isViewNode] = true;\n    handleForm(sectionPrefix, facet, formSection, appSchema, FioriElementsVersion.v4, facetKey);\n}\n\n/**\n * Adds definitions for header sections (DataPoint, Chart) in object page sections to the app schema\n * @param {FacetConfig} facet - current facet.\n * @param {string} facetKey - facet key.\n * @param {object} sections - schema of current sections definition.\n * @param {object} appSchema - app specific schema that potentially gets enhanced.\n * @param {SectionType} facetDefinitionKey - key to identify new definition\n */\nfunction handleHeaderFacet(\n    facet: FacetConfig,\n    facetKey: string,\n    sections: Definition,\n    appSchema: Definition,\n    facetDefinitionKey: string\n) {\n    sections['properties'][facetKey] = {\n        $ref: `${DEFINITION_LINK_PREFIX}${facetDefinitionKey}`\n    };\n    const sectionFacet = parseSchemaDefinition(\n        DefinitionName.CommonHeaderFacetSettings,\n        facetDefinitionKey,\n        appSchema,\n        false\n    );\n    addTargetTitleAndSectionDescription(facet, sectionFacet, facetKey);\n    sectionFacet[SchemaTag.annotationPath] = facet.annotationPath;\n    sectionFacet[SchemaTag.target] = facet.namespace;\n    sectionFacet[SchemaTag.dataType] = determineDataTypeOfTarget(facet?.target);\n    sectionFacet[SchemaTag.isViewNode] = true;\n}\n\n/**\n * Adds definitions for Chart items in object page sections to the app schema\n * @param {FacetConfig | Chart | object} facet - current facet.\n * @param {string} facetKey - facet key.\n * @param {object} appSchema - app specific schema that potentially gets enhanced.\n * @param {EntityType} entityType - current entity type\n */\nfunction handleChartActions(\n    facet: FacetConfig | Chart | object,\n    facetKey: string,\n    appSchema: Definition,\n    entityType: EntityType\n): Definition {\n    const actions = parseSchemaDefinition(DefinitionName.ObjectPageToolBarActions, facetKey, appSchema);\n    actions.additionalProperties = false;\n    actions.properties = {};\n    if ((facet as Chart).Actions) {\n        let i = 0;\n        (facet as Chart).Actions.forEach((actionRecord) => {\n            const description = getDataFieldDescription(actionRecord as DataFieldAbstractTypes, entityType);\n            const prefix = actionRecord.$Type.split(UIVOCABULARYDOT)[1];\n            const actionId = (actionRecord.Action as string).replace('/', '::');\n            const toolBarActionsProperty = (actions.properties[`${prefix}::${actionRecord.Action}`] = {\n                $ref: getFacetDefinitionLink(DefinitionName.ObjectPageToolBarAction, actionId),\n                description\n            });\n            toolBarActionsProperty[SchemaTag.propertyIndex] = i;\n            toolBarActionsProperty[SchemaTag.annotationType] = actionRecord.$Type;\n            const toolBarAction = parseSchemaDefinition(\n                DefinitionName.ObjectPageToolBarAction,\n                prepareRef(actionId),\n                appSchema\n            );\n            toolBarAction[SchemaTag.annotationPath] = getFacetAnnotationPath(actionRecord);\n            toolBarAction[SchemaTag.dataType] = determineDataType(actionRecord);\n            toolBarAction.properties = {};\n            i++;\n        });\n    }\n    return actions;\n}\n\n/**\n * Adds definitions for Chart items in object page sections to the app schema\n * @param {FacetConfig | Chart | object} facet - current facet.\n * @param {string} facetKey - facet key.\n * @param {object} appSchema - app specific schema that potentially gets enhanced.\n * @param {EntityType} entityType - current entity type\n */\nfunction handleChart(\n    facet: FacetConfig | Chart | object,\n    facetKey: string,\n    appSchema: Definition,\n    entityType?: EntityType\n): { chart: Definition; chartActions: Definition } {\n    const chart = parseSchemaDefinition(DefinitionName.ObjectPageChart, facetKey, appSchema);\n    if (facet['Title']) {\n        chart.description = facet['Title'];\n    }\n    chart[SchemaTag.annotationPath] = getFacetAnnotationPath(facet as PresentationVariantV4);\n    chart[SchemaTag.dataType] = determineDataTypeOfTarget((facet as FacetConfig).target || facet);\n    chart[SchemaTag.isViewNode] = true;\n    chart.properties.toolBar['$ref'] = getFacetDefinitionLink(DefinitionName.ObjectPageToolBar, facetKey);\n    const chartToolBar = parseSchemaDefinition(DefinitionName.ObjectPageToolBar, facetKey, appSchema);\n\n    chartToolBar.properties.actions['$ref'] = getFacetDefinitionLink(DefinitionName.ObjectPageToolBarActions, facetKey);\n    const chartActions = handleChartActions(facet, facetKey, appSchema, entityType);\n    return { chart, chartActions };\n}\n\n/**\n * Adds definitions for Chart section in object page sections to the app schema\n * @param {FacetConfig} facet - current facet.\n * @param {string} facetKey - facet key.\n * @param {object} appSchema - app specific schema that potentially gets enhanced.\n * @param {object} sections - schema of current sections definition.\n * @param {EntityType} entityType - current entity type\n */\nfunction handleSectionChart(\n    facet: FacetConfig | Chart,\n    facetKey: string,\n    appSchema: Definition,\n    sections?: Definition,\n    entityType: EntityType = (facet as FacetConfig).entityType\n): { sectionChart: Definition; chart: Definition; chartActions?: Definition } {\n    if (sections) {\n        sections.properties[facetKey] = {\n            $ref: getFacetDefinitionLink(DefinitionName.ObjectPageSectionChart, facetKey)\n        };\n    }\n    const sectionChart = parseSchemaDefinition(DefinitionName.ObjectPageSectionChart, facetKey, appSchema);\n    addTargetTitleAndSectionDescription(facet as FacetConfig, sectionChart, facetKey);\n\n    sectionChart[SchemaTag.annotationPath] = getFacetAnnotationPath(facet);\n    sectionChart.properties.chart['$ref'] = getFacetDefinitionLink(DefinitionName.ObjectPageChart, facetKey);\n    const { chart, chartActions } = handleChart(\n        (facet as FacetConfig).target || facet,\n        facetKey,\n        appSchema,\n        entityType\n    );\n    return { sectionChart, chart, chartActions };\n}\n\n/**\n * Adds definitions for presentation variants in object page sections to the app schema\n * @param {FacetConfig} facet - the given facet from the UI annotations\n * @param {string} facetKey - key of the facet, as used in annotation\n * @param {Definition} appSchema - app schema in general\n * @param {object} sections - schema of current sections definition.\n * @param {GenerateSchemaParameters} generateParameters - list of API input parameters\n * @param {SapUiAppPageV4} v4Page Current page in manifest\n */\nfunction handleSectionPresentationVariant(\n    facet: FacetConfig,\n    facetKey: string,\n    appSchema: Definition,\n    sections: Definition,\n    generateParameters: GenerateAppSchemaParameters\n) {\n    let facetTarget, visualizationKey: string, target: object;\n    if (!facet?.target) {\n        log(generateParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOPRESENTATIONVARIANT', { key: facetKey }),\n            location: {\n                path: METADATAPATH\n            }\n        });\n        return;\n    }\n    const visualizations = (facet?.target as PresentationVariant)?.Visualizations;\n    const navPath = facetKey.lastIndexOf('::') > 0 ? facetKey.slice(0, facetKey.lastIndexOf('::')) : undefined;\n    if (visualizations?.[0]) {\n        if (visualizations[0].$target) {\n            facetTarget = visualizations[0].$target;\n            visualizationKey = `@${facetTarget.fullyQualifiedName.split('@')[1].split('/')[0]}`;\n            target = facetTarget;\n        } else {\n            facetTarget = visualizations[0];\n            visualizationKey =\n                '@' +\n                replaceAlias(`${facetTarget.targetString.split('@')[1].split('/')[0]}`, generateParameters.serviceAVT);\n            const navigationProp = generateParameters.entitySet.entityType.navigationProperties.find((prop) => {\n                return prop.name === navPath;\n            });\n            const targetType = navigationProp.targetType;\n            const visualization = visualizationKey?.split(UIVOCABULARYDOT)[1];\n            target = visualization && targetType?.annotations?.UI[visualization];\n        }\n    }\n    if (facetTarget) {\n        const visualizationType = visualizationKey.split(UIVOCABULARYDOT)[1];\n        const namespace = facet.target[SchemaTag.fullyQualifiedName].split('@')[0];\n        const fullVisualizationKey = navPath ? `${navPath}::${visualizationKey}` : visualizationKey;\n\n        if (visualizationType.startsWith(Visualization.Chart)) {\n            sections.properties[`${facetKey}<${visualizationKey}>`] = {\n                $ref: getFacetDefinitionLink(DefinitionName.ObjectPageSectionChart, fullVisualizationKey)\n            };\n            const { sectionChart, chart } = handleSectionChart(\n                facetTarget as Chart,\n                fullVisualizationKey,\n                appSchema,\n                undefined,\n                facet.entityType\n            );\n            sectionChart[SchemaTag.annotationPath] = facet.annotationPath;\n            addTargetTitleAndSectionDescription(facet, sectionChart, facetKey);\n            chart[SchemaTag.annotationPath] = `/${namespace}/${visualizationKey}`;\n            chart[SchemaTag.target] = namespace;\n        } else if (visualizationType.startsWith(Visualization.LineItem)) {\n            sections.properties[`${facetKey}<${visualizationKey}>`] = {\n                $ref: getFacetDefinitionLink(DefinitionName.ObjectPageSectionTableV4, fullVisualizationKey)\n            };\n            const { sectionTable, table } = handleSectionTable(\n                facet,\n                fullVisualizationKey,\n                appSchema,\n                { target, entityType: facet.entityType } as FacetConfig,\n                generateParameters\n            );\n            sectionTable[SchemaTag.annotationPath] = facet.annotationPath;\n            addTargetTitleAndSectionDescription(facet, sectionTable, facetKey);\n            delete sectionTable[SchemaTag.isViewNode];\n            table[SchemaTag.annotationPath] = `/${namespace}/${visualizationKey}`;\n            table[SchemaTag.target] = namespace;\n        }\n    }\n}\n\n/**\n * Creates a section definition in app schema.\n * @param {GenerateSchemaParameters} generateParameters - list of API input parameters\n * @param {FacetConfigs} facets - list of all facets.\n * @param {string} facetKey - facet key.\n * @param {object} sections - schema of current sections definition.\n * @param {object} appSchema - app specific schema that potentially gets enhanced.\n * @param {SectionType} sectionPrefix - prefix to distinguish Section and HeaderSection\n * @param {SapUiAppPageV4} v4Page Current page in manifest\n */\nfunction addSection(\n    generateParameters: GenerateAppSchemaParameters,\n    facets: FacetConfigs,\n    facetKey: string,\n    sections: Definition,\n    appSchema: Definition,\n    sectionPrefix: SectionType,\n    v4Page: v4.SapUiAppPageV4\n): void {\n    const facet: FacetConfig = facets[facetKey];\n    const facetDefinitionKey = `ObjectPage${sectionPrefix}${facet.base}<${getFacetKeyInSchema(facetKey)}>`;\n    switch (facet.base) {\n        case FacetBase.PresentationVariant: {\n            handleSectionPresentationVariant(facet, facetKey, appSchema, sections, generateParameters);\n            break;\n        }\n        case FacetBase.CollectionFacet: {\n            handleCollection(facet, facetKey, appSchema, sections, sectionPrefix, generateParameters, v4Page);\n            break;\n        }\n        case FacetBase.LineItem: {\n            if (sectionPrefix === SectionType.Section) {\n                const lineItemFacet = facets[facetKey];\n                handleSectionTable(facet, facetKey, appSchema, lineItemFacet, generateParameters, sections);\n            }\n            break;\n        }\n        case FacetBase.Form:\n        case FacetBase.Identification: {\n            handleFormIdentification(facet, facetKey, sections, appSchema, sectionPrefix);\n            break;\n        }\n        case FacetBase.DataPoint: {\n            handleHeaderFacet(facet, facetKey, sections, appSchema, facetDefinitionKey);\n            break;\n        }\n        case FacetBase.Chart: {\n            if (sectionPrefix === SectionType.HeaderSection) {\n                handleHeaderFacet(facet, facetKey, sections, appSchema, facetDefinitionKey);\n            } else if (sectionPrefix === SectionType.Section) {\n                handleSectionChart(facet, facetKey, appSchema, sections);\n            }\n            break;\n        }\n        case FacetBase.Address:\n        case FacetBase.Contact: {\n            handleAddressContact(facet, facetKey, sections, appSchema, sectionPrefix);\n            break;\n        }\n        default: {\n            sections['properties'][facetKey] = createDefaultSection(appSchema, facet, facetKey);\n        }\n    }\n}\n\n/**\n * Adds definitions for collections in object page sections to the app schema\n * @param {FacetConfig} facet - the given facet from the UI annotations\n * @param {string} facetKey - key of the facet, as used in annotation\n * @param {Definition} appSchema - app schema in general\n * @param {Definition} sections - schema of current sections definition.\n * @param {SectionType} sectionPrefix - prefix to distinguish Section and HeaderSection\n * @param {GenerateSchemaParameters} generateParameters - list of API input parameters\n * @param {SapUiAppPageV4} v4Page Current page in manifest\n */\nfunction handleCollection(\n    facet: FacetConfig,\n    facetKey: string,\n    appSchema: Definition,\n    sections: Definition,\n    sectionPrefix: SectionType,\n    generateParameters: GenerateAppSchemaParameters,\n    v4Page: v4.SapUiAppPageV4\n) {\n    const collectionFacet = (sections.properties[facetKey] = createDefaultSection(appSchema, facet, facetKey));\n    collectionFacet.properties = {\n        subsections: {\n            additionalProperties: false,\n            type: 'object',\n            properties: {},\n            description: 'Subsections'\n        }\n    };\n    const subSections = collectionFacet.properties.subsections;\n    subSections[SchemaTag.annotationPath] = facet.annotationPath;\n    subSections[SchemaTag.target] = facet.namespace;\n    subSections[SchemaTag.keys] = [\n        {\n            name: SchemaKeyName.id,\n            value: facet.ID\n        }\n    ];\n    subSections[SchemaTag.isViewNode] = true;\n    for (const key in facet.facets) {\n        addSection(generateParameters, facet.facets, key, subSections as Definition, appSchema, sectionPrefix, v4Page);\n    }\n}\n\n/**\n * Derives the sections from the UI.Facets annotation and adds them to the schema\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {object} appSchema - application specific JSON schema\n * @param {SapUiAppPageV4} v4Page - current page\n */\nfunction addSections(\n    generateParameters: GenerateAppSchemaParameters,\n    appSchema: Definition,\n    v4Page: v4.SapUiAppPageV4\n): void {\n    // Get facet annotations\n    const facets: FacetConfigs = getObjectPageFacets(\n        generateParameters.entitySet.entityType,\n        generateParameters.serviceAVT,\n        FioriElementsVersion.v4,\n        generateParameters.logger\n    );\n    if (!facets) {\n        delete appSchema.definitions[DefinitionName.ObjectPageSubSections];\n        return;\n    }\n\n    const sections = appSchema.definitions[DefinitionName.Sections] as Definition;\n\n    for (const facetKey in facets) {\n        addSection(generateParameters, facets, facetKey, sections, appSchema, SectionType.Section, v4Page);\n    }\n    // Custom sections as part of sections\n    if (appSchema.definitions[DefinitionName.CustomSections]) {\n        sections.properties = {\n            ...sections.properties,\n            ...(appSchema.definitions[DefinitionName.CustomSections] as Definition).properties\n        };\n    }\n}\n\n/**\n * Derives the header sections from the UI.HeaderFacets annotation and adds them to the schema\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {object} appSchema - application specific JSON schema\n * @param {EntityType} entityType - current entity type\n * @param {SapUiAppPageV4} v4Page - current page in manifest\n */\nfunction addHeaderSections(\n    generateParameters: GenerateAppSchemaParameters,\n    appSchema: Definition,\n    entityType: EntityType,\n    v4Page: v4.SapUiAppPageV4\n): void {\n    // Get facet annotations\n    const facets: FacetConfigs = getObjectPageHeaderFacets(\n        entityType,\n        generateParameters.serviceAVT,\n        FioriElementsVersion.v4,\n        generateParameters.logger\n    );\n    const sections = appSchema.definitions[DefinitionName.HeaderSections] as Definition;\n    sections.properties = {};\n    sections.additionalProperties = false;\n\n    if (!facets) {\n        return;\n    }\n    for (const facetKey in facets) {\n        addSection(generateParameters, facets, facetKey, sections, appSchema, SectionType.HeaderSection, v4Page);\n    }\n    //delete generic definitions\n    delete appSchema.definitions[DefinitionName.ObjectPageHeaderSectionForm];\n    delete appSchema.definitions[DefinitionName.ObjectPageHeaderSectionChart];\n    delete appSchema.definitions[DefinitionName.ObjectPageHeaderSectionDataPoint];\n    delete appSchema.definitions[DefinitionName.ObjectPageHeaderSectionContact];\n    delete appSchema.definitions[DefinitionName.ObjectPageHeaderSectionAddress];\n}\n\n/**\n * Adds the related facets keys 'enum' to the app schema\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {object} schema - app specific schema that potentially gets enhanced\n * @param {string} entitySetName - entity set of the actual (object) page\n * @param {SapUiAppPageV4[]} pages - list of all pages\n */\nfunction addRelatedFacetKeysType(\n    generateParameters: GenerateAppSchemaParameters,\n    schema: object,\n    entitySetName: string,\n    pages: v4.SapUiAppPageV4[]\n): void {\n    Object.keys(pages).forEach((element) => {\n        if (\n            pages[element].options &&\n            pages[element].options.settings &&\n            pages[element].options.settings.entitySet === entitySetName &&\n            pages[element].name === v4.FE_TEMPLATE_V4_OBJECT_PAGE\n        ) {\n            // Find sections from annotation\n            const facetSections: FacetSection[] = getObjectPageFacetSection(\n                generateParameters.entitySet.entityType,\n                generateParameters.serviceAVT,\n                generateParameters.logger\n            );\n            // Find custom sections ids from manifest\n            const page: v4.SapUiAppPageV4 = pages[element];\n            const customSections = page.options?.settings?.content?.body?.sections;\n            if (customSections) {\n                for (const key in customSections) {\n                    const customSection = customSections[key];\n                    // Avoid duplications\n                    if (!facetSections.some((section: FacetSection) => section.key === key)) {\n                        facetSections.push({\n                            key,\n                            title: customSection['title'],\n                            custom: true\n                        });\n                    }\n                }\n            }\n            // Update schema definition\n            addDefinitionForRelatedFacetKeys(schema, [DefinitionName.ObjectPageCustomSectionFragment], facetSections, [\n                'ID',\n                'label',\n                'key'\n            ]);\n        }\n    });\n}\n\n/**\n * Add Object Page Header to app-specific schema\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {Definition} appSchema Schema of the app\n * @param {SapUiAppPageV4} v4Page - current page in manifest\n */\nfunction addHeader(\n    generateParameters: GenerateAppSchemaParameters,\n    appSchema: Definition,\n    v4Page: v4.SapUiAppPageV4\n): void {\n    const entityType = generateParameters.entitySet.entityType;\n    addCommonHeaderSchema(appSchema, entityType);\n\n    // Add header actions\n    addHeaderActions(appSchema, entityType, generateParameters.serviceAVT, addHeaderActionCallBackV4);\n\n    // Add header sections\n    if (entityType) {\n        appSchema.definitions[DefinitionName.HeaderSections][\n            SchemaTag.annotationPath\n        ] = `/${entityType.fullyQualifiedName}/@${UIAnnotationTerms.HeaderFacets}`;\n    }\n    addHeaderSections(generateParameters, appSchema, entityType, v4Page);\n}\n\n/**\n * Generates an app specific schema out of the generic schema.\n * Generic types are replaced by information from the app specific annotations.\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param genericSchema  - generic JSON schema of an object page\n * @param entitySet - entity set (AVT object) that is relevant for the given page\n *\n * @returns the app specific JSON schema\n */\nexport function generateObjectPageSchemaV4(\n    generateParameters: GenerateAppSchemaParameters,\n    genericSchema: object,\n    entitySet: EntitySet\n): object {\n    const appSchema: Definition = JSON.parse(JSON.stringify(genericSchema));\n\n    // Change reference to generated sections\n    appSchema.properties.sections = {\n        $ref: `${DEFINITION_LINK_PREFIX}${DefinitionName.Sections}`\n    };\n\n    generateParameters.entitySet = entitySet;\n\n    if (\n        !generateParameters.manifest[ManifestSection.ui5].routing ||\n        !generateParameters.manifest[ManifestSection.ui5].routing.targets\n    ) {\n        log(generateParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOROUTING'),\n            location: {\n                path: MANIFESTPATH\n            }\n        });\n        return appSchema;\n    }\n\n    //initialize sections\n    const sections = (appSchema.definitions[DefinitionName.Sections] = {\n        type: 'object',\n        properties: {},\n        additionalProperties: false,\n        description: DefinitionName.Sections\n    } as Definition);\n    sections[SchemaTag.isViewNode] = true;\n    if (entitySet) {\n        const pages = generateParameters.manifest[ManifestSection.ui5].routing\n            .targets as unknown as v4.SapUiAppPageV4[];\n        if (!pages) {\n            log(generateParameters.logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOPAGES', { appId: generateParameters.manifest['sap.app']['id'] }),\n                location: {\n                    path: MANIFESTPATH,\n                    range: [ManifestSection.generic]\n                }\n            });\n            return appSchema;\n        }\n        const v4Page = findPageV4(pages, v4.FE_TEMPLATE_V4_OBJECT_PAGE, entitySet, generateParameters.logger);\n        if (!v4Page) {\n            return appSchema;\n        }\n\n        // Add Header\n        addHeader(generateParameters, appSchema, v4Page);\n\n        // Add sections\n        sections[SchemaTag.isViewNode] = true;\n        if (entitySet?.entityType) {\n            sections[\n                SchemaTag.annotationPath\n            ] = `/${entitySet.entityType.fullyQualifiedName}/@${UIAnnotationTerms.Facets}`;\n        }\n        addSections(generateParameters, appSchema, v4Page);\n\n        // Custom Section facets\n        addRelatedFacetKeysType(generateParameters, appSchema, entitySet.name, pages);\n\n        // Add Footer (actions only)\n        addFooterActions(appSchema, generateParameters);\n    }\n    // Delete generic definitions from schema\n    delete appSchema.definitions[DefinitionName.CommonHeaderFacetSettings];\n    delete appSchema.definitions[DefinitionName.GenericColumnsOP];\n    delete appSchema.definitions[DefinitionName.GenericSections];\n    delete appSchema.definitions[DefinitionName.ObjectPageChart];\n    delete appSchema.definitions[DefinitionName.ObjectPageSectionAddress];\n    delete appSchema.definitions[DefinitionName.ObjectPageSectionChart];\n    delete appSchema.definitions[DefinitionName.ObjectPageSectionContact];\n    delete appSchema.definitions[DefinitionName.ObjectPageSectionDataPoint];\n    delete appSchema.definitions[DefinitionName.ObjectPageSectionForm];\n    delete appSchema.definitions[DefinitionName.ObjectPageSectionTableV4];\n    delete appSchema.definitions[DefinitionName.ObjectPageSectionPresentationVariant];\n    delete appSchema.definitions[DefinitionName.ObjectPageSubSections];\n    delete appSchema.definitions[DefinitionName.ObjectPageTable];\n    delete appSchema.definitions[DefinitionName.ObjectPageToolBar];\n    delete appSchema.definitions[DefinitionName.ObjectPageToolBarAction];\n    delete appSchema.definitions[DefinitionName.ObjectPageToolBarActions];\n    delete appSchema.definitions[DefinitionName.QuickVariantSelectionV4OP];\n    updatePropertyIndices(appSchema, ROOT_PROPERTIES_ORDER);\n    return appSchema;\n}\n", "import type { GenerateAppSchemaParameters } from '@sap/ux-specification-types';\n\n/**\n * Generates an app specific schema for the FE V4 Freestyle page from the generic schema.\n * Generic types are replaced by information from the app specific annotations.\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param genericSchema  - generic JSON schema of an object page\n *\n * @returns {object} application-specific schema of the freestyle page\n */\nexport function generateFreestyleSchemaV4(\n    _generateParameters: GenerateAppSchemaParameters,\n    genericSchema: object\n): object {\n    return JSON.parse(JSON.stringify(genericSchema));\n}\n", "import { parseAndMergeAndConvert } from '../../common/utils';\nimport { generateFreestyleSchemaV4, generateListReportSchemaV4, generateObjectPageSchemaV4 } from '.';\nimport type { ExtensionLogger, GenerateAppSchemaParameters, FileData, Manifest } from '@sap/ux-specification-types';\nimport { v4, FioriElementsVersion, TemplateType, LogSeverity, METADATAPATH } from '@sap/ux-specification-types';\nimport { initI18n } from '../../../i18n/i18n';\nimport { log } from '../../../extensionLogger';\nimport i18next from 'i18next';\nimport { getEntitySetByEntitySetName } from '../../common/importProject';\n\n/**\n * Generates the app specific schema of an object page out of the generic schema for the same page.\n * Generic types are replaced by information from the app specific annotations.\n *\n * @param genericSchema - generic JSON schema of a list report\n * @param entitySetName - the base entity set of the given page\n * @param annotations - list of all annotation files (file content plus URI as identifier)\n * @param manifest - manifest.json of the app\n * @param {ExtensionLogger} logger - Logger class for logging messages\n * @param {FileData[]} fragments - list of fragment files and their content\n *\n * @returns the app specific JSON schema\n */\nexport function generateObjectPageInterfaceV4(\n    genericSchema: object,\n    entitySetName: string,\n    annotations: FileData[],\n    manifest: Manifest,\n    logger?: ExtensionLogger,\n    fragments?: FileData[]\n): object {\n    const serviceAVT = parseAndMergeAndConvert(annotations, logger);\n    const generateParameters: GenerateAppSchemaParameters = {\n        templateType: TemplateType.ListReportObjectPageV4,\n        fioriElementsVersion: FioriElementsVersion.v4,\n        manifest,\n        fragments,\n        serviceAVT,\n        logger\n    };\n    const entitySet = getEntitySetByEntitySetName(entitySetName, serviceAVT);\n\n    if (!entitySet) {\n        log(generateParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('ENTITYSETNOTFOUND', { entitySet: entitySetName }),\n            location: {\n                path: METADATAPATH\n            }\n        });\n    }\n    return generateObjectPageSchemaV4(generateParameters, genericSchema, entitySet);\n}\n\n/**\n * Generates the app specific schema of a list report out of the generic schema.\n * Generic types are replaced by information from the app specific annotations.\n * @param {TemplateType} templateType - the template type allows distinguishing LR and ALP\n * @param genericSchema - generic JSON schema of a list report\n * @param entitySetName - the base entity set of the given page\n * @param annotations - list of all annotation files (file content plus URI as identifier)\n * @param {ExtensionLogger} logger - Logger class for logging messages\n * @param manifest - manifest.json of the app\n *\n * @returns the app specific JSON schema\n */\nexport function generateListReportInterfaceV4(\n    templateType: TemplateType,\n    genericSchema: object,\n    entitySetName: string,\n    annotations: FileData[],\n    logger?: ExtensionLogger,\n    manifest?: Manifest\n): object {\n    initI18n();\n    const serviceAVT = parseAndMergeAndConvert(annotations, logger);\n    const entitySet = serviceAVT?.entitySets.find((es) => es.name === entitySetName);\n    const generateParameters: GenerateAppSchemaParameters = {\n        templateType,\n        fioriElementsVersion: FioriElementsVersion.v4,\n        manifest,\n        serviceAVT,\n        logger\n    };\n\n    const templateName =\n        templateType === TemplateType.ListReportObjectPageV4 ? v4.FE_TEMPLATE_V4_LIST_REPORT : v4.FE_TEMPLATE_V4_ALP;\n    return generateListReportSchemaV4(generateParameters, genericSchema, entitySet, templateName);\n}\n\n/**\n * Generates the app specific schema of a freestyle page out of the generic schema.\n * Generic types are replaced by information from the app specific annotations.\n * @param {TemplateType} templateType - the template type allows distinguishing LR and ALP\n * @param genericSchema - generic JSON schema of a list report\n * @param annotations - list of all annotation files (file content plus URI as identifier)\n * @param {ExtensionLogger} logger - Logger class for logging messages\n * @param manifest - manifest.json of the app\n *\n * @returns the app specific JSON schema\n */\nexport function generateFreestyleInterfaceV4(\n    templateType: TemplateType,\n    genericSchema: object,\n    annotations: FileData[],\n    manifest?: Manifest,\n    entitySetName?: string,\n    logger?: ExtensionLogger\n): object {\n    const serviceAVT = parseAndMergeAndConvert(annotations, logger);\n    const generateParameters: GenerateAppSchemaParameters = {\n        templateType,\n        fioriElementsVersion: FioriElementsVersion.v4,\n        manifest,\n        serviceAVT,\n        logger\n    };\n    return generateFreestyleSchemaV4(generateParameters, genericSchema);\n}\n", "import { syncRule, childId, validity } from '../common/decoration/decorators';\nimport type { v4, Target, Manifest, Application } from '@sap/ux-specification-types';\nimport { UIAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport { QUICKVARPATH } from '@sap/ux-specification-types';\n\nexport const getSettingsPathForPage = (pageName: string[]): string => {\n    return `sap.ui5/routing/targets/${pageName[0]}/options/settings`;\n};\n\nexport const getSettingsPathForLRViewsPaths = (pageName: string[]): string => {\n    return getSettingsPathForPage(pageName) + `/views/paths`;\n};\n\nexport const getSettingsPathForHeaderOP = (pageName: string[]): string => {\n    return getSettingsPathForPage(pageName) + `/content/header`;\n};\n\nexport const getControlConfigurationPath = (pageName: string[]): string => {\n    return getSettingsPathForPage(pageName) + '/controlConfiguration';\n};\n\nexport const getHeaderFacetSettingPath = (pageName: string[], _manifest: Manifest, sectionId: string): string => {\n    return getControlConfigurationPath(pageName) + `/@${UIAnnotationTerms.HeaderFacets}/facets/${sectionId}`;\n};\n\n/**\n * Common function that calculates the path in manifest for table settings of a list report or ALP table view\n * @param pageName - page name in manifest\n * @param manifest - manifest (not used)\n * @param targetAnnotationEncoded - encoded target annotation (not used)\n * @param viewKey - view key (not used)\n * @param targetAnnotation - target annotation, i.e. the line item (with or without qualifier)\n * @returns - path as string\n */\nexport const getTableSettingsPathForView = (\n    pageName: string[],\n    _manifest: Manifest,\n    _targetAnnotationEncoded: string,\n    _viewKey: string,\n    targetAnnotation: string\n): string => {\n    const annotationEncoded = targetAnnotation?.replace(/\\//gi, '??');\n    return annotationEncoded\n        ? getControlConfigurationPath(pageName) + `/${annotationEncoded}/tableSettings`\n        : undefined;\n};\n\nexport const getTableSettingsPathForLR = (\n    pageName: string[],\n    manifest: Manifest,\n    targetAnnotationEncoded: string,\n    columnKey: string,\n    targetAnnotation: string\n): string => {\n    if (targetAnnotation) {\n        return getTableSettingsPathForView(pageName, manifest, targetAnnotationEncoded, columnKey, targetAnnotation);\n    } else {\n        return getControlConfigurationPath(pageName) + `/@${UIAnnotationTerms.LineItem}/tableSettings`;\n    }\n};\n\nexport const getQuickVariantPath = (\n    pageName: string[],\n    manifest: Manifest,\n    targetAnnotationEncoded: string,\n    columnKey: string,\n    targetAnnotation: string\n): string => {\n    return (\n        getTableSettingsPathForLR(pageName, manifest, targetAnnotationEncoded, columnKey, targetAnnotation) +\n        QUICKVARPATH\n    );\n};\n\nexport const getColumnsPathForView = (\n    pageName: string[],\n    _manifest: Manifest,\n    _targetAnnotationEncoded: string,\n    columnKey: string,\n    targetAnnotation: string\n): string => {\n    const annotationEncoded = targetAnnotation.replace(/\\//gi, '??');\n    return getControlConfigurationPath(pageName) + `/${annotationEncoded}/columns/${columnKey}`;\n};\n\nexport const getColumnsPathForLR = (\n    pageName: string[],\n    manifest: Manifest,\n    targetAnnotationEncoded: string,\n    columnKey: string,\n    targetAnnotation: string\n): string => {\n    if (targetAnnotation) {\n        return getColumnsPathForView(pageName, manifest, targetAnnotationEncoded, columnKey, targetAnnotation);\n    } else {\n        return getControlConfigurationPath(pageName) + `/@${UIAnnotationTerms.LineItem}/columns/${columnKey}`;\n    }\n};\n\nexport const getActionsPathForView = (\n    pageName: string[],\n    _manifest: Manifest,\n    _targetAnnotationEncoded: string,\n    columnKey: string,\n    targetAnnotation: string\n): string => {\n    const annotationEncoded = targetAnnotation.replace(/\\//gi, '::');\n    return getControlConfigurationPath(pageName) + `/${annotationEncoded}/actions/${columnKey}`;\n};\n\nexport const getActionsPathForLR = (\n    pageName: string[],\n    manifest: Manifest,\n    targetAnnotationEncoded: string,\n    columnKey: string,\n    targetAnnotation: string\n): string => {\n    if (targetAnnotation) {\n        return getActionsPathForView(pageName, manifest, targetAnnotationEncoded, columnKey, targetAnnotation);\n    } else {\n        return getControlConfigurationPath(pageName) + `/@${UIAnnotationTerms.LineItem}/actions/${columnKey}`;\n    }\n};\n\nexport const getColumnsPathForOP = (\n    pageName: string[],\n    _manifest: Manifest,\n    sectionId: string,\n    columnKey: string\n): string => {\n    return getControlConfigurationPath(pageName) + `/${sectionId}/columns/${columnKey}`;\n};\n\nexport const getActionsPathForOP = (\n    pageName: string[],\n    _manifest: Manifest,\n    sectionId: string,\n    columnKey: string\n): string => {\n    return getControlConfigurationPath(pageName) + `/${sectionId}/actions/${columnKey.replace('/', '??')}`;\n};\n\nexport const getTableSettingsPathForOP = (pageName: string[], _manifest: Manifest, sectionId: string): string => {\n    return getControlConfigurationPath(pageName) + `/${sectionId}/tableSettings`;\n};\n\nexport const getCustomSectionPath = (\n    pageName: string[],\n    _manifest: Manifest,\n    sectionId: string,\n    pathPart?: string\n): string => {\n    let path = getSettingsPathForPage(pageName) + `/content/body/sections/${sectionId}`;\n    if (pathPart) {\n        path += '/' + pathPart;\n    }\n    return path;\n};\n\nexport class ApplicationV4 implements Application {\n    $schema?: string;\n    id?: string;\n    pages?: v4.Pages;\n    home?: string;\n    target?: Target;\n    @childId('settings')\n    settings?: AppSettings;\n}\n\nexport class AppSettings implements v4.AppSettings {\n    @syncRule({\n        manifest: {\n            path: (): string => 'sap.app'\n        }\n    })\n    title?: string;\n\n    @syncRule({\n        manifest: {\n            path: (): string => 'sap.app'\n        }\n    })\n    description?: string;\n\n    @syncRule({\n        manifest: {\n            path: (): string => 'sap.ui5/routing/config'\n        }\n    })\n    @validity({\n        since: '1.78.0'\n    })\n    flexibleColumnLayout?: v4.FlexibleColumnLayoutV4;\n\n    @syncRule({\n        manifest: {\n            path: (): string => 'sap.ui5'\n        }\n    })\n    @validity({\n        since: '1.56.0'\n    })\n    flexEnabled?: boolean;\n}\n", "import {\n    PageTypeV4,\n    SchemaType,\n    ManifestSection,\n    MANIFESTPATH,\n    SchemaTag,\n    DefinitionName,\n    LogSeverity,\n    METADATAPATH\n} from '@sap/ux-specification-types';\nimport type { v4, ImportListReportV4Parameters, SapUi5RoutingTarget } from '@sap/ux-specification-types';\nimport { DEFINITION_LINK_PREFIX, getPageTypeV4, removeEmptyStructure, getDefinitionKey } from '../../../common';\nimport { importSettingsOfObject } from '../utils';\nimport { initI18n } from '../../../../i18n/i18n';\nimport i18next from 'i18next';\nimport { log } from '../../../../extensionLogger';\nimport { MetadataInstanceFactoryV4 as Factory } from '../../export/factory';\nimport type { MetadataInstanceInterface } from '../../../common/decoration/factory';\nimport type { Definition } from 'typescript-json-schema';\nimport { UIAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/UI';\n\n/**\n * Imports the content of annotation-based as well as custom columns\n * @param {ListReportConfig | AnalyticalListPageConfig} config - the configuration to be filled\n * @param {ImportListReportV4Parameters} importParameters  - object comprising all input data\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param {PageTypeV4} pageType - page type\n * @param {SapUiAppPageV4} page - page in manifest\n */\nfunction transferColumns(\n    config: v4.Table | v4.LRTableView,\n    importParameters: ImportListReportV4Parameters,\n    factory: MetadataInstanceInterface,\n    pageType: PageTypeV4,\n    routingId: string,\n    configId?: string,\n    viewId?: string\n) {\n    const schemaDefinitions = importParameters.jsonSchema.definitions;\n    const lineItemsId = configId && configId !== `@${UIAnnotationTerms.LineItem}` ? configId : DefinitionName.LineItems;\n    const lineItems = schemaDefinitions[lineItemsId] as Definition;\n    if (lineItems && Object.keys(lineItems.properties).length > 0) {\n        config.columns = {};\n        for (const columnKey in lineItems.properties) {\n            const columnDefinition = (schemaDefinitions[lineItemsId] as Definition).properties[columnKey] as Definition;\n            const schemaPropertyName = columnDefinition.$ref.split(DEFINITION_LINK_PREFIX)[1].split('<')[0];\n            config.columns[columnKey] = factory.createInstance(pageType, schemaPropertyName);\n            const targetAnnotation = viewId || configId;\n            importSettingsOfObject(\n                config.columns[columnKey],\n                importParameters.manifest,\n                schemaDefinitions[schemaPropertyName] as Definition,\n                routingId,\n                [columnKey, targetAnnotation],\n                targetAnnotation,\n                importParameters.logger\n            );\n            removeEmptyStructure(config.columns, columnKey);\n        }\n        removeEmptyStructure(config, 'columns');\n    } else {\n        const views = (importParameters.manifest['sap.ui5']?.routing?.targets?.[routingId] as SapUi5RoutingTarget)\n            ?.options?.settings?.views;\n        if (!views || views.paths.length < 1) {\n            log(importParameters.logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOLINEITEMS'),\n                location: {\n                    path: METADATAPATH\n                }\n            });\n        }\n    }\n}\n\n/**\n * Import table toolbar actions of list report\n * @param {ImportListReportV4Parameters} importParameters  - object comprising all input data\n * @param {ListReportConfigV4} config - the configuration to be filled\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param {SapUiAppPageV4} page - page in manifest\n * @param {PageTypeV4} pageType - page type\n */\nfunction importActions(\n    importParameters: ImportListReportV4Parameters,\n    tableConfig: v4.Table | v4.LRTableView | v4.ALPTableView,\n    factory: MetadataInstanceInterface,\n    pageType: PageTypeV4,\n    routingId: string,\n    columnDefinitionName: string = DefinitionName.LineItems,\n    viewId?: string\n) {\n    const schemaDefinitions = importParameters.jsonSchema.definitions;\n    let targetAnnotation = viewId;\n    if (\n        !targetAnnotation &&\n        [DefinitionName.LineItems, `${DefinitionName.LineItems}OfSPV::LineItem`].indexOf(columnDefinitionName) === -1\n    ) {\n        targetAnnotation = `@${UIAnnotationTerms.LineItem}#${columnDefinitionName.split('::').pop()}`;\n    }\n    const actionsDefinition = schemaDefinitions[`${DefinitionName.Actions}<${columnDefinitionName}>`];\n    if (typeof actionsDefinition === 'object') {\n        for (const actionKey in actionsDefinition.properties) {\n            const actionDefinition = actionsDefinition.properties[actionKey];\n            if (typeof actionDefinition === 'object' && actionDefinition.$ref) {\n                const definitionKey = getDefinitionKey(actionDefinition.$ref);\n                const schemaPropertyName = definitionKey.split('<')[0];\n                tableConfig.toolBar.actions[actionKey] = factory.createInstance(pageType, schemaPropertyName);\n\n                importSettingsOfObject(\n                    tableConfig.toolBar.actions[actionKey],\n                    importParameters.manifest,\n                    schemaDefinitions[definitionKey] as Definition,\n                    routingId,\n                    [actionKey, targetAnnotation]\n                );\n                removeEmptyStructure(tableConfig.toolBar.actions, actionKey);\n            }\n        }\n    }\n}\n\nfunction transferToolBar(\n    importParameters: ImportListReportV4Parameters,\n    config: v4.ListReportConfigV4 | v4.Table,\n    factory: MetadataInstanceInterface,\n    pageType: PageTypeV4,\n    routingId: string,\n    columnDefinitionName: string = DefinitionName.LineItems,\n    viewId?: string\n) {\n    const toolbarInstance = factory.createInstance(pageType, DefinitionName.ToolBar, {\n        actions: {}\n    });\n    let table;\n    if (!viewId && config && 'table' in config) {\n        table = config.table;\n    } else {\n        table = config;\n    }\n    table.toolBar = toolbarInstance;\n\n    importSettingsOfObject(\n        table.toolBar,\n        importParameters.manifest,\n        importParameters.jsonSchema.definitions[DefinitionName.ToolBarLR],\n        routingId,\n        []\n    );\n    importActions(importParameters, table, factory, pageType, routingId, columnDefinitionName, viewId);\n\n    removeEmptyStructure(table.toolBar, 'actions');\n    removeEmptyStructure(table, 'toolBar');\n}\n\n/**\n * Determines the target annotation of a list report view or defaultTemplateAnnotationPath\n * @param schemaDefinitions - app schema definitions\n * @param definitionName - current definition name\n * @returns the target annotation as string\n */\nfunction determineTargetAnnotationOfView(schemaDefinitions: Definition, definitionName: string): string | undefined {\n    const lineItemAnnotation = schemaDefinitions[definitionName]?.[SchemaTag.annotationPath];\n    const targetAnnotation = lineItemAnnotation?.substr(lineItemAnnotation.lastIndexOf('@'));\n    return targetAnnotation;\n}\n\n/**\n * Import chart & table view of ALP\n * @param {ImportListReportV4Parameters} importParameters  - object comprising all input data\n * @param {ListReportConfigV4} config - the configuration to be filled\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param {SapUiAppPageV4} page - page in manifest\n * @param {PageTypeV4} pageType - page type\n * @param {string} routingId - page key in manifest\n */\nfunction importALPViews(\n    importParameters: ImportListReportV4Parameters,\n    config: v4.ListReportConfigV4,\n    factory: MetadataInstanceInterface,\n    pageType: PageTypeV4,\n    routingId: string\n): void {\n    const schemaDefinitions = importParameters.jsonSchema.definitions;\n    //chart view\n    config.chart = factory.createInstance(pageType, DefinitionName.ALPChart);\n    const chartDefinition = schemaDefinitions[DefinitionName.ALPChart] as Definition;\n    const chartAnnotationPath = chartDefinition[SchemaTag.annotationPath];\n    importSettingsOfObject(config.chart, importParameters.manifest, chartDefinition, routingId, [\n        chartDefinition[SchemaTag.key],\n        chartAnnotationPath?.substr(chartAnnotationPath.lastIndexOf('@'))\n    ]);\n    config.chart.toolBar = factory.createInstance(pageType, DefinitionName.ToolBar, { actions: {} });\n    importSettingsOfObject(\n        config.chart.toolBar,\n        importParameters.manifest,\n        schemaDefinitions[DefinitionName.ViewChartToolBar] as Definition,\n        routingId,\n        []\n    );\n    //table view\n    const tableAnnotationPath = schemaDefinitions[DefinitionName.ALPTable][SchemaTag.annotationPath];\n    if (tableAnnotationPath) {\n        const tableDefinition = schemaDefinitions[DefinitionName.ALPTable];\n        const tableConfig = (config.table = factory.createInstance(\n            pageType,\n            DefinitionName.ALPTable\n        ) as v4.ALPTableView);\n        transferToolBar(importParameters, config, factory, pageType, routingId);\n        const configId = tableAnnotationPath.substr(tableAnnotationPath.lastIndexOf('@'));\n        importSettingsOfObject(tableConfig, importParameters.manifest, tableDefinition, routingId, [\n            tableDefinition[SchemaTag.key],\n            configId\n        ]);\n        //transfer columns\n        transferColumns(tableConfig, importParameters, factory, pageType, routingId, undefined, configId);\n    }\n}\n\n/**\n * Method received view definition name and returns view type.\n * @param {string} definition  - definition name in schema.\n * @returns {DefinitionName | undefined} Resolved view type.\n */\nfunction getViewTypeByDefinition(definition: string): DefinitionName | undefined {\n    let viewType: DefinitionName;\n    if (definition.indexOf(DefinitionName.LRTableView) > -1) {\n        viewType = DefinitionName.LRTableView;\n    } else if (definition.indexOf(DefinitionName.LRChartView) > -1) {\n        viewType = DefinitionName.LRChartView;\n    } else if (definition === DefinitionName.TableViewExtension) {\n        viewType = DefinitionName.TableViewExtension;\n    }\n    return viewType;\n}\n\n/**\n * Import table views of list report\n * @param {ImportListReportV4Parameters} importParameters  - object comprising all input data\n * @param {ListReportConfigV4} config - the configuration to be filled\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param {PageTypeV4} pageType - page type\n * @param {string} routingId - page key in manifest\n */\nfunction importLRViews(\n    importParameters: ImportListReportV4Parameters,\n    config: v4.ListReportConfigV4,\n    factory: MetadataInstanceInterface,\n    pageType: PageTypeV4,\n    routingId: string\n): void {\n    const tableViewConfig: v4.MultiTableModeV4 = ((config.table as v4.Table).views = factory.createInstance(\n        pageType,\n        DefinitionName.MultiTableModeV4\n    ));\n    const schemaDefinitions = importParameters.jsonSchema.definitions as Definition;\n\n    //Transfer settings on overall views' level\n    importSettingsOfObject(\n        tableViewConfig,\n        importParameters.manifest,\n        schemaDefinitions[DefinitionName.MultiTableModeV4],\n        routingId,\n        []\n    );\n    const properties = schemaDefinitions[DefinitionName.MultiTableModeV4].properties;\n    const sortedList = Object.entries(properties).sort(\n        (a, b) => a[1][SchemaTag.propertyIndex] - b[1][SchemaTag.propertyIndex]\n    );\n    for (const element of sortedList) {\n        //process single views\n        if (element[1]['$ref']) {\n            const nextDefinition = element[1]['$ref'].split(DEFINITION_LINK_PREFIX)[1];\n            const viewType = getViewTypeByDefinition(nextDefinition);\n            const tableView = (tableViewConfig[element[0]] = factory.createInstance(pageType, viewType));\n            const targetAnnotation = determineTargetAnnotationOfView(schemaDefinitions, nextDefinition);\n            if (!schemaDefinitions[nextDefinition].entitySet) {\n                importSettingsOfObject(\n                    tableView,\n                    importParameters.manifest,\n                    schemaDefinitions[nextDefinition],\n                    routingId,\n                    [element[0], targetAnnotation]\n                );\n                if (viewType === DefinitionName.LRTableView) {\n                    transferColumns(\n                        tableView,\n                        importParameters,\n                        factory,\n                        pageType,\n                        routingId,\n                        `${DefinitionName.LineItemsOfView}::${element[0]}`,\n                        targetAnnotation\n                    );\n                }\n            }\n            if (Object.keys(tableView).length === 0) {\n                delete tableViewConfig[element[0]];\n            }\n        }\n    }\n    removeEmptyStructure(config.table, 'views');\n}\n\n/**\n * Adds manifest settings to the config.json of LR or ALP V4\n * @param {ImportListReportV4Parameters} importParameters  - object comprising all input data\n * @param {ListReportConfig | AnalyticalListPageConfig} config - the configuration to be filled\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param {PageTypeV4} pageType - page type\n * @param {string} routingId - page key in manifest\n * @param {SchemaType} schemaType - allows distinction of LR and ALP scenario\n */\nexport function addSettings(\n    importParameters: ImportListReportV4Parameters,\n    config: v4.ListReportConfigV4,\n    factory: MetadataInstanceInterface,\n    pageType: PageTypeV4,\n    routingId: string,\n    schemaType: SchemaType\n): void {\n    // Transfer page level settings with sync rules\n    importSettingsOfObject(config, importParameters.manifest, importParameters.jsonSchema, routingId, []);\n\n    //FilterBar:\n    config.filterBar = factory.createInstance(pageType, DefinitionName.FilterBar);\n    importSettingsOfObject(\n        config.filterBar,\n        importParameters.manifest,\n        importParameters.jsonSchema.definitions[DefinitionName.FilterBar],\n        routingId,\n        []\n    );\n    //Distinguish ALP table from LR table\n    if (schemaType === SchemaType.ListReport) {\n        let definitionName = DefinitionName.Table;\n        let tableDefinition = importParameters.jsonSchema.definitions[definitionName] as Definition;\n        let columnDefinitionName;\n        if (tableDefinition.$ref) {\n            //(S)PV scenario ==> delegation, go to TableSPV\n            definitionName = tableDefinition.$ref.split(DEFINITION_LINK_PREFIX)[1] as DefinitionName;\n            tableDefinition = importParameters.jsonSchema.definitions[definitionName] as Definition;\n            columnDefinitionName = (tableDefinition.properties.columns as Definition).$ref.split(\n                DEFINITION_LINK_PREFIX\n            )[1];\n        }\n        config.table = factory.createInstance(pageType, DefinitionName.Table);\n        const targetAnnotation = determineTargetAnnotationOfView(\n            importParameters.jsonSchema.definitions,\n            definitionName\n        );\n        importSettingsOfObject(config.table, importParameters.manifest, tableDefinition, routingId, [\n            definitionName,\n            targetAnnotation\n        ]);\n        //transfer toolbar\n        transferToolBar(importParameters, config, factory, pageType, routingId, columnDefinitionName);\n        //transfer columns\n        transferColumns(\n            config.table,\n            importParameters,\n            factory,\n            pageType,\n            routingId,\n            columnDefinitionName,\n            targetAnnotation\n        );\n        importLRViews(importParameters, config, factory, pageType, routingId);\n    } else if (schemaType === SchemaType.AnalyticalListPage) {\n        importALPViews(importParameters, config, factory, pageType, routingId);\n    }\n}\n\n/**\n * Creates the configuration file content for a list report V4\n * @param {ImportListReportV4Parameters} importParameters  - object comprising all input data\n *\n * @returns {ListReportConfig} - the configuration (JSON) for the list report\n */\nexport function createListReportConfig(\n    importParameters: ImportListReportV4Parameters,\n    schemaType: SchemaType\n): v4.ListReportConfigV4 | undefined {\n    // Initialize i18next\n    initI18n();\n    if (!importParameters.jsonSchema) {\n        return;\n    }\n    if (!importParameters.manifest[ManifestSection.ui5] || !importParameters.manifest[ManifestSection.ui5]['routing']) {\n        log(importParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOROUTING'),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.ui5]\n            }\n        });\n        return;\n    }\n    const v4Pages = importParameters.manifest[ManifestSection.ui5]['routing']['targets'] as v4.SapUi5RoutingTargetsV4;\n    if (!v4Pages) {\n        log(importParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOTARGETS'),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.ui5]\n            }\n        });\n        return;\n    }\n    const factory = new Factory();\n    //Instantiate Page\n    const config = factory.createPageInstance(PageTypeV4.ListReport);\n\n    for (const key in v4Pages) {\n        const v4Page = v4Pages[key];\n        const pageType = getPageTypeV4(v4Page as v4.SapUiAppPageV4);\n        if ('name' in v4Page && (pageType === PageTypeV4.ListReport || pageType === PageTypeV4.AnalyticalListPage)) {\n            addSettings(importParameters, config, factory, PageTypeV4.ListReport, key, schemaType);\n            break;\n        }\n    }\n\n    return config;\n}\n", "import type { Definition, DefinitionOrBoolean } from 'typescript-json-schema';\nimport { importProperty, checkDeprecatedProperties, getManifestSectionByPathV4 } from '../../common';\nimport { getReflectMetadata } from '../../common/decoration/decorators';\nimport type { ExtensionLogger } from '../../..';\nimport type { Manifest } from '@sap/ux-specification-types';\n\n/**\n * Transfers settings from manifest to object page config\n * @param configPart - part of the configuration to be filled\n * @param manifest - manifest.json of the app\n * @param appSchema - app specific schema\n * @param pageID - ID of the given object page\n * @param sectionId (optional) - ID of the given section (optional)\n * @param {ExtensionLogger} logger - Logger class for logging messages\n */\nexport function importSettingsOfObject(\n    configPart: { [key: string]: any },\n    manifest: Manifest,\n    appSchema: Definition | DefinitionOrBoolean,\n    pageKey: string,\n    breadcrumbs: string[],\n    sectionId?: string,\n    logger?: ExtensionLogger\n): void {\n    if (!appSchema) {\n        return;\n    }\n    let manifestSection = {};\n    const deprecatedProperties = configPart?.getDeprecated;\n    const targetAnnotationEncoded = sectionId && sectionId.replace('/', '::');\n\n    for (const propertyKey in appSchema['properties']) {\n        const syncRule = getReflectMetadata(configPart, propertyKey);\n\n        if (syncRule?.manifest) {\n            const path = syncRule.manifest.path([pageKey], manifest, targetAnnotationEncoded, ...breadcrumbs);\n            manifestSection = getManifestSectionByPathV4(manifest, path, sectionId, targetAnnotationEncoded, true);\n            if (manifestSection && Object.keys(manifestSection).length > 0) {\n                importProperty(syncRule, manifestSection, propertyKey, configPart, sectionId, breadcrumbs);\n                checkDeprecatedProperties(deprecatedProperties, manifestSection, path, logger);\n            }\n        }\n    }\n}\n", "export * from './Table';\nexport * from './TableColumn';\nexport * from './ToolBar';\nexport * from './ToolBarAction';\nexport * from './ObjectPageToolBarAction';\nexport * from './FilterBar';\nexport * from './ObjectPageTableColumn';\nexport * from './ObjectPageHeader';\nexport * from './ObjectPageHeaderSection';\nexport * from './ObjectPageLayout';\nexport * from './ObjectPageTable';\nexport * from './ObjectPageCustomSection';\n", "import type { Manifest } from '@sap/ux-specification-types';\nimport { v4, SchemaTag } from '@sap/ux-specification-types';\nimport type { ToolBar } from './ToolBar';\nimport { addPatternForBindingChangeOfEnumLR } from '../../../common';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\nimport {\n    getTableSettingsPathForLR,\n    getSettingsPathForPage,\n    getSettingsPathForLRViewsPaths,\n    getTableSettingsPathForView,\n    getQuickVariantPath\n} from '../../application';\n\n/**\n * Special edition of the global function getManifestSectionByPathV4 that initializes the views array if empty\n * @param manifest - manifest.json\n * @param path - path to the views array in manifest\n * @param key - key of the view\n * @returns the paths array of the views\n */\nconst getManifestSectionByPathV4 = (manifest: object, path: string): Array<object> => {\n    let manifestSection = manifest;\n    for (const element of path.split('/')) {\n        if (!manifestSection[element]) {\n            if (element === 'paths') {\n                manifestSection[element] = [];\n            } else {\n                manifestSection[element] = {};\n            }\n        }\n        manifestSection = manifestSection[element];\n    }\n    return manifestSection as Array<object>;\n};\n\n/**\n * Common function for determining the path in manifest of a list report view's path\n * @param pageName - page name in manifest\n * @param manifest - manifest.json\n * @param _targetAnnotationEncoded - target annotation (not used here)\n * @param viewKey - value of the key property of the view\n * @returns the path to the entry in manifest\n */\nfunction getSettingsPathForLRViewsPath(\n    pageName: string[],\n    manifest: Manifest,\n    _targetAnnotationEncoded: string,\n    viewKey: string,\n    _targetAnnotation: string,\n    configObject: object\n): string {\n    const viewsPath = getSettingsPathForLRViewsPaths(pageName);\n    const manifestSection = getManifestSectionByPathV4(JSON.parse(JSON.stringify(manifest)), viewsPath);\n    let path: string;\n    for (let index = 0; index < manifestSection.length; index++) {\n        const view = manifestSection[index];\n        if (view && (view[SchemaTag.key] === configObject?.['key'] || view[SchemaTag.key] === viewKey)) {\n            path = `${viewsPath}/${index}`;\n            break;\n        }\n    }\n    if (!path) {\n        path = `${viewsPath}/[]`;\n    }\n    return path;\n}\n\n/**\n * sync rule function for export of creationMode.name\n * @param manifestSection - section in manifest comprising the table settings\n * @param configObject - section in config.json describing the table settings\n * @param key - key or property in config.json\n * @param manifestKey - key or property in manifest\n */\nexport function exportCreationModeName(\n    manifestSection: unknown,\n    configObject: unknown,\n    key: string,\n    manifestKey: string\n): void {\n    if (typeof manifestSection['creationMode'] === 'string') {\n        manifestSection['creationMode'] = {};\n    }\n    manifestSection['creationMode'][manifestKey] = configObject[key];\n}\n\n/**\n * Subroutine of checkViewOrder, fills the new list of views for the manifest\n */\nfunction fillNewlyOrderedViews(\n    manifestSection: object,\n    keyInConfig: string,\n    newIndex: string,\n    minIndex: number,\n    maxIndex: number,\n    direction: number\n): Array<object> {\n    const newlyOrderedViews = JSON.parse(JSON.stringify(manifestSection));\n    const viewKeys = Object.keys(manifestSection);\n\n    for (const index of viewKeys) {\n        const indexInManifest = Number(index);\n        const view = manifestSection[index];\n        if (keyInConfig === view['key']) {\n            newlyOrderedViews[newIndex] = view;\n        } else {\n            if (indexInManifest >= minIndex && indexInManifest <= maxIndex) {\n                newlyOrderedViews[Math.max(0, indexInManifest + direction)] = view;\n            } else {\n                newlyOrderedViews[index] = view;\n            }\n        }\n    }\n    return newlyOrderedViews;\n}\n\n/**\n * If a view index was changed we need to adapt the order of views in manifest\n * @param manifestSection - section in manifest comprising the table settings\n * @param configObject - section in config.json describing the table settings\n */\nexport function checkViewOrder(manifestSection: unknown, configObject: unknown): void {\n    const keyInConfig = configObject['key'];\n    const oldIndex = (manifestSection as Array<object>).findIndex((view) => {\n        return view?.['key'] === keyInConfig;\n    });\n    const newIndex = configObject['index'];\n    if (oldIndex > -1 && oldIndex !== newIndex) {\n        const direction = newIndex > oldIndex ? -1 : 1;\n        const minIndex = Math.min(Number(oldIndex), newIndex);\n        const maxIndex = Math.max(Number(oldIndex), newIndex);\n        const newlyOrderedViews = fillNewlyOrderedViews(\n            manifestSection as object,\n            keyInConfig,\n            newIndex,\n            minIndex,\n            maxIndex,\n            direction\n        );\n        for (const index of Object.keys(newlyOrderedViews)) {\n            manifestSection[index] = newlyOrderedViews[index];\n        }\n    }\n}\n\n/**\n * common sync rule function for export of creation for personalization object\n * @param manifestSection - section in manifest comprising the table settings\n * @param configObject - section in config.json describing the table settings\n * @param key - key or property in config.json\n * @param manifestKey - key or property in manifest\n */\nexport function exportPersonalization(\n    manifestSection: unknown,\n    configObject: unknown,\n    key: string,\n    manifestKey?: string\n): void {\n    if (\n        !manifestSection[manifestKey] &&\n        typeof configObject[key] === 'object' &&\n        Object.keys(configObject[key]).length\n    ) {\n        // Create 'personalization' object only when config object is not empty\n        configObject[key] = {};\n    }\n}\n\n/**\n * common sync rule function for export of personalization properties\n * @param manifestSection - section in manifest comprising the table settings\n * @param configObject - section in config.json describing the table settings\n * @param key - key or property in config.json\n * @param manifestKey - key or property in manifest\n */\nexport function exportPersonalizationProperty(\n    manifestSection: unknown,\n    configObject: unknown,\n    key: string,\n    manifestKey: string\n): void {\n    if (typeof manifestSection['personalization'] === 'boolean' || !manifestSection['personalization']) {\n        manifestSection['personalization'] = {};\n    }\n    manifestSection['personalization'][manifestKey] = configObject[key];\n}\n\n/**\n * sync rule function for the deletion of creationMode.name\n * @param manifestSection - section in manifest comprising the table settings\n * @param manifestKey - key or property in manifest\n */\nexport function deleteCreationModeName(manifestSection: unknown, manifestKey: string): void {\n    if (\n        typeof manifestSection['creationMode'] === 'object' &&\n        manifestSection['creationMode'][manifestKey] !== undefined\n    ) {\n        delete manifestSection['creationMode'][manifestKey];\n    } else if (typeof manifestSection['creationMode'] === 'string' && manifestSection['creationMode'] !== undefined) {\n        delete manifestSection['creationMode'];\n    }\n}\n\n/**\n * sync rule deleting a view if the annotation path gets deleted\n * @param manifestSection - manifest section of the given view\n * @param configObject - section of the configration JSON\n * @param syncRuleKey - key of the view\n * @param config - the complete config JSON\n */\nfunction deleteView(\n    manifestSection: object,\n    configObject: object,\n    _configPropertyKey: string,\n    _manifestKey: string,\n    syncRuleKey: string,\n    config: object\n): void {\n    let deletedViewIndex;\n    if (!configObject || Object.keys(configObject).length === 0) {\n        const viewsInManifest = manifestSection as Array<object>;\n        Object.keys(viewsInManifest).forEach((index) => {\n            if (viewsInManifest[index] && viewsInManifest[index].key === syncRuleKey) {\n                manifestSection[Number(index)] = {};\n                deletedViewIndex = index;\n            }\n        });\n    }\n    if (deletedViewIndex) {\n        const viewsInConfig = config['table']['views'];\n        for (const key in viewsInConfig) {\n            if (viewsInConfig[key].index > deletedViewIndex) {\n                viewsInConfig[key].index--;\n            }\n        }\n    }\n}\n\n/**\n * sync rule for preventing the deletion of a property\n */\nfunction doNotDelete(): void {\n    return;\n}\n\n/**\n * sync rule function for export of creationMode.createAtEnd\n * @param manifestSection - section in manifest comprising the table settings\n * @param configObject - section in config.json describing the table settings\n * @param key - key or property in config.json\n * @param manifestKey - key or property in manifest\n */\nexport function exportCreationModeCreateAtEnd(\n    manifestSection: unknown,\n    configObject: unknown,\n    key: string,\n    manifestKey: string\n): void {\n    if (typeof manifestSection['creationMode'] === 'object') {\n        manifestSection['creationMode'][manifestKey] = configObject[key];\n    } else if (typeof manifestSection['creationMode'] === 'string') {\n        // If createAtEnd property is defined in config, then we have to convert manifest property creationMode to an object\n        manifestSection['creationMode'] = {\n            name: configObject['name'],\n            [manifestKey]: configObject[key]\n        };\n    }\n}\n\n/**\n * sync rule function for the deletion of creationMode.createAtEnd\n * @param manifestSection - section in manifest comprising the table settings\n * @param manifestKey - key or property in manifest\n */\nexport function deleteCreationModeCreateAtEnd(manifestSection: unknown, manifestKey: string): void {\n    if (\n        typeof manifestSection['creationMode'] === 'object' &&\n        manifestSection['creationMode'][manifestKey] !== undefined\n    ) {\n        delete manifestSection['creationMode'][manifestKey];\n    }\n}\n\n/**\n * sync rule for the import of the index of a table view\n * @param manifestSection - manifest section, as determined by synRule.path\n * @param _sectionId  - not used\n * @param _propertyKey - not used\n * @param breadcrumbs - list if breadcrumbs, includes the given view key\n * @returns index of the view in manifest, undefined if not found\n */\nfunction determineIndexOfView(\n    manifestSection: object[],\n    _sectionId: string,\n    _propertyKey: string,\n    breadcrumbs: string[]\n): number | undefined {\n    const viewIndex = manifestSection.findIndex((view) => view['key'] === breadcrumbs[0]);\n    return viewIndex === -1 ? undefined : viewIndex;\n}\n\n/****************************************\n * Sync class for QuickVariantSelectionV4\n */\nexport class QuickVariantSelectionV4 implements v4.QuickVariantSelectionV4 {\n    //paths\n    @syncRule({\n        manifest: {\n            path: getQuickVariantPath\n        }\n    })\n    paths: v4.AnnotationPathAsObject[];\n\n    //hideTableTitle\n    @syncRule({\n        manifest: {\n            path: getQuickVariantPath\n        }\n    })\n    hideTableTitle?: boolean;\n\n    //showCounts\n    @syncRule({\n        manifest: {\n            path: getQuickVariantPath\n        }\n    })\n    showCounts?: boolean;\n}\n\n/****************************************\n * Sync class for TableSettings\n */\nexport class TableSettings implements v4.TableSettings {\n    //type\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    type?: v4.TableTypeV4;\n\n    //personalization\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForLR\n        }\n    })\n    @validity({\n        since: '1.86.0'\n    })\n    personalization?: boolean;\n\n    //selectionMode\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    selectionMode?: v4.SelectionMode;\n\n    //selectAll\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    selectAll?: boolean;\n\n    //selectionLimit\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    selectionLimit?: number;\n\n    //enableExport\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    enableExport?: boolean;\n\n    //quickVariantSelection\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    quickVariantSelection?: QuickVariantSelectionV4;\n\n    //condensedTableLayout\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    condensedTableLayout?: boolean;\n}\n\n/****************************************\n * Sync class for ALPChartView (renamed due to indirection in app schema)\n */\nexport class ALPChart implements v4.ALPChartView {\n    //annotationPath\n    @syncRule({\n        manifest: {\n            path: (entitySet): string => getSettingsPathForPage(entitySet) + '/views/paths/0/primary/0',\n            delete: deleteView\n        }\n    })\n    annotationPath: string;\n\n    //toolBar\n    toolBar?: v4.ViewChartToolBar;\n}\n\nexport class CommonViewSettings implements v4.CommonViewSettings {\n    //key\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPath,\n            delete: doNotDelete\n        }\n    })\n    key: string;\n    //index\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPaths,\n            import: determineIndexOfView,\n            export: (manifestSection, configObject): void => {\n                checkViewOrder(manifestSection, configObject);\n            },\n            delete: deleteView\n        }\n    })\n    index: number;\n\n    //annotationPath\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPath,\n            delete: doNotDelete\n        }\n    })\n    annotationPath: string;\n\n    //entitySet\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPath\n        }\n    })\n    entitySet?: string;\n}\n\n/****************************************\n * Sync class for view table settings\n */\nexport class TableViewSettings extends CommonViewSettings implements v4.TableSettings {\n    //type\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    type?: v4.TableTypeV4;\n\n    //personalization\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForView\n        }\n    })\n    @validity({\n        since: '1.86.0'\n    })\n    personalization?: boolean;\n\n    //selectionMode\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    selectionMode?: v4.SelectionMode;\n\n    //selectAll\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    selectAll?: boolean;\n\n    //selectionLimit\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    selectionLimit?: number;\n\n    //enableExport\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    enableExport?: boolean;\n\n    //quickVariantSelection\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    quickVariantSelection?: QuickVariantSelectionV4;\n\n    //condensedTableLayout\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    condensedTableLayout?: boolean;\n}\n\nfunction getTableViewSettings<T>(SuperClass: T) {\n    return TableViewSettings;\n}\n\n/****************************************\n * Sync class for ALPTableView (renamed due to indirection in app schema)\n */\nexport class ALPTable extends TableViewSettings implements v4.ALPTableView {\n    //annotationPath\n    @syncRule({\n        manifest: {\n            path: (entitySet): string => getSettingsPathForPage(entitySet) + '/views/paths/0/secondary/0',\n            delete: doNotDelete\n        }\n    })\n    annotationPath: string;\n\n    //initialLoad\n    @syncRule({\n        manifest: {\n            path: (entitySet: string[]): string => getSettingsPathForPage(entitySet)\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    initialLoad?: boolean;\n\n    //toolBar\n    toolBar?: ToolBar;\n}\n\n/****************************************\n * Sync class for LRChartView\n */\nexport class LRChartView extends CommonViewSettings implements v4.LRChartView {\n    //toolBar\n    toolBar?: v4.ViewChartToolBar;\n\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPath\n        },\n        generate: addPatternForBindingChangeOfEnumLR\n    })\n    visible?: boolean;\n}\n\n/****************************************\n * Sync class for LRTableView\n */\nexport class LRTableView extends getTableViewSettings(CommonViewSettings) {\n    //keepPreviousPersonalization\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPath\n        }\n    })\n    keepPreviousPersonalization?: boolean;\n\n    //entitySet\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPath\n        }\n    })\n    entitySet?: string;\n\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPath\n        },\n        generate: addPatternForBindingChangeOfEnumLR\n    })\n    visible?: boolean;\n\n    //toolBar\n    toolBar?: ToolBar;\n}\n\nexport class TableViewExtension implements v4.TableViewExtension {\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPath\n        }\n    })\n    key: string;\n\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPaths,\n            import: determineIndexOfView,\n            export: (manifestSection, configObject): void => {\n                checkViewOrder(manifestSection, configObject);\n            },\n            delete: deleteView\n        }\n    })\n    index: number;\n\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPath\n        }\n    })\n    label?: string;\n\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPath\n        }\n    })\n    template: string;\n\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForLRViewsPath\n        },\n        generate: addPatternForBindingChangeOfEnumLR\n    })\n    visible?: boolean;\n}\n\n/**\n * LR multi-view: own class for properties on views' level\n */\nexport class MultiTableModeV4 implements v4.MultiTableModeV4 {\n    // List of annotation paths\n    [key: string]: v4.ViewTypeV4;\n\n    //showCounts\n    @syncRule({\n        manifest: {\n            path: (entitySet): string => getSettingsPathForPage(entitySet) + '/views'\n        }\n    })\n    showCounts?: boolean;\n}\n\n/****************************************\n * Sync class for Table\n */\nexport class Table extends TableSettings implements v4.Table {\n    //annotationPath\n    @syncRule({\n        manifest: {\n            path: (entitySet): string => getSettingsPathForPage(entitySet) + '/views/paths/0/secondary/0',\n            delete: doNotDelete\n        }\n    })\n    annotationPath?: string;\n\n    //views\n    views?: MultiTableModeV4;\n\n    //initialLoad\n    @syncRule({\n        manifest: {\n            path: (entitySet: string[]): string => getSettingsPathForPage(entitySet)\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    initialLoad?: boolean;\n\n    //toolBar\n    toolBar?: ToolBar;\n}\n", "import type { v4, Manifest } from '@sap/ux-specification-types';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\nimport { getColumnsPathForLR, getColumnsPathForView } from '../../application';\n\nexport class ActionAfterExecutionConfiguration implements v4.ActionAfterExecutionConfiguration {\n    @syncRule({\n        manifest: {\n            path: (\n                pageName: string[],\n                manifest: Manifest,\n                sectionId: string,\n                columnKey: string,\n                targetAnnotation: string\n            ): string =>\n                getColumnsPathForLR(pageName, manifest, sectionId, columnKey, targetAnnotation) + '/afterExecution'\n        }\n    })\n    navigateToInstance?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (\n                pageName: string[],\n                manifest: Manifest,\n                sectionId: string,\n                columnKey: string,\n                targetAnnotation: string\n            ): string =>\n                getColumnsPathForLR(pageName, manifest, sectionId, columnKey, targetAnnotation) + '/afterExecution'\n        }\n    })\n    enableAutoScroll?: boolean;\n}\n\n/************************************\n * Sync class for TableColumn\n */\nexport class TableColumn implements v4.TableColumn {\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    width?: string;\n\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForLR\n        }\n    })\n    @validity({\n        since: '1.85.0'\n    })\n    availability?: v4.Availability;\n}\n\n/************************************\n * Sync class for ViewTableColumn\n */\nexport class ViewTableColumn implements v4.ViewTableColumn {\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    width?: string;\n\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForView\n        }\n    })\n    @validity({\n        since: '1.85.0'\n    })\n    availability?: v4.Availability;\n}\n\nexport class TableColumnAction extends TableColumn implements v4.TableColumnAction {\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    afterExecution?: ActionAfterExecutionConfiguration;\n}\n\nexport class ViewTableColumnAction extends ViewTableColumn implements v4.ViewTableColumnAction {\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    afterExecution?: ActionAfterExecutionConfiguration;\n}\n\n/**\n * Sync class for Position\n */\nexport class Position implements v4.Position {\n    @syncRule({\n        manifest: {\n            path: (\n                pageName: string[],\n                manifest: Manifest,\n                sectionId: string,\n                columnKey: string,\n                targetAnnotation: string\n            ): string => getColumnsPathForLR(pageName, manifest, sectionId, columnKey, targetAnnotation) + '/position'\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    anchor?: string;\n    @syncRule({\n        manifest: {\n            path: (\n                pageName: string[],\n                manifest: Manifest,\n                sectionId: string,\n                columnKey: string,\n                targetAnnotation: string\n            ): string => getColumnsPathForLR(pageName, manifest, sectionId, columnKey, targetAnnotation) + '/position'\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    placement: v4.Placement;\n}\n\n/**\n * Sync class for ViewPosition\n */\nexport class ViewPosition implements v4.ViewPosition {\n    @syncRule({\n        manifest: {\n            path: (\n                pageName: string[],\n                manifest: Manifest,\n                sectionId: string,\n                columnKey: string,\n                targetAnnotation: string\n            ): string => getColumnsPathForView(pageName, manifest, sectionId, columnKey, targetAnnotation) + '/position'\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    anchor?: string;\n    @syncRule({\n        manifest: {\n            path: (\n                pageName: string[],\n                manifest: Manifest,\n                sectionId: string,\n                columnKey: string,\n                targetAnnotation: string\n            ): string => getColumnsPathForView(pageName, manifest, sectionId, columnKey, targetAnnotation) + '/position'\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    placement: v4.Placement;\n}\n\n/**\n * Sync class for TableCustomColumn\n */\nexport class TableCustomColumn implements v4.TableCustomColumn {\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    position?: Position;\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    header: string;\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    width?: string;\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    template: string;\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForLR\n        }\n    })\n    @validity({\n        since: '1.86.0'\n    })\n    horizontalAlign?: v4.HorizontalAlign;\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForLR\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    availability?: v4.Availability;\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForLR\n        }\n    })\n    @validity({\n        since: '1.85.0'\n    })\n    properties?: v4.ColumnPropertiesType;\n}\n\n/**\n * Sync class for ViewTableCustomColumn\n */\nexport class ViewTableCustomColumn implements v4.ViewTableCustomColumn {\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    position?: Position;\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    header: string;\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    width?: string;\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    template: string;\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForView\n        }\n    })\n    @validity({\n        since: '1.86.0'\n    })\n    horizontalAlign?: v4.HorizontalAlign;\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForView\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    availability?: v4.Availability;\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForView\n        }\n    })\n    @validity({\n        since: '1.85.0'\n    })\n    properties?: v4.ColumnPropertiesType;\n}\n", "import type { v4 } from '@sap/ux-specification-types';\nimport { ToolBarAction } from './ToolBarAction';\n\nexport class Actions implements v4.Actions {\n    [key: string]: ToolBarAction;\n}\n\nexport class ToolBar implements v4.ToolBar {\n    actions: Actions;\n}\n", "import type { v4 } from '@sap/ux-specification-types';\nimport { syncRule } from '../../../common/decoration/decorators';\nimport { getActionsPathForLR, getActionsPathForView } from '../../application';\n\nexport class ToolBarAction implements v4.ToolBarAction {\n    @syncRule({\n        manifest: {\n            path: getActionsPathForLR\n        }\n    })\n    enableOnSelect?: v4.SelectType;\n}\n\nexport class ViewToolBarAction implements v4.ViewToolBarAction {\n    @syncRule({\n        manifest: {\n            path: getActionsPathForView\n        }\n    })\n    enableOnSelect?: v4.SelectType;\n}\n", "import type { v4 } from '@sap/ux-specification-types';\nimport { syncRule } from '../../../common/decoration/decorators';\nimport { getActionsPathForOP } from '../../application';\n\nexport class ObjectPageToolBarAction implements v4.ObjectPageToolBarAction {\n    @syncRule({\n        manifest: {\n            path: getActionsPathForOP\n        }\n    })\n    enableOnSelect?: v4.SelectType;\n}\n", "import type { v4 } from '@sap/ux-specification-types';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\nimport { getSettingsPathForPage } from '../../application';\n\nexport class FilterBar implements v4.FilterBar {\n    selectionFields?: v4.SelectionFields;\n\n    @syncRule({\n        manifest: {\n            path: (entitySet: string[]): string => getSettingsPathForPage(entitySet)\n        }\n    })\n    @validity({\n        since: '1.99.0'\n    })\n    hideFilterBar?: boolean;\n}\n", "import type { v4, Manifest } from '@sap/ux-specification-types';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\nimport { getColumnsPathForOP } from '../../application';\n\nexport class ActionAfterExecutionConfigurationOP implements v4.ActionAfterExecutionConfigurationOP {\n    @syncRule({\n        manifest: {\n            path: (pageName: string[], manifest: Manifest, sectionId: string, columnKey): string =>\n                getColumnsPathForOP(pageName, manifest, sectionId, columnKey) + '/afterExecution'\n        }\n    })\n    navigateToInstance?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageName: string[], manifest: Manifest, sectionId: string, columnKey): string =>\n                getColumnsPathForOP(pageName, manifest, sectionId, columnKey) + '/afterExecution'\n        }\n    })\n    enableAutoScroll?: boolean;\n}\n\nexport class ObjectPageTableColumn implements v4.ObjectPageTableColumn {\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForOP\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    width?: string;\n\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForOP\n        }\n    })\n    @validity({\n        since: '1.85.0'\n    })\n    availability?: v4.Availability;\n}\n\nexport class ObjectPageTableColumnAction extends ObjectPageTableColumn implements v4.ObjectPageTableColumnAction {\n    @syncRule({\n        manifest: {\n            path: getColumnsPathForOP\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    afterExecution?: ActionAfterExecutionConfigurationOP;\n}\n", "import type { v4 } from '@sap/ux-specification-types';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\nimport { getSettingsPathForPage, getSettingsPathForHeaderOP } from '../../application';\n\nexport class ObjectPageHeader implements v4.ObjectPageHeader {\n    @syncRule({\n        manifest: {\n            path: (entitySet: string[]): string => getSettingsPathForPage(entitySet)\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    editableHeaderContent?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (entitySet: string[]): string => getSettingsPathForPage(entitySet)\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    showRelatedApps?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForHeaderOP\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    visible?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: getSettingsPathForHeaderOP\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    anchorBarVisible?: boolean;\n    sections?: v4.HeaderSections;\n}\n", "import type { v4, Manifest } from '@sap/ux-specification-types';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\nimport { getHeaderFacetSettingPath } from '../../application';\n\nexport class FlexSettings implements v4.FlexSettings {\n    @syncRule({\n        manifest: {\n            path: (pageName: string[], manifest: Manifest, sectionId: string): string =>\n                getHeaderFacetSettingPath(pageName, manifest, sectionId) + '/flexSettings'\n        }\n    })\n    @validity({\n        since: '1.81.0'\n    })\n    designtime?: v4.DesigntimeValues;\n}\n\nexport class CommonHeaderFacetSettings implements v4.CommonHeaderFacetSettings {\n    @syncRule({\n        manifest: {\n            path: getHeaderFacetSettingPath\n        }\n    })\n    @validity({\n        since: '1.81.0'\n    })\n    stashed?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: getHeaderFacetSettingPath\n        }\n    })\n    @validity({\n        since: '1.81.0'\n    })\n    flexSettings?: FlexSettings;\n}\n\nexport class ObjectPageHeaderSectionForm extends CommonHeaderFacetSettings implements v4.ObjectPageHeaderSectionForm {}\n\nexport class ObjectPageHeaderSectionChart\n    extends CommonHeaderFacetSettings\n    implements v4.ObjectPageHeaderSectionChart {}\n\nexport class ObjectPageHeaderSectionDataPoint\n    extends CommonHeaderFacetSettings\n    implements v4.ObjectPageHeaderSectionDataPoint {}\n\nexport class ObjectPageHeaderSectionContact\n    extends CommonHeaderFacetSettings\n    implements v4.ObjectPageHeaderSectionContact {}\n\nexport class ObjectPageHeaderSectionAddress\n    extends CommonHeaderFacetSettings\n    implements v4.ObjectPageHeaderSectionAddress {}\n\nexport class HeaderSections implements v4.HeaderSections {\n    [key: string]:\n        | ObjectPageHeaderSectionForm\n        | ObjectPageHeaderSectionChart\n        | ObjectPageHeaderSectionDataPoint\n        | ObjectPageHeaderSectionContact\n        | ObjectPageHeaderSectionAddress;\n}\n", "import type { v4 } from '@sap/ux-specification-types';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\nimport { getSettingsPathForPage } from '../../application';\n\nexport class ObjectPageLayout implements v4.ObjectPageLayout {\n    @syncRule({\n        manifest: {\n            path: (entitySet: string[]): string => getSettingsPathForPage(entitySet)\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    sectionLayout?: v4.SectionLayoutType;\n}\n", "import type { Manifest, v4 } from '@sap/ux-specification-types';\nimport { QUICKVARPATH } from '@sap/ux-specification-types';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\nimport { getTableSettingsPathForOP } from '../../application';\nimport {\n    exportCreationModeName,\n    deleteCreationModeName,\n    exportCreationModeCreateAtEnd,\n    deleteCreationModeCreateAtEnd\n} from './Table';\n\nexport class TableCreationModeOP implements v4.TableCreationModeOP {\n    @syncRule({\n        manifest: {\n            path: (pageName: string[], manifest: Manifest, sectionId: string): string =>\n                getTableSettingsPathForOP(pageName, manifest, sectionId),\n            export: (manifestSection, configObject, key, manifestKey): void => {\n                exportCreationModeName(manifestSection, configObject, key, manifestKey);\n            },\n            delete: (manifestSection, _configObject, _key, manifestKey): void => {\n                deleteCreationModeName(manifestSection, manifestKey);\n            }\n        }\n    })\n    name?: v4.TableCreationModeType;\n\n    @syncRule({\n        manifest: {\n            path: (pageName: string[], manifest: Manifest, sectionId: string): string =>\n                getTableSettingsPathForOP(pageName, manifest, sectionId),\n            export: (manifestSection, configObject, key, manifestKey): void => {\n                exportCreationModeCreateAtEnd(manifestSection, configObject, key, manifestKey);\n            },\n            delete: (manifestSection, _configObject, _key, manifestKey): void => {\n                deleteCreationModeCreateAtEnd(manifestSection, manifestKey);\n            }\n        }\n    })\n    createAtEnd?: boolean;\n}\n\nexport class QuickVariantSelectionV4OP implements v4.QuickVariantSelectionV4 {\n    @syncRule({\n        manifest: {\n            path: (pageName: string[], manifest: Manifest, sectionId: string): string =>\n                getTableSettingsPathForOP(pageName, manifest, sectionId) + QUICKVARPATH\n        }\n    })\n    paths: v4.AnnotationPathAsObject[];\n\n    @syncRule({\n        manifest: {\n            path: (pageName: string[], manifest: Manifest, sectionId: string): string =>\n                getTableSettingsPathForOP(pageName, manifest, sectionId) + QUICKVARPATH\n        }\n    })\n    hideTableTitle?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: (pageName: string[], manifest: Manifest, sectionId: string): string =>\n                getTableSettingsPathForOP(pageName, manifest, sectionId) + QUICKVARPATH\n        }\n    })\n    showCounts?: boolean;\n}\n\nexport class ObjectPageTable implements v4.ObjectPageTable {\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForOP\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    type?: v4.TableTypeV4;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForOP,\n            import: (tableSettings: object): object | undefined => {\n                const value: any = tableSettings['creationMode'];\n                if (typeof value === 'object') {\n                    return value;\n                } else if (typeof value === 'string') {\n                    return {\n                        name: value\n                    };\n                }\n            }\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    creationMode?: TableCreationModeOP;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForOP\n        }\n    })\n    @validity({\n        since: '1.86.0'\n    })\n    personalization?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForOP\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    selectionMode?: v4.SelectionMode;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForOP\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    selectAll?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForOP\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    selectionLimit?: number;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForOP\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    enableExport?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForOP\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    quickVariantSelection?: QuickVariantSelectionV4OP;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForOP\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    condensedTableLayout?: boolean;\n\n    @syncRule({\n        manifest: {\n            path: getTableSettingsPathForOP\n        }\n    })\n    @validity({\n        since: '1.86.0'\n    })\n    enablePaste?: boolean;\n}\n", "import type { Manifest } from '@sap/ux-specification-types';\nimport { SAPUI5_FRAGMENT_CLASS, v4 } from '@sap/ux-specification-types';\nimport { syncRule, validity } from '../../../common/decoration/decorators';\nimport { getCustomSectionPath } from '../../application';\n\nexport class ObjectPageCustomSectionFragment implements v4.ObjectPageCustomSectionFragment {\n    @syncRule({\n        manifest: {\n            path: (entitySet: string[], manifest: Manifest, sectionId): string =>\n                getCustomSectionPath(entitySet, manifest, sectionId, 'position'),\n            key: 'anchor'\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    relatedFacet: string;\n\n    @syncRule({\n        manifest: {\n            path: getCustomSectionPath,\n            import: (_manifest: v4.SapUi5RoutingTargetContentSection, sectionId: string): string => {\n                // Id is read from path's section - it is object's key\n                return sectionId;\n            },\n            export: false\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    id: string;\n\n    @syncRule({\n        manifest: {\n            path: (entitySet: string[], manifest: Manifest, sectionId: string): string =>\n                getCustomSectionPath(entitySet, manifest, sectionId, 'position'),\n            key: 'placement'\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    relativePosition: v4.SectionPosition;\n\n    @syncRule({\n        manifest: {\n            path: getCustomSectionPath\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    title: string;\n\n    @syncRule({\n        manifest: {\n            path: getCustomSectionPath,\n            import: (manifest: v4.SapUi5RoutingTargetContentSection): v4.CustomSectionViewTypesV4 | string => {\n                // Currently only XML supported, but idea is that we need to check 'manifest.type' and allow other types - maybe JS, JSON, etc.\n                if (!manifest.type || manifest.type.startsWith(v4.CustomSectionViewTypesV4.XML)) {\n                    return v4.CustomSectionViewTypesV4.XML;\n                }\n                return '';\n            },\n            export: (manifest: v4.SapUi5RoutingTargetContentSection, object: ObjectPageCustomSectionFragment): void => {\n                // Currently only 'XMLFragment', but in future we can add logic here\n                let type = '' as typeof v4.SAPUI5_FRAGMENT_TYPE_V4;\n                if ('type' in object) {\n                    type += object.type;\n                }\n                if ('className' in object) {\n                    if (object.className === SAPUI5_FRAGMENT_CLASS) {\n                        type += 'Fragment';\n                    } else {\n                        type += object.className;\n                    }\n                }\n                manifest.type = type;\n            }\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    type: v4.CustomSectionViewTypesV4;\n\n    @syncRule({\n        manifest: {\n            path: getCustomSectionPath,\n            import: (manifest: v4.SapUi5RoutingTargetContentSection): typeof SAPUI5_FRAGMENT_CLASS | string => {\n                // Currently only XML Fragment supported, but idea is that we need to check 'value.type'\n                // f.e. type === 'XMLFragment' ? 'sap.ui.core.Fragment' : ...\n                if (!manifest.type || manifest.type.startsWith(v4.CustomSectionViewTypesV4.XML)) {\n                    if (!manifest.type || manifest.type === 'XMLFragment') {\n                        return SAPUI5_FRAGMENT_CLASS;\n                    } else {\n                        return (manifest.type as string).slice(v4.CustomSectionViewTypesV4.XML.length);\n                    }\n                }\n                // Fallback - if there is unsupported value\n                return manifest.type;\n            },\n            export: false\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    className: typeof SAPUI5_FRAGMENT_CLASS;\n\n    @syncRule({\n        manifest: {\n            path: getCustomSectionPath,\n            key: 'name'\n        }\n    })\n    @validity({\n        since: '1.77.0'\n    })\n    fragmentName: string;\n}\n", "export * from './ListReport';\nexport * from './ObjectPage';\nexport * from './FreestylePage';\n", "import type { v4 } from '@sap/ux-specification-types';\nimport type { Table, FilterBar } from '../controls';\nimport { pageLayoutInformation, childId, syncRule, validity } from '../../../common/decoration/decorators';\nimport { getSettingsPathForPage } from '../../application';\n\n/**\n * sync rule deleting all views if the chart view gets deleted\n * @param manifestSection - manifest section of the given view\n */\nfunction deleteAllALPViews(manifestSection: object): void {\n    if (manifestSection['paths']?.[0]?.primary || manifestSection['paths']?.[0]?.secondary) {\n        Object.keys(manifestSection).forEach((key) => delete manifestSection[key]);\n    }\n}\n\n/**\n * sync rule for preventing the export of a property\n */\nfunction doNotExport(): void {\n    return;\n}\n\n/**\n * sync rule for preventing the import of a property\n */\nfunction doNotImport(): void {\n    return;\n}\n\n/**\n * Sync class for import and export of V4 list report\n */\n@pageLayoutInformation({\n    id: 'sap.suite.ui.generic.template.ListReport.view.ListReport',\n    pageId: 'sap.suite.ui.generic.template.ListReport'\n})\nexport class ListReport implements v4.ListReportConfigV4 {\n    @syncRule({\n        manifest: {\n            path: (entitySet): string => getSettingsPathForPage(entitySet) + '/views',\n            import: doNotImport,\n            export: doNotExport,\n            delete: deleteAllALPViews\n        }\n    })\n    chart?: v4.ALPChartView;\n\n    /* Table\n    Example Ids: EntitySet - Booking\n    s4v4lrop::BookingList--fe::table::Booking::LineItem-innerTable for sap.m.Table\n    s4v4lrop::BookingList--fe::table::Booking::LineItem for sap.ui.mdc.Table\n    */\n    table?: v4.ALPTableView | Table;\n\n    @syncRule({\n        manifest: {\n            path: (entitySet: string[]): string => getSettingsPathForPage(entitySet)\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    variantManagement?: v4.VariantManagementTypeListReport;\n\n    @syncRule({\n        manifest: {\n            path: (entitySet): string => getSettingsPathForPage(entitySet) + '/views/paths/[]/0'\n        }\n    })\n    defaultPath?: v4.DefaultPathType;\n\n    @syncRule({\n        manifest: {\n            path: (entitySet): string => getSettingsPathForPage(entitySet)\n        }\n    })\n    defaultTemplateAnnotationPath?: string;\n\n    // Currently childIds are not used in case of OData V4 Example Id - \"fe::FilterBar::Booking\", where Booking is entitySet\n    @childId('fe::FilterBar')\n    filterBar?: FilterBar;\n}\n", "import type { ObjectPageHeader, ObjectPageLayout } from '../controls';\nimport { v4 } from '@sap/ux-specification-types';\nimport { pageLayoutInformation, childId, syncRule, validity } from '../../../common/decoration/decorators';\nimport { getSettingsPathForPage } from '../../application';\n\n@pageLayoutInformation({\n    id: `${v4.FE_TEMPLATE_V4_OBJECT_PAGE}.view.Details`,\n    pageId: v4.FE_TEMPLATE_V4_OBJECT_PAGE\n})\nexport class ObjectPage implements v4.ObjectPageConfigV4 {\n    @childId('header')\n    header?: ObjectPageHeader;\n\n    @childId('layout')\n    layout?: ObjectPageLayout;\n\n    @syncRule({\n        manifest: {\n            path: (entitySet: string[]): string => getSettingsPathForPage(entitySet)\n        }\n    })\n    @validity({\n        since: '1.84.0'\n    })\n    variantManagement?: v4.VariantManagementTypeObjectPage;\n\n    @childId('sections')\n    sections?: v4.GenericSections | v4.CustomSections;\n}\n", "/**\n * Sync class for import and export of V4 freestyle page\n */\nexport class FreestylePage {}\n", "import * as controls from './controls';\nimport * as pages from './pages';\nimport type { MetadataInstanceInterface } from '../../common/decoration/factory';\nimport { MetadataFactory } from '../../common/decoration/factory';\nimport { PageTypeV2 } from '@sap/ux-specification-types';\n\n/**\n * Note: If the key of the elements corresponds to the name of the definition in schema, you do not have to list it explicitly here.\n * The following tables only comprise entries for elements that do not follow the official pattern (yet)\n */\nconst ALPElements = {\n    //no deviations\n};\n\nconst LRElements = {\n    //no deviations\n};\n\nconst OPElements = {\n    Table: controls.ObjectPageTable,\n    TableColumn: controls.ObjectPageTableColumn,\n    ObjectPageCustomSectionView: controls.ObjectPageCustomSectionFragment,\n    ActionAfterExecutionConfiguration: controls.ActionAfterExecutionConfigurationOP\n};\n\nconst pageTypes = {\n    [PageTypeV2.AnalyticalListPage]: ALPElements,\n    [PageTypeV2.ListReport]: LRElements,\n    [PageTypeV2.ObjectPage]: OPElements\n};\n\n/**\n * V4 specific factory class for creating instances of (reflect) metadata classes\n */\nexport class MetadataInstanceFactoryV4 extends MetadataFactory implements MetadataInstanceInterface {\n    constructor() {\n        super(controls, pages, pageTypes);\n    }\n}\n", "import type { Definition } from 'typescript-json-schema';\nimport type { Manifest, v4, ImportObjectPageV4Parameters } from '@sap/ux-specification-types';\nimport {\n    MANIFESTPATH,\n    FacetTitlePrefix,\n    ManifestSection,\n    PageTypeV4,\n    DefinitionName,\n    LogSeverity\n} from '@sap/ux-specification-types';\nimport { UIAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/UI';\nimport { importSettingsOfObject } from '../utils';\nimport { DEFINITION_LINK_PREFIX, getDefinitionKey } from '../../../common';\nimport i18next from 'i18next';\nimport { log } from '../../../../extensionLogger';\nimport { initI18n } from '../../../../i18n/i18n';\nimport { MetadataInstanceFactoryV4 as Factory } from '../../export/factory';\nimport type { MetadataInstanceInterface } from '../../../common/decoration/factory';\n\n/**\n * Converts section ID to manifest ID (replaces '::' with ['/', '#'])\n * @param sectionId - converted ID of the given object page section\n * @param splitOnLt - split ID and get only part in <...>\n * @returns manifest ID\n */\nexport function getManifestId(sectionId: string, splitOnLt = false) {\n    const tableId = splitOnLt ? sectionId.split('<')[1]?.slice(0, -1) : sectionId;\n    const pathParts = tableId.split(`@${UIAnnotationTerms.LineItem}`);\n    return `${pathParts[0]?.replace(/::/g, '/')}@${UIAnnotationTerms.LineItem}${pathParts[1]?.replace(/::/g, '#')}`;\n}\n\n/**\n * Converts manifest ID to definition ID (replaces ['#', '/'] with '::')\n * @param manifestId - ID of the given object page section in manifest\n * @returns definition ID\n */\nexport function getDefinitionId(manifestId: string) {\n    return manifestId.replace(/#/g, '::').replace(/\\//g, '::');\n}\n\n/**\n * Fills the section table columns in a V4 config\n * @param {ImportObjectPageV4Parameters} importParameters  - object comprising all input data\n * @param manifestSection - section of the manifest.json\n * @param configPart - the given part of the object page config\n * @param sectionId - converted ID of the given object page section\n * @param manifestSectionId - ID of the given object page section in manifest\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param v4Page - page definition in V4 format\n */\nfunction fillTableColumnsInConfig(\n    importParameters: ImportObjectPageV4Parameters,\n    manifestSection: string | number | boolean | object,\n    configPart: object,\n    sectionId: string,\n    factory: MetadataInstanceInterface,\n    manifestSectionId: string\n) {\n    if (manifestSection['columns']) {\n        configPart[sectionId].table.columns = {};\n        let tableDefinition: DefinitionName;\n        const lineItems = importParameters.jsonSchema.definitions[getDefinitionId(manifestSectionId)] as Definition;\n        if (lineItems) {\n            for (const columnKey in lineItems.properties) {\n                const columnInSchema = lineItems.properties[columnKey] as Definition;\n                if (columnInSchema.$ref.indexOf(DefinitionName.CustomColumnOP) > -1) {\n                    tableDefinition = DefinitionName.CustomColumnOP;\n                } else {\n                    tableDefinition = DefinitionName.ObjectPageTableColumn;\n                }\n                const columnInConfig = factory.createInstance(PageTypeV4.ObjectPage, tableDefinition);\n\n                importSettingsOfObject(\n                    columnInConfig,\n                    importParameters.manifest,\n                    importParameters.jsonSchema.definitions[tableDefinition],\n                    importParameters.routingId,\n                    [columnKey],\n                    manifestSectionId\n                );\n                if (Object.keys(columnInConfig).length > 0) {\n                    configPart[sectionId].table.columns[columnKey] = columnInConfig;\n                }\n            }\n        }\n    }\n}\n\n/**\n * Fills the table actions in config.json\n * @param {ImportObjectPageV4Parameters} importParameters - object comprising all input data\n * @param sectionId - ID of the current section\n * @param configPart - the given part of the object page config\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param v4Page - current (object) page\n */\nfunction fillTableActionsInConfig(\n    importParameters: ImportObjectPageV4Parameters,\n    sectionId: string,\n    configPart: object,\n    factory: MetadataInstanceInterface,\n    manifestSectionId: string = sectionId\n) {\n    const actionsDefinition = importParameters.jsonSchema.definitions[\n        `${DefinitionName.Actions}<${getDefinitionId(manifestSectionId)}>`\n    ] as Definition;\n    if (actionsDefinition) {\n        for (const actionKey in actionsDefinition['properties']) {\n            const actionDefinition = actionsDefinition.properties[actionKey];\n            if (typeof actionDefinition === 'object' && actionDefinition.$ref) {\n                const definitionKey = getDefinitionKey(actionDefinition.$ref);\n                const schemaPropertyName = definitionKey.split('<')[0];\n                configPart[sectionId].table.toolBar.actions[actionKey] = factory.createInstance(\n                    PageTypeV4.ObjectPage,\n                    schemaPropertyName\n                );\n                importSettingsOfObject(\n                    configPart[sectionId].table.toolBar.actions[actionKey],\n                    importParameters.manifest,\n                    importParameters.jsonSchema.definitions[definitionKey],\n                    importParameters.routingId,\n                    [actionKey],\n                    manifestSectionId\n                );\n                if (Object.keys(configPart[sectionId].table.toolBar.actions[actionKey]).length === 0) {\n                    delete configPart[sectionId].table.toolBar.actions[actionKey];\n                }\n            }\n        }\n    }\n}\n\n/**\n * Fills the table settings in config.json\n * @param {ImportObjectPageV4Parameters} importParameters  - object comprising all input data\n * @param manifestSettings - object page settings section of the manifest\n * @param configPart - the given part of the object page config\n * @param sectionId - ID of the current section\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param v4Page - current (object) page\n */\nfunction fillTableInConfig(\n    importParameters: ImportObjectPageV4Parameters,\n    manifestSettings: v4.SapUiPageSettingsV4,\n    configPart: object,\n    sectionId: string,\n    factory: MetadataInstanceInterface,\n    tableId?: string\n) {\n    const manifestSectionId = tableId ? tableId : getManifestId(sectionId);\n    const manifestSection = manifestSettings.controlConfiguration[manifestSectionId];\n\n    if (manifestSection) {\n        // Data needs to be transferred\n        configPart[sectionId] = {};\n        configPart[sectionId].table = factory.createInstance(PageTypeV4.ObjectPage, DefinitionName.ObjectPageTable);\n\n        const sectionDefinition = `${DefinitionName.ObjectPageTable}<${\n            tableId ? getDefinitionId(tableId) : sectionId.replace('#', '::')\n        }>`;\n        importSettingsOfObject(\n            configPart[sectionId].table,\n            importParameters.manifest,\n            importParameters.jsonSchema.definitions[sectionDefinition],\n            importParameters.routingId,\n            [],\n            manifestSectionId\n        );\n\n        configPart[sectionId].table.toolBar = factory.createInstance(PageTypeV4.ObjectPage, DefinitionName.ToolBar, {\n            actions: {}\n        });\n        fillTableActionsInConfig(importParameters, sectionId, configPart, factory, manifestSectionId);\n        fillTableColumnsInConfig(importParameters, manifestSection, configPart, sectionId, factory, manifestSectionId);\n    }\n}\n\n/**\n * Fills the form settings in config.json\n * @param {ImportObjectPageV4Parameters} importParameters  - object comprising all input data\n * @param manifestSettings - object page settings section of the manifest\n * @param configPart - the given part of the object page config\n * @param sectionId - ID of the current section\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param formId - from defitinion ID\n */\nfunction fillFormInConfig(\n    importParameters: ImportObjectPageV4Parameters,\n    manifestSettings: v4.SapUiPageSettingsV4,\n    configPart: object,\n    sectionId: string,\n    factory: MetadataInstanceInterface\n) {\n    const manifestSectionId = getManifestId(sectionId);\n    const manifestSection = manifestSettings.controlConfiguration?.[manifestSectionId];\n    if (manifestSection) {\n        configPart[sectionId] = {};\n        configPart[sectionId].form = factory.createInstance(PageTypeV4.ObjectPage, DefinitionName.ObjectPageForm, {\n            actions: {}\n        });\n    }\n}\n\n/**\n * Fills the sections and subsections of the configuration (recursive function)\n * @param {ImportObjectPageV4Parameters} importParameters  - object comprising all input data\n * @param sectionProperties - current properties' list (of sections or subsections)\n * @param manifestSettings - object page settings section of the manifest\n * @param configPart - the given part of the object page config\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param v4Page - current (object) page\n */\nfunction fillSectionsInConfig(\n    importParameters: ImportObjectPageV4Parameters,\n    sectionProperties: Definition,\n    manifestSettings: v4.SapUiPageSettingsV4,\n    configPart: Definition,\n    factory: MetadataInstanceInterface\n): void {\n    for (const sectionId in sectionProperties) {\n        const schemaSection: Definition = sectionProperties[sectionId];\n        let tableManifestId = sectionId;\n        if (\n            sectionId.includes(UIAnnotationTerms.PresentationVariant) &&\n            schemaSection.$ref?.startsWith(DEFINITION_LINK_PREFIX + DefinitionName.ObjectPageSectionTableV4)\n        ) {\n            const sectionIdRef = schemaSection['$ref'].split(DEFINITION_LINK_PREFIX)[1];\n            tableManifestId = sectionIdRef ? getManifestId(sectionIdRef, true) : sectionId;\n            fillTableInConfig(importParameters, manifestSettings, configPart, sectionId, factory, tableManifestId);\n        } else if (schemaSection.$ref?.startsWith(DEFINITION_LINK_PREFIX + DefinitionName.ObjectPageSectionTableV4)) {\n            // Section without subsections\n            fillTableInConfig(importParameters, manifestSettings, configPart, sectionId, factory);\n        } else if (schemaSection.properties && schemaSection.properties.subsections) {\n            configPart[sectionId] = {\n                subsections: {}\n            };\n            fillSectionsInConfig(\n                importParameters,\n                schemaSection.properties.subsections['properties'],\n                manifestSettings,\n                configPart[sectionId].subsections,\n                factory\n            );\n        } else if (\n            schemaSection.$ref?.startsWith(DEFINITION_LINK_PREFIX + DefinitionName.ObjectPageSectionForm) &&\n            schemaSection.$ref?.includes(`@${UIAnnotationTerms.FieldGroup}::`)\n        ) {\n            // Form section\n            fillFormInConfig(importParameters, manifestSettings, configPart, sectionId, factory);\n        }\n    }\n}\n\n/**\n * Fills the header facets in the config file of a V4 object page\n * @param appSchema - app specific schema\n * @param objectPageConfig - configuration, to be enhanced\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @param manifest - manifest.json of the app\n * @param v4Page - current (object) page\n */\nfunction fillHeaderFacets(\n    appSchema: Definition,\n    objectPageConfig: v4.ObjectPageConfigV4,\n    factory: MetadataInstanceInterface,\n    manifest: Manifest,\n    routingId: string\n): void {\n    const headerSections = appSchema.definitions[DefinitionName.HeaderSections] as Definition;\n    if (headerSections && headerSections.properties) {\n        objectPageConfig.header.sections = {};\n        for (const sectionId in headerSections.properties) {\n            let sectionDefinition = headerSections.properties[sectionId];\n            let factoryKey;\n            const sectionDefinitionKey = headerSections.properties[sectionId]['$ref']?.split(DEFINITION_LINK_PREFIX)[1];\n            if (sectionDefinitionKey) {\n                sectionDefinition = appSchema.definitions[sectionDefinitionKey];\n                factoryKey = sectionDefinitionKey.split('<')[0];\n            }\n            const isCustomHeaderSection = factoryKey?.includes(DefinitionName.ObjectPageCustomHeaderSectionFragment);\n            if (!isCustomHeaderSection) {\n                objectPageConfig.header.sections[sectionId] = factoryKey\n                    ? factory.createInstance(PageTypeV4.ObjectPage, factoryKey)\n                    : {};\n                importSettingsOfObject(\n                    objectPageConfig.header.sections[sectionId],\n                    manifest,\n                    sectionDefinition,\n                    routingId,\n                    [],\n                    (sectionDefinition as Definition)?.title?.split(FacetTitlePrefix)[1]\n                );\n            }\n        }\n    }\n}\n\n/**\n * Fills the object page configuration from the given manifest\n * @param {ImportObjectPageV4Parameters} importParameters  - object comprising all input data\n * @param v4Page - current (object) page\n * @param {MetadataInstanceInterface} factory - factory, for generating the access to reflect-metadata\n * @returns {ObjectPageConfig} the object page configuration\n */\nfunction fillObjectPageConfig(\n    importParameters: ImportObjectPageV4Parameters,\n    v4Page: v4.SapUiAppPageV4,\n    factory: MetadataInstanceInterface\n): v4.ObjectPageConfigV4 {\n    const objectPageConfig: v4.ObjectPageConfigV4 = factory.createPageInstance(PageTypeV4.ObjectPage);\n\n    const manifestSettings = v4Page.options && v4Page.options.settings;\n\n    // Transfer header information\n    objectPageConfig.header = factory.createInstance(PageTypeV4.ObjectPage, DefinitionName.ObjectPageHeader);\n    importSettingsOfObject(\n        objectPageConfig.header,\n        importParameters.manifest,\n        importParameters.jsonSchema.definitions[DefinitionName.ObjectPageHeader],\n        importParameters.routingId,\n        []\n    );\n    // Transfer layout information\n    objectPageConfig.layout = factory.createInstance(PageTypeV4.ObjectPage, DefinitionName.ObjectPageLayout);\n    importSettingsOfObject(\n        objectPageConfig.layout,\n        importParameters.manifest,\n        importParameters.jsonSchema.definitions[DefinitionName.ObjectPageLayout],\n        importParameters.routingId,\n        []\n    );\n\n    importSettingsOfObject(\n        objectPageConfig,\n        importParameters.manifest,\n        importParameters.jsonSchema,\n        importParameters.routingId,\n        []\n    );\n    if (!objectPageConfig.sections) {\n        objectPageConfig.sections = {};\n    }\n    if (manifestSettings) {\n        if (manifestSettings.controlConfiguration && importParameters.jsonSchema.definitions[DefinitionName.Sections]) {\n            // Fill sections and subsections\n            objectPageConfig.sections = {};\n            fillSectionsInConfig(\n                importParameters,\n                importParameters.jsonSchema.definitions[DefinitionName.Sections]['properties'],\n                manifestSettings,\n                objectPageConfig.sections as Definition,\n                factory\n            );\n        }\n        // Fill Custom sections\n        const customSections = manifestSettings.content?.body?.sections;\n        if (customSections) {\n            objectPageConfig.sections.custom = [];\n            for (const sectionId in customSections) {\n                const section = factory.createInstance(\n                    PageTypeV4.ObjectPage,\n                    DefinitionName.ObjectPageCustomSectionFragment\n                );\n                importSettingsOfObject(\n                    section,\n                    importParameters.manifest,\n                    importParameters.jsonSchema.definitions[DefinitionName.ObjectPageCustomSectionFragment],\n                    importParameters.routingId,\n                    [],\n                    sectionId\n                );\n                objectPageConfig.sections.custom.push(section);\n            }\n        }\n\n        // Fill header facets\n        fillHeaderFacets(\n            importParameters.jsonSchema,\n            objectPageConfig,\n            factory,\n            importParameters.manifest,\n            importParameters.routingId\n        );\n    }\n    return objectPageConfig;\n}\n\n/**\n * External API: Create configuration (file content) for a V4 object page\n * @param {ImportObjectPageV4Parameters} importParameters  - object comprising all input data\n * @param {ExtensionLogger} logger - Logger class for logging messages\n *\n * @returns {ObjectPageConfig} config - the object page configuration\n */\nexport function createObjectPageConfigV4(\n    importParameters: ImportObjectPageV4Parameters\n): v4.ObjectPageConfigV4 | undefined {\n    // Initialize i18next\n    initI18n();\n    if (!importParameters.manifest[ManifestSection.ui5] || !importParameters.manifest[ManifestSection.ui5]['routing']) {\n        log(importParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOROUTING'),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.ui5]\n            }\n        });\n        return;\n    }\n    const v4Pages = importParameters.manifest[ManifestSection.ui5]['routing']['targets'] as v4.SapUi5RoutingTargetsV4;\n    if (!v4Pages) {\n        log(importParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOTARGETS'),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.ui5, 'routing']\n            }\n        });\n        return;\n    }\n    const v4Page = v4Pages[importParameters.routingId];\n    if (!v4Page) {\n        log(importParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOROUTINGID', { routingId: importParameters.routingId }),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.ui5, 'routing']\n            }\n        });\n        return;\n    }\n    const factory = new Factory();\n\n    //Fill config.json\n    return fillObjectPageConfig(importParameters, v4Page as v4.SapUiAppPageV4, factory);\n}\n", "import { AppProvider } from '../../../common/appProvider';\nimport { AppSettings } from '../../application';\nimport { generatePageId, getSchemaFilePath, determineV4PageTemplateType } from '../../../common';\nimport { createListReportConfig } from '../pages/listReport';\nimport { createObjectPageConfigV4 } from '../pages/objectPage';\nimport type {\n    ExtensionLogger,\n    Files,\n    Manifest,\n    SapUi5RoutingRoute,\n    SapUi5RoutingRouteTarget,\n    ImportAnalyticalListPageV4Parameters,\n    ImportListReportV4Parameters,\n    ImportObjectPageV4Parameters,\n    ImportAllConfigsParameters\n} from '@sap/ux-specification-types';\nimport {\n    v4,\n    MANIFESTPATH,\n    TemplateType,\n    PageTypeV4,\n    FioriElementsVersion,\n    SchemaType,\n    ManifestSection,\n    ViewTypes,\n    LogSeverity\n} from '@sap/ux-specification-types';\nimport { importSettingsOfObject } from '../utils';\nimport { log } from '../../../../extensionLogger';\nimport i18next from 'i18next';\nimport { initI18n } from '../../../../i18n/i18n';\nimport type { Definition } from 'typescript-json-schema';\n\nexport enum Constants {\n    OptionalQuery = ':?query:',\n    Component = 'sap/fe/AppComponent',\n    Namespace = 'sap.fe.templates'\n}\n\n// Store controller names which should be handled lately\nexport const unhandledControllers: Array<string> = [];\n// Store route associations\nlet associations: object = {};\n\n/**\n * Sort in following way\n * 1. string targets first\n * 2. Then sort targets as array by elements count - from lowest to highest(ASC)\n * @param {SapUi5RoutingRoute} route1 - First instance of router to compare.\n * @param {SapUi5RoutingRoute} route2 - Second instance of router to compare.\n * @return {number} Compare result.\n */\nfunction routesSorter(route1: SapUi5RoutingRoute, route2: SapUi5RoutingRoute): number {\n    const target1 = route1.target;\n    const target2 = route2.target;\n    const isT1Array = Array.isArray(target1);\n    const isT2Array = Array.isArray(target2);\n    if (isT1Array && isT2Array) {\n        return target1.length - target2.length;\n    }\n    if (!isT1Array && !isT2Array) {\n        return 0;\n    }\n    return !isT1Array ? -1 : 1;\n}\n\n/**\n * Method to resolve target and return target name as string.\n * Thing is that we can receive target as array of targets and we need detect which target is unique target in that array.\n * @param {SapUi5RoutingRouteTarget} target - Target to resolve.\n * @param {Array<string>} usedTargets - Array of resolved targets(which means that those targets are not unique anymore).\n * @return {string} Resolved unique target namet.\n */\nfunction resolveTarget(target: SapUi5RoutingRouteTarget, usedTargets: Array<string> = []): string {\n    if (!Array.isArray(target)) {\n        return target;\n    }\n    let targetParts: Array<string> = target;\n    for (const usedTarget of usedTargets) {\n        targetParts = targetParts.filter((targetPart) => !usedTarget.includes(targetPart));\n    }\n    return targetParts[0];\n}\n\n/**\n * Method which populates object with routings routes associations.\n * @param {SapUi5RoutingRoute} routes - Routing routes.\n * @return {object} Map object of association routes.\n */\nfunction populateAssociations(routes: SapUi5RoutingRoute[]): object {\n    const routesAssociations = {};\n    routes = routes.concat().sort(routesSorter);\n    const resolvedTargets = [];\n    for (const route of routes) {\n        const parts = route.pattern.split(':')[0].split('/');\n        let target;\n        if (Array.isArray(route.target)) {\n            target = resolveTarget(route.target, resolvedTargets);\n            resolvedTargets.push(route.target);\n        } else {\n            target = route.target;\n        }\n        for (const part of parts) {\n            const prop = part.split('(')[0];\n            routesAssociations[target] = routesAssociations[target] ? `${routesAssociations[target]}.${prop}` : prop;\n        }\n    }\n    return routesAssociations;\n}\n\n/**\n * Determines the page type of a routing target\n * @param target - routing target, as defined in manifest\n * @param logger - logger for error messages\n * @param routingTargetId - ID of the routing target\n * @returns the page type\n */\nfunction determinePageType(\n    target: v4.RoutingTargetOptions,\n    logger: ExtensionLogger,\n    routingTargetId: string\n): PageTypeV4 {\n    let pageType: PageTypeV4;\n    if (target['name']) {\n        if (target['name'] === v4.FE_TEMPLATE_V4_CUSTOM_PAGE) {\n            pageType = PageTypeV4.CustomPage;\n        } else if (\n            target['name'].endsWith(PageTypeV4.ListReport) ||\n            target['name'].endsWith(PageTypeV4.AnalyticalListPage)\n        ) {\n            pageType = PageTypeV4.ListReport;\n        } else if (target['name'].endsWith(PageTypeV4.ObjectPage)) {\n            pageType = PageTypeV4.ObjectPage;\n        } else {\n            pageType = PageTypeV4.CustomPage;\n        }\n    } else if ('viewId' in target) {\n        pageType = PageTypeV4.CustomPage;\n    } else {\n        log(logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('INVALIDTARGETDEFINITION', { target: JSON.stringify(target) }),\n            location: {\n                path: MANIFESTPATH,\n                range: [`${ManifestSection.ui5}/routing/targets/${routingTargetId}`]\n            }\n        });\n        if (target['viewType'] in ViewTypes && 'viewName' in target) {\n            pageType = PageTypeV4.CustomPage;\n        }\n    }\n    return pageType;\n}\n\nexport type ConversionParameters = {\n    target: v4.RoutingTargetOptions;\n    pageType: PageTypeV4;\n    manifest: Manifest;\n    schemas: Files;\n    logger: ExtensionLogger;\n    page: v4.Page;\n    id: string;\n    templateType: TemplateType;\n};\n\nfunction convertSettingsToConfig(params: ConversionParameters) {\n    const schemaId = generatePageId(\n        params.page.pageType,\n        params.page.entitySet,\n        params.target['viewId'] || (params.pageType === PageTypeV4.CustomPage && params.target['id'])\n    );\n    if (!schemaId) {\n        return;\n    }\n    // Get the JSON schema for the page. If no page specific schema exists, fall back top the generic schema for the page type\n    const jsonSchema: string =\n        Object.keys(params.schemas).find((element) => element.includes(schemaId)) ||\n        Object.keys(params.schemas).find((element) => element.includes(schemaId.slice(0, -1))) ||\n        Object.keys(params.schemas).find((element) => element.includes(params.page.pageType));\n\n    if (jsonSchema) {\n        if (params.page.pageType === PageTypeV4.ObjectPage) {\n            const importParameters: ImportObjectPageV4Parameters = {\n                manifest: params.manifest,\n                jsonSchema: params.schemas[jsonSchema],\n                routingId: params.id,\n                logger: params.logger\n            };\n            params.page.config = createObjectPageConfigV4(importParameters);\n        } else if (params.templateType === TemplateType.ListReportObjectPageV4) {\n            const importParameters: ImportListReportV4Parameters = {\n                manifest: params.manifest,\n                jsonSchema: params.schemas[jsonSchema],\n                logger: params.logger\n            };\n            params.page.config = createListReportConfig(importParameters, SchemaType.ListReport);\n        } else if (params.templateType === TemplateType.AnalyticalListPageV4) {\n            const importParameters: ImportAnalyticalListPageV4Parameters = {\n                manifest: params.manifest,\n                jsonSchema: params.schemas[jsonSchema],\n                logger: params.logger\n            };\n            params.page.config = createListReportConfig(importParameters, SchemaType.AnalyticalListPage);\n        } else if (\n            params.templateType === TemplateType.FreestylePageV4 &&\n            params.page.pageType === PageTypeV4.ListReport\n        ) {\n            const importParameters: ImportListReportV4Parameters = {\n                manifest: params.manifest,\n                jsonSchema: params.schemas[jsonSchema],\n                logger: params.logger\n            };\n            const templateType = determineV4PageTemplateType(params.target as v4.SapUiAppPageV4);\n            const schemaType =\n                templateType === TemplateType.AnalyticalListPageV4\n                    ? SchemaType.AnalyticalListPage\n                    : SchemaType.ListReport;\n            params.page.config = createListReportConfig(importParameters, schemaType);\n        }\n    }\n}\n\n/**\n * Updates the class variable collecting the unhandled controllers\n * @param target - current routing target\n */\nfunction updateUnhandledControllers(target: v4.RoutingTargetOptions): void {\n    if (target.options) {\n        if ('viewName' in target.options.settings) {\n            const viewParts = target.options.settings.viewName.split('.');\n            unhandledControllers.push(viewParts[viewParts.length - 1]);\n        }\n    } else if ('viewId' in target) {\n        // There no 'options' for custom page target -\n        //    we need check target's controller source for navigation\n        const viewParts = target.viewName.split('.');\n        unhandledControllers.push(viewParts[viewParts.length - 1]);\n    }\n}\n\n/*\n * Evaluates the target options in manifest, determines variantManagement and page navigation.\n * @param {RoutingTargetOptions} target - target definition in manifest\n * @param {Page} page - page config, to be updated\n */\nfunction setVariantManagmentAndNavigation(target: v4.RoutingTargetOptions, page: v4.PageV4): void {\n    if (target.options) {\n        if (target.options.settings.variantManagement) {\n            page.variantManagement = target.options.settings.variantManagement;\n        }\n        page.navigation = {};\n        for (const name in target.options.settings.navigation) {\n            const navigationRoute = target.options.settings.navigation[name];\n            page.navigation[name] = navigationRoute.detail;\n        }\n    }\n}\n\n/**\n * Checks if the manifest's routing target represents a custom page definition\n * @param {RoutingTargetOptions} target - target definition in manifest\n * @param {Page} page - page config, to be updated\n * @param {PageTypeV4} pageType - page type\n */\nfunction evaluateCustomPageSettings(target: v4.RoutingTargetOptions, page: v4.Page, pageType: PageTypeV4): void {\n    if ('viewId' in target) {\n        // Populate view of custom page\n        page.view = {\n            id: target.viewId,\n            name: target.viewName\n        };\n    } else if (pageType === PageTypeV4.CustomPage) {\n        const customPageName =\n            (target as v4.SapUi5RoutingTargetCustomPageV4New).options?.settings?.viewName || target['viewName'];\n        page.view = {\n            ...(target.id && { id: target.id }),\n            ...(customPageName && { name: customPageName })\n        };\n    }\n}\n\n/**\n * Determines a single page  information for app.json and creates the configuration for the page\n * @param {v4.SapUi5RoutingV4} routing - complete routing information from manifest\n * @param {string} id - routing target id in manifest\n * @param {v4.Pages} pages - list of all pages, the current page information gets added\n * @param {ImportAllConfigsParameters} importParameters - structure comprising all input parameters\n *\n */\nfunction getSinglePageAndConfig(\n    routing: v4.SapUi5RoutingV4,\n    id: string,\n    pages: v4.Pages,\n    importParameters: ImportAllConfigsParameters\n): void {\n    const target: v4.RoutingTargetOptions = routing.targets[id];\n    const pageType = determinePageType(target, importParameters.logger, id);\n    const page: v4.PageV4 = { pageType };\n\n    // Entity set\n    if (target.options) {\n        page.entitySet = target.options.settings?.entitySet;\n    }\n    if (target.controlAggregation) {\n        page.controlAggregation = target.controlAggregation;\n    }\n    if (associations[id] && associations[id].indexOf('.') !== -1) {\n        const parts = associations[id].split('.');\n        page.navigationProperty = parts[parts.length - 1];\n    }\n    // Custom page's view object\n    evaluateCustomPageSettings(target, page, pageType);\n    setVariantManagmentAndNavigation(target, page);\n    updateUnhandledControllers(target);\n    // Get layout from route\n    const route = routing.routes.find((routingRoute) => routingRoute.name === id);\n    if (route) {\n        page.routePattern = route.pattern;\n        if ('layout' in route) {\n            page.defaultLayoutType = route.layout;\n        }\n    }\n\n    pages[id] = page;\n    // convert settings to config\n    const conversionParameters: ConversionParameters = {\n        target,\n        pageType,\n        manifest: importParameters.manifest,\n        schemas: importParameters.appSchemas,\n        logger: importParameters.logger,\n        page,\n        id,\n        templateType: importParameters.templateType\n    };\n    convertSettingsToConfig(conversionParameters);\n}\n/**\n * Determines the Pages(app.json) using routing configuration from manifest and creates the configuration for each page\n * @param {ImportAllConfigsParameters} importParameters - structure comprising all input parameters\n *\n * @returns a list of configs for all pages\n */\nexport function getPagesAndConfigs(importParameters: ImportAllConfigsParameters): v4.Pages {\n    const pages: v4.Pages = {};\n    const routing: v4.SapUi5RoutingV4 = importParameters.manifest[ManifestSection.ui5].routing as v4.SapUi5RoutingV4;\n\n    if (!routing || !routing.routes) {\n        const message = i18next.t('NOROUTING');\n        log(importParameters.logger, {\n            severity: LogSeverity.Error,\n            message,\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.ui5]\n            }\n        });\n        return pages;\n    }\n    associations = populateAssociations(routing.routes || []);\n    for (const id in routing.targets) {\n        getSinglePageAndConfig(routing, id, pages, importParameters);\n    }\n    return pages;\n}\n\n/**\n * Get the id of the page that is to open when the application is started.\n * @param routing UI5 routing configuration\n */\nexport function getHome(routing: v4.SapUi5RoutingV4): string | undefined {\n    let routeHome;\n    if (routing && routing.routes && routing.routes.length > 0) {\n        for (const route of routing.routes) {\n            //find the home, i.e. route which starts with ':?query:' pattern for List Report,\n            //resp. doesn't contain '/' for Form Page\n            if (route.pattern.startsWith(':?query:')) {\n                routeHome = route;\n                break;\n            } else if (route.pattern.indexOf('/') === -1) {\n                routeHome = route;\n                continue;\n            }\n        }\n        if (routeHome) {\n            return resolveTarget(routeHome.target);\n        } else {\n            return resolveTarget(routing.routes[0].target);\n        }\n    } else {\n        return undefined;\n    }\n}\n\n/**\n * Method which detects app settings from manifest.\n * Currently only one setting is detected -Flexible Column Layout\n * @param routing UI5 routing configuration.\n * @return {AppSettings} Application settings.\n */\nexport function getSettings(routing: v4.SapUi5RoutingV4): AppSettings {\n    if (routing?.config?.flexibleColumnLayout || routing?.config?.viewPath) {\n        return {\n            flexibleColumnLayout: routing?.config?.flexibleColumnLayout,\n            ...(routing?.config?.viewPath && { viewPath: routing.config.viewPath })\n        };\n    }\n    return undefined;\n}\n\nexport function getPages(manifest: Manifest, targetName: string): v4.SapUiAppPagesV4 {\n    const routing = manifest[ManifestSection.ui5].routing as v4.SapUi5RoutingV4;\n    const pages: v4.SapUiAppPagesV4 = {};\n    if (routing) {\n        for (const id in routing.targets) {\n            const v4Page = routing.targets[id];\n            if (v4Page['name'] === targetName) {\n                pages[id] = v4Page as v4.SapUiAppPageV4;\n            }\n        }\n    }\n    return pages;\n}\n\nexport class V4AppProvider extends AppProvider {\n    public constructor(importParameters: ImportAllConfigsParameters) {\n        initI18n();\n        // Import settings\n        const appSettings = new AppSettings();\n        const schemaFile = getSchemaFilePath(SchemaType.Application);\n        const appSchema = importParameters.appSchemas[schemaFile.filename] as Definition;\n        importSettingsOfObject(appSettings, importParameters.manifest, appSchema.definitions.AppSettings, '', []);\n        super(\n            importParameters.manifest,\n            importParameters.appSchemas,\n            getHome(importParameters.manifest[ManifestSection.ui5].routing as v4.SapUi5RoutingV4),\n            getPagesAndConfigs(importParameters),\n            FioriElementsVersion.v4,\n            {\n                ...getSettings(importParameters.manifest[ManifestSection.ui5].routing as v4.SapUi5RoutingV4),\n                ...appSettings\n            },\n            importParameters.logger\n        );\n        this.unhandledControllers = unhandledControllers;\n    }\n}\n", "import { readFile } from 'fs';\nimport { join } from 'path';\nimport type { FioriElementsVersion } from '@sap/ux-specification-types';\nimport { SchemaType } from '@sap/ux-specification-types';\n\n/**\n * Return the path to the generic JSON schema\n * @param version - Fiori elements version\n * @param schemaType - Type of the schema, e.g Application, ListReport, ObjectPage, ...\n */\nexport const getPathToGenericSchema = (\n    version: FioriElementsVersion,\n    schemaType: SchemaType,\n    directory: string = __dirname\n): string | undefined => {\n    const fileName =\n        schemaType === SchemaType.Application\n            ? `${SchemaType.Application}${version.toUpperCase()}.json`\n            : `${schemaType}Config.json`;\n    if (directory.endsWith('dist')) {\n        return join(directory, 'schemas', version, fileName);\n    } else if (directory.endsWith(join('specification', 'packages', 'specification'))) {\n        return join(directory, 'dist', 'schemas', version, fileName);\n    } else if (directory.endsWith(join('src', 'specification'))) {\n        return join(directory, '..', '..', 'dist', 'schemas', version, fileName);\n    } else if (directory.indexOf('node_modules') > -1) {\n        const moduleRoot = directory.substring(0, directory.indexOf('node_modules') + 12);\n        return join(moduleRoot, '@sap', 'ux-specification', 'dist', 'schemas', version, fileName);\n    }\n    return undefined;\n};\n\n/**\n * Read JSON schema from given path\n * @param path - path to schema file\n */\nconst readJsonSchema = async (path: string): Promise<JSON> => {\n    return new Promise((resolve, reject): void => {\n        readFile(path, { encoding: 'utf8' }, (err, data): void => {\n            if (err) {\n                reject(err);\n            } else {\n                resolve(JSON.parse(data));\n            }\n        });\n    });\n};\n\n/**\n * Return the generic schema for a given version and type\n * @param version - Fiori elements version, e.g. v2 or v4\n * @param schemaType - Type of the schema, e.g Application, ListReport, ObjectPage, ...\n */\nexport const getGenericSchema = async (version: FioriElementsVersion, schemaType: SchemaType): Promise<JSON> => {\n    try {\n        const path = getPathToGenericSchema(version, schemaType, __dirname);\n        return await readJsonSchema(path);\n    } catch (error) {\n        throw new Error(`No schema available for type: ${schemaType}, version: ${version}. Error was ${error.message}`);\n    }\n};\n", "import { addLineItemsType, addSelectionFields, addTableColumnExtensions, addStandardHeaderActions } from './utils';\nimport { findListReportPageV2 } from '../import';\nimport {\n    DEFINITION_LINK_PREFIX,\n    addFieldsType,\n    addEnumForSingleTabVariant,\n    addEnumForMultiTabVariant,\n    addEnumForVariantEntitySet,\n    updatePropertyIndices\n} from '../../common';\nimport i18next from 'i18next';\nimport { ManifestSection, DefinitionName, LogSeverity, MANIFESTPATH, METADATAPATH } from '@sap/ux-specification-types';\nimport type { v2 } from '@sap/ux-specification-types';\nimport { log } from '../../../extensionLogger';\nimport { ANALYTICALTABLE, GRIDTABLE, INLINEDELETETABLE, MULTISELECTTABLE, TREETABLE } from '../types';\nimport type { ConvertedMetadata, EntitySet, EntityType } from '@sap-ux/vocabularies-types';\nimport type { Definition } from 'typescript-json-schema';\nimport type { GenerateAppSchemaParameters } from '@sap/ux-specification-types';\n\nconst ROOT_PROPERTIES_ORDER: Array<keyof v2.ListReportConfigV2> = ['filterBar', 'table', 'footer'];\n\n/**\n * Adds the enum types for QuickVariant and QuickVariantX, based on the entity type annotations\n * @param {EntityType} entityType\n * @param {EntitySet} entitySet - current entity set of the page or view\n * @param {Definition} appSchema - app specific JSON schema\n * @param {ConvertedMetadata} oDataServiceAVT - combined service metadata, as returned by annotation vocabularies tools\n */\nexport function addEnumForVariantPaths(\n    entityType: EntityType,\n    entitySet: EntitySet,\n    appSchema: Definition,\n    oDataServiceAVT: ConvertedMetadata\n): void {\n    addEnumForSingleTabVariant(entityType, appSchema, 'QuickVariant');\n    addEnumForMultiTabVariant(appSchema, 'QuickVariantX', entitySet);\n    addEnumForVariantEntitySet(oDataServiceAVT, appSchema, 'QuickVariantX');\n}\n\n/**\n * Generates an app specific schema for the FE V2 Listreport from the generic schema.\n * Generic types are replaced by information from the app specific annotations.\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param {object} genericSchema - generic JSON schema of a list report\n * @returns appSchema - the application specific JSON schema\n */\nexport function generateListReportSchemaV2(\n    generateParameters: GenerateAppSchemaParameters,\n    genericSchema: Definition\n): object {\n    const appSchema = JSON.parse(JSON.stringify(genericSchema)) as Definition;\n\n    appSchema.properties.table['anyOf']['0']['$ref'] = DEFINITION_LINK_PREFIX + MULTISELECTTABLE;\n    appSchema.properties.table['anyOf']['1']['$ref'] = DEFINITION_LINK_PREFIX + INLINEDELETETABLE;\n    appSchema.properties.table['anyOf']['2']['$ref'] = DEFINITION_LINK_PREFIX + TREETABLE;\n    appSchema.properties.table['anyOf']['3']['$ref'] = DEFINITION_LINK_PREFIX + ANALYTICALTABLE;\n    appSchema.properties.table['anyOf']['4']['$ref'] = DEFINITION_LINK_PREFIX + GRIDTABLE;\n\n    const responsiveTableMultiSelect = JSON.parse(\n        JSON.stringify(genericSchema.definitions.ResponsiveTableWithMultiSelect)\n    ) as Definition;\n    const responsiveTableInlineDelete = JSON.parse(\n        JSON.stringify(genericSchema.definitions.ResponsiveTableWithInlineDelete)\n    );\n    const treeTableDefinition = JSON.parse(JSON.stringify(genericSchema.definitions.TreeTable));\n    const analyticalTableDefinition = JSON.parse(JSON.stringify(genericSchema.definitions.AnalyticalTable));\n    const gridTableDefinition = JSON.parse(JSON.stringify(genericSchema.definitions.GridTable));\n\n    const lrLineItems = {\n        $ref: DEFINITION_LINK_PREFIX + DefinitionName.LineItems\n    };\n    responsiveTableMultiSelect.properties.columns = lrLineItems;\n    responsiveTableInlineDelete.properties.columns = lrLineItems;\n    treeTableDefinition.properties.columns = lrLineItems;\n    analyticalTableDefinition.properties.columns = lrLineItems;\n    gridTableDefinition.properties.columns = lrLineItems;\n\n    const lrToolBar = DEFINITION_LINK_PREFIX + DefinitionName.ToolBarLR;\n    appSchema.definitions[MULTISELECTTABLE] = responsiveTableMultiSelect;\n    (appSchema.definitions[MULTISELECTTABLE] as Definition).properties.toolBar['$ref'] = lrToolBar;\n    appSchema.definitions[INLINEDELETETABLE] = responsiveTableInlineDelete;\n    (appSchema.definitions[INLINEDELETETABLE] as Definition).properties.toolBar['$ref'] = lrToolBar;\n    appSchema.definitions[TREETABLE] = treeTableDefinition;\n    (appSchema.definitions[TREETABLE] as Definition).properties.toolBar['$ref'] = lrToolBar;\n    appSchema.definitions[ANALYTICALTABLE] = analyticalTableDefinition;\n    (appSchema.definitions[ANALYTICALTABLE] as Definition).properties.toolBar['$ref'] = lrToolBar;\n    appSchema.definitions[GRIDTABLE] = gridTableDefinition;\n    (appSchema.definitions[GRIDTABLE] as Definition).properties.toolBar['$ref'] = lrToolBar;\n\n    const entityType = generateParameters.entitySet?.entityType;\n    if (!entityType) {\n        if (generateParameters.entitySet?.name) {\n            log(generateParameters.logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOENTITYTYPE4SET', { entitySetName: generateParameters.entitySet?.name }),\n                location: {\n                    path: METADATAPATH\n                }\n            });\n        }\n    } else {\n        // handle standard header actions\n        addStandardHeaderActions(appSchema);\n        //handle line items\n        const lineItemAnnotation = entityType?.annotations?.UI?.LineItem;\n        addLineItemsType(appSchema, lineItemAnnotation, entityType);\n        //handle filter fields\n        const selectionFieldAnnotation = entityType?.annotations?.UI?.SelectionFields;\n        addSelectionFields(appSchema, selectionFieldAnnotation, entityType);\n\n        //add fields for createWithParameterDialog\n        addFieldsType(appSchema, entityType);\n\n        const pageKeys = [];\n        const v2Page = findListReportPageV2(\n            generateParameters.manifest[ManifestSection.generic].pages as v2.SapUiAppPagesV2,\n            pageKeys\n        );\n        if (!v2Page) {\n            log(generateParameters.logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOLR'),\n                location: {\n                    path: MANIFESTPATH,\n                    range: [ManifestSection.generic]\n                }\n            });\n            return appSchema;\n        }\n        addTableColumnExtensions(\n            appSchema,\n            entityType,\n            v2Page,\n            generateParameters.manifest,\n            generateParameters.fragments\n        );\n        addEnumForVariantPaths(entityType, generateParameters.entitySet, appSchema, generateParameters.serviceAVT);\n\n        //Delete generic definitions\n        delete appSchema.definitions.ResponsiveTableWithMultiSelect;\n        delete appSchema.definitions.ResponsiveTableWithInlineDelete;\n        delete appSchema.definitions.TreeTable;\n        delete appSchema.definitions.AnalyticalTable;\n        delete appSchema.definitions.GridTable;\n        delete appSchema.definitions.GenericColumns;\n        delete appSchema.definitions.TableColumnAction;\n        delete appSchema.definitions.ToolBar;\n        delete appSchema.definitions.Actions;\n        delete appSchema.definitions.GenericFooter;\n        delete appSchema.definitions.FieldPath;\n        delete appSchema.definitions.Share;\n    }\n    updatePropertyIndices(appSchema, ROOT_PROPERTIES_ORDER);\n    return appSchema;\n}\n", "import {\n    addLineItemsType,\n    addSelectionFields,\n    addStandardHeaderActions,\n    addTableColumnExtensions,\n    removeElementsFromEnum\n} from './utils';\nimport { findAnalyticalListPage } from '../import';\nimport { addFieldsType, DEFINITION_LINK_PREFIX, updatePropertyIndices } from '../../common';\nimport {\n    v2,\n    ManifestSection,\n    DefinitionName,\n    PropertyName,\n    LogSeverity,\n    METADATAPATH,\n    MANIFESTPATH\n} from '@sap/ux-specification-types';\nimport { addEnumForVariantPaths } from './listReport';\nimport type { Definition } from 'typescript-json-schema';\nimport type { GenerateAppSchemaParameters } from '@sap/ux-specification-types';\nimport i18next from 'i18next';\nimport { log } from '../../../extensionLogger';\n\nconst ROOT_PROPERTIES_ORDER: Array<keyof v2.AnalyticalListPageConfigV2> = ['filterBar', 'table', 'footer'];\n\n/**\n * Generates an app specific schema out of the generic schema.\n * Generic types are replaced by information from the app specific annotations.\n * @param {GenerateAppSchemaParameters} generateParameters - list of API input parameters\n * @param genericSchema - generic JSON schema of a list report\n * @param entityTypeName - the base entity type of the given page\n */\nexport function generateAnalyticalListReportSchemaV2(\n    generateParameters: GenerateAppSchemaParameters,\n    genericSchema: object\n): object {\n    const appSchema = JSON.parse(JSON.stringify(genericSchema)) as Definition;\n\n    (appSchema.properties[PropertyName.table] as Definition).anyOf[0]['$ref'] =\n        DEFINITION_LINK_PREFIX + 'ALPResponsiveTable<LineItems>';\n    const tableDefinitionResponsive = JSON.parse(\n        JSON.stringify(appSchema.definitions.ALPResponsiveTable)\n    ) as Definition;\n    tableDefinitionResponsive.properties['columns']['$ref'] = `${DEFINITION_LINK_PREFIX}${DefinitionName.LineItems}`;\n    tableDefinitionResponsive.properties['toolBar']['$ref'] = `${DEFINITION_LINK_PREFIX}${DefinitionName.ToolBarLR}`;\n    appSchema.definitions['ALPResponsiveTable<LineItems>'] = tableDefinitionResponsive;\n\n    appSchema.properties[PropertyName.table]['anyOf'][1]['$ref'] = `${DEFINITION_LINK_PREFIX}ALPGridTable<LineItems>`;\n    const tableDefinitionGrid = JSON.parse(JSON.stringify(appSchema['definitions']['ALPGridTable'])) as Definition;\n    tableDefinitionGrid.properties.columns['$ref'] = `${DEFINITION_LINK_PREFIX}${DefinitionName.LineItems}`;\n    tableDefinitionGrid.properties.toolBar['$ref'] = `${DEFINITION_LINK_PREFIX}${DefinitionName.ToolBarLR}`;\n    appSchema.definitions['ALPGridTable<LineItems>'] = tableDefinitionGrid;\n\n    appSchema.properties[PropertyName.table]['anyOf'][2][\n        '$ref'\n    ] = `${DEFINITION_LINK_PREFIX}ALPAnalyticalTable<LineItems>`;\n    const tableDefinitionAnalytical = JSON.parse(\n        JSON.stringify(appSchema.definitions['ALPAnalyticalTable'])\n    ) as Definition;\n    tableDefinitionAnalytical.properties.columns['$ref'] = `${DEFINITION_LINK_PREFIX}${DefinitionName.LineItems}`;\n    tableDefinitionAnalytical.properties.toolBar['$ref'] = `${DEFINITION_LINK_PREFIX}${DefinitionName.ToolBarLR}`;\n    appSchema.definitions['ALPAnalyticalTable<LineItems>'] = tableDefinitionAnalytical;\n\n    // Remove Custom Column non existing extensions - TreeTableColumnsExtension does not exist in ALP\n    removeElementsFromEnum(appSchema.definitions.TableColumnExtensionTypeV2['enum'], [\n        v2.TableColumnExtensionTypeV2.TreeTableColumnsExtension\n    ]);\n\n    const entityType = generateParameters.entitySet?.entityType;\n    if (!entityType) {\n        log(generateParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOENTITYTYPE4SET', { entitySetName: generateParameters.entitySet?.name }),\n            location: {\n                path: METADATAPATH\n            }\n        });\n    } else {\n        // handle header actions\n        addStandardHeaderActions(appSchema);\n        //handle line items\n        const lineItemAnnotation = entityType?.annotations?.UI?.LineItem;\n        addLineItemsType(appSchema, lineItemAnnotation, entityType);\n        //handle filter fields\n        const selectionFieldAnnotation = entityType?.annotations?.UI?.SelectionFields;\n        addSelectionFields(appSchema, selectionFieldAnnotation, entityType);\n\n        //add fields for createWithParameterDialog\n        addFieldsType(appSchema, entityType);\n\n        const pageKeys = [];\n        const v2Page = findAnalyticalListPage(\n            generateParameters.manifest[ManifestSection.generic].pages as v2.SapUiAppPagesV2,\n            pageKeys,\n            generateParameters.logger\n        );\n        if (!v2Page) {\n            log(generateParameters.logger, {\n                severity: LogSeverity.Error,\n                message: i18next.t('NOLR'),\n                location: {\n                    path: MANIFESTPATH,\n                    range: [ManifestSection.generic]\n                }\n            });\n            return appSchema;\n        }\n\n        addTableColumnExtensions(\n            appSchema,\n            entityType,\n            v2Page,\n            generateParameters.manifest,\n            generateParameters.fragments\n        );\n        addEnumForVariantPaths(entityType, generateParameters.entitySet, appSchema, generateParameters.serviceAVT);\n\n        // Delete generic definitions that have been replaced\n        delete appSchema.definitions.ALPGridTable;\n        delete appSchema.definitions.ALPResponsiveTable;\n        delete appSchema.definitions.ALPAnalyticalTable;\n        delete appSchema.definitions.GenericColumns;\n        delete appSchema.definitions.TableColumnAction;\n        delete appSchema.definitions.ToolBar;\n        delete appSchema.definitions.GenericFooter;\n        delete appSchema.definitions.Actions;\n        delete appSchema.definitions.FieldPath;\n    }\n    updatePropertyIndices(appSchema, ROOT_PROPERTIES_ORDER);\n    return appSchema;\n}\n", "import type { Manifest, SapUi5OdataModel } from '@sap/ux-specification-types';\nimport { DEFINITION_LINK_PREFIX, addEnumToSchema } from '../../common';\nimport type { Definition } from 'typescript-json-schema';\n\n/**\n * Method returns array of card definition names.\n * @param genericSchema - Generic schema of Overview Page.\n *\n * @returns Array of definition names\n */\nexport function getCardDefinitionNames(genericSchema: object): Array<string> {\n    // Apply enum to all card properties\n    const properties = genericSchema['properties'];\n    const cardProperties =\n        (properties['cards'] &&\n            properties['cards']['additionalProperties'] &&\n            properties['cards']['additionalProperties']['anyOf']) ||\n        [];\n    return cardProperties.map((cardProperty: object) => {\n        // Resolve ref\n        const refParts = cardProperty['$ref'].split('/');\n        return refParts[refParts.length - 1];\n    });\n}\n\n/**\n * Defines and adds enum entries for 'model' property of Cards.\n * @param appSchema - the app specific schema that shall get enhanced\n * @param manifest - manifest.json of the app\n */\nexport function addModelsEnum(appSchema: object, manifest: Manifest): void {\n    const dataSources = (manifest && manifest['sap.app'] && manifest['sap.app'].dataSources) || {};\n    const serviceKeys = Object.keys(dataSources);\n    const models = (manifest && manifest['sap.ui5'] && manifest['sap.ui5'].models) || {};\n    let enumValues = [];\n    enumValues = enumValues.concat(\n        Object.keys(models).filter((model) => serviceKeys.includes((models[model] as SapUi5OdataModel).dataSource))\n    );\n\n    // Define enum\n    const definition = appSchema['definitions'] as Definition;\n    definition['CardModel'] = {\n        type: 'string'\n    };\n    addEnumToSchema(enumValues, definition['CardModel']);\n\n    // Apply enum to all card properties\n    const cards = getCardDefinitionNames(appSchema);\n    for (const card of cards) {\n        const property = definition[card]['properties']['model'];\n        delete property.type;\n        property['$ref'] = DEFINITION_LINK_PREFIX + 'CardModel';\n    }\n}\n\n/**\n * Generates an app specific schema out of the generic schema.\n * Generic types are replaced by information from the app manifest.\n *\n * @param genericSchema - generic JSON schema of an object page\n * @param manifest - manifest.json of the app\n *\n * @returns the app specific JSON schema\n */\nexport function generateOverviewPageSchemaV2(genericSchema: object, manifest: Manifest): object {\n    const appSchema = JSON.parse(JSON.stringify(genericSchema));\n    // schema validation for card name\n    appSchema['properties']['cards']['propertyNames'] = {\n        pattern: '^[a-zA-Z0-9_\\\\.\\\\-]+$'\n    };\n    // Enhance 'model' property with enum entries\n    addModelsEnum(appSchema, manifest);\n    return appSchema;\n}\n", "import { parseAndMergeAndConvert } from '../../common/utils';\nimport { generateObjectPageSchemaV2 } from './objectPage';\nimport { generateListReportSchemaV2 } from './listReport';\nimport { generateAnalyticalListReportSchemaV2 } from './analyticalListReport';\nimport { generateOverviewPageSchemaV2 } from './overviewPage';\nimport type { ExtensionLogger, GenerateAppSchemaParameters, FileData, Manifest } from '@sap/ux-specification-types';\nimport { LogSeverity, METADATAPATH, FioriElementsVersion, TemplateType } from '@sap/ux-specification-types';\nimport { getEntitySetByEntitySetName } from '../../common/importProject';\nimport i18next from 'i18next';\nimport { log } from '../../../extensionLogger';\nimport { initI18n } from '../../../i18n/i18n';\n\n/**\n * Common logic for LR and OP to prepare the generation\n * @param {FileData[]} annotations - list of all annotation files (file content plus URI as identifier)\n * @param {ExtensionLogger} logger - Logger class for logging messages\n * @param {object} manifest - manifest.json of the app\n * @param {FileData[]} [fragments] - Array with XML fragments.\n * @param {string} entitySet - the base entity set name of the given page\n *\n * @returns the filled intrface structure with all information for the schema generation\n */\nfunction prepareGenerationV2(\n    annotations: FileData[],\n    logger: ExtensionLogger,\n    manifest: Manifest,\n    fragments: FileData[],\n    entitySet: string,\n    templateType: TemplateType\n): GenerateAppSchemaParameters {\n    initI18n();\n\n    const serviceAVT = parseAndMergeAndConvert(annotations, logger);\n    const generateParameters: GenerateAppSchemaParameters = {\n        templateType,\n        fioriElementsVersion: FioriElementsVersion.v2,\n        manifest,\n        fragments,\n        serviceAVT,\n        logger\n    };\n    generateParameters.entitySet = getEntitySetByEntitySetName(entitySet, generateParameters.serviceAVT);\n    if (!generateParameters.entitySet) {\n        log(generateParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('ENTITYSETNOTFOUND', { entitySetName: entitySet }),\n            location: {\n                path: METADATAPATH\n            }\n        });\n    }\n    return generateParameters;\n}\n\n/**\n * Generates an app specific schema out of the generic schema.\n * Generic types are replaced by information from the app specific annotations.\n *\n * @param {object} genericSchema - generic JSON schema of an object page\n * @param {string} entitySet - the base entity set name of the given page\n * @param {FileData[]} annotations - list of all annotation files (file content plus URI as identifier)\n * @param {object} manifest - manifest.json of the app\n * @param {FileData[]} [fragments] - Array with XML fragments.\n * @param {ExtensionLogger} logger - Logger class for logging messages\n *\n * @returns the app specific JSON schema\n */\nexport function generateObjectPageInterfaceV2(\n    genericSchema: object,\n    entitySet: string,\n    annotations: FileData[],\n    manifest: Manifest,\n    fragments?: FileData[],\n    logger?: ExtensionLogger\n): object {\n    const generateParameters = prepareGenerationV2(\n        annotations,\n        logger,\n        manifest,\n        fragments,\n        entitySet,\n        TemplateType.ListReportObjectPageV2\n    );\n    return generateObjectPageSchemaV2(generateParameters, genericSchema);\n}\n\n/**\n * Generates the app specific schema of a list report out of the generic schema.\n * Generic types are replaced by information from the app specific annotations.\n *\n * @param genericSchema - generic JSON schema of a list report\n * @param entitySet - the base entity set name of the given page\n * @param annotations - list of all annotation files (file content plus URI as identifier)\n * @param manifest - manifest.json of the app\n * @param {FileData[]} fragments - list of fragment files and their content\n * @param {ExtensionLogger} logger - Logger class for logging messages\n *\n * @returns the app specific JSON schema\n */\nexport function generateListReportInterfaceV2(\n    genericSchema: object,\n    entitySet: string,\n    annotations: FileData[],\n    manifest: Manifest,\n    fragments?: FileData[],\n    logger?: ExtensionLogger\n): object {\n    const generateParameters = prepareGenerationV2(\n        annotations,\n        logger,\n        manifest,\n        fragments,\n        entitySet,\n        TemplateType.ListReportObjectPageV2\n    );\n    return generateListReportSchemaV2(generateParameters, genericSchema);\n}\n\n/**\n * Generates the app specific schema of an analytical list page out of the generic schema.\n * Generic types are replaced by information from the app specific annotations.\n *\n * @param genericSchema - generic JSON schema of a list report\n * @param entityType - the base entity type of the given page\n * @param annotations - list of all annotation files (file content plus URI as identifier)\n * @param manifest - manifest.json of the app\n * @param {FileData[]} fragments - list of fragment files and their content\n * @param {ExtensionLogger} logger - Logger class for logging messages\n * @param {string} appId - application ID\n *\n * @returns the app specific JSON schema\n */\nexport function generateAnalyticalListPageInterfaceV2(\n    genericSchema: object,\n    entitySet: string,\n    annotations: FileData[],\n    manifest: Manifest,\n    fragments?: FileData[],\n    logger?: ExtensionLogger\n): object {\n    const generateParameters = prepareGenerationV2(\n        annotations,\n        logger,\n        manifest,\n        fragments,\n        entitySet,\n        TemplateType.AnalyticalListPageV2\n    );\n    return generateAnalyticalListReportSchemaV2(generateParameters, genericSchema);\n}\n\n/**\n * Generates the app specific schema of an overview page\n * @param genericSchema - file content of the generic schema\n * @param manifest - manifest.json of the app\n *\n * @returns the generic schema, as equivalent to the app schema\n */\nexport function generateOVPInterfaceV2(genericSchema: object, manifest: Manifest): object {\n    return generateOverviewPageSchemaV2(genericSchema, manifest);\n}\n", "import i18next from 'i18next';\nimport _unset from 'lodash.unset';\nimport Ajv from 'ajv';\nimport type {\n    UI5Version,\n    ExportParametersV2,\n    ExportAnalyticalListPageV2Parameters,\n    ExportListReportV2Parameters,\n    ExportObjectPageV2Parameters,\n    ExportOverviewPageV2Parameters\n} from '../../..';\nimport type { ExportResults, FileData, FioriElementsVersion, Manifest } from '@sap/ux-specification-types';\nimport {\n    v2,\n    PageTypeV2,\n    SchemaType,\n    SAPUI5_FRAGMENT_CLASS,\n    MANIFESTPATH,\n    ManifestSection,\n    LogSeverity\n} from '@sap/ux-specification-types';\nimport type { ObjectPage } from './pages';\nimport { getPageLayoutInformation, getReflectMetadata } from '../../common';\nimport { ApplicationV2, AppSettings } from '../application';\nimport { ensureManifestSectionByPathV2, transformPageToNewManifestV2 } from './manifest';\nimport { findListReportPageV2, findAnalyticalListPage, findObjectPageV2 } from '../import';\nimport { MetadataInstanceFactoryV2 as Factory } from './factory';\nimport { transferManifestEntriesAndFlexChange, transferManifestEntriesOVP } from './export';\nimport type { MetadataInstanceInterface } from '../../common/decoration/factory';\nimport type { TransferParameterTypeV2 } from '../types';\nimport { log } from '../../../extensionLogger';\nimport type { Definition } from 'typescript-json-schema';\n\n/**\n * Returns a fresh export results object with default values\n */\nconst getDefaultExportResult = (fragmentFiles?: FileData[]): ExportResults => ({\n    flexChanges: [],\n    manifest: {\n        [ManifestSection.generic]: { pages: {} }\n    } as unknown as Manifest,\n    fragments: fragmentFiles ? fragmentFiles : []\n});\n\n/**\n * Instantiates the export classes for a single object page section\n * @param currentSection - Export class as an object, to be updated\n * @param sectionId - Current section ID\n * @param {MetadataInstanceInterface} factory - factory for creating metadata instances\n */\nfunction getClassesForSingleSection(\n    currentSection: object,\n    sectionId: string,\n    factory: MetadataInstanceInterface\n): void {\n    if (currentSection && sectionId === 'custom') {\n        // Custom sections\n        for (const index in currentSection) {\n            if (currentSection[index].className === SAPUI5_FRAGMENT_CLASS) {\n                currentSection[index] = factory.createInstance(\n                    PageTypeV2.ObjectPage,\n                    'ObjectPageCustomSectionFragment',\n                    currentSection[index]\n                );\n            } else {\n                currentSection[index] = factory.createInstance(\n                    PageTypeV2.ObjectPage,\n                    'ObjectPageCustomSectionView',\n                    currentSection[index]\n                );\n            }\n        }\n    }\n}\n\n/**\n * Recursive sub-function for handling subsections\n * @param currentSection - Object page section in config\n */\nfunction getSubsectionClasses(currentSection: object, factory: MetadataInstanceInterface): void {\n    if (currentSection?.['subsections']) {\n        let subSection: object;\n\n        for (const subSectionId in currentSection['subsections']) {\n            subSection = currentSection['subsections'][subSectionId];\n            getClassesForSingleSection(subSection, subSectionId, factory);\n            getSubsectionClasses(subSection, factory);\n        }\n    }\n}\n\n/**\n * Instantiates the export classes for the object page section\n * @param objectPageConfig - the given object page configuration\n * @param objectPage - the overall object page export class where the sections shall be included\n * @param {MetadataInstanceInterface} factory - factory for creating metadata instances\n */\nfunction getExportClassesForSections(\n    objectPageConfig: v2.ObjectPageConfigV2,\n    objectPage: ObjectPage,\n    factory: MetadataInstanceInterface\n): void {\n    // Main function\n    let section: object;\n\n    for (const sectionId in objectPageConfig.sections) {\n        section = objectPage.sections[sectionId];\n        getClassesForSingleSection(section, sectionId, factory);\n        getSubsectionClasses(section, factory);\n    }\n}\n\n/**\n * Run through the given ListReport config and return respective manifest entry and flex changes\n * @param {ExportListReportV2Parameters} exportParameters - all API parameters needed for the export\n * @param ui5Version - SAP UI5 version\n *\n * @returns ExportResults - The export result comprises the enhanced manifest as well as a list of flex changes.\n */\nfunction exportListReportPage(exportParameters: ExportListReportV2Parameters, ui5Version: UI5Version): ExportResults {\n    const listReportConfig = exportParameters.page.config as v2.ListReportConfigV2;\n    const entitySet = exportParameters.page.entitySet;\n    const exportResults: ExportResults = getDefaultExportResult(exportParameters.fragments);\n    const factory = new Factory();\n    const listReport = factory.createPageInstance(PageTypeV2.ListReport, listReportConfig);\n    const pageLayoutInformation = getPageLayoutInformation(listReport);\n    const baseId = `${exportParameters.appId}::${pageLayoutInformation.id}::${entitySet}--`;\n    const pageKeys: string[] = [];\n    const v2Page = findListReportPageV2(\n        exportParameters.manifest[ManifestSection.generic].pages as v2.SapUiAppPagesV2,\n        pageKeys\n    );\n    if (!v2Page) {\n        log(exportParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('NOLR'),\n            location: {\n                path: MANIFESTPATH,\n                range: [ManifestSection.generic]\n            }\n        });\n        return;\n    }\n    if (!v2Page.component) {\n        log(exportParameters.logger, {\n            severity: LogSeverity.Error,\n            message: i18next.t('COMPONENTNOTDEFINED', { pageName: PageTypeV2.ListReport }),\n            location: {\n                path: MANIFESTPATH\n            }\n        });\n        return;\n    }\n    if (!v2Page.component.settings) {\n        v2Page.component.settings = {};\n    }\n    exportResults.manifest = JSON.parse(JSON.stringify(exportParameters.manifest));\n\n    if (listReportConfig && Object.keys(listReportConfig).length !== 0) {\n        const transferParameters: TransferParameterTypeV2 = {\n            v2Page,\n            exportResults,\n            appId: exportParameters.appId,\n            baseId,\n            appSchema: exportParameters.jsonSchema,\n            ui5Version,\n            factory,\n            pageKeys,\n            pageType: PageTypeV2.ListReport,\n            logger: exportParameters.logger\n        };\n\n        transferManifestEntriesAndFlexChange(\n            transferParameters,\n            listReport,\n            [],\n            [],\n            exportParameters.jsonSchema //starting point for target definition\n        );\n    }\n\n    return exportResults;\n}\n\n/**\n * Run through the given AnalyticalListPage config and return respective manifest entry and flex changes\n * @param {ExportAnalyticalListPageV2Parameters} exportParameters - all API parameters needed for the export\n * @param ui5Version - SAP UI5 version\n *\n * @returns ExportResults - The export result comprises the enhanced manifest as well as a list of flex changes.\n */\nfunction exportAnalyticalListPage(\n    exportParameters: ExportAnalyticalListPageV2Parameters,\n    ui5Version: UI5Version\n): ExportResults {\n    const analyticalListPageConfig = exportParameters.page.config;\n    const entitySet = exportParameters.page.entitySet;\n    const exportResults: ExportResults = getDefaultExportResult(exportParameters.fragments);\n    exportResults.flexChanges = [];\n    exportResults.manifest = JSON.parse(JSON.stringify(exportParameters.manifest));\n    const factory = new Factory();\n    //Instantiate Page\n    const analyticalListPage = factory.createPageInstance(PageTypeV2.AnalyticalListPage, analyticalListPageConfig);\n\n    //Instantiate base ID\n    const pageLayoutInformation = getPageLayoutInformation(analyticalListPage);\n    const baseId = `${exportParameters.appId}::${pageLayoutInformation.id}::${entitySet}--`;\n    const pageKeys: string[] = [];\n\n    const v2Page = findAnalyticalListPage(\n        exportParameters.manifest[ManifestSection.generic].pages as v2.SapUiAppPagesV2,\n        pageKeys,\n        exportParameters.logger\n    );\n    if (!v2Page) {\n        return;\n    }\n    if (!v2Page.component.settings) {\n        v2Page.component.settings = {};\n    }\n    exportResults.manifest = JSON.parse(JSON.stringify(exportParameters.manifest));\n\n    if (analyticalListPageConfig && Object.keys(analyticalListPageConfig).length !== 0) {\n        const transferParameters: TransferParameterTypeV2 = {\n            v2Page,\n            exportResults,\n            appId: exportParameters.appId,\n            baseId,\n            appSchema: exportParameters.jsonSchema,\n            ui5Version,\n            factory,\n            pageKeys,\n            pageType: PageTypeV2.AnalyticalListPage,\n            logger: exportParameters.logger\n        };\n\n        transferManifestEntriesAndFlexChange(\n            transferParameters,\n            analyticalListPage,\n            [],\n            [],\n            exportParameters.jsonSchema //starting point for target definition\n        );\n    }\n\n    return exportResults;\n}\n\n/**\n * Run through the given ObjectPage config and return respective manifest entry and flex changes\n * @param {ExportObjectPageV2Parameters} exportParameters - all API parameters needed for the export\n * @param ui5Version - SAP UI5 version\n *\n * @returns ExportResults - The export result comprises the enhanced manifest as well as a list of flex changes.\n */\nfunction exportObjectPage(exportParameters: ExportObjectPageV2Parameters, ui5Version: UI5Version): ExportResults {\n    const objectPageConfig = exportParameters.page.config as v2.ObjectPageConfigV2;\n    const entitySet = exportParameters.page.entitySet;\n    const exportResults: ExportResults = getDefaultExportResult(exportParameters.fragments);\n    const factory = new Factory();\n    const objectPage = factory.createPageInstance(PageTypeV2.ObjectPage, objectPageConfig);\n    exportResults.manifest = JSON.parse(JSON.stringify(exportParameters.manifest));\n    if (objectPageConfig) {\n        const pageLayoutInformation = getPageLayoutInformation(objectPage);\n        const baseId = `${exportParameters.appId}::${pageLayoutInformation.id}::${entitySet}--`;\n\n        const pageKeys: string[] = [];\n        const v2Page: v2.SapUiAppPageV2 = findObjectPageV2(\n            exportParameters.manifest[ManifestSection.generic].pages as v2.SapUiAppPagesV2,\n            entitySet,\n            pageKeys\n        );\n        if (!v2Page) {\n            return exportResults;\n        }\n        if (objectPageConfig.sections) {\n            getExportClassesForSections(objectPageConfig, objectPage, factory);\n        }\n        if (Object.keys(objectPageConfig).length !== 0) {\n            const transferParameters: TransferParameterTypeV2 = {\n                v2Page,\n                exportResults,\n                appId: exportParameters.appId,\n                baseId,\n                appSchema: exportParameters.jsonSchema,\n                ui5Version,\n                factory,\n                pageKeys,\n                pageType: PageTypeV2.ObjectPage,\n                logger: exportParameters.logger\n            };\n\n            transferManifestEntriesAndFlexChange(\n                transferParameters,\n                objectPage,\n                [],\n                [],\n                exportParameters.jsonSchema //starting point for target definition\n            );\n        }\n    }\n    return exportResults;\n}\n/**\n * Run through the given ObjectPage config and return respective manifest entry and flex changes\n * @param {ExportOverviewPageV2Parameters} exportParameters - all API parameters needed for the export\n *\n * @returns ExportResults - The export result comprises the enhanced manifest as well as a list of flex changes.\n */\nconst exportOverviewPage = (exportParameters: ExportOverviewPageV2Parameters): ExportResults => {\n    const exportResults: ExportResults = getDefaultExportResult();\n    exportResults.manifest = JSON.parse(JSON.stringify(exportParameters.manifest));\n    const factory = new Factory();\n    const overviewPage = factory.createPageInstance(PageTypeV2.OverviewPage, exportParameters.page.config);\n\n    const ajv = new Ajv({ allErrors: true });\n    const validate = ajv.compile(exportParameters.jsonSchema);\n\n    if (!validate(overviewPage)) {\n        for (const err of validate.errors) {\n            const additionalProperty = err.params['additionalProperty'];\n            if (\n                err.keyword === 'additionalProperties' &&\n                !Object.values(v2.CardSettingsType).includes(err.params?.['additionalProperty']) &&\n                additionalProperty !== 'settings'\n            ) {\n                _unset(overviewPage, `${err.dataPath.slice(1)}.${additionalProperty}`);\n            }\n        }\n    }\n    if (exportParameters.page.config && Object.keys(exportParameters.page.config).length !== 0) {\n        transferManifestEntriesOVP(\n            overviewPage,\n            exportResults,\n            exportParameters.jsonSchema,\n            exportParameters.jsonSchema,\n            factory,\n            []\n        );\n    }\n\n    return exportResults;\n};\n\n/**\n * Exports a Fiori Element V2 application.\n * It converts the entries of the input application (config file) to corresponding manifest settings and flex changes\n * @param application - content of the config file of an application\n * @param manifest - app descriptor (manifest.json)\n * @param jsonSchema - application specific schema\n * @returns ExportResults - The export result comprises the enhanced manifest as well as a list of flex changes.\n */\nconst exportApplicationV2 = (application: ApplicationV2, manifest: object, jsonSchema: Definition): ExportResults => {\n    const exportResults: ExportResults = getDefaultExportResult();\n    exportResults.manifest = JSON.parse(JSON.stringify(manifest));\n\n    //transfer application settings\n    const applicationV2 = Object.assign(new ApplicationV2(), application);\n    applicationV2.settings = Object.assign(new AppSettings(), application['settings']);\n    for (const key in jsonSchema.definitions.AppSettings['properties']) {\n        const syncRule = getReflectMetadata(applicationV2.settings, key);\n        if (syncRule && syncRule.manifest) {\n            const path = syncRule.manifest.path();\n            const manifestSection = ensureManifestSectionByPathV2(exportResults.manifest, path);\n            if (application.settings && application.settings[key] !== undefined) {\n                manifestSection[key] = application.settings[key];\n            } else {\n                delete manifestSection[key];\n            }\n        }\n    }\n    // transfer pages and routings\n    const manifestPages = exportResults.manifest[ManifestSection.generic]?.pages;\n    if (manifestPages && application['pages']) {\n        transformPageToNewManifestV2(application.home, application['pages'], Object.values(manifestPages)[0] as object);\n    }\n    return exportResults;\n};\n\n/**\n * Exports a Fiori Element V2 page.\n * It converts the entries of the input page (config file) to corresponding manifest settings and flex changes\n * @param exportParametersV2 - list of parameters for the export; the list varies for the different scgema types\n *\n * @returns ExportResults - The export result comprises the enhanced manifest as well as a list of flex changes.\n */\nexport function exportPageV2(\n    exportParametersV2: ExportParametersV2[FioriElementsVersion.v2],\n    ui5Version: UI5Version\n): ExportResults | undefined {\n    if (exportParametersV2[SchemaType.ListReport]) {\n        return exportListReportPage(exportParametersV2[SchemaType.ListReport], ui5Version);\n    } else if (exportParametersV2[SchemaType.ObjectPage]) {\n        return exportObjectPage(exportParametersV2[SchemaType.ObjectPage], ui5Version);\n    } else if (exportParametersV2[SchemaType.OverviewPage]) {\n        return exportOverviewPage(exportParametersV2[SchemaType.OverviewPage]);\n    } else if (exportParametersV2[SchemaType.Application]) {\n        const { application, manifest, jsonSchema } = exportParametersV2[SchemaType.Application];\n        return exportApplicationV2(application, manifest, jsonSchema);\n    } else if (exportParametersV2[SchemaType.AnalyticalListPage]) {\n        return exportAnalyticalListPage(exportParametersV2[SchemaType.AnalyticalListPage], ui5Version);\n    }\n}\n", "import type {\n    SapUi5RoutingRoute,\n    SapUi5RoutingTarget,\n    SapUi5RoutingTargetSettings,\n    v4\n} from '@sap/ux-specification-types';\nimport { ManifestSection, PageTypeV4 } from '@sap/ux-specification-types';\n\nexport enum Constants {\n    OptionalQuery = ':?query:',\n    Component = 'sap/fe/AppComponent',\n    Namespace = 'sap.fe.templates'\n}\n\n/**\n * Transform Pages(from app.json) to UI5 routing configuration(manifest.json)\n * @param routing UI5 routing configuration\n */\nconst createRoute = (pattern: string, name: string, target: string): SapUi5RoutingRoute => {\n    return {\n        pattern,\n        name,\n        target\n    };\n};\n\n/**\n * Method returns SapUi5RoutingTargetBase.options object.\n * @param {string} [entitySet] - Entity set.\n * @param {string} [variantManagement] - Variant management string.\n * @return {{settings: SapUi5RoutingTargetSettings}} Returns object for SapUi5RoutingTargetBase.options.\n */\nconst createTargetOption = (\n    entitySet?: string,\n    variantManagement?: string\n): {\n    settings: SapUi5RoutingTargetSettings;\n} => {\n    return {\n        settings: {\n            ...(entitySet && { entitySet }),\n            ...(variantManagement && { variantManagement }),\n            navigation: {}\n        }\n    };\n};\n\nfunction initializeRouting(manifestRouting: v4.SapUi5RoutingV4): v4.SapUi5RoutingV4 {\n    let routing: v4.SapUi5RoutingV4 = manifestRouting;\n    if (!routing) {\n        routing = {\n            routes: [],\n            targets: {}\n        };\n    } else {\n        if (!routing.routes) {\n            routing.routes = [];\n        }\n        if (!routing.targets) {\n            routing.targets = {};\n        }\n    }\n    return routing;\n}\n\nfunction setTargetOptions(target: v4.RoutingTargetOptions, keyInManifest: string, navigationEntry: object) {\n    if (!target.options.settings.navigation) {\n        target.options.settings.navigation = {};\n    }\n    target.options.settings.navigation[keyInManifest] = {\n        detail: navigationEntry\n    };\n}\n\n/**\n * Calculates the query pattern for a new page's route at the manifest.\n * If the route pattern components of a parent page (parentKeys) are known, the key names are taken over from the parent.\n * Otherwise, the calculation starts from scratch, following the pattern 'key' + navigation level index\n * @param parts - array of strings, each entry represents one navigation\n * @param targetPage - the new page that is being navigated to\n * @param parentKeys - object comprising key = entity and value = key name for each part of the parent page's route pattern\n * @returns the query pattern for the new page\n */\nfunction calculateQueryPattern(parts: string[], targetPage: v4.Page, parentKeys: object): string {\n    let pattern = '';\n\n    parts.forEach((part, index) => {\n        let key = '';\n        if (targetPage && targetPage.pageType !== PageTypeV4.ListReport) {\n            // consider existing keys of parent pages\n            if (parentKeys[part]) {\n                key = `({${parentKeys[part]}})`;\n            } else {\n                // keys should be like - 'key', 'key2', 'key3'\n                key = `({key${index ? index + 1 : ''}})`;\n            }\n        }\n        pattern += `${pattern ? '/' : ''}${part}${key}`;\n    });\n    return `${pattern}${Constants.OptionalQuery}`;\n}\n\n/**\n * Recursive function to determine all parts to combine the query pattern, by traversing the routing navigation links\n * @param parts - list of query parts, to be enhanced per call\n * @param navKey - the key of the given routing navigation entry\n * @param pages - list of all pages\n * @param pageId - key of the current page\n */\nfunction fillNavigationParts(parts: string[], navKey: string, pages: v4.Pages, pageId: string): void {\n    parts.unshift(navKey);\n    let referringPage;\n    for (const key in pages) {\n        if (typeof pages[key].navigation === 'object') {\n            const pageKey = Object.keys(pages[key].navigation).find(\n                (index) => pages[key].navigation[index]['route'] === pageId\n            );\n            if (pageKey) {\n                navKey = pageKey;\n                referringPage = pages[key];\n            }\n        }\n        if (referringPage) {\n            fillNavigationParts(parts, navKey, pages, key);\n            return;\n        }\n    }\n}\n\n/**\n * Determines the key names of a parent routing pattern\n * @param parentPattern - parent routing pattern\n * @returns an object with entries having key = entity and value = the key name in the pattern\n */\nfunction fillParentKeys(parentPattern: string): object {\n    const result = {};\n    const patternParts = parentPattern?.split('/');\n    if (patternParts && patternParts.length > 0) {\n        patternParts.forEach((part) => {\n            const entity = part.substring(0, part.indexOf('({'));\n            const keyName = part.substring(part.indexOf('({') + 2, part.indexOf('})'));\n            result[entity] = keyName;\n        });\n    }\n    return result;\n}\n\n/**\n * Updates the route navigation entries of a page\n * @param page - the current page\n * @param pages - all pages in manifest\n * @param target - the given routing target\n * @param routing - the current routing\n * @param pageId - key of the page in manifest\n */\nfunction handlePageNavigation(\n    page: v4.PageV4,\n    pages: v4.Pages,\n    target: v4.RoutingTargetOptions,\n    routing: v4.SapUi5RoutingV4,\n    pageId: string\n) {\n    for (const keyInManifest in page.navigation) {\n        const navigationEntry = page.navigation[keyInManifest];\n        const navPage = pages[navigationEntry['route']];\n        setTargetOptions(target, keyInManifest, navigationEntry as object);\n        if (\n            navigationEntry?.['route'] &&\n            !routing.routes.some((routingRoute) => routingRoute.name === navigationEntry['route'])\n        ) {\n            const parts: string[] = [];\n            fillNavigationParts(parts, keyInManifest, pages, pageId);\n            const parentKeys = fillParentKeys(page.routePattern);\n            const pattern = calculateQueryPattern(parts, navPage, parentKeys);\n            // Make sure there no route duplication\n            routing.routes.push(createRoute(pattern, navigationEntry['route'], navigationEntry['route']));\n        }\n    }\n}\n\nfunction removeDeletedPages(routing: v4.SapUi5RoutingV4, pages: v4.Pages) {\n    for (const id in routing.targets) {\n        if (!pages || !pages[id]) {\n            // Remove target\n            delete routing.targets[id];\n            // Remove routes\n            const index = routing.routes.findIndex((route) => route.name === id);\n            if (index !== -1) {\n                routing.routes.splice(index, 1);\n            }\n        }\n    }\n}\n\nfunction transferEntitySet(page: v4.Page, target: v4.RoutingTargetOptions) {\n    if (page.entitySet) {\n        if (!target.options) {\n            target.options = createTargetOption(page.entitySet, page.variantManagement);\n        }\n        target.options.settings.entitySet = page.entitySet;\n    } else {\n        delete target.options?.settings?.entitySet;\n    }\n}\n\n/**\n * Method detects removed custom sections and deletes removed custom sections from manifest.\n * @param page current page\n * @param target routing target to be filled\n */\nfunction deleteRemovedCustomSections(page: v4.Page, target: v4.RoutingTargetOptions): void {\n    // Delete removed custom sections\n    const manifestSections = target?.options?.settings?.content?.body?.sections;\n    if (page.pageType === PageTypeV4.ObjectPage && manifestSections && typeof manifestSections === 'object') {\n        const objectPage = page.config as v4.ObjectPageConfigV4;\n        const customSections = Array.isArray(objectPage?.sections?.custom) ? objectPage.sections.custom : [];\n        const latestIds = customSections.map((section: v4.ObjectPageCustomSectionFragment) => section.id);\n        const existingIds = Object.keys(manifestSections);\n        if (latestIds) {\n            for (const id of existingIds) {\n                if (!latestIds.includes(id) && !('subSections' in manifestSections[id])) {\n                    // Delete removed custom section\n                    delete manifestSections[id];\n                }\n            }\n        }\n    }\n}\n\nfunction updateRoute(routing: v4.SapUi5RoutingV4, id: string, page: v4.Page) {\n    const route = routing.routes.find((routingRoute) => routingRoute.name === id);\n    if (route) {\n        if (page.defaultLayoutType) {\n            route.layout = page.defaultLayoutType;\n        } else {\n            delete route.layout;\n        }\n    }\n}\n\n/**\n * Fills target with page information\n * @param page current page\n * @param target routing target to be filled\n * @param id page id\n * @param pages all pages of app.json\n * @returns filled target\n */\nfunction fillTarget(\n    page: v4.Page,\n    target: v4.RoutingTargetOptions,\n    id: string,\n    pages: v4.Pages\n): v4.RoutingTargetOptions {\n    if (page.pageType && page.pageType !== PageTypeV4.CustomPage) {\n        target = {\n            ...target,\n            ...({\n                type: 'Component',\n                id: target?.['id'] || id,\n                name: `${Constants.Namespace}.${pages[id].pageType}`\n            } as SapUi5RoutingTarget)\n        };\n    } else if (page.view) {\n        target = {\n            ...target,\n            ...({\n                viewName: page.view.name\n            } as v4.SapUi5RoutingTargetCustomPageV4)\n        };\n        if (page.view.id) {\n            (target as v4.SapUi5RoutingTargetCustomPageV4).viewId = page.view.id;\n        }\n    }\n    return target;\n}\n\n/**\n * Transform Pages(from app.json) to UI5 routing configuration (manifest.json)\n * @param routing UI5 routing configuration\n */\nexport function transformRoutingV4(homePage: string, pages: v4.Pages, manifest: object): v4.SapUi5RoutingV4 {\n    const routing = initializeRouting(manifest[ManifestSection.ui5].routing as v4.SapUi5RoutingV4);\n\n    // add default route\n    if (homePage && !routing.routes.some((route) => route.name === homePage)) {\n        // Make sure there no route duplication\n        routing.routes.push(createRoute(Constants.OptionalQuery, homePage, homePage));\n    }\n    for (const id in pages) {\n        let target: v4.RoutingTargetOptions;\n        const page = pages[id];\n        if (routing.targets[id]) {\n            target = routing.targets[id];\n        }\n        target = fillTarget(page, target, id, pages);\n        transferEntitySet(page, target);\n        deleteRemovedCustomSections(page, target);\n        if (target && !page.controlAggregation) {\n            delete target.contextPattern;\n            delete target.controlAggregation;\n        }\n        if (target?.options?.settings?.navigation) {\n            // We handle page 'navigation' from scratch - clear 'navigation' before handling\n            target.options.settings.navigation = {};\n        }\n        // Handle page 'navigation'\n        handlePageNavigation(page, pages, target, routing, id);\n        // Update associated route with layout information\n        updateRoute(routing, id, page);\n\n        routing.targets[id] = target;\n    }\n    // Remove deleted pages\n    removeDeletedPages(routing, pages);\n    return routing;\n}\n", "import type { SapUi5RootView } from '@sap/ux-specification-types';\nimport {\n    v4,\n    FIORI_FCL_ROOT_ID,\n    FIORI_FCL_ROOT_VIEW_NAME,\n    ViewTypes,\n    FlexibleColumnLayoutAggregations\n} from '@sap/ux-specification-types';\nimport type { ApplicationV4 } from '../application';\nimport { Constants as V4Constants } from './manifest';\nimport { updateDependencyLib } from './utils';\n\n// Aggregations mapping for target levels\n// 0 - BeginColumnPages, 1 - MidColumnPages, 2 - EndColumnPages\nconst fclAggregations = [\n    FlexibleColumnLayoutAggregations.BeginColumnPages,\n    FlexibleColumnLayoutAggregations.MidColumnPages,\n    FlexibleColumnLayoutAggregations.EndColumnPages\n];\n\n/**\n * Recursive method which updates manifest routing to enable FCL support.\n * Method contains some parts like setting 'ThreeColumnsEndExpanded' to 2st->3rd page navigation - it was requested for demo purposes.\n * @param {SapUi5} manifestUI5 - SAPUI5 manifest data.\n * @param {Application} app - Project application.\n * @param {string} pageName - Page name which should be used to apply FCL.\n * @param {Array<string>} targetPages - Current array of target pages to join in.\n * For example to display two column FCL we have - ['1stLevelPage', '2ndLevelPage']\n * @param {number} level - Current navigation level.\n */\nconst applyFCLRouting = (\n    manifestUI5: v4.SapUi5V4,\n    app: ApplicationV4,\n    pageName: string,\n    targetPages: Array<string> = [],\n    level = 0\n): void => {\n    const routeOfPage = manifestUI5.routing.routes.find((route) => {\n        return route.name === pageName;\n    });\n    if (!routeOfPage) {\n        return;\n    }\n    // Update route\n    if (typeof routeOfPage.target === 'string') {\n        // 1-3 level navigation is placed like [`1st Page`, `2nd Page`, `3rd Page`]\n        // 4+ level navigation is placed as fullscreen - [`4th+n Page`]\n        routeOfPage.target = level <= 2 ? [...targetPages, routeOfPage.target] : [routeOfPage.target];\n    }\n    // Update target\n    const target = manifestUI5.routing.targets[pageName];\n    const page = app.pages?.[pageName];\n    if (!page) {\n        return;\n    }\n    if ('controlAggregation' in page) {\n        target.controlAggregation = page.controlAggregation;\n    } else if (fclAggregations[level]) {\n        target.controlAggregation = fclAggregations[level];\n    } else {\n        target.controlAggregation = FlexibleColumnLayoutAggregations.EndColumnPages;\n    }\n    const pattern = routeOfPage.pattern.replace(V4Constants.OptionalQuery, '');\n    if (pattern) {\n        target.contextPattern = pattern.startsWith('/') ? pattern : `/${pattern}`;\n    } else {\n        target.contextPattern = '';\n    }\n    // Loop further pages\n    if (page.navigation) {\n        level++;\n        for (const pageId in page.navigation) {\n            applyFCLRouting(manifestUI5, app, page.navigation[pageId]['route'], routeOfPage.target, level);\n        }\n    }\n};\n\n/**\n * Method enables FCL support by updating Manifest.\n * @param {SapUi5} manifestUI5 - SAPUI5 manifest data.\n * @param {Application} app - Project application.\n */\nconst enableFcl = (manifestUI5: v4.SapUi5V4, app: ApplicationV4): void => {\n    // Apply config with router class\n    manifestUI5.routing.config.routerClass = v4.FIORI_FCL_ROUTER_CLASS;\n    // Make changes in\n    applyFCLRouting(manifestUI5, app, app.home);\n    // Update 'rootView'\n    const rootView: SapUi5RootView = {\n        viewName: FIORI_FCL_ROOT_VIEW_NAME,\n        type: ViewTypes.XML,\n        async: true,\n        id: FIORI_FCL_ROOT_ID\n    };\n    manifestUI5.rootView = manifestUI5.rootView ? { ...manifestUI5.rootView, ...rootView } : rootView;\n    // Added in scope of #523. Starting from SAPUI5 1.83+ - we need make sure that dependency to `sap.f` library is added to manifest.\n    updateDependencyLib(manifestUI5, v4.SAPUI5_DEPENDENCY_LIB_SAP_F);\n};\n\n/**\n * Method disables FCL support by updating Manifest.\n * @param {SapUi5} manifestUI5 - SAPUI5 manifest data.\n */\nconst disableFcl = (sapui5: v4.SapUi5V4): void => {\n    if (sapui5.rootView && sapui5.rootView.viewName === FIORI_FCL_ROOT_VIEW_NAME) {\n        // FCL is disabled and rootview name is equal to FCL ROOT VIEW, then remove rootview\n        delete sapui5.rootView;\n    }\n    if (sapui5.routing) {\n        if (sapui5.routing.config && sapui5.routing.config.routerClass === v4.FIORI_FCL_ROUTER_CLASS) {\n            // Remove routing class\n            delete sapui5.routing.config.routerClass;\n        }\n        const routes = sapui5.routing.routes || [];\n        for (const route of routes) {\n            if (route.target && Array.isArray(route.target)) {\n                // In 'applyFCLRouting' we set property 'target' as Array\n                // When FCL is disabled, property 'target' should not be an array anymore - resetting back.\n                route.target = route.name;\n            }\n        }\n    }\n};\n\n/**\n * Method updates Manifest depending on is FCL ON or OFF.\n * @param {SapUi5} manifestUI5 - SAPUI5 manifest data.\n * @param {Application} app - Project application.\n */\nexport const updateFcl = (manifestUI5: v4.SapUi5V4, app: ApplicationV4): void => {\n    if (app.settings && app.settings.flexibleColumnLayout) {\n        enableFcl(manifestUI5, app);\n    } else {\n        disableFcl(manifestUI5);\n    }\n};\n", "import type { v4 } from '@sap/ux-specification-types';\n\n/**\n * Method updates passed dependency lib in passed manifest.\n * @param {SapUi5V4} manifest - Manifest \"sap.ui5\" object.\n * @param {string} name - Library name to check.\n * @param {boolean} [add=true] - Add or remove library.\n */\nexport function updateDependencyLib(manifest: v4.SapUi5V4, name: string, add = true): void {\n    if (add) {\n        if (!manifest.dependencies) {\n            manifest.dependencies = {};\n        }\n        if (!manifest.dependencies.libs) {\n            manifest.dependencies.libs = {};\n        }\n        if (manifest.dependencies.libs[name] === undefined) {\n            manifest.dependencies.libs[name] = {};\n        }\n    } else if (manifest.dependencies && manifest.dependencies.libs && manifest.dependencies.libs[name] !== undefined) {\n        delete manifest.dependencies.libs[name];\n    }\n}\n\n/**\n * Looks for <...> pattern in the input string; if found, extracts this last part of the string\n * @param longId - schema ID in its long format\n * @returns the converted ID\n */\nexport function extractLastIdPart(longId: string): string {\n    let lastIdPart = longId;\n    if (longId.indexOf('<') > -1) {\n        lastIdPart = longId.substring(longId.indexOf('<') + 1, longId.length - 1);\n        const navPart = longId.substring(0, longId.lastIndexOf('::')).replace(/::/g, '/');\n        if (navPart) {\n            lastIdPart = `${navPart}/${lastIdPart}`;\n        }\n    }\n    return lastIdPart;\n}\n", "import type { ObjectPage } from './pages';\nimport type { ObjectPageCustomSectionFragment } from './controls';\nimport type { NextDefinition } from '../../common';\nimport {\n    DEFINITION_LINK_PREFIX,\n    getReflectMetadata,\n    getChildId,\n    getPageLayoutInformation,\n    getManifestSectionByPathV4,\n    fillFlexChangeContent\n} from '../../common';\nimport { ApplicationV4, AppSettings, getSettingsPathForPage } from '../application';\nimport { transformRoutingV4 } from './manifest';\nimport { updateFcl } from './flexibleColumnLayout';\nimport {\n    DefinitionName,\n    FacetTitlePrefix,\n    PropertyName,\n    SchemaTag,\n    PageTypeV2,\n    PageTypeV4,\n    SchemaType,\n    ManifestSection,\n    TemplateType\n} from '@sap/ux-specification-types';\nimport type {\n    FioriElementsVersion,\n    Manifest,\n    v4,\n    SapUi5Routing,\n    SapUi5RoutingTarget,\n    SyncRule,\n    ExportAnalyticalListPageV4Parameters,\n    ExportListReportV4Parameters,\n    ExportObjectPageV4Parameters,\n    ExportParametersV4,\n    ExportHandlerFunction,\n    ExportResults,\n    UI5Version\n} from '@sap/ux-specification-types';\nimport { deleteEmptyStructure, getNextTargetDefinition } from '../../common/utils';\nimport { MetadataInstanceFactoryV4 as Factory } from './factory';\nimport type { MetadataInstanceInterface } from '../../common/decoration/factory';\nimport type { TransferParameterTypeV4 } from './types';\nimport type { Definition } from 'typescript-json-schema';\nimport { extractLastIdPart } from './utils';\nimport { UIAnnotationTerms } from '@sap-ux/vocabularies-types/vocabularies/UI';\n\n/**\n * Return the skeleton of a new routing target for the manifest, pre-filled with some values\n * @param name - name of the template, e.g. \"sap.suite.ui.generic.template.ObjectPage\"\n * @param entitySet - the main entity set\n * @param navigationProperty - navigation property\n */\nconst getNewRoutingTarget = (name: string, entitySet: string): SapUi5RoutingTarget => {\n    return {\n        type: 'Component',\n        id: '',\n        name: name,\n        options: {\n            settings: {\n                entitySet: entitySet,\n                navigation: {},\n                controlConfiguration: {}\n            }\n        }\n    };\n};\n\nconst defaultExportResult: ExportResults = {\n    flexChanges: [],\n    manifest: {\n        'sap.ui5': {\n            flexEnabled: true,\n            routing: {\n                targets: {}\n            }\n        },\n        'sap.app': {}\n    } as Manifest,\n    fragments: []\n};\n\n/**\n * Applies the sync rule for a flex change during export\n * @param syncRule - export rule from the object classes decorator\n * @param transferParameters - list of parameters passed from API\n * @param ids - list of parent & child ids\n * @param breadcrumbs - list of breadcrumbs, i.e. ID parts for building the stable ID\n * @param title - title from the app schema (comprising for instance the facet ID)\n * @param configObject - current (sub)object of the configuration file\n * @param key - key of the given property\n */\nfunction exportFlexChange(\n    syncRule: SyncRule,\n    transferParameters: TransferParameterTypeV4,\n    ids: string[],\n    breadcrumbs: string[],\n    configObject: { [key: string]: any },\n    key: string\n) {\n    const controlId = syncRule.flex.controlId(\n        transferParameters.baseId,\n        ids,\n        breadcrumbs,\n        syncRule.flex.controlType,\n        transferParameters.title\n    );\n    const flexChange = fillFlexChangeContent(configObject, syncRule, transferParameters.ui5Version, key, controlId);\n    transferParameters.exportResults.flexChanges.push(\n        syncRule.flex.createFlexChange(flexChange, transferParameters.exportResults.manifest)\n    );\n}\n\nfunction determineTargetAnnotationOfTable(\n    ids: string[],\n    transferParameters: TransferParameterTypeV4,\n    configObject: { [key: string]: any }\n) {\n    let targetAnnotationEncoded = `@${UIAnnotationTerms.LineItem}`;\n    let targetAnnotation = `@${UIAnnotationTerms.LineItem}`;\n    const annotationPath =\n        transferParameters.appSchema.definitions[DefinitionName.TableSPV]?.[SchemaTag.annotationPath];\n    if (ids.length > 1 && transferParameters.config['table'].annotationPath) {\n        const annoPath = transferParameters.appSchema.definitions[DefinitionName.ALPTable]?.[SchemaTag.annotationPath];\n        targetAnnotationEncoded = targetAnnotation = annoPath && annoPath.substr(annoPath.lastIndexOf('@'));\n    } else if (configObject.table?.annotationPath) {\n        //view definition\n        targetAnnotationEncoded = targetAnnotation = `@${configObject.table.annotationPath}`;\n    } else if (ids[0] === PropertyName.table && annotationPath) {\n        const annotationPathArray = annotationPath.split('/');\n        targetAnnotationEncoded = targetAnnotation = annotationPathArray[annotationPathArray.length - 1];\n    }\n    return { targetAnnotationEncoded, targetAnnotation };\n}\n\nfunction determineTargetAnnotationOfChart(\n    ids: string[],\n    transferParameters: TransferParameterTypeV4,\n    targetAnnotationEncoded: string,\n    targetAnnotation: string,\n    configObject: { [key: string]: any }\n) {\n    if (ids.length > 1) {\n        const annoPath = transferParameters.appSchema.definitions[DefinitionName.ALPChart]?.[SchemaTag.annotationPath];\n        targetAnnotationEncoded = targetAnnotation = annoPath && annoPath.substr(annoPath.lastIndexOf('@'));\n    } else {\n        //chart level\n        targetAnnotationEncoded = targetAnnotation = `@${configObject.chart?.annotationPath}`;\n    }\n    return { targetAnnotationEncoded, targetAnnotation };\n}\n\nfunction determineTargetAnnotationOfViews(\n    transferParameters: TransferParameterTypeV4,\n    ids: string[],\n    targetAnnotation: string,\n    targetAnnotationEncoded: string\n) {\n    const parentDefinition = (transferParameters.appSchema.definitions['MultiTableModeV4'] as Definition)?.properties[\n        ids[2]\n    ];\n    if (parentDefinition) {\n        if (ids.length === 3) {\n            //the parent definition comprises the annotation of the visualization of the (Selection)PresentationVariant.\n            targetAnnotation = targetAnnotationEncoded =\n                parentDefinition[SchemaTag.annotationPath] &&\n                parentDefinition[SchemaTag.annotationPath].substr(\n                    parentDefinition[SchemaTag.annotationPath].lastIndexOf('@')\n                );\n        } else if (ids.length > 3) {\n            //the own definition comprises the lineItem or chart annotation from the visualization\n            const ownDefinitionName = (parentDefinition as Definition).$ref?.split(DEFINITION_LINK_PREFIX)[1];\n            const ownDefinition = ownDefinitionName && transferParameters.appSchema.definitions[ownDefinitionName];\n            const annotation =\n                ownDefinition?.[SchemaTag.annotationPath] &&\n                ownDefinition[SchemaTag.annotationPath].substr(\n                    ownDefinition[SchemaTag.annotationPath].lastIndexOf('@')\n                );\n            targetAnnotation = targetAnnotationEncoded = ownDefinition['navigationProperty']\n                ? `${ownDefinition['navigationProperty']}/${annotation}`\n                : annotation;\n        }\n    }\n    return { targetAnnotation, targetAnnotationEncoded };\n}\n\nfunction determineTargetAnnotationOfSections(\n    ids: string[],\n    custom: boolean,\n    targetAnnotationEncoded: string,\n    targetAnnotation: string\n) {\n    if (ids[1] === 'custom' && ids[2] !== ids[ids.length - 1]) {\n        custom = true;\n        targetAnnotationEncoded = ids[2];\n        targetAnnotation = targetAnnotationEncoded && targetAnnotationEncoded.replace(/::/g, '/');\n    } else {\n        const sectionId = extractLastIdPart(ids[1]);\n        targetAnnotationEncoded = sectionId && sectionId.replace(/\\//g, '::');\n        targetAnnotation = targetAnnotationEncoded && targetAnnotationEncoded.replace(/::/g, '/');\n    }\n    return { custom, targetAnnotationEncoded, targetAnnotation };\n}\n\n/**\n * Determines the target annotation that is relevant for the sync rule\n * @param {string[]} ids - list of ids of parent elements\n * @param {TransferParameterTypeV4} transferParameters - list of parameters passed from API\n * @param { [key: string]: any } configObject - the given config.json, to be exported\n * @returns { targetAnnotationEncoded, targetAnnotation, custom }\n */\nfunction determineTargetAnnotation(\n    ids: string[],\n    transferParameters: TransferParameterTypeV4,\n    configObject: { [key: string]: any }\n): { targetAnnotationEncoded: string; targetAnnotation: string; custom: boolean } {\n    let targetAnnotation,\n        targetAnnotationEncoded,\n        custom = false;\n    if (ids[0] === PropertyName.table && ids[1] !== PropertyName.views) {\n        ({ targetAnnotationEncoded, targetAnnotation } = determineTargetAnnotationOfTable(\n            ids,\n            transferParameters,\n            configObject\n        ));\n    } else if (ids[0] === PropertyName.chart && transferParameters.templateType === TemplateType.AnalyticalListPageV4) {\n        ({ targetAnnotationEncoded, targetAnnotation } = determineTargetAnnotationOfChart(\n            ids,\n            transferParameters,\n            targetAnnotationEncoded,\n            targetAnnotation,\n            configObject\n        ));\n    } else if (ids[0] === PropertyName.sections) {\n        ({ custom, targetAnnotationEncoded, targetAnnotation } = determineTargetAnnotationOfSections(\n            ids,\n            custom,\n            targetAnnotationEncoded,\n            targetAnnotation\n        ));\n    } else if (ids[1] === PropertyName.sections) {\n        //header sections\n        if (transferParameters.title && transferParameters.title.indexOf(FacetTitlePrefix) > -1) {\n            targetAnnotation = targetAnnotationEncoded = transferParameters.title.split(FacetTitlePrefix)[1];\n        } else if (ids[2]) {\n            targetAnnotation = targetAnnotationEncoded = ids[2].split('@')[1];\n        } else if (targetAnnotationEncoded) {\n            targetAnnotation = targetAnnotationEncoded = targetAnnotationEncoded.replace(/::/g, '/');\n        }\n    } else if (ids[1] === PropertyName.views) {\n        ({ targetAnnotation, targetAnnotationEncoded } = determineTargetAnnotationOfViews(\n            transferParameters,\n            ids,\n            targetAnnotation,\n            targetAnnotationEncoded\n        ));\n    }\n    return { targetAnnotationEncoded, targetAnnotation, custom };\n}\n\n/**\n * Calculates an additional key for the sync rule from the given ID's\n * @param {string[]} ids - list of ids of parent elements\n * @returns the key for the sync rule\n */\nfunction determineKeyForSyncRule(ids: string[]): string | undefined {\n    let idIndex = 0;\n    for (let index = ids.length - 1; index > -1; index--) {\n        const element = ids[index];\n        if (element === 'columns' || element === PropertyName.actions || element === 'views') {\n            idIndex = index + 1;\n            break;\n        }\n    }\n    return idIndex > 0 ? ids[idIndex].replace(/\\//gi, '??') : undefined;\n}\n\ntype ExportToManifestParams = {\n    exportHandler: boolean | ExportHandlerFunction;\n    manifestSection: object;\n    configObject: { [key: string]: any };\n    configPropertyKey: string;\n    manifestKey: string;\n    syncRuleKey: string;\n};\n\n/**\n * Creates a new object in manifest\n * @param {ExportToManifestParams} params - list of parameters\n */\nfunction createNewObjectInManifest(params: ExportToManifestParams) {\n    if (params.exportHandler && typeof params.exportHandler === 'function') {\n        params.exportHandler(\n            params.manifestSection,\n            params.configObject,\n            params.configPropertyKey,\n            params.manifestKey,\n            params.syncRuleKey\n        );\n    } else if (!params.manifestSection[params.manifestKey]) {\n        params.manifestSection[params.manifestKey] = {};\n    }\n}\n\n/**\n * Transfers a property value from config to manifest\n * @param {ExportToManifestParams} params - list of parameters\n * @param propertyDefinition - schema definition of a particular property\n * @param nextDefinition - schema definition referred by $ref\n */\nfunction transferPropertyToManifest(\n    params: ExportToManifestParams,\n    propertyDefinition: object,\n    nextDefinition: object\n) {\n    if (\n        !(\n            propertyDefinition['type'] !== 'array' &&\n            nextDefinition?.['targetDefinition']?.type === 'object' &&\n            nextDefinition?.['targetDefinition']?.properties\n        )\n    ) {\n        if (params.exportHandler !== false) {\n            if (params.exportHandler && typeof params.exportHandler === 'function') {\n                params.exportHandler(\n                    params.manifestSection,\n                    params.configObject,\n                    params.configPropertyKey,\n                    params.manifestKey,\n                    params.syncRuleKey\n                );\n            } else if (\n                Array.isArray(params.configObject[params.configPropertyKey]) &&\n                !params.configObject[params.configPropertyKey].length\n            ) {\n                delete params.manifestSection[params.manifestKey];\n            } else {\n                params.manifestSection[params.manifestKey] = params.configObject[params.configPropertyKey];\n            }\n        }\n    } else if (propertyDefinition['type'] !== 'array' && params.manifestSection[params.manifestKey] === undefined) {\n        createNewObjectInManifest(params);\n    }\n}\n\n/**\n * Transfers a change in config.json to manifest\n * @param ids - list of parent & child ids\n * @param {SyncRule} syncRule - syncRule (metadata)\n * @param {TransferParameterTypeV4} transferParameters - list of parameters passed from API\n * @param {string} configPropertyKey - key of property in the config\n * @param { [key: string]: any } configObject - the given config.json, to be exported\n * @param propertyDefinition - schema definition of a particular property\n * @param nextDefinition - schema definition referred by $ref\n */\nfunction exportManifestChange(\n    ids: string[],\n    syncRule: SyncRule,\n    transferParameters: TransferParameterTypeV4,\n    configPropertyKey: string,\n    configObject: { [key: string]: any },\n    propertyDefinition: object,\n    nextDefinition: object\n) {\n    //eliminate subsections' hierarchy\n    let index = ids.indexOf('subsections');\n    while (index > -1) {\n        ids.splice(index - 1, 2);\n        index = ids.indexOf('subsections');\n    }\n    const { targetAnnotationEncoded, targetAnnotation, custom } = determineTargetAnnotation(\n        ids,\n        transferParameters,\n        configObject\n    );\n\n    const syncRuleKey = determineKeyForSyncRule(ids);\n    const path = syncRule.manifest.path(\n        transferParameters.pageNameArray,\n        transferParameters.exportResults.manifest,\n        targetAnnotationEncoded,\n        syncRuleKey,\n        targetAnnotation,\n        configObject\n    );\n    const manifestSection = getManifestSectionByPathV4(\n        transferParameters.exportResults.manifest,\n        path,\n        targetAnnotation,\n        custom ? undefined : targetAnnotationEncoded\n    );\n    if (manifestSection) {\n        const manifestKey = syncRule.manifest.key || configPropertyKey;\n        if (configObject[configPropertyKey] !== undefined) {\n            // In case of arrays we take over complete array\n            const exportParams: ExportToManifestParams = {\n                exportHandler: syncRule.manifest.export,\n                manifestSection,\n                configObject,\n                configPropertyKey,\n                manifestKey,\n                syncRuleKey\n            };\n            transferPropertyToManifest(exportParams, propertyDefinition, nextDefinition);\n        } else if (syncRule.manifest.delete) {\n            const deleteHandler = syncRule.manifest.delete;\n            if (typeof deleteHandler === 'function') {\n                deleteHandler(\n                    manifestSection,\n                    configObject,\n                    configPropertyKey,\n                    manifestKey,\n                    syncRuleKey,\n                    transferParameters.config\n                );\n            }\n        } else if (manifestSection[manifestKey] !== undefined) {\n            delete manifestSection[manifestKey];\n        }\n    }\n    deleteEmptyStructure(transferParameters.exportResults.manifest, path, targetAnnotation, targetAnnotationEncoded);\n}\n\n/**\n * Evaluates an export rule for a property or object, transfers to flex change or manifest setting\n * @param transferParameters - list of parameters passed from API\n * @param breadcrumbs - list of breadcrumbs, i.e. ID parts for building the stable ID\n * @param key - key of the given property\n * @param configObject - current (sub)object of the configuration file\n * @param ids - list of parent & child ids\n * @param title - title from the app schema (comprising for instance the facet ID)\n * @param propertyDefinition - schema definition of a particular property\n * @param nextDefinition - schema definition referred by $ref\n */\nfunction evaluateExportRule(\n    transferParameters: TransferParameterTypeV4,\n    breadcrumbs: string[],\n    key: string,\n    configObject: { [key: string]: any },\n    ids: string[],\n    propertyDefinition: object,\n    nextDefinition: NextDefinition\n): void {\n    const syncRule = getReflectMetadata(configObject, key);\n    if (syncRule) {\n        if (syncRule.flex) {\n            exportFlexChange(syncRule, transferParameters, ids, breadcrumbs, configObject, key);\n        } else if (syncRule.manifest) {\n            exportManifestChange(\n                ids,\n                syncRule,\n                transferParameters,\n                key,\n                configObject,\n                propertyDefinition,\n                nextDefinition\n            );\n        }\n    }\n}\n\n/**\n * Processes an (object-like) sub-object of the app schema and transfer all connected config entries to manifest\n * @param {TransferEntryParameters} parameters - list of parameters\n * @param {NextDefinition} nextDefinition - the next definition in app schema to be processed\n * @param currentConfigObject - current config object\n * @param ids - list of parent & child ID's\n * @param localIdParts - list of ID parts for building the stable ID\n */\nfunction transferSubObject(\n    parameters: TransferEntryParameters,\n    nextDefinition: NextDefinition,\n    currentConfigObject: any,\n    ids: string[],\n    localIdParts: string[]\n) {\n    let objects = [],\n        isArray = false;\n    if (parameters.propertyDefinition.$ref && nextDefinition) {\n        objects.push(nextDefinition.configObject);\n    } else if (parameters.propertyDefinition['anyOf']) {\n        objects.push(currentConfigObject);\n    } else if (parameters.propertyDefinition.type === 'array') {\n        objects = currentConfigObject;\n        isArray = true;\n    } else {\n        objects.push(currentConfigObject);\n    }\n    parameters.index = 0;\n    for (const innerObject of objects) {\n        const additionalIds = [];\n        if (parameters.breadcrumbs[0] === PropertyName.sections && parameters.key === 'custom' && isArray) {\n            // We need add custom section 'id' into breadcrumbs to retrieve correct path to manifest\n            additionalIds.push(innerObject['id']);\n        }\n        parameters.transferParameters.title = nextDefinition.title;\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        transferManifestEntriesAndFlexChange(\n            parameters.transferParameters,\n            innerObject,\n            [...ids, ...additionalIds],\n            localIdParts,\n            [...parameters.breadcrumbs, parameters.key],\n            nextDefinition.targetDefinition\n        );\n        parameters.index++;\n    }\n}\n\n/**\n * Creates an ALP 'views' entry in the resulting manifest if not yet existing yet.\n * Adds the secondary = table view if missing.\n * @param {TransferParameterTypeV4} transferParameters - list of parameters passed from API\n * @param configObject - current object in config.json\n * @returns\n * - a boolean indicating that the views entry got created.\n * - a boolean indicating if the processing of sub-objects shall be stopped\n **/\nfunction createALPTableView(\n    transferParameters: TransferParameterTypeV4,\n    configObject: any,\n    key: string\n): { newElementCreated: boolean; stopProcessing: boolean } {\n    let newElementCreated = false;\n    if (!configObject[key] || Object.keys(configObject[key]).length === 0 || !configObject.chart) {\n        return { newElementCreated, stopProcessing: true };\n    }\n    const path = getSettingsPathForPage(transferParameters.pageNameArray) + `/views`;\n    const views = getManifestSectionByPathV4(transferParameters.exportResults.manifest, path);\n    if (!views['paths'] || Object.keys(views['paths']).length === 0) {\n        views['paths'] = [\n            {\n                secondary: [\n                    {\n                        annotationPath: configObject[key].annotationPath\n                    }\n                ]\n            }\n        ];\n        newElementCreated = true;\n    } else if (!views['paths'][0].secondary) {\n        views['paths'][0].secondary = [\n            {\n                annotationPath: configObject[key].annotationPath\n            }\n        ];\n        newElementCreated = true;\n    }\n    return { newElementCreated, stopProcessing: false };\n}\n\n/**\n * Creates an ALP 'views' entry in the resulting manifest if not yet existing yet\n * Adds the primary = chart view if missing.\n * @param {TransferParameterTypeV4} transferParameters - list of parameters passed from API\n * @param configObject - current object in config.json\n * @returns\n * - a boolean indicating that the views entry got created.\n * - a boolean indicating if the processing of sub-objects shall be stopped\n */\nfunction createALPChartView(\n    transferParameters: TransferParameterTypeV4,\n    configObject: any,\n    key: string\n): { newElementCreated: boolean; stopProcessing: boolean } {\n    let newElementCreated = false;\n\n    if (!configObject[key] || Object.keys(configObject[key]).length === 0) {\n        return { newElementCreated, stopProcessing: true };\n    }\n    const path = getSettingsPathForPage(transferParameters.pageNameArray) + `/views`;\n    const views = getManifestSectionByPathV4(transferParameters.exportResults.manifest, path);\n    if (!views['paths'] || Object.keys(views['paths']).length === 0) {\n        views['paths'] = [\n            {\n                primary: [\n                    {\n                        annotationPath: configObject[key].annotationPath\n                    }\n                ]\n            }\n        ];\n        newElementCreated = true;\n    } else if (!views['paths'][0].primary) {\n        views['paths'][0].primary = [\n            {\n                annotationPath: configObject[key].annotationPath\n            }\n        ];\n        newElementCreated = true;\n    }\n    if (!views['paths'][0].secondary) {\n        views['paths'][0].secondary = [\n            {\n                annotationPath: configObject?.table?.annotationPath || UIAnnotationTerms.LineItem\n            }\n        ];\n    }\n    return { newElementCreated, stopProcessing: false };\n}\n\n/**\n * Creates an LR 'views' entry in the resulting manifest if not yet existing yet.\n * Adds the current table view if missing.\n * @param {TransferParameterTypeV4} transferParameters - list of parameters passed from API\n * @param configObject - current object in config.json\n * @returns a boolean indicating that the views entry got created.\n */\nfunction createLRTableView(\n    index: number,\n    transferParameters: TransferParameterTypeV4,\n    key: string,\n    configObject: any\n): boolean {\n    if (!configObject || Object.keys(configObject).length === 0) {\n        return false;\n    }\n    let newElementCreated = false;\n    const path = getSettingsPathForPage(transferParameters.pageNameArray) + `/views`;\n    const views = getManifestSectionByPathV4(transferParameters.exportResults.manifest, path);\n    const newEntry = {\n        key: configObject['key'],\n        annotationPath: configObject.annotationPath\n    };\n    if (!views['paths'] || Object.keys(views['paths']).length === 0) {\n        //No views yet\n        views['paths'] = [newEntry];\n        newElementCreated = true;\n    } else {\n        const existingIndex = views['paths'].findIndex((view) => view.key === configObject['key'] || view.key === key);\n        if (existingIndex === -1) {\n            //Given view does not exist yet\n            views['paths'].push(newEntry);\n            newElementCreated = true;\n        } else if (existingIndex !== configObject.index) {\n            //Reordering scenario\n            const savedContent = JSON.parse(JSON.stringify(views['paths'][existingIndex]));\n            views['paths'].splice(existingIndex, 1);\n            views['paths'].splice(index, 0, savedContent);\n            newElementCreated = true;\n        }\n    }\n    return newElementCreated;\n}\n\n/**\n * Special logic to create new elements in manifest\n * @param definitionName - schema definition name of the current object\n * @param key - key of the current object\n * @param configObject - current object in config.json\n * @param {TransferParameterTypeV4} transferParameters - list of parameters passed from API\n * @returns newElementCreated - boolean value to indicate that a new element was created ==> no further sync rule on this level\n */\nfunction createNewElement(\n    index: number,\n    definitionName: string,\n    key: string,\n    configObject: any,\n    transferParameters: TransferParameterTypeV4,\n    preprocessed = false\n): { newElementCreated: boolean; stopProcessing: boolean } {\n    let newElementCreated = false;\n    const stopProcessing = false;\n    if (!preprocessed) {\n        if (definitionName === DefinitionName.ALPChartView && key === PropertyName.chart && configObject) {\n            return createALPChartView(transferParameters, configObject, key);\n        } else if (definitionName === DefinitionName.ALPTableView && key === PropertyName.table && configObject) {\n            return createALPTableView(transferParameters, configObject, key);\n        } else if (\n            key &&\n            definitionName &&\n            (definitionName.startsWith(DefinitionName.LRTableView) ||\n                definitionName.startsWith(DefinitionName.LRChartView))\n        ) {\n            newElementCreated = createLRTableView(index, transferParameters, key, configObject[key]);\n        }\n    }\n    return { newElementCreated, stopProcessing };\n}\n\ntype TransferEntryParameters = {\n    transferParameters: TransferParameterTypeV4;\n    breadcrumbs: string[];\n    key: string;\n    index: number;\n    configObject: { [key: string]: any };\n    propertyDefinition: Definition;\n};\n\n/**\n * Transfers one entry of a list (aka one property of the config) to the manifest\n * @param {TransferEntryParameters} parameters - list of parameters\n * @param parentIds - array of collected parent ids\n * @param stableIdParts - list of parts of the stable ID for flex changes\n * @param preprocessed - indicates that the list was already preprocessed by following the config order\n */\nfunction transferSortedListEntry(\n    parameters: TransferEntryParameters,\n    parentIds: string[],\n    stableIdParts: string[],\n    preprocessed = false\n): void {\n    const currentConfigObject = parameters.configObject[parameters.key];\n    const childId = getChildId(parameters.configObject, parameters.key);\n    const nextDefinition = getNextTargetDefinition(\n        parameters.transferParameters.appSchema,\n        parameters.transferParameters.title,\n        currentConfigObject,\n        parameters.propertyDefinition,\n        parameters.key,\n        parameters.transferParameters.factory,\n        parameters.transferParameters.pageType\n    );\n    const { newElementCreated, stopProcessing } = createNewElement(\n        parameters.index,\n        parameters.propertyDefinition.$ref?.split(DEFINITION_LINK_PREFIX)[1],\n        parameters.key,\n        parameters.configObject,\n        parameters.transferParameters,\n        preprocessed\n    );\n    const ids = childId ? [...parentIds, childId] : [...parentIds, parameters.key];\n    if (!newElementCreated) {\n        evaluateExportRule(\n            parameters.transferParameters,\n            parameters.breadcrumbs,\n            parameters.key,\n            parameters.configObject,\n            ids,\n            parameters.propertyDefinition,\n            nextDefinition\n        );\n    }\n\n    if (\n        parameters.propertyDefinition &&\n        ((typeof currentConfigObject === 'object' && Object.keys(currentConfigObject).length !== 0) ||\n            (parameters.propertyDefinition.$ref && nextDefinition.configObject)) &&\n        !stopProcessing\n    ) {\n        const localIdParts = childId ? [...stableIdParts, childId] : stableIdParts;\n        transferSubObject(parameters, nextDefinition, currentConfigObject, ids, localIdParts);\n    }\n}\n\n/**\n * Function for special handling of anyOf definitions during the export\n * @param {TransferEntryParameters} parameters - list of parameters\n * @param anyOfDefinitions - the array of definitions from the anyOf (of additionalProperties)\n * @param schemaDefinition - parent definition, comprising properties as well as additionalProperties\n * @param parentIds - array of collected parent ids\n * @param stableIdParts - list of parts of the stable ID for flex changes\n * @returns\n */\nfunction transferConfigEntriesWithAnyOfDefinitions(\n    transferEntryParameters: TransferEntryParameters,\n    anyOfDefinitions: Definition[],\n    schemaDefinition: Definition,\n    parentIds: string[],\n    stableIdParts: string[]\n): boolean {\n    let preprocessed = false;\n    if (anyOfDefinitions) {\n        const configEntries = Object.entries(transferEntryParameters.configObject);\n        if (!configEntries || configEntries.length < 1) {\n            return preprocessed;\n        }\n        configEntries.sort((a, b) => a[1]['index'] - b[1]['index']);\n        //follow the config order, to support reordering\n        configEntries.forEach((configEntry) => {\n            if (schemaDefinition.properties[configEntry[0]]) {\n                transferEntryParameters.key = configEntry[0];\n                transferEntryParameters.propertyDefinition = schemaDefinition.properties[configEntry[0]] as Definition;\n                //already part of schema\n                transferSortedListEntry(transferEntryParameters, parentIds, stableIdParts);\n                preprocessed = true;\n            } else if (typeof configEntry[1] === 'object') {\n                //match against potential schema definitions\n                anyOfDefinitions.forEach((anyOfDefinition) => {\n                    if (anyOfDefinition.$ref) {\n                        transferEntryParameters.key = configEntry[0];\n                        transferEntryParameters.propertyDefinition = anyOfDefinition;\n                        transferSortedListEntry(transferEntryParameters, parentIds, stableIdParts);\n                        preprocessed = true;\n                    }\n                });\n            }\n            transferEntryParameters.index++;\n        });\n    }\n    return preprocessed;\n}\n\n/**\n * Recursive function that traverses the content of the current object. It reads decorators and fills exportResultManifest entries and flex changes\n * @param {TransferParameterTypeV4} transferParameters - list of parameters passed from API\n * @param configObject - current object to traverse\n * @param parentIds - array of collected parent ids\n * @param stableIdParts - list of parts of the stable ID for flex changes\n * @param breadcrumbs - array of sequence of properties that we are currently processing. Required for instance for table column name\n * @param schemaDefinition - the current entry point or definition in the app schema\n * @param title - the title to be used for the given schema definition\n */\nfunction transferManifestEntriesAndFlexChange(\n    transferParameters: TransferParameterTypeV4,\n    configObject: { [key: string]: any },\n    parentIds: string[],\n    stableIdParts: string[],\n    breadcrumbs: string[],\n    schemaDefinition: Definition\n): void {\n    if (!schemaDefinition?.properties) {\n        return;\n    }\n    let index = 0;\n    //In case of additionalProperties = flexible array definition ==> new entries from the config shall be exported too\n    const transferEntryParameters: TransferEntryParameters = {\n        transferParameters,\n        breadcrumbs,\n        key: undefined,\n        index,\n        configObject,\n        propertyDefinition: undefined\n    };\n    const anyOfDefinitions = (schemaDefinition.additionalProperties as Definition)?.anyOf as Definition[];\n\n    const preprocessed = transferConfigEntriesWithAnyOfDefinitions(\n        transferEntryParameters,\n        anyOfDefinitions,\n        schemaDefinition,\n        parentIds,\n        stableIdParts\n    );\n    //Sort if there is a propertyIndex, so that the exported list ends up in manifest in the right order\n    let sortedList = schemaDefinition.properties && Object.entries(schemaDefinition.properties);\n    if (sortedList) {\n        if (sortedList[0]?.[1][SchemaTag.propertyIndex]) {\n            sortedList = Object.entries(schemaDefinition.properties).sort(\n                (a, b) => a[1][SchemaTag.propertyIndex] - b[1][SchemaTag.propertyIndex]\n            );\n        }\n        index = 0;\n        sortedList.forEach((element: object) => {\n            transferEntryParameters.key = element[0];\n            transferEntryParameters.propertyDefinition = element[1];\n            transferEntryParameters.index = index;\n            transferSortedListEntry(transferEntryParameters, parentIds, stableIdParts, preprocessed);\n            if (element[1].$ref) {\n                index++;\n            }\n        });\n    }\n}\n\n/**\n * Instantiates the export classes for a single object page section\n * @param sectionId - Current section ID\n */\nfunction getClassesForSingleSection(\n    objectPageConfig: v4.ObjectPageConfigV4,\n    sectionId: string,\n    factory: MetadataInstanceInterface\n): void {\n    if (sectionId === 'custom' && Array.isArray(objectPageConfig.sections[sectionId])) {\n        // Custom sections\n        const customSections: Array<ObjectPageCustomSectionFragment> = objectPageConfig.sections\n            .custom as Array<ObjectPageCustomSectionFragment>;\n        for (let index = 0; index < customSections.length; index++) {\n            customSections[index] = factory.createInstance(\n                PageTypeV2.ObjectPage,\n                'ObjectPageCustomSectionView',\n                customSections[index],\n                customSections[index].className\n            );\n        }\n    }\n}\n\n/**\n * Recursive sub-function for handling subsections\n * @param section - Object page section in config\n */\nfunction getSubsectionClasses(section: object, factory: MetadataInstanceInterface): void {\n    if (section['subsections']) {\n        let subSection: object;\n        for (const subSectionId in section['subsections']) {\n            subSection = section['subsections'][subSectionId];\n            getClassesForSingleSection(subSection, subSectionId, factory);\n            getSubsectionClasses(subSection, factory);\n        }\n    }\n}\n\n/**\n * Instantiates the export classes for the object page section\n * @param objectPageConfig - the given object page configuration\n * @param objectPage - the overall object page export class where the sections shall be included\n */\nfunction getExportClassesForSections(\n    objectPageConfig: v4.ObjectPageConfigV4,\n    objectPage: ObjectPage,\n    factory: MetadataInstanceInterface\n): void {\n    let section: object;\n    for (const sectionId in objectPageConfig.sections) {\n        section = objectPage.sections[sectionId];\n        getClassesForSingleSection(objectPageConfig, sectionId, factory);\n        getSubsectionClasses(section, factory);\n    }\n}\n\n/**\n * Run through the given ObjectPage config and return respective exportResultManifest entry and flex changes\n * @param appId - id of the Fiori elements app, which is usually namespace.appid\n * @param objectPageConfig - content of the src/ObjectPage_<entity_set>.json file\n * @param manifest - manifest of the application\n * @param pageName - routing target defined in manifest\n */\nconst exportObjectPage = (exportParameters: ExportObjectPageV4Parameters, ui5Version: UI5Version): ExportResults => {\n    const exportResults: ExportResults = defaultExportResult;\n    exportResults.manifest = JSON.parse(JSON.stringify(exportParameters.manifest));\n\n    const factory = new Factory();\n    const objectPage = factory.createPageInstance(PageTypeV2.ObjectPage, exportParameters.page.config);\n    const pageLayoutInformation = getPageLayoutInformation(objectPage);\n    const pageName = exportParameters.page.name;\n    const baseId = `${exportParameters.appId}::${pageLayoutInformation.id}::${pageName}--`;\n\n    if (exportParameters.page.config?.[PropertyName.sections]) {\n        getExportClassesForSections(exportParameters.page.config, objectPage, factory);\n    }\n    const transferParameters: TransferParameterTypeV4 = {\n        exportResults,\n        appId: exportParameters.appId,\n        appRootPath: exportParameters.appRootPath,\n        baseId,\n        appSchema: exportParameters.jsonSchema,\n        config: objectPage,\n        ui5Version,\n        factory,\n        pageNameArray: [pageName],\n        pageType: PageTypeV4.ObjectPage,\n        title: undefined,\n        templateType: TemplateType.ListReportObjectPageV4\n    };\n\n    transferManifestEntriesAndFlexChange(\n        transferParameters,\n        objectPage,\n        [], //no parentIds\n        [], // no stableIds\n        [], // no breadcrumbs\n        exportParameters.jsonSchema //starting point for target definition\n    );\n\n    return exportResults;\n};\n\n/**\n * Run through the given List Page (LR or ALP) config and return respective exportResultManifest entry and flex changes\n * @param {ExportListReportV4Parameters} exportParameters - all API parameters needed for the export\n * @param config - content of the config file\n * @param {PageTypeV4} - pageType - Page type\n * @param ui5Version - SAP UI5 version\n */\nconst exportListPage = (\n    exportParameters: ExportListReportV4Parameters,\n    factory: Factory,\n    config: v4.ListReportConfigV4,\n    pageType: PageTypeV4,\n    ui5Version: UI5Version,\n    templateType: TemplateType\n): ExportResults => {\n    const exportResults: ExportResults = defaultExportResult;\n    exportResults.manifest = JSON.parse(JSON.stringify(exportParameters.manifest)) as Manifest;\n    const appSchema = exportParameters.jsonSchema as Definition;\n\n    const definitionName = config.table?.[PropertyName.annotationPath]\n        ? DefinitionName.ALPTableView\n        : DefinitionName.Table;\n    const tableDefinition = (config.table = factory.createInstance(pageType, definitionName, config.table));\n    let tableDefinitionName = DefinitionName.LineItems;\n    if (appSchema.definitions[DefinitionName.TableSPV]) {\n        const tableRef = (appSchema.definitions[DefinitionName.TableSPV] as Definition).properties.columns['$ref'];\n        tableDefinitionName = tableRef.split(DEFINITION_LINK_PREFIX)[1];\n    }\n    const appSchemaActions = appSchema.definitions[`${DefinitionName.Actions}<${tableDefinitionName}>`] as Definition;\n    if (tableDefinition.toolBar?.actions && appSchemaActions) {\n        for (const actionKey in appSchemaActions.properties) {\n            tableDefinition.toolBar.actions[actionKey] = factory.createInstance(\n                pageType,\n                DefinitionName.ToolBarAction,\n                tableDefinition.toolBar.actions[actionKey]\n            );\n        }\n    }\n\n    const pageLayoutInformation = getPageLayoutInformation(config);\n    const pageName = exportParameters.page.name;\n    const baseId = `${exportParameters.appId}::${pageLayoutInformation.id}::${pageName}--`;\n    const transferParameters: TransferParameterTypeV4 = {\n        exportResults,\n        appId: exportParameters.appId,\n        appRootPath: exportParameters.appRootPath,\n        baseId,\n        appSchema,\n        config,\n        ui5Version,\n        factory,\n        pageNameArray: [pageName],\n        pageType: PageTypeV4.ListReport,\n        title: undefined,\n        logger: exportParameters.logger,\n        templateType\n    };\n\n    transferManifestEntriesAndFlexChange(\n        transferParameters,\n        config,\n        [], //no parentIds\n        [], // no stableIds\n        [], // no breadcrumbs\n        appSchema //starting point for target definition\n    );\n\n    return exportResults;\n};\n\n/**\n * Run through the given ListReport config and return respective exportResultManifest entry and flex changes\n * @param {ExportListReportV4Parameters} exportParameters - all API parameters needed for the export\n * @param ui5Version - SAP UI5 version\n * @returns ExportResults - The export result comprises the enhanced manifest as well as a list of flex changes.\n */\nconst exportListReportPage = (\n    exportParameters: ExportListReportV4Parameters,\n    ui5Version: UI5Version,\n    templateType: TemplateType\n): ExportResults => {\n    const factory = new Factory();\n    const listReport = factory.createPageInstance(PageTypeV2.ListReport, exportParameters.page.config);\n\n    return exportListPage(exportParameters, factory, listReport, PageTypeV4.ListReport, ui5Version, templateType);\n};\n\n/**\n * Run through the given Analytical List Page config and return respective exportResultManifest entry and flex changes\n * @param {ExportAnalyticalListPageV4Parameters} exportParameters - all API parameters needed for the export\n * @param ui5Version - SAP UI5 version\n * @returns ExportResults - The export result comprises the enhanced manifest as well as a list of flex changes.\n *\n * @returns ExportResults - The export result comprises the enhanced manifest as well as a list of flex changes.\n */\nconst exportAnalyticalListPage = (\n    exportParameters: ExportAnalyticalListPageV4Parameters,\n    ui5Version: UI5Version\n): ExportResults => {\n    return exportListReportPage(exportParameters, ui5Version, TemplateType.AnalyticalListPageV4);\n};\n\n/**\n * API for the export of a V4 app configuration\n * Export means the transfer of the properties and values of the given config to manifest entries or flex changes\n * @param application - V4 application (app.json config file)\n * @param manifest - Manifest of the given app\n * @param appSchema - App schema\n *\n * @returns ExportResults = object comprising the updated manifest and a list of flex changes\n */\nconst exportApplicationV4 = (application: ApplicationV4, manifest: object, appSchema: Definition): ExportResults => {\n    const exportResults: ExportResults = defaultExportResult;\n    exportResults.manifest = JSON.parse(JSON.stringify(manifest));\n\n    const applicationV4 = Object.assign(new ApplicationV4(), application);\n\n    //transform application settings\n    applicationV4.settings = Object.assign(new AppSettings(), applicationV4.settings);\n    for (const key in (appSchema.definitions.AppSettings as Definition).properties) {\n        const syncRule = getReflectMetadata(applicationV4.settings, key);\n        if (syncRule && syncRule.manifest) {\n            const path = syncRule.manifest.path();\n            const manifestSection = getManifestSectionByPathV4(exportResults.manifest, path);\n            if (application.settings?.[key] !== undefined) {\n                manifestSection[key] = application.settings[key];\n            } else {\n                delete manifestSection[key];\n            }\n            deleteEmptyStructure(exportResults.manifest, path);\n        }\n    }\n    //transform routing\n    exportResults.manifest[ManifestSection.ui5].routing = transformRoutingV4(\n        application['home'],\n        application['pages'],\n        exportResults.manifest\n    ) as SapUi5Routing;\n\n    // Update FCL data\n    updateFcl(exportResults.manifest[ManifestSection.ui5] as v4.SapUi5V4, application);\n\n    return exportResults;\n};\n\n/**\n * General API for the export of a V4 config page\n * Export means the transfer of the properties and values of the given config to manifest entries or flex changes\n * @param appId - Application ID\n * @param page - Current page (config)\n * @param manifest - Manifest of the given app\n * @param jsonSchema - App schema\n *\n * @returns ExportResults = object comprising the updated manifest and a list of flex changes\n */\nexport const exportPageV4 = (\n    exportParametersV4: ExportParametersV4[FioriElementsVersion.v4],\n    ui5Version: UI5Version\n): ExportResults | undefined => {\n    if (exportParametersV4[SchemaType.ListReport]) {\n        return exportListReportPage(\n            exportParametersV4[SchemaType.ListReport],\n            ui5Version,\n            TemplateType.ListReportObjectPageV4\n        );\n    } else if (exportParametersV4[SchemaType.ObjectPage]) {\n        return exportObjectPage(exportParametersV4[SchemaType.ObjectPage], ui5Version);\n    } else if (exportParametersV4[SchemaType.Application]) {\n        const { application, manifest, jsonSchema } = exportParametersV4[SchemaType.Application];\n        return exportApplicationV4(application, manifest, jsonSchema);\n    } else if (exportParametersV4[SchemaType.AnalyticalListPage]) {\n        return exportAnalyticalListPage(exportParametersV4[SchemaType.AnalyticalListPage], ui5Version);\n    }\n};\n", "import { basename, join } from 'path';\nimport { readFile as readFileFs, readdir, stat, exists } from 'fs';\nimport type { Manifest, FileData } from '@sap/ux-specification-types';\n\nexport interface Project {\n    root: string;\n    name: string;\n    manifest: Manifest;\n    annotations: FileData[];\n    changes: string[];\n    fragments: FileData[];\n}\n\nconst readFile = async (path: string): Promise<string> => {\n    return new Promise((resolve, reject): void => {\n        readFileFs(path, { encoding: 'utf8' }, (err, data): void => {\n            if (err) {\n                reject(err);\n            } else {\n                resolve(data);\n            }\n        });\n    });\n};\n\nconst readJSON = async <T>(path: string): Promise<T> => {\n    return JSON.parse(await readFile(path)) as T;\n};\n\nexport const readDirectory = async (path: string): Promise<string[]> => {\n    return new Promise((resolve, reject): void => {\n        readdir(path, { encoding: 'utf8' }, (err, data): void => {\n            if (err) {\n                reject(err);\n            } else {\n                resolve(data);\n            }\n        });\n    });\n};\n\nexport const isDirectory = async (path: string): Promise<boolean> => {\n    return new Promise((resolve): void => {\n        stat(path, (err, stats): void => {\n            if (err) {\n                resolve(false);\n            } else {\n                resolve(stats.isDirectory());\n            }\n        });\n    });\n};\n\nconst resourceExists = async (path: string): Promise<boolean> => {\n    return new Promise((resolve) => {\n        exists(path, (doesExist) => {\n            resolve(doesExist);\n        });\n    });\n};\n\nconst getManifest = async (path: string): Promise<Manifest> => {\n    return readJSON<Manifest>(join(path, 'manifest.json'));\n};\n\nexport const getChanges = async (webapp: string): Promise<string[]> => {\n    const changes: string[] = [];\n    const changesDirectory = join(webapp, 'changes');\n    if (!(await resourceExists(changesDirectory))) {\n        return changes;\n    }\n    const extensions = [\n        '.change',\n        '.variant',\n        '.ctrl_variant',\n        '.ctrl_variant_change',\n        '.ctrl_variant_management_change'\n    ];\n    const files = await readDirectory(changesDirectory);\n    for (const file of files) {\n        if (extensions.some((ext) => file.endsWith(ext))) {\n            changes.push(await readFile(join(changesDirectory, file)));\n        }\n    }\n    return changes;\n};\n\nconst getFragments = async (webAppPath: string): Promise<FileData[]> => {\n    const fragments: FileData[] = [];\n\n    const directoryPath = join(webAppPath, 'ext', 'fragments');\n    if (!(await resourceExists(directoryPath))) {\n        return fragments;\n    }\n    const files = await readDirectory(directoryPath);\n    for (const file of files) {\n        const filePath = join(directoryPath, file);\n        const data = await readFile(filePath);\n        fragments.push({\n            dataSourceUri: filePath,\n            fileContent: data\n        });\n    }\n    return fragments;\n};\n\nconst getAnnotations = async (manifest: Manifest, webAppPath: string): Promise<FileData[]> => {\n    const annotationData: FileData[] = [];\n    const serviceDataSources = manifest?.['sap.app']?.dataSources;\n    if (serviceDataSources?.mainService?.settings?.localUri) {\n        const metadataPath = join(webAppPath, serviceDataSources.mainService.settings.localUri);\n        annotationData.push({\n            dataSourceUri: metadataPath,\n            fileContent: await readFile(metadataPath)\n        });\n    }\n    if (serviceDataSources?.mainService?.settings?.annotations) {\n        for (const annotationRef of serviceDataSources.mainService.settings.annotations) {\n            if (serviceDataSources[annotationRef]?.settings?.localUri) {\n                const annotationFilePath = join(webAppPath, serviceDataSources[annotationRef].settings.localUri);\n                annotationData.push({\n                    dataSourceUri: annotationFilePath,\n                    fileContent: await readFile(annotationFilePath)\n                });\n            }\n        }\n    }\n    //Consider CAP/multiple services\n    if (annotationData.length === 0) {\n        for (const key in serviceDataSources) {\n            const dataSource = serviceDataSources[key];\n            if (dataSource?.type === 'ODataAnnotation' && dataSource?.settings?.localUri) {\n                const annotationFilePath = join(webAppPath, dataSource.settings.localUri);\n                annotationData.push({\n                    dataSourceUri: annotationFilePath,\n                    fileContent: await readFile(annotationFilePath)\n                });\n            }\n        }\n    }\n\n    return annotationData;\n};\n\n/**\n * Get the project artefacts, like manifest, service metadata, annotations\n * @param root - project root where package.json is\n */\nexport const getProject = async (root: string): Promise<Project> => {\n    const name = basename(root);\n    const webappPath = join(root, 'webapp');\n    const manifest = await getManifest(webappPath);\n    const annotations = await getAnnotations(manifest, webappPath);\n    const changes = await getChanges(webappPath);\n    const fragments = await getFragments(webappPath);\n    return {\n        root,\n        name,\n        manifest,\n        annotations,\n        changes,\n        fragments\n    };\n};\n"],
  "mappings": "uyCAAAA,GAAA,CAAA,EAAAC,GAAAD,GAAA,CAAA,YAAA,IAAAE,GAAA,kBAAA,IAAAC,GAAA,WAAA,IAAAC,GAAA,aAAA,IAAAC,GAAA,6BAAA,IAAAC,GAAA,YAAA,IAAAC,GAAA,iBAAA,IAAAC,GAAA,eAAA,IAAAC,GAAA,eAAA,IAAAC,GAAA,QAAA,IAAAC,GAAA,4BAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,kBAAA,IAAAC,GAAA,yBAAA,IAAAC,GAAA,iBAAA,IAAAC,GAAA,UAAA,IAAAC,GAAA,iBAAA,IAAAC,GAAA,SAAA,IAAAC,GAAA,SAAA,IAAAC,GAAA,qBAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,iCAAA,IAAAC,GAAA,yBAAA,IAAAC,GAAA,mBAAA,IAAAC,GAAA,YAAA,IAAAC,GAAA,iBAAA,IAAAC,GAAA,aAAA,IAAAC,GAAA,aAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,aAAA,IAAAC,GAAA,qCAAA,IAAAC,GAAA,SAAA,IAAAC,GAAA,WAAA,IAAAC,GAAA,WAAA,IAAAC,GAAA,aAAA,IAAAC,GAAA,aAAA,IAAAC,GAAA,cAAA,IAAAC,GAAA,sBAAA,IAAAC,GAAA,kBAAA,IAAAC,GAAA,cAAA,IAAAC,GAAA,UAAA,IAAAC,GAAA,WAAA,IAAAC,GAAA,YAAA,IAAAC,GAAA,sBAAA,IAAAC,GAAA,6BAAA,IAAAC,GAAA,aAAA,IAAAC,GAAA,aAAA,IAAAC,GAAA,qBAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,cAAA,IAAAC,GAAA,aAAA,IAAAC,GAAA,iBAAA,IAAAC,GAAA,UAAA,IAAAC,GAAA,cAAA,IAAAC,GAAA,GAAA,IAAAC,GAAA,GAAA,IAAAC,EAAAA,CAAAA,EAAAC,GAAA,QAAAC,GAAA3D,EAAAA,ECEO,IAAKkC,IAAAA,IACRA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,aAAe,eACfA,EAAA,WAAa,aACbA,EAAA,mBAAqB,qBALbA,IAAAA,IAAA,CAAA,CAAA,EAQAC,IAAAA,IACRA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,mBAAqB,qBAJbA,IAAAA,IAAA,CAAA,CAAA,EAOCF,GAAW,CAAE,GAAGC,GAAY,GAAGC,EAAW,EAG1CH,GAAgE,IAAI,IAAI,CACjF,CAAC,aAAuB,0DAA0D,EAClF,CAAC,qBAA+B,0EAA0E,EAC1G,CAAC,aAAuB,uDAAuD,CACnF,CAAC,EAgBWX,IAAAA,IACRA,EAAA,GAAK,KACLA,EAAA,GAAK,KAFGA,IAAAA,IAAA,CAAA,CAAA,EAIAU,IAAAA,IACRA,EAAA,GAAK,KACLA,EAAA,GAAK,KAFGA,IAAAA,IAAA,CAAA,CAAA,ECxCAP,IAAAA,IACRA,EAAA,UAAY,YACZA,EAAA,wBAA0B,0BAC1BA,EAAA,sBAAwB,wBACxBA,EAAA,oBAAsB,sBACtBA,EAAA,wBAA0B,0BAC1BA,EAAA,wBAA0B,0BAC1BA,EAAA,iCAAmC,mCACnCA,EAAA,mCAAqC,qCACrCA,EAAA,oBAAsB,sBATdA,IAAAA,IAAA,CAAA,CAAA,EAYMF,IAAAA,IACdA,EAAA,OAAS,SACTA,EAAA,SAAW,gBAFGA,IAAAA,IAAA,CAAA,CAAA,EAUNqB,IAAAA,IACRA,EAAA,YAAc,cACdA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,aAAe,eACfA,EAAA,mBAAqB,qBACrBA,EAAA,cAAgB,gBANRA,IAAAA,IAAA,CAAA,CAAA,EASA9B,IAAAA,IACRA,EAAA,KAAO,OACPA,EAAA,SAAW,WAFHA,IAAAA,IAAA,CAAA,CAAA,EAKAX,IAAAA,IACRA,EAAA,QAAU,UACVA,EAAA,UAAY,YAFJA,IAAAA,IAAA,CAAA,CAAA,EAKA0C,IAAAA,IACRA,EAAA,QAAU,UACVA,EAAA,WAAa,aACbA,EAAA,cAAgB,gBAHRA,IAAAA,IAAA,CAAA,CAAA,EAMAvC,IAAAA,IACRA,EAAA,SAAW,WACXA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,SAAW,WAJHA,IAAAA,IAAA,CAAA,CAAA,EAOAD,IAAAA,IACRA,EAAA,WAAa,aACbA,EAAA,OAAS,SACTA,EAAA,SAAW,WAHHA,IAAAA,IAAA,CAAA,CAAA,EAMAG,IAAAA,IACRA,EAAA,MAAQ,cACRA,EAAA,YAAc,eACdA,EAAA,WAAa,oCACbA,EAAA,eAAiB,4CACjBA,EAAA,WAAa,oCACbA,EAAA,MAAQ,8BACRA,EAAA,aAAe,qCACfA,EAAA,OAAS,eACTA,EAAA,cAAgB,8BAChBA,EAAA,OAAS,eACTA,EAAA,6BAA+B,wCAC/BA,EAAA,yBAA2B,yBAC3BA,EAAA,iBAAmB,4BACnBA,EAAA,iBAAmB,4BACnBA,EAAA,aAAe,wCACfA,EAAA,YAAc,oBACdA,EAAA,KAAO,qBACPA,EAAA,MAAQ,0BACRA,EAAA,QAAU,6BACVA,EAAA,WAAa,gCApBLA,IAAAA,IAAA,CAAA,CAAA,EA6BAgD,IAAAA,IACRA,EAAA,SAAW,WACXA,EAAA,MAAQ,QAFAA,IAAAA,IAAA,CAAA,CAAA,EAKA5C,IAAAA,IACRA,EAAA,MAAQ,MACRA,EAAA,QAAU,WACVA,EAAA,MAAQ,QACRA,EAAA,OAAS,SACTA,EAAA,KAAO,OACPA,EAAA,QAAU,UACVA,EAAA,aAAe,eACfA,EAAA,WAAa,aACbA,EAAA,KAAO,OACPA,EAAA,SAAW,WACXA,EAAA,IAAM,MACNA,EAAA,OAAS,UAZDA,IAAAA,IAAA,CAAA,CAAA,EAcAS,IAAAA,IACRA,EAAA,IAAM,WADEA,IAAAA,IAAA,CAAA,CAAA,EAICF,GAAmB,aACnBf,GAAoB,cAsIrBc,IAAAA,IACRA,EAAA,SAAW,WACXA,EAAA,gBAAkB,kBAClBA,EAAA,MAAQ,QACRA,EAAA,KAAO,OACPA,EAAA,eAAiB,iBACjBA,EAAA,UAAY,YACZA,EAAA,QAAU,UACVA,EAAA,QAAU,UACVA,EAAA,oBAAsB,sBACtBA,EAAA,QAAU,GAVFA,IAAAA,IAAA,CAAA,CAAA,EAsECX,GAA+B,+CAEhC+C,IAAAA,IACRA,EAAA,gCAAkC,kCAClCA,EAAA,gCAAkC,kCAClCA,EAAA,0BAA4B,4BAC5BA,EAAA,0BAA4B,4BAC5BA,EAAA,8BAAgC,gCALxBA,IAAAA,IAAA,CAAA,CAAA,EASA3C,IAAAA,IACRA,EAAA,OAAS,SACTA,EAAA,QAAU,UACVA,EAAA,UAAY,qBACZA,EAAA,SAAW,WACXA,EAAA,aAAe,eACfA,EAAA,SAAW,WACXA,EAAA,aAAe,eACfA,EAAA,4BAA8B,8BAC9BA,EAAA,uBAAyB,yBACzBA,EAAA,mBAAqB,qBACrBA,EAAA,0BAA4B,4BAC5BA,EAAA,eAAiB,iBACjBA,EAAA,qBAAuB,uBACvBA,EAAA,mBAAqB,qBACrBA,EAAA,qBAAuB,uBACvBA,EAAA,mBAAqB,qBACrBA,EAAA,kBAAoB,oBACpBA,EAAA,oBAAsB,sBACtBA,EAAA,aAAe,oBACfA,EAAA,eAAiB,sBACjBA,EAAA,cAAgB,qBAChBA,EAAA,eAAiB,iBACjBA,EAAA,UAAY,YACZA,EAAA,MAAQ,QACRA,EAAA,OAAS,SACTA,EAAA,cAAgB,gBAChBA,EAAA,UAAY,YACZA,EAAA,uBAAyB,yBACzBA,EAAA,OAAS,SACTA,EAAA,aAAe,eACfA,EAAA,eAAiB,iBACjBA,EAAA,cAAgB,gBAChBA,EAAA,gBAAkB,2BAClBA,EAAA,KAAO,OACPA,EAAA,WAAa,aACbA,EAAA,mBAAqB,qBACrBA,EAAA,eAAiB,iBACjBA,EAAA,iBAAmB,mBACnBA,EAAA,cAAgB,gBAChBA,EAAA,gBAAkB,kBAClBA,EAAA,mBAAqB,qBACrBA,EAAA,OAAS,SACTA,EAAA,cAAgB,gBAChBA,EAAA,sBAAwB,wBACxBA,EAAA,qBAAuB,uBACvBA,EAAA,uBAAyB,yBACzBA,EAAA,+BAAiC,iCACjCA,EAAA,wBAA0B,0BAC1BA,EAAA,eAAiB,iBACjBA,EAAA,UAAY,YACZA,EAAA,gBAAkB,kBAClBA,EAAA,oBAAsB,sBACtBA,EAAA,YAAc,cACdA,EAAA,YAAc,cACdA,EAAA,YAAc,YACdA,EAAA,iBAAmB,mBACnBA,EAAA,gBAAkB,kBAClBA,EAAA,sCAAwC,wCACxCA,EAAA,gCAAkC,kCAClCA,EAAA,mCAAqC,qCACrCA,EAAA,eAAiB,iBACjBA,EAAA,iBAAmB,mBACnBA,EAAA,uBAAyB,yBACzBA,EAAA,wBAA0B,0BAC1BA,EAAA,+BAAiC,iCACjCA,EAAA,iBAAmB,mBACnBA,EAAA,4BAA8B,8BAC9BA,EAAA,6BAA+B,+BAC/BA,EAAA,iCAAmC,mCACnCA,EAAA,+BAAiC,iCACjCA,EAAA,+BAAiC,iCACjCA,EAAA,iBAAmB,mBACnBA,EAAA,8BAAgC,gCAChCA,EAAA,yBAA2B,2BAC3BA,EAAA,uBAAyB,yBACzBA,EAAA,yBAA2B,2BAC3BA,EAAA,2BAA6B,6BAC7BA,EAAA,sBAAwB,wBACxBA,EAAA,qCAAuC,uCACvCA,EAAA,yBAA2B,2BAC3BA,EAAA,sBAAwB,wBACxBA,EAAA,gBAAkB,kBAClBA,EAAA,sBAAwB,wBACxBA,EAAA,kBAAoB,oBACpBA,EAAA,wBAA0B,0BAC1BA,EAAA,yBAA2B,2BAC3BA,EAAA,SAAW,WACXA,EAAA,WAAa,aACbA,EAAA,aAAe,eACfA,EAAA,wBAA0B,0BAC1BA,EAAA,0BAA4B,4BAC5BA,EAAA,iBAAmB,mBACnBA,EAAA,SAAW,WACXA,EAAA,eAAiB,iBACjBA,EAAA,gBAAkB,kBAClBA,EAAA,MAAQ,QACRA,EAAA,SAAW,WACXA,EAAA,YAAc,cACdA,EAAA,mBAAqB,qBACrBA,EAAA,cAAgB,gBAChBA,EAAA,UAAY,qBACZA,EAAA,QAAU,UACVA,EAAA,gBAAkB,kBAClBA,EAAA,sBAAwB,wBACxBA,EAAA,iBAAmB,wBACnBA,EAAA,iBAAmB,wBACnBA,EAAA,iBAAmB,mBACnBA,EAAA,kBAAoB,oBACpBA,EAAA,aAAe,eACfA,EAAA,yBAA2B,2BAC3BA,EAAA,cAAgB,gBAChBA,EAAA,aAAe,eACfA,EAAA,qBAAuB,uBACvBA,EAAA,uBAAyB,yBAEzBA,EAAA,qBAAuB,uBACvBA,EAAA,2BAA6B,6BAC7BA,EAAA,YAAc,cAtHNA,IAAAA,IAAA,CAAA,CAAA,EAyHA0B,IAAAA,IACRA,EAAA,QAAU,UACVA,EAAA,eAAiB,iBACjBA,EAAA,MAAQ,QACRA,EAAA,YAAc,cACdA,EAAA,8BAAgC,gCAChCA,EAAA,SAAW,WACXA,EAAA,MAAQ,QACRA,EAAA,MAAQ,QARAA,IAAAA,IAAA,CAAA,CAAA,EAWAM,IAAAA,IACRA,EAAA,eAAiB,iBACjBA,EAAA,eAAiB,iBACjBA,EAAA,aAAe,eACfA,EAAA,YAAc,cACdA,EAAA,WAAa,aACbA,EAAA,SAAW,WACXA,EAAA,mBAAqB,qBACrBA,EAAA,OAAS,SACTA,EAAA,WAAa,aACbA,EAAA,IAAM,MACNA,EAAA,KAAO,OACPA,EAAA,OAAS,SACTA,EAAA,cAAgB,gBAbRA,IAAAA,IAAA,CAAA,CAAA,EAgBAD,IAAAA,IACRA,EAAA,GAAK,KACLA,EAAA,MAAQ,QACRA,EAAA,OAAS,SACTA,EAAA,OAAS,SACTA,EAAA,IAAM,MACNA,EAAA,eAAiB,iBANTA,IAAAA,IAAA,CAAA,CAAA,EASCZ,GAAe,mCACfD,GAAe,uBACfwB,GAAe,yBACfD,GAAgB,0BAChBH,GAAe,6BACfE,GAAkB,8BAClBD,GAAuB,+BACvBZ,GAAe,yBACfC,GAAgB,0BAChB9B,GAAmB,+BACnBQ,GAAmB,aC9epBJ,IAAAA,IACRA,EAAA,WAAa,aADLA,IAAAA,IAAA,CAAA,CAAA,EAUAkC,IAAAA,IACRA,EAAA,IAAM,MACNA,EAAA,OAAS,SACTA,EAAA,OAAS,SAHDA,IAAAA,IAAA,CAAA,CAAA,EAMAD,IAAAA,IACRA,EAAA,YAAc,cACdA,EAAA,UAAY,YAFJA,IAAAA,IAAA,CAAA,CAAA,EAcAtB,IAAAA,IACRA,EAAA,iBAAmB,mBACnBA,EAAA,eAAiB,iBACjBA,EAAA,eAAiB,iBAHTA,IAAAA,IAAA,CAAA,CAAA,EC/BAd,IAAAA,IACRA,EAAA,MAAQ,QACRA,EAAA,gBAAkB,kBAFVA,IAAAA,IAAA,CAAA,CAAA,EA8CAqB,IAAAA,IACRA,EAAA,GAAK,SACLA,EAAA,IAAM,UACNA,EAAA,QAAU,qBACVA,EAAA,IAAM,UACNA,EAAA,IAAM,UALEA,IAAAA,IAAA,CAAA,CAAA,EAQCL,GAAqB,8BCvDrBV,GAA2B,0CAE3BD,GAAoB,cAErBwC,IAAAA,IACRA,EAAA,IAAM,MACNA,EAAA,KAAO,OACPA,EAAA,KAAO,OACPA,EAAA,GAAK,KAJGA,IAAAA,IAAA,CAAA,CAAA,EAqCCd,GAAoB,uBACpBD,GAAwB,uBCtCnBb,IAAAA,IACdA,EAAA,MAAQ,QACRA,EAAA,QAAU,UACVA,EAAA,KAAO,OAHOA,IAAAA,IAAA,CAAA,CAAA,EAMLC,GAAmB,CAC3B,MAAoB,QACpB,QAAsB,UACtB,KAAmB,aACxB,EAuXYoB,IAAAA,IACRA,EAAA,uBAAyB,yBACzBA,EAAA,uBAAyB,yBACzBA,EAAA,eAAiB,iBACjBA,EAAA,qBAAuB,uBACvBA,EAAA,qBAAuB,uBACvBA,EAAA,gBAAkB,kBANVA,IAAAA,IAAA,CAAA,CAAA,EA+BA5B,IAAAA,IACRA,EAAA,eAAiB,iBADTA,IAAAA,IAAA,CAAA,CAAA,ECvaZqC,GAAA,CAAA,EAAAvD,GAAAuD,GAAA,CAAA,YAAA,IAAAI,GAAA,WAAA,IAAAC,GAAA,iBAAA,IAAAC,GAAA,iBAAA,IAAAC,GAAA,cAAA,IAAAC,GAAA,UAAA,IAAAC,GAAA,oBAAA,IAAAC,GAAA,WAAA,IAAAC,GAAA,cAAA,IAAAC,GAAA,mBAAA,IAAAC,GAAA,kBAAA,IAAAC,GAAA,uBAAA,IAAAC,GAAA,eAAA,IAAAC,GAAA,mBAAA,IAAAC,GAAA,2BAAA,IAAAC,GAAA,2BAAA,IAAAC,GAAA,eAAA,IAAAC,GAAA,OAAA,IAAAC,GAAA,mBAAA,IAAAC,GAAA,eAAA,IAAAC,GAAA,aAAA,IAAAC,GAAA,4BAAA,IAAAC,GAAA,uBAAA,IAAAC,GAAA,YAAA,IAAAC,GAAA,4BAAA,IAAAC,GAAA,sBAAA,IAAAC,GAAA,2CAAA,IAAAC,GAAA,kCAAA,IAAAC,GAAA,kCAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,cAAA,IAAAC,GAAA,SAAA,IAAAC,GAAA,2BAAA,IAAAC,GAAA,YAAA,IAAAC,GAAA,oBAAA,IAAAC,GAAA,sBAAA,IAAAC,EAAAA,CAAAA,ECEO,IAAKlC,IAAAA,IACRA,EAAA,OAAS,SACTA,EAAA,UAAY,YACZA,EAAA,KAAO,OACPA,EAAA,SAAW,WACXA,EAAA,QAAU,UACVA,EAAA,WAAa,aACbA,EAAA,MAAQ,QACRA,EAAA,SAAW,WACXA,EAAA,QAAU,UACVA,EAAA,OAAS,SACTA,EAAA,QAAU,UACVA,EAAA,YAAc,cACdA,EAAA,SAAW,WACXA,EAAA,GAAK,KAdGA,IAAAA,IAAA,CAAA,CAAA,ECuDAG,IAAAA,IACRA,EAAA,WAAa,aACbA,EAAA,eAAiB,iBACjBA,EAAA,gBAAkB,kBAHVA,IAAAA,IAAA,CAAA,CAAA,EAMAD,IAAAA,IACRA,EAAA,WAAa,kCACbA,EAAA,aAAe,qCACfA,EAAA,KAAO,qBACPA,EAAA,OAAS,wBACTA,EAAA,SAAW,yBACXA,EAAA,MAAQ,sBACRA,EAAA,QAAU,yBACVA,EAAA,MAAQ,sBARAA,IAAAA,IAAA,CAAA,CAAA,EAWC+B,GAAsB,CAC/B,kCAAmC,iBACnC,qCAAsC,iBACtC,qBAAsB,WACtB,wBAAyB,WACzB,yBAA0B,eAC1B,sBAAuB,YACvB,yBAA0B,YAC1B,sBAAuB,WAC3B,EAEYhC,IAAAA,IACRA,EAAA,uBAAyB,yBACzBA,EAAA,yBAA2B,2BAC3BA,EAAA,iBAAmB,mBACnBA,EAAA,mBAAqB,qBACrBA,EAAA,kBAAoB,oBACpBA,EAAA,qBAAuB,uBACvBA,EAAA,kBAAoB,oBACpBA,EAAA,oBAAsB,sBARdA,IAAAA,IAAA,CAAA,CAAA,EAWAoB,IAAAA,IACRA,EAAA,QAAU,UACVA,EAAA,IAAM,MACNA,EAAA,IAAM,MACNA,EAAA,IAAM,MACNA,EAAA,MAAQ,SALAA,IAAAA,IAAA,CAAA,CAAA,EA8RAH,IAAAA,IACRA,EAAA,SAAW,WACXA,EAAA,IAAM,MACNA,EAAA,SAAW,WAHHA,IAAAA,IAAA,CAAA,CAAA,EAMAC,IAAAA,IACRA,EAAA,SAAW,WACXA,EAAA,UAAY,YAFJA,IAAAA,IAAA,CAAA,CAAA,EAKAU,IAAAA,IACRA,EAAA,UAAY,YACZA,EAAA,WAAa,aAFLA,IAAAA,IAAA,CAAA,CAAA,EAuGAZ,IAAAA,IACRA,EAAA,SAAW,WACXA,EAAA,SAAW,WAFHA,IAAAA,IAAA,CAAA,CAAA,EChfMV,IAAAA,IACdA,EAAA,UAAY,YACZA,EAAA,KAAO,OACPA,EAAA,KAAO,OACPA,EAAA,GAAK,KACLA,EAAA,KAAO,OACPA,EAAA,SAAW,WACXA,EAAA,UAAY,YACZA,EAAA,KAAO,OACPA,EAAA,WAAa,aACbA,EAAA,MAAQ,QACRA,EAAA,QAAU,UACVA,EAAA,aAAe,eACfA,EAAA,UAAY,YACZA,EAAA,SAAW,WACXA,EAAA,KAAO,OACPA,EAAA,SAAW,WACXA,EAAA,UAAY,YACZA,EAAA,WAAa,aACbA,EAAA,aAAe,eACfA,EAAA,UAAY,YACZA,EAAA,KAAO,OACPA,EAAA,cAAgB,gBAChBA,EAAA,UAAY,YACZA,EAAA,WAAa,aACbA,EAAA,MAAQ,QACRA,EAAA,SAAW,WACXA,EAAA,SAAW,WACXA,EAAA,SAAW,WACXA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,SAAW,WACXA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,UAAY,YACZA,EAAA,UAAY,YACZA,EAAA,UAAY,YACZA,EAAA,YAAc,cACdA,EAAA,YAAc,cACdA,EAAA,YAAc,cACdA,EAAA,SAAW,WACXA,EAAA,SAAW,WACXA,EAAA,SAAW,WACXA,EAAA,SAAW,WACXA,EAAA,YAAc,cAhDAA,IAAAA,IAAA,CAAA,CAAA,EAyFAQ,IAAAA,IACdA,EAAA,IAAM,MACNA,EAAA,QAAU,WAFIA,IAAAA,IAAA,CAAA,CAAA,ECrFNC,IAAAA,IACRA,EAAA,QAAU,UACVA,EAAA,KAAO,OACPA,EAAA,OAAS,SACTA,EAAA,MAAQ,QACRA,EAAA,MAAQ,QACRA,EAAA,IAAM,MANEA,IAAAA,IAAA,CAAA,CAAA,EA6FAkB,IAAAA,IACRA,EAAA,IAAM,MADEA,IAAAA,IAAA,CAAA,CAAA,EAIAF,IAAAA,IACRA,EAAA,gBAAkB,kBAClBA,EAAA,UAAY,YACZA,EAAA,gBAAkB,kBAClBA,EAAA,UAAY,YAJJA,IAAAA,IAAA,CAAA,CAAA,EAOAD,IAAAA,IACRA,EAAA,gCAAkC,kCAClCA,EAAA,gCAAkC,kCAClCA,EAAA,0BAA4B,4BAC5BA,EAAA,0BAA4B,4BAJpBA,IAAAA,IAAA,CAAA,CAAA,EAwBAT,IAAAA,IACRA,EAAA,MAAQ,QACRA,EAAA,UAAY,YACZA,EAAA,UAAY,YAHJA,IAAAA,IAAA,CAAA,CAAA,EAiFAQ,IAAAA,IACRA,EAAA,UAAY,YADJA,IAAAA,IAAA,CAAA,CAAA,EAIAtB,IAAAA,IACRA,EAAA,WAAa,aACbA,EAAA,MAAQ,QACRA,EAAA,MAAQ,QAHAA,IAAAA,IAAA,CAAA,CAAA,EAMAC,IAAAA,IACRA,EAAA,OAAS,SACTA,EAAA,QAAU,UAFFA,IAAAA,IAAA,CAAA,CAAA,EAKAW,IAAAA,IACRA,EAAA,OAAS,SACTA,EAAA,MAAQ,QACRA,EAAA,iBAAmB,mBAHXA,IAAAA,IAAA,CAAA,CAAA,ECpOAhB,IAAAA,IACRA,EAAA,IAAM,MACNA,EAAA,OAAS,SACTA,EAAA,KAAO,OACPA,EAAA,YAAc,cACdA,EAAA,IAAM,MACNA,EAAA,MAAQ,QACRA,EAAA,QAAU,UACVA,EAAA,OAAS,SACTA,EAAA,QAAU,UACVA,EAAA,OAAS,SACTA,EAAA,eAAiB,kBACjBA,EAAA,WAAa,cACbA,EAAA,cAAgB,iBAChBA,EAAA,mBAAqB,sBACrBA,EAAA,6BAA+B,iCAC/BA,EAAA,QAAU,WACVA,EAAA,WAAa,cACbA,EAAA,SAAW,YACXA,EAAA,eAAiB,mBACjBA,EAAA,kBAAoB,sBACpBA,EAAA,gBAAkB,mBAClBA,EAAA,uBAAyB,2BACzBA,EAAA,0BAA4B,8BAC5BA,EAAA,iCAAmC,sCACnCA,EAAA,kBAAoB,kBACpBA,EAAA,qBAAuB,qBACvBA,EAAA,sBAAwB,uBACxBA,EAAA,yBAA2B,0BAC3BA,EAAA,UAAY,YACZA,EAAA,oBAAsB,uBA9BdA,IAAAA,IAAA,CAAA,CAAA,ECEAL,IAAAA,IACRA,EAAA,OAAS,SACTA,EAAA,OAAS,SAFDA,IAAAA,IAAA,CAAA,CAAA,EC2JA6B,IAAAA,IACRA,EAAA,WAAa,aACbA,EAAA,YAAc,cACdA,EAAA,aAAe,eAHPA,IAAAA,IAAA,CAAA,CAAA,EAMAlB,IAAAA,IACRA,EAAA,IAAM,MADEA,IAAAA,IAAA,CAAA,CAAA,EC/IAJ,IAAAA,IACRA,EAAA,OAAS,SADDA,IAAAA,IAAA,CAAA,CAAA,ECPCK,GAAiB,gCACjBG,GAA6B,2CAC7BD,GAA6B,2CAC7BD,GAAqB,mDC0BrBY,GAAwB,wBACxBD,GAA8B,8BAW9BI,GAAoC,wDACpCD,GAAoC,2DACpCD,GACT,2ECNQpB,IAAAA,IACRA,EAAA,MAAQ,QACRA,EAAA,UAAY,YAFJA,IAAAA,IAAA,CAAA,CAAA,ECnDZT,GAAA,CAAA,EAAAxD,GAAAwD,GAAA,CAAA,aAAA,IAAAuC,GAAA,yBAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,iBAAA,IAAAC,GAAA,eAAA,IAAAC,GAAA,mBAAA,IAAAC,GAAA,2BAAA,IAAAC,GAAA,2BAAA,IAAAC,GAAA,2BAAA,IAAAC,GAAA,uBAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,UAAA,IAAAC,GAAA,4BAAA,IAAAC,GAAA,wBAAA,IAAAC,GAAA,kBAAA,IAAAC,GAAA,gBAAA,IAAAtB,GAAA,kBAAA,IAAAuB,GAAA,WAAA,IAAAC,GAAA,cAAA,IAAAC,GAAA,sBAAA,IAAAC,GAAA,YAAA,IAAAC,GAAA,gCAAA,IAAAC,GAAA,gCAAA,IAAAC,EAAAA,CAAAA,ECSO,IAAKJ,IAAAA,IACRA,EAAA,MAAQ,QACRA,EAAA,KAAO,OACPA,EAAA,OAAS,SACTA,EAAA,KAAO,OAJCA,IAAAA,IAAA,CAAA,CAAA,EAOAE,IAAAA,IACRA,EAAA,gBAAkB,kBAClBA,EAAA,UAAY,YAFJA,IAAAA,IAAA,CAAA,CAAA,EAQAT,IAAAA,IACRA,EAAA,SAAW,WACXA,EAAA,QAAU,UACVA,EAAA,KAAO,OAHCA,IAAAA,IAAA,CAAA,CAAA,EAMAT,IAAAA,IACRA,EAAA,QAAU,UACVA,EAAA,UAAY,YACZA,EAAA,KAAO,OAHCA,IAAAA,IAAA,CAAA,CAAA,EC9BAe,IAAAA,IACRA,EAAA,OAAS,SACTA,EAAA,MAAQ,QAFAA,IAAAA,IAAA,CAAA,CAAA,ECAMd,IAAAA,IACdA,EAAA,0BAAA,EAA6B,2BADfA,IAAAA,IAAA,CAAA,CAAA,ECANY,IAAAA,IACRA,EAAA,KAAO,OACPA,EAAA,KAAO,OAFCA,IAAAA,IAAA,CAAA,CAAA,ECgFAtB,IAAAA,IACRA,EAAA,MAAQ,QACRA,EAAA,OAAS,SAFDA,IAAAA,IAAA,CAAA,CAAA,EAKAQ,IAAAA,IACRA,EAAA,IAAM,MADEA,IAAAA,IAAA,CAAA,CAAA,ECvDAkB,IAAAA,IACRA,EAAA,QAAU,UACVA,EAAA,OAAS,SAFDA,IAAAA,IAAA,CAAA,CAAA,ECoCCf,GAAiB,mBACjBE,GAA6B,kBAC7BE,GAA6B,8BAC7BD,GAA6B,8BAC7BF,GAAqB,sCAgBrBS,GAA0B,cAS3BE,IAAAA,IACRA,EAAA,WAAa,aACbA,EAAA,YAAc,cAFNA,IAAAA,IAAA,CAAA,CAAA,ECnBCP,GAAyB,uBAczBI,GAA8B,QCzF/BD,IAAAA,IACRA,EAAA,MAAQ,QACRA,EAAA,OAAS,SAFDA,IAAAA,IAAA,CAAA,CAAA,EA0DAZ,IAAAA,IACRA,EAAA,QAAY,UACZA,EAAA,WAAe,aACfA,EAAA,OAAW,SAHHA,IAAAA,IAAA,CAAA,CAAA,EAMAU,IAAAA,IACRA,EAAA,MAAU,QACVA,EAAA,OAAW,SACXA,EAAA,IAAQ,MAHAA,IAAAA,IAAA,CAAA,CAAA,ECxDAY,IAAAA,IACRA,EAAA,KAAO,OACPA,EAAA,QAAU,UAFFA,IAAAA,IAAA,CAAA,CAAA,ECNAD,IAAAA,IACRA,EAAA,KAAO,OACPA,EAAA,QAAU,UACVA,EAAA,KAAO,OAHCA,IAAAA,IAAA,CAAA,CAAA,wJCIZ,IAAkBE,IAAlB,SAAkBA,EAAW,CACzBA,EAAA,MAAA,QACAA,EAAA,QAAA,UACAA,EAAA,KAAA,MACJ,GAJkBA,GAAAC,GAAA,cAAAA,GAAA,YAAW,CAAA,EAAA,EAMhBA,GAAA,iBAAmB,CAC5B,MAAqB,QACrB,QAAuB,UACvB,KAAoB,eAwXxB,IAAYC,IAAZ,SAAYA,EAAY,CACpBA,EAAA,uBAAA,yBACAA,EAAA,uBAAA,yBACAA,EAAA,eAAA,iBACAA,EAAA,qBAAA,uBACAA,EAAA,qBAAA,uBACAA,EAAA,gBAAA,iBACJ,GAPYA,GAAAD,GAAA,eAAAA,GAAA,aAAY,CAAA,EAAA,EA+BxB,IAAYE,IAAZ,SAAYA,EAAQ,CAChBA,EAAA,eAAA,gBACJ,GAFYA,GAAAF,GAAA,WAAAA,GAAA,SAAQ,CAAA,EAAA,mcCvapBG,GAAA,CAAA,EAAAC,GAAAD,GAAA,CAAA,YAAA,IAAAE,GAAA,WAAA,IAAAC,GAAA,iBAAA,IAAAC,GAAA,iBAAA,IAAAC,GAAA,cAAA,IAAAC,GAAA,UAAA,IAAAC,GAAA,oBAAA,IAAAC,GAAA,WAAA,IAAAC,GAAA,cAAA,IAAAC,GAAA,mBAAA,IAAAC,GAAA,kBAAA,IAAAC,GAAA,uBAAA,IAAAC,GAAA,eAAA,IAAAC,GAAA,mBAAA,IAAAC,GAAA,2BAAA,IAAAC,GAAA,2BAAA,IAAAC,GAAA,eAAA,IAAAC,GAAA,OAAA,IAAAC,GAAA,mBAAA,IAAAC,GAAA,eAAA,IAAAC,GAAA,aAAA,IAAAC,GAAA,4BAAA,IAAAC,GAAA,uBAAA,IAAAC,GAAA,YAAA,IAAAC,GAAA,4BAAA,IAAAC,GAAA,sBAAA,IAAAC,GAAA,2CAAA,IAAAC,GAAA,kCAAA,IAAAC,GAAA,kCAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,cAAA,IAAAC,GAAA,SAAA,IAAAC,GAAA,2BAAA,IAAAC,GAAA,YAAA,IAAAC,GAAA,oBAAA,IAAAC,GAAA,sBAAA,IAAAC,EAAAA,CAAAA,EAAAC,GAAA,QAAAC,GAAAvC,EAAAA,ECEO,IAAKG,IAAAA,IACRA,EAAA,OAAS,SACTA,EAAA,UAAY,YACZA,EAAA,KAAO,OACPA,EAAA,SAAW,WACXA,EAAA,QAAU,UACVA,EAAA,WAAa,aACbA,EAAA,MAAQ,QACRA,EAAA,SAAW,WACXA,EAAA,QAAU,UACVA,EAAA,OAAS,SACTA,EAAA,QAAU,UACVA,EAAA,YAAc,cACdA,EAAA,SAAW,WACXA,EAAA,GAAK,KAdGA,IAAAA,IAAA,CAAA,CAAA,ECuDAG,IAAAA,IACRA,EAAA,WAAa,aACbA,EAAA,eAAiB,iBACjBA,EAAA,gBAAkB,kBAHVA,IAAAA,IAAA,CAAA,CAAA,EAMAD,IAAAA,IACRA,EAAA,WAAa,kCACbA,EAAA,aAAe,qCACfA,EAAA,KAAO,qBACPA,EAAA,OAAS,wBACTA,EAAA,SAAW,yBACXA,EAAA,MAAQ,sBACRA,EAAA,QAAU,yBACVA,EAAA,MAAQ,sBARAA,IAAAA,IAAA,CAAA,CAAA,EAWC+B,GAAsB,CAC/B,kCAAmC,iBACnC,qCAAsC,iBACtC,qBAAsB,WACtB,wBAAyB,WACzB,yBAA0B,eAC1B,sBAAuB,YACvB,yBAA0B,YAC1B,sBAAuB,WAC3B,EAEYhC,IAAAA,IACRA,EAAA,uBAAyB,yBACzBA,EAAA,yBAA2B,2BAC3BA,EAAA,iBAAmB,mBACnBA,EAAA,mBAAqB,qBACrBA,EAAA,kBAAoB,oBACpBA,EAAA,qBAAuB,uBACvBA,EAAA,kBAAoB,oBACpBA,EAAA,oBAAsB,sBARdA,IAAAA,IAAA,CAAA,CAAA,EAWAoB,IAAAA,IACRA,EAAA,QAAU,UACVA,EAAA,IAAM,MACNA,EAAA,IAAM,MACNA,EAAA,IAAM,MACNA,EAAA,MAAQ,SALAA,IAAAA,IAAA,CAAA,CAAA,EA8RAH,IAAAA,IACRA,EAAA,SAAW,WACXA,EAAA,IAAM,MACNA,EAAA,SAAW,WAHHA,IAAAA,IAAA,CAAA,CAAA,EAMAC,IAAAA,IACRA,EAAA,SAAW,WACXA,EAAA,UAAY,YAFJA,IAAAA,IAAA,CAAA,CAAA,EAKAU,IAAAA,IACRA,EAAA,UAAY,YACZA,EAAA,WAAa,aAFLA,IAAAA,IAAA,CAAA,CAAA,EAuGAZ,IAAAA,IACRA,EAAA,SAAW,WACXA,EAAA,SAAW,WAFHA,IAAAA,IAAA,CAAA,CAAA,EChfMV,IAAAA,IACdA,EAAA,UAAY,YACZA,EAAA,KAAO,OACPA,EAAA,KAAO,OACPA,EAAA,GAAK,KACLA,EAAA,KAAO,OACPA,EAAA,SAAW,WACXA,EAAA,UAAY,YACZA,EAAA,KAAO,OACPA,EAAA,WAAa,aACbA,EAAA,MAAQ,QACRA,EAAA,QAAU,UACVA,EAAA,aAAe,eACfA,EAAA,UAAY,YACZA,EAAA,SAAW,WACXA,EAAA,KAAO,OACPA,EAAA,SAAW,WACXA,EAAA,UAAY,YACZA,EAAA,WAAa,aACbA,EAAA,aAAe,eACfA,EAAA,UAAY,YACZA,EAAA,KAAO,OACPA,EAAA,cAAgB,gBAChBA,EAAA,UAAY,YACZA,EAAA,WAAa,aACbA,EAAA,MAAQ,QACRA,EAAA,SAAW,WACXA,EAAA,SAAW,WACXA,EAAA,SAAW,WACXA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,SAAW,WACXA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,WAAa,aACbA,EAAA,UAAY,YACZA,EAAA,UAAY,YACZA,EAAA,UAAY,YACZA,EAAA,YAAc,cACdA,EAAA,YAAc,cACdA,EAAA,YAAc,cACdA,EAAA,SAAW,WACXA,EAAA,SAAW,WACXA,EAAA,SAAW,WACXA,EAAA,SAAW,WACXA,EAAA,YAAc,cAhDAA,IAAAA,IAAA,CAAA,CAAA,EAyFAQ,IAAAA,IACdA,EAAA,IAAM,MACNA,EAAA,QAAU,WAFIA,IAAAA,IAAA,CAAA,CAAA,ECrFNC,IAAAA,IACRA,EAAA,QAAU,UACVA,EAAA,KAAO,OACPA,EAAA,OAAS,SACTA,EAAA,MAAQ,QACRA,EAAA,MAAQ,QACRA,EAAA,IAAM,MANEA,IAAAA,IAAA,CAAA,CAAA,EA6FAkB,IAAAA,IACRA,EAAA,IAAM,MADEA,IAAAA,IAAA,CAAA,CAAA,EAIAF,IAAAA,IACRA,EAAA,gBAAkB,kBAClBA,EAAA,UAAY,YACZA,EAAA,gBAAkB,kBAClBA,EAAA,UAAY,YAJJA,IAAAA,IAAA,CAAA,CAAA,EAOAD,IAAAA,IACRA,EAAA,gCAAkC,kCAClCA,EAAA,gCAAkC,kCAClCA,EAAA,0BAA4B,4BAC5BA,EAAA,0BAA4B,4BAJpBA,IAAAA,IAAA,CAAA,CAAA,EAwBAT,IAAAA,IACRA,EAAA,MAAQ,QACRA,EAAA,UAAY,YACZA,EAAA,UAAY,YAHJA,IAAAA,IAAA,CAAA,CAAA,EAiFAQ,IAAAA,IACRA,EAAA,UAAY,YADJA,IAAAA,IAAA,CAAA,CAAA,EAIAtB,IAAAA,IACRA,EAAA,WAAa,aACbA,EAAA,MAAQ,QACRA,EAAA,MAAQ,QAHAA,IAAAA,IAAA,CAAA,CAAA,EAMAC,IAAAA,IACRA,EAAA,OAAS,SACTA,EAAA,QAAU,UAFFA,IAAAA,IAAA,CAAA,CAAA,EAKAW,IAAAA,IACRA,EAAA,OAAS,SACTA,EAAA,MAAQ,QACRA,EAAA,iBAAmB,mBAHXA,IAAAA,IAAA,CAAA,CAAA,ECpOAhB,IAAAA,IACRA,EAAA,IAAM,MACNA,EAAA,OAAS,SACTA,EAAA,KAAO,OACPA,EAAA,YAAc,cACdA,EAAA,IAAM,MACNA,EAAA,MAAQ,QACRA,EAAA,QAAU,UACVA,EAAA,OAAS,SACTA,EAAA,QAAU,UACVA,EAAA,OAAS,SACTA,EAAA,eAAiB,kBACjBA,EAAA,WAAa,cACbA,EAAA,cAAgB,iBAChBA,EAAA,mBAAqB,sBACrBA,EAAA,6BAA+B,iCAC/BA,EAAA,QAAU,WACVA,EAAA,WAAa,cACbA,EAAA,SAAW,YACXA,EAAA,eAAiB,mBACjBA,EAAA,kBAAoB,sBACpBA,EAAA,gBAAkB,mBAClBA,EAAA,uBAAyB,2BACzBA,EAAA,0BAA4B,8BAC5BA,EAAA,iCAAmC,sCACnCA,EAAA,kBAAoB,kBACpBA,EAAA,qBAAuB,qBACvBA,EAAA,sBAAwB,uBACxBA,EAAA,yBAA2B,0BAC3BA,EAAA,UAAY,YACZA,EAAA,oBAAsB,uBA9BdA,IAAAA,IAAA,CAAA,CAAA,ECEAL,IAAAA,IACRA,EAAA,OAAS,SACTA,EAAA,OAAS,SAFDA,IAAAA,IAAA,CAAA,CAAA,EC2JA6B,IAAAA,IACRA,EAAA,WAAa,aACbA,EAAA,YAAc,cACdA,EAAA,aAAe,eAHPA,IAAAA,IAAA,CAAA,CAAA,EAMAlB,IAAAA,IACRA,EAAA,IAAM,MADEA,IAAAA,IAAA,CAAA,CAAA,EC/IAJ,IAAAA,IACRA,EAAA,OAAS,SADDA,IAAAA,IAAA,CAAA,CAAA,ECPCK,GAAiB,gCACjBG,GAA6B,2CAC7BD,GAA6B,2CAC7BD,GAAqB,mDC0BrBY,GAAwB,wBACxBD,GAA8B,8BAW9BI,GAAoC,wDACpCD,GAAoC,2DACpCD,GACT,2ECNQpB,IAAAA,IACRA,EAAA,MAAQ,QACRA,EAAA,UAAY,YAFJA,IAAAA,IAAA,CAAA,CAAA,mcCnDZgC,GAAA,CAAA,EAAAC,GAAAD,GAAA,CAAA,aAAA,IAAAE,GAAA,yBAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,iBAAA,IAAAC,GAAA,eAAA,IAAAC,GAAA,mBAAA,IAAAC,GAAA,2BAAA,IAAAC,GAAA,2BAAA,IAAAC,GAAA,2BAAA,IAAAC,GAAA,uBAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,UAAA,IAAAC,GAAA,4BAAA,IAAAC,GAAA,wBAAA,IAAAC,GAAA,kBAAA,IAAAC,GAAA,gBAAA,IAAAC,GAAA,kBAAA,IAAAC,GAAA,WAAA,IAAAC,GAAA,cAAA,IAAAC,GAAA,sBAAA,IAAAC,GAAA,YAAA,IAAAC,GAAA,gCAAA,IAAAC,GAAA,gCAAA,IAAAC,EAAAA,CAAAA,EAAAC,GAAA,QAAAC,GAAA3B,EAAAA,ECSO,IAAKqB,IAAAA,IACRA,EAAA,MAAQ,QACRA,EAAA,KAAO,OACPA,EAAA,OAAS,SACTA,EAAA,KAAO,OAJCA,IAAAA,IAAA,CAAA,CAAA,EAOAE,IAAAA,IACRA,EAAA,gBAAkB,kBAClBA,EAAA,UAAY,YAFJA,IAAAA,IAAA,CAAA,CAAA,EAQAV,IAAAA,IACRA,EAAA,SAAW,WACXA,EAAA,QAAU,UACVA,EAAA,KAAO,OAHCA,IAAAA,IAAA,CAAA,CAAA,EAMAT,IAAAA,IACRA,EAAA,QAAU,UACVA,EAAA,UAAY,YACZA,EAAA,KAAO,OAHCA,IAAAA,IAAA,CAAA,CAAA,EC9BAgB,IAAAA,IACRA,EAAA,OAAS,SACTA,EAAA,MAAQ,QAFAA,IAAAA,IAAA,CAAA,CAAA,ECAMf,IAAAA,IACdA,EAAA,0BAAA,EAA6B,2BADfA,IAAAA,IAAA,CAAA,CAAA,ECANY,IAAAA,IACRA,EAAA,KAAO,OACPA,EAAA,KAAO,OAFCA,IAAAA,IAAA,CAAA,CAAA,ECgFAC,IAAAA,IACRA,EAAA,MAAQ,QACRA,EAAA,OAAS,SAFDA,IAAAA,IAAA,CAAA,CAAA,EAKAf,IAAAA,IACRA,EAAA,IAAM,MADEA,IAAAA,IAAA,CAAA,CAAA,ECvDAmB,IAAAA,IACRA,EAAA,QAAU,UACVA,EAAA,OAAS,SAFDA,IAAAA,IAAA,CAAA,CAAA,ECoCChB,GAAiB,mBACjBE,GAA6B,kBAC7BE,GAA6B,8BAC7BD,GAA6B,8BAC7BF,GAAqB,sCAgBrBS,GAA0B,cAS3BG,IAAAA,IACRA,EAAA,WAAa,aACbA,EAAA,YAAc,cAFNA,IAAAA,IAAA,CAAA,CAAA,ECnBCR,GAAyB,uBAczBI,GAA8B,QCzF/BD,IAAAA,IACRA,EAAA,MAAQ,QACRA,EAAA,OAAS,SAFDA,IAAAA,IAAA,CAAA,CAAA,EA0DAZ,IAAAA,IACRA,EAAA,QAAY,UACZA,EAAA,WAAe,aACfA,EAAA,OAAW,SAHHA,IAAAA,IAAA,CAAA,CAAA,EAMAU,IAAAA,IACRA,EAAA,MAAU,QACVA,EAAA,OAAW,SACXA,EAAA,IAAQ,MAHAA,IAAAA,IAAA,CAAA,CAAA,ECxDAa,IAAAA,IACRA,EAAA,KAAO,OACPA,EAAA,QAAU,UAFFA,IAAAA,IAAA,CAAA,CAAA,ECNAD,IAAAA,IACRA,EAAA,KAAO,OACPA,EAAA,QAAU,UACVA,EAAA,KAAO,OAHCA,IAAAA,IAAA,CAAA,CAAA,m2BCHZI,GAAA,KAAAC,EAAA,EACAD,GAAA,KAAAC,EAAA,EACAA,GAAA,GAAAC,GAAA,IAAA,EACAD,GAAA,GAAAC,GAAA,IAAA,ICHA,IAAAC,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAoBC,EAAA,SAA2BC,EAAO,CACzD,OAAOC,GAAgBD,CAAK,GACxB,CAACE,GAAUF,CAAK,CACrB,EAHwB,qBAKxB,SAASC,GAAgBD,EAAO,CAC/B,MAAO,CAAC,CAACA,GAAS,OAAOA,GAAU,QACpC,CAFSD,EAAAE,GAAA,mBAIT,SAASC,GAAUF,EAAO,CACzB,IAAIG,EAAc,OAAO,UAAU,SAAS,KAAKH,CAAK,EAEtD,OAAOG,IAAgB,mBACnBA,IAAgB,iBAChBC,GAAeJ,CAAK,CACzB,CANSD,EAAAG,GAAA,aAST,IAAIG,GAAe,OAAO,QAAW,YAAc,OAAO,IACtDC,GAAqBD,GAAe,OAAO,IAAI,eAAe,EAAI,MAEtE,SAASD,GAAeJ,EAAO,CAC9B,OAAOA,EAAM,WAAaM,EAC3B,CAFSP,EAAAK,GAAA,kBAIT,SAASG,GAAYC,EAAK,CACzB,OAAO,MAAM,QAAQA,CAAG,EAAI,CAAC,EAAI,CAAC,CACnC,CAFST,EAAAQ,GAAA,eAIT,SAASE,GAA8BT,EAAOU,EAAS,CACtD,OAAQA,EAAQ,QAAU,IAASA,EAAQ,kBAAkBV,CAAK,EAC/DW,GAAUJ,GAAYP,CAAK,EAAGA,EAAOU,CAAO,EAC5CV,CACJ,CAJSD,EAAAU,GAAA,iCAMT,SAASG,GAAkBC,EAAQC,EAAQJ,EAAS,CACnD,OAAOG,EAAO,OAAOC,CAAM,EAAE,IAAI,SAASC,EAAS,CAClD,OAAON,GAA8BM,EAASL,CAAO,CACtD,CAAC,CACF,CAJSX,EAAAa,GAAA,qBAMT,SAASI,GAAiBC,EAAKP,EAAS,CACvC,GAAI,CAACA,EAAQ,YACZ,OAAOC,GAER,IAAIO,EAAcR,EAAQ,YAAYO,CAAG,EACzC,OAAO,OAAOC,GAAgB,WAAaA,EAAcP,EAC1D,CANSZ,EAAAiB,GAAA,oBAQT,SAASG,GAAgCN,EAAQ,CAChD,OAAO,OAAO,sBACX,OAAO,sBAAsBA,CAAM,EAAE,OAAO,SAASO,EAAQ,CAC9D,OAAO,OAAO,qBAAqB,KAAKP,EAAQO,CAAM,CACvD,CAAC,EACC,CAAC,CACL,CANSrB,EAAAoB,GAAA,mCAQT,SAASE,GAAQR,EAAQ,CACxB,OAAO,OAAO,KAAKA,CAAM,EAAE,OAAOM,GAAgCN,CAAM,CAAC,CAC1E,CAFSd,EAAAsB,GAAA,WAIT,SAASC,GAAmBC,EAAQC,EAAU,CAC7C,GAAI,CACH,OAAOA,KAAYD,CACpB,MAAW,CACV,MAAO,EACR,CACD,CANSxB,EAAAuB,GAAA,sBAST,SAASG,GAAiBZ,EAAQI,EAAK,CACtC,OAAOK,GAAmBT,EAAQI,CAAG,GACjC,EAAE,OAAO,eAAe,KAAKJ,EAAQI,CAAG,GACvC,OAAO,qBAAqB,KAAKJ,EAAQI,CAAG,EAClD,CAJSlB,EAAA0B,GAAA,oBAMT,SAASC,GAAYb,EAAQC,EAAQJ,EAAS,CAC7C,IAAIiB,EAAc,CAAC,EACnB,OAAIjB,EAAQ,kBAAkBG,CAAM,GACnCQ,GAAQR,CAAM,EAAE,QAAQ,SAASI,EAAK,CACrCU,EAAYV,CAAG,EAAIR,GAA8BI,EAAOI,CAAG,EAAGP,CAAO,CACtE,CAAC,EAEFW,GAAQP,CAAM,EAAE,QAAQ,SAASG,EAAK,CACjCQ,GAAiBZ,EAAQI,CAAG,IAI5BK,GAAmBT,EAAQI,CAAG,GAAKP,EAAQ,kBAAkBI,EAAOG,CAAG,CAAC,EAC3EU,EAAYV,CAAG,EAAID,GAAiBC,EAAKP,CAAO,EAAEG,EAAOI,CAAG,EAAGH,EAAOG,CAAG,EAAGP,CAAO,EAEnFiB,EAAYV,CAAG,EAAIR,GAA8BK,EAAOG,CAAG,EAAGP,CAAO,EAEvE,CAAC,EACMiB,CACR,CAnBS5B,EAAA2B,GAAA,eAqBT,SAASf,GAAUE,EAAQC,EAAQJ,EAAS,CAC3CA,EAAUA,GAAW,CAAC,EACtBA,EAAQ,WAAaA,EAAQ,YAAcE,GAC3CF,EAAQ,kBAAoBA,EAAQ,mBAAqBZ,GAGzDY,EAAQ,8BAAgCD,GAExC,IAAImB,EAAgB,MAAM,QAAQd,CAAM,EACpCe,EAAgB,MAAM,QAAQhB,CAAM,EACpCiB,EAA4BF,IAAkBC,EAElD,OAAKC,EAEMF,EACHlB,EAAQ,WAAWG,EAAQC,EAAQJ,CAAO,EAE1CgB,GAAYb,EAAQC,EAAQJ,CAAO,EAJnCD,GAA8BK,EAAQJ,CAAO,CAMtD,CAnBSX,EAAAY,GAAA,aAqBTA,GAAU,IAAMZ,EAAA,SAAsBgC,EAAOrB,EAAS,CACrD,GAAI,CAAC,MAAM,QAAQqB,CAAK,EACvB,MAAM,IAAI,MAAM,mCAAmC,EAGpD,OAAOA,EAAM,OAAO,SAASC,EAAMC,EAAM,CACxC,OAAOtB,GAAUqB,EAAMC,EAAMvB,CAAO,CACrC,EAAG,CAAC,CAAC,CACN,EARgB,gBAUhB,IAAIwB,GAAcvB,GAElBd,GAAO,QAAUqC,sVC1HjB,IAAAC,GAAA,QAAA,oDAAA,EAAS,OAAA,eAAAC,GAAA,aAAA,CAAA,WAAA,GAAA,IAAA,UAAA,CAAA,OAAAD,GAAA,UAAU,CAAA,CAAA,EACnB,IAAAE,GAAA,QAAA,qDAAA,EAAS,OAAA,eAAAD,GAAA,cAAA,CAAA,WAAA,GAAA,IAAA,UAAA,CAAA,OAAAC,GAAA,WAAW,CAAA,CAAA,EACpB,IAAAC,GAAA,QAAA,8DAAA,EAAS,OAAA,eAAAF,GAAA,oBAAA,CAAA,WAAA,GAAA,IAAA,UAAA,CAAA,OAAAE,GAAA,oBAAoB,CAAA,CAAA,EAO7B,SAASC,GAAQC,EAAgBC,EAAa,CAC1C,OAAOA,EAAQ,EAAI,CAACD,EAAQ,EAAE,EAAI,CAACA,EAAO,UAAU,EAAGC,CAAK,EAAGD,EAAO,UAAUC,EAAQ,CAAC,CAAC,CAC9F,CAFSC,EAAAH,GAAA,WAIT,SAASI,GAAYH,EAAgBC,EAAa,CAC9C,OAAOA,EAAQ,EAAID,EAASA,EAAO,UAAU,EAAGC,CAAK,CACzD,CAFSC,EAAAC,GAAA,eAWT,SAAgBC,GAAaJ,EAAgBK,EAAiB,CAC1D,OAAON,GAAQC,EAAQA,EAAO,QAAQK,CAAS,CAAC,CACpD,CAFgBH,EAAAE,GAAA,gBAAhBR,GAAA,aAAAQ,GAWA,SAAgBE,GAAYN,EAAgBK,EAAiB,CACzD,OAAON,GAAQC,EAAQA,EAAO,YAAYK,CAAS,CAAC,CACxD,CAFgBH,EAAAI,GAAA,eAAhBV,GAAA,YAAAU,GAWA,SAAgBC,GAAqBP,EAAgBK,EAAiB,CAClE,OAAOF,GAAYH,EAAQA,EAAO,QAAQK,CAAS,CAAC,CACxD,CAFgBH,EAAAK,GAAA,wBAAhBX,GAAA,qBAAAW,GAWA,SAAgBC,GAAoBR,EAAgBK,EAAiB,CACjE,OAAOF,GAAYH,EAAQA,EAAO,YAAYK,CAAS,CAAC,CAC5D,CAFgBH,EAAAM,GAAA,uBAAhBZ,GAAA,oBAAAY,GAWA,SAAgBC,GAAMC,EAA+BC,EAAsB,CAOvE,GANKD,EAAW,sBACZA,EAAW,oBAAsBA,EAAW,OAAO,CAACE,EAAgCC,KAChFD,EAAIC,EAAI,SAAS,EAAIA,EACdD,GACR,CAAA,CAAE,GAEL,CAACD,EACD,OAAOA,EAEX,GAAM,CAACG,EAAWC,CAAK,EAAIT,GAAYK,EAAgB,GAAG,EACpDK,EAAYN,EAAW,oBAAoBI,CAAS,EAC1D,GAAIE,EACA,MAAO,GAAGA,EAAU,KAAK,IAAID,CAAK,GAC/B,GAAIJ,EAAe,SAAS,GAAG,EAAG,CAErC,GAAM,CAACM,EAAUC,CAAS,EAAId,GAAaO,EAAgB,GAAG,EAC9D,MAAO,GAAGM,CAAQ,IAAIR,GAAMC,EAAYQ,CAAS,CAAC,OAElD,QAAOP,CAEf,CArBgBT,EAAAO,GAAA,SAAhBb,GAAA,MAAAa,GA+BA,SAAgBU,GACZT,EACAU,EACAN,EAAkB,OAElB,IAAMO,EAAWnB,EAACa,GAAiB,CAC1BL,EAAW,eACZA,EAAW,aAAe,OAAO,YAAYA,EAAW,IAAKG,GAAQ,CAACA,EAAI,MAAOA,CAAG,CAAC,CAAC,GAI1F,GAAM,CAACS,EAAYC,CAAI,EAAInB,GAAaW,EAAO,GAAG,EAElD,GAAI,CAACQ,GAAQA,EAAK,SAAS,GAAG,EAE1B,OAAOR,EAGX,IAAMS,EAAeF,EAAW,WAAW,GAAG,EACxCG,EAAiBD,EAAeF,EAAW,UAAU,CAAC,EAAIA,EAC1DI,EAAiBhB,EAAW,aAAae,CAAc,EAC7D,OAAIC,EACOF,EAAe,IAAIE,EAAe,SAAS,IAAIH,CAAI,GAAK,GAAGG,EAAe,SAAS,IAAIH,CAAI,GAI/FT,GAAa,CAACU,EAAe,GAAGV,CAAS,IAAIS,CAAI,GAAKR,CACjE,EAtBiB,YAwBjB,OAAOY,EAAAP,GAAY,KAAA,OAAZA,EACD,MAAM,GAAG,EACV,OAAO,CAACQ,EAAUC,IAAW,CAE1B,GAAM,CAACC,EAAOP,CAAI,EAAInB,GAAayB,EAAS,GAAG,EACzCE,EAAa,CAACV,EAASS,CAAK,CAAC,EAEnC,GAAIP,EAAM,CACN,IAAMS,EAAYT,EAAK,MAAM,EAAG,EAAE,EAClCQ,EAAW,KAAK,IAAIV,EAASW,CAAS,CAAC,GAAG,EAE9C,OAAAJ,EAAS,KAAKG,EAAW,KAAK,EAAE,CAAC,EAE1BH,CACX,EAAG,CAAA,CAAc,KAAC,MAAAD,IAAA,OAAA,OAAAA,EAChB,KAAK,GAAG,CAClB,CA7CgBzB,EAAAiB,GAAA,WAAhBvB,GAAA,QAAAuB,GAqDA,SAAgBc,GACZC,EAAoD,CAEpD,MACI,CAAC,CAACA,GAAyBA,EAAsB,QAAU,eAAiB,CAAC,CAACA,EAAsB,UAE5G,CANgBhC,EAAA+B,GAAA,2BAAhBrC,GAAA,wBAAAqC,GAQA,SAAgBE,GAAQpB,EAAa,CACjC,MAAO,CACH,WAAS,CACL,MAAO,EACX,EACA,SAAO,CACH,OAAOA,CACX,EACA,UAAQ,CACJ,OAAOA,EAAM,SAAQ,CACzB,EAER,CAZgBb,EAAAiC,GAAA,WAAhBvC,GAAA,QAAAuC,GAuBA,SAAgBC,GAAmCC,EAAcC,EAAeC,EAAqB,CACjG,IAAMC,EAAU,OAAO,SAAS,EAC5BC,EAAqCD,EAEzC,OAAO,eAAeH,EAAQC,EAAU,CACpC,WAAY,GAEZ,KAAG,CACC,OAAIG,IAAWD,IACXC,EAASF,EAAI,GAEVE,CACX,EAEA,IAAI1B,EAAgB,CAChB0B,EAAS1B,CACb,EACH,CACL,CAlBgBb,EAAAkC,GAAA,QAAhBxC,GAAA,KAAAwC,GA2BA,SAAgBM,GAAqBC,EAAiBL,EAAiB,CACnE,IAAMrC,EAAwC,IAAI,IAElD,OAAOC,EAAA,SAAca,EAAiB,CAClC,IAAM6B,EAAU3C,EAAM,IAAIc,CAAK,EAE/B,OAAI6B,GAAO,KAAA,OAAPA,EAAUN,CAAQ,KAAMvB,EACjB6B,EAGJD,EAAM,KAAMC,GAAW,CAC1B,GAAI,EAACA,GAAO,MAAPA,EAAS,eAAeN,CAAQ,GACjC,MAAO,GAGX,IAAMO,EAAgBD,EAAQN,CAAQ,EACtC,OAAArC,EAAM,IAAI4C,EAAeD,CAAO,EACzBC,IAAkB9B,CAC7B,CAAC,CACL,EAhBO,OAiBX,CApBgBb,EAAAwC,GAAA,qBAAhB9C,GAAA,kBAAA8C,GAgCA,SAAgBI,GAAqDH,EAAiBL,EAAW,CAC7F,IAAMS,EAA+B,MAAMT,CAAQ,GAEnD,GAAI,CAACK,EAAM,eAAeI,CAAS,EAC/B,OAAO,eAAeJ,EAAOI,EAAW,CAAE,SAAU,GAAO,MAAOL,GAAkBC,EAAOL,CAAQ,CAAC,CAAE,MAEtG,OAAM,IAAI,MAAM,aAAaS,CAAS,kBAAkB,EAE5D,OAAOJ,CACX,CATgBzC,EAAA4C,GAAA,iBAAhBlD,GAAA,cAAAkD,GAkBA,SAAgBE,GACZtC,KACGuC,EAAuE,CAE1E,OAAOA,EAAkB,YAAY,CAACC,EAAQ,CAAE,KAAAC,EAAM,eAAAC,CAAc,IAAM,OACtE,OAAW,CAAE,OAAAC,EAAQ,YAAAC,CAAW,IAAMF,EAAgB,CAClD,IAAMG,GAAmB5B,EAAAR,GAAQT,EAAY2C,CAAM,KAAC,MAAA1B,IAAA,OAAAA,EAAI0B,EACnDH,EAAOK,CAAgB,IACxBL,EAAOK,CAAgB,EAAI,CAAA,GAG/B,IAAMC,EAAsBF,EACvB,IAAKG,GAA6B,OAC/B,OAAAA,EAAc,MAAO9B,EAAAR,GAAQT,EAAY+C,EAAc,IAAI,KAAC,MAAA9B,IAAA,OAAAA,EAAI8B,EAAc,KAE7EA,EAAsB,mBAAqBA,EAAc,UACpD,GAAGF,CAAgB,IAAIE,EAAc,IAAI,IAAIA,EAAc,SAAS,GACpE,GAAGF,CAAgB,IAAIE,EAAc,IAAI,GAE9CA,EAAsB,SAAWN,EAE3BM,CACX,CAAC,EACA,OACIC,GACG,CAACR,EAAOK,CAAgB,EAAE,KACrBI,GACGA,EAAmB,OAASD,EAAW,MACvCC,EAAmB,YAAcD,EAAW,SAAS,CAC5D,EAGbR,EAAOK,CAAgB,EAAE,KAAK,GAAGC,CAAmB,EAGxD,OAAON,CACX,EAAG,CAAA,CAAkC,CACzC,CArCgBhD,EAAA8C,GAAA,oBAAhBpD,GAAA,iBAAAoD,qGCrOA,IAAAY,GAAA,QAAA,8DAAA,EACAC,GAAA,KAkBMC,GAAoB,OAAO,mBAAmB,EASpD,SAASC,GAAiBC,EAAmBC,EAAkB,CAC3D,OAAID,EAAWA,EAAW,OAAS,CAAC,IAAMC,GACtCD,EAAW,KAAKC,CAAa,EAE1BD,CACX,CALSE,EAAAH,GAAA,oBAgBT,SAASI,GACLC,EACAC,EACAC,EACAC,EAAwB,aAExB,GAAID,IAAS,OACT,MAAO,CAAE,OAAQ,OAAW,WAAY,CAAA,EAAI,SAAU,CAAA,CAAE,EAIxDA,EAAK,WAAW,GAAG,IACnBA,EAAOA,EAAK,UAAU,CAAC,EACvBD,EAAe,QAGnB,IAAMG,EAAeF,EAAK,MAAM,GAAG,EAAE,OAAO,CAACG,EAAYC,IAAW,CAChE,GAAIA,EAAQ,SAAS,GAAG,EAAG,CAEvB,GAAM,CAACC,EAAUC,CAAc,KAAIf,GAAA,cAAaa,EAAS,GAAG,EAC5DD,EAAW,KAAKE,CAAQ,EACxBF,EAAW,KAAK,IAAIG,CAAc,EAAE,OAEpCH,EAAW,KAAKC,CAAO,EAE3B,OAAOD,CACX,EAAG,CAAA,CAAc,EAGjB,GAAIJ,IAAiB,OAGbG,EAAa,CAAC,EAAE,WAAW,GAAGJ,EAAU,UAAU,SAAS,GAAG,GAC9DI,EAAa,CAAC,MAAMK,EAAAT,EAAU,4BAA2B,KAAE,MAAAS,IAAA,OAAA,OAAAA,EAAE,qBAG7DR,GACIS,GAAAC,EAAAX,EAAU,uBAAuBI,EAAa,CAAC,CAAC,KAAC,MAAAO,IAAA,OAAAA,EACjDX,EAAU,wBAAwBI,EAAa,CAAC,CAAC,KAAC,MAAAM,IAAA,OAAAA,EAClDV,EAAU,mBAAmBI,EAAa,CAAC,CAAC,EAChDA,EAAa,MAAK,GAElBH,EAAeD,EAAU,4BAA2B,UAEjDC,EAAaP,EAAiB,IAAM,OAE3CO,EAAeA,EAAaP,EAAiB,UACtCO,EAAa,QAAU,WAAY,CAE1C,IAAMW,KAAmBnB,GAAA,sBAAqBQ,EAAa,mBAAoB,GAAG,EAClFA,GACIY,EAAAb,EAAU,uBAAuBY,CAAgB,KAAC,MAAAC,IAAA,OAAAA,EAAIb,EAAU,wBAAwBY,CAAgB,EAGhH,IAAME,EAASV,EAAa,OACxB,CAACW,EAAgCT,IAAmB,eAChD,IAAMU,EAAQlB,EAACmB,IACXF,EAAQ,SAAS,KAAK,CAAE,QAAAE,CAAO,CAAE,EACjCF,EAAQ,OAAS,OACVA,GAHG,SAMd,GAAIA,EAAQ,SAAW,OACnB,OAAOA,EAMX,GAHAA,EAAQ,WAAapB,GAAiBoB,EAAQ,WAAYA,EAAQ,MAAM,EAGpET,EAAQ,WAAW,GAAG,GAAKA,IAAY,iBAAkB,CACzD,GAAM,CAACY,EAAiBC,CAAI,EAAInB,EAAU,UAAUM,CAAO,EACrDc,GAAaX,EAAAM,EAAQ,OAAO,YAAYG,EAAgB,UAAU,CAAC,CAAC,KAAC,MAAAT,IAAA,OAAA,OAAAA,EAAGU,CAAI,EAElF,OAAIC,IAAe,QACfL,EAAQ,OAASK,EACVL,GAEJC,EACH,eAAeV,EAAQ,UAAU,CAAC,CAAC,kBAAkBS,EAAQ,OAAO,KAAK,KACrEA,EAAQ,OAAO,kBACnB,GAAG,EAKX,GAAIA,EAAQ,OAAO,QAAS,CACxB,IAAIM,EAOJ,GANIf,IAAY,kBACZe,EAAUN,EAAQ,OAAO,MAClBT,IAAY,UACnBe,EAAUN,EAAQ,OAAO,MAGzBM,IAAY,OAAW,CACvB,IAAMC,EAAYvB,GAAcC,EAAWe,EAAQ,OAAOrB,EAAiB,EAAG2B,CAAO,EACrF,OAAAC,EAAU,WAAW,QAASC,GAAyB,CAC9CR,EAAQ,WAAW,SAASQ,CAAgB,IAC7CR,EAAQ,WAAapB,GAAiBoB,EAAQ,WAAYQ,CAAgB,EAElF,CAAC,EAEDR,EAAQ,OAASO,EAAU,OAC3BP,EAAQ,WAAapB,GAAiBoB,EAAQ,WAAYA,EAAQ,MAAM,EACjEA,GAKf,QAAQJ,EAAAI,EAAQ,UAAM,MAAAJ,IAAA,OAAA,OAAAA,EAAE,MAAO,CAC3B,IAAK,SAGD,MACJ,IAAK,kBACD,CACI,IAAMa,EAAcT,EAAQ,OAE5B,GAAIT,IAAY,IAAMN,EAAU,QAAQM,CAAO,IAAMkB,EAAY,mBAC7D,OAAOT,EAIX,IAAMU,GACFZ,GAAAH,EAAAc,EAAY,WAAW,QAAQlB,CAAO,KAAC,MAAAI,IAAA,OAAAA,EACvCc,EAAY,WAAW,QAAQlB,CAAO,KAAC,MAAAO,IAAA,OAAAA,EACvCW,EAAY,cAAc,QAAQlB,CAAO,EAE7C,GAAImB,EACA,OAAAV,EAAQ,OAASU,EACVV,EAGf,MAEJ,IAAK,YACL,IAAK,YAAa,CACd,IAAMS,EAAcT,EAAQ,OAE5B,GAAIT,IAAY,IAAMA,IAAY,QAE9B,OAAAS,EAAQ,OAASS,EAAY,WACtBT,EAGX,GAAIT,IAAY,IACZ,OAAOS,EAGX,GAAIT,IAAY,6BAA8B,CAC1C,IAAMoB,EAA6BF,EAAY,0BAC/C,OAAAT,EAAQ,OAASW,EACVX,EAIX,IAAMD,EAASf,GAAcC,EAAWwB,EAAY,WAAYlB,CAAO,EACvE,OAAAS,EAAQ,OAASD,EAAO,OACxBC,EAAQ,WAAaD,EAAO,WAAW,OAAOnB,GAAkBoB,EAAQ,UAAU,EAC3EA,EAGX,IAAK,aACD,CACI,IAAMS,EAAcT,EAAQ,OAE5B,GAAIT,IAAY,IAAMA,IAAY,QAC9B,OAAOS,EAGX,IAAMY,EAAWH,EAAY,iBAAiB,QAAQlB,CAAO,EAC7D,GAAIqB,EACA,OAAAZ,EAAQ,OAASY,EACVZ,EAGX,IAAMa,EAAqBJ,EAAY,qBAAqB,QAAQlB,CAAO,EAC3E,GAAIsB,EACA,OAAAb,EAAQ,OAASa,EACVb,EAGX,IAAMc,MAAapC,GAAA,sBAAqBO,EAAU,QAAQM,CAAO,EAAG,GAAG,EACjEwB,EAASN,EAAY,QAAQK,EAAU,EAC7C,GAAIC,EACA,OAAAf,EAAQ,OAASe,EACVf,EAGf,MAEJ,IAAK,eAAgB,CAEjB,IAAMD,EAASf,GAAcC,EAAWe,EAAQ,OAAO,OAAQT,CAAO,EACtE,OAAAS,EAAQ,OAASD,EAAO,OACxBC,EAAQ,WAAaD,EAAO,WAAW,OAAOnB,GAAkBoB,EAAQ,UAAU,EAC3EA,EAGX,IAAK,SAAU,CACX,IAAMS,EAAcT,EAAQ,OAM5B,GAJIT,IAAY,IAIZA,IAAY,kBAAoBA,IAAY,IAC5C,OAAOS,EAGX,GAAIT,IAAY,cAAgBkB,EAAY,QACxC,OAAAT,EAAQ,OAASS,EAAY,WACtBT,EAGX,IAAMU,GACFM,EAAAP,EAAY,WAAWlB,CAAc,KAAC,MAAAyB,IAAA,OAAAA,EACtCP,EAAY,WAAW,KAAMQ,GAA2BA,EAAM,OAAS1B,CAAO,EAElF,GAAImB,EACA,OAAAV,EAAQ,OAASU,EACVV,EAEX,MAGJ,IAAK,WACD,CAII,IAAMkB,EAHclB,EAAQ,OAGH,WACzB,GAAIkB,IAAS,OAAW,CACpB,IAAMN,EAAWM,EAAK,WAAW,QAAQ3B,CAAO,EAChD,GAAIqB,EACA,OAAAZ,EAAQ,OAASY,EACVZ,EAGX,IAAMa,GAAqBK,EAAK,qBAAqB,QAAQ3B,CAAO,EACpE,GAAIsB,GACA,OAAAb,EAAQ,OAASa,GACVb,GAInB,MAEJ,IAAK,kBACD,IAAMmB,EAAkBnB,EAAQ,OAA2B,cAC3D,GAAImB,IAAmB,OAAW,CAC9B,IAAMpB,EAASf,GAAcC,EAAWkC,EAAgB5B,CAAO,EAC/D,OAAAS,EAAQ,OAASD,EAAO,OACxBC,EAAQ,WAAaD,EAAO,WAAW,OAAOnB,GAAkBoB,EAAQ,UAAU,EAC3EA,EAEX,MAEJ,IAAK,qBAED,IAAMD,EAASf,GAAcC,EAAYe,EAAQ,OAA8B,WAAYT,CAAO,EAClG,OAAAS,EAAQ,OAASD,EAAO,OACxBC,EAAQ,WAAaD,EAAO,WAAW,OAAOnB,GAAkBoB,EAAQ,UAAU,EAC3EA,EAEX,QACI,GAAIT,IAAY,GACZ,OAAOS,EAGX,GAAIA,EAAQ,OAAOT,CAAO,EACtB,OAAAS,EAAQ,OAASA,EAAQ,OAAOT,CAAO,EACvCS,EAAQ,WAAapB,GAAiBoB,EAAQ,WAAYA,EAAQ,MAAM,EACjEA,EAInB,OAAOC,EACH,YAAYV,CAAO,kBAAkBS,EAAQ,OAAO,KAAK,KAAKA,EAAQ,OAAO,kBAAkB,GAAG,CAE1G,EACA,CAAE,OAAQd,EAAc,WAAY,CAAA,EAAI,SAAU,CAAA,CAAE,CAAE,EAK1D,GADAa,EAAO,SAAS,QAASG,GAAYjB,EAAU,SAASiB,EAAQ,OAAO,CAAC,EACpE,CAACH,EAAO,OACR,GAAIX,EAAiB,CACjB,IAAMgC,EAAiBC,GAAkBpC,EAAWG,EAAiBF,EAAa,kBAAkB,EACpGD,EAAU,SACN;EAEIE,EACA;;;;qBAIAC,EACA;iBAGAgC,EACA;oBAGAjC,EACA,GAAG,OAGXF,EAAU,SACN,0CACIE,EACA;;;;qBAIAE,EAAa,CAAC,EACd;wBAGAA,EAAa,CAAC,EACd,GAAG,EAKnB,OAAOU,CACX,CAtUShB,EAAAC,GAAA,iBA8UT,SAASsC,GAAiBC,EAAe,CACrC,OAAOA,EAAQ,SAAS,GAAG,CAC/B,CAFSxC,EAAAuC,GAAA,oBAMT,SAASE,GACLvC,EACAwC,EACAC,EACAC,EACAC,EAAmB,CAEnB,IAAM7B,EAAyD,CAC3D,KAAM,eACN,MAAO0B,EAAa,aACpB,mBAAoBC,EACpB,CAAC/C,EAAiB,EAAGgD,GAGzB,SAAAjD,GAAA,MACIqB,EACA,UACA,IAAMf,GAAwBC,EAAW0C,EAAeF,EAAa,aAAcG,CAAW,EAAE,MAAM,EAGnG7B,CACX,CArBShB,EAAAyC,GAAA,mBAuBT,SAASK,GACL5C,EACA6C,EACAJ,EACAC,EACAC,EAAmB,CAEnB,IAAM7B,EAAgE,CAClE,KAAM,iBACN,MAAOd,EAAU,QAAQ6C,EAAe,cAAc,EACtD,mBAAoBJ,EACpB,CAAC/C,EAAiB,EAAGgD,GAGzB,SAAAjD,GAAA,MACIqB,EACA,UACA,IAAMf,GAAcC,EAAW0C,EAAe5B,EAAO,MAAO6B,CAAW,EAAE,MAAM,EAG5E7B,CACX,CArBShB,EAAA8C,GAAA,qBAuBT,SAASE,GACL9C,EACA+C,EACAN,EACAC,EACAC,EAAmB,OAEnB,IAAM7B,EAAmE,CACrE,KAAM,yBACN,OAAOL,EAAAsC,EAAuB,0BAAsB,MAAAtC,IAAA,OAAAA,EAAI,GACxD,mBAAoBgC,EACpB,CAAC/C,EAAiB,EAAGgD,GAGzB,SAAAjD,GAAA,MACIqB,EACA,UACA,IACIf,GACIC,EACA0C,EACAK,EAAuB,uBACvBJ,CAAW,EACb,MAAM,EAGT7B,CACX,CA3BShB,EAAAgD,GAAA,6BA6BT,SAASE,GACLhD,EACAE,EACAuC,EACAC,EACAC,EAAmB,CAEnB,IAAM7B,EAA0E,CAC5E,KAAM,OACN,KAAMZ,EAAK,KACX,mBAAoBuC,EACpB,UAAQ,CAER,EACA,CAAC/C,EAAiB,EAAGgD,GAGzB,SAAAjD,GAAA,MACIqB,EACA,UACA,IAAMf,GAAwBC,EAAW0C,EAAexC,EAAK,KAAMyC,CAAW,EAAE,MAAM,EAGnF7B,CACX,CAxBShB,EAAAkD,GAAA,WA0BT,SAASC,GACLjD,EACA0C,EACAC,EACAO,EACAC,EACAC,EACAC,EAAgB,CAEhB,GAAID,IAAkB,OAGtB,OAAQA,EAAc,KAAM,CACxB,IAAK,SACD,OAAOA,EAAc,OACzB,IAAK,MACD,OAAOA,EAAc,IACzB,IAAK,OACD,OAAOA,EAAc,KACzB,IAAK,UACD,SAAO3D,GAAA,SAAQ2D,EAAc,OAAO,EACxC,IAAK,OACD,OAAOA,EAAc,KACzB,IAAK,aACD,IAAME,EAAYF,EAAc,WAAW,MAAM,GAAG,EAAE,IAAKG,GAAa,OACpE,IAAMC,GAAY/C,EAAAT,EAAU,QAAQuD,CAAS,KAAC,MAAA9C,IAAA,OAAAA,EAAI,GAClD,SAAOhB,GAAA,OAAMD,GAAA,qBAAsBgE,CAAS,CAChD,CAAC,EACD,OAAIF,EAAU,CAAC,IAAM,QAAa7D,GAAA,cAAWA,GAAA,sBAAqB6D,EAAU,CAAC,EAAG,GAAG,CAAC,EACzEA,EAEJA,EAAU,CAAC,EAEtB,IAAK,eACD,OAAOf,GAAgBvC,EAAWoD,EAAeC,EAAUX,EAAeC,CAAW,EAEzF,IAAK,yBACD,OAAOG,GAA0B9C,EAAWoD,EAAeC,EAAUX,EAAeC,CAAW,EAEnG,IAAK,iBACD,OAAOC,GAAkB5C,EAAWoD,EAAeC,EAAUX,EAAeC,CAAW,EAE3F,IAAK,OACD,OAAIN,GAAiBe,EAAc,IAAI,EAE5BrD,GAAcC,EAAW0C,EAAeU,EAAc,KAAMT,CAAW,EAAE,OAEzEK,GAAQhD,EAAWoD,EAAeC,EAAUX,EAAeC,CAAW,EAIrF,IAAK,SACD,OAAOc,GACHzD,EACA2C,EACAD,EACAQ,EACAC,EACAC,EAAc,OACdC,CAAQ,EAGhB,IAAK,aACD,OAAOK,GACH1D,EACA0C,EACAC,EACAO,EACAC,EACAC,EAAc,WACdC,CAAQ,EAEhB,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,MACL,IAAK,KACL,QACI,OAAOD,EAEnB,CAvFStD,EAAAmD,GAAA,cAkGT,SAASb,GACLpC,EACAG,EACAwD,EACAT,EAAwB,CAExB,IAAIU,EAAcnE,GAAA,YAAoBU,CAAe,EACrD,OAAI+C,IACA/C,EAAkB,MAAGV,GAAA,qBAAoBU,EAAiB,GAAG,CAAC,IAAI+C,CAAe,GACjFU,EAAcnE,GAAA,YAAoBU,CAAe,GAGrDH,EAAU,SACN,+CAA+CG,CAAe,wCAAwCyD,CAAU;;uBAEjGD,CAAgB;qBAClBxD,CAAe;;;eAGrB,EAGJyD,CACX,CAvBS9D,EAAAsC,GAAA,qBAyBT,SAASyB,GAAyBC,EAAsB,CACpD,OACIA,EAAkB,eAAe,QAAQ,IACxCA,EAAkB,QAAU,iDACzBA,EAAkB,QAAU,iDAExC,CANShE,EAAA+D,GAAA,4BAQT,SAASE,GACL/D,EACA2C,EACAD,EACAQ,EACAc,EAAkC,CAElC,IAAIJ,EACJ,MAAI,CAACI,EAAiB,MAAQrB,EAC1BiB,EAAaxB,GAAkBpC,EAAW2C,EAAaD,EAAc,mBAAoBQ,CAAe,EAExGU,EAAa5D,EAAU,QAAQgE,EAAiB,IAAI,EAEjDJ,CACX,CAdS9D,EAAAiE,GAAA,mBAgBT,SAASN,GACLzD,EACA2C,EACAD,EACAQ,EACAC,EACAc,EACAC,EAAkB,CAElB,IAAMC,EAAc,CAChB,MAAOJ,GAAgB/D,EAAW2C,EAAaD,EAAeQ,EAAiBe,CAAgB,EAC/F,mBAAoBC,EACpB,CAACxE,EAAiB,EAAGgD,EACrB,SAAUS,GAGd,QAAWC,KAAiBa,EAAiB,kBACzCxE,GAAA,MAAK0E,EAAQf,EAAc,KAAM,IAC7BH,GACIjD,EACA0C,EACAC,EACAS,EAAc,KACdD,EACAC,EAAc,MACd,GAAGc,CAAU,IAAId,EAAc,IAAI,EAAE,CACxC,EAKT,SAAA3D,GAAA,MAAK0E,EAAQ,cAAeC,GAA+BpE,EAAWiE,EAAkBE,CAAM,CAAC,EAE3FN,GAAyBM,CAAM,MAC/B1E,GAAA,MAAK0E,EAAQ,eAAgB,IAAK,SAC9B,IAAMtC,EAAa7B,EAAU,SAAQS,EAAA0D,EAAO,UAAM,MAAA1D,IAAA,OAAA,OAAAA,EAAE,SAAQ,CAAE,EAG1D4D,EAAe3B,EAAc,QAAQb,CAAU,EAEnD,OAAKwC,IAEDA,GAAe1D,EAAAX,EAAU,yBAAyB6B,CAAU,KAAC,MAAAlB,IAAA,OAAA,OAAAA,EAAE,QAG9D0D,IAEDA,EAAerE,EAAU,mBAAmB6B,CAAU,EACjDwC,GAAY,MAAZA,EAAc,UACfA,EAAe,SAIlBA,GACDrE,EAAU,SACN,GAAGmE,EAAO,kBAAkB,wBAAwBA,EAAO,MAAM,OAAOtC,CAAU,IAAI,EAGvFwC,CACX,CAAC,EAEEF,CACX,CA9DSrE,EAAA2D,GAAA,eA2FT,SAASa,GAAyBC,EAA2B,CACzD,IAAItC,EAAwBsC,EAA6B,KACzD,GAAItC,IAAS,QAAasC,EAAqB,OAAS,EAAG,CACvD,IAAMC,EAAeD,EAAqB,CAAC,EACvCC,EAAa,eAAe,cAAc,EAC1CvC,EAAO,eACAuC,EAAa,eAAe,MAAM,EACzCvC,EAAO,OACAuC,EAAa,eAAe,gBAAgB,EACnDvC,EAAO,iBACAuC,EAAa,eAAe,wBAAwB,EAC3DvC,EAAO,yBAEP,OAAOuC,GAAiB,WACvBA,EAAa,eAAe,MAAM,GAAKA,EAAa,eAAe,gBAAgB,GAEpFvC,EAAO,SACA,OAAOuC,GAAiB,WAC/BvC,EAAO,eAEJA,IAAS,SAChBA,EAAO,mBAEX,OAAOA,CACX,CAxBSnC,EAAAwE,GAAA,4BA0BT,SAASZ,GACL1D,EACA0C,EACAC,EACAO,EACAC,EACAoB,EACAE,EAAiB,CAIjB,OAFiCH,GAAyBC,CAAoB,EAE5C,CAC9B,IAAK,eACD,OAAOA,EAAqB,IAAI,CAACrE,EAAMwE,IACnCnC,GAAgBvC,EAAWE,EAAM,GAAGuE,CAAS,IAAIC,CAAK,GAAIhC,EAAeC,CAAW,CAAC,EAG7F,IAAK,OAED,OAAO4B,EAAqB,IAAKI,GACtB5E,GAAcC,EAAW0C,EAAeiC,EAAU,KAAMhC,CAAW,EAAE,MAC/E,EAEL,IAAK,iBACD,OAAO4B,EAAqB,IAAI,CAACrE,EAAMwE,IACnC9B,GAAkB5C,EAAWE,EAAM,GAAGuE,CAAS,IAAIC,CAAK,GAAIhC,EAAeC,CAAW,CAAC,EAG/F,IAAK,yBACD,OAAO4B,EAAqB,IAAI,CAACrE,EAAMwE,IACnC5B,GAA0B9C,EAAWE,EAAM,GAAGuE,CAAS,IAAIC,CAAK,GAAIhC,EAAeC,CAAW,CAAC,EAGvG,IAAK,SACD,OAAO4B,EAAqB,IAAI,CAACP,EAAkBY,IACxCnB,GACHzD,EACA2C,EACAD,EACAQ,EACAC,EACAa,EACA,GAAGS,CAAS,IAAIG,CAAS,EAAE,CAElC,EAEL,IAAK,QACL,IAAK,OACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,MACL,IAAK,MACL,IAAK,KACD,OAAOL,EAAqB,IAAKM,GAAYA,CAAO,EAExD,IAAK,SACD,OAAON,EAAqB,IAAKO,GACzB,OAAOA,GAAgB,UAAYA,IAAgB,OAC5CA,EAEAA,EAAY,MAE1B,EAEL,QACI,GAAIP,EAAqB,SAAW,EAChC,MAAO,CAAA,EAEX,MAAM,IAAI,MAAM,kBAAkB,EAE9C,CA3ESzE,EAAA4D,GAAA,mBA6ET,SAASqB,GACLC,EAA0D,CAE1D,MAAO,CAAC,CAAEA,EAAmC,cACjD,CAJSlF,EAAAiF,GAAA,0BAMT,SAASE,GAAkBjF,EAAsBkF,EAAaC,EAA4B,OACtF,IAAI/D,EACJ,GAAI+D,EAAc,OACd/D,EAAaqC,GACTzD,EACAmF,EAAc,KACdD,EACA,GACCC,EAAsB,SACvBA,EAAc,OACbA,EAAsB,kBAAkB,UAEtCA,EAAc,aAAe,OACpC/D,EAAa6B,GACTjD,EACAkF,EACAC,EAAc,KACd,GACCA,EAAsB,UACvB1E,EAAA0E,EAAc,SAAK,MAAA1E,IAAA,OAAAA,EAAI,CAAE,KAAM,OAAQ,KAAM,EAAI,EAChD0E,EAAsB,kBAAkB,UAEtCA,EAAc,WACrB/D,EAAasC,GACT1D,EACAkF,EACAC,EAAc,KACd,GACCA,EAAsB,SACvBA,EAAc,WACbA,EAAsB,kBAAkB,MAG7C,OAAM,IAAI,MAAM,kBAAkB,EAGtC,OAAQ,OAAO/D,EAAY,CACvB,IAAK,SAEDA,EAAa,IAAI,OAAOA,CAAU,EAClC,MACJ,IAAK,UAEDA,EAAa,IAAI,QAAQA,CAAU,EACnC,MACJ,IAAK,SACDA,EAAa,IAAI,OAAOA,CAAU,EAClC,MACJ,QAEI,MAGRA,EAAW,mBAAsB+D,EAAsB,mBACvD/D,EAAW1B,EAAiB,EAAIwF,EAEhC,GAAM,CAACE,EAAUC,CAAO,EAAIrF,EAAU,UAAUmF,EAAc,IAAI,EAElE/D,EAAW,KAAOpB,EAAU,QAAQ,GAAGoF,CAAQ,IAAIC,CAAO,GAAI7F,GAAA,oBAAoB,EAClF4B,EAAW,UAAY+D,EAAc,UACrC/D,EAAW,SAAY+D,EAAsB,SAE7C,GAAI,IACA1F,GAAA,MAAK2B,EAAY,cAAegD,GAA+BpE,EAAWmF,EAAe/D,CAAU,CAAC,OAC5F,EAIZ,OAAOA,CACX,CArEStB,EAAAmF,GAAA,qBAuET,IAAMK,GAAN,MAAMA,EAAS,CASX,eAAeJ,EAA0B,OACrC,GAAI,KAAK,sBAAwB,OAAW,CACxC,IAAMK,EAAoB,OAAO,KAAK,KAAK,UAAU,WAAW,EAAE,IAAKC,IAAY,CAC/E,KAAMA,EACN,eAAgB,KAAK,UAAU,YAAYA,CAAM,GACnD,EAEF,KAAK,uBAAsB/F,GAAA,kBAAiB,KAAK,YAAY,WAAY,GAAG8F,CAAiB,EAGjG,OAAO9E,EAAA,KAAK,oBAAoByE,CAAM,KAAC,MAAAzE,IAAA,OAAAA,EAAI,CAAA,CAC/C,CAEA,6BAA2B,CACvB,OAAO,KAAK,oBACR,KAAK,YAAY,OAAO,gBAAgB,mBACxC,KAAK,YAAY,OAAO,gBACxBgF,EAAsB,CAE9B,CAEA,sBAAsBhD,EAAsC,CACxD,OAAO,KAAK,gBAAgB,WAAW,sBAAsBA,CAAkB,CACnF,CAEA,sBAAsBA,EAAsC,CACxD,OAAO,KAAK,gBAAgB,WAAW,sBAAsBA,CAAkB,CACnF,CAEA,uBAAuBA,EAAsC,CACzD,OAAO,KAAK,gBAAgB,YAAY,sBAAsBA,CAAkB,CACpF,CAEA,wBAAwBA,EAAsC,CAC1D,OAAO,KAAK,gBAAgB,aAAa,sBAAsBA,CAAkB,CACrF,CAEA,2BAA2BA,EAAsC,CAC7D,OAAO,KAAK,gBAAgB,gBAAgB,sBAAsBA,CAAkB,CACxF,CAEA,yBAAyBA,EAAsC,CAC3D,IAAIiD,EAAe,KAAK,gBAAgB,cAAc,sBAAsBjD,CAAkB,EAC9F,OAAKiD,IACDA,EAAe,KAAK,gBAAgB,cAAc,QAAQjD,CAAkB,GAEzEiD,CACX,CAEA,mBAAmBjD,EAAsC,CACrD,OAAO,KAAK,gBAAgB,QAAQ,sBAAsBA,CAAkB,CAChF,CAUA,QACIkD,EACAC,EAAkD,CAElD,OAAI,MAAM,QAAQD,CAAQ,EACf,IAAK,CACR,IAAME,EAAYF,EAAS,OAAO,CAACG,EAAmBC,IAAc,CAChE,IAAMC,EAAmB,KAAK,oBACzBD,EAAmB,mBACpBA,EACAH,CAAG,EAEP,OAAII,GACAF,EAAkB,KAAKE,CAAgB,EAEpCF,CACX,EAAG,CAAA,CAAiB,EACpB,SAAArG,GAAA,eAAcoG,EAAW,MAAa,KACtCpG,GAAA,eAAcoG,EAAW,oBAA2B,EAC7CA,CACX,EAEO,IAAM,KAAK,oBAAoBF,EAAS,mBAAoBA,EAAUC,CAAG,CAExF,CAQA,YAAYK,EAA0BC,EAAkC,CALhE,KAAA,kBAAkD,IAAI,IAM1D,KAAK,YAAcD,EACnB,KAAK,UAAYA,EAAY,OAC7B,KAAK,gBAAkBC,CAC3B,CAEA,oBACIzD,EACAsD,EACAH,EAA0D,CAE1D,IAAIC,EAAuC,KAAK,kBAAkB,IAAIpD,CAAkB,EACxF,GAAIoD,IAAc,OAAW,CACzB,IAAMI,EACF,OAAOF,GAAe,WAAaA,EAAW,MAAM,OAAW,CAACtD,CAAkB,CAAC,EAAIsD,EACvFE,IAAgB,SAChBJ,EAAYD,EAAI,MAAM,OAAW,CAAC,KAAMK,CAAW,CAAC,EACpD,KAAK,kBAAkB,IAAIxD,EAAoBoD,CAAS,GAGhE,OAAOA,CACX,CAEA,SAAS5E,EAAe,CACpB,KAAK,gBAAgB,YAAY,KAAK,CAAE,QAAAA,CAAO,CAAE,CACrD,CAQA,UAAUE,EAAY,CAClB,IAAMgF,KAAU1G,GAAA,OAAMD,GAAA,qBAAsB2B,CAAI,EAChD,SAAO1B,GAAA,aAAY0G,EAAS,GAAG,CACnC,CAEA,QAAQC,EAA2BC,EAAa,KAAK,YAAY,WAAU,OACvE,OAAO5F,KAAAhB,GAAA,SAAQ4G,EAAYD,EAAO,KAAK,UAAU,SAAS,KAAC,MAAA3F,IAAA,OAAAA,EAAI,EACnE,GA9IWX,EAAAwF,GAAA,aAAf,IAAMgB,GAANhB,GAmJA,SAASiB,GAAkBvG,EAAsByC,EAAsC,CACnF,MAAO,IAAK,CACR,IAAI+D,EAAaxG,EAAU,uBAAuByC,CAAkB,EAEpE,OAAK+D,IACDxG,EAAU,SAAS,eAAeyC,CAAkB,aAAa,EACjE+D,EAAa,CAAA,GAEVA,CACX,CACJ,CAVS1G,EAAAyG,GAAA,qBAYT,SAASE,GACLzG,EACA0G,EAA2D,CAE3D,MAAO,IACH,OAAO,KAAKA,CAA6B,EAAE,OAAO,CAAChF,EAA4BiF,IAAe,CAC1F,IAAMC,EAAmBF,EAA8BC,CAAW,EAElE,SAAAlH,GAAA,MACIiC,EACAiF,EACA,IAAK,OAED,OAAClG,EAAAT,EAAU,sBAAsB4G,CAAgB,KAAC,MAAAnG,IAAA,OAAAA,EAC9CT,EAAU,sBAAsB4G,CAAgB,EAAG,EAExDlF,CACX,EAAG,CAAA,CAAqF,CAChG,CAlBS5B,EAAA2G,GAAA,qCAoBT,SAASI,GAAmB7G,EAAsB8G,EAAwB,CACtE,IAAMC,EAAoBD,EAAoB,YAE9C,MAAO,IACHE,GACIhH,EACA8G,EACAC,GAAqB/G,EAAU,eAAe8G,EAAoB,kBAAkB,CAAC,CAEjG,CATShH,EAAA+G,GAAA,sBAWT,SAASzC,GACLpE,EACAiE,EACAgD,EAAmB,CAEnB,MAAO,IAAK,CACR,IAAM/C,EAAa+C,EAAe,mBAI9BC,EACJ,OAAIjD,EAAiB,aAAeA,EAAiB,YAAY,OAAS,EACtEiD,EAAcjD,EAAiB,YAE/BiD,EAAclH,EAAU,eAAekE,CAAU,EAGrDgD,GAAW,MAAXA,EAAa,QAAS9F,GAAmB,CACrCA,EAAW,OAAS8C,EACpB9C,EAAW,SAAW6F,EAAe,SACrC7F,EAAW1B,EAAiB,EAAIuH,EAAevH,EAAiB,EAChE0B,EAAW,mBAAqB,GAAG8C,CAAU,IAAI9C,EAAW,IAAI,EACpE,CAAC,EAEM4F,GAAwBhH,EAAWiH,EAAgBC,GAAe,CAAA,CAAE,CAC/E,CACJ,CA1BSpH,EAAAsE,GAAA,kCA4BT,SAAS4C,GAAwBhH,EAAsBkF,EAAaiC,EAA+B,CAC/F,OAAOA,EAAe,OAAO,CAACC,EAAmBhG,IAAc,CAC3D,GAAM,CAACgE,EAAUC,CAAO,EAAIrF,EAAU,UAAUoB,EAAW,IAAI,EACzDiG,EAAuB,GAAGhC,CAAO,GAAGjE,EAAW,UAAY,IAAMA,EAAW,UAAY,EAAE,GAEhG,OAAIgG,EAAkBhC,CAAQ,IAAM,SAChCgC,EAAkBhC,CAAQ,EAAI,CAAA,GAG7BgC,EAAkBhC,CAAQ,EAAE,eAAeiC,CAAoB,MAChE5H,GAAA,MAAK2H,EAAkBhC,CAAQ,EAAGiC,EAAsB,IACpDrH,EAAU,oBACLoB,EAA0B,mBAC3BA,EACA,CAACpB,EAAWmF,IAAkBF,GAAkBjF,EAAWkF,EAAQC,CAAa,CAAC,CACpF,EAGFiC,CACX,EAAG,CAAA,CAAS,CAChB,CApBStH,EAAAkH,GAAA,2BA6BT,SAASvB,GAAuBzF,EAAsBsH,EAAsC,CACxF,IAAMC,EAA2BD,EAEjC,SAAA7H,GAAA,MAAK8H,EAA0B,cAAeV,GAAmB7G,EAAWsH,CAAkB,CAAC,KAE/F7H,GAAA,MAAK8H,EAA0B,aAAcvH,EAAU,QAAQA,EAAU,UAAU,WAAYwH,EAAgB,CAAC,KAEhH/H,GAAA,MAAK8H,EAA0B,aAAcvH,EAAU,QAAQA,EAAU,UAAU,WAAYyH,EAAgB,CAAC,KAEhHhI,GAAA,MACI8H,EACA,gBACAvH,EAAU,QAAQA,EAAU,UAAU,cAAe0H,EAAmB,CAAC,EAGtEH,CACX,CAhBSzH,EAAA2F,GAAA,0BAyBT,SAASgC,GAAiBzH,EAAsB2H,EAA0B,CACtE,IAAMC,EAAqBD,KAE3BlI,GAAA,MAAKmI,EAAoB,aAAcrB,GAAkBvG,EAAW2H,EAAa,cAAc,CAAC,KAChGlI,GAAA,MAAKmI,EAAoB,cAAef,GAAmB7G,EAAW4H,CAAkB,CAAC,EAEzF,IAAMC,EAAiCF,EAAa,0BACpD,SAAAlI,GAAA,MACImI,EACA,4BACAnB,GAAkCzG,EAAW6H,CAA8B,CAAC,EAGzED,CACX,CAdS9H,EAAA2H,GAAA,oBAuBT,SAASD,GAAiBxH,EAAsB8H,EAA0B,CACtE,IAAMC,EAAqBD,KAE3BrI,GAAA,MAAKsI,EAAoB,aAAcxB,GAAkBvG,EAAW8H,EAAa,cAAc,CAAC,KAChGrI,GAAA,MAAKsI,EAAoB,cAAelB,GAAmB7G,EAAW+H,CAAkB,CAAC,EAEzF,IAAMF,EAAiCC,EAAa,0BACpD,SAAArI,GAAA,MACIsI,EACA,4BACAtB,GAAkCzG,EAAW6H,CAA8B,CAAC,EAGzEE,CACX,CAdSjI,EAAA0H,GAAA,oBAuBT,SAASQ,GAAkBhI,EAAsBiI,EAA4B,CACzE,IAAMC,EAAsBD,EAE5B,OAAAA,EAAc,KAAK,QAASE,GAAgB,CACxCA,EAAQ,MAAQ,EACpB,CAAC,KAED1I,GAAA,MAAKyI,EAAqB,cAAerB,GAAmB7G,EAAWiI,CAAa,CAAC,KAErFxI,GAAA,MAAKyI,EAAqB,OAAQlI,EAAU,QAAQiI,EAAc,KAAMG,EAAe,CAAC,KACxF3I,GAAA,MAAKyI,EAAqB,mBAAoBlI,EAAU,QAAQiI,EAAc,iBAAkBG,EAAe,CAAC,KAChH3I,GAAA,MACIyI,EACA,uBACAlI,EAAU,QAAQiI,EAAc,qBAA+BI,EAAyB,CAAC,KAG7F5I,GAAA,MAAKyI,EAAqB,UAAW,IACjClI,EAAU,UAAU,QACf,OACIsI,GACGA,EAAU,UACTA,EAAU,aAAeL,EAAc,oBACpCK,EAAU,aAAe,cAAcL,EAAc,kBAAkB,IAAI,EAEtF,OAAO,CAACM,EAASD,IAAa,CAC3B,IAAME,EAAO,GAAGxI,EAAU,UAAU,SAAS,IAAIsI,EAAU,IAAI,GAC/D,OAAAC,EAAQC,CAAI,EAAIxI,EAAU,mBAAmBsI,EAAU,kBAAkB,EAClEC,CACX,EAAG,CAAA,CAA2B,CAAC,EAGvCL,EAAoB,YAAc,CAACO,EAAsBC,IAAmC,CACxF,IAAMC,EAAW5I,GAAcC,EAAWiI,EAAeQ,CAAY,EACrE,OAAIC,EACO,CAAE,OAAQC,EAAS,OAAQ,eAAgBA,EAAS,WAAY,SAAUA,EAAS,QAAQ,EAE3FA,EAAS,MAExB,EAEOT,CACX,CA1CSpI,EAAAkI,GAAA,qBAmDT,SAASI,GAAgBpI,EAAsB4I,EAAwB,CACnE,IAAMC,EAAoBD,EAE1B,SAAAnJ,GAAA,MAAKoJ,EAAmB,cAAehC,GAAmB7G,EAAW4I,CAAW,CAAC,KAEjFnJ,GAAA,MAAKoJ,EAAmB,aAAc,IAAK,OACvC,IAAM5G,EAAO2G,EAAY,KACnBE,EAAW7G,EAAK,WAAW,YAAY,EAAIA,EAAK,UAAU,GAAIA,EAAK,OAAS,CAAC,EAAIA,EAEvF,OAAOxB,EAAAT,EAAU,wBAAwB8I,CAAQ,KAAC,MAAArI,IAAA,OAAAA,EAAIT,EAAU,2BAA2B8I,CAAQ,CACvG,CAAC,EAEMD,CACX,CAbS/I,EAAAsI,GAAA,mBAsBT,SAASC,GACLrI,EACA+I,EAAwE,WAExE,IAAMC,EAA8BD,EAIpC,GAFAC,EAA4B,uBAAwBvI,EAAAuI,EAA4B,yBAAqB,MAAAvI,IAAA,OAAAA,EAAI,CAAA,EAErG,CAACsE,GAAuBgE,CAAqB,EAAG,CAChD,IAAME,GAAiBtI,EAAAX,EAAU,UAAU,aACtC,KAAMkJ,GAAgBA,EAAY,qBAAuBH,EAAsB,YAAY,KAAC,MAAApI,IAAA,OAAA,OAAAA,EAC3F,eAAe,KAAMwI,GAAQA,EAAI,OAASJ,EAAsB,MAAM,EAE5EC,EAA4B,cAAeC,GAAc,KAAA,OAAdA,EAAgB,gBAAiB,IAC5ED,EAA4B,gBAAiBtI,EAAAuI,GAAc,KAAA,OAAdA,EAAgB,QAAI,MAAAvI,IAAA,OAAAA,EAAI,GAGzE,SAAAjB,GAAA,MACIuJ,EACA,aACAzC,GAAkBvG,EAAY+I,EAA6C,cAAc,CAAC,KAG9FtJ,GAAA,MAAKuJ,EAA6B,cAAenC,GAAmB7G,EAAW+I,CAAqB,CAAC,EAE9FC,CACX,CA1BSlJ,EAAAuI,GAAA,6BAmCT,SAASX,GAAoB1H,EAAsBoJ,EAAgC,CAC/E,IAAMC,EAAwBD,EAE9B,SAAA3J,GAAA,MAAK4J,EAAuB,cAAexC,GAAmB7G,EAAWoJ,CAAe,CAAC,KAEzF3J,GAAA,MAAK4J,EAAuB,SAAU,IAAK,CACvC,IAAMC,EAAatJ,EAAU,UAAU,QAAQ,OAC1CsI,GAAc,CAACA,EAAU,SAAWA,EAAU,mBAAmB,WAAWc,EAAgB,UAAU,CAAC,EAK5G,OAAIE,EAAW,OAAS,GACpBtJ,EAAU,SAAS,yCAAyCoJ,EAAgB,kBAAkB,EAAE,EAI7FpJ,EAAU,mBAAmBsJ,EAAW,CAAC,EAAE,kBAAkB,CACxE,CAAC,EAEMD,CACX,CArBSvJ,EAAA4H,GAAA,uBA8BT,SAAS6B,GAAcvJ,EAAsBsI,EAAoB,CAC7D,IAAMkB,EAAkBlB,EAExB,OAAIkB,EAAgB,eAChB/J,GAAA,MAAK+J,EAAiB,mBAAoBjD,GAAkBvG,EAAWsI,EAAU,UAAU,CAAC,EAG5FkB,EAAgB,eAChB/J,GAAA,MAAK+J,EAAiB,mBAAoBjD,GAAkBvG,EAAWsI,EAAU,UAAU,CAAC,KAGhG7I,GAAA,MAAK+J,EAAiB,aAAcxJ,EAAU,QAAQsI,EAAU,WAAYmB,EAAsB,CAAC,KAEnGhK,GAAA,MAAK+J,EAAiB,cAAe,IAAK,CAetC,IAAME,KAA2BjK,GAAA,sBAAqB6I,EAAU,mBAAoB,GAAG,EACjFqB,EAAyBrB,EAAU,mBAEnCsB,EAAuB5J,EAAU,eAAe2J,CAAsB,EACtEE,EAAwB7J,EAAU,eAAe0J,CAAwB,EAE/E,QAAWI,KAAwBD,EAE1BD,EAAqB,KACjBxI,GACGA,EAAW,OAAS0I,EAAqB,MACzC1I,EAAW,YAAc0I,EAAqB,SAAS,GAG/DF,EAAqB,KAAKE,CAAoB,EAItD,OAAO9C,GAAwBhH,EAAWsI,EAAWsB,CAAoB,CAC7E,CAAC,EAEMJ,CACX,CAlDS1J,EAAAyJ,GAAA,iBA2DT,SAASE,GACLzJ,EACA+J,EAAmD,CAEnD,IAAMC,EAA2BD,EAEjC,SAAAtK,GAAA,MACIuK,EACA,gBACA,IAAK,SACD,OAAArJ,GAAAF,EAAAT,EAAU,uBAAuB+J,EAAmB,IAAI,KAAC,MAAAtJ,IAAA,OAAAA,EACzDT,EAAU,wBAAwB+J,EAAmB,IAAI,KAAC,MAAApJ,IAAA,OAAAA,EAC1DX,EAAU,2BAA2B+J,EAAmB,IAAI,EAAC,KAGrEtK,GAAA,MAAKuK,EAA0B,cAAe,IAAK,CAE/C,IAAMN,EACFK,EAAmB,mBAAmB,UAAU,EAAGA,EAAmB,mBAAmB,QAAQ,GAAG,CAAC,EACrGA,EAAmB,mBAAmB,UAAUA,EAAmB,mBAAmB,QAAQ,GAAG,EAAI,CAAC,EACpGJ,EAAyBI,EAAmB,mBAE5CH,EAAuB5J,EAAU,eAAe2J,CAAsB,EACtEE,EAAwB7J,EAAU,eAAe0J,CAAwB,EAE/E,QAAWI,KAAwBD,EAE1BD,EAAqB,KACjBxI,GACGA,EAAW,OAAS0I,EAAqB,MACzC1I,EAAW,YAAc0I,EAAqB,SAAS,GAG/DF,EAAqB,KAAKE,CAAoB,EAItD,OAAO9C,GAAwBhH,EAAW+J,EAAoBH,CAAoB,CACtF,CAAC,EAEMI,CACX,CAzCSlK,EAAA2J,GAAA,0BAkDT,SAASQ,GAAmBjK,EAAsBkK,EAA8B,CAC5E,IAAMC,EAAuBD,EAE7B,SAAAzK,GAAA,MAAK0K,EAAsB,aAAcnK,EAAU,QAAQkK,EAAe,WAAY9B,EAAe,CAAC,KACtG3I,GAAA,MACI0K,EACA,uBACAnK,EAAU,QAAQkK,EAAe,qBAA+B7B,EAAyB,CAAC,KAE9F5I,GAAA,MAAK0K,EAAsB,cAAetD,GAAmB7G,EAAWkK,CAAc,CAAC,EAEhFC,CACX,CAZSrK,EAAAmK,GAAA,sBAqBT,SAASG,GAAsBpK,EAAsBqK,EAAoC,CACrF,IAAMC,EAA0BD,EAEhC,SAAA5K,GAAA,MAAK6K,EAAyB,cAAezD,GAAmB7G,EAAWqK,CAAiB,CAAC,EAEtFC,CACX,CANSxK,EAAAsK,GAAA,yBAcT,SAAgBG,GAAQtE,EAAwB,CAE5C,IAAMC,EAAqC,CACvC,QAASD,EAAY,QACrB,UAAWA,EAAY,OAAO,UAC9B,YAAaA,EAAY,OAAO,YAChC,WAAYzG,GAAA,qBACZ,YAAa,CAAA,GAIbyG,EAAY,WAAW,SAAW,IAClCA,EAAY,WAAazG,GAAA,sBAI7B,IAAMQ,EAAY,IAAIsG,GAAUL,EAAaC,CAAe,EAE5D,SAAAzG,GAAA,MACIyG,EACA,kBACAlG,EAAU,QAAQA,EAAU,UAAU,gBAAiByF,EAAsB,CAAC,KAElFhG,GAAA,MAAKyG,EAAiB,aAAclG,EAAU,QAAQA,EAAU,UAAU,WAAYwH,EAAgB,CAAC,KACvG/H,GAAA,MAAKyG,EAAiB,aAAclG,EAAU,QAAQA,EAAU,UAAU,WAAYyH,EAAgB,CAAC,KACvGhI,GAAA,MAAKyG,EAAiB,cAAelG,EAAU,QAAQA,EAAU,UAAU,YAAagI,EAAiB,CAAC,KAC1GvI,GAAA,MAAKyG,EAAiB,UAAWlG,EAAU,QAAQA,EAAU,UAAU,QAASuJ,EAAa,CAAC,KAC9F9J,GAAA,MAAKyG,EAAiB,eAAgBlG,EAAU,QAAQA,EAAU,UAAU,aAAciK,EAAkB,CAAC,KAC7GxK,GAAA,MAAKyG,EAAiB,gBAAiBlG,EAAU,QAAQA,EAAU,UAAU,cAAe0H,EAAmB,CAAC,KAChHjI,GAAA,MACIyG,EACA,kBACAlG,EAAU,QAAQA,EAAU,UAAU,gBAAiBoK,EAAqB,CAAC,EAGjFlE,EAAgB,YAAcpG,EAAA,SAAwBI,EAAY,CAC9D,IAAMsK,EAAmBzK,GAAiBC,EAAW,OAAWE,CAAI,EACpE,OAAIsK,EAAiB,QACjB7K,GAAiB6K,EAAiB,WAAYA,EAAiB,MAAM,EAElEA,CACX,EAN8B,eAQvBtE,CACX,CA5CgBpG,EAAAyK,GAAA,WAAhBE,GAAA,QAAAF,qHC7/CA,IAAAG,GAAA,KASA,SAASC,GAAsBC,EAAyBC,EAAU,iBAC9D,IAAIC,EACJ,GAAI,MAAM,QAAQD,CAAK,EACnBC,EAAS,CACL,KAAM,aACN,WAAYD,EAAM,IAAKE,GAASC,GAA8BJ,EAAYG,CAAI,CAAC,WAE5E,GAAAE,EAAAJ,EAAM,aAAS,MAAAI,IAAA,SAAAA,EAAA,KAAAJ,CAAA,EACtBC,EAAS,CACL,KAAM,UACN,QAASD,EAAM,QAAO,WAEnB,GAAAK,EAAAL,EAAM,YAAQ,MAAAK,IAAA,SAAAA,EAAA,KAAAL,CAAA,EAAM,CAC3B,IAAMM,EAAeN,EAAM,QAAO,EAAG,MAAM,GAAG,EAC1CM,EAAa,OAAS,GAAKP,EAAW,KAAMQ,GAAQA,EAAI,QAAUD,EAAa,CAAC,CAAC,EACjFL,EAAS,CACL,KAAM,aACN,WAAYD,EAAM,QAAO,GAG7BC,EAAS,CACL,KAAM,SACN,OAAQD,EAAM,QAAO,OAGtB,GAAAQ,EAAAR,EAAM,SAAK,MAAAQ,IAAA,SAAAA,EAAA,KAAAR,CAAA,EAClBC,EAAS,CACL,KAAM,MACN,IAAKD,EAAM,QAAO,GAEf,GAAAS,EAAAT,EAAM,WAAO,MAAAS,IAAA,SAAAA,EAAA,KAAAT,CAAA,EACpBC,EAAS,CACL,KAAM,QACN,MAAOD,EAAM,QAAO,GAEjB,GAAAU,EAAAV,EAAM,UAAM,MAAAU,IAAA,SAAAA,EAAA,KAAAV,CAAA,EACnBC,EAAS,CACL,KAAM,OACN,KAAMD,EAAM,QAAO,GAEhB,GAAAW,EAAAX,EAAM,aAAS,MAAAW,IAAA,SAAAA,EAAA,KAAAX,CAAA,EACtBC,EAAS,CACL,KAAM,OACN,KAAMD,EAAM,QAAO,GAEhBA,EAAM,OAAS,OACtBC,EAAS,CACL,KAAM,OACN,KAAMD,EAAM,MAETA,EAAM,OAAS,iBACtBC,EAAS,CACL,KAAM,iBACN,eAAgBD,EAAM,OAEnBA,EAAM,OAAS,QACtBC,EAAS,CACL,KAAM,QACN,MAAOD,EAAM,OAEVA,EAAM,OAAS,OACtBC,EAAS,CACL,KAAM,QAEHD,EAAM,OAAS,eACtBC,EAAS,CACL,KAAM,eACN,aAAcD,EAAM,OAEjBA,EAAM,OAAS,yBACtBC,EAAS,CACL,KAAM,yBACN,uBAAwBD,EAAM,OAE3B,OAAO,UAAU,eAAe,KAAKA,EAAO,OAAO,IAC1DC,EAAS,CACL,KAAM,SACN,OAAQE,GAA8BJ,EAAYC,CAAK,IAG/D,OAAOC,CACX,CAjFSW,EAAAd,GAAA,yBA0FT,SAASe,GAAqBd,EAAyBC,EAAU,CAC7D,IAAIC,EAEJ,OADyBD,GAAK,KAAA,OAALA,EAAO,YAAY,KAClB,CACtB,IAAK,SACL,IAAK,SACD,IAAMM,EAAeN,EAAM,SAAQ,EAAG,MAAM,GAAG,EAC3CM,EAAa,OAAS,GAAKP,EAAW,KAAMQ,GAAQA,EAAI,QAAUD,EAAa,CAAC,CAAC,EACjFL,EAAS,CACL,KAAM,aACN,WAAYD,EAAM,SAAQ,GAG9BC,EAAS,CACL,KAAM,SACN,OAAQD,EAAM,SAAQ,GAG9B,MACJ,IAAK,UACL,IAAK,UACDC,EAAS,CACL,KAAM,OACN,KAAMD,EAAM,QAAO,GAEvB,MAEJ,IAAK,SACL,IAAK,SACGA,EAAM,SAAQ,IAAOA,EAAM,QAAO,EAClCC,EAAS,CACL,KAAM,MACN,IAAKD,EAAM,QAAO,GAGtBC,EAAS,CACL,KAAM,UACN,QAASD,EAAM,QAAO,GAG9B,MACJ,IAAK,SACL,QACIC,EAASH,GAAsBC,EAAYC,CAAK,EAChD,MAER,OAAOC,CACX,CA/CSW,EAAAC,GAAA,wBAiDT,IAAMC,GAAiB,CAAC,QAAS,OAAQ,WAAY,YAAa,eAAgB,qBAAsB,aAAa,EASrH,SAASC,GACLhB,EACAiB,EACAC,EAAkC,CAElC,OAAO,KAAKD,CAAkB,EACzB,OAAQE,GAAQA,IAAQ,cAAc,EACtC,QAASA,GAAO,CACb,OAAO,KAAKF,EAAmBE,CAAG,CAAC,EAAE,QAASC,GAAQ,CAClD,IAAMC,EAAmBC,GAAwBtB,EAAYiB,EAAmBE,CAAG,EAAEC,CAAI,CAAC,EAC1F,GAAI,CAACC,EAAiB,KAAM,CACxB,IAAME,KAAgBzB,GAAA,SAAQE,EAAY,GAAGmB,CAAG,IAAIC,CAAI,EAAE,EAC1D,GAAIG,EAAe,CACf,IAAMC,EAAiBD,EAAc,MAAM,GAAG,EAC9CF,EAAiB,KAAOG,EAAe,CAAC,EACpCA,EAAe,OAAS,IAExBH,EAAiB,UAAYG,EAAe,CAAC,IAIzDN,EAAkB,KAAKG,CAAgB,CAC3C,CAAC,CACL,CAAC,CACT,CAxBSR,EAAAG,GAAA,8BAiCT,SAASZ,GACLJ,EACAyB,EAAmB,CASnB,GAAI,OAAOA,GAAmB,SAC1B,OAAOA,EACJ,GAAI,OAAOA,GAAmB,SACjC,GAAIA,EAAe,eAAe,OAAO,EAAG,CAExC,IAAMC,EAA4B,CAC9B,KAAMD,EAAe,MACrB,eAAgB,CAAA,GAGpB,cAAO,KAAKA,CAAc,EAAE,QAASE,GAAiB,CAClD,GAAIZ,GAAe,QAAQY,CAAa,IAAM,GAAI,CAC9C,IAAM1B,EAAQwB,EAAeE,CAAa,EAC1CD,EAAQ,eAAe,KAAK,CACxB,KAAMC,EACN,MAAOb,GAAqBd,EAAYC,CAAK,EAChD,OACM0B,IAAkB,eAAiB,OAAO,KAAKF,EAAeE,CAAa,CAAC,EAAE,OAAS,IAC9FD,EAAQ,YAAc,CAAA,EACtBV,GAA2BhB,EAAYyB,EAAeE,CAAa,EAAGD,EAAQ,WAAW,EAEjG,CAAC,EACMA,MACJ,IAAID,EAAe,OAAS,eAC/B,MAAO,CACH,KAAM,eACN,aAAcA,EAAe,OAE9B,GAAIA,EAAe,OAAS,iBAC/B,MAAO,CACH,KAAM,iBACN,eAAgBA,EAAe,OAEhC,GAAIA,EAAe,OAAS,yBAC/B,MAAO,CACH,KAAM,yBACN,uBAAwBA,EAAe,OAKvD,CApDSZ,EAAAT,GAAA,iCA6DT,SAAgBkB,GAAwBtB,EAAyB4B,EAA+B,CAC5F,IAAMC,EAAgC,CAClC,KAAMD,EAAW,KACjB,UAAWA,EAAW,WAE1B,OAAI,MAAM,QAAQA,CAAU,GAEpBA,EAAW,eAAe,aAAa,GAAK,OAAO,KAAMA,EAAmB,WAAW,EAAE,OAAS,IAElGC,EAAe,YAAc,CAAA,EAC7Bb,GAA2BhB,EAAa4B,EAAmB,YAAaC,EAAe,WAAW,GAE/F,CACH,GAAGA,EACH,WAAYD,EAAW,IAAKzB,GAASC,GAA8BJ,EAAYG,CAAI,CAAC,IAEjFyB,EAAW,eAAe,OAAO,EACjC,CAAE,GAAGC,EAAgB,OAAQzB,GAA8BJ,EAAY4B,CAAU,CAAQ,EAEzF,CAAE,GAAGC,EAAgB,MAAOf,GAAqBd,EAAY4B,CAAU,CAAC,CAEvF,CArBgBf,EAAAS,GAAA,2BAAhBQ,GAAA,wBAAAR,qgBCtQAS,GAAA,KAAAC,EAAA,EACAD,GAAA,KAAAC,EAAA,EACAD,GAAA,KAAAC,EAAA,oJC2BA,SAAgBC,GAAeC,EAAiC,CAC5D,OAAkCA,GAAiB,KACxC,CAAA,EAEP,MAAM,QAAQA,CAAY,EACnBA,EAEA,CAACA,CAAY,CAE5B,CATgBC,EAAAF,GAAA,eAAhBG,GAAA,YAAAH,GAcA,IAAaI,GAAb,MAAaA,EAAmB,CAY5B,YAAYC,EAA4BC,EAAiBC,EAAmBC,EAAuB,CAC/F,KAAK,eAAiBH,EACtB,KAAK,WAAaG,EAClB,KAAK,QAAUF,EACf,KAAK,OAASC,CAClB,GAjB4BL,EAAAE,GAAA,uBAAhC,IAAaK,GAAbL,GAAAD,GAAA,oBAAAM,GAuBA,IAAaC,GAAb,MAAaA,EAAiB,CAC1B,IAAI,YAAU,CACV,OAAO,KAAK,WAChB,CAEA,IAAI,QAAM,CACN,MAAO,CACH,aAAc,KAAK,cACnB,gBAAiB,KAAK,iBACtB,YAAa,KAAK,aAClB,gBAAiB,KAAK,iBACtB,UAAW,KAAK,WAChB,WAAY,KAAK,YACjB,WAAY,KAAK,YACjB,aAAc,KAAK,cACnB,gBAAiB,KAAK,iBACtB,QAAS,KAAK,SACd,cAAe,KAAK,eACpB,YAAa,KAAK,aAE1B,CAyBA,YAAYC,EAAgC,CArB5C,KAAA,YAA2B,CAAA,EAE3B,KAAA,cAA+B,CAAA,EAC/B,KAAA,aAAmD,CAAA,EACnD,KAAA,cAAkC,CAAA,EAClC,KAAA,iBAAwC,CAAA,EACxC,KAAA,YAA8B,CAAA,EAC9B,KAAA,YAA8B,CAAA,EAC9B,KAAA,SAAwB,CAAA,EACxB,KAAA,eAAoC,CAAA,EACpC,KAAA,iBAAuC,CACnC,MAAO,kBACP,mBAAoB,IAExB,KAAA,aAAgC,CAAA,EAChC,KAAA,cAAkC,CAAA,EAClC,KAAA,iBAAwC,CAAA,EAMpC,KAAK,eAAiB,uBACtB,KAAK,QAAUA,EAAoB,QACnC,KAAK,WAAaA,EAAoB,OAAO,SACjD,CAKO,gBAAgBC,EAAyB,CAC5C,KAAK,cAAc,KAAKA,CAAY,EACpC,KAAK,YAAc,KAAK,YAAY,OAAOA,EAAa,UAAU,EAClE,KAAK,cAAgB,KAAK,cAAc,OAAOA,EAAa,OAAO,YAAY,EAC/E,KAAK,iBAAmB,KAAK,iBAAiB,OAAOA,EAAa,OAAO,eAAe,EACxF,KAAK,aAAe,OAAO,OAAO,KAAK,aAAcA,EAAa,OAAO,WAAW,EACpF,KAAK,YAAc,KAAK,YAAY,OAAOA,EAAa,OAAO,UAAU,EACzE,KAAK,YAAc,KAAK,YAAY,OAAOA,EAAa,OAAO,UAAU,EACzE,KAAK,SAAW,KAAK,SAAS,OAAOA,EAAa,OAAO,OAAO,EAChE,KAAK,eAAiB,KAAK,eAAe,OAAOA,EAAa,OAAO,aAAa,EAClF,KAAK,aAAe,KAAK,aAAa,OAAOA,EAAa,OAAO,WAAW,EAC5E,KAAK,cAAgB,KAAK,cAAc,OAAOA,EAAa,OAAO,YAAY,EAC/E,KAAK,iBAAmB,KAAK,iBAAiB,OAAOA,EAAa,OAAO,eAAe,EACpFA,EAAa,OAAO,gBAAgB,mBAAmB,OAAS,IAChE,KAAK,iBAAmB,OAAO,OAAO,KAAK,iBAAkBA,EAAa,OAAO,eAAe,EAExG,GAtE0BV,EAAAQ,GAAA,qBAA9B,IAAaG,GAAbH,GAAAP,GAAA,kBAAAU,mGCjEA,IAAAC,GAAA,KAQA,SAAgBC,MAASC,EAA4B,CACjD,IAAMC,EAAkB,IAAIH,GAAA,kBAAkBE,EAAc,CAAC,CAAC,EAE9D,OAAAA,EAAc,QAASE,GAA6B,CAChDD,EAAgB,gBAAgBC,CAAY,CAChD,CAAC,EAEMD,CACX,CARgBE,EAAAJ,GAAA,SAAhBK,GAAA,MAAAL,KCTA,IAAAM,GAAAC,GAAAC,IAAA,EAAE,SAAUC,EAAK,CACfA,EAAI,OAAS,SAAUC,EAAQC,EAAK,CAAE,OAAO,IAAIC,EAAUF,EAAQC,CAAG,CAAE,EACxEF,EAAI,UAAYG,EAChBH,EAAI,UAAYI,EAChBJ,EAAI,aAAeK,EAWnBL,EAAI,kBAAoB,GAAK,KAE7B,IAAIM,EAAU,CACZ,UAAW,WAAY,WAAY,UAAW,UAC9C,eAAgB,eAAgB,SAAU,aAC1C,cAAe,QAAS,QAC1B,EAEAN,EAAI,OAAS,CACX,OACA,wBACA,kBACA,UACA,UACA,eACA,YACA,UACA,WACA,YACA,QACA,aACA,QACA,MACA,QACA,SACA,gBACA,gBACF,EAEA,SAASG,EAAWF,EAAQC,EAAK,CAC/B,GAAI,EAAE,gBAAgBC,GACpB,OAAO,IAAIA,EAAUF,EAAQC,CAAG,EAGlC,IAAIK,EAAS,KACbC,EAAaD,CAAM,EACnBA,EAAO,EAAIA,EAAO,EAAI,GACtBA,EAAO,oBAAsBP,EAAI,kBACjCO,EAAO,IAAML,GAAO,CAAC,EACrBK,EAAO,IAAI,UAAYA,EAAO,IAAI,WAAaA,EAAO,IAAI,cAC1DA,EAAO,UAAYA,EAAO,IAAI,UAAY,cAAgB,cAC1DA,EAAO,KAAO,CAAC,EACfA,EAAO,OAASA,EAAO,WAAaA,EAAO,QAAU,GACrDA,EAAO,IAAMA,EAAO,MAAQ,KAC5BA,EAAO,OAAS,CAAC,CAACN,EAClBM,EAAO,SAAW,CAAC,EAAEN,GAAUM,EAAO,IAAI,UAC1CA,EAAO,MAAQE,EAAE,MACjBF,EAAO,eAAiBA,EAAO,IAAI,eACnCA,EAAO,SAAWA,EAAO,eAAiB,OAAO,OAAOP,EAAI,YAAY,EAAI,OAAO,OAAOA,EAAI,QAAQ,EACtGO,EAAO,WAAa,CAAC,EAKjBA,EAAO,IAAI,QACbA,EAAO,GAAK,OAAO,OAAOG,CAAM,GAIlCH,EAAO,cAAgBA,EAAO,IAAI,WAAa,GAC3CA,EAAO,gBACTA,EAAO,SAAWA,EAAO,KAAOA,EAAO,OAAS,GAElDI,GAAKJ,EAAQ,SAAS,CACxB,CAnCSK,EAAAT,EAAA,aAqCJ,OAAO,SACV,OAAO,OAAS,SAAUU,EAAG,CAC3B,SAASC,GAAK,CAAC,CAANF,EAAAE,EAAA,KACTA,EAAE,UAAYD,EACd,IAAIE,EAAO,IAAID,EACf,OAAOC,CACT,GAGG,OAAO,OACV,OAAO,KAAO,SAAUF,EAAG,CACzB,IAAIG,EAAI,CAAC,EACT,QAASC,KAAKJ,EAAOA,EAAE,eAAeI,CAAC,GAAGD,EAAE,KAAKC,CAAC,EAClD,OAAOD,CACT,GAGF,SAASE,EAAmBX,EAAQ,CAGlC,QAFIY,EAAa,KAAK,IAAInB,EAAI,kBAAmB,EAAE,EAC/CoB,EAAY,EACPH,EAAI,EAAGI,GAAIf,EAAQ,OAAQW,EAAII,GAAGJ,IAAK,CAC9C,IAAIK,GAAMf,EAAOD,EAAQW,CAAC,CAAC,EAAE,OAC7B,GAAIK,GAAMH,EAKR,OAAQb,EAAQW,CAAC,EAAG,CAClB,IAAK,WACHM,EAAUhB,CAAM,EAChB,MAEF,IAAK,QACHiB,EAASjB,EAAQ,UAAWA,EAAO,KAAK,EACxCA,EAAO,MAAQ,GACf,MAEF,IAAK,SACHiB,EAASjB,EAAQ,WAAYA,EAAO,MAAM,EAC1CA,EAAO,OAAS,GAChB,MAEF,QACEkB,EAAMlB,EAAQ,+BAAiCD,EAAQW,CAAC,CAAC,CAC7D,CAEFG,EAAY,KAAK,IAAIA,EAAWE,EAAG,CACrC,CAEA,IAAII,GAAI1B,EAAI,kBAAoBoB,EAChCb,EAAO,oBAAsBmB,GAAInB,EAAO,QAC1C,CAlCSK,EAAAM,EAAA,qBAoCT,SAASV,EAAcD,EAAQ,CAC7B,QAASU,EAAI,EAAGI,EAAIf,EAAQ,OAAQW,EAAII,EAAGJ,IACzCV,EAAOD,EAAQW,CAAC,CAAC,EAAI,EAEzB,CAJSL,EAAAJ,EAAA,gBAMT,SAASmB,EAAcpB,EAAQ,CAC7BgB,EAAUhB,CAAM,EACZA,EAAO,QAAU,KACnBiB,EAASjB,EAAQ,UAAWA,EAAO,KAAK,EACxCA,EAAO,MAAQ,IAEbA,EAAO,SAAW,KACpBiB,EAASjB,EAAQ,WAAYA,EAAO,MAAM,EAC1CA,EAAO,OAAS,GAEpB,CAVSK,EAAAe,EAAA,gBAYTxB,EAAU,UAAY,CACpB,IAAK,UAAY,CAAEyB,GAAI,IAAI,CAAE,EAC7B,MAAOC,GACP,OAAQ,UAAY,CAAE,YAAK,MAAQ,KAAa,IAAK,EACrD,MAAO,UAAY,CAAE,OAAO,KAAK,MAAM,IAAI,CAAE,EAC7C,MAAO,UAAY,CAAEF,EAAa,IAAI,CAAE,CAC1C,EAEA,IAAIG,EACJ,GAAI,CACFA,EAAS,QAAQ,QAAQ,EAAE,MAC7B,MAAa,CACXA,EAASlB,EAAA,UAAY,CAAC,EAAb,SACX,CACKkB,IAAQA,EAASlB,EAAA,UAAY,CAAC,EAAb,WAEtB,IAAImB,EAAc/B,EAAI,OAAO,OAAO,SAAUgC,EAAI,CAChD,OAAOA,IAAO,SAAWA,IAAO,KAClC,CAAC,EAED,SAAS3B,EAAcJ,EAAQC,EAAK,CAClC,OAAO,IAAIE,EAAUH,EAAQC,CAAG,CAClC,CAFSU,EAAAP,EAAA,gBAIT,SAASD,EAAWH,EAAQC,EAAK,CAC/B,GAAI,EAAE,gBAAgBE,GACpB,OAAO,IAAIA,EAAUH,EAAQC,CAAG,EAGlC4B,EAAO,MAAM,IAAI,EAEjB,KAAK,QAAU,IAAI3B,EAAUF,EAAQC,CAAG,EACxC,KAAK,SAAW,GAChB,KAAK,SAAW,GAEhB,IAAI+B,EAAK,KAET,KAAK,QAAQ,MAAQ,UAAY,CAC/BA,EAAG,KAAK,KAAK,CACf,EAEA,KAAK,QAAQ,QAAU,SAAUC,EAAI,CACnCD,EAAG,KAAK,QAASC,CAAE,EAInBD,EAAG,QAAQ,MAAQ,IACrB,EAEA,KAAK,SAAW,KAEhBF,EAAY,QAAQ,SAAUC,EAAI,CAChC,OAAO,eAAeC,EAAI,KAAOD,EAAI,CACnC,IAAK,UAAY,CACf,OAAOC,EAAG,QAAQ,KAAOD,CAAE,CAC7B,EACA,IAAK,SAAUG,GAAG,CAChB,GAAI,CAACA,GACH,OAAAF,EAAG,mBAAmBD,CAAE,EACxBC,EAAG,QAAQ,KAAOD,CAAE,EAAIG,GACjBA,GAETF,EAAG,GAAGD,EAAIG,EAAC,CACb,EACA,WAAY,GACZ,aAAc,EAChB,CAAC,CACH,CAAC,CACH,CA5CSvB,EAAAR,EAAA,aA8CTA,EAAU,UAAY,OAAO,OAAO0B,EAAO,UAAW,CACpD,YAAa,CACX,MAAO1B,CACT,CACF,CAAC,EAEDA,EAAU,UAAU,MAAQ,SAAUgC,EAAM,CAC1C,GAAI,OAAO,QAAW,YACpB,OAAO,OAAO,UAAa,YAC3B,OAAO,SAASA,CAAI,EAAG,CACvB,GAAI,CAAC,KAAK,SAAU,CAClB,IAAIC,EAAK,QAAQ,gBAAgB,EAAE,cACnC,KAAK,SAAW,IAAIA,EAAG,MAAM,CAC/B,CACAD,EAAO,KAAK,SAAS,MAAMA,CAAI,CACjC,CAEA,YAAK,QAAQ,MAAMA,EAAK,SAAS,CAAC,EAClC,KAAK,KAAK,OAAQA,CAAI,EACf,EACT,EAEAhC,EAAU,UAAU,IAAM,SAAUkC,EAAO,CACzC,OAAIA,GAASA,EAAM,QACjB,KAAK,MAAMA,CAAK,EAElB,KAAK,QAAQ,IAAI,EACV,EACT,EAEAlC,EAAU,UAAU,GAAK,SAAU4B,EAAIO,EAAS,CAC9C,IAAIN,EAAK,KACT,MAAI,CAACA,EAAG,QAAQ,KAAOD,CAAE,GAAKD,EAAY,QAAQC,CAAE,IAAM,KACxDC,EAAG,QAAQ,KAAOD,CAAE,EAAI,UAAY,CAClC,IAAIQ,EAAO,UAAU,SAAW,EAAI,CAAC,UAAU,CAAC,CAAC,EAAI,MAAM,MAAM,KAAM,SAAS,EAChFA,EAAK,OAAO,EAAG,EAAGR,CAAE,EACpBC,EAAG,KAAK,MAAMA,EAAIO,CAAI,CACxB,GAGKV,EAAO,UAAU,GAAG,KAAKG,EAAID,EAAIO,CAAO,CACjD,EAIA,IAAIE,EAAQ,UACRC,EAAU,UACVC,EAAgB,uCAChBC,EAAkB,gCAClBlC,EAAS,CAAE,IAAKiC,EAAe,MAAOC,CAAgB,EAQtDC,EAAY,4JAEZC,EAAW,gMAEXC,EAAc,6JACdC,EAAa,iMAEjB,SAASC,EAAcC,EAAG,CACxB,OAAOA,IAAM,KAAOA,IAAM;AAAA,GAAQA,IAAM,MAAQA,IAAM,GACxD,CAFStC,EAAAqC,EAAA,gBAIT,SAASE,EAASD,EAAG,CACnB,OAAOA,IAAM,KAAOA,IAAM,GAC5B,CAFStC,EAAAuC,EAAA,WAIT,SAASC,EAAaF,EAAG,CACvB,OAAOA,IAAM,KAAOD,EAAaC,CAAC,CACpC,CAFStC,EAAAwC,EAAA,eAIT,SAASC,EAASC,EAAOJ,EAAG,CAC1B,OAAOI,EAAM,KAAKJ,CAAC,CACrB,CAFStC,EAAAyC,EAAA,WAIT,SAASE,GAAUD,EAAOJ,EAAG,CAC3B,MAAO,CAACG,EAAQC,EAAOJ,CAAC,CAC1B,CAFStC,EAAA2C,GAAA,YAIT,IAAI9C,EAAI,EACRT,EAAI,MAAQ,CACV,MAAOS,IACP,iBAAkBA,IAClB,KAAMA,IACN,YAAaA,IACb,UAAWA,IACX,UAAWA,IACX,iBAAkBA,IAClB,QAASA,IACT,eAAgBA,IAChB,YAAaA,IACb,mBAAoBA,IACpB,iBAAkBA,IAClB,QAASA,IACT,eAAgBA,IAChB,cAAeA,IACf,MAAOA,IACP,aAAcA,IACd,eAAgBA,IAChB,UAAWA,IACX,eAAgBA,IAChB,iBAAkBA,IAClB,SAAUA,IACV,eAAgBA,IAChB,OAAQA,IACR,YAAaA,IACb,sBAAuBA,IACvB,aAAcA,IACd,oBAAqBA,IACrB,oBAAqBA,IACrB,sBAAuBA,IACvB,sBAAuBA,IACvB,sBAAuBA,IACvB,UAAWA,IACX,oBAAqBA,IACrB,OAAQA,IACR,cAAeA,GACjB,EAEAT,EAAI,aAAe,CACjB,IAAO,IACP,GAAM,IACN,GAAM,IACN,KAAQ,IACR,KAAQ,GACV,EAEAA,EAAI,SAAW,CACb,IAAO,IACP,GAAM,IACN,GAAM,IACN,KAAQ,IACR,KAAQ,IACR,MAAS,IACT,OAAU,IACV,MAAS,IACT,OAAU,IACV,MAAS,IACT,OAAU,IACV,KAAQ,IACR,OAAU,IACV,IAAO,IACP,OAAU,IACV,MAAS,IACT,OAAU,IACV,KAAQ,IACR,OAAU,IACV,MAAS,IACT,OAAU,IACV,KAAQ,IACR,OAAU,IACV,OAAU,IACV,MAAS,IACT,OAAU,IACV,OAAU,IACV,OAAU,IACV,KAAQ,IACR,MAAS,IACT,OAAU,IACV,MAAS,IACT,OAAU,IACV,KAAQ,IACR,OAAU,IACV,OAAU,IACV,MAAS,IACT,MAAS,IACT,OAAU,IACV,MAAS,IACT,OAAU,IACV,KAAQ,IACR,OAAU,IACV,OAAU,IACV,MAAS,IACT,OAAU,IACV,IAAO,IACP,KAAQ,IACR,OAAU,IACV,MAAS,IACT,OAAU,IACV,KAAQ,IACR,OAAU,IACV,OAAU,IACV,MAAS,IACT,OAAU,IACV,OAAU,IACV,OAAU,IACV,KAAQ,IACR,MAAS,IACT,MAAS,IACT,OAAU,IACV,MAAS,IACT,OAAU,IACV,KAAQ,IACR,OAAU,IACV,KAAQ,IACR,KAAQ,IACR,IAAO,IACP,KAAQ,IACR,MAAS,IACT,KAAQ,IACR,MAAS,IACT,OAAU,IACV,IAAO,IACP,OAAU,IACV,KAAQ,IACR,IAAO,IACP,KAAQ,IACR,MAAS,IACT,IAAO,IACP,IAAO,IACP,KAAQ,IACR,IAAO,IACP,OAAU,IACV,KAAQ,IACR,KAAQ,IACR,KAAQ,IACR,MAAS,IACT,MAAS,IACT,KAAQ,IACR,OAAU,IACV,MAAS,IACT,KAAQ,IACR,MAAS,IACT,OAAU,IACV,OAAU,IACV,OAAU,IACV,OAAU,IACV,MAAS,IACT,OAAU,IACV,MAAS,IACT,MAAS,IACT,OAAU,IACV,OAAU,IACV,KAAQ,IACR,KAAQ,IACR,KAAQ,IACR,MAAS,IACT,MAAS,IACT,KAAQ,IACR,MAAS,IACT,MAAS,IACT,QAAW,IACX,KAAQ,IACR,IAAO,IACP,MAAS,IACT,KAAQ,IACR,MAAS,IACT,OAAU,IACV,GAAM,IACN,GAAM,IACN,GAAM,IACN,QAAW,IACX,GAAM,IACN,IAAO,IACP,MAAS,IACT,IAAO,IACP,QAAW,IACX,IAAO,IACP,IAAO,IACP,IAAO,IACP,MAAS,IACT,MAAS,IACT,KAAQ,IACR,MAAS,IACT,MAAS,IACT,QAAW,IACX,KAAQ,IACR,IAAO,IACP,MAAS,IACT,KAAQ,IACR,MAAS,IACT,OAAU,IACV,GAAM,IACN,GAAM,IACN,GAAM,IACN,QAAW,IACX,GAAM,IACN,IAAO,IACP,OAAU,IACV,MAAS,IACT,IAAO,IACP,QAAW,IACX,IAAO,IACP,IAAO,IACP,IAAO,IACP,MAAS,IACT,SAAY,IACZ,MAAS,IACT,IAAO,IACP,KAAQ,KACR,KAAQ,KACR,OAAU,KACV,KAAQ,KACR,IAAO,KACP,IAAO,KACP,IAAO,KACP,MAAS,KACT,MAAS,KACT,MAAS,KACT,MAAS,KACT,MAAS,KACT,MAAS,KACT,MAAS,KACT,MAAS,KACT,OAAU,KACV,OAAU,KACV,KAAQ,KACR,OAAU,KACV,OAAU,KACV,MAAS,KACT,MAAS,KACT,OAAU,KACV,OAAU,KACV,MAAS,KACT,MAAS,KACT,KAAQ,KACR,MAAS,KACT,OAAU,KACV,KAAQ,KACR,MAAS,KACT,QAAW,KACX,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,MAAS,KACT,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,OAAU,KACV,KAAQ,KACR,MAAS,KACT,MAAS,KACT,MAAS,KACT,KAAQ,KACR,MAAS,KACT,GAAM,KACN,KAAQ,KACR,IAAO,KACP,MAAS,KACT,OAAU,KACV,MAAS,KACT,KAAQ,KACR,MAAS,KACT,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,OAAU,KACV,IAAO,KACP,KAAQ,KACR,MAAS,KACT,GAAM,KACN,MAAS,KACT,GAAM,KACN,GAAM,KACN,IAAO,KACP,IAAO,KACP,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,MAAS,KACT,OAAU,KACV,KAAQ,KACR,KAAQ,KACR,MAAS,KACT,MAAS,KACT,OAAU,KACV,OAAU,KACV,KAAQ,KACR,KAAQ,KACR,IAAO,KACP,OAAU,KACV,MAAS,KACT,OAAU,KACV,MAAS,IACX,EAEA,OAAO,KAAKA,EAAI,QAAQ,EAAE,QAAQ,SAAUwD,EAAK,CAC/C,IAAIC,EAAIzD,EAAI,SAASwD,CAAG,EACpBE,EAAI,OAAOD,GAAM,SAAW,OAAO,aAAaA,CAAC,EAAIA,EACzDzD,EAAI,SAASwD,CAAG,EAAIE,CACtB,CAAC,EAED,QAASA,KAAK1D,EAAI,MAChBA,EAAI,MAAMA,EAAI,MAAM0D,CAAC,CAAC,EAAIA,EAI5BjD,EAAIT,EAAI,MAER,SAASW,GAAMJ,EAAQoD,EAAOvB,EAAM,CAClC7B,EAAOoD,CAAK,GAAKpD,EAAOoD,CAAK,EAAEvB,CAAI,CACrC,CAFSxB,EAAAD,GAAA,QAIT,SAASa,EAAUjB,EAAQqD,EAAUxB,EAAM,CACrC7B,EAAO,UAAUgB,EAAUhB,CAAM,EACrCI,GAAKJ,EAAQqD,EAAUxB,CAAI,CAC7B,CAHSxB,EAAAY,EAAA,YAKT,SAASD,EAAWhB,EAAQ,CAC1BA,EAAO,SAAWsD,EAAStD,EAAO,IAAKA,EAAO,QAAQ,EAClDA,EAAO,UAAUI,GAAKJ,EAAQ,SAAUA,EAAO,QAAQ,EAC3DA,EAAO,SAAW,EACpB,CAJSK,EAAAW,EAAA,aAMT,SAASsC,EAAU3D,EAAK4D,EAAM,CAC5B,OAAI5D,EAAI,OAAM4D,EAAOA,EAAK,KAAK,GAC3B5D,EAAI,YAAW4D,EAAOA,EAAK,QAAQ,OAAQ,GAAG,GAC3CA,CACT,CAJSlD,EAAAiD,EAAA,YAMT,SAASpC,EAAOlB,EAAQ2B,EAAI,CAC1B,OAAAX,EAAUhB,CAAM,EACZA,EAAO,gBACT2B,GAAM;AAAA,QAAa3B,EAAO,KACxB;AAAA,UAAeA,EAAO,OACtB;AAAA,QAAaA,EAAO,GAExB2B,EAAK,IAAI,MAAMA,CAAE,EACjB3B,EAAO,MAAQ2B,EACfvB,GAAKJ,EAAQ,UAAW2B,CAAE,EACnB3B,CACT,CAXSK,EAAAa,EAAA,SAaT,SAASG,GAAKrB,EAAQ,CACpB,OAAIA,EAAO,SAAW,CAACA,EAAO,YAAYwD,GAAWxD,EAAQ,mBAAmB,EAC3EA,EAAO,QAAUE,EAAE,OACrBF,EAAO,QAAUE,EAAE,kBACnBF,EAAO,QAAUE,EAAE,MACpBgB,EAAMlB,EAAQ,gBAAgB,EAEhCgB,EAAUhB,CAAM,EAChBA,EAAO,EAAI,GACXA,EAAO,OAAS,GAChBI,GAAKJ,EAAQ,OAAO,EACpBJ,EAAU,KAAKI,EAAQA,EAAO,OAAQA,EAAO,GAAG,EACzCA,CACT,CAbSK,EAAAgB,GAAA,OAeT,SAASmC,GAAYxD,EAAQyD,EAAS,CACpC,GAAI,OAAOzD,GAAW,UAAY,EAAEA,aAAkBJ,GACpD,MAAM,IAAI,MAAM,wBAAwB,EAEtCI,EAAO,QACTkB,EAAMlB,EAAQyD,CAAO,CAEzB,CAPSpD,EAAAmD,GAAA,cAST,SAASE,GAAQ1D,EAAQ,CAClBA,EAAO,SAAQA,EAAO,QAAUA,EAAO,QAAQA,EAAO,SAAS,EAAE,GACtE,IAAI2D,EAAS3D,EAAO,KAAKA,EAAO,KAAK,OAAS,CAAC,GAAKA,EAChD4D,EAAM5D,EAAO,IAAM,CAAE,KAAMA,EAAO,QAAS,WAAY,CAAC,CAAE,EAG1DA,EAAO,IAAI,QACb4D,EAAI,GAAKD,EAAO,IAElB3D,EAAO,WAAW,OAAS,EAC3BiB,EAASjB,EAAQ,iBAAkB4D,CAAG,CACxC,CAXSvD,EAAAqD,GAAA,UAaT,SAASG,GAAOC,EAAMC,EAAW,CAC/B,IAAIrD,EAAIoD,EAAK,QAAQ,GAAG,EACpBE,EAAWtD,EAAI,EAAI,CAAE,GAAIoD,CAAK,EAAIA,EAAK,MAAM,GAAG,EAChDG,GAASD,EAAS,CAAC,EACnBE,GAAQF,EAAS,CAAC,EAGtB,OAAID,GAAaD,IAAS,UACxBG,GAAS,QACTC,GAAQ,IAGH,CAAE,OAAQD,GAAQ,MAAOC,EAAM,CACxC,CAbS7D,EAAAwD,GAAA,SAeT,SAASM,GAAQnE,EAAQ,CAKvB,GAJKA,EAAO,SACVA,EAAO,WAAaA,EAAO,WAAWA,EAAO,SAAS,EAAE,GAGtDA,EAAO,WAAW,QAAQA,EAAO,UAAU,IAAM,IACnDA,EAAO,IAAI,WAAW,eAAeA,EAAO,UAAU,EAAG,CACzDA,EAAO,WAAaA,EAAO,YAAc,GACzC,MACF,CAEA,GAAIA,EAAO,IAAI,MAAO,CACpB,IAAIoE,EAAKP,GAAM7D,EAAO,WAAY,EAAI,EAClCiE,EAASG,EAAG,OACZF,EAAQE,EAAG,MAEf,GAAIH,IAAW,QAEb,GAAIC,IAAU,OAASlE,EAAO,cAAgBoC,EAC5CoB,GAAWxD,EACT,gCAAkCoC,EAAgB;AAAA,UACrCpC,EAAO,WAAW,UACxBkE,IAAU,SAAWlE,EAAO,cAAgBqC,EACrDmB,GAAWxD,EACT,kCAAoCqC,EAAkB;AAAA,UACzCrC,EAAO,WAAW,MAC5B,CACL,IAAI4D,GAAM5D,EAAO,IACb2D,GAAS3D,EAAO,KAAKA,EAAO,KAAK,OAAS,CAAC,GAAKA,EAChD4D,GAAI,KAAOD,GAAO,KACpBC,GAAI,GAAK,OAAO,OAAOD,GAAO,EAAE,GAElCC,GAAI,GAAGM,CAAK,EAAIlE,EAAO,WACzB,CAMFA,EAAO,WAAW,KAAK,CAACA,EAAO,WAAYA,EAAO,WAAW,CAAC,CAChE,MAEEA,EAAO,IAAI,WAAWA,EAAO,UAAU,EAAIA,EAAO,YAClDiB,EAASjB,EAAQ,cAAe,CAC9B,KAAMA,EAAO,WACb,MAAOA,EAAO,WAChB,CAAC,EAGHA,EAAO,WAAaA,EAAO,YAAc,EAC3C,CAlDSK,EAAA8D,GAAA,UAoDT,SAASE,GAASrE,EAAQsE,EAAa,CACrC,GAAItE,EAAO,IAAI,MAAO,CAEpB,IAAI4D,EAAM5D,EAAO,IAGboE,EAAKP,GAAM7D,EAAO,OAAO,EAC7B4D,EAAI,OAASQ,EAAG,OAChBR,EAAI,MAAQQ,EAAG,MACfR,EAAI,IAAMA,EAAI,GAAGQ,EAAG,MAAM,GAAK,GAE3BR,EAAI,QAAU,CAACA,EAAI,MACrBJ,GAAWxD,EAAQ,6BACjB,KAAK,UAAUA,EAAO,OAAO,CAAC,EAChC4D,EAAI,IAAMQ,EAAG,QAGf,IAAIT,GAAS3D,EAAO,KAAKA,EAAO,KAAK,OAAS,CAAC,GAAKA,EAChD4D,EAAI,IAAMD,GAAO,KAAOC,EAAI,IAC9B,OAAO,KAAKA,EAAI,EAAE,EAAE,QAAQ,SAAUW,GAAG,CACvCtD,EAASjB,EAAQ,kBAAmB,CAClC,OAAQuE,GACR,IAAKX,EAAI,GAAGW,EAAC,CACf,CAAC,CACH,CAAC,EAMH,QAAS7D,GAAI,EAAGI,GAAId,EAAO,WAAW,OAAQU,GAAII,GAAGJ,KAAK,CACxD,IAAI8D,GAAKxE,EAAO,WAAWU,EAAC,EACxBoD,GAAOU,GAAG,CAAC,EACXC,GAAQD,GAAG,CAAC,EACZR,GAAWH,GAAMC,GAAM,EAAI,EAC3BG,GAASD,GAAS,OAClBE,GAAQF,GAAS,MACjBU,GAAMT,KAAW,GAAK,GAAML,EAAI,GAAGK,EAAM,GAAK,GAC9CxD,GAAI,CACN,KAAMqD,GACN,MAAOW,GACP,OAAQR,GACR,MAAOC,GACP,IAAKQ,EACP,EAIIT,IAAUA,KAAW,SAAW,CAACS,KACnClB,GAAWxD,EAAQ,6BACjB,KAAK,UAAUiE,EAAM,CAAC,EACxBxD,GAAE,IAAMwD,IAEVjE,EAAO,IAAI,WAAW8D,EAAI,EAAIrD,GAC9BQ,EAASjB,EAAQ,cAAeS,EAAC,CACnC,CACAT,EAAO,WAAW,OAAS,CAC7B,CAEAA,EAAO,IAAI,cAAgB,CAAC,CAACsE,EAG7BtE,EAAO,QAAU,GACjBA,EAAO,KAAK,KAAKA,EAAO,GAAG,EAC3BiB,EAASjB,EAAQ,YAAaA,EAAO,GAAG,EACnCsE,IAEC,CAACtE,EAAO,UAAYA,EAAO,QAAQ,YAAY,IAAM,SACvDA,EAAO,MAAQE,EAAE,OAEjBF,EAAO,MAAQE,EAAE,KAEnBF,EAAO,IAAM,KACbA,EAAO,QAAU,IAEnBA,EAAO,WAAaA,EAAO,YAAc,GACzCA,EAAO,WAAW,OAAS,CAC7B,CA7ESK,EAAAgE,GAAA,WA+ET,SAASM,GAAU3E,EAAQ,CACzB,GAAI,CAACA,EAAO,QAAS,CACnBwD,GAAWxD,EAAQ,wBAAwB,EAC3CA,EAAO,UAAY,MACnBA,EAAO,MAAQE,EAAE,KACjB,MACF,CAEA,GAAIF,EAAO,OAAQ,CACjB,GAAIA,EAAO,UAAY,SAAU,CAC/BA,EAAO,QAAU,KAAOA,EAAO,QAAU,IACzCA,EAAO,QAAU,GACjBA,EAAO,MAAQE,EAAE,OACjB,MACF,CACAe,EAASjB,EAAQ,WAAYA,EAAO,MAAM,EAC1CA,EAAO,OAAS,EAClB,CAIA,IAAI4E,EAAI5E,EAAO,KAAK,OAChB6E,EAAU7E,EAAO,QAChBA,EAAO,SACV6E,EAAUA,EAAQ7E,EAAO,SAAS,EAAE,GAGtC,QADI8E,EAAUD,EACPD,KAAK,CACV,IAAIG,GAAQ/E,EAAO,KAAK4E,CAAC,EACzB,GAAIG,GAAM,OAASD,EAEjBtB,GAAWxD,EAAQ,sBAAsB,MAEzC,MAEJ,CAGA,GAAI4E,EAAI,EAAG,CACTpB,GAAWxD,EAAQ,0BAA4BA,EAAO,OAAO,EAC7DA,EAAO,UAAY,KAAOA,EAAO,QAAU,IAC3CA,EAAO,MAAQE,EAAE,KACjB,MACF,CACAF,EAAO,QAAU6E,EAEjB,QADI1B,GAAInD,EAAO,KAAK,OACbmD,MAAMyB,GAAG,CACd,IAAIhB,GAAM5D,EAAO,IAAMA,EAAO,KAAK,IAAI,EACvCA,EAAO,QAAUA,EAAO,IAAI,KAC5BiB,EAASjB,EAAQ,aAAcA,EAAO,OAAO,EAE7C,IAAIgF,GAAI,CAAC,EACT,QAAStE,MAAKkD,GAAI,GAChBoB,GAAEtE,EAAC,EAAIkD,GAAI,GAAGlD,EAAC,EAGjB,IAAIiD,GAAS3D,EAAO,KAAKA,EAAO,KAAK,OAAS,CAAC,GAAKA,EAChDA,EAAO,IAAI,OAAS4D,GAAI,KAAOD,GAAO,IAExC,OAAO,KAAKC,GAAI,EAAE,EAAE,QAAQ,SAAUW,GAAG,CACvC,IAAIU,GAAIrB,GAAI,GAAGW,EAAC,EAChBtD,EAASjB,EAAQ,mBAAoB,CAAE,OAAQuE,GAAG,IAAKU,EAAE,CAAC,CAC5D,CAAC,CAEL,CACIL,IAAM,IAAG5E,EAAO,WAAa,IACjCA,EAAO,QAAUA,EAAO,YAAcA,EAAO,WAAa,GAC1DA,EAAO,WAAW,OAAS,EAC3BA,EAAO,MAAQE,EAAE,IACnB,CArESG,EAAAsE,GAAA,YAuET,SAASO,GAAalF,EAAQ,CAC5B,IAAImF,EAASnF,EAAO,OAChBoF,EAAWD,EAAO,YAAY,EAC9BE,EACAC,GAAS,GAEb,OAAItF,EAAO,SAASmF,CAAM,EACjBnF,EAAO,SAASmF,CAAM,EAE3BnF,EAAO,SAASoF,CAAQ,EACnBpF,EAAO,SAASoF,CAAQ,GAEjCD,EAASC,EACLD,EAAO,OAAO,CAAC,IAAM,MACnBA,EAAO,OAAO,CAAC,IAAM,KACvBA,EAASA,EAAO,MAAM,CAAC,EACvBE,EAAM,SAASF,EAAQ,EAAE,EACzBG,GAASD,EAAI,SAAS,EAAE,IAExBF,EAASA,EAAO,MAAM,CAAC,EACvBE,EAAM,SAASF,EAAQ,EAAE,EACzBG,GAASD,EAAI,SAAS,EAAE,IAG5BF,EAASA,EAAO,QAAQ,MAAO,EAAE,EAC7B,MAAME,CAAG,GAAKC,GAAO,YAAY,IAAMH,GACzC3B,GAAWxD,EAAQ,0BAA0B,EACtC,IAAMA,EAAO,OAAS,KAGxB,OAAO,cAAcqF,CAAG,EACjC,CA/BShF,EAAA6E,GAAA,eAiCT,SAASK,GAAiBvF,EAAQ2C,EAAG,CAC/BA,IAAM,KACR3C,EAAO,MAAQE,EAAE,UACjBF,EAAO,iBAAmBA,EAAO,UACvB0C,EAAaC,CAAC,IAGxBa,GAAWxD,EAAQ,kCAAkC,EACrDA,EAAO,SAAW2C,EAClB3C,EAAO,MAAQE,EAAE,KAErB,CAXSG,EAAAkF,GAAA,mBAaT,SAASC,GAAQzD,EAAOrB,EAAG,CACzB,IAAI+E,EAAS,GACb,OAAI/E,EAAIqB,EAAM,SACZ0D,EAAS1D,EAAM,OAAOrB,CAAC,GAElB+E,CACT,CANSpF,EAAAmF,GAAA,UAQT,SAASlE,GAAOS,EAAO,CACrB,IAAI/B,EAAS,KACb,GAAI,KAAK,MACP,MAAM,KAAK,MAEb,GAAIA,EAAO,OACT,OAAOkB,EAAMlB,EACX,sDAAsD,EAE1D,GAAI+B,IAAU,KACZ,OAAOV,GAAIrB,CAAM,EAEf,OAAO+B,GAAU,WACnBA,EAAQA,EAAM,SAAS,GAIzB,QAFIrB,EAAI,EACJiC,EAAI,GAENA,EAAI6C,GAAOzD,EAAOrB,GAAG,EACrBV,EAAO,EAAI2C,EAEP,EAACA,GAcL,OAVI3C,EAAO,gBACTA,EAAO,WACH2C,IAAM;AAAA,GACR3C,EAAO,OACPA,EAAO,OAAS,GAEhBA,EAAO,UAIHA,EAAO,MAAO,CACpB,KAAKE,EAAE,MAEL,GADAF,EAAO,MAAQE,EAAE,iBACbyC,IAAM,SACR,SAEF4C,GAAgBvF,EAAQ2C,CAAC,EACzB,SAEF,KAAKzC,EAAE,iBACLqF,GAAgBvF,EAAQ2C,CAAC,EACzB,SAEF,KAAKzC,EAAE,KACL,GAAIF,EAAO,SAAW,CAACA,EAAO,WAAY,CAExC,QADI0F,GAAShF,EAAI,EACViC,GAAKA,IAAM,KAAOA,IAAM,KAC7BA,EAAI6C,GAAOzD,EAAOrB,GAAG,EACjBiC,GAAK3C,EAAO,gBACdA,EAAO,WACH2C,IAAM;AAAA,GACR3C,EAAO,OACPA,EAAO,OAAS,GAEhBA,EAAO,UAIbA,EAAO,UAAY+B,EAAM,UAAU2D,GAAQhF,EAAI,CAAC,CAClD,CACIiC,IAAM,KAAO,EAAE3C,EAAO,SAAWA,EAAO,YAAc,CAACA,EAAO,SAChEA,EAAO,MAAQE,EAAE,UACjBF,EAAO,iBAAmBA,EAAO,WAE7B,CAAC0C,EAAaC,CAAC,IAAM,CAAC3C,EAAO,SAAWA,EAAO,aACjDwD,GAAWxD,EAAQ,iCAAiC,EAElD2C,IAAM,IACR3C,EAAO,MAAQE,EAAE,YAEjBF,EAAO,UAAY2C,GAGvB,SAEF,KAAKzC,EAAE,OAEDyC,IAAM,IACR3C,EAAO,MAAQE,EAAE,cAEjBF,EAAO,QAAU2C,EAEnB,SAEF,KAAKzC,EAAE,cACDyC,IAAM,IACR3C,EAAO,MAAQE,EAAE,WAEjBF,EAAO,QAAU,IAAM2C,EACvB3C,EAAO,MAAQE,EAAE,QAEnB,SAEF,KAAKA,EAAE,UAEL,GAAIyC,IAAM,IACR3C,EAAO,MAAQE,EAAE,UACjBF,EAAO,SAAW,WACT,CAAA0C,EAAaC,CAAC,EAElB,GAAIG,EAAQR,EAAWK,CAAC,EAC7B3C,EAAO,MAAQE,EAAE,SACjBF,EAAO,QAAU2C,UACRA,IAAM,IACf3C,EAAO,MAAQE,EAAE,UACjBF,EAAO,QAAU,WACR2C,IAAM,IACf3C,EAAO,MAAQE,EAAE,UACjBF,EAAO,aAAeA,EAAO,aAAe,OACvC,CAGL,GAFAwD,GAAWxD,EAAQ,aAAa,EAE5BA,EAAO,iBAAmB,EAAIA,EAAO,SAAU,CACjD,IAAI2F,GAAM3F,EAAO,SAAWA,EAAO,iBACnC2C,EAAI,IAAI,MAAMgD,EAAG,EAAE,KAAK,GAAG,EAAIhD,CACjC,CACA3C,EAAO,UAAY,IAAM2C,EACzB3C,EAAO,MAAQE,EAAE,IACnB,CACA,SAEF,KAAKA,EAAE,WACAF,EAAO,SAAW2C,GAAG,YAAY,IAAMT,GAC1CjB,EAASjB,EAAQ,aAAa,EAC9BA,EAAO,MAAQE,EAAE,MACjBF,EAAO,SAAW,GAClBA,EAAO,MAAQ,IACNA,EAAO,SAAW2C,IAAM,MACjC3C,EAAO,MAAQE,EAAE,QACjBF,EAAO,QAAU,GACjBA,EAAO,SAAW,KACRA,EAAO,SAAW2C,GAAG,YAAY,IAAMR,GACjDnC,EAAO,MAAQE,EAAE,SACbF,EAAO,SAAWA,EAAO,UAC3BwD,GAAWxD,EACT,6CAA6C,EAEjDA,EAAO,QAAU,GACjBA,EAAO,SAAW,IACT2C,IAAM,KACf1B,EAASjB,EAAQ,oBAAqBA,EAAO,QAAQ,EACrDA,EAAO,SAAW,GAClBA,EAAO,MAAQE,EAAE,OACR0C,EAAQD,CAAC,IAClB3C,EAAO,MAAQE,EAAE,kBACjBF,EAAO,UAAY2C,GAIrB,SAEF,KAAKzC,EAAE,iBACDyC,IAAM3C,EAAO,IACfA,EAAO,MAAQE,EAAE,UACjBF,EAAO,EAAI,IAEbA,EAAO,UAAY2C,EACnB,SAEF,KAAKzC,EAAE,QACDyC,IAAM,KACR3C,EAAO,MAAQE,EAAE,KACjBe,EAASjB,EAAQ,YAAaA,EAAO,OAAO,EAC5CA,EAAO,QAAU,KAEjBA,EAAO,SAAW2C,EACdA,IAAM,IACR3C,EAAO,MAAQE,EAAE,YACR0C,EAAQD,CAAC,IAClB3C,EAAO,MAAQE,EAAE,eACjBF,EAAO,EAAI2C,IAGf,SAEF,KAAKzC,EAAE,eACLF,EAAO,SAAW2C,EACdA,IAAM3C,EAAO,IACfA,EAAO,EAAI,GACXA,EAAO,MAAQE,EAAE,SAEnB,SAEF,KAAKA,EAAE,YACLF,EAAO,SAAW2C,EACdA,IAAM,IACR3C,EAAO,MAAQE,EAAE,QACR0C,EAAQD,CAAC,IAClB3C,EAAO,MAAQE,EAAE,mBACjBF,EAAO,EAAI2C,GAEb,SAEF,KAAKzC,EAAE,mBACLF,EAAO,SAAW2C,EACdA,IAAM3C,EAAO,IACfA,EAAO,MAAQE,EAAE,YACjBF,EAAO,EAAI,IAEb,SAEF,KAAKE,EAAE,QACDyC,IAAM,IACR3C,EAAO,MAAQE,EAAE,eAEjBF,EAAO,SAAW2C,EAEpB,SAEF,KAAKzC,EAAE,eACDyC,IAAM,KACR3C,EAAO,MAAQE,EAAE,cACjBF,EAAO,QAAUsD,EAAStD,EAAO,IAAKA,EAAO,OAAO,EAChDA,EAAO,SACTiB,EAASjB,EAAQ,YAAaA,EAAO,OAAO,EAE9CA,EAAO,QAAU,KAEjBA,EAAO,SAAW,IAAM2C,EACxB3C,EAAO,MAAQE,EAAE,SAEnB,SAEF,KAAKA,EAAE,cACDyC,IAAM,KACRa,GAAWxD,EAAQ,mBAAmB,EAGtCA,EAAO,SAAW,KAAO2C,EACzB3C,EAAO,MAAQE,EAAE,SAEjBF,EAAO,MAAQE,EAAE,KAEnB,SAEF,KAAKA,EAAE,MACDyC,IAAM,IACR3C,EAAO,MAAQE,EAAE,aAEjBF,EAAO,OAAS2C,EAElB,SAEF,KAAKzC,EAAE,aACDyC,IAAM,IACR3C,EAAO,MAAQE,EAAE,gBAEjBF,EAAO,OAAS,IAAM2C,EACtB3C,EAAO,MAAQE,EAAE,OAEnB,SAEF,KAAKA,EAAE,eACDyC,IAAM,KACJ3C,EAAO,OACTiB,EAASjB,EAAQ,UAAWA,EAAO,KAAK,EAE1CiB,EAASjB,EAAQ,cAAc,EAC/BA,EAAO,MAAQ,GACfA,EAAO,MAAQE,EAAE,MACRyC,IAAM,IACf3C,EAAO,OAAS,KAEhBA,EAAO,OAAS,KAAO2C,EACvB3C,EAAO,MAAQE,EAAE,OAEnB,SAEF,KAAKA,EAAE,UACDyC,IAAM,IACR3C,EAAO,MAAQE,EAAE,iBACRwC,EAAaC,CAAC,EACvB3C,EAAO,MAAQE,EAAE,eAEjBF,EAAO,cAAgB2C,EAEzB,SAEF,KAAKzC,EAAE,eACL,GAAI,CAACF,EAAO,cAAgB0C,EAAaC,CAAC,EACxC,SACSA,IAAM,IACf3C,EAAO,MAAQE,EAAE,iBAEjBF,EAAO,cAAgB2C,EAEzB,SAEF,KAAKzC,EAAE,iBACDyC,IAAM,KACR1B,EAASjB,EAAQ,0BAA2B,CAC1C,KAAMA,EAAO,aACb,KAAMA,EAAO,YACf,CAAC,EACDA,EAAO,aAAeA,EAAO,aAAe,GAC5CA,EAAO,MAAQE,EAAE,OAEjBF,EAAO,cAAgB,IAAM2C,EAC7B3C,EAAO,MAAQE,EAAE,gBAEnB,SAEF,KAAKA,EAAE,SACD4C,EAAQP,EAAUI,CAAC,EACrB3C,EAAO,SAAW2C,GAElBe,GAAO1D,CAAM,EACT2C,IAAM,IACR0B,GAAQrE,CAAM,EACL2C,IAAM,IACf3C,EAAO,MAAQE,EAAE,gBAEZwC,EAAaC,CAAC,GACjBa,GAAWxD,EAAQ,+BAA+B,EAEpDA,EAAO,MAAQE,EAAE,SAGrB,SAEF,KAAKA,EAAE,eACDyC,IAAM,KACR0B,GAAQrE,EAAQ,EAAI,EACpB2E,GAAS3E,CAAM,IAEfwD,GAAWxD,EAAQ,gDAAgD,EACnEA,EAAO,MAAQE,EAAE,QAEnB,SAEF,KAAKA,EAAE,OAEL,GAAIwC,EAAaC,CAAC,EAChB,SACSA,IAAM,IACf0B,GAAQrE,CAAM,EACL2C,IAAM,IACf3C,EAAO,MAAQE,EAAE,eACR4C,EAAQR,EAAWK,CAAC,GAC7B3C,EAAO,WAAa2C,EACpB3C,EAAO,YAAc,GACrBA,EAAO,MAAQE,EAAE,aAEjBsD,GAAWxD,EAAQ,wBAAwB,EAE7C,SAEF,KAAKE,EAAE,YACDyC,IAAM,IACR3C,EAAO,MAAQE,EAAE,aACRyC,IAAM,KACfa,GAAWxD,EAAQ,yBAAyB,EAC5CA,EAAO,YAAcA,EAAO,WAC5BmE,GAAOnE,CAAM,EACbqE,GAAQrE,CAAM,GACL0C,EAAaC,CAAC,EACvB3C,EAAO,MAAQE,EAAE,sBACR4C,EAAQP,EAAUI,CAAC,EAC5B3C,EAAO,YAAc2C,EAErBa,GAAWxD,EAAQ,wBAAwB,EAE7C,SAEF,KAAKE,EAAE,sBACL,GAAIyC,IAAM,IACR3C,EAAO,MAAQE,EAAE,iBACZ,IAAIwC,EAAaC,CAAC,EACvB,SAEAa,GAAWxD,EAAQ,yBAAyB,EAC5CA,EAAO,IAAI,WAAWA,EAAO,UAAU,EAAI,GAC3CA,EAAO,YAAc,GACrBiB,EAASjB,EAAQ,cAAe,CAC9B,KAAMA,EAAO,WACb,MAAO,EACT,CAAC,EACDA,EAAO,WAAa,GAChB2C,IAAM,IACR0B,GAAQrE,CAAM,EACL8C,EAAQR,EAAWK,CAAC,GAC7B3C,EAAO,WAAa2C,EACpB3C,EAAO,MAAQE,EAAE,cAEjBsD,GAAWxD,EAAQ,wBAAwB,EAC3CA,EAAO,MAAQE,EAAE,QAGrB,SAEF,KAAKA,EAAE,aACL,GAAIwC,EAAaC,CAAC,EAChB,SACSC,EAAQD,CAAC,GAClB3C,EAAO,EAAI2C,EACX3C,EAAO,MAAQE,EAAE,sBAEjBsD,GAAWxD,EAAQ,0BAA0B,EAC7CA,EAAO,MAAQE,EAAE,sBACjBF,EAAO,YAAc2C,GAEvB,SAEF,KAAKzC,EAAE,oBACL,GAAIyC,IAAM3C,EAAO,EAAG,CACd2C,IAAM,IACR3C,EAAO,MAAQE,EAAE,sBAEjBF,EAAO,aAAe2C,EAExB,QACF,CACAwB,GAAOnE,CAAM,EACbA,EAAO,EAAI,GACXA,EAAO,MAAQE,EAAE,oBACjB,SAEF,KAAKA,EAAE,oBACDwC,EAAaC,CAAC,EAChB3C,EAAO,MAAQE,EAAE,OACRyC,IAAM,IACf0B,GAAQrE,CAAM,EACL2C,IAAM,IACf3C,EAAO,MAAQE,EAAE,eACR4C,EAAQR,EAAWK,CAAC,GAC7Ba,GAAWxD,EAAQ,kCAAkC,EACrDA,EAAO,WAAa2C,EACpB3C,EAAO,YAAc,GACrBA,EAAO,MAAQE,EAAE,aAEjBsD,GAAWxD,EAAQ,wBAAwB,EAE7C,SAEF,KAAKE,EAAE,sBACL,GAAI,CAAC2C,EAAYF,CAAC,EAAG,CACfA,IAAM,IACR3C,EAAO,MAAQE,EAAE,sBAEjBF,EAAO,aAAe2C,EAExB,QACF,CACAwB,GAAOnE,CAAM,EACT2C,IAAM,IACR0B,GAAQrE,CAAM,EAEdA,EAAO,MAAQE,EAAE,OAEnB,SAEF,KAAKA,EAAE,UACL,GAAKF,EAAO,QAaD2C,IAAM,IACfgC,GAAS3E,CAAM,EACN8C,EAAQP,EAAUI,CAAC,EAC5B3C,EAAO,SAAW2C,EACT3C,EAAO,QAChBA,EAAO,QAAU,KAAOA,EAAO,QAC/BA,EAAO,QAAU,GACjBA,EAAO,MAAQE,EAAE,SAEZwC,EAAaC,CAAC,GACjBa,GAAWxD,EAAQ,gCAAgC,EAErDA,EAAO,MAAQE,EAAE,yBAzBE,CACnB,GAAIwC,EAAaC,CAAC,EAChB,SACSK,GAASV,EAAWK,CAAC,EAC1B3C,EAAO,QACTA,EAAO,QAAU,KAAO2C,EACxB3C,EAAO,MAAQE,EAAE,QAEjBsD,GAAWxD,EAAQ,iCAAiC,EAGtDA,EAAO,QAAU2C,CAErB,CAcA,SAEF,KAAKzC,EAAE,oBACL,GAAIwC,EAAaC,CAAC,EAChB,SAEEA,IAAM,IACRgC,GAAS3E,CAAM,EAEfwD,GAAWxD,EAAQ,mCAAmC,EAExD,SAEF,KAAKE,EAAE,YACP,KAAKA,EAAE,sBACP,KAAKA,EAAE,sBACL,IAAI0F,GACAC,GACJ,OAAQ7F,EAAO,MAAO,CACpB,KAAKE,EAAE,YACL0F,GAAc1F,EAAE,KAChB2F,GAAS,WACT,MAEF,KAAK3F,EAAE,sBACL0F,GAAc1F,EAAE,oBAChB2F,GAAS,cACT,MAEF,KAAK3F,EAAE,sBACL0F,GAAc1F,EAAE,sBAChB2F,GAAS,cACT,KACJ,CAEA,GAAIlD,IAAM,IACR,GAAI3C,EAAO,IAAI,iBAAkB,CAC/B,IAAI8F,GAAeZ,GAAYlF,CAAM,EACrCA,EAAO,OAAS,GAChBA,EAAO,MAAQ4F,GACf5F,EAAO,MAAM8F,EAAY,CAC3B,MACE9F,EAAO6F,EAAM,GAAKX,GAAYlF,CAAM,EACpCA,EAAO,OAAS,GAChBA,EAAO,MAAQ4F,QAER9C,EAAQ9C,EAAO,OAAO,OAASyC,EAAaD,EAAaG,CAAC,EACnE3C,EAAO,QAAU2C,GAEjBa,GAAWxD,EAAQ,kCAAkC,EACrDA,EAAO6F,EAAM,GAAK,IAAM7F,EAAO,OAAS2C,EACxC3C,EAAO,OAAS,GAChBA,EAAO,MAAQ4F,IAGjB,SAEF,QACE,MAAM,IAAI,MAAM5F,EAAQ,kBAAoBA,EAAO,KAAK,CAE5D,CAGF,OAAIA,EAAO,UAAYA,EAAO,qBAC5BW,EAAkBX,CAAM,EAEnBA,CACT,CAviBSK,EAAAiB,GAAA,SA2iBJ,OAAO,eACT,UAAY,CACX,IAAIyE,EAAqB,OAAO,aAC5BC,EAAQ,KAAK,MACbC,EAAgB5F,EAAA,UAAY,CAC9B,IAAI6F,EAAW,MACXC,GAAY,CAAC,EACbC,GACAC,GACAC,GAAQ,GACRC,GAAS,UAAU,OACvB,GAAI,CAACA,GACH,MAAO,GAGT,QADId,GAAS,GACN,EAAEa,GAAQC,IAAQ,CACvB,IAAIC,GAAY,OAAO,UAAUF,EAAK,CAAC,EACvC,GACE,CAAC,SAASE,EAAS,GACnBA,GAAY,GACZA,GAAY,SACZR,EAAMQ,EAAS,IAAMA,GAErB,MAAM,WAAW,uBAAyBA,EAAS,EAEjDA,IAAa,MACfL,GAAU,KAAKK,EAAS,GAGxBA,IAAa,MACbJ,IAAiBI,IAAa,IAAM,MACpCH,GAAgBG,GAAY,KAAS,MACrCL,GAAU,KAAKC,GAAeC,EAAY,IAExCC,GAAQ,IAAMC,IAAUJ,GAAU,OAASD,KAC7CT,IAAUM,EAAmB,MAAM,KAAMI,EAAS,EAClDA,GAAU,OAAS,EAEvB,CACA,OAAOV,EACT,EApCoB,iBAsChB,OAAO,eACT,OAAO,eAAe,OAAQ,gBAAiB,CAC7C,MAAOQ,EACP,aAAc,GACd,SAAU,EACZ,CAAC,EAED,OAAO,cAAgBA,CAE3B,EAAE,CAEN,GAAG,OAAOzG,GAAY,IAAcA,GAAK,IAAM,CAAC,EAAIA,EAAO,ICriD3D,IAAAiH,GAAAC,GAAA,CAAAC,GAAAC,KAAA,CAAAA,GAAO,QAAU,CAEf,QAAS,SAASC,EAAO,CACvB,OAAI,MAAM,QACD,MAAM,QAAQA,CAAK,EAGrB,OAAO,UAAU,SAAS,KAAMA,CAAM,IAAM,gBACrD,CAEF,ICVA,IAAAC,GAAAC,GAAA,CAAAC,GAAAC,KAAA,KAAIC,GAAU,KAA0B,QAExCD,GAAO,QAAU,CAEf,YAAa,SAAUE,EAAS,CAC9B,IAAIC,EAAKC,EAAO,CAAC,EACjB,IAAKD,KAAOD,EACNA,EAAQ,eAAeC,CAAG,IAC5BC,EAAKD,CAAG,EAAID,EAAQC,CAAG,GAG3B,OAAOC,CACT,EAEA,iBAAkB,SAAUC,EAAMH,EAAS,EACrC,EAAEG,KAAQH,IAAY,OAAOA,EAAQG,CAAI,GAAM,aACjDH,EAAQG,CAAI,EAAI,GAEpB,EAEA,mBAAoB,SAAUH,EAAS,EACjC,EAAE,WAAYA,IAAa,OAAOA,EAAQ,QAAW,UAAY,OAAOA,EAAQ,QAAW,YAC7FA,EAAQ,OAAS,EAErB,EAEA,wBAAyB,SAAUA,EAAS,EACtC,EAAE,gBAAiBA,IAAa,OAAOA,EAAQ,aAAgB,WAAa,CAACD,GAAQC,EAAQ,WAAW,KAC1GA,EAAQ,YAAc,GAE1B,EAEA,gBAAiB,SAAUC,EAAKD,EAAS,EACnC,EAAEC,EAAM,QAASD,IAAY,OAAOA,EAAQC,EAAM,KAAK,GAAM,YAC/DD,EAAQC,EAAM,KAAK,EAAID,EAAQ,QAAU,IAAMC,EAAMA,EAEzD,EAEA,cAAe,SAAUA,EAAKD,EAAS,CACrC,OAAOC,EAAM,OAAQD,CACvB,CAEF,IC1CA,IAAAI,GAAAC,GAAA,CAAAC,GAAAC,KAAA,KAAIC,GAAM,KACNC,GAAqC,CAAE,GAAI,UAAY,CAAE,EAAG,MAAO,UAAY,CAAE,CAAE,EACnFC,GAAS,KACTC,GAAU,KAA0B,QAEpCC,EACAC,GAAe,GACfC,GAEJ,SAASC,GAAgBC,EAAa,CACpC,OAAAJ,EAAUF,GAAO,YAAYM,CAAW,EACxCN,GAAO,iBAAiB,oBAAqBE,CAAO,EACpDF,GAAO,iBAAiB,oBAAqBE,CAAO,EACpDF,GAAO,iBAAiB,mBAAoBE,CAAO,EACnDF,GAAO,iBAAiB,aAAcE,CAAO,EAC7CF,GAAO,iBAAiB,gBAAiBE,CAAO,EAChDF,GAAO,iBAAiB,cAAeE,CAAO,EAC9CF,GAAO,iBAAiB,gBAAiBE,CAAO,EAChDF,GAAO,iBAAiB,UAAWE,CAAO,EAC1CF,GAAO,iBAAiB,iBAAkBE,CAAO,EACjDF,GAAO,iBAAiB,YAAaE,CAAO,EAC5CF,GAAO,iBAAiB,OAAQE,CAAO,EACvCF,GAAO,iBAAiB,aAAcE,CAAO,EAC7CF,GAAO,iBAAiB,uBAAwBE,CAAO,EACvDF,GAAO,iBAAiB,WAAYE,CAAO,EAC3CF,GAAO,iBAAiB,2BAA4BE,CAAO,EAC3DF,GAAO,iBAAiB,+BAAgCE,CAAO,EAC/DF,GAAO,wBAAwBE,CAAO,EACtCF,GAAO,gBAAgB,cAAeE,CAAO,EAC7CF,GAAO,gBAAgB,cAAeE,CAAO,EAC7CF,GAAO,gBAAgB,aAAcE,CAAO,EAC5CF,GAAO,gBAAgB,OAAQE,CAAO,EACtCF,GAAO,gBAAgB,UAAWE,CAAO,EACzCF,GAAO,gBAAgB,QAASE,CAAO,EACvCF,GAAO,gBAAgB,UAAWE,CAAO,EACzCF,GAAO,gBAAgB,OAAQE,CAAO,EACtCF,GAAO,gBAAgB,OAAQE,CAAO,EACtCF,GAAO,gBAAgB,WAAYE,CAAO,EAC1CF,GAAO,gBAAgB,SAAUE,CAAO,EACxCF,GAAO,cAAc,UAAWE,CAAO,EACvCF,GAAO,cAAc,cAAeE,CAAO,EAC3CF,GAAO,cAAc,QAASE,CAAO,EACrCF,GAAO,cAAc,UAAWE,CAAO,EACvCF,GAAO,cAAc,OAAQE,CAAO,EACpCF,GAAO,cAAc,kBAAmBE,CAAO,EAC/CF,GAAO,cAAc,cAAeE,CAAO,EAC3CF,GAAO,cAAc,gBAAiBE,CAAO,EAC7CF,GAAO,cAAc,iBAAkBE,CAAO,EAC9CF,GAAO,cAAc,aAAcE,CAAO,EACnCA,CACT,CAzCSK,EAAAF,GAAA,mBA2CT,SAASG,GAAWC,EAAO,CACzB,IAAIC,EAAS,OAAOD,CAAK,EACzB,GAAI,CAAC,MAAMC,CAAM,EACf,OAAOA,EAET,IAAIC,EAASF,EAAM,YAAY,EAC/B,OAAIE,IAAW,OACN,GACEA,IAAW,QACb,GAEFF,CACT,CAZSF,EAAAC,GAAA,cAcT,SAASI,GAASC,EAAMJ,EAAO,CAC7B,IAAIK,EACJ,GAAIZ,EAAQ,QAAS,CAanB,GAXE,CAACE,GAAeF,EAAQW,EAAO,KAAK,CAAC,IACpCZ,GAAQC,EAAQ,WAAW,EAAIA,EAAQ,YAAY,QAAQA,EAAQW,EAAO,KAAK,CAAC,IAAM,GAAKX,EAAQ,eAEpGE,GAAeF,EAAQW,EAAO,KAAK,CAAC,EAAI,CAAC,GAEvCT,GAAeF,EAAQW,EAAO,KAAK,CAAC,GAAK,CAACZ,GAAQG,GAAeF,EAAQW,EAAO,KAAK,CAAC,CAAC,IACzFT,GAAeF,EAAQW,EAAO,KAAK,CAAC,EAAI,CAACT,GAAeF,EAAQW,EAAO,KAAK,CAAC,CAAC,GAE5EA,EAAO,OAAQX,GAAW,OAAOO,GAAU,WAC7CA,EAAQP,EAAQW,EAAO,IAAI,EAAEJ,EAAOL,EAAc,GAEhDS,IAAS,gBAAkB,kBAAmBX,GAAW,sBAAuBA,IAClF,IAAKY,KAAOL,EACV,GAAIA,EAAM,eAAeK,CAAG,EAC1B,GAAI,kBAAmBZ,EACrBO,EAAMK,CAAG,EAAIZ,EAAQ,cAAcO,EAAMK,CAAG,EAAGA,EAAKV,EAAc,MAC7D,CACL,IAAIW,EAAON,EAAMK,CAAG,EACpB,OAAOL,EAAMK,CAAG,EAChBL,EAAMP,EAAQ,kBAAkBY,EAAKC,EAAMX,EAAc,CAAC,EAAIW,CAChE,EAIFd,GAAQG,GAAeF,EAAQW,EAAO,KAAK,CAAC,CAAC,EAC/CT,GAAeF,EAAQW,EAAO,KAAK,CAAC,EAAE,KAAKJ,CAAK,EAEhDL,GAAeF,EAAQW,EAAO,KAAK,CAAC,EAAIJ,CAE5C,KAAO,CACAL,GAAeF,EAAQ,WAAW,IACrCE,GAAeF,EAAQ,WAAW,EAAI,CAAC,GAEzC,IAAIc,EAAU,CAAC,EAEf,GADAA,EAAQd,EAAQ,OAAO,EAAIW,EACvBA,IAAS,cAAe,CAC1B,IAAKC,KAAOL,EACV,GAAIA,EAAM,eAAeK,CAAG,EAC1B,MAGJE,EAAQd,EAAQ,OAAO,EAAI,sBAAuBA,EAAUA,EAAQ,kBAAkBY,EAAKL,EAAOL,EAAc,EAAIU,EAChHZ,EAAQ,0BACVc,EAAQd,EAAQ,aAAa,EAAIO,EAAMK,CAAG,EAAEZ,EAAQ,aAAa,EAC7D,kBAAmBA,IACrBc,EAAQd,EAAQ,aAAa,EAAIA,EAAQ,cAAcc,EAAQd,EAAQ,aAAa,EAAGY,EAAKV,EAAc,KAGxG,kBAAmBF,IACrBO,EAAMK,CAAG,EAAIZ,EAAQ,cAAcO,EAAMK,CAAG,EAAGA,EAAKV,EAAc,GAEpEY,EAAQd,EAAQ,cAAc,EAAIO,EAAMK,CAAG,EAE/C,MACMD,EAAO,OAAQX,IACjBO,EAAQP,EAAQW,EAAO,IAAI,EAAEJ,EAAOL,EAAc,GAEpDY,EAAQd,EAAQW,EAAO,KAAK,CAAC,EAAIJ,EAE/BP,EAAQ,YACVc,EAAQd,EAAQ,SAAS,EAAIE,IAE/BA,GAAeF,EAAQ,WAAW,EAAE,KAAKc,CAAO,CAClD,CACF,CApEST,EAAAK,GAAA,YAsET,SAASK,GAAqBC,EAAY,CAIxC,GAHI,iBAAkBhB,GAAWgB,IAC/BA,EAAahB,EAAQ,aAAagB,EAAYd,EAAc,IAEzDF,EAAQ,MAAQ,qBAAsBA,GAAW,oBAAqBA,GAAWA,EAAQ,uBAAyBgB,EAAY,CACjI,IAAIJ,EACJ,IAAKA,KAAOI,EACV,GAAIA,EAAW,eAAeJ,CAAG,IAC3BZ,EAAQ,OAAMgB,EAAWJ,CAAG,EAAII,EAAWJ,CAAG,EAAE,KAAK,GACrDZ,EAAQ,uBACVgB,EAAWJ,CAAG,EAAIN,GAAWU,EAAWJ,CAAG,CAAC,GAE1C,qBAAsBZ,IAASgB,EAAWJ,CAAG,EAAIZ,EAAQ,iBAAiBgB,EAAWJ,CAAG,EAAGA,EAAKV,EAAc,GAC9G,oBAAqBF,GAAS,CAChC,IAAIa,EAAOG,EAAWJ,CAAG,EACzB,OAAOI,EAAWJ,CAAG,EACrBI,EAAWhB,EAAQ,gBAAgBY,EAAKI,EAAWJ,CAAG,EAAGV,EAAc,CAAC,EAAIW,CAC9E,CAGN,CACA,OAAOG,CACT,CAtBSX,EAAAU,GAAA,wBAwBT,SAASE,GAAcC,EAAa,CAClC,IAAIF,EAAa,CAAC,EAClB,GAAIE,EAAY,OAASA,EAAY,KAAK,YAAY,IAAM,OAASlB,EAAQ,0BAA2B,CAGtG,QAFImB,EAAc,oDACdC,GACIA,EAAQD,EAAY,KAAKD,EAAY,IAAI,KAAO,MACtDF,EAAWI,EAAM,CAAC,CAAC,EAAIA,EAAM,CAAC,GAAKA,EAAM,CAAC,GAAKA,EAAM,CAAC,EAExDJ,EAAaD,GAAqBC,CAAU,CAC9C,CACA,GAAIE,EAAY,KAAK,YAAY,IAAM,MAAO,CAC5C,GAAIlB,EAAQ,kBACV,OAEFE,GAAeF,EAAQ,cAAc,EAAI,CAAC,EACtC,OAAO,KAAKgB,CAAU,EAAE,SAC1Bd,GAAeF,EAAQ,cAAc,EAAEA,EAAQ,aAAa,EAAIgB,GAE9DhB,EAAQ,YACVE,GAAeF,EAAQ,cAAc,EAAEA,EAAQ,SAAS,EAAIE,GAEhE,KAAO,CACL,GAAIF,EAAQ,kBACV,OAEEA,EAAQ,OACVkB,EAAY,KAAOA,EAAY,KAAK,KAAK,GAE3C,IAAIX,EAAQ,CAAC,EACTP,EAAQ,0BAA4B,OAAO,KAAKgB,CAAU,EAAE,QAC9DT,EAAMW,EAAY,IAAI,EAAI,CAAC,EAC3BX,EAAMW,EAAY,IAAI,EAAElB,EAAQ,aAAa,EAAIgB,GAEjDT,EAAMW,EAAY,IAAI,EAAIA,EAAY,KAExCR,GAAS,cAAeH,CAAK,CAC/B,CACF,CArCSF,EAAAY,GAAA,iBAuCT,SAASI,GAAeC,EAAMN,EAAY,CACxC,IAAIF,EASJ,GARI,OAAOQ,GAAS,WAClBN,EAAaM,EAAK,WAClBA,EAAOA,EAAK,MAEdN,EAAaD,GAAqBC,CAAU,EACxC,kBAAmBhB,IACrBsB,EAAOtB,EAAQ,cAAcsB,EAAMpB,EAAc,GAE/CF,EAAQ,QAAS,CAEnB,GADAc,EAAU,CAAC,EACP,CAACd,EAAQ,kBAAoBgB,GAAc,OAAO,KAAKA,CAAU,EAAE,OAAQ,CAC7EF,EAAQd,EAAQ,aAAa,EAAI,CAAC,EAClC,IAAIY,EACJ,IAAKA,KAAOI,EACNA,EAAW,eAAeJ,CAAG,IAC/BE,EAAQd,EAAQ,aAAa,EAAEY,CAAG,EAAII,EAAWJ,CAAG,EAG1D,CAEE,EAAEU,KAAQpB,MACTH,GAAQC,EAAQ,WAAW,EAAIA,EAAQ,YAAY,QAAQsB,CAAI,IAAM,GAAKtB,EAAQ,eAEnFE,GAAeoB,CAAI,EAAI,CAAC,GAEtBpB,GAAeoB,CAAI,GAAK,CAACvB,GAAQG,GAAeoB,CAAI,CAAC,IACvDpB,GAAeoB,CAAI,EAAI,CAACpB,GAAeoB,CAAI,CAAC,GAE1CvB,GAAQG,GAAeoB,CAAI,CAAC,EAC9BpB,GAAeoB,CAAI,EAAE,KAAKR,CAAO,EAEjCZ,GAAeoB,CAAI,EAAIR,CAE3B,MACOZ,GAAeF,EAAQ,WAAW,IACrCE,GAAeF,EAAQ,WAAW,EAAI,CAAC,GAEzCc,EAAU,CAAC,EACXA,EAAQd,EAAQ,OAAO,EAAI,UAC3Bc,EAAQd,EAAQ,OAAO,EAAIsB,EACvB,CAACtB,EAAQ,kBAAoBgB,GAAc,OAAO,KAAKA,CAAU,EAAE,SACrEF,EAAQd,EAAQ,aAAa,EAAIgB,GAE/BhB,EAAQ,iBACVc,EAAQd,EAAQ,WAAW,EAAI,CAAC,GAElCE,GAAeF,EAAQ,WAAW,EAAE,KAAKc,CAAO,EAElDA,EAAQd,EAAQ,SAAS,EAAIE,GAC7BA,GAAiBY,CACnB,CApDST,EAAAgB,GAAA,kBAsDT,SAASE,GAAOC,EAAM,CAChBxB,EAAQ,YAGR,CAACwB,EAAK,KAAK,GAAK,CAACxB,EAAQ,+BAGzBA,EAAQ,OACVwB,EAAOA,EAAK,KAAK,GAEfxB,EAAQ,aACVwB,EAAOlB,GAAWkB,CAAI,GAEpBxB,EAAQ,WACVwB,EAAOA,EAAK,QAAQ,KAAM,OAAO,EAAE,QAAQ,KAAM,MAAM,EAAE,QAAQ,KAAM,MAAM,GAE/Ed,GAAS,OAAQc,CAAI,EACvB,CAjBSnB,EAAAkB,GAAA,UAmBT,SAASE,GAAUC,EAAS,CACtB1B,EAAQ,gBAGRA,EAAQ,OACV0B,EAAUA,EAAQ,KAAK,GAEzBhB,GAAS,UAAWgB,CAAO,EAC7B,CARSrB,EAAAoB,GAAA,aAUT,SAASE,GAAaL,EAAM,CAC1B,IAAIM,EAAgB1B,GAAeF,EAAQ,SAAS,EAC/CA,EAAQ,WACX,OAAOE,GAAeF,EAAQ,SAAS,EAEzCE,GAAiB0B,CACnB,CANSvB,EAAAsB,GAAA,gBAQT,SAASE,GAAQC,EAAO,CAClB9B,EAAQ,cAGRA,EAAQ,OACV8B,EAAQA,EAAM,KAAK,GAErBpB,GAAS,QAASoB,CAAK,EACzB,CARSzB,EAAAwB,GAAA,WAUT,SAASE,GAAUC,EAAS,CACtBhC,EAAQ,gBAGZgC,EAAUA,EAAQ,QAAQ,KAAM,EAAE,EAC9BhC,EAAQ,OACVgC,EAAUA,EAAQ,KAAK,GAEzBtB,GAAS,UAAWsB,CAAO,EAC7B,CATS3B,EAAA0B,GAAA,aAWT,SAASE,GAAQC,EAAO,CACtBA,EAAM,KAAOA,CACf,CAFS7B,EAAA4B,GAAA,WAITtC,GAAO,QAAU,SAAUwC,EAAK/B,EAAa,CAE3C,IAAIgC,EAASnC,GAAeL,GAAI,OAAO,GAAM,CAAC,CAAC,EAAIwC,EAAS,IAAIvC,GAAM,OAAO,OAAO,EAChFwC,EAAS,CAAC,EA0Bd,GAzBAnC,GAAiBmC,EAEjBrC,EAAUG,GAAgBC,CAAW,EAEjCH,IACFmC,EAAO,IAAM,CAAC,eAAgB,EAAI,EAClCA,EAAO,UAAYf,GACnBe,EAAO,OAASb,GAChBa,EAAO,UAAYX,GACnBW,EAAO,WAAaT,GACpBS,EAAO,QAAUH,GACjBG,EAAO,QAAUP,GACjBO,EAAO,UAAYL,GACnBK,EAAO,wBAA0BnB,KAEjCmB,EAAO,GAAG,eAAgBf,EAAc,EACxCe,EAAO,GAAG,OAAQb,EAAM,EACxBa,EAAO,GAAG,UAAWX,EAAS,EAC9BW,EAAO,GAAG,aAAcT,EAAY,EACpCS,EAAO,GAAG,QAASH,EAAO,GAMxBhC,GACFmC,EAAO,MAAMD,CAAG,EAAE,MAAM,UAEpB,CAACC,EAAO,MAAMD,CAAG,EACnB,MAAM,IAAI,MAAM,sBAAwBC,EAAO,SAAS,CAAC,EAI7D,GAAIC,EAAOrC,EAAQ,WAAW,EAAG,CAC/B,IAAIa,EAAOwB,EAAOrC,EAAQ,WAAW,EACrC,OAAOqC,EAAOrC,EAAQ,WAAW,EACjCqC,EAAOrC,EAAQ,WAAW,EAAIa,EAC9B,OAAOwB,EAAO,IAChB,CAEA,OAAOA,CAET,ICzWA,IAAAC,GAAAC,GAAA,CAAAC,GAAAC,KAAA,KAAIC,GAAS,KACTC,GAAS,KAEb,SAASC,GAAiBC,EAAa,CACrC,IAAIC,EAAUJ,GAAO,YAAYG,CAAW,EAC5C,OAAAH,GAAO,mBAAmBI,CAAO,EAC1BA,CACT,CAJSC,EAAAH,GAAA,mBAMTH,GAAO,QAAU,SAASO,EAAKH,EAAa,CAC1C,IAAIC,EAASG,EAAIC,EAAMC,EACvB,OAAAL,EAAUF,GAAgBC,CAAW,EACrCI,EAAKN,GAAOK,EAAKF,CAAO,EACxBK,EAAY,YAAaL,GAAWA,EAAQ,QAAU,UAAY,SAE9D,cAAeA,GAAWA,EAAQ,UACpCI,EAAO,KAAK,UAAUD,EAAI,SAAUG,EAAGC,EAAG,CAAE,OAAOD,IAAMD,EAAW,IAAME,CAAG,EAAGP,EAAQ,MAAM,EAE9FI,EAAO,KAAK,UAAUD,EAAI,KAAMH,EAAQ,MAAM,EAEzCI,EAAK,QAAQ,UAAW,SAAS,EAAE,QAAQ,UAAW,SAAS,CACxE,ICrBA,IAAAI,GAAAC,GAAA,CAAAC,GAAAC,KAAA,KAAIC,GAAS,KACTC,GAAU,KAA0B,QAEpCC,GAAgBC,GAEpB,SAASC,GAAgBC,EAAa,CACpC,IAAIC,EAAUN,GAAO,YAAYK,CAAW,EAC5C,OAAAL,GAAO,iBAAiB,oBAAqBM,CAAO,EACpDN,GAAO,iBAAiB,oBAAqBM,CAAO,EACpDN,GAAO,iBAAiB,mBAAoBM,CAAO,EACnDN,GAAO,iBAAiB,aAAcM,CAAO,EAC7CN,GAAO,iBAAiB,gBAAiBM,CAAO,EAChDN,GAAO,iBAAiB,cAAeM,CAAO,EAC9CN,GAAO,iBAAiB,gBAAiBM,CAAO,EAChDN,GAAO,iBAAiB,UAAWM,CAAO,EAC1CN,GAAO,iBAAiB,aAAcM,CAAO,EAC7CN,GAAO,iBAAiB,cAAeM,CAAO,EAC9CN,GAAO,iBAAiB,mBAAoBM,CAAO,EACnDN,GAAO,iBAAiB,oBAAqBM,CAAO,EACpDN,GAAO,iBAAiB,sBAAuBM,CAAO,EACtDN,GAAO,iBAAiB,8BAA+BM,CAAO,EAC9DN,GAAO,mBAAmBM,CAAO,EAC7B,OAAOA,EAAQ,QAAW,WAC5BA,EAAQ,OAAS,MAAMA,EAAQ,OAAS,CAAC,EAAE,KAAK,GAAG,GAErDN,GAAO,gBAAgB,cAAeM,CAAO,EAC7CN,GAAO,gBAAgB,cAAeM,CAAO,EAC7CN,GAAO,gBAAgB,aAAcM,CAAO,EAC5CN,GAAO,gBAAgB,OAAQM,CAAO,EACtCN,GAAO,gBAAgB,UAAWM,CAAO,EACzCN,GAAO,gBAAgB,QAASM,CAAO,EACvCN,GAAO,gBAAgB,UAAWM,CAAO,EACzCN,GAAO,gBAAgB,OAAQM,CAAO,EACtCN,GAAO,gBAAgB,OAAQM,CAAO,EACtCN,GAAO,gBAAgB,WAAYM,CAAO,EAC1CN,GAAO,cAAc,UAAWM,CAAO,EACvCN,GAAO,cAAc,cAAeM,CAAO,EAC3CN,GAAO,cAAc,QAASM,CAAO,EACrCN,GAAO,cAAc,UAAWM,CAAO,EACvCN,GAAO,cAAc,OAAQM,CAAO,EACpCN,GAAO,cAAc,kBAAmBM,CAAO,EAC/CN,GAAO,cAAc,cAAeM,CAAO,EAC3CN,GAAO,cAAc,gBAAiBM,CAAO,EAC7CN,GAAO,cAAc,iBAAkBM,CAAO,EAC9CN,GAAO,cAAc,aAAcM,CAAO,EAC1CN,GAAO,cAAc,sBAAuBM,CAAO,EAC5CA,CACT,CA1CSC,EAAAH,GAAA,mBA4CT,SAASI,GAAiBF,EAASG,EAAOC,EAAW,CACnD,OAAQ,CAACA,GAAaJ,EAAQ,OAAS;AAAA,EAAO,IAAM,MAAMG,EAAQ,CAAC,EAAE,KAAKH,EAAQ,MAAM,CAC1F,CAFSC,EAAAC,GAAA,oBAIT,SAASG,GAAgBC,EAAYN,EAASG,EAAO,CACnD,GAAIH,EAAQ,iBACV,MAAO,GAEL,iBAAkBA,IACpBM,EAAaN,EAAQ,aAAaM,EAAYT,GAAoBD,EAAc,GAElF,IAAIW,EAAKC,EAAMC,EAAUC,EAAOC,EAAS,CAAC,EAC1C,IAAKJ,KAAOD,EACNA,EAAW,eAAeC,CAAG,GAAKD,EAAWC,CAAG,IAAM,MAAQD,EAAWC,CAAG,IAAM,SACpFG,EAAQV,EAAQ,6BAA+B,OAAOM,EAAWC,CAAG,GAAM,SAAW,GAAK,IAC1FC,EAAO,GAAKF,EAAWC,CAAG,EAC1BC,EAAOA,EAAK,QAAQ,KAAM,QAAQ,EAClCC,EAAW,oBAAqBT,EAAUA,EAAQ,gBAAgBO,EAAKC,EAAMX,GAAoBD,EAAc,EAAIW,EACnHI,EAAO,KAAMX,EAAQ,QAAUA,EAAQ,iBAAkBE,GAAiBF,EAASG,EAAM,EAAG,EAAK,EAAI,GAAI,EACzGQ,EAAO,KAAKF,EAAW,IAAMC,GAAS,qBAAsBV,EAAUA,EAAQ,iBAAiBQ,EAAMD,EAAKV,GAAoBD,EAAc,EAAIY,GAAQE,CAAK,GAGjK,OAAIJ,GAAc,OAAO,KAAKA,CAAU,EAAE,QAAUN,EAAQ,QAAUA,EAAQ,kBAC5EW,EAAO,KAAKT,GAAiBF,EAASG,EAAO,EAAK,CAAC,EAE9CQ,EAAO,KAAK,EAAE,CACvB,CAtBSV,EAAAI,GAAA,mBAwBT,SAASO,GAAiBC,EAAab,EAASG,EAAO,CACrD,OAAAP,GAAiBiB,EACjBhB,GAAqB,MACdG,EAAQ,kBAAoB,GAAM,QAAeK,GAAgBQ,EAAYb,EAAQ,aAAa,EAAGA,EAASG,CAAK,EAAI,IAChI,CAJSF,EAAAW,GAAA,oBAMT,SAASE,GAAiBC,EAAaf,EAASG,EAAO,CACrD,GAAIH,EAAQ,kBACV,MAAO,GAET,IAAIO,EACJ,IAAKA,KAAOQ,EACV,GAAIA,EAAY,eAAeR,CAAG,EAChC,MAGJ,IAAIS,EAAkB,sBAAuBhB,EAAUA,EAAQ,kBAAkBO,EAAKQ,EAAYR,CAAG,EAAGV,GAAoBD,EAAc,EAAIW,EAC9I,GAAI,OAAOQ,EAAYR,CAAG,GAAM,SAC9B,OAAAX,GAAiBmB,EACjBlB,GAAqBmB,EACd,KAAOA,EAAkBX,GAAgBU,EAAYR,CAAG,EAAEP,EAAQ,aAAa,EAAGA,EAASG,CAAK,EAAI,KAE3G,IAAIc,EAAmBF,EAAYR,CAAG,EAAIQ,EAAYR,CAAG,EAAI,GAC7D,MAAI,kBAAmBP,IAASiB,EAAmBjB,EAAQ,cAAciB,EAAkBV,EAAKV,GAAoBD,EAAc,GAC3H,KAAOoB,GAAmBC,EAAmB,IAAMA,EAAmB,IAAM,IAEvF,CApBShB,EAAAa,GAAA,oBAsBT,SAASI,GAAaC,EAASnB,EAAS,CACtC,OAAOA,EAAQ,cAAgB,GAAK,QAAU,cAAeA,EAAUA,EAAQ,UAAUmB,EAAStB,GAAoBD,EAAc,EAAIuB,GAAW,KACrJ,CAFSlB,EAAAiB,GAAA,gBAIT,SAASE,GAAWC,EAAOrB,EAAS,CAClC,OAAOA,EAAQ,YAAc,GAAK,aAAe,YAAaA,EAAUA,EAAQ,QAAQqB,EAAOxB,GAAoBD,EAAc,EAAIyB,EAAM,QAAQ,MAAO,iBAAiB,GAAK,KAClL,CAFSpB,EAAAmB,GAAA,cAIT,SAASE,GAAaC,EAASvB,EAAS,CACtC,OAAOA,EAAQ,cAAgB,GAAK,cAAgB,cAAeA,EAAUA,EAAQ,UAAUuB,EAAS1B,GAAoBD,EAAc,EAAI2B,GAAW,GAC3J,CAFStB,EAAAqB,GAAA,gBAIT,SAASE,GAAUC,EAAMzB,EAAS,CAChC,OAAIA,EAAQ,WAAmB,IAC/ByB,EAAO,GAAKA,EACZA,EAAOA,EAAK,QAAQ,SAAU,GAAG,EACjCA,EAAOA,EAAK,QAAQ,KAAM,OAAO,EAAE,QAAQ,KAAM,MAAM,EAAE,QAAQ,KAAM,MAAM,EACtE,WAAYzB,EAAUA,EAAQ,OAAOyB,EAAM5B,GAAoBD,EAAc,EAAI6B,EAC1F,CANSxB,EAAAuB,GAAA,aAQT,SAASE,GAAWC,EAAS3B,EAAS,CACpC,IAAI4B,EACJ,GAAID,EAAQ,UAAYA,EAAQ,SAAS,OACvC,IAAKC,EAAI,EAAGA,EAAID,EAAQ,SAAS,OAAQ,EAAEC,EACzC,OAAQD,EAAQ,SAASC,CAAC,EAAE5B,EAAQ,OAAO,EAAG,CAC9C,IAAK,OACH,GAAIA,EAAQ,WACV,MAAO,GAET,MACF,IAAK,QACH,GAAIA,EAAQ,YACV,MAAO,GAET,MACF,IAAK,cACH,GAAIA,EAAQ,kBACV,MAAO,GAET,MACF,IAAK,UACL,IAAK,UACL,IAAK,UACH,MAAO,GACT,QACE,MAAO,EACT,CAGJ,MAAO,EACT,CA9BSC,EAAAyB,GAAA,cAgCT,SAASG,GAAaF,EAAS3B,EAASG,EAAO,CAC7CP,GAAiB+B,EACjB9B,GAAqB8B,EAAQ,KAC7B,IAAIG,EAAM,CAAC,EAAGC,EAAc,kBAAmB/B,EAAUA,EAAQ,cAAc2B,EAAQ,KAAMA,CAAO,EAAIA,EAAQ,KAChHG,EAAI,KAAK,IAAMC,CAAW,EACtBJ,EAAQ3B,EAAQ,aAAa,GAC/B8B,EAAI,KAAKzB,GAAgBsB,EAAQ3B,EAAQ,aAAa,EAAGA,EAASG,CAAK,CAAC,EAE1E,IAAI6B,EAAiBL,EAAQ3B,EAAQ,WAAW,GAAK2B,EAAQ3B,EAAQ,WAAW,EAAE,QAAU2B,EAAQ3B,EAAQ,aAAa,GAAK2B,EAAQ3B,EAAQ,aAAa,EAAE,WAAW,IAAM,WAC9K,OAAKgC,IACC,0BAA2BhC,EAC7BgC,EAAiBhC,EAAQ,sBAAsB2B,EAAQ,KAAMA,CAAO,EAEpEK,EAAiBhC,EAAQ,qBAGzBgC,GACFF,EAAI,KAAK,GAAG,EACRH,EAAQ3B,EAAQ,WAAW,GAAK2B,EAAQ3B,EAAQ,WAAW,EAAE,SAC/D8B,EAAI,KAAKG,GAAcN,EAAQ3B,EAAQ,WAAW,EAAGA,EAASG,EAAQ,CAAC,CAAC,EACxEP,GAAiB+B,EACjB9B,GAAqB8B,EAAQ,MAE/BG,EAAI,KAAK9B,EAAQ,QAAU0B,GAAWC,EAAS3B,CAAO,EAAI;AAAA,EAAO,MAAMG,EAAQ,CAAC,EAAE,KAAKH,EAAQ,MAAM,EAAI,EAAE,EAC3G8B,EAAI,KAAK,KAAOC,EAAc,GAAG,GAEjCD,EAAI,KAAK,IAAI,EAERA,EAAI,KAAK,EAAE,CACpB,CA7BS7B,EAAA4B,GAAA,gBA+BT,SAASI,GAAcC,EAAUlC,EAASG,EAAOC,EAAW,CAC1D,OAAO8B,EAAS,OAAO,SAAUJ,EAAKH,EAAS,CAC7C,IAAIQ,EAASjC,GAAiBF,EAASG,EAAOC,GAAa,CAAC0B,CAAG,EAC/D,OAAQH,EAAQ,KAAM,CACtB,IAAK,UAAW,OAAOG,EAAMK,EAASN,GAAaF,EAAS3B,EAASG,CAAK,EAC1E,IAAK,UAAW,OAAO2B,EAAMK,EAASjB,GAAaS,EAAQ3B,EAAQ,UAAU,EAAGA,CAAO,EACvF,IAAK,UAAW,OAAO8B,EAAMK,EAASb,GAAaK,EAAQ3B,EAAQ,UAAU,EAAGA,CAAO,EACvF,IAAK,QAAS,OAAO8B,GAAO9B,EAAQ,YAAcmC,EAAS,IAAMf,GAAWO,EAAQ3B,EAAQ,QAAQ,EAAGA,CAAO,EAC9G,IAAK,OAAQ,OAAO8B,GAAO9B,EAAQ,WAAamC,EAAS,IAAMX,GAAUG,EAAQ3B,EAAQ,OAAO,EAAGA,CAAO,EAC1G,IAAK,cACH,IAAIe,EAAc,CAAC,EACnB,OAAAA,EAAYY,EAAQ3B,EAAQ,OAAO,CAAC,EAAI2B,EAAQ3B,EAAQ,aAAa,EAAI2B,EAAUA,EAAQ3B,EAAQ,cAAc,EAC1G8B,GAAO9B,EAAQ,kBAAoBmC,EAAS,IAAMrB,GAAiBC,EAAaf,EAASG,CAAK,CACvG,CACF,EAAG,EAAE,CACP,CAfSF,EAAAgC,GAAA,iBAiBT,SAASG,GAAkBT,EAAS3B,EAASqC,EAAY,CACvD,IAAI9B,EACJ,IAAKA,KAAOoB,EACV,GAAIA,EAAQ,eAAepB,CAAG,EAC5B,OAAQA,EAAK,CACb,KAAKP,EAAQ,UACb,KAAKA,EAAQ,cACX,MACF,KAAKA,EAAQ,QACX,GAAIA,EAAQ,YAAcqC,EACxB,MAAO,GAET,MACF,KAAKrC,EAAQ,SACX,GAAIA,EAAQ,aAAeqC,EACzB,MAAO,GAET,MACF,KAAKrC,EAAQ,eACX,GAAIA,EAAQ,mBAAqBqC,EAC/B,MAAO,GAET,MACF,KAAKrC,EAAQ,WACb,KAAKA,EAAQ,WACX,MAAO,GACT,QACE,MAAO,EACT,CAGJ,MAAO,EACT,CAhCSC,EAAAmC,GAAA,qBAkCT,SAASE,GAAoBX,EAASY,EAAMvC,EAASG,EAAOgC,EAAQ,CAClEvC,GAAiB+B,EACjB9B,GAAqB0C,EACrB,IAAIR,EAAc,kBAAmB/B,EAAUA,EAAQ,cAAcuC,EAAMZ,CAAO,EAAIY,EACtF,GAAI,OAAOZ,EAAY,KAAeA,IAAY,MAAQA,IAAY,GACpE,MAAO,0BAA2B3B,GAAWA,EAAQ,sBAAsBuC,EAAMZ,CAAO,GAAK3B,EAAQ,oBAAsB,IAAM+B,EAAc,MAAQA,EAAc,IAAM,IAAMA,EAAc,KAEjM,IAAID,EAAM,CAAC,EACX,GAAIS,EAAM,CAER,GADAT,EAAI,KAAK,IAAMC,CAAW,EACtB,OAAOJ,GAAY,SACrB,OAAAG,EAAI,KAAK,IAAMN,GAAUG,EAAQ3B,CAAO,EAAI,KAAO+B,EAAc,GAAG,EAC7DD,EAAI,KAAK,EAAE,EAEhBH,EAAQ3B,EAAQ,aAAa,GAC/B8B,EAAI,KAAKzB,GAAgBsB,EAAQ3B,EAAQ,aAAa,EAAGA,EAASG,CAAK,CAAC,EAE1E,IAAI6B,EAAiBI,GAAkBT,EAAS3B,EAAS,EAAI,GAAK2B,EAAQ3B,EAAQ,aAAa,GAAK2B,EAAQ3B,EAAQ,aAAa,EAAE,WAAW,IAAM,WAQpJ,GAPKgC,IACC,0BAA2BhC,EAC7BgC,EAAiBhC,EAAQ,sBAAsBuC,EAAMZ,CAAO,EAE5DK,EAAiBhC,EAAQ,qBAGzBgC,EACFF,EAAI,KAAK,GAAG,MAEZ,QAAAA,EAAI,KAAK,IAAI,EACNA,EAAI,KAAK,EAAE,CAEtB,CACA,OAAAA,EAAI,KAAKU,GAAqBb,EAAS3B,EAASG,EAAQ,EAAG,EAAK,CAAC,EACjEP,GAAiB+B,EACjB9B,GAAqB0C,EACjBA,GACFT,EAAI,MAAMK,EAASjC,GAAiBF,EAASG,EAAO,EAAK,EAAI,IAAM,KAAO4B,EAAc,GAAG,EAEtFD,EAAI,KAAK,EAAE,CACpB,CAvCS7B,EAAAqC,GAAA,uBAyCT,SAASE,GAAqBb,EAAS3B,EAASG,EAAOC,EAAW,CAChE,IAAI,EAAGG,EAAKkC,EAAOX,EAAM,CAAC,EAC1B,IAAKvB,KAAOoB,EACV,GAAIA,EAAQ,eAAepB,CAAG,EAE5B,IADAkC,EAAQ9C,GAAQgC,EAAQpB,CAAG,CAAC,EAAIoB,EAAQpB,CAAG,EAAI,CAACoB,EAAQpB,CAAG,CAAC,EACvD,EAAI,EAAG,EAAIkC,EAAM,OAAQ,EAAE,EAAG,CACjC,OAAQlC,EAAK,CACb,KAAKP,EAAQ,eAAgB8B,EAAI,KAAKlB,GAAiB6B,EAAM,CAAC,EAAGzC,EAASG,CAAK,CAAC,EAAG,MACnF,KAAKH,EAAQ,eAAgB8B,EAAI,MAAM9B,EAAQ,kBAAoBE,GAAiBF,EAASG,EAAOC,CAAS,EAAI,IAAMU,GAAiB2B,EAAM,CAAC,EAAGzC,EAASG,CAAK,CAAC,EAAG,MACpK,KAAKH,EAAQ,cAAe,KAAKA,EAAQ,UAAW,MACpD,KAAKA,EAAQ,QAAS8B,EAAI,MAAM9B,EAAQ,WAAaE,GAAiBF,EAASG,EAAOC,CAAS,EAAI,IAAMoB,GAAUiB,EAAM,CAAC,EAAGzC,CAAO,CAAC,EAAG,MACxI,KAAKA,EAAQ,SAAU8B,EAAI,MAAM9B,EAAQ,YAAcE,GAAiBF,EAASG,EAAOC,CAAS,EAAI,IAAMgB,GAAWqB,EAAM,CAAC,EAAGzC,CAAO,CAAC,EAAG,MAC3I,KAAKA,EAAQ,WAAY8B,EAAI,KAAK5B,GAAiBF,EAASG,EAAOC,CAAS,EAAIkB,GAAamB,EAAM,CAAC,EAAGzC,CAAO,CAAC,EAAG,MAClH,KAAKA,EAAQ,WAAY8B,EAAI,KAAK5B,GAAiBF,EAASG,EAAOC,CAAS,EAAIc,GAAauB,EAAM,CAAC,EAAGzC,CAAO,CAAC,EAAG,MAClH,QAAS8B,EAAI,KAAK5B,GAAiBF,EAASG,EAAOC,CAAS,EAAIkC,GAAoBG,EAAM,CAAC,EAAGlC,EAAKP,EAASG,EAAOiC,GAAkBK,EAAM,CAAC,EAAGzC,CAAO,CAAC,CAAC,CACxJ,CACAI,EAAYA,GAAa,CAAC0B,EAAI,MAChC,CAGJ,OAAOA,EAAI,KAAK,EAAE,CACpB,CArBS7B,EAAAuC,GAAA,wBAuBT/C,GAAO,QAAU,SAAUiD,EAAI1C,EAAS,CACtCA,EAAUF,GAAgBE,CAAO,EACjC,IAAI8B,EAAM,CAAC,EACX,OAAAlC,GAAiB8C,EACjB7C,GAAqB,SACjBG,EAAQ,QACV8B,EAAI,KAAKU,GAAqBE,EAAI1C,EAAS,EAAG,EAAI,CAAC,GAE/C0C,EAAG1C,EAAQ,cAAc,GAC3B8B,EAAI,KAAKlB,GAAiB8B,EAAG1C,EAAQ,cAAc,EAAGA,EAAS,CAAC,CAAC,EAE/D0C,EAAG1C,EAAQ,WAAW,GAAK0C,EAAG1C,EAAQ,WAAW,EAAE,QACrD8B,EAAI,KAAKG,GAAcS,EAAG1C,EAAQ,WAAW,EAAGA,EAAS,EAAG,CAAC8B,EAAI,MAAM,CAAC,GAGrEA,EAAI,KAAK,EAAE,CACpB,IC/TA,IAAAa,GAAAC,GAAA,CAAAC,GAAAC,KAAA,KAAIC,GAAS,KAEbD,GAAO,QAAU,SAAUE,EAAMC,EAAS,CACpCD,aAAgB,SAClBA,EAAOA,EAAK,SAAS,GAEvB,IAAIE,EAAK,KACT,GAAI,OAAQF,GAAU,SACpB,GAAI,CACFE,EAAK,KAAK,MAAMF,CAAI,CACtB,MAAY,CACV,MAAM,IAAI,MAAM,+BAA+B,CACjD,MAEAE,EAAKF,EAEP,OAAOD,GAAOG,EAAID,CAAO,CAC3B,ICjBA,IAAAE,GAAAC,GAAA,CAAAC,GAAAC,KAAA,CAEA,IAAIC,GAAS,KACTC,GAAW,KACXC,GAAS,KACTC,GAAW,KAEfJ,GAAO,QAAU,CACf,OAAQC,GACR,SAAUC,GACV,OAAQC,GACR,SAAUC,EACZ,mRC8CA,SAAgBC,GACZC,EACAC,EACAC,EAAkB,CAElB,IAAMC,EAA+B,CAAA,EACrC,OAAQF,EAAY,CAChB,IAAK,YACDG,GAA4BJ,EAAYG,CAAW,EACnD,MACJ,IAAK,aACDE,GAA6BL,EAAYG,CAAW,EACpD,MACJ,IAAK,qBACDG,GAAqCN,EAAYE,EAAYC,CAAW,EACxE,MACJ,IAAK,WACDI,GAA2BP,EAAYE,EAAYC,CAAW,EAC9D,MACJ,IAAK,YACD,MACJ,QACI,MAER,OAAAK,GAA0BR,EAAYE,EAAYC,CAAW,EACtDA,CACX,CA1BgBM,EAAAV,GAAA,wBAAhBW,GAAA,qBAAAX,GAmCA,SAAgBS,GACZR,EACAE,EACAC,EAA4B,CAQ5B,SAASQ,EAAkBC,EAAoBC,EAAU,CACjDD,GACAT,EAAY,KAAKU,CAAK,CAE9B,CAqNA,GAzNSJ,EAAAE,EAAA,qBAMTA,EAAkBX,EAAW,oBAAoB,IAAM,OAAW,CAC9D,KAAI,kCACJ,MAAO,CACH,KAAM,SACN,OAAQA,EAAW,oBAAoB,GAE9C,EAEDW,EAAkBX,EAAW,gBAAgB,IAAM,OAAW,CAC1D,KAAI,+CACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,aACN,MAAO,CACH,KAAM,OACN,KAAMA,EAAW,gBAAgB,IAAM,WAK1D,EACDW,EAAkBX,EAAW,cAAc,IAAM,OAAW,CACxD,KAAI,yCACJ,MAAO,CACH,KAAM,OACN,KAAMA,EAAW,cAAc,IAAM,QAE5C,EAEDW,EAAkBX,EAAW,cAAc,IAAM,OAAW,CACxD,KAAI,0CACJ,MAAO,CACH,KAAM,OACN,KAAMA,EAAW,cAAc,IAAM,QAE5C,EAEDW,EAAkBX,EAAW,aAAa,IAAM,OAAW,CACvD,KAAI,yCACJ,MAAO,CACH,KAAM,OACN,KAAMA,EAAW,aAAa,IAAM,QAE3C,EAEDW,EAAkBX,EAAW,qBAAqB,IAAM,OAAW,CAC/D,KAAI,+CACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,iBACN,MAAO,CACH,KAAM,OACN,KAAMA,EAAW,qBAAqB,IAAM,WAK/D,EACDW,EAAkBX,EAAW,wBAAwB,IAAM,OAAW,CAClE,KAAI,+CACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,qBACN,MAAO,CACH,KAAM,aACN,WAAY,CACR,CACI,KAAM,eACN,aAAcE,QAOzC,EAEDS,EAAkBX,EAAW,uBAAuB,IAAM,OAAW,CACjE,KAAI,+CACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,+BACN,MAAO,CACH,KAAM,aACN,WAAY,CACR,CACI,KAAM,SACN,eAAgB,CACZ,CACI,KAAM,+BACN,MAAO,CACH,KAAM,SACN,OAAQA,EAAW,uBAAuB,IAGlD,CACI,KAAM,WACN,MAAO,CACH,KAAM,eACN,aAAcE,WAUrD,EACDS,EAAkBX,EAAW,cAAc,IAAM,QAAS,CACtD,KAAI,6CACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,wBACN,MAAO,CACH,KAAM,eACN,aAAcE,MAKjC,EACDS,EAAkBX,EAAW,aAAa,IAAM,QAAS,CACrD,KAAI,oCACJ,MAAO,CACH,KAAM,OACN,KAAM,IAEb,EACDW,EAAkBX,EAAW,WAAW,IAAM,OAAW,CACrD,KAAI,uCACJ,MAAO,CACH,KAAM,SACN,OAAQA,EAAW,WAAW,GAErC,EACDW,EAAkBX,EAAW,aAAa,IAAM,OAAW,CACvD,KAAI,yCACJ,MAAO,CACH,KAAM,SACN,OAAQA,EAAW,aAAa,GAEvC,EAEDW,EAAkBX,EAAW,eAAe,IAAM,OAAW,CACzD,KAAI,2CACJ,MAAO,CACH,KAAM,SACN,OAAQA,EAAW,eAAe,GAEzC,EACDW,EAAkBX,EAAW,UAAU,IAAM,OAAW,CACpD,KAAI,sCACJ,MAAO,CACH,KAAM,OACN,KAAMA,EAAW,UAAU,GAElC,EAEDW,EAAkBX,EAAW,UAAU,IAAM,OAAW,CACpD,KAAI,6BACJ,MAAO,CACH,KAAM,OACN,KAAMA,EAAW,UAAU,GAElC,EACDW,EAAkBX,EAAW,UAAU,IAAM,OAAW,CACpD,KAAI,oCACJ,MAAO,CACH,KAAM,OACN,KAAMA,EAAW,UAAU,GAElC,EAEDW,EAAkBX,EAAW,eAAe,IAAM,OAAW,CACzD,KAAI,8BACJ,MAAO,CACH,KAAM,MACN,IAAK,SAASA,EAAW,eAAe,EAAa,EAAE,GAE9D,EACDW,EAAkBX,EAAW,gBAAgB,IAAM,cAAe,CAC9D,KAAI,0DACJ,MAAO,CACH,KAAM,OACN,KAAM,IAEb,EAEDW,EAAkBX,EAAW,oBAAoB,IAAM,cAAe,CAClE,KAAI,iDACJ,MAAO,CACH,KAAM,OACN,KAAM,IAEb,EAEDW,EAAkBX,EAAW,oBAAoB,IAAM,YAAa,CAChE,KAAI,6CACJ,MAAO,CACH,KAAM,OACN,KAAM,IAEb,EAEGA,EAAW,oBAAoB,GAAKA,EAAW,oBAAoB,EAAG,CACtE,IAAMc,EAAsB,CAAA,EACxBd,EAAW,oBAAoB,GAC/Bc,EAAG,KAAK,CACJ,KAAM,gBACN,MAAO,CACH,KAAM,eACN,aAAcd,EAAW,oBAAoB,GAEpD,EAEDA,EAAW,oBAAoB,GAC/Bc,EAAG,KAAK,CACJ,KAAM,gBACN,MAAO,CACH,KAAM,eACN,aAAcd,EAAW,oBAAoB,GAEpD,EAELG,EAAY,KAAK,CACb,KAAI,0CACJ,OAAQ,CACJ,eAAgBW,GAEvB,EAELH,EAAkBX,EAAW,mBAAmB,IAAM,OAAW,CAC7D,KAAI,8CACJ,MAAO,CACH,KAAM,OACN,KAAMA,EAAW,mBAAmB,GAE3C,EAEDW,EAAkBX,EAAW,qBAAqB,IAAM,OAAW,CAC/D,KAAI,uCACJ,MAAO,CACH,KAAM,OACN,KAAMA,EAAW,qBAAqB,GAE7C,EACDW,EAAkBX,EAAW,eAAe,IAAM,OAAW,CACzD,KAAI,2CACJ,MAAO,CACH,KAAM,MACN,IAAK,SAASA,EAAW,eAAe,EAAa,EAAE,GAE9D,EAEDW,EAAkBX,EAAW,eAAe,IAAM,OAAW,CACzD,KAAI,2CACJ,MAAO,CACH,KAAM,MACN,IAAK,SAASA,EAAW,eAAe,EAAa,EAAE,GAE9D,EAEDW,EAAkBX,EAAW,eAAe,IAAM,YAAa,CAC3D,KAAI,8CACJ,MAAO,CACH,KAAM,aACN,WAAU,qCAEjB,EAEDW,EAAkBX,EAAW,eAAe,IAAM,WAAY,CAC1D,KAAI,8CACJ,MAAO,CACH,KAAM,aACN,WAAU,oCAEjB,EAEDW,EAAkBX,EAAW,mBAAmB,IAAM,OAAW,CAC7D,KAAI,4CACJ,MAAO,CACH,KAAM,aACN,WAAY,CACR,CACI,KAAM,eACN,aAAcE,KAI7B,CACL,CA1TgBO,EAAAD,GAAA,6BAAhBE,GAAA,0BAAAF,GAkUA,SAAgBJ,GAA4BJ,EAAkCG,EAA4B,CAClGH,EAAW,eAAe,GAC1BG,EAAY,KAAK,CACb,KAAI,+CACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,aACN,MAAO,CACH,KAAM,OACN,KAAMH,EAAW,eAAe,IAAM,WAKzD,EAEDA,EAAW,eAAe,GAC1BG,EAAY,KAAK,CACb,KAAI,+CACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,YACN,MAAO,CACH,KAAM,OACN,KAAMH,EAAW,eAAe,IAAM,WAKzD,EAEDA,EAAW,oBAAoB,GAC/BG,EAAY,KAAK,CACb,KAAI,+CACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,YACN,MAAO,CACH,KAAM,OACN,KAAMH,EAAW,oBAAoB,MAKxD,EAEDA,EAAW,eAAe,GAC1BG,EAAY,KAAK,CACb,KAAI,+CACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,YACN,MAAO,CACH,KAAM,OACN,KAAMH,EAAW,eAAe,IAAM,WAKzD,EAEDA,EAAW,oBAAoB,GAC/BG,EAAY,KAAK,CACb,KAAI,+CACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,YACN,MAAO,CACH,KAAM,OACN,KAAMH,EAAW,oBAAoB,MAKxD,CAET,CAjFgBS,EAAAL,GAAA,+BAAhBM,GAAA,4BAAAN,GA0FA,SAAgBE,GACZN,EACAE,EACAC,EAA4B,CAExBH,EAAW,eAAe,GAC1BG,EAAY,KAAK,CACb,KAAI,mDACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,uBACN,MAAO,CACH,KAAM,SACN,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,sBACN,MAAO,CACH,KAAM,SACN,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,aACN,MAAO,CACH,KAAM,OACN,KAAMH,EAAW,eAAe,IAAM,mBAazF,EAEDA,EAAW,oBAAoB,GAC/BG,EAAY,KAAK,CACb,KAAI,mDACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,uBACN,MAAO,CACH,KAAM,SACN,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,sBACN,MAAO,CACH,KAAM,SACN,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,aACN,MAAO,CACH,KAAM,OACN,KAAMH,EAAW,oBAAoB,cAaxF,EAEDA,EAAW,gBAAgB,IAAM,SACjCG,EAAY,KAAK,CACb,KAAI,mDACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,uBACN,MAAO,CACH,KAAM,aACN,WAAY,CACR,CACI,KAAM,SACN,eAAgB,CACZ,CACI,KAAM,qBACN,MAAO,CACH,KAAM,yBACN,uBAAwBD,IAGhC,CACI,KAAM,qBACN,MAAO,CACH,KAAM,SACN,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,aACN,MAAO,CACH,KAAM,OACN,KAAM,gBAc7D,CAET,CA3HgBO,EAAAH,GAAA,wCAAhBI,GAAA,qCAAAJ,GAoIA,SAAgBC,GACZP,EACAE,EACAC,EAA4B,CAExBH,EAAW,eAAe,IAAM,QAAUA,EAAW,eAAe,IAAM,SAC1EG,EAAY,KAAK,CACb,KAAI,8BACJ,MAAO,CACH,KAAM,OACN,KAAM,IAEb,EAEDH,EAAW,eAAe,IAAM,SAAWA,EAAW,eAAe,IAAM,SAC3EG,EAAY,KAAK,CACb,KAAI,6BACJ,MAAO,CACH,KAAM,OACN,KAAM,IAEb,EAEDH,EAAW,oBAAoB,GAC/BG,EAAY,KAAK,CACb,KAAI,8CACJ,MAAO,CACH,KAAM,OACN,KAAMH,EAAW,oBAAoB,GAE5C,EAEDA,EAAW,gBAAgB,IAAM,SACjCG,EAAY,KAAK,CACb,KAAI,+CACJ,OAAQ,CACJ,eAAgB,CACZ,CACI,KAAM,0BACN,MAAO,CACH,KAAM,aACN,WAAY,CACR,CACI,KAAM,eACN,aAAcD,QAOzC,CAET,CArDgBO,EAAAF,GAAA,8BAAhBG,GAAA,2BAAAH,GA6DA,SAAgBF,GAA6BL,EAAkCG,EAA4B,CACnGH,EAAW,eAAe,IAAM,aAChCG,EAAY,KAAK,CACb,KAAI,0CACJ,OAAQ,CACJ,eAAgB,CACZ,CAII,KAAM,uBACN,MAAO,CACH,KAAM,aACN,WAAY,CAAA,IAGpB,CAII,KAAM,sBACN,MAAO,CACH,KAAM,aACN,WAAY,CAAA,IAGpB,CAII,KAAM,yBACN,MAAO,CACH,KAAM,aACN,WAAY,CAAA,MAK/B,CAET,CAxCgBM,EAAAJ,GAAA,gCAAhBK,GAAA,6BAAAL,mGCtpBA,IAAAU,GAAA,KACAC,GAAA,KAEAC,GAAA,KAEMC,GAAmB,uBAezB,SAASC,GACLC,EAAgG,CAEhG,OACKA,EAA8D,OAAS,MACvEA,EAA8D,OAAS,MAEhF,CAPSC,EAAAF,GAAA,mBAgBT,SAASG,GAAkBC,EAAgC,CACvD,OAAOA,EAAa,IAAKC,GAAgBA,EAAY,YAAY,IAAI,CACzE,CAFSH,EAAAC,GAAA,qBAaT,SAASG,GACLC,EACAC,EACAC,EACAC,EAAiC,CAEjC,OAAOH,EAAiB,OACpB,CAACI,EAA2BC,IAAiC,CACzD,IAAMC,EAA2B,CAC7B,MAAO,WACP,KAAMD,EAAe,YAAY,KACjC,mBAAoB,GAAGH,CAAa,IAAIG,EAAe,YAAY,IAAI,GACvE,KAAME,GAAYF,EAAe,YAAY,IAAI,EAAE,MAcvD,GAZIA,EAAe,YAAY,YAC3BC,EAAY,UAAY,SAASD,EAAe,YAAY,UAAW,EAAE,GAEzEA,EAAe,YAAY,YAC3BC,EAAY,UAAY,SAASD,EAAe,YAAY,UAAW,EAAE,GAEzEA,EAAe,YAAY,QAC3BC,EAAY,MAAQ,SAASD,EAAe,YAAY,MAAO,EAAE,GAEjEA,EAAe,YAAY,WAC3BC,EAAY,SAAWD,EAAe,YAAY,WAAa,SAE/DA,EAAe,YAAY,aAC3B,OAAQC,EAAY,KAAM,CACtB,IAAK,YACL,IAAK,WACL,IAAK,YACL,IAAK,YACDA,EAAY,aAAe,SAASD,EAAe,YAAY,aAAc,EAAE,EAC/E,MACJ,IAAK,cACDC,EAAY,aAAe,WAAWD,EAAe,YAAY,YAAY,EAC7E,MACJ,IAAK,cACDC,EAAY,aAAeD,EAAe,YAAY,eAAiB,OACvE,MACJ,QACIC,EAAY,aAAeD,EAAe,YAAY,aACtD,MAIZD,EAAU,iBAAiB,KAAKE,CAAW,EACvCL,EAAW,QAAQK,EAAY,IAAI,IAAM,IACzCF,EAAU,WAAW,KAAKE,CAAW,EAGzC,IAAME,KAAgBjB,GAAA,sBAClBc,EAAe,YACf,WACAA,EAAe,YAAY,IAAI,EAEnC,OAAIG,EAAc,OAAS,GACvBL,EAAgB,KAAKM,GAAqBH,EAAY,mBAAoBE,CAAa,CAAC,EAGrFJ,CACX,EACA,CAAE,iBAAkB,CAAA,EAAI,WAAY,CAAA,CAAE,CAAE,CAEhD,CAhEST,EAAAI,GAAA,mBA0ET,SAASW,GACLC,EACAC,EACAC,EAAkC,CAElC,OAAOF,EAAuB,OAAO,CAACG,EAAmCC,KACrED,EAAS,KAAK,CACV,eAAgBF,EAChB,eAAgBG,EAAO,YAAY,SACnC,eAAgBF,EAChB,eAAgBE,EAAO,YAAY,mBACtC,EACMD,GACR,CAAA,CAAE,CACT,CAdSnB,EAAAe,GAAA,8BAuBT,SAASM,GACLL,EACAM,EAAoC,CAEpC,OAAON,EAAuB,OAAO,CAACG,EAAmCC,IAAU,CAC/E,IAAIG,EAAYD,EAAgB,KAAME,GAAWA,EAAO,OAASJ,EAAO,UAAU,YAAY,IAAI,EAC9FK,EAAYH,EAAgB,KAAME,GAAWA,EAAO,OAASJ,EAAO,UAAU,YAAY,IAAI,EAClG,GAAIG,IAAc,QAAaE,IAAc,OAAW,CACpD,IAAIC,KAAmB/B,GAAA,aAAYyB,EAAO,UAAU,WAAW,EAC3DO,KAAmBhC,GAAA,aAAYyB,EAAO,UAAU,WAAW,EAC3DG,EAAU,eAAiB,MAC3BE,EAAYF,EACZA,EAAYD,EAAgB,KACvBE,GAAWA,EAAO,OAASJ,EAAO,UAAU,YAAY,IAAI,EAEjEO,EAAmBD,EACnBA,KAAmB/B,GAAA,aAAYyB,EAAO,UAAU,WAAW,GAE/D,QAAWQ,KAAkBF,EAAkB,CAC3C,IAAMG,EAAgBH,EAAiB,QAAQE,CAAc,EAC7DT,EAAS,KAAK,CACV,eAAgBI,EAAU,KAC1B,eAAgBK,EAAe,YAAY,KAC3C,eAAgBH,EAAU,KAC1B,eAAgBE,EAAiBE,CAAa,EAAE,YAAY,KAC/D,GAGT,OAAOV,CACX,EAAG,CAAA,CAAE,CACT,CA9BSnB,EAAAqB,GAAA,gCAyCT,SAASS,GACLC,EACAC,EACAzB,EACAC,EAAiC,CAEjC,OAAOuB,EAAqB,OACxB,CAACZ,EAAiEc,IAAsB,CAEpF,IAAMC,EACFD,EAAmB,YACvB,GAAInC,GAAgBoC,CAAU,EAAG,CAC7B,IAAMC,EAAUD,EAAW,KAAK,MAAMrC,EAAgB,EAChDuC,EAAeD,IAAY,KAC3BE,EAAWC,GAAQH,EAAUA,EAAQ,CAAC,EAAID,EAAW,IAAI,EAC/Df,EAAS,KAAK,CACV,MAAO,qBACP,KAAMe,EAAW,KACjB,mBAAoB,GAAG3B,CAAa,IAAI2B,EAAW,IAAI,GACvD,QAASA,EAAW,QACpB,eAAgBA,EAAW,iBAAmB,OAC9C,aAAAE,EACA,eAAgBC,EAChB,sBAAuBtB,MACnBpB,GAAA,aAAYsC,EAAmB,qBAAqB,EACpDD,EAAkB,YAAY,KAC9BK,CAAQ,EAEf,MACE,CAEH,GAAM,CAAE,aAAAE,EAAc,OAAAC,EAAQ,SAAAC,CAAQ,EAAKP,EAC3Cf,EAAS,KAAK,CACV,MAAO,qBACP,KAAMe,EAAW,KACjB,mBAAoB,GAAG3B,CAAa,IAAI2B,EAAW,IAAI,GACvD,aAAcK,EACd,OAAQC,EACR,SAAUC,EACb,EACD,IAAM5B,KAAgBjB,GAAA,sBAClBsC,EACA,qBACAA,EAAW,IAAI,EAEfrB,EAAc,OAAS,GACvBL,EAAgB,KAAKM,GAAqB,GAAGP,CAAa,IAAI2B,EAAW,IAAI,GAAIrB,CAAa,CAAC,EAIvG,OAAOM,CACX,EACA,CAAA,CAAE,CAEV,CAtDSnB,EAAA8B,GAAA,6BAwDT,SAASY,GACLC,EACAC,EACAC,EAAqC,CAErC,OAAOF,EAAa,IAAKG,GAAe,CACpC,IAAMC,EAAiB,GAAGH,CAAS,IAAIE,EAAY,YAAY,IAAI,GAC7DE,KAAyCrD,GAAA,aAAYmD,EAAY,GAAG,EAAE,IACvEG,IACU,CACH,UAAW,GAAGL,CAAS,IAAIC,EAAgB,YAAY,IAAI,IAAII,EAAS,YAAY,SAAS,GAC7F,KAAMA,EAAS,YAAY,MAElC,EAEL,MAAO,CACH,mBAAoBF,EACpB,KAAMD,EAAY,YAAY,KAC9B,YAAaA,EAAY,YAAY,YACrC,eAAgBE,EAExB,CAAC,CACL,CAtBShD,EAAA0C,GAAA,wBAwBT,SAASQ,GAAkBP,EAAkCC,EAAiB,CAC1E,OAAOD,EAAa,IAAKG,GAAe,CACpC,IAAMC,EAAiB,GAAGH,CAAS,IAAIE,EAAY,YAAY,IAAI,GAC7DE,KAAsCrD,GAAA,aAAYmD,EAAY,GAAG,EAAE,IACpEG,IACU,CACH,KAAMA,EAAS,YAAY,KAC3B,KAAMA,EAAS,YAAY,KAC3B,aAAcA,EAAS,YAAY,cAE1C,EAEL,MAAO,CACH,mBAAoBF,EACpB,KAAMD,EAAY,YAAY,KAC9B,eAAgBE,EAChB,uBAAwB3B,MACpB1B,GAAA,aAAYmD,EAAY,qBAAqB,EAC7CE,CAAc,EAG1B,CAAC,CACL,CAtBShD,EAAAkD,GAAA,qBAwBT,SAASC,GACLC,EACA5C,EACAoC,EAAiB,CAEjB,OAAOQ,EAAY,OAAO,CAACjC,EAA2BkC,IAAc,CAChE,IAAMC,EAAiBD,EAAW,IAAMpD,MAAkBN,GAAA,aAAY0D,EAAW,IAAI,WAAW,CAAC,EAAI,CAAA,EAC/F9C,EAAgB,GAAGqC,CAAS,IAAIS,EAAW,YAAY,IAAI,GAC3D,CAAE,iBAAAhD,EAAkB,WAAAC,CAAU,EAAKF,MACrCT,GAAA,aAAY0D,EAAW,QAAQ,EAC/BC,EACA/C,EACAC,CAAe,EAEbuB,EAAuBD,MACzBnC,GAAA,aAAY0D,EAAW,kBAAkB,EACzCA,EACA9C,EACAC,CAAe,EAEb+C,EAA+B,CACjC,MAAO,aACP,KAAMF,EAAW,YAAY,KAC7B,mBAAoB9C,EACpB,KAAMD,EACN,iBAAAD,EACA,QAAS,CAAA,EACT,qBAAsB0B,GAEpBlB,KAAgBjB,GAAA,sBAClByD,EAAW,YACX,aACAA,EAAW,YAAY,IAAI,EAE/B,OAAIxC,EAAc,OAAS,GACvBL,EAAgB,KAAKM,GAAqByC,EAAc,mBAAoB1C,CAAa,CAAC,EAE9FM,EAAS,KAAKoC,CAAa,EACpBpC,CACX,EAAG,CAAA,CAAE,CACT,CAxCSnB,EAAAmD,GAAA,oBA0CT,SAASK,GACLC,EACAjD,EACAoC,EAAiB,CAEjB,OAAOa,EAAa,OAAO,CAACtC,EAA4BuC,IAAe,CACnE,IAAMC,EAAiB,GAAGf,CAAS,IAAIc,EAAY,YAAY,IAAI,GAC7D,CAAE,iBAAArD,CAAgB,EAAKD,MACzBT,GAAA,aAAY+D,EAAY,QAAQ,EAChC,CAAA,EACAC,EACAnD,CAAe,EAEbuB,EAAuBD,MACzBnC,GAAA,aAAY+D,EAAY,kBAAkB,EAC1CA,EACAC,EACAnD,CAAe,EAEnB,OAAAW,EAAS,KAAK,CACV,MAAO,cACP,KAAMuC,EAAY,YAAY,KAC9B,mBAAoBC,EACpB,WAAYtD,EACZ,qBAAA0B,EACH,EACMZ,CACX,EAAG,CAAA,CAAE,CACT,CA5BSnB,EAAAwD,GAAA,qBA8BT,SAASI,GAAqBC,EAAwCjB,EAAiB,CACnF,OAAOiB,EAAgB,OAAO,CAAC1C,EAA+B2C,IAAkB,CAC5E,IAAMC,EAAoB,GAAGnB,CAAS,IAAIkB,EAAe,YAAY,IAAI,GACzE,OAAA3C,EAAS,KAAK,CACV,MAAO,iBACP,KAAM2C,EAAe,YAAY,KACjC,mBAAoBC,EACpB,eAAgBD,EAAe,YAAY,eAC9C,EACM3C,CACX,EAAG,CAAA,CAAE,CACT,CAXSnB,EAAA4D,GAAA,wBAaT,SAASI,GACLC,EACArB,EACAsB,EACA1D,EAAiC,CA8BjC,OA5BsCyD,EAAW,IAAKE,GAAa,CAC/D,IAAMC,EAA4B,OAAO,eACrCzE,GAAA,aAAYwE,EAAU,yBAAyB,EAAE,IAAKE,GAC3C,CACHA,EAAmB,YAAY,KAC/B,GAAGzB,CAAS,IAAIsB,CAAmB,IAAIG,EAAmB,YAAY,MAAM,GAEnF,CAAC,EAGAC,EAA6B,CAC/B,MAAO,YACP,KAAMH,EAAU,YAAY,KAC5B,eAAgB7B,GAAQ6B,EAAU,YAAY,UAAU,EACxD,0BAAAC,EACA,mBAAoB,GAAGxB,CAAS,IAAIsB,CAAmB,IAAIC,EAAU,YAAY,IAAI,IAEnFtD,KAAgBjB,GAAA,sBAClBuE,EAAU,YACV,YACAA,EAAU,YAAY,IAAI,EAE9B,OAAItD,EAAc,OAAS,GACvBL,EAAgB,KAAKM,GAAqBwD,EAAa,mBAAoBzD,CAAa,CAAC,EAEtFyD,CACX,CAAC,CAGL,CAnCStE,EAAAgE,GAAA,mBAqCT,SAASO,GACLC,EACA5B,EACAsB,EACA1D,EAAiC,CA+BjC,OA7BsCgE,EAAW,IAAKC,GAAa,CAC/D,IAAML,EAA4B,OAAO,eACrCzE,GAAA,aAAY8E,EAAU,yBAAyB,EAAE,IAAKJ,GAC3C,CACHA,EAAmB,YAAY,KAC/B,GAAGzB,CAAS,IAAIsB,CAAmB,IAAIG,EAAmB,YAAY,MAAM,GAEnF,CAAC,EAGAK,EAA6B,CAC/B,MAAO,YACP,KAAMD,EAAU,YAAY,KAC5B,eAAgBnC,GAAQmC,EAAU,YAAY,IAAI,EAClD,SAAUA,EAAU,YAAY,WAAa,QAC7C,0BAAAL,EACA,mBAAoB,GAAGxB,CAAS,IAAIsB,CAAmB,IAAIO,EAAU,YAAY,IAAI,IAEnF5D,KAAgBjB,GAAA,sBAClB6E,EAAU,YACV,YACAA,EAAU,YAAY,IAAI,EAE9B,OAAI5D,EAAc,OAAS,GACvBL,EAAgB,KAAKM,GAAqB4D,EAAa,mBAAoB7D,CAAa,CAAC,EAEtF6D,CACX,CAAC,CAGL,CApCS1E,EAAAuE,GAAA,mBAsCT,SAASI,GAAaC,EAA0ChC,EAAmBiC,EAAmB,CAClG,OAAOD,EAAQ,IAAKE,GAAU,CAC1B,IAAMC,KAAapF,GAAA,aAAYmF,EAAO,SAAS,EACzCE,EAAUF,EAAO,YAAY,UAAY,OAE3CG,EACAJ,EAMAI,EAAWF,EAAW,IAAKG,GAActE,GAAYsE,EAAU,YAAY,IAAI,EAAE,IAAI,EAAE,KAAK,GAAG,EAG/FD,EAAWD,EAAUpE,GAAYmE,EAAW,CAAC,EAAE,YAAY,IAAI,EAAE,KAAO,GAG5E,IAAMI,EAAyC,GAAGvC,CAAS,IAAIkC,EAAO,YAAY,IAAI,IAAIG,CAAQ,IAClG,MAAO,CACH,MAAO,SACP,KAAMH,EAAO,YAAY,KACzB,QAASE,EACT,WAAYA,EAAUpE,GAAYmE,EAAW,CAAC,EAAE,YAAY,IAAI,EAAE,KAAO,GACzE,mBAAoBI,EACpB,WAAYN,EACZ,WAAYE,EAAW,IAAKK,GAAS,CACjC,GAAM,CAAE,aAAAhD,EAAc,KAAAiD,CAAI,EAAKzE,GAAYwE,EAAM,YAAY,IAAI,EAE3DE,EAAyC,CAC3C,MAAO,kBACP,mBAAoB,GAAGH,CAAkB,IAAIC,EAAM,YAAY,IAAI,GACnE,KAAM,GAAGA,EAAM,YAAY,IAAI,GAC/B,KAAAC,EACA,aAAAjD,GAEJ,OAAIgD,EAAM,YAAY,YAClBE,EAAmB,UAAY,SAASF,EAAM,YAAY,UAAW,EAAE,GAEvEA,EAAM,YAAY,YAClBE,EAAmB,UAAY,SAASF,EAAM,YAAY,UAAW,EAAE,GAEvEA,EAAM,YAAY,QAClBE,EAAmB,MAAQ,SAASF,EAAM,YAAY,MAAO,EAAE,GAE/DA,EAAM,YAAY,WAClBE,EAAmB,SAAWF,EAAM,YAAY,WAAa,SAE1DE,CACX,CAAC,EACD,WAAYR,EAAO,WAAalE,GAAYkE,EAAO,WAAW,YAAY,IAAI,EAAE,KAAO,GAE/F,CAAC,CACL,CArDS9E,EAAA2E,GAAA,gBAuDT,SAASY,GACLX,EACAX,EACArB,EAAiB,CAEjB,OAAOgC,EAAQ,IAAKE,GAAU,CAC1B,IAAMU,EAAkBvB,EAAW,KAAMwB,GAAOA,EAAG,OAASX,EAAO,YAAY,SAAS,EAClFY,EAAoB,GAAG9C,CAAS,IAAIkC,EAAO,YAAY,IAAI,GACjE,MAAO,CACH,MAAO,SACP,KAAMA,EAAO,YAAY,KACzB,QAAS,GACT,WAAYU,EAAkBA,EAAgB,eAAiB,GAC/D,mBAAoBE,EACpB,WAAY,GACZ,cAAY/F,GAAA,aAAYmF,EAAO,SAAS,EAAE,IAAKM,IACpC,CACH,MAAO,kBACP,KAAMA,EAAM,YAAY,KACxB,mBAAoB,GAAGM,CAAS,IAAIN,EAAM,YAAY,IAAI,GAC1D,KAAMA,EAAM,YAAY,KACxB,aAAcA,EAAM,YAAY,KAAK,MAAM,oBAAoB,IAAM,MAE5E,EACD,WAAYN,EAAO,YAAY,WAAaA,EAAO,YAAY,WAAa,GAEpF,CAAC,CACL,CA3BS9E,EAAAuF,GAAA,yBA6BT,SAASI,GACLC,EACAhD,EAAiB,CAEjB,OAAOgD,EAAQ,IAAKC,GAA0B,OAC1C,IAAMf,GACFgB,EAACD,EAA+C,YAAY,YAAQ,MAAAC,IAAA,OAAAA,EACnED,EAA6C,YAAY,OAE9D,MAAO,CACH,MAAO,eACP,KAAMvD,GAAQuD,EAAuB,YAAY,IAAI,EACrD,mBAAoB,GAAGjD,CAAS,IAAIiD,EAAuB,YAAY,IAAI,GAC3E,WAAYvD,GAAQwC,CAAM,EAElC,CAAC,CACL,CAhBS9E,EAAA2F,GAAA,sBAkBT,SAASI,GACLC,EACAC,EACAC,EAAkC,CAElC,OAAOF,EAAe,IAAKG,GAAiB,CAGxC,GAAM,CAAE,WAAAC,EAAY,YAAAC,EAAa,GAAGC,CAAU,EAAKH,EAC7CI,EAA2C,CAAA,EACjD,GAAIF,EAAa,CACb,IAAMG,EAAwD,OAAO,KAAKH,CAAW,EAAE,KAClFI,GAAYA,IAAY,UAAU,EAEvCF,EAAiB,KAAOF,EAAY,SACpC,IAAMK,EAAwB,GAAGT,CAAa,IAAIM,EAAiB,IAAI,GAUvE,GATID,GAAc,OAAO,KAAKA,CAAU,EAAE,OAAS,EAC/CC,EAAiB,MAAQI,GAAgBL,EAAYI,EAAuBR,CAAgB,EACrFM,IACPD,EAAiB,MAAQK,GACrB,CAAE,CAACJ,CAAY,EAAGH,EAAYG,CAAY,CAAC,EAC3CE,EACAR,CAAgB,GAGpBC,EAAc,WAAY,CAC1B,IAAMU,EAAsBC,MACxBnH,GAAA,aAAYwG,EAAc,UAAU,EACpCO,EACAR,CAAgB,EAEhBW,GAAuBA,EAAoB,OAAS,GACpDX,EAAiB,KAAKpF,GAAqB4F,EAAuBG,CAAmB,CAAC,GAIlG,OAAON,CACX,CAAC,CACL,CAtCSvG,EAAA+F,GAAA,uBAwCT,SAASgB,GACLC,EACAf,EACAC,EAAkC,CAElC,IAAMe,EAAoBH,MAAiBnH,GAAA,aAAYqH,EAAO,UAAU,EAAGf,EAAeC,CAAgB,EACpGgB,EAA8B,CAChC,KAAMF,EAAO,YAAc1E,GAAQ0E,EAAO,YAAY,IAAI,EAAI,OAC9D,eAAgBjB,MAAoBpG,GAAA,aAAYqH,EAAO,aAAa,EAAGf,EAAeC,CAAgB,GAE1G,OAAIe,GAAqBA,EAAkB,OAAS,IAChDC,EAAU,YAAcD,GAErBC,CACX,CAdSlH,EAAA+G,GAAA,eAuBT,SAASI,GAAsBC,EAAiBC,EAA2B,CACvE,OAAOD,EAAWC,CAAmB,GAAK,IAC9C,CAFSrH,EAAAmH,GAAA,sBAIT,SAASG,GACLC,EACAC,EAAoF,CAEpF,OAAQA,EAAe,CACnB,IAAK,yBACD,MAAO,CAAE,KAAM,yBAA0B,uBAAwBD,EAAa,KAAK,EACvF,IAAK,eACD,MAAO,CAAE,KAAM,eAAgB,aAAcA,EAAa,KAAK,EACnE,IAAK,iBACD,MAAO,CAAE,KAAM,iBAAkB,eAAgBA,EAAa,KAAK,EACvE,IAAK,OACD,MAAO,CAAE,KAAM,OAAQ,KAAMA,EAAa,KAAK,EAE3D,CAdSvH,EAAAsH,GAAA,kBAgBT,SAASG,GACLC,EACAzB,EACAC,EAAkC,CAQlC,GAAIiB,GAAiDO,EAAY,QAAQ,EAAG,CACxE,IAAMC,KAAchI,GAAA,aAAY+H,EAAW,MAAM,EAAE,IAAI,CAACV,EAAQY,IAC5Db,GAAYC,EAAQf,EAAgB,IAAM2B,EAAa1B,CAAgB,CAAC,EAE3E,OAAAyB,EAAoB,KAAO,SACrBA,UACAR,GAAuDO,EAAY,cAAc,EAAG,CAC3F,IAAMG,KAAoBlI,GAAA,aAAY+H,EAAW,YAAY,EAAE,IAC1DH,GAAiBD,GAAeC,EAAc,cAAc,CAA2B,EAE3F,OAAAM,EAA0B,KAAO,eAC3BA,UACAV,GAAiEO,EAAY,wBAAwB,EAAG,CAC/G,IAAMI,KAAuBnI,GAAA,aAAY+H,EAAW,sBAAsB,EAAE,IACvEK,GACGT,GAAeS,EAAiB,wBAAwB,CAAqC,EAEpG,OAAAD,EAA6B,KAAO,yBAC9BA,UACAX,GAAiDO,EAAY,QAAQ,EAAG,CAC/E,IAAMM,KAAcrI,GAAA,aAAY+H,EAAW,MAAM,EAAE,IAAKO,GAAgBA,EAAY,KAAK,EACxF,OAAAD,EAAoB,KAAO,SACrBA,UACAb,GAAyDO,EAAY,gBAAgB,EAAG,CAC/F,IAAMQ,KAAsBvI,GAAA,aAAY+H,EAAW,cAAc,EAAE,IAC9DS,GAAmBb,GAAea,EAAgB,gBAAgB,CAA6B,EAEnG,OAAAD,EAA4B,KAAO,iBAC7BA,UACAf,GAA+CO,EAAY,MAAM,EAAG,CAC3E,IAAMU,KAAYzI,GAAA,aAAY+H,EAAW,IAAI,EAAE,IAC1CW,GAAmBf,GAAee,EAAgB,MAAM,CAAmB,EAE/E,OAAAD,EAAkB,KAAO,OACnBA,UACAjB,GAA6CO,EAAY,IAAI,EAAG,CACvE,IAAMM,KAAcrI,GAAA,aAAY+H,EAAW,EAAE,EAAE,IAAKO,GAAgBA,EAAY,KAAK,EACpF,OAAAD,EAAoB,KAAO,SACrBA,MACJ,IAAI,OAAO,KAAKN,CAAU,EAAE,SAAW,EAC1C,MAAO,CAAA,EAEP,QAAQ,MAAM,gBAAgB,KAAK,UAAUA,CAAU,CAAC,oCAAoC,EAEhG,MAAO,CAAA,CACX,CAxDS1H,EAAAyH,GAAA,mBA8DT,SAASb,GACL0B,EACArC,EACAC,EAAkC,CAElC,IAAMqC,EAAiB,OAAO,KAAKD,CAAU,EAC7C,GAAIC,EAAe,OAAS,EACxB,MAAM,IAAI,MAAM,mDAAmD,KAAK,UAAUD,CAAU,CAAC,EAAE,EAEnG,IAAME,EAAgBD,EAAe,CAAC,EACtC,OAAQC,EAAe,CACnB,IAAK,SACD,MAAO,CACH,KAAM,SACN,OAAQF,EAAWE,CAAa,GAExC,IAAK,OACD,MAAO,CACH,KAAM,OACN,KAAMF,EAAW,OAAS,QAElC,IAAK,UACD,MAAO,CACH,KAAM,UACN,QAAS,WAAWA,EAAW,OAAiB,GAExD,IAAK,OACD,MAAO,CACH,KAAM,OACN,KAAMA,EAAW,MAEzB,IAAK,MACD,MAAO,CACH,KAAM,MACN,IAAK,SAASA,EAAW,IAAe,EAAE,GAElD,IAAK,QACD,MAAO,CACH,KAAM,QACN,MAAO,WAAWA,EAAW,KAA0B,GAE/D,IAAK,OACD,MAAO,CACH,KAAM,OACN,KAAMA,EAAW,MAEzB,IAAK,eACD,MAAO,CACH,KAAM,eACN,aAAcA,EAAW,cAEjC,IAAK,iBACD,MAAO,CACH,KAAM,iBACN,eAAgBA,EAAW,gBAEnC,IAAK,yBACD,MAAO,CACH,KAAM,yBACN,uBAAwBA,EAAW,wBAE3C,IAAK,aACD,MAAO,CACH,KAAM,aACN,WAAYA,EAAWE,CAAa,GAE5C,IAAK,aACD,MAAO,CACH,KAAM,aACN,WAAYf,GACRa,EAAW,WACXrC,EACAC,CAAgB,GAG5B,IAAK,SACD,MAAO,CACH,KAAM,SACN,OAAQa,GAAYuB,EAAW,OAAiCrC,EAAeC,CAAgB,GAEvG,IAAK,QACD,MAAO,CACH,KAAM,QACN,MAAkBoC,EAAW,OAErC,IAAK,OACD,MAAO,CACH,KAAM,QAEd,QACI,eAAQ,MAAM,sCAAwCE,CAAa,EAC5D,CACH,KAAM,WAGtB,CA/FSxI,EAAA4G,GAAA,yBAiGT,SAASD,GACL2B,EACArC,EACAC,EAAkC,CAElC,IAAMqC,EAAiB,OAAO,KAAKD,CAAU,EAC7C,GAAIC,EAAe,OAAS,EACxB,MAAM,IAAI,MAAM,mDAAmD,KAAK,UAAUD,CAAU,CAAC,EAAE,EAEnG,IAAME,EAAgBD,EAAe,CAAC,EACtC,OAAQC,EAAe,CACnB,IAAK,SACD,MAAO,CACH,KAAM,SACN,OAASF,EAAWE,CAAa,EAAU,OAEnD,IAAK,OACD,MAAO,CACH,KAAM,OACN,KAAOF,EAAW,KAAa,QAAU,QAEjD,IAAK,MACD,MAAO,CACH,KAAM,MACN,IAAK,SAAUA,EAAW,IAAY,MAAiB,EAAE,GAEjE,IAAK,UACD,MAAO,CACH,KAAM,UACN,QAAS,WAAYA,EAAW,QAAgB,KAAe,GAEvE,IAAK,OACD,MAAO,CACH,KAAM,OACN,KAAOA,EAAW,KAA2B,OAErD,IAAK,eACD,MAAO,CACH,KAAM,eACN,aAAeA,EAAW,aAAgC,OAElE,IAAK,yBACD,MAAO,CACH,KAAM,yBACN,uBAAyBA,EAAW,uBAA0C,OAEtF,IAAK,iBACD,MAAO,CACH,KAAM,iBACN,eAAiBA,EAAW,eAAkC,OAEtE,IAAK,aACD,MAAO,CACH,KAAM,aACN,WAAaA,EAAWE,CAAa,EAAU,OAEvD,IAAK,aACD,MAAO,CACH,KAAM,aACN,WAAYf,GACRa,EAAW,WACXrC,EACAC,CAAgB,GAG5B,IAAK,SACD,MAAO,CACH,KAAM,SACN,OAAQa,GAAYuB,EAAW,OAAiCrC,EAAeC,CAAgB,GAEvG,IAAK,QACD,MAAO,CACH,KAAM,QACN,MAAkBoC,EAAW,OAErC,IAAK,OACD,MAAO,CACH,KAAM,QAEd,QACI,eAAQ,MAAM,+BAAiCE,CAAa,EACrD,CACH,KAAM,WAGtB,CArFSxI,EAAA2G,GAAA,mBAuFT,SAAS8B,GACLrB,EACAnB,EACAC,EAAkC,CAElC,GAAM,CAAE,KAAAwC,EAAM,UAAAC,EAAW,GAAGC,CAAM,EAAKxB,EAAW,YAC5CyB,EAAwC,CAC1C,KAAMvG,GAAQoG,CAAI,EAClB,UAAWC,GAEXG,EAA0B,GAAG7C,CAAa,IAAI3D,GAAQoG,CAAI,CAAC,GAO/D,GANIC,IAAc,IAAMA,IAAc,SAClCG,GAA2B,IAAIH,CAAS,IAExCC,GAAU,OAAO,KAAKA,CAAM,EAAE,OAAS,IACvCC,EAAc,MAAQjC,GAAsBgC,EAAQE,EAAyB5C,CAAgB,GAE7FkB,EAAW,WAAY,CACvB,IAAM2B,EAAwBjC,MAC1BnH,GAAA,aAAYyH,EAAW,UAAU,EACjC0B,EACA5C,CAAgB,EAEhB6C,GAAyBA,EAAsB,OAAS,IACxDF,EAAc,YAAcE,GAGpC,IAAMC,EAAO,OAAO,KAAK5B,CAAU,EAAE,OAAQ6B,GAAaA,IAAa,eAAiBA,IAAa,YAAY,EACjH,OAAI9B,GAAuCC,EAAY,QAAQ,EAC3DyB,EAAc,OAAS9B,GAAYK,EAAW,OAAQ0B,EAAyB5C,CAAgB,EACxFiB,GAA2CC,EAAY,YAAY,EAC1EyB,EAAc,WAAapB,GAAgBL,EAAW,WAAY0B,EAAyB5C,CAAgB,EACpG8C,EAAK,SAAW,EACvBH,EAAc,MAAQlC,GAClB,CAAE,CAACqC,EAAK,CAAC,CAAC,EAAI5B,EAAmB4B,EAAK,CAAC,CAAC,CAAC,EACzCF,EACA5C,CAAgB,EAEb8C,EAAK,OAAS,GACrB,QAAQ,MAAM,gBAAgB,KAAK,UAAU5B,CAAU,CAAC,oCAAoC,EAGzFyB,CACX,CA3CS7I,EAAAyI,GAAA,mBA6CT,SAAS3B,GACLoC,EACAjD,EACAC,EAAkC,CAElC,OAAOgD,EAAY,IAAK9B,GAAeqB,GAAgBrB,EAAYnB,EAAeC,CAAgB,CAAC,CACvG,CANSlG,EAAA8G,GAAA,oBAQT,SAAShG,GAAqBqI,EAAgBD,EAA4B,CACtE,MAAO,CACH,OAAQC,EACR,YAAaD,EAErB,CALSlJ,EAAAc,GAAA,wBAWT,SAASsI,GAAqB5I,EAAwC0F,EAAkC,CACpG1F,EACK,OAAQ6I,GAAmBA,EAAe,cAAgB,MAAS,EACnE,QAASA,GAAkB,CACxBnD,EAAiB,KACbpF,GACIwB,GAAQ+G,EAAe,YAAY,MAAM,EACzCvC,MACInH,GAAA,aAAY0J,EAAe,UAAU,EACrCA,EAAe,YAAY,OAC3BnD,CAAgB,CACnB,CACJ,CAET,CAAC,CACT,CAfSlG,EAAAoJ,GAAA,wBAiBT,SAASE,GAAYC,EAAwBC,EAAoBC,EAAsB,CACnF,IAAM7G,EAAY2G,EAAU,YAAY,UAClCL,EAAgC,CAAA,EAChC9F,EAAcD,MAAiBxD,GAAA,aAAY4J,EAAU,UAAU,EAAGL,EAAatG,CAAS,EACxFa,EAAeD,MAAkB7D,GAAA,aAAY4J,EAAU,WAAW,EAAGL,EAAatG,CAAS,EAC3FiB,EAAkBD,MAAqBjE,GAAA,aAAY4J,EAAU,cAAc,EAAG3G,CAAS,EACzFqB,EAA6B,CAAA,EAC7BO,EAA6B,CAAA,EAC7BkF,EAAuC,CAAA,EACvC7G,EAAsC,CACtC,MAAO,kBACP,mBAAoB,IAEpB+B,EAAuB,CAAA,EACvB+E,EAAmC,CAAA,EAEvC,GAAIJ,EAAU,gBAyBV,GAxBAtF,EAAaD,MACTrE,GAAA,aAAY4J,EAAU,gBAAgB,SAAS,EAC/C3G,EACA2G,EAAU,gBAAgB,YAAY,KACtCL,CAAW,EAEf1E,EAAaD,MACT5E,GAAA,aAAY4J,EAAU,gBAAgB,SAAS,EAC/C3G,EACA2G,EAAU,gBAAgB,YAAY,KACtCL,CAAW,EAGfQ,EAAkBhH,MACd/C,GAAA,aAAY4J,EAAU,gBAAgB,cAAc,EACpD3G,EACA2G,EAAU,eAAe,EAE7B1G,EAAkB,CACd,MAAO,kBACP,KAAM0G,EAAU,gBAAgB,YAAY,KAC5C,mBAAoB,GAAG3G,CAAS,IAAI2G,EAAU,gBAAgB,YAAY,IAAI,IAG9EC,IAAe,MACf5E,EAAUA,EAAQ,OACdW,MACI5F,GAAA,aAAY4J,EAAU,gBAAgB,cAAc,EACpDtF,EACApB,EAAgB,kBAAkB,CACrC,UAEE2G,IAAe,MAEtBG,EAAgBA,EAAc,OAC1BhE,MACIhG,GAAA,aAAY4J,EAAU,gBAAgB,cAAc,EACpD1G,EAAgB,kBAAkB,CACrC,EAIL8G,EAAgBA,EAAc,OAC1BhE,MACIhG,GAAA,aAAY4J,EAAU,gBAAgB,YAAY,EAClD1G,EAAgB,kBAAkB,CACrC,MAGL,OAAM,IAAI,MAAM,6BAA6B2G,CAAU,EAAE,EAG7DA,IAAe,QACf5E,EAAUA,EAAQ,OAAOD,MAAahF,GAAA,aAAY4J,EAAU,MAAM,EAAG3G,EAAW,EAAK,CAAC,EACtFgC,EAAUA,EAAQ,OAAOD,MAAahF,GAAA,aAAY4J,EAAU,QAAQ,EAAG3G,EAAW,EAAI,CAAC,GAE3F,IAAMD,EAAeO,MAAkBvD,GAAA,aAAY4J,EAAU,WAAW,EAAG3G,CAAS,EAEpFwG,MAAqBzJ,GAAA,aAAY4J,EAAU,WAAW,EAAGL,CAAW,EACpE,IAAMU,EAAoD,CAAA,EAC1D,OAAAA,EAAcH,CAAc,EAAIP,EACzB,CACH,aAAAvG,EACA,gBAAA+G,EACA,YAAaE,EACb,gBAAA/G,EACA,UAAWD,EACX,WAAAqB,EACA,WAAAO,EACA,aAAAf,EACA,gBAAAI,EACA,QAAAe,EACA,cAAA+E,EACA,YAAAvG,EAER,CA5FSpD,EAAAsJ,GAAA,eA8FT,SAASO,GAAgBC,EAA4B,CACjD,OAAOA,EAAW,OAAO,CAACC,EAA8BC,QACnCrK,GAAA,aAAYqK,EAAU,cAAc,CAAC,EAC7C,QAASC,GAAkC,CAChDF,EAAgB,KAAK,CACjB,IAAKC,EAAU,YAAY,IAC3B,MAAOC,EAAQ,YAAY,MAC3B,UAAWA,EAAQ,YAAY,UAClC,CACL,CAAC,EACMF,GACR,CAAA,CAAE,CACT,CAZS/J,EAAA6J,GAAA,mBAcT,IAAIK,GAAkC,CAAA,EAEtC,SAAStJ,GAAYyE,EAAY,CAC7B,IAAMqC,EAAarC,EAAK,MAAMxF,EAAgB,EACxCsK,EAAQzC,EAAaA,EAAW,CAAC,EAAIrC,EACrC+E,EAAgB9H,GAAQ6H,CAAK,EACnC,MAAO,CACH,KAAMzC,EAAa,cAAc0C,CAAa,IAAMA,EACpD,aAAc1C,IAAe,KAErC,CARS1H,EAAAY,GAAA,eAYT,SAAS0B,GAAQ+H,EAAgC,OAC7C,GAAI,CAACA,EACD,OAAOA,EAGX,IAAMC,EAAa,CAAC,IAAK,IAAK,GAAG,EAC3BC,EAAsB,CAAA,EACxBC,EAAQ,EACZ,QAASC,EAAM,EAAGC,EAAa,GAAMD,EAAMJ,EAAa,OAAQI,IAAO,CACnE,IAAME,EAAON,EAAaI,CAAG,EAC7B,GAAIC,GAAcC,IAAS,IAAK,CAC5B,IAAMC,EAAQP,EAAa,UAAUG,EAAOC,CAAG,EAC/CF,EAAU,MAAKzE,EAAAoE,GAAQU,CAAK,KAAC,MAAA9E,IAAA,OAAAA,EAAI8E,CAAK,EACtCJ,EAAQC,EACRC,EAAa,GAEbJ,EAAW,SAASK,CAAI,IACxBJ,EAAU,KAAKF,EAAa,UAAUG,EAAOC,EAAM,CAAC,CAAC,EACrDD,EAAQC,EAAM,EACdC,EAAa,IAGrB,OAAAH,EAAU,KAAKF,EAAa,UAAUG,CAAK,CAAC,EAErCD,EAAU,KAAK,EAAE,CAC5B,CAzBSvK,EAAAsC,GAAA,WA2BT,SAASuI,GAAaC,EAAoB,CACtC,IAAMnI,EAAemI,EAAQ,OAAO,CAACC,EAAwCC,IAClED,EAAqB,OAAOC,EAAO,YAAY,EACvD,CAAA,CAAE,EACCtB,EAAkBoB,EAAQ,OAAO,CAACG,EAA8CD,IAC3EC,EAAwB,OAAOD,EAAO,eAAe,EAC7D,CAAA,CAAE,EACC/G,EAAa6G,EAAQ,OAAO,CAACI,EAAoCF,IAC5DE,EAAmB,OAAOF,EAAO,UAAU,EACnD,CAAA,CAAE,EACCxG,EAAasG,EAAQ,OAAO,CAACK,EAAoCH,IAC5DG,EAAmB,OAAOH,EAAO,UAAU,EACnD,CAAA,CAAE,EACC5H,EAAc0H,EAAQ,OAAO,CAACM,EAAsCJ,IAC/DI,EAAoB,OAAOJ,EAAO,WAAW,EACrD,CAAA,CAAE,EACCpG,EAAUkG,EAAQ,OAAO,CAACO,EAA8BL,IACnDK,EAAgB,OAAOL,EAAO,OAAO,EAC7C,CAAA,CAAE,EACCrB,EAAgBmB,EAAQ,OAAO,CAACQ,EAA0CN,IACrEM,EAAsB,OAAON,EAAO,aAAa,EACzD,CAAA,CAAE,EACCvH,EAAeqH,EAAQ,OAAO,CAACS,EAAyCP,IACnEO,EAAsB,OAAOP,EAAO,YAAY,EACxD,CAAA,CAAE,EACCnH,EAAkBiH,EAAQ,OAAO,CAACU,EAA8CR,IAC3EQ,EAAwB,OAAOR,EAAO,eAAe,EAC7D,CAAA,CAAE,EACDpB,EAAgB,CAAA,EACpBkB,EAAQ,QAASE,GAAU,CACvBpB,EAAgB,OAAO,OAAOA,EAAeoB,EAAO,WAAW,CACnE,CAAC,EACD,IAAInI,EACAD,EACJ,OAAAkI,EAAQ,QAASE,GAAU,CACnBA,EAAO,iBAAmB,OAAO,KAAKA,EAAO,eAAe,EAAE,OAAS,IACvEnI,EAAkBmI,EAAO,gBACzBpI,EAAYoI,EAAO,UAE3B,CAAC,EAGD/G,EAAW,QAASE,GAAa,CAC7B,IAAMd,EAAaD,EAAY,KAC1BqI,GAAkBA,EAAc,qBAAuBtH,EAAU,cAAc,EAEpFd,GAAU,MAAVA,EAAY,qBAAqB,QAASqI,GAAW,CACjD,IAAMC,EAAqCD,EACrCE,EAAiBlC,EAAgB,KAAMmC,GAAUA,EAAM,cAAgBF,EAAU,YAAY,EACnG,GAAIC,EAAgB,CAChB,IAAMpG,EAAkBoG,EAAe,eAAe,KACjD5I,GAAmBA,EAAe,YAAcmB,EAAU,kBAAkB,EAG7EqB,IACArB,EAAU,0BAA0BuH,EAAQ,IAAI,EAAIlG,EAAgB,WAGhF,CAAC,CACL,CAAC,EACDpC,EAAY,QAASC,GAAc,CAC/BA,EAAW,qBAAqB,QAASqI,GAAgB,CACrD,IAAMC,EAAqCD,EACrC5I,EAAcH,EAAa,KAAMkJ,GAAUA,EAAM,qBAAuBF,EAAU,YAAY,EAChG7I,GAAeA,EAAY,wBAA0BA,EAAY,uBAAuB,OAAS,IAC7FA,EAAY,uBAAuB,CAAC,EAAE,iBAAmBO,EAAW,mBACpEsI,EAAU,sBAAwB7I,EAAY,uBAE9C6I,EAAU,sBAAwB7I,EAAY,uBAAuB,IAAKgJ,IAC/D,CACH,eAAgBA,EAAc,eAC9B,eAAgBA,EAAc,eAC9B,eAAgBA,EAAc,eAC9B,eAAgBA,EAAc,gBAErC,EAGb,CAAC,CACL,CAAC,EACM,CACH,aAAAnJ,EACA,gBAAA+G,EACA,YAAaE,EACb,gBAAA/G,EACA,UAAWD,EACX,WAAAqB,EACA,WAAAO,EACA,aAAAf,EACA,gBAAAI,EACA,QAAAe,EACA,cAAA+E,EACA,YAAAvG,EAER,CA9FSpD,EAAA6K,GAAA,gBAgGT,SAASkB,GAAejC,EAAyBgB,EAAsB,CACnEZ,GAAUJ,EAAW,OAAO,CAACkC,EAAKhC,KAC9BgC,EAAIhC,EAAU,KAAK,EAAIA,EAAU,UAC1BgC,GACR,CAAA,CAA4B,EAE/BlB,EACK,OAAQE,GAAWA,EAAO,YAAY,KAAK,EAC3C,QAASA,GAAU,CAChBd,GAAQc,EAAO,YAAY,KAAK,EAAIA,EAAO,YAAY,SAC3D,CAAC,CACT,CAXShL,EAAA+L,GAAA,kBAoBT,SAAgBE,GAAMC,EAAaC,EAA6B,cAAa,CACzE,IAAMC,KAAqB1M,GAAA,QAAOwM,EAAK,CAAE,QAAS,EAAI,CAAE,EAElDG,EAAUD,EAAQ,WAAW,EAAE,YAAY,QAC3CtB,KAAyBnL,GAAA,aAAYyM,EAAQ,WAAW,EAAE,mBAAmB,EAAE,MAAM,EACrFtC,EAAaD,MAAgBlK,GAAA,aAAYyM,EAAQ,WAAW,EAAE,gBAAgB,CAAC,CAAC,EAEtFL,GAAejC,EAAYgB,CAAO,EAElC,IAAMwB,EAAgBxB,EAAQ,IAAKE,GACxB1B,GAAY0B,EAAQqB,EAASF,CAAkB,CACzD,EAQD,OAPkC,IAAIxM,GAAA,oBAClCwM,EACAE,EACAxB,GAAayB,CAAa,EAC1BxC,CAAU,CAIlB,CApBgB9J,EAAAiM,GAAA,SAAhBM,GAAA,MAAAN,4GChvCA,IAAAO,GAAA,KAAS,OAAA,eAAAC,GAAA,QAAA,CAAA,WAAA,GAAA,IAAA,UAAA,CAAA,OAAAD,GAAA,KAAK,CAAA,CAAA,EACd,IAAAE,GAAA,KAAS,OAAA,eAAAD,GAAA,QAAA,CAAA,WAAA,GAAA,IAAA,UAAA,CAAA,OAAAC,GAAA,KAAK,CAAA,CAAA,ICDd,IAAAC,GAAAC,GAAA,CAAAC,GAAAC,KAAA,CAIA,IAAIC,GAAa,EACXC,GAAsB,gBAE5B,SAASC,IAAM,CACd,MAAO,MAAQ,IAAI,KAAK,EAAE,QAAQ,EAAI,IAAMF,IAC7C,CAFSG,EAAAD,GAAA,OAIT,SAASE,GAA2BC,EAAgB,CACnD,OAAIA,GAAkBA,EAAe,QAAQ,YAAY,EAAI,IAC5DA,GAAkB,cAEZA,CACR,CALSF,EAAAC,GAAA,8BAOT,SAASE,GAAiBC,EAAU,CACnC,IAAMC,EAAeD,EAAS,SAAS,EACvC,GAAIC,EAAc,CACjB,GAAIA,EAAa,aAChB,OAAOA,EAAa,aAGrB,GAAIA,EAAa,cAChB,OAAOJ,GAA2BI,EAAa,aAAa,CAE9D,CAEA,IAAMC,EAASF,EAAS,SAAS,EACjC,GAAI,CAACE,GAAU,CAACA,EAAO,GACtB,MAAM,MAAM,gCAAgC,EAE7C,OAAOA,EAAO,EACf,CAjBSN,EAAAG,GAAA,oBAmBT,SAASI,GAAcH,EAAU,CAChC,IAAME,EAASF,EAAS,SAAS,EACjC,GAAI,CAACE,GAAU,CAACA,EAAO,oBAAsB,CAACA,EAAO,mBAAmB,QACvE,MAAM,MAAM,qCAAqC,EAElD,OAAOA,EAAO,mBAAmB,OAClC,CANSN,EAAAO,GAAA,iBAQT,SAASC,GAAaJ,EAAUK,EAAW,CAC1C,OACCL,GACAA,EAAS,SAAS,GAClBA,EAAS,SAAS,EAAE,gBACpB,CAAC,4BAA6B,2BAA2B,EAAE,SAASA,EAAS,SAAS,EAAE,eAAe,EAAE,EAElGK,EAGD,EACR,CAXST,EAAAQ,GAAA,gBAaT,SAASE,GAAaC,EAAa,CAClC,OAAO,KAAK,UAAU,CACrB,SAAUA,EAAY,IAAMZ,GAAI,EAAE,QAAQ,KAAM,GAAG,EAAI,IAAMY,EAAY,KACzE,SAAU,SACV,WAAYA,EAAY,KACxB,WAAY,GACZ,UAAWA,EAAY,UACvB,YAAa,GACb,QAASA,EAAY,SAAW,CAAC,EACjC,SAAU,CACT,GAAIA,EAAY,UAChB,UAAW,GACX,KAAMA,EAAY,WACnB,EACA,MAAOA,EAAY,WAAa,gBAAkB,SAClD,MAAO,CAAC,EACR,UAAW,QAAUA,EAAY,UAAU,QAAQ,aAAc,EAAE,EAAI,YACvE,UAAWA,EAAY,UACvB,SAAUA,EAAY,UAAY,IAAI,KAAK,EAAE,QAAQ,EACrD,iBAAkB,GAClB,QAAS,CACR,UAAWb,GAAsBa,EAAY,aAC7C,QAAS,GACT,KAAM,GACN,cAAeA,EAAY,cAC3B,qBAAsB,GACtB,iBAAkB,EACnB,EACA,iBAAkB,CAAC,EACnB,kBAAmB,CAAC,EACpB,iBAAkB,CACjB,KAAMA,EAAY,WAClB,GAAIA,EAAY,WAChB,SAAUA,EAAY,UAEvB,EACA,OAAQ,GACR,iBAAkB,GAClB,oBAAqB,EACtB,CAAC,CACF,CAxCSX,EAAAU,GAAA,gBA0ETd,GAAO,QAAU,CAShB,MAAO,SAASgB,EAAc,CAC7B,IAAMC,EAAS,KAAK,MAAMD,CAAY,EAEtC,GACC,CAACC,EAAO,UACR,CAACA,EAAO,YACR,CAACA,EAAO,UACR,CAACA,EAAO,WACR,CAACA,EAAO,UACR,CAACA,EAAO,SACR,CAACA,EAAO,OACR,CAACA,EAAO,QAER,MAAM,MAAM,wDAAwD,EAGrE,MAAO,CACN,GAAIA,EAAO,SACX,UAAWA,EAAO,UAClB,WAAYA,EAAO,iBAAmBA,EAAO,iBAAiB,SAAW,GACzE,SAAUA,EAAO,SACjB,UAAWA,EAAO,UAClB,KAAMA,EAAO,WACb,UAAWA,EAAO,SAAS,GAC3B,YAAaA,EAAO,SAAS,KAC7B,WAAYA,EAAO,QAAU,gBAC7B,aAAcA,EAAO,QAAQ,UAAU,QAAQf,GAAqB,EAAE,EACtE,QAASe,EAAO,QAChB,cAAeA,EAAO,QAAQ,aAC/B,CACD,EAUA,mBAAoB,SAAUF,EAAaP,EAAU,CACpD,GACC,CAACO,EAAY,MACb,CAACA,EAAY,WACX,OAAOA,EAAY,YAAe,WACpC,CAACA,EAAY,aAEb,MAAM,MAAM,yDAAyD,EAGtE,GAAI,CAACP,EACJ,MAAM,MAAM,0BAA0B,EAGvC,OAAAO,EAAY,UAAYR,GAAiBC,CAAQ,EACjDO,EAAY,WAAaJ,GAAcH,CAAQ,EAC/CO,EAAY,UAAYH,GAAaJ,EAAUO,EAAY,SAAS,EAE7DD,GAAaC,CAAW,CAChC,EASA,SAAU,SAASA,EAAa,CAC/B,GACC,CAACA,EAAY,MACb,CAACA,EAAY,WACX,OAAOA,EAAY,YAAe,WACpC,CAACA,EAAY,cACb,EAAEA,EAAY,WAAaA,EAAY,YAEvC,MAAM,MAAM,gDAAgD,EAG7D,OAAOD,GAAaC,CAAW,CAChC,CACD,IC9NA,IAAAG,GAAAC,GAAA,CAAAC,GAAAC,KAAA,CAKAA,GAAO,QAAU,CAKhB,OAAQ,IACT,ICXA,IAAAC,GAAAC,GAAAC,IAAA,cA0BA,IAAIC,GAAc,sBACdC,GAAiB,OAAO,UAAU,eAClCC,GAASC,EAAA,SAAUC,EAAKC,EAAK,CAAE,OAAOJ,GAAe,MAAMG,EAAK,CAACC,CAAG,CAAC,CAAG,EAA/D,UAYbN,GAAQ,kBAAoB,SAAUO,EAAQ,CAE5C,OAAKA,EAGE,OAAOA,CAAM,EAAE,QAAQN,GAAa,MAAM,EAFxC,EAGX,EAEA,IAAIO,GAAqB,CACvB,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,QACL,IAAK,OACP,EACIC,GAAc,WAElB,SAASC,GAAYC,EAAG,CACtB,OAAOH,GAAmBG,CAAC,GAAKA,CAClC,CAFSP,EAAAM,GAAA,eAaT,IAAIE,GACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAwBFZ,GAAQ,UAAY,SAAUa,EAAQ,CACpC,OAAOA,GAAU,KACb,GACA,OAAOA,CAAM,EACZ,QAAQJ,GAAaC,EAAW,CACvC,EAEA,SAASI,IAAoB,CAC3B,OAAO,SAAS,UAAU,SAAS,KAAK,IAAI,EAAI;AAAA,EAAQF,EAC1D,CAFSR,EAAAU,GAAA,qBAIT,GAAI,CACE,OAAO,OAAO,gBAAmB,WAKnC,OAAO,eAAed,GAAQ,UAAW,WAAY,CAAE,MAAOc,EAAkB,CAAC,EAGjFd,GAAQ,UAAU,SAAWc,EAEjC,MAAc,CACZ,QAAQ,KAAK,sEAAsE,CACrF,CAaAd,GAAQ,YAAc,SAAUe,EAAIC,EAAM,CAExC,GADAA,EAAOA,GAAQ,CAAC,EACXD,GAAO,KACV,QAASE,KAAKD,EACPb,GAAOa,EAAMC,CAAC,IAGfA,IAAM,aAAeA,IAAM,gBAG/BF,EAAGE,CAAC,EAAID,EAAKC,CAAC,IAGlB,OAAOF,CACT,EAcAf,GAAQ,oBAAsB,SAAUe,EAAIC,EAAME,EAAM,CAGtD,GAFAA,EAAOA,GAAQ,CAAC,EAChBF,EAAOA,GAAQ,CAAC,EACXD,GAAO,KACV,QAASI,EAAI,EAAGA,EAAID,EAAK,OAAQC,IAAK,CACpC,IAAIF,EAAIC,EAAKC,CAAC,EACd,GAAI,OAAOH,EAAKC,CAAC,EAAK,IAAa,CAIjC,GAHI,CAACd,GAAOa,EAAMC,CAAC,GAGfA,IAAM,aAAeA,IAAM,cAC7B,SAEFF,EAAGE,CAAC,EAAID,EAAKC,CAAC,CAChB,CACF,CAEF,OAAOF,CACT,EAUAf,GAAQ,MAAQ,CACd,MAAO,CAAC,EACR,IAAK,SAAUM,EAAKc,EAAK,CACvB,KAAK,MAAMd,CAAG,EAAIc,CACpB,EACA,IAAK,SAAUd,EAAK,CAClB,OAAO,KAAK,MAAMA,CAAG,CACvB,EACA,OAAQ,SAAUA,EAAK,CACrB,OAAO,KAAK,MAAMA,CAAG,CACvB,EACA,MAAO,UAAY,CACjB,KAAK,MAAQ,CAAC,CAChB,CACF,EAUAN,GAAQ,cAAgB,SAAUqB,EAAK,CACrC,OAAOA,EAAI,QAAQ,UAAW,SAAUC,EAAO,CAAE,OAAOA,EAAM,CAAC,EAAE,YAAY,CAAG,CAAC,CACnF,EASAtB,GAAQ,gCAAmC,UAAY,CACrD,OAAI,OAAO,OAAO,QAAU,WACnB,UAAY,CACjB,OAAO,OAAO,OAAO,IAAI,CAC3B,EAEI,CAAC,UAAW,IAAI,YAAa,OAM5B,UAAY,CACjB,MAAO,CAAC,CACV,EAPS,UAAY,CACjB,MAAO,CAAC,UAAW,IAAI,CACzB,CAMJ,EAAG,IC9OH,IAAAuB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,CAAAA,GAAA,SACE,KAAQ,MACR,YAAe,gCACf,SAAY,CACV,WACA,SACA,KACF,EACA,QAAW,QACX,OAAU,0DACV,QAAW,aACX,IAAO,CACL,IAAO,cACT,EACA,KAAQ,eACR,SAAY,aACZ,MAAS,aACT,WAAc,CACZ,KAAQ,MACR,IAAO,8BACT,EACA,KAAQ,oCACR,SAAY,6BACZ,aAAgB,CACd,KAAQ,SACV,EACA,gBAAmB,CACjB,WAAc,UACd,OAAU,SACV,uBAAwB,SACxB,MAAS,SACT,YAAa,SACb,MAAS,UACT,YAAa,SACf,EACA,QAAW,CACT,KAAQ,UACV,EACA,QAAW,CACT,KAAQ,cACV,CACF,ICzCA,IAAAC,GAAAC,GAAAC,IAAA,cA+CA,IAAIC,GAAK,QAAQ,IAAI,EACjBC,GAAO,QAAQ,MAAM,EACrBC,GAAQ,KAERC,GAAoB,GAEpBC,GAAkB,KAA2B,QAC7CC,GAA0B,IAC1BC,GAA2B,IAC3BC,GAAqB,IACrBC,GAAuB,SACvBC,GAAQ,MACRC,GAAgB,0CAChBC,GAA2B,CAAC,YAAa,QAAS,UAAW,QAAS,eACxE,SAAU,QAAS,eAAgB,SAAU,WAAY,OAAO,EAI9DC,GAAmCD,GAAyB,OAAO,OAAO,EAC1EE,GAAO,UACPC,GAAiB,6BAUrBf,GAAQ,MAAQG,GAAM,MAStBH,GAAQ,WAAaC,GAAG,aAYxBD,GAAQ,WAAaS,GAUrBT,GAAQ,YAAe,IAAI,SAAS,cAAc,EAAG,EAAE,QAWvDA,GAAQ,eAAiB,SAASgB,EAAMC,EAAUC,EAAO,CACvD,IAAIC,EAAUjB,GAAK,QACfkB,EAAUlB,GAAK,QACfmB,EAAUnB,GAAK,QACfoB,EAAcD,EAAQH,EAAQD,EAAWE,EAAQF,CAAQ,EAAGD,CAAI,EAChEO,EAAMH,EAAQJ,CAAI,EACtB,OAAKO,IACHD,GAAe,QAEVA,CACT,EASA,SAASE,GAAaR,EAAMS,EAAO,CACjC,IAAIC,EACJ,GAAID,EAAM,KAAK,SAAUE,EAAG,CAC1B,OAAAD,EAAW1B,GAAQ,eAAegB,EAAMW,EAAG,EAAI,EACxC1B,GAAG,WAAWyB,CAAQ,CAC/B,CAAC,EACC,OAAOA,CAEX,CARSE,EAAAJ,GAAA,gBAiBT,SAASK,GAAe3B,EAAM4B,EAAS,CACrC,IAAIR,EACAI,EACAK,EAAQD,EAAQ,MAChBE,EAAQ,oBAAoB,KAAK9B,CAAI,EAGzC,GAAI8B,GAASA,EAAM,OACjB9B,EAAOA,EAAK,QAAQ,OAAQ,EAAE,EAC1B,MAAM,QAAQ4B,EAAQ,IAAI,EAC5BR,EAAcE,GAAatB,EAAM4B,EAAQ,IAAI,EAE7CR,EAActB,GAAQ,eAAeE,EAAM4B,EAAQ,MAAQ,IAAK,EAAI,UAMlEA,EAAQ,WACVJ,EAAW1B,GAAQ,eAAeE,EAAM4B,EAAQ,QAAQ,EACpD7B,GAAG,WAAWyB,CAAQ,IACxBJ,EAAcI,IAId,CAACJ,GAAe,MAAM,QAAQS,CAAK,IACrCT,EAAcE,GAAatB,EAAM6B,CAAK,GAEpC,CAACT,GAAe,OAAOQ,EAAQ,UAAa,WAC9C,MAAM,IAAI,MAAM,oCACZA,EAAQ,eAAe5B,CAAI,EAAI,GAAG,EAG1C,OAAOoB,CACT,CAlCSM,EAAAC,GAAA,kBAsDT,SAASI,GAAYH,EAASI,EAAU,CACtC,IAAIC,EACAlB,EAAWa,EAAQ,SACnBM,EAAc,UAAU,OAAS,EAErC,GAAIN,EAAQ,MAAO,CACjB,GAAI,CAACb,EACH,MAAM,IAAI,MAAM,kCAAkC,EAGpD,GADAkB,EAAOnC,GAAQ,MAAM,IAAIiB,CAAQ,EAC7BkB,EACF,OAAOA,EAEJC,IACHF,EAAWG,GAAWpB,CAAQ,EAAE,SAAS,EAAE,QAAQH,GAAM,EAAE,EAE/D,SACS,CAACsB,EAAa,CAErB,GAAI,CAACnB,EACH,MAAM,IAAI,MAAM,uDACU,EAE5BiB,EAAWG,GAAWpB,CAAQ,EAAE,SAAS,EAAE,QAAQH,GAAM,EAAE,CAC7D,CACA,OAAAqB,EAAOnC,GAAQ,QAAQkC,EAAUJ,CAAO,EACpCA,EAAQ,OACV9B,GAAQ,MAAM,IAAIiB,EAAUkB,CAAI,EAE3BA,CACT,CA9BSP,EAAAK,GAAA,eA4CT,SAASK,GAAeR,EAASS,EAAMC,EAAI,CACzC,IAAIC,EACJ,GAAKD,EAgBA,CACH,GAAI,CACFC,EAASR,GAAYH,CAAO,EAAES,CAAI,CACpC,OACOG,EAAK,CACV,OAAOF,EAAGE,CAAG,CACf,CAEAF,EAAG,KAAMC,CAAM,CACjB,KAzBS,CACP,GAAI,OAAOzC,GAAQ,aAAe,WAChC,OAAO,IAAIA,GAAQ,YAAY,SAAUqB,EAASsB,EAAQ,CACxD,GAAI,CACFF,EAASR,GAAYH,CAAO,EAAES,CAAI,EAClClB,EAAQoB,CAAM,CAChB,OACOC,EAAK,CACVC,EAAOD,CAAG,CACZ,CACF,CAAC,EAGD,MAAM,IAAI,MAAM,oCAAoC,CAExD,CAWF,CA5BSd,EAAAU,GAAA,kBAsCT,SAASD,GAAWX,EAAS,CAC3B,OAAO1B,GAAQ,WAAW0B,CAAQ,CACpC,CAFSE,EAAAS,GAAA,cAiBT,SAASO,GAAY1C,EAAM4B,EAAS,CAClC,IAAIe,EAAO1C,GAAM,YAAYA,GAAM,gCAAgC,EAAG2B,CAAO,EAE7E,GADAe,EAAK,SAAWhB,GAAe3B,EAAM2C,CAAI,EACrC,OAAOf,EAAQ,UAAa,WAAY,CAC1C,IAAIgB,EAAiBhB,EAAQ,SAAS5B,EAAM2C,EAAK,QAAQ,EACzD,GAAIC,IACEA,EAAe,WACjBD,EAAK,SAAWC,EAAe,UAE7BA,EAAe,UACjB,OAAOb,GAAYY,EAAMC,EAAe,QAAQ,CAGtD,CACA,OAAOb,GAAYY,CAAI,CACzB,CAfSjB,EAAAgB,GAAA,eA+BT,SAASG,GAAQL,EAAKM,EAAKC,EAAMC,EAAQC,EAAK,CAC5C,IAAIC,EAAQJ,EAAI,MAAM;AAAA,CAAI,EACtBK,EAAQ,KAAK,IAAIH,EAAS,EAAG,CAAC,EAC9BI,EAAM,KAAK,IAAIF,EAAM,OAAQF,EAAS,CAAC,EACvCjC,EAAWkC,EAAIF,CAAI,EAEnBM,EAAUH,EAAM,MAAMC,EAAOC,CAAG,EAAE,IAAI,SAAUE,EAAMC,EAAE,CAC1D,IAAIC,EAAOD,EAAIJ,EAAQ,EACvB,OAAQK,GAAQR,EAAS,OAAS,QAC9BQ,EACA,KACAF,CACN,CAAC,EAAE,KAAK;AAAA,CAAI,EAGZ,MAAAd,EAAI,KAAOzB,EACXyB,EAAI,SAAWzB,GAAY,OAAS,IAChCiC,EAAS;AAAA,EACTK,EAAU;AAAA;AAAA,EACVb,EAAI,QAEFA,CACR,CAtBSd,EAAAmB,GAAA,WAwBT,SAASY,GAAUX,EAAI,CACrB,OAAOA,EAAI,QAAQ,UAAW,IAAI,CACpC,CAFSpB,EAAA+B,GAAA,aAiBT3D,GAAQ,QAAU4B,EAAA,SAAiBM,EAAUW,EAAM,CACjD,IAAIe,EAKJ,OAAIf,GAAQA,EAAK,QACVzC,KACH,QAAQ,KAAK,2DAA2D,EACxEA,GAAoB,IAEjByC,EAAK,UACRA,EAAK,QAAUA,EAAK,OAEtB,OAAOA,EAAK,OAEde,EAAQ,IAAIC,GAAS3B,EAAUW,CAAI,EAC5Be,EAAM,QAAQ,CACvB,EAlBkB,WAkClB5D,GAAQ,OAAS,SAAUkC,EAAU4B,EAAGC,EAAG,CACzC,IAAIxB,EAAOuB,GAAK3D,GAAM,gCAAgC,EAClD0C,EAAOkB,GAAK5D,GAAM,gCAAgC,EAItD,OAAI,UAAU,QAAU,GACtBA,GAAM,oBAAoB0C,EAAMN,EAAM3B,EAAwB,EAGzDqB,GAAYY,EAAMX,CAAQ,EAAEK,CAAI,CACzC,EAeAvC,GAAQ,WAAa,UAAY,CAC/B,IAAIgE,EAAO,MAAM,UAAU,MAAM,KAAK,SAAS,EAC3C/C,EAAW+C,EAAK,MAAM,EACtBxB,EACAK,EAAO,CAAC,SAAU5B,CAAQ,EAC1BsB,EACA0B,EAGJ,OAAI,OAAO,UAAU,UAAU,OAAS,CAAC,GAAK,aAC5CzB,EAAKwB,EAAK,IAAI,GAGZA,EAAK,QAEPzB,EAAOyB,EAAK,MAAM,EAEdA,EAAK,OAEP7D,GAAM,YAAY0C,EAAMmB,EAAK,IAAI,CAAC,GAK9BzB,EAAK,WAEHA,EAAK,SAAS,QAChBM,EAAK,MAAQN,EAAK,SAAS,OAEzBA,EAAK,SAAS,YAAY,IAC5BM,EAAK,MAAQ,IAIfoB,EAAW1B,EAAK,SAAS,cAAc,EACnC0B,GACF9D,GAAM,YAAY0C,EAAMoB,CAAQ,GAMpC9D,GAAM,oBAAoB0C,EAAMN,EAAM1B,EAAgC,GAExEgC,EAAK,SAAW5B,GAGhBsB,EAAOpC,GAAM,gCAAgC,EAGxCmC,GAAeO,EAAMN,EAAMC,CAAE,CACtC,EAWAxC,GAAQ,SAAW6D,GAEnB7D,GAAQ,WAAa,UAAY,CAC/BA,GAAQ,MAAM,MAAM,CACtB,EAEA,SAAS6D,GAASK,EAAMrB,EAAM,CAC5BA,EAAOA,GAAQ1C,GAAM,gCAAgC,EACrD,IAAI2B,EAAU3B,GAAM,gCAAgC,EACpD,KAAK,aAAe+D,EAEpB,KAAK,KAAO,KACZ,KAAK,SAAW,GAChB,KAAK,YAAc,EACnB,KAAK,OAAS,GACdpC,EAAQ,OAASe,EAAK,QAAU,GAChCf,EAAQ,eAAiBe,EAAK,QAAUA,EAAK,gBAAkB1C,GAAM,UACrE2B,EAAQ,aAAee,EAAK,eAAiB,GAC7Cf,EAAQ,MAAQ,CAAC,CAACe,EAAK,MACvBf,EAAQ,SAAWe,EAAK,SACxBf,EAAQ,cAAgBe,EAAK,eAAiB7C,GAAQ,eAAiBM,GACvEwB,EAAQ,eAAiBe,EAAK,gBAAkB7C,GAAQ,gBAAkBO,GAC1EuB,EAAQ,UAAYe,EAAK,WAAa7C,GAAQ,WAAaQ,GAC3DsB,EAAQ,OAASe,EAAK,QAAU,GAChCf,EAAQ,QAAUe,EAAK,QACvBf,EAAQ,MAAQe,EAAK,OAAS,GAC9Bf,EAAQ,aAAee,EAAK,aAC5Bf,EAAQ,KAAOe,EAAK,KACpBf,EAAQ,SAAWe,EAAK,SACxBf,EAAQ,mBAAqBe,EAAK,mBAClCf,EAAQ,WAAae,EAAK,YAAc7C,GAAQ,YAAcS,GAC9DqB,EAAQ,MAAQe,EAAK,MACrBf,EAAQ,MAAQe,EAAK,MACrBf,EAAQ,mBAAqBe,EAAK,mBAClCf,EAAQ,cAAgB,OAAOe,EAAK,cAAiB,IAAc,CAAC,CAACA,EAAK,cAAgB,GAEtFf,EAAQ,OACVA,EAAQ,MAAQ,GAGhBA,EAAQ,MAAQ,OAAOe,EAAK,MAAS,IAAcA,EAAK,MAAQ,GAGlE,KAAK,KAAOf,EAEZ,KAAK,MAAQ,KAAK,YAAY,CAChC,CAxCSF,EAAAiC,GAAA,YA0CTA,GAAS,MAAQ,CACf,KAAM,OACN,QAAS,UACT,IAAK,MACL,QAAS,UACT,QAAS,SACX,EAEAA,GAAS,UAAY,CACnB,YAAa,UAAY,CACvB,IAAIb,EAAMrC,GACNwD,EAAQhE,GAAM,kBAAkB,KAAK,KAAK,SAAS,EACnDiE,EAAOjE,GAAM,kBAAkB,KAAK,KAAK,aAAa,EACtDkE,EAAQlE,GAAM,kBAAkB,KAAK,KAAK,cAAc,EAC5D,OAAA6C,EAAMA,EAAI,QAAQ,KAAMmB,CAAK,EAC1B,QAAQ,KAAMC,CAAI,EAClB,QAAQ,KAAMC,CAAK,EACf,IAAI,OAAOrB,CAAG,CACvB,EAEA,QAAS,UAAY,CAEnB,IAAIsB,EAEAC,EACA1B,EAAO,KAAK,KACZ2B,EAAY,GACZC,EAAW,GAEXC,EAAW7B,EAAK,eAEhB8B,EAEAC,EAAoB/B,EAAK,SAAW,KAAK,UAAUA,EAAK,QAAQ,EAAI,YAExE,GAAI,CAAC,KAAK,OAAQ,CAKhB,GAJA,KAAK,eAAe,EACpB2B,GACE;AAAA;AAAA,EAEE3B,EAAK,mBAAoB,CAC3B,GAAI,CAAC9B,GAAe,KAAK8B,EAAK,kBAAkB,EAC9C,MAAM,IAAI,MAAM,kDAAkD,EAEpE2B,GAAa,SAAW3B,EAAK,mBAAqB;AAAA,CACpD,CACA,GAAIA,EAAK,YAAc,CAAC9B,GAAe,KAAK8B,EAAK,UAAU,EACzD,MAAM,IAAI,MAAM,0CAA0C,EAE5D,GAAIA,EAAK,oBAAsBA,EAAK,mBAAmB,OAAQ,CAE7D,QADIgC,EAAgB,qBAAuBhC,EAAK,WAAa;AAAA,EACpDY,EAAI,EAAGA,EAAIZ,EAAK,mBAAmB,OAAQY,IAAK,CACvD,IAAIzC,EAAO6B,EAAK,mBAAmBY,CAAC,EACpC,GAAI,CAAC1C,GAAe,KAAKC,CAAI,EAC3B,MAAM,IAAI,MAAM,sBAAwByC,EAAI,iCAAiC,EAE3EA,EAAI,IACNoB,GAAiB;AAAA,KAEnBA,GAAiB7D,EAAO,eAAiBA,CAC3C,CACAwD,GAAaK,EAAgB;AAAA,CAC/B,CACIhC,EAAK,QAAU,KACjB2B,GAAc,WAAa3B,EAAK,WAAa;AAAA,EAC7C4B,GAAY;AAAA,GAEdA,GAAY;AAAA,EACZ,KAAK,OAASD,EAAY,KAAK,OAASC,CAC1C,CAEI5B,EAAK,aACPyB,EAAM;AAAA,gBACiB,KAAK,UAAU,KAAK,YAAY,EAAI;AAAA,mBACjCM,EAAoB;AAAA;AAAA,EAE1C,KAAK,OACL;AAAA;AAAA;AAAA,EAKJN,EAAM,KAAK,OAGTzB,EAAK,SACPyB,EAAM,0BAA4BI,EAAS,SAAS,EAAI;AAAA,EAAaJ,EACjEzB,EAAK,eACPyB,EAAM,wBAA0BvB,GAAQ,SAAS,EAAI;AAAA,EAAauB,IAIlEzB,EAAK,SACPyB,EAAM;AAAA,EAAoBA,GAExBzB,EAAK,OACP,QAAQ,IAAIyB,CAAG,EAEbzB,EAAK,cAAgBA,EAAK,WAC5ByB,EAAMA,EAAM;AAAA,gBACWM,EAAoB;AAAA,GAG7C,GAAI,CACF,GAAI/B,EAAK,MAGP,GAAI,CACF8B,EAAQ,IAAI,SAAS,0CAA0C,EAAG,CACpE,OACMG,EAAG,CACP,MAAIA,aAAa,YACT,IAAI,MAAM,+CAA+C,EAGzDA,CAEV,MAGAH,EAAO,SAETJ,EAAK,IAAII,EAAK9B,EAAK,WAAa,+BAAgCyB,CAAG,CACrE,OACMQ,EAAG,CAEP,MAAIA,aAAa,cACXjC,EAAK,WACPiC,EAAE,SAAW,OAASjC,EAAK,UAE7BiC,EAAE,SAAW;AAAA;AAAA,EACbA,EAAE,SAAW;AAAA,EACbA,EAAE,SAAW,sCACRjC,EAAK,QACRiC,EAAE,SAAW;AAAA,EACbA,EAAE,SAAW,mFAGXA,CACR,CAKA,IAAIC,EAAalC,EAAK,OAAS0B,EAAK3C,EAAA,SAAmBW,EAAM,CAC3D,IAAIyC,EAAUpD,EAAA,SAAU1B,EAAM+E,EAAa,CACzC,IAAInB,EAAI3D,GAAM,YAAYA,GAAM,gCAAgC,EAAGoC,CAAI,EACvE,OAAI0C,IACFnB,EAAI3D,GAAM,YAAY2D,EAAGmB,CAAW,GAE/BrC,GAAY1C,EAAM2C,CAAI,EAAEiB,CAAC,CAClC,EANc,WAOd,OAAOS,EAAG,MAAM1B,EAAK,QACnB,CAACN,GAAQpC,GAAM,gCAAgC,EAAGuE,EAAUM,EAASjC,EAAO,CAAC,CACjF,EAVoC,aAWpC,GAAIF,EAAK,UAAY,OAAO,OAAO,gBAAmB,WAAY,CAChE,IAAI5B,EAAW4B,EAAK,SAChBqC,EAAWhF,GAAK,SAASe,EAAUf,GAAK,QAAQe,CAAQ,CAAC,EAC7D,GAAI,CACF,OAAO,eAAe8D,EAAY,OAAQ,CACxC,MAAOG,EACP,SAAU,GACV,WAAY,GACZ,aAAc,EAChB,CAAC,CACH,MAAY,CAAa,CAC3B,CACA,OAAOH,CACT,EAEA,eAAgB,UAAY,CAC1B,IAAIlC,EAAO,KAAK,KAEZA,EAAK,eAGP,KAAK,aACH,KAAK,aAAa,QAAQ,WAAY;AAAA,CAAI,EAAE,QAAQ,cAAe,EAAE,GAIzE,KAAK,aACH,KAAK,aAAa,QAAQ,cAAe,KAAK,EAAE,QAAQ,cAAe,KAAK,EAE9E,IAAIsC,EAAO,KACPC,EAAU,KAAK,kBAAkB,EACjCtB,EAAI,KAAK,KAAK,UACdC,EAAI,KAAK,KAAK,cACdsB,EAAI,KAAK,KAAK,eAEdD,GAAWA,EAAQ,QACrBA,EAAQ,QAAQ,SAAU5B,EAAM8B,EAAO,CACrC,IAAIC,EAKJ,GAAK/B,EAAK,QAAQO,EAAID,CAAC,IAAM,GACxBN,EAAK,QAAQO,EAAID,EAAIA,CAAC,IAAM,IAC/ByB,EAAUH,EAAQE,EAAQ,CAAC,EACvB,EAAEC,GAAWzB,EAAIuB,GAAKE,GAAW,IAAMzB,EAAIuB,GAAKE,GAAW,IAAMzB,EAAIuB,IACvE,MAAM,IAAI,MAAM,0CAA4C7B,EAAO,IAAI,EAG3E2B,EAAK,SAAS3B,CAAI,CACpB,CAAC,CAGL,EAEA,kBAAmB,UAAY,CAO7B,QANIR,EAAM,KAAK,aACXwC,EAAM,KAAK,MACX/C,EAAS+C,EAAI,KAAKxC,CAAG,EACrByC,EAAM,CAAC,EACPC,EAEGjD,GACLiD,EAAWjD,EAAO,MAEdiD,IAAa,IACfD,EAAI,KAAKzC,EAAI,UAAU,EAAG0C,CAAQ,CAAC,EACnC1C,EAAMA,EAAI,MAAM0C,CAAQ,GAG1BD,EAAI,KAAKhD,EAAO,CAAC,CAAC,EAClBO,EAAMA,EAAI,MAAMP,EAAO,CAAC,EAAE,MAAM,EAChCA,EAAS+C,EAAI,KAAKxC,CAAG,EAGvB,OAAIA,GACFyC,EAAI,KAAKzC,CAAG,EAGPyC,CACT,EAEA,WAAY,SAAUjC,EAAM,CAU1B,GATI,KAAK,WAMPA,EAAOA,EAAK,QAAQ,kBAAmB,EAAE,EACzC,KAAK,SAAW,IAEd,CAACA,EACH,OAAOA,EAITA,EAAOA,EAAK,QAAQ,MAAO,MAAM,EAGjCA,EAAOA,EAAK,QAAQ,MAAO,KAAK,EAChCA,EAAOA,EAAK,QAAQ,MAAO,KAAK,EAIhCA,EAAOA,EAAK,QAAQ,KAAM,KAAK,EAC/B,KAAK,QAAU,mBAAqBA,EAAO;AAAA,CAC7C,EAEA,SAAU,SAAUA,EAAM,CACxB,IAAI2B,EAAO,KACPrB,EAAI,KAAK,KAAK,UACdC,EAAI,KAAK,KAAK,cACdsB,EAAI,KAAK,KAAK,eACdM,EAAe,EAInB,OAFAA,EAAgBnC,EAAK,MAAM;AAAA,CAAI,EAAE,OAAS,EAElCA,EAAM,CACd,KAAKO,EAAID,EACT,KAAKC,EAAID,EAAI,IACX,KAAK,KAAOD,GAAS,MAAM,KAC3B,MACF,KAAKE,EAAID,EAAI,IACX,KAAK,KAAOD,GAAS,MAAM,QAC3B,MACF,KAAKE,EAAID,EAAI,IACX,KAAK,KAAOD,GAAS,MAAM,IAC3B,MACF,KAAKE,EAAID,EAAI,IACX,KAAK,KAAOD,GAAS,MAAM,QAC3B,MACF,KAAKE,EAAID,EAAIA,EACX,KAAK,KAAOD,GAAS,MAAM,QAC3B,KAAK,QAAU,mBAAqBL,EAAK,QAAQO,EAAID,EAAIA,EAAGC,EAAID,CAAC,EAAI;AAAA,EACrE,MACF,KAAKA,EAAIA,EAAIuB,EACX,KAAK,KAAOxB,GAAS,MAAM,QAC3B,KAAK,QAAU,mBAAqBL,EAAK,QAAQM,EAAIA,EAAIuB,EAAGvB,EAAIuB,CAAC,EAAI;AAAA,EACrE,MACF,KAAKvB,EAAIuB,EACT,IAAK,IAAMvB,EAAIuB,EACf,IAAK,IAAMvB,EAAIuB,EACT,KAAK,MAAQxB,GAAS,MAAM,SAC9B,KAAK,WAAWL,CAAI,EAGtB,KAAK,KAAO,KACZ,KAAK,SAAWA,EAAK,QAAQ,GAAG,IAAM,GAAKA,EAAK,QAAQ,GAAG,IAAM,EACjE,MACF,QAEE,GAAI,KAAK,KAAM,CAEb,OAAQ,KAAK,KAAM,CACnB,KAAKK,GAAS,MAAM,KACpB,KAAKA,GAAS,MAAM,QACpB,KAAKA,GAAS,MAAM,IACdL,EAAK,YAAY,IAAI,EAAIA,EAAK,YAAY;AAAA,CAAI,IAChDA,GAAQ;AAAA,EAEZ,CACA,OAAQ,KAAK,KAAM,CAEnB,KAAKK,GAAS,MAAM,KAClB,KAAK,QAAU,SAAWL,EAAO;AAAA,EACjC,MAEF,KAAKK,GAAS,MAAM,QAClB,KAAK,QAAU,2BAA6BF,GAAUH,CAAI,EAAI;AAAA,EAC9D,MAEF,KAAKK,GAAS,MAAM,IAClB,KAAK,QAAU,kBAAoBF,GAAUH,CAAI,EAAI;AAAA,EACrD,MACF,KAAKK,GAAS,MAAM,QAElB,MAEF,KAAKA,GAAS,MAAM,QAClB,KAAK,WAAWL,CAAI,EACpB,KACF,CACF,MAGE,KAAK,WAAWA,CAAI,CAExB,CAEI2B,EAAK,KAAK,cAAgBQ,IAC5B,KAAK,aAAeA,EACpB,KAAK,QAAU,kBAAoB,KAAK,YAAc;AAAA,EAE1D,CACF,EAcA3F,GAAQ,UAAYG,GAAM,UAW1BH,GAAQ,UAAYA,GAAQ,WAU5BA,GAAQ,QAAUK,GAUlBL,GAAQ,KAAOU,GAGX,OAAO,OAAU,MACnB,OAAO,IAAMV,MCr7Bf,IAAA4F,GAAAC,GAAA,CAAAC,GAAAC,KAAA,CAUA,IAAIC,GAAkB,sBAGlBC,GAAiB,4BAGjBC,GAAW,IAGXC,GAAU,oBACVC,GAAS,6BACTC,GAAY,kBAGZC,GAAe,mDACfC,GAAgB,QAChBC,GAAe,MACfC,GAAa,mGAMbC,GAAe,sBAGfC,GAAe,WAGfC,GAAe,8BAGfC,GAAa,OAAO,QAAU,UAAY,QAAU,OAAO,SAAW,QAAU,OAGhFC,GAAW,OAAO,MAAQ,UAAY,MAAQ,KAAK,SAAW,QAAU,KAGxEC,GAAOF,IAAcC,IAAY,SAAS,aAAa,EAAE,EAU7D,SAASE,GAASC,EAAQC,EAAK,CAC7B,OAAOD,GAAU,KAAO,OAAYA,EAAOC,CAAG,CAChD,CAFSC,EAAAH,GAAA,YAWT,SAASI,GAAaC,EAAO,CAG3B,IAAIC,EAAS,GACb,GAAID,GAAS,MAAQ,OAAOA,EAAM,UAAY,WAC5C,GAAI,CACFC,EAAS,CAAC,EAAED,EAAQ,GACtB,MAAY,CAAC,CAEf,OAAOC,CACT,CAVSH,EAAAC,GAAA,gBAaT,IAAIG,GAAa,MAAM,UACnBC,GAAY,SAAS,UACrBC,GAAc,OAAO,UAGrBC,GAAaX,GAAK,oBAAoB,EAGtCY,GAAc,UAAW,CAC3B,IAAIC,EAAM,SAAS,KAAKF,IAAcA,GAAW,MAAQA,GAAW,KAAK,UAAY,EAAE,EACvF,OAAOE,EAAO,iBAAmBA,EAAO,EAC1C,EAAE,EAGEC,GAAeL,GAAU,SAGzBM,GAAiBL,GAAY,eAO7BM,GAAiBN,GAAY,SAG7BO,GAAa,OAAO,IACtBH,GAAa,KAAKC,EAAc,EAAE,QAAQpB,GAAc,MAAM,EAC7D,QAAQ,yDAA0D,OAAO,EAAI,GAChF,EAGIuB,GAASlB,GAAK,OACdmB,GAASX,GAAW,OAGpBY,GAAMC,GAAUrB,GAAM,KAAK,EAC3BsB,GAAeD,GAAU,OAAQ,QAAQ,EAGzCE,GAAcL,GAASA,GAAO,UAAY,OAC1CM,GAAiBD,GAAcA,GAAY,SAAW,OAS1D,SAASE,GAAKC,EAAS,CACrB,IAAIC,EAAQ,GACRC,EAASF,EAAUA,EAAQ,OAAS,EAGxC,IADA,KAAK,MAAM,EACJ,EAAEC,EAAQC,GAAQ,CACvB,IAAIC,EAAQH,EAAQC,CAAK,EACzB,KAAK,IAAIE,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,CAC7B,CACF,CATSzB,EAAAqB,GAAA,QAkBT,SAASK,IAAY,CACnB,KAAK,SAAWR,GAAeA,GAAa,IAAI,EAAI,CAAC,CACvD,CAFSlB,EAAA0B,GAAA,aAcT,SAASC,GAAW5B,EAAK,CACvB,OAAO,KAAK,IAAIA,CAAG,GAAK,OAAO,KAAK,SAASA,CAAG,CAClD,CAFSC,EAAA2B,GAAA,cAaT,SAASC,GAAQ7B,EAAK,CACpB,IAAI8B,EAAO,KAAK,SAChB,GAAIX,GAAc,CAChB,IAAIf,EAAS0B,EAAK9B,CAAG,EACrB,OAAOI,IAAWrB,GAAiB,OAAYqB,CACjD,CACA,OAAOQ,GAAe,KAAKkB,EAAM9B,CAAG,EAAI8B,EAAK9B,CAAG,EAAI,MACtD,CAPSC,EAAA4B,GAAA,WAkBT,SAASE,GAAQ/B,EAAK,CACpB,IAAI8B,EAAO,KAAK,SAChB,OAAOX,GAAeW,EAAK9B,CAAG,IAAM,OAAYY,GAAe,KAAKkB,EAAM9B,CAAG,CAC/E,CAHSC,EAAA8B,GAAA,WAeT,SAASC,GAAQhC,EAAKG,EAAO,CAC3B,IAAI2B,EAAO,KAAK,SAChB,OAAAA,EAAK9B,CAAG,EAAKmB,IAAgBhB,IAAU,OAAapB,GAAiBoB,EAC9D,IACT,CAJSF,EAAA+B,GAAA,WAOTV,GAAK,UAAU,MAAQK,GACvBL,GAAK,UAAU,OAAYM,GAC3BN,GAAK,UAAU,IAAMO,GACrBP,GAAK,UAAU,IAAMS,GACrBT,GAAK,UAAU,IAAMU,GASrB,SAASC,GAAUV,EAAS,CAC1B,IAAIC,EAAQ,GACRC,EAASF,EAAUA,EAAQ,OAAS,EAGxC,IADA,KAAK,MAAM,EACJ,EAAEC,EAAQC,GAAQ,CACvB,IAAIC,EAAQH,EAAQC,CAAK,EACzB,KAAK,IAAIE,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,CAC7B,CACF,CATSzB,EAAAgC,GAAA,aAkBT,SAASC,IAAiB,CACxB,KAAK,SAAW,CAAC,CACnB,CAFSjC,EAAAiC,GAAA,kBAaT,SAASC,GAAgBnC,EAAK,CAC5B,IAAI8B,EAAO,KAAK,SACZN,EAAQY,GAAaN,EAAM9B,CAAG,EAElC,GAAIwB,EAAQ,EACV,MAAO,GAET,IAAIa,EAAYP,EAAK,OAAS,EAC9B,OAAIN,GAASa,EACXP,EAAK,IAAI,EAETd,GAAO,KAAKc,EAAMN,EAAO,CAAC,EAErB,EACT,CAdSvB,EAAAkC,GAAA,mBAyBT,SAASG,GAAatC,EAAK,CACzB,IAAI8B,EAAO,KAAK,SACZN,EAAQY,GAAaN,EAAM9B,CAAG,EAElC,OAAOwB,EAAQ,EAAI,OAAYM,EAAKN,CAAK,EAAE,CAAC,CAC9C,CALSvB,EAAAqC,GAAA,gBAgBT,SAASC,GAAavC,EAAK,CACzB,OAAOoC,GAAa,KAAK,SAAUpC,CAAG,EAAI,EAC5C,CAFSC,EAAAsC,GAAA,gBAcT,SAASC,GAAaxC,EAAKG,EAAO,CAChC,IAAI2B,EAAO,KAAK,SACZN,EAAQY,GAAaN,EAAM9B,CAAG,EAElC,OAAIwB,EAAQ,EACVM,EAAK,KAAK,CAAC9B,EAAKG,CAAK,CAAC,EAEtB2B,EAAKN,CAAK,EAAE,CAAC,EAAIrB,EAEZ,IACT,CAVSF,EAAAuC,GAAA,gBAaTP,GAAU,UAAU,MAAQC,GAC5BD,GAAU,UAAU,OAAYE,GAChCF,GAAU,UAAU,IAAMK,GAC1BL,GAAU,UAAU,IAAMM,GAC1BN,GAAU,UAAU,IAAMO,GAS1B,SAASC,GAASlB,EAAS,CACzB,IAAIC,EAAQ,GACRC,EAASF,EAAUA,EAAQ,OAAS,EAGxC,IADA,KAAK,MAAM,EACJ,EAAEC,EAAQC,GAAQ,CACvB,IAAIC,EAAQH,EAAQC,CAAK,EACzB,KAAK,IAAIE,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,CAC7B,CACF,CATSzB,EAAAwC,GAAA,YAkBT,SAASC,IAAgB,CACvB,KAAK,SAAW,CACd,KAAQ,IAAIpB,GACZ,IAAO,IAAKL,IAAOgB,IACnB,OAAU,IAAIX,EAChB,CACF,CANSrB,EAAAyC,GAAA,iBAiBT,SAASC,GAAe3C,EAAK,CAC3B,OAAO4C,GAAW,KAAM5C,CAAG,EAAE,OAAUA,CAAG,CAC5C,CAFSC,EAAA0C,GAAA,kBAaT,SAASE,GAAY7C,EAAK,CACxB,OAAO4C,GAAW,KAAM5C,CAAG,EAAE,IAAIA,CAAG,CACtC,CAFSC,EAAA4C,GAAA,eAaT,SAASC,GAAY9C,EAAK,CACxB,OAAO4C,GAAW,KAAM5C,CAAG,EAAE,IAAIA,CAAG,CACtC,CAFSC,EAAA6C,GAAA,eAcT,SAASC,GAAY/C,EAAKG,EAAO,CAC/B,OAAAyC,GAAW,KAAM5C,CAAG,EAAE,IAAIA,EAAKG,CAAK,EAC7B,IACT,CAHSF,EAAA8C,GAAA,eAMTN,GAAS,UAAU,MAAQC,GAC3BD,GAAS,UAAU,OAAYE,GAC/BF,GAAS,UAAU,IAAMI,GACzBJ,GAAS,UAAU,IAAMK,GACzBL,GAAS,UAAU,IAAMM,GAUzB,SAASX,GAAaY,EAAOhD,EAAK,CAEhC,QADIyB,EAASuB,EAAM,OACZvB,KACL,GAAIwB,GAAGD,EAAMvB,CAAM,EAAE,CAAC,EAAGzB,CAAG,EAC1B,OAAOyB,EAGX,MAAO,EACT,CARSxB,EAAAmC,GAAA,gBAkBT,SAASc,GAAQnD,EAAQoD,EAAM,CAC7BA,EAAOC,GAAMD,EAAMpD,CAAM,EAAI,CAACoD,CAAI,EAAIE,GAASF,CAAI,EAKnD,QAHI3B,EAAQ,EACRC,EAAS0B,EAAK,OAEXpD,GAAU,MAAQyB,EAAQC,GAC/B1B,EAASA,EAAOuD,GAAMH,EAAK3B,GAAO,CAAC,CAAC,EAEtC,OAAQA,GAASA,GAASC,EAAU1B,EAAS,MAC/C,CAVSE,EAAAiD,GAAA,WAoBT,SAASK,GAAapD,EAAO,CAC3B,GAAI,CAACqD,GAASrD,CAAK,GAAKsD,GAAStD,CAAK,EACpC,MAAO,GAET,IAAIuD,EAAWC,GAAWxD,CAAK,GAAKD,GAAaC,CAAK,EAAKW,GAAapB,GACxE,OAAOgE,EAAQ,KAAKE,GAASzD,CAAK,CAAC,CACrC,CANSF,EAAAsD,GAAA,gBAiBT,SAASM,GAAUb,EAAOc,EAAOC,EAAK,CACpC,IAAIvC,EAAQ,GACRC,EAASuB,EAAM,OAEfc,EAAQ,IACVA,EAAQ,CAACA,EAAQrC,EAAS,EAAKA,EAASqC,GAE1CC,EAAMA,EAAMtC,EAASA,EAASsC,EAC1BA,EAAM,IACRA,GAAOtC,GAETA,EAASqC,EAAQC,EAAM,EAAMA,EAAMD,IAAW,EAC9CA,KAAW,EAGX,QADI1D,EAAS,MAAMqB,CAAM,EAClB,EAAED,EAAQC,GACfrB,EAAOoB,CAAK,EAAIwB,EAAMxB,EAAQsC,CAAK,EAErC,OAAO1D,CACT,CAnBSH,EAAA4D,GAAA,aA6BT,SAASG,GAAa7D,EAAO,CAE3B,GAAI,OAAOA,GAAS,SAClB,OAAOA,EAET,GAAI8D,GAAS9D,CAAK,EAChB,OAAOkB,GAAiBA,GAAe,KAAKlB,CAAK,EAAI,GAEvD,IAAIC,EAAUD,EAAQ,GACtB,OAAQC,GAAU,KAAQ,EAAID,GAAU,CAACnB,GAAY,KAAOoB,CAC9D,CAVSH,EAAA+D,GAAA,gBAoBT,SAASE,GAAUnE,EAAQoD,EAAM,CAC/BA,EAAOC,GAAMD,EAAMpD,CAAM,EAAI,CAACoD,CAAI,EAAIE,GAASF,CAAI,EACnDpD,EAASoE,GAAOpE,EAAQoD,CAAI,EAE5B,IAAInD,EAAMsD,GAAMc,GAAKjB,CAAI,CAAC,EAC1B,MAAO,EAAEpD,GAAU,MAAQa,GAAe,KAAKb,EAAQC,CAAG,IAAM,OAAOD,EAAOC,CAAG,CACnF,CANSC,EAAAiE,GAAA,aAeT,SAASb,GAASlD,EAAO,CACvB,OAAOkE,GAAQlE,CAAK,EAAIA,EAAQmE,GAAanE,CAAK,CACpD,CAFSF,EAAAoD,GAAA,YAYT,SAAST,GAAW2B,EAAKvE,EAAK,CAC5B,IAAI8B,EAAOyC,EAAI,SACf,OAAOC,GAAUxE,CAAG,EAChB8B,EAAK,OAAO9B,GAAO,SAAW,SAAW,MAAM,EAC/C8B,EAAK,GACX,CALS7B,EAAA2C,GAAA,cAeT,SAAS1B,GAAUnB,EAAQC,EAAK,CAC9B,IAAIG,EAAQL,GAASC,EAAQC,CAAG,EAChC,OAAOuD,GAAapD,CAAK,EAAIA,EAAQ,MACvC,CAHSF,EAAAiB,GAAA,aAaT,SAASkC,GAAMjD,EAAOJ,EAAQ,CAC5B,GAAIsE,GAAQlE,CAAK,EACf,MAAO,GAET,IAAIsE,EAAO,OAAOtE,EAClB,OAAIsE,GAAQ,UAAYA,GAAQ,UAAYA,GAAQ,WAChDtE,GAAS,MAAQ8D,GAAS9D,CAAK,EAC1B,GAEFd,GAAc,KAAKc,CAAK,GAAK,CAACf,GAAa,KAAKe,CAAK,GACzDJ,GAAU,MAAQI,KAAS,OAAOJ,CAAM,CAC7C,CAXSE,EAAAmD,GAAA,SAoBT,SAASoB,GAAUrE,EAAO,CACxB,IAAIsE,EAAO,OAAOtE,EAClB,OAAQsE,GAAQ,UAAYA,GAAQ,UAAYA,GAAQ,UAAYA,GAAQ,UACvEtE,IAAU,YACVA,IAAU,IACjB,CALSF,EAAAuE,GAAA,aAcT,SAASf,GAASiB,EAAM,CACtB,MAAO,CAAC,CAACjE,IAAeA,MAAciE,CACxC,CAFSzE,EAAAwD,GAAA,YAYT,SAASU,GAAOpE,EAAQoD,EAAM,CAC5B,OAAOA,EAAK,QAAU,EAAIpD,EAASmD,GAAQnD,EAAQ8D,GAAUV,EAAM,EAAG,EAAE,CAAC,CAC3E,CAFSlD,EAAAkE,GAAA,UAWT,IAAIG,GAAeK,GAAQ,SAASC,EAAQ,CAC1CA,EAASC,GAASD,CAAM,EAExB,IAAIxE,EAAS,CAAC,EACd,OAAId,GAAa,KAAKsF,CAAM,GAC1BxE,EAAO,KAAK,EAAE,EAEhBwE,EAAO,QAAQrF,GAAY,SAASuF,EAAOC,EAAQC,EAAOJ,EAAQ,CAChExE,EAAO,KAAK4E,EAAQJ,EAAO,QAAQnF,GAAc,IAAI,EAAKsF,GAAUD,CAAM,CAC5E,CAAC,EACM1E,CACT,CAAC,EASD,SAASkD,GAAMnD,EAAO,CACpB,GAAI,OAAOA,GAAS,UAAY8D,GAAS9D,CAAK,EAC5C,OAAOA,EAET,IAAIC,EAAUD,EAAQ,GACtB,OAAQC,GAAU,KAAQ,EAAID,GAAU,CAACnB,GAAY,KAAOoB,CAC9D,CANSH,EAAAqD,GAAA,SAeT,SAASM,GAASc,EAAM,CACtB,GAAIA,GAAQ,KAAM,CAChB,GAAI,CACF,OAAO/D,GAAa,KAAK+D,CAAI,CAC/B,MAAY,CAAC,CACb,GAAI,CACF,OAAQA,EAAO,EACjB,MAAY,CAAC,CACf,CACA,MAAO,EACT,CAVSzE,EAAA2D,GAAA,YA0BT,SAASQ,GAAKpB,EAAO,CACnB,IAAIvB,EAASuB,EAAQA,EAAM,OAAS,EACpC,OAAOvB,EAASuB,EAAMvB,EAAS,CAAC,EAAI,MACtC,CAHSxB,EAAAmE,GAAA,QAiDT,SAASO,GAAQD,EAAMO,EAAU,CAC/B,GAAI,OAAOP,GAAQ,YAAeO,GAAY,OAAOA,GAAY,WAC/D,MAAM,IAAI,UAAUnG,EAAe,EAErC,IAAIoG,EAAWjF,EAAA,UAAW,CACxB,IAAIkF,EAAO,UACPnF,EAAMiF,EAAWA,EAAS,MAAM,KAAME,CAAI,EAAIA,EAAK,CAAC,EACpDC,EAAQF,EAAS,MAErB,GAAIE,EAAM,IAAIpF,CAAG,EACf,OAAOoF,EAAM,IAAIpF,CAAG,EAEtB,IAAII,EAASsE,EAAK,MAAM,KAAMS,CAAI,EAClC,OAAAD,EAAS,MAAQE,EAAM,IAAIpF,EAAKI,CAAM,EAC/BA,CACT,EAXe,YAYf,OAAA8E,EAAS,MAAQ,IAAKP,GAAQ,OAASlC,IAChCyC,CACT,CAlBSjF,EAAA0E,GAAA,WAqBTA,GAAQ,MAAQlC,GAkChB,SAASQ,GAAG9C,EAAOkF,EAAO,CACxB,OAAOlF,IAAUkF,GAAUlF,IAAUA,GAASkF,IAAUA,CAC1D,CAFSpF,EAAAgD,GAAA,MA2BT,IAAIoB,GAAU,MAAM,QAmBpB,SAASV,GAAWxD,EAAO,CAGzB,IAAImF,EAAM9B,GAASrD,CAAK,EAAIU,GAAe,KAAKV,CAAK,EAAI,GACzD,OAAOmF,GAAOrG,IAAWqG,GAAOpG,EAClC,CALSe,EAAA0D,GAAA,cAgCT,SAASH,GAASrD,EAAO,CACvB,IAAIsE,EAAO,OAAOtE,EAClB,MAAO,CAAC,CAACA,IAAUsE,GAAQ,UAAYA,GAAQ,WACjD,CAHSxE,EAAAuD,GAAA,YA6BT,SAAS+B,GAAapF,EAAO,CAC3B,MAAO,CAAC,CAACA,GAAS,OAAOA,GAAS,QACpC,CAFSF,EAAAsF,GAAA,gBAqBT,SAAStB,GAAS9D,EAAO,CACvB,OAAO,OAAOA,GAAS,UACpBoF,GAAapF,CAAK,GAAKU,GAAe,KAAKV,CAAK,GAAKhB,EAC1D,CAHSc,EAAAgE,GAAA,YA0BT,SAASY,GAAS1E,EAAO,CACvB,OAAOA,GAAS,KAAO,GAAK6D,GAAa7D,CAAK,CAChD,CAFSF,EAAA4E,GAAA,YA+BT,SAASW,GAAMzF,EAAQoD,EAAM,CAC3B,OAAOpD,GAAU,KAAO,GAAOmE,GAAUnE,EAAQoD,CAAI,CACvD,CAFSlD,EAAAuF,GAAA,SAIT3G,GAAO,QAAU2G,8Lah/BjB,SAAAC,GAAA,4BAAyBC,EAAzB,MAAAC,CAAA,EAAAC,EAAA,EAAAA,EAAAD,EAAAC,MAAAA,CAAA,EAAA,UAAAA,CAAA,KACKF,EAAKG,OAAS,EAAG,GACf,CAAL,EAAUH,EAAK,CAAL,EAAQI,MAAM,EAAG,EAAjB,UACJC,EAAKL,EAAKG,OAAS,EAChBG,EAAI,EAAGA,EAAID,EAAI,EAAEC,IACpBA,CAAL,EAAUN,EAAKM,CAAL,EAAQF,MAAM,EAAG,EAAjB,WAENC,CAAL,EAAWL,EAAKK,CAAL,EAASD,MAAM,CAAf,EACJJ,EAAKO,KAAK,EAAV,cAEAP,EAAK,CAAL,EAVTD,EAAAA,EAAAA,SAcA,SAAAS,EAAuBC,EAAvB,OACQ,MAAQA,EAAM,IADtBD,EAAAA,EAAAA,UAIA,SAAAE,EAAuBC,EAAvB,QACQA,IAAMC,OAAY,YAAeD,IAAM,KAAO,OAASE,OAAOC,UAAUC,SAASC,KAAKL,CAA/B,EAAkCM,MAAM,GAAxC,EAA6CC,IAA7C,EAAmDD,MAAM,GAAzD,EAA8DE,MAA9D,EAAsEC,YAAtE,EAD/DV,EAAAA,EAAAA,UAIA,SAAAW,EAA4BZ,EAA5B,QACQA,EAAIY,YAAJ,EADRA,EAAAA,EAAAA,eAIA,SAAAC,EAAwBC,EAAxB,QAC6BA,GAAQ,KAAQA,aAAeC,MAAQD,EAAO,OAAOA,EAAIpB,QAAW,UAAYoB,EAAIN,OAASM,EAAIE,aAAeF,EAAIP,KAAO,CAACO,CAAD,EAAQC,MAAMV,UAAUV,MAAMY,KAAKO,CAA3B,EAAoC,CAAA,EADpMD,EAAAA,EAAAA,WAKA,SAAAI,EAAuBC,EAAgBC,EAAvC,KACOL,EAAMI,KACRC,UACQC,KAAOD,IACbC,CAAJ,EAAWD,EAAOC,CAAP,SAGNN,EAPRG,EAAAA,EAAAA,UD5BA,SAAAI,EAA0BC,EAA1B,KAEEC,EAAU,WACVC,EAAM,UACNC,EAAU,QACVC,EAAW,UACXC,GAAWrC,EAAMmC,EAAS,UAAf,KACJ,UACPG,GAAO,UACPC,GAAe9B,EAAOA,EAAO,UAAY4B,GAAW,IAAMA,GAAWA,GAAW,IAAMA,GAAWA,EAA3E,EAAuF,IAAM5B,EAAO,cAAgB4B,GAAW,IAAMA,GAAWA,EAAnD,EAA+D,IAAM5B,EAAO,IAAM4B,GAAWA,EAAxB,CAAzK,KACA,0BACfG,GAAe,sCACfC,GAAazC,EAAM0C,GAAcF,EAApB,EACbG,GAAYX,EAAQ,8EAAgF,QACvFA,EAAQ,oBAAsB,QAC5BhC,EAAMiC,EAASE,EAAS,iBAAkBQ,EAA1C,EACfC,GAAUnC,EAAOwB,EAAUjC,EAAMiC,EAASE,EAAS,aAAxB,EAAyC,GAA1D,EACVU,GAAYpC,EAAOA,EAAO8B,GAAe,IAAMvC,EAAM8C,GAAcN,GAAc,OAAlC,CAA5B,EAA0E,GAAjF,EACZO,GAAatC,EAAOA,EAAO,SAAP,EAAoB,IAAMA,EAAO,SAAW0B,CAAlB,EAA6B,IAAM1B,EAAO,IAAM0B,EAAUA,CAAvB,EAAkC,IAAM1B,EAAO,QAAU0B,CAAjB,EAA4B,IAAMA,CAA9I,EACba,GAAqBvC,EAAOA,EAAO,SAAP,EAAoB,IAAMA,EAAO,SAAW0B,CAAlB,EAA6B,IAAM1B,EAAO,IAAM0B,EAAUA,CAAvB,EAAkC,IAAM1B,EAAO,UAAY0B,CAAnB,EAA8B,QAAUA,CAApJ,KACN1B,EAAOuC,GAAqB,MAAQA,GAAqB,MAAQA,GAAqB,MAAQA,EAA9F,EACfC,GAAOxC,EAAO4B,GAAW,OAAlB,EACPa,GAAQzC,EAAOA,EAAOwC,GAAO,MAAQA,EAAtB,EAA8B,IAAME,EAA3C,EACRC,GAAgB3C,EAAmEA,EAAOwC,GAAO,KAAd,EAAuB,MAAQC,EAAlG,KACAzC,EAAwD,SAAWA,EAAOwC,GAAO,KAAd,EAAuB,MAAQC,EAAlG,KACAzC,EAAOA,EAAwCwC,EAAxC,EAAgD,UAAYxC,EAAOwC,GAAO,KAAd,EAAuB,MAAQC,EAAlG,KACAzC,EAAOA,EAAOA,EAAOwC,GAAO,KAAd,EAAuB,QAAUA,EAAxC,EAAgD,UAAYxC,EAAOwC,GAAO,KAAd,EAAuB,MAAQC,EAAlG,KACAzC,EAAOA,EAAOA,EAAOwC,GAAO,KAAd,EAAuB,QAAUA,EAAxC,EAAgD,UAAYxC,EAAOwC,GAAO,KAAd,EAAuB,MAAQC,EAAlG,KACAzC,EAAOA,EAAOA,EAAOwC,GAAO,KAAd,EAAuB,QAAUA,EAAxC,EAAgD,UAAmBA,GAAO,MAAiBC,EAAlG,KACAzC,EAAOA,EAAOA,EAAOwC,GAAO,KAAd,EAAuB,QAAUA,EAAxC,EAAgD,UAA2CC,EAAlG,KACAzC,EAAOA,EAAOA,EAAOwC,GAAO,KAAd,EAAuB,QAAUA,EAAxC,EAAgD,UAA2CA,EAAlG,KACAxC,EAAOA,EAAOA,EAAOwC,GAAO,KAAd,EAAuB,QAAUA,EAAxC,EAAgD,SAAvD,KACDxC,EAAO,CAAC2C,GAAeC,GAAeC,GAAeC,GAAeC,GAAeC,GAAeC,GAAeC,GAAeC,EAAzH,EAAwIpD,KAAK,GAA7I,CAAP,EACfqD,GAAUpD,EAAOA,EAAOqC,GAAe,IAAMP,EAA5B,EAA4C,GAAnD,KACG9B,EAAOqD,GAAe,QAAUD,EAAhC,KACQpD,EAAOqD,GAAerD,EAAO,eAAiB4B,GAAW,MAAnC,EAA6CwB,EAAnE,KACRpD,EAAO,OAAS4B,GAAW,OAASrC,EAAM8C,GAAcN,GAAc,OAAlC,EAA6C,GAAjF,EACbuB,GAActD,EAAO,MAAQA,EAAOuD,GAAqB,IAAMF,GAAe,IAAMG,EAAvD,EAAqE,KAApF,KACFxD,EAAOA,EAAO8B,GAAe,IAAMvC,EAAM8C,GAAcN,EAApB,CAA5B,EAAiE,GAAxE,EACZ0B,GAAQzD,EAAOsD,GAAc,IAAMZ,GAAe,MAAQgB,GAAY,KAAYA,EAA1E,EACRC,GAAQ3D,EAAO0B,EAAU,GAAjB,EACRkC,GAAa5D,EAAOA,EAAOoC,GAAY,GAAnB,EAA0B,IAAMqB,GAAQzD,EAAO,MAAQ2D,EAAf,EAAwB,GAAvE,EACbE,GAAS7D,EAAO8B,GAAe,IAAMvC,EAAM8C,GAAcN,GAAc,UAAlC,CAA5B,EACT+B,GAAW9D,EAAO6D,GAAS,GAAhB,EACXE,GAAc/D,EAAO6D,GAAS,GAAhB,EACdG,GAAiBhE,EAAOA,EAAO8B,GAAe,IAAMvC,EAAM8C,GAAcN,GAAc,OAAlC,CAA5B,EAA0E,GAAjF,EACjBkC,GAAgBjE,EAAOA,EAAO,MAAQ8D,EAAf,EAA2B,GAAlC,EAChBI,GAAiBlE,EAAO,MAAQA,EAAO+D,GAAcE,EAArB,EAAsC,GAArD,KACAjE,EAAOgE,GAAiBC,EAAxB,KACAjE,EAAO+D,GAAcE,EAArB,KACH,MAAQJ,GAAS,IAC/BM,GAAQnE,EAAOiE,GAAgB,IAAMC,GAAiB,IAAME,GAAiB,IAAMC,GAAiB,IAAMC,EAAlG,EACRC,GAASvE,EAAOA,EAAO6D,GAAS,IAAMtE,EAAM,WAAYiF,EAAlB,CAAtB,EAAuD,GAA9D,EACTC,GAAYzE,EAAOA,EAAO6D,GAAS,WAAhB,EAA+B,GAAtC,EACZa,GAAa1E,EAAOA,EAAO,SAAW4D,GAAaK,EAA/B,EAAgD,IAAMC,GAAiB,IAAMG,GAAiB,IAAMC,EAA3G,EACbK,GAAO3E,EAAOmC,GAAU,MAAQuC,GAAa1E,EAAO,MAAQuE,EAAf,EAAyB,IAAMvE,EAAO,MAAQyE,EAAf,EAA4B,GAAjG,EACPG,GAAiB5E,EAAOA,EAAO,SAAW4D,GAAaK,EAA/B,EAAgD,IAAMC,GAAiB,IAAME,GAAiB,IAAME,EAA3G,EACjBO,GAAY7E,EAAO4E,GAAiB5E,EAAO,MAAQuE,EAAf,EAAyB,IAAMvE,EAAO,MAAQyE,EAAf,EAA4B,GAAnF,EACZK,GAAiB9E,EAAO2E,GAAO,IAAME,EAApB,EACjBE,GAAgB/E,EAAOmC,GAAU,MAAQuC,GAAa1E,EAAO,MAAQuE,EAAf,EAAyB,GAA/D,EAEhBS,GAAe,KAAO7C,GAAU,OAASnC,EAAOA,EAAO,UAAYA,EAAO,IAAMoC,GAAY,IAAzB,EAAiC,KAAOqB,GAAQ,IAAMzD,EAAO,OAAS2D,GAAQ,GAAxB,EAA+B,IAAxG,EAAgH,KAAOM,GAAgB,IAAMC,GAAiB,IAAMG,GAAiB,IAAMC,GAAc,GAAhN,EAAuNtE,EAAO,OAASuE,GAAS,GAAzB,EAAgC,IAAMvE,EAAO,OAASyE,GAAY,GAA5B,EAAmC,KACzUQ,GAAgB,SAAWjF,EAAOA,EAAO,UAAYA,EAAO,IAAMoC,GAAY,IAAzB,EAAiC,KAAOqB,GAAQ,IAAMzD,EAAO,OAAS2D,GAAQ,GAAxB,EAA+B,IAAxG,EAAgH,KAAOM,GAAgB,IAAMC,GAAiB,IAAME,GAAiB,IAAME,GAAc,GAAhN,EAAuNtE,EAAO,OAASuE,GAAS,GAAzB,EAAgC,IAAMvE,EAAO,OAASyE,GAAY,GAA5B,EAAmC,KAC3TS,GAAgB,KAAO/C,GAAU,OAASnC,EAAOA,EAAO,UAAYA,EAAO,IAAMoC,GAAY,IAAzB,EAAiC,KAAOqB,GAAQ,IAAMzD,EAAO,OAAS2D,GAAQ,GAAxB,EAA+B,IAAxG,EAAgH,KAAOM,GAAgB,IAAMC,GAAiB,IAAMG,GAAiB,IAAMC,GAAc,GAAhN,EAAuNtE,EAAO,OAASuE,GAAS,GAAzB,EAAgC,KACjSY,GAAe,IAAMnF,EAAO,OAASyE,GAAY,GAA5B,EAAmC,KACxDW,GAAiB,IAAMpF,EAAO,IAAMoC,GAAY,IAAzB,EAAiC,KAAOqB,GAAQ,IAAMzD,EAAO,OAAS2D,GAAQ,GAAxB,EAA+B,WAGtG,YACO,IAAI0B,OAAO9F,EAAM,MAAOiC,EAASE,EAAS,aAA/B,EAA+C,GAA1D,eACE,IAAI2D,OAAO9F,EAAM,YAAa8C,GAAcN,EAAjC,EAAgD,GAA3D,WACJ,IAAIsD,OAAO9F,EAAM,kBAAmB8C,GAAcN,EAAvC,EAAsD,GAAjE,WACA,IAAIsD,OAAO9F,EAAM,kBAAmB8C,GAAcN,EAAvC,EAAsD,GAAjE,oBACS,IAAIsD,OAAO9F,EAAM,eAAgB8C,GAAcN,EAApC,EAAmD,GAA9D,YACR,IAAIsD,OAAO9F,EAAM,SAAU8C,GAAcN,GAAc,iBAAkByC,EAA9D,EAA2E,GAAtF,eACG,IAAIa,OAAO9F,EAAM,SAAU8C,GAAcN,GAAc,gBAA5C,EAA+D,GAA1E,SACN,IAAIsD,OAAO9F,EAAM,MAAO8C,GAAcN,EAA3B,EAA0C,GAArD,aACI,IAAIsD,OAAOhD,GAAc,GAAzB,cACC,IAAIgD,OAAO9F,EAAM,SAAU8C,GAAcL,EAA9B,EAA2C,GAAtD,cACA,IAAIqD,OAAOvD,GAAc,GAAzB,cACA,IAAIuD,OAAO,KAAO3C,GAAe,IAAjC,cACA,IAAI2C,OAAO,SAAWhC,GAAe,IAAMrD,EAAOA,EAAO,eAAiB4B,GAAW,MAAnC,EAA6C,IAAMwB,GAAU,GAApE,EAA2E,QAAtH,GAjFhB9B,EAAAA,EAAAA,aAqFA,IAAAgE,EAAehE,EAAU,EAAV,EDrFfiE,EAAejE,EAAU,EAAV,mmBDATkE,EAAS,WAGTC,EAAO,GACPC,EAAO,EACPC,EAAO,GACPC,EAAO,GACPC,EAAO,IACPC,EAAc,GACdC,EAAW,IACXC,EAAY,IAGZC,EAAgB,QAChBC,EAAgB,aAChBC,GAAkB,4BAGlBC,EAAS,UACF,8DACC,iEACI,iBAIZC,EAAgBZ,EAAOC,EACvBY,GAAQC,KAAKD,MACbE,EAAqBC,OAAOC,aAUlC,SAASC,EAAMC,EAAM,OACd,IAAIC,WAAWT,EAAOQ,CAAP,CAAf,EADED,EAAAA,EAAAA,WAYT,SAASG,EAAIC,EAAOC,EAAI,SACjBC,EAAS,CAAA,EACXtH,EAASoH,EAAMpH,OACZA,OACCA,CAAP,EAAiBqH,EAAGD,EAAMpH,CAAN,CAAH,SAEXsH,EANCH,EAAAA,EAAAA,OAmBT,SAASI,EAAUC,EAAQH,EAAI,KACxBI,EAAQD,EAAO1G,MAAM,GAAb,EACVwG,EAAS,GACTG,EAAMzH,OAAS,MAGTyH,EAAM,CAAN,EAAW,MACXA,EAAM,CAAN,KAGDD,EAAOE,QAAQlB,GAAiB,GAAhC,MACHmB,EAASH,EAAO1G,MAAM,GAAb,EACT8G,GAAUT,EAAIQ,EAAQN,CAAZ,EAAgBjH,KAAK,GAArB,SACTkH,EAASM,GAbRL,EAAAA,EAAAA,aA6BT,SAASM,GAAWL,EAAQ,SACrBM,EAAS,CAAA,EACXC,EAAU,EACR/H,EAASwH,EAAOxH,OACf+H,EAAU/H,GAAQ,KAClBgI,EAAQR,EAAOS,WAAWF,GAAlB,KACVC,GAAS,OAAUA,GAAS,OAAUD,EAAU/H,EAAQ,KAErDkI,GAAQV,EAAOS,WAAWF,GAAlB,GACTG,GAAQ,QAAW,QAChBC,OAAOH,EAAQ,OAAU,KAAOE,GAAQ,MAAS,KAAxD,KAIOC,KAAKH,CAAZ,cAIMG,KAAKH,CAAZ,SAGKF,EArBCD,EAAAA,GAAAA,cAgCT,IAAMO,GAAaC,EAAA,SAAAjB,EAAA,QAASN,OAAOwB,cAAP,MAAA,OAAAC,EAAwBnB,CAAxB,CAAA,GAAT,cAWboB,GAAeH,EAAA,SAASI,EAAW,QACpCA,EAAY,GAAO,GACfA,EAAY,GAEhBA,EAAY,GAAO,GACfA,EAAY,GAEhBA,EAAY,GAAO,GACfA,EAAY,GAEb3C,GAVa,gBAwBf4C,GAAeL,EAAA,SAASM,EAAOC,EAAM,QAGnCD,EAAQ,GAAK,IAAMA,EAAQ,MAAQC,GAAQ,IAAM,IAHpC,gBAWfC,GAAQR,EAAA,SAASS,EAAOC,EAAWC,EAAW,KAC/CC,EAAI,QACAD,EAAYrC,GAAMmC,EAAQ5C,CAAd,EAAsB4C,GAAS,KAC1CnC,GAAMmC,EAAQC,CAAd,EACqBD,EAAQpC,EAAgBV,GAAQ,EAAGiD,GAAKnD,IAC7Da,GAAMmC,EAAQpC,CAAd,SAEFC,GAAMsC,GAAKvC,EAAgB,GAAKoC,GAASA,EAAQ7C,EAAjD,GAPM,SAiBRiD,GAASb,EAAA,SAASc,EAAO,KAExBrB,EAAS,CAAA,EACTsB,EAAcD,EAAMnJ,OACtBqJ,EAAI,EACJC,GAAIlD,EACJmD,GAAOpD,EAMPqD,GAAQL,EAAMM,YAAYpD,CAAlB,EACRmD,GAAQ,OACH,WAGAE,GAAI,EAAGA,GAAIF,GAAO,EAAEE,GAExBP,EAAMlB,WAAWyB,EAAjB,GAAuB,OACpB,WAAN,IAEMvB,KAAKgB,EAAMlB,WAAWyB,EAAjB,CAAZ,UAMQC,GAAQH,GAAQ,EAAIA,GAAQ,EAAI,EAAGG,GAAQP,GAAwC,SAOvFQ,GAAOP,EACFQ,GAAI,EAAGZ,GAAInD,GAA0BmD,IAAKnD,EAAM,CAEpD6D,IAASP,KACN,eAAN,MAGKT,GAAQH,GAAaW,EAAMlB,WAAW0B,IAAjB,CAAb,GAEVhB,IAAS7C,GAAQ6C,GAAQhC,IAAOd,EAASwD,GAAKQ,EAArB,MACtB,UAAN,KAGIlB,GAAQkB,OACPC,GAAIb,IAAKM,GAAOxD,EAAQkD,IAAKM,GAAOvD,EAAOA,EAAOiD,GAAIM,MAExDZ,GAAQmB,aAINC,GAAajE,EAAOgE,GACtBD,GAAIlD,GAAMd,EAASkE,EAAf,KACD,UAAN,MAGIA,OAIAC,GAAMlC,EAAO9H,OAAS,KACrB6I,GAAMQ,EAAIO,GAAMI,GAAKJ,IAAQ,CAA7B,EAIHjD,GAAM0C,EAAIW,EAAV,EAAiBnE,EAASyD,MACvB,UAAN,MAGI3C,GAAM0C,EAAIW,EAAV,KACAA,KAGEC,OAAOZ,IAAK,EAAGC,EAAtB,SAIMxC,OAAOwB,cAAP,MAAA,OAAwBR,CAAxB,GAjFO,UA2FToC,GAAS7B,EAAA,SAASc,EAAO,KACxBrB,EAAS,CAAA,IAGPD,GAAWsB,CAAX,MAGJC,EAAcD,EAAMnJ,OAGpBsJ,EAAIlD,EACJ0C,GAAQ,EACRS,GAAOpD,uCAGgBgD,EAA3B,OAAA,QAAA,EAAA,EAAAgB,GAAA,EAAAC,IAAAD,GAAAE,GAAA,KAAA,GAAA,MAAAD,GAAA,GAAkC,KAAvBE,GAAuBH,GAAA,MAC7BG,GAAe,OACXnC,KAAKtB,EAAmByD,EAAnB,CAAZ,6FAIEC,GAAczC,EAAO9H,OACrBwK,GAAiBD,OAMjBA,MACIpC,KAAK9B,CAAZ,EAIMmE,GAAiBpB,GAAa,KAIhCqB,GAAI5E,uCACmBsD,EAA3B,OAAA,QAAA,EAAA,EAAAuB,GAAA,EAAAC,IAAAD,GAAAE,GAAA,KAAA,GAAA,MAAAD,GAAA,GAAkC,KAAvBL,GAAuBI,GAAA,MAC7BJ,IAAgBhB,GAAKgB,GAAeG,QACnCH,+FAMAO,GAAwBL,GAAiB,EAC3CC,GAAInB,EAAI3C,IAAOd,EAASiD,IAAS+B,EAAzB,KACL,UAAN,OAGSJ,GAAInB,GAAKuB,KACfJ,4CAEuBtB,EAA3B,OAAA,QAAA,EAAA,EAAA2B,GAAA,EAAAC,IAAAD,GAAAE,GAAA,KAAA,GAAA,MAAAD,GAAA,GAAkC,KAAvBT,GAAuBQ,GAAA,SAC7BR,GAAehB,GAAK,EAAER,GAAQjD,KAC3B,UAAN,EAEGyE,IAAgBhB,EAAG,SAElB2B,GAAInC,GACCG,GAAInD,GAA0BmD,IAAKnD,EAAM,KAC3CgE,GAAIb,IAAKM,GAAOxD,EAAQkD,IAAKM,GAAOvD,EAAOA,EAAOiD,GAAIM,MACxD0B,GAAInB,aAGFoB,GAAUD,GAAInB,GACdC,GAAajE,EAAOgE,KACnB3B,KACNtB,EAAmB6B,GAAaoB,GAAIoB,GAAUnB,GAAY,CAAvC,CAAnB,CADD,KAGIpD,GAAMuE,GAAUnB,EAAhB,IAGE5B,KAAKtB,EAAmB6B,GAAauC,GAAG,CAAhB,CAAnB,CAAZ,KACOpC,GAAMC,GAAO+B,GAAuBL,IAAkBD,EAAtD,KACC,IACNC,6FAIF1B,KACAQ,SAGIxB,EAAO1H,KAAK,EAAZ,GArFO,UAmGT+K,GAAY9C,EAAA,SAASc,EAAO,QAC1B5B,EAAU4B,EAAO,SAAS3B,EAAQ,QACjClB,EAAc8E,KAAK5D,CAAnB,EACJ0B,GAAO1B,EAAOvH,MAAM,CAAb,EAAgBgB,YAAhB,CAAP,EACAuG,EAHG,GADU,aAmBZ6D,GAAUhD,EAAA,SAASc,EAAO,QACxB5B,EAAU4B,EAAO,SAAS3B,EAAQ,QACjCjB,EAAc6E,KAAK5D,CAAnB,EACJ,OAAS0C,GAAO1C,CAAP,EACTA,EAHG,GADQ,WAWV8D,GAAW,SAML,aAQH,QACGzD,UACAO,WAEDc,UACAgB,WACCmB,aACEF,ID5VDI,GAA6C,CAAA,EAE1D,SAAAC,EAA2BC,EAA3B,KACOC,EAAID,EAAIxD,WAAW,CAAf,EACN0D,EAAAA,cAEAD,EAAI,GAAIC,EAAI,KAAOD,EAAE9K,SAAS,EAAX,EAAeM,YAAf,EACdwK,EAAI,IAAKC,EAAI,IAAMD,EAAE9K,SAAS,EAAX,EAAeM,YAAf,EACnBwK,EAAI,KAAMC,EAAI,KAAQD,GAAK,EAAK,KAAK9K,SAAS,EAA1B,EAA8BM,YAA9B,EAA8C,KAAQwK,EAAI,GAAM,KAAK9K,SAAS,EAA1B,EAA8BM,YAA9B,EAC5EyK,EAAI,KAAQD,GAAK,GAAM,KAAK9K,SAAS,EAA3B,EAA+BM,YAA/B,EAA+C,KAASwK,GAAK,EAAK,GAAM,KAAK9K,SAAS,EAAjC,EAAqCM,YAArC,EAAqD,KAAQwK,EAAI,GAAM,KAAK9K,SAAS,EAA1B,EAA8BM,YAA9B,EAExHyK,EATRH,EAAAA,EAAAA,cAYA,SAAAI,EAA4BtL,EAA5B,SACKuL,EAAS,GACTxC,EAAI,EACFyC,EAAKxL,EAAIN,OAERqJ,EAAIyC,GAAI,KACRJ,EAAIK,SAASzL,EAAI0L,OAAO3C,EAAI,EAAG,CAAlB,EAAsB,EAA/B,KAENqC,EAAI,OACG5E,OAAOC,aAAa2E,CAApB,KACL,UAEGA,GAAK,KAAOA,EAAI,IAAK,IACxBI,EAAKzC,GAAM,EAAG,KACZ4C,GAAKF,SAASzL,EAAI0L,OAAO3C,EAAI,EAAG,CAAlB,EAAsB,EAA/B,KACDvC,OAAOC,cAAe2E,EAAI,KAAO,EAAMO,GAAK,EAA5C,UAEA3L,EAAI0L,OAAO3C,EAAG,CAAd,KAEN,UAEGqC,GAAK,IAAK,IACbI,EAAKzC,GAAM,EAAG,KACZ4C,GAAKF,SAASzL,EAAI0L,OAAO3C,EAAI,EAAG,CAAlB,EAAsB,EAA/B,EACL6C,GAAKH,SAASzL,EAAI0L,OAAO3C,EAAI,EAAG,CAAlB,EAAsB,EAA/B,KACDvC,OAAOC,cAAe2E,EAAI,KAAO,IAAQO,GAAK,KAAO,EAAMC,GAAK,EAAhE,UAEA5L,EAAI0L,OAAO3C,EAAG,CAAd,KAEN,UAGK/I,EAAI0L,OAAO3C,EAAG,CAAd,KACL,SAIAwC,EArCRD,EAAAA,EAAAA,eAwCA,SAAAO,EAAqCC,EAA0BC,EAA/D,UACAC,EAA2BhM,EAA3B,KACQiM,EAASX,EAAYtL,CAAZ,SACNiM,EAAOC,MAAMH,EAASI,UAAtB,EAA0CF,EAANjM,EAF/CgM,OAAAA,EAAAA,EAAAA,oBAKKF,EAAWM,SAAQN,EAAWM,OAAS5F,OAAOsF,EAAWM,MAAlB,EAA0BhF,QAAQ2E,EAASM,YAAaL,CAAxD,EAA0ErL,YAA1E,EAAwFyG,QAAQ2E,EAASO,WAAY,EAArH,GACvCR,EAAWS,WAAapM,SAAW2L,EAAWS,SAAW/F,OAAOsF,EAAWS,QAAlB,EAA4BnF,QAAQ2E,EAASM,YAAaL,CAA1D,EAA4E5E,QAAQ2E,EAASS,aAActB,CAA3G,EAAuH9D,QAAQ2E,EAASM,YAAazL,CAArJ,GACzDkL,EAAWW,OAAStM,SAAW2L,EAAWW,KAAOjG,OAAOsF,EAAWW,IAAlB,EAAwBrF,QAAQ2E,EAASM,YAAaL,CAAtD,EAAwErL,YAAxE,EAAsFyG,QAAQ2E,EAASW,SAAUxB,CAAjH,EAA6H9D,QAAQ2E,EAASM,YAAazL,CAA3J,GACjDkL,EAAWa,OAASxM,SAAW2L,EAAWa,KAAOnG,OAAOsF,EAAWa,IAAlB,EAAwBvF,QAAQ2E,EAASM,YAAaL,CAAtD,EAAwE5E,QAAS0E,EAAWM,OAASL,EAASa,SAAWb,EAASc,kBAAoB3B,CAAtJ,EAAkK9D,QAAQ2E,EAASM,YAAazL,CAAhM,GACjDkL,EAAWgB,QAAU3M,SAAW2L,EAAWgB,MAAQtG,OAAOsF,EAAWgB,KAAlB,EAAyB1F,QAAQ2E,EAASM,YAAaL,CAAvD,EAAyE5E,QAAQ2E,EAASgB,UAAW7B,CAArG,EAAiH9D,QAAQ2E,EAASM,YAAazL,CAA/I,GACnDkL,EAAWkB,WAAa7M,SAAW2L,EAAWkB,SAAWxG,OAAOsF,EAAWkB,QAAlB,EAA4B5F,QAAQ2E,EAASM,YAAaL,CAA1D,EAA4E5E,QAAQ2E,EAASkB,aAAc/B,CAA3G,EAAuH9D,QAAQ2E,EAASM,YAAazL,CAArJ,GAEtDkL,EAbRD,EAAAA,EAAAA,+BAgBA,SAAAqB,EAA4BlN,EAA5B,QACQA,EAAIoH,QAAQ,UAAW,IAAvB,GAAgC,IADxC8F,EAAAA,EAAAA,sBAIA,SAAAC,GAAwBV,EAAaV,EAArC,KACOqB,EAAUX,EAAKP,MAAMH,EAASsB,WAApB,GAAoC,CAAA,MAChCD,EAFrB,CAAA,EAEUE,EAFVC,EAAA,CAAA,SAIKD,EACIA,EAAQ9M,MAAM,GAAd,EAAmBqG,IAAIqG,CAAvB,EAA2CpN,KAAK,GAAhD,EAEA2M,EAPTU,EAAAA,GAAAA,kBAWA,SAAAK,GAAwBf,EAAaV,EAArC,KACOqB,EAAUX,EAAKP,MAAMH,EAAS0B,WAApB,GAAoC,CAAA,MAC1BL,EAF3B,CAAA,EAEUE,EAFVI,EAAA,CAAA,EAEmBC,GAFnBD,EAAA,CAAA,KAIKJ,EAAS,YACUA,EAAQ3M,YAAR,EAAsBH,MAAM,IAA5B,EAAkCoN,QAAlC,aAAfC,GADKC,GAAA,CAAA,EACCC,GADDD,GAAA,CAAA,EAENE,GAAcD,GAAQA,GAAMvN,MAAM,GAAZ,EAAiBqG,IAAIqG,CAArB,EAA2C,CAAA,EACjEe,GAAaJ,GAAKrN,MAAM,GAAX,EAAgBqG,IAAIqG,CAApB,EACbgB,GAAyBnC,EAASsB,YAAYvC,KAAKmD,GAAWA,GAAWvO,OAAS,CAA/B,CAA1B,EACzByO,GAAaD,GAAyB,EAAI,EAC1CE,GAAkBH,GAAWvO,OAASyO,GACtCE,GAAStN,MAAcoN,EAAd,EAENtO,GAAI,EAAGA,GAAIsO,GAAY,EAAEtO,MAC1BA,EAAP,EAAYmO,GAAYnO,EAAZ,GAAkBoO,GAAWG,GAAkBvO,EAA7B,GAAmC,GAG9DqO,QACIC,GAAa,CAApB,EAAyBhB,GAAekB,GAAOF,GAAa,CAApB,EAAwBpC,CAAvC,OAGpBuC,GAAgBD,GAAOE,OAA4C,SAACC,GAAKC,GAAOpF,GAAxF,IACO,CAACoF,IAASA,KAAU,IAAK,KACtBC,GAAcF,GAAIA,GAAI9O,OAAS,CAAjB,EAChBgP,IAAeA,GAAYrF,MAAQqF,GAAYhP,SAAW2J,MACjD3J,YAERmI,KAAK,CAAEwB,MAAAA,GAAO3J,OAAS,CAAlB,CAAT,SAGK8O,IACL,CAAA,CAVmB,EAYhBG,GAAoBL,GAAcM,KAAK,SAACC,GAAGC,GAAJ,QAAUA,GAAEpP,OAASmP,GAAEnP,OAA1C,EAAkD,CAAlD,EAEtBqP,GAAAA,UACAJ,IAAqBA,GAAkBjP,OAAS,EAAG,KAChDsP,GAAWX,GAAO1O,MAAM,EAAGgP,GAAkBtF,KAAlC,EACX4F,GAAUZ,GAAO1O,MAAMgP,GAAkBtF,MAAQsF,GAAkBjP,MAAzD,KACNsP,GAASlP,KAAK,GAAd,EAAqB,KAAOmP,GAAQnP,KAAK,GAAb,UAE5BuO,GAAOvO,KAAK,GAAZ,SAGP6N,SACQ,IAAMA,IAGXoB,eAEAtC,EAlDTe,EAAAA,GAAAA,kBAsDA,IAAM0B,GAAY,kIACZC,GAA4C,GAAIjD,MAAM,OAAX,EAAqB,CAArB,IAA4B/L,OAE7E,SAAAiP,GAAsBC,EAAtB,KAAwCC,EAAxC,UAAA,OAAA,GAAA,UAAA,CAAA,IAAA,OAAA,UAAA,CAAA,EAA6D,CAAA,EACtDxD,EAA2B,CAAA,EAC3BC,EAAYuD,EAAQC,MAAQ,GAAQjK,EAAeD,EAErDiK,EAAQE,YAAc,WAAUH,GAAaC,EAAQlD,OAASkD,EAAQlD,OAAS,IAAM,IAAM,KAAOiD,OAEhGjC,EAAUiC,EAAUnD,MAAMgD,EAAhB,KAEZ9B,EAAS,CACR+B,MAEQ/C,OAASgB,EAAQ,CAAR,IACTb,SAAWa,EAAQ,CAAR,IACXX,KAAOW,EAAQ,CAAR,IACPqC,KAAOhE,SAAS2B,EAAQ,CAAR,EAAY,EAArB,IACPT,KAAOS,EAAQ,CAAR,GAAc,KACrBN,MAAQM,EAAQ,CAAR,IACRJ,SAAWI,EAAQ,CAAR,EAGlBsC,MAAM5D,EAAW2D,IAAjB,MACQA,KAAOrC,EAAQ,CAAR,OAIRhB,OAASgB,EAAQ,CAAR,GAAcjN,SACvBoM,SAAY8C,EAAUM,QAAQ,GAAlB,IAA2B,GAAKvC,EAAQ,CAAR,EAAajN,SACzDsM,KAAQ4C,EAAUM,QAAQ,IAAlB,IAA4B,GAAKvC,EAAQ,CAAR,EAAajN,SACtDsP,KAAOhE,SAAS2B,EAAQ,CAAR,EAAY,EAArB,IACPT,KAAOS,EAAQ,CAAR,GAAc,KACrBN,MAASuC,EAAUM,QAAQ,GAAlB,IAA2B,GAAKvC,EAAQ,CAAR,EAAajN,SACtD6M,SAAYqC,EAAUM,QAAQ,GAAlB,IAA2B,GAAKvC,EAAQ,CAAR,EAAajN,OAGhEuP,MAAM5D,EAAW2D,IAAjB,MACQA,KAAQJ,EAAUnD,MAAM,+BAAhB,EAAmDkB,EAAQ,CAAR,EAAajN,SAIjF2L,EAAWW,SAEHA,KAAOe,GAAeL,GAAerB,EAAWW,KAAMV,CAAhC,EAA2CA,CAA1D,GAIfD,EAAWM,SAAWjM,QAAa2L,EAAWS,WAAapM,QAAa2L,EAAWW,OAAStM,QAAa2L,EAAW2D,OAAStP,QAAa,CAAC2L,EAAWa,MAAQb,EAAWgB,QAAU3M,SAC3KqP,UAAY,gBACb1D,EAAWM,SAAWjM,SACrBqP,UAAY,WACb1D,EAAWkB,WAAa7M,SACvBqP,UAAY,aAEZA,UAAY,MAIpBF,EAAQE,WAAaF,EAAQE,YAAc,UAAYF,EAAQE,YAAc1D,EAAW0D,cAChF9I,MAAQoF,EAAWpF,OAAS,gBAAkB4I,EAAQE,UAAY,mBAIxEI,GAAgB3E,IAASqE,EAAQlD,QAAUN,EAAWM,QAAU,IAAIzL,YAA5C,CAAR,KAGlB,CAAC2O,EAAQO,iBAAmB,CAACD,IAAiB,CAACA,GAAcC,gBAAiB,IAE7E/D,EAAWW,OAAS6C,EAAQQ,YAAeF,IAAiBA,GAAcE,eAEzE,GACQrD,KAAOzB,GAASD,QAAQe,EAAWW,KAAKrF,QAAQ2E,EAASM,YAAaf,CAA9C,EAA2D3K,YAA3D,CAAjB,QACV0K,GAAG,GACA3E,MAAQoF,EAAWpF,OAAS,kEAAoE2E,KAIjFS,EAAYzG,CAAxC,SAG4ByG,EAAYC,CAAxC,EAIG6D,IAAiBA,GAAcR,UACpBA,MAAMtD,EAAYwD,CAAhC,SAGU5I,MAAQoF,EAAWpF,OAAS,gCAGjCoF,EAzFRsD,EAAAA,GAAAA,SA4FA,SAAAW,GAA6BjE,EAA0BwD,EAAvD,KACOvD,EAAYuD,EAAQC,MAAQ,GAAQjK,EAAeD,EACnD2K,EAA0B,CAAA,SAE5BlE,EAAWS,WAAapM,WACjB0H,KAAKiE,EAAWS,QAA1B,IACU1E,KAAK,GAAf,GAGGiE,EAAWW,OAAStM,UAEb0H,KAAK2F,GAAeL,GAAe3G,OAAOsF,EAAWW,IAAlB,EAAyBV,CAAxC,EAAmDA,CAAlE,EAA4E3E,QAAQ2E,EAAS0B,YAAa,SAACwC,EAAGC,GAAIC,GAAR,OAAe,IAAMD,IAAMC,GAAK,MAAQA,GAAK,IAAM,IAA7J,CAAf,GAGG,OAAOrE,EAAW2D,MAAS,UAAY,OAAO3D,EAAW2D,MAAS,cAC3D5H,KAAK,GAAf,IACUA,KAAKrB,OAAOsF,EAAW2D,IAAlB,CAAf,GAGMO,EAAUtQ,OAASsQ,EAAUlQ,KAAK,EAAf,EAAqBK,OAnBhD4P,EAAAA,GAAAA,uBAsBA,IAAMK,GAAO,WACPC,GAAO,cACPC,GAAO,gBAEPC,GAAO,yBAEb,SAAAC,GAAkC3H,EAAlC,SACOrB,EAAuB,CAAA,EAEtBqB,EAAMnJ,WACRmJ,EAAMqD,MAAMkE,EAAZ,IACKvH,EAAMzB,QAAQgJ,GAAM,EAApB,UACEvH,EAAMqD,MAAMmE,EAAZ,IACFxH,EAAMzB,QAAQiJ,GAAM,GAApB,UACExH,EAAMqD,MAAMoE,EAAZ,IACFzH,EAAMzB,QAAQkJ,GAAM,GAApB,IACD7P,IAAP,UACUoI,IAAU,KAAOA,IAAU,OAC7B,OACF,KACA4H,EAAK5H,EAAMqD,MAAMqE,EAAZ,KACPE,EAAI,KACDC,EAAID,EAAG,CAAH,IACF5H,EAAMlJ,MAAM+Q,EAAEhR,MAAd,IACDmI,KAAK6I,CAAZ,aAEM,IAAIC,MAAM,kCAAV,SAKFnJ,EAAO1H,KAAK,EAAZ,EAzBR0Q,EAAAA,GAAAA,qBA4BA,SAAAI,GAA0B9E,EAA1B,KAAoDwD,EAApD,UAAA,OAAA,GAAA,UAAA,CAAA,IAAA,OAAA,UAAA,CAAA,EAAyE,CAAA,EAClEvD,EAAYuD,EAAQC,IAAMjK,EAAeD,EACzC2K,EAA0B,CAAA,EAG1BJ,EAAgB3E,IAASqE,EAAQlD,QAAUN,EAAWM,QAAU,IAAIzL,YAA5C,CAAR,KAGlBiP,GAAiBA,EAAcgB,WAAWhB,EAAcgB,UAAU9E,EAAYwD,CAApC,EAE1CxD,EAAWW,MAEVV,CAAAA,EAAS0B,YAAY3C,KAAKgB,EAAWW,IAArC,GAKC,GAAI6C,EAAQQ,YAAeF,GAAiBA,EAAcE,cAE1D,GACQrD,KAAS6C,EAAQC,IAAmGvE,GAASH,UAAUiB,EAAWW,IAA9B,EAA7FzB,GAASD,QAAQe,EAAWW,KAAKrF,QAAQ2E,EAASM,YAAaf,CAA9C,EAA2D3K,YAA3D,CAAjB,QAC1B0K,GAAG,GACA3E,MAAQoF,EAAWpF,OAAS,+CAAkD4I,EAAQC,IAAgB,UAAV,SAAuB,kBAAoBlE,MAMzHS,EAAYC,CAAxC,EAEIuD,EAAQE,YAAc,UAAY1D,EAAWM,WACtCvE,KAAKiE,EAAWM,MAA1B,IACUvE,KAAK,GAAf,OAGKgJ,GAAYd,GAAoBjE,EAAYwD,CAAhC,KACduB,KAAc1Q,SACbmP,EAAQE,YAAc,YACf3H,KAAK,IAAf,IAGSA,KAAKgJ,EAAf,EAEI/E,EAAWa,MAAQb,EAAWa,KAAKmE,OAAO,CAAvB,IAA8B,OAC1CjJ,KAAK,GAAf,GAIEiE,EAAWa,OAASxM,OAAW,KAC9BuQ,GAAI5E,EAAWa,KAEf,CAAC2C,EAAQyB,eAAiB,CAACnB,GAAiB,CAACA,EAAcmB,mBAC1DP,GAAkBE,EAAlB,GAGDG,KAAc1Q,YACbuQ,GAAEtJ,QAAQ,QAAS,MAAnB,KAGKS,KAAK6I,EAAf,SAGG5E,EAAWgB,QAAU3M,WACd0H,KAAK,GAAf,IACUA,KAAKiE,EAAWgB,KAA1B,GAGGhB,EAAWkB,WAAa7M,WACjB0H,KAAK,GAAf,IACUA,KAAKiE,EAAWkB,QAA1B,GAGMgD,EAAUlQ,KAAK,EAAf,EAxER8Q,EAAAA,GAAAA,aA2EA,SAAAI,GAAkCxL,EAAoByL,EAAtD,KAA8E3B,EAA9E,UAAA,OAAA,GAAA,UAAA,CAAA,IAAA,OAAA,UAAA,CAAA,EAAmG,CAAA,EAAI4B,EAAvG,UAAA,CAAA,EACOhQ,EAAuB,CAAA,SAExBgQ,MACG9B,GAAMwB,GAAUpL,EAAM8J,CAAhB,EAA0BA,CAAhC,IACIF,GAAMwB,GAAUK,EAAU3B,CAApB,EAA8BA,CAApC,KAEFA,GAAW,CAAA,EAEjB,CAACA,EAAQ6B,UAAYF,EAAS7E,UAC1BA,OAAS6E,EAAS7E,SAElBG,SAAW0E,EAAS1E,WACpBE,KAAOwE,EAASxE,OAChBgD,KAAOwB,EAASxB,OAChB9C,KAAO6D,GAAkBS,EAAStE,MAAQ,EAAnC,IACPG,MAAQmE,EAASnE,QAEpBmE,EAAS1E,WAAapM,QAAa8Q,EAASxE,OAAStM,QAAa8Q,EAASxB,OAAStP,UAEhFoM,SAAW0E,EAAS1E,WACpBE,KAAOwE,EAASxE,OAChBgD,KAAOwB,EAASxB,OAChB9C,KAAO6D,GAAkBS,EAAStE,MAAQ,EAAnC,IACPG,MAAQmE,EAASnE,QAEnBmE,EAAStE,MAQTsE,EAAStE,KAAKmE,OAAO,CAArB,IAA4B,MACxBnE,KAAO6D,GAAkBS,EAAStE,IAA3B,IAETnH,EAAK+G,WAAapM,QAAaqF,EAAKiH,OAAStM,QAAaqF,EAAKiK,OAAStP,SAAc,CAACqF,EAAKmH,OACzFA,KAAO,IAAMsE,EAAStE,KAClBnH,EAAKmH,OAGTA,KAAOnH,EAAKmH,KAAKhN,MAAM,EAAG6F,EAAKmH,KAAKxD,YAAY,GAAtB,EAA6B,CAAhD,EAAqD8H,EAAStE,OAFrEA,KAAOsE,EAAStE,OAIjBA,KAAO6D,GAAkBtP,EAAOyL,IAAzB,KAERG,MAAQmE,EAASnE,UAnBjBH,KAAOnH,EAAKmH,KACfsE,EAASnE,QAAU3M,SACf2M,MAAQmE,EAASnE,QAEjBA,MAAQtH,EAAKsH,SAkBfP,SAAW/G,EAAK+G,WAChBE,KAAOjH,EAAKiH,OACZgD,KAAOjK,EAAKiK,QAEbrD,OAAS5G,EAAK4G,UAGfY,SAAWiE,EAASjE,SAEpB9L,EA1DR8P,EAAAA,GAAAA,qBA6DA,SAAAI,GAAwBC,EAAgBC,EAAoBhC,EAA5D,KACOiC,EAAoBtQ,EAAO,CAAEmL,OAAS,MAAX,EAAqBkD,CAA5B,SACnBsB,GAAUI,GAAkB5B,GAAMiC,EAASE,CAAf,EAAmCnC,GAAMkC,EAAaC,CAAnB,EAAuCA,EAAmB,EAA/G,EAAsHA,CAAhI,EAFRH,EAAAA,GAAAA,WAOA,SAAAI,EAA0BC,EAASnC,EAAnC,QACK,OAAOmC,GAAQ,WACZb,GAAUxB,GAAMqC,EAAKnC,CAAX,EAAqBA,CAA/B,EACIrP,EAAOwR,CAAP,IAAgB,aACpBrC,GAAMwB,GAAyBa,EAAKnC,CAA9B,EAAwCA,CAA9C,GAGAmC,EAPRD,EAAAA,EAAAA,aAYA,SAAAE,EAAsBC,EAAUC,EAAUtC,EAA1C,QACK,OAAOqC,GAAS,WACZf,GAAUxB,GAAMuC,EAAMrC,CAAZ,EAAsBA,CAAhC,EACGrP,EAAO0R,CAAP,IAAiB,aACpBf,GAAyBe,EAAMrC,CAA/B,GAGJ,OAAOsC,GAAS,WACZhB,GAAUxB,GAAMwC,EAAMtC,CAAZ,EAAsBA,CAAhC,EACGrP,EAAO2R,CAAP,IAAiB,aACpBhB,GAAyBgB,EAAMtC,CAA/B,GAGDqC,IAASC,EAbjBF,EAAAA,EAAAA,SAgBA,SAAAG,EAAgC7R,EAAYsP,EAA5C,QACQtP,GAAOA,EAAIM,SAAJ,EAAe8G,QAAS,CAACkI,GAAW,CAACA,EAAQC,IAAMlK,EAAayM,OAASxM,EAAawM,OAAS5G,CAA/F,EADf2G,EAAAA,EAAAA,mBAIA,SAAAE,EAAkC/R,EAAYsP,EAA9C,QACQtP,GAAOA,EAAIM,SAAJ,EAAe8G,QAAS,CAACkI,GAAW,CAACA,EAAQC,IAAMlK,EAAagH,YAAc/G,EAAa+G,YAAcf,CAAzG,EADfyG,EAAAA,EAAAA,qBDviBA,IAAMC,GAA2B,QACvB,kBAEI,SAELjK,EAAA,SAAU+D,EAA0BwD,EAA7C,QAEOxD,EAAWW,SACJ/F,MAAQoF,EAAWpF,OAAS,+BAGjCoF,GANA,mBASI/D,EAAA,SAAU+D,EAA0BwD,EAAjD,KACQ2C,EAASzL,OAAOsF,EAAWM,MAAlB,EAA0BzL,YAA1B,IAA4C,eAGvDmL,EAAW2D,QAAUwC,EAAS,IAAM,KAAOnG,EAAW2D,OAAS,QACvDA,KAAOtP,QAId2L,EAAWa,SACJA,KAAO,KAOZb,GAjBI,cDbPkG,GAA2B,QACvB,mBACIE,GAAKpC,iBACVoC,GAAK9C,gBACD8C,GAAKtB,WDAlB,SAAAuB,GAAkBC,EAAlB,QACQ,OAAOA,EAAaH,QAAW,UAAYG,EAAaH,OAASzL,OAAO4L,EAAahG,MAApB,EAA4BzL,YAA5B,IAA8C,MADvHwR,EAAAA,GAAAA,YAKA,IAAMH,GAA2B,QACvB,gBAEI,SAELjK,EAAA,SAAU+D,EAA0BwD,EAA7C,KACQ8C,EAAetG,WAGRmG,OAASE,GAASC,CAAT,IAGTC,cAAgBD,EAAazF,MAAQ,MAAQyF,EAAatF,MAAQ,IAAMsF,EAAatF,MAAQ,MAC7FH,KAAOxM,SACP2M,MAAQ3M,OAEdiS,GAXA,mBAcIrK,EAAA,SAAUqK,EAA2B9C,EAAlD,KAEM8C,EAAa3C,QAAU0C,GAASC,CAAT,EAAyB,IAAM,KAAOA,EAAa3C,OAAS,QACzEA,KAAOtP,QAIjB,OAAOiS,EAAaH,QAAW,cACrB7F,OAAUgG,EAAaH,OAAS,MAAQ,OACxCA,OAAS9R,QAInBiS,EAAaC,aAAc,OACRD,EAAaC,aAAa7R,MAAM,GAAhC,WAAfmM,GADuB2F,EAAA,CAAA,EACjBxF,GADiBwF,EAAA,CAAA,IAEjB3F,KAAQA,IAAQA,KAAS,IAAMA,GAAOxM,SACtC2M,MAAQA,KACRuF,aAAelS,gBAIhB6M,SAAW7M,OAEjBiS,GAvBI,cD5BPJ,GAA2B,QACvB,iBACIO,GAAGzC,iBACRyC,GAAGnD,gBACCmD,GAAG3B,WDSV4B,GAAkB,CAAA,EAClBlR,GAAQ,GAGRc,GAAe,0BAA4Bd,GAAQ,4EAA8E,IAAM,IACvIK,GAAW,cACXE,GAAe9B,EAAOA,EAAO,UAAY4B,GAAW,IAAMA,GAAWA,GAAW,IAAMA,GAAWA,EAA3E,EAAuF,IAAM5B,EAAO,cAAgB4B,GAAW,IAAMA,GAAWA,EAAnD,EAA+D,IAAM5B,EAAO,IAAM4B,GAAWA,EAAxB,CAAzK,EAaf8Q,GAAU,wDACVC,GAAU,6DACVC,GAAUrT,EAAMoT,GAAS,WAAf,EAQVE,GAAgB,sCAahBzG,GAAa,IAAI/G,OAAOhD,GAAc,GAAzB,EACbiK,GAAc,IAAIjH,OAAOvD,GAAc,GAAzB,EACdgR,GAAiB,IAAIzN,OAAO9F,EAAM,MAAOmT,GAAS,QAAS,QAASE,EAAxC,EAAkD,GAA7D,EAEjBG,GAAa,IAAI1N,OAAO9F,EAAM,MAAO8C,GAAcwQ,EAA3B,EAA2C,GAAtD,EACbG,GAAcD,GAIpB,SAAA9G,GAA0BhM,EAA1B,KACOiM,EAASX,EAAYtL,CAAZ,SACNiM,EAAOC,MAAMC,EAAb,EAAiCF,EAANjM,EAFrCgM,EAAAA,GAAAA,oBAKA,IAAMgG,GAA8C,QAC1C,eAEDjK,EAAA,SAAU+D,EAA0BwD,EAA7C,KACQ0D,EAAmBlH,EACnBmH,EAAKD,EAAiBC,GAAMD,EAAiBrG,KAAOqG,EAAiBrG,KAAKnM,MAAM,GAA5B,EAAmC,CAAA,OAC5EmM,KAAOxM,OAEpB6S,EAAiBlG,MAAO,SACvBoG,GAAiB,GACfC,GAAwB,CAAA,EACxBC,GAAUJ,EAAiBlG,MAAMtM,MAAM,GAA7B,EAEPX,GAAI,EAAGD,GAAKwT,GAAQ1T,OAAQG,GAAID,GAAI,EAAEC,GAAG,KAC3CwT,GAASD,GAAQvT,EAAR,EAAWW,MAAM,GAAjB,SAEP6S,GAAO,CAAP,EAAR,KACM,aACEC,GAAUD,GAAO,CAAP,EAAU7S,MAAM,GAAhB,EACPX,GAAI,EAAGD,GAAK0T,GAAQ5T,OAAQG,GAAID,GAAI,EAAEC,KAC3CgI,KAAKyL,GAAQzT,EAAR,CAAR,YAGG,YACa0T,QAAUxB,EAAkBsB,GAAO,CAAP,EAAW/D,CAA7B,YAEvB,SACakE,KAAOzB,EAAkBsB,GAAO,CAAP,EAAW/D,CAA7B,mBAGP,MACTyC,EAAkBsB,GAAO,CAAP,EAAW/D,CAA7B,CAAR,EAAiDyC,EAAkBsB,GAAO,CAAP,EAAW/D,CAA7B,SAKhD4D,KAAgBF,EAAiBG,QAAUA,MAG/BrG,MAAQ3M,eAEhBN,GAAI,EAAGD,GAAKqT,EAAGvT,OAAQG,GAAID,GAAI,EAAEC,GAAG,KACtC4T,GAAOR,EAAGpT,EAAH,EAAMW,MAAM,GAAZ,QAER,CAAL,EAAUuR,EAAkB0B,GAAK,CAAL,CAAlB,EAELnE,EAAQO,kBAQP,CAAL,EAAUkC,EAAkB0B,GAAK,CAAL,EAASnE,CAA3B,EAAoC3O,YAApC,UANN,IACE,CAAL,EAAUqK,GAASD,QAAQgH,EAAkB0B,GAAK,CAAL,EAASnE,CAA3B,EAAoC3O,YAApC,CAAjB,QACF0K,GAAG,GACM3E,MAAQsM,EAAiBtM,OAAS,2EAA6E2E,KAM/HxL,EAAH,EAAQ4T,GAAK3T,KAAK,GAAV,SAGFkT,GAzDA,sBA4DIjL,EAAA,SAAUiL,EAAmC1D,EAA1D,KACQxD,EAAakH,EACbC,EAAKpS,EAAQmS,EAAiBC,EAAzB,KACPA,EAAI,SACEpT,GAAI,EAAGD,GAAKqT,EAAGvT,OAAQG,GAAID,GAAI,EAAEC,GAAG,KACtC6T,GAASlN,OAAOyM,EAAGpT,EAAH,CAAP,EACT8T,GAAQD,GAAOvK,YAAY,GAAnB,EACRyK,GAAaF,GAAO/T,MAAM,EAAGgU,EAAhB,EAAwBvM,QAAQiF,GAAaL,EAA9C,EAAgE5E,QAAQiF,GAAazL,CAArF,EAAkGwG,QAAQyL,GAAgB3H,CAA1H,EACd2I,GAASH,GAAO/T,MAAMgU,GAAQ,CAArB,KAGT,IACQrE,EAAQC,IAA2EvE,GAASH,UAAUgJ,EAAnB,EAArE7I,GAASD,QAAQgH,EAAkB8B,GAAQvE,CAA1B,EAAmC3O,YAAnC,CAAjB,QACjB0K,GAAG,GACA3E,MAAQoF,EAAWpF,OAAS,wDAA2D4I,EAAQC,IAAgB,UAAV,SAAuB,kBAAoBlE,KAGzJxL,EAAH,EAAQ+T,GAAY,IAAMC,KAGhBlH,KAAOsG,EAAGnT,KAAK,GAAR,MAGbqT,GAAUH,EAAiBG,QAAUH,EAAiBG,SAAW,CAAA,EAEnEH,EAAiBO,UAASJ,GAAQ,QAAaH,EAAiBO,SAChEP,EAAiBQ,OAAML,GAAQ,KAAUH,EAAiBQ,UAExDnF,GAAS,CAAA,UACJyF,MAAQX,GACdA,GAAQW,EAAR,IAAkBtB,GAAEsB,EAAF,MACdjM,KACNiM,GAAK1M,QAAQiF,GAAaL,EAA1B,EAA4C5E,QAAQiF,GAAazL,CAAjE,EAA8EwG,QAAQ0L,GAAY5H,CAAlG,EACA,IACAiI,GAAQW,EAAR,EAAc1M,QAAQiF,GAAaL,EAAnC,EAAqD5E,QAAQiF,GAAazL,CAA1E,EAAuFwG,QAAQ2L,GAAa7H,CAA5G,CAHD,SAOEmD,GAAO3O,WACCoN,MAAQuB,GAAOvO,KAAK,GAAZ,GAGbgM,GA1CI,iBDrHPiI,GAAY,kBAIZ/B,GAAqD,QACjD,YAEDjK,EAAA,SAAU+D,EAA0BwD,EAA7C,KACQlC,EAAUtB,EAAWa,MAAQb,EAAWa,KAAKT,MAAM6H,EAAtB,EAC/BC,EAAgBlI,KAEhBsB,EAAS,KACNhB,GAASkD,EAAQlD,QAAU4H,EAAc5H,QAAU,MACnD6H,GAAM7G,EAAQ,CAAR,EAAWzM,YAAX,EACNuT,GAAM9G,EAAQ,CAAR,EACN+G,GAAe/H,GAAf,KAAyBkD,EAAQ2E,KAAOA,IACxCrE,GAAgB3E,GAAQkJ,EAAR,IAERF,IAAMA,KACNC,IAAMA,KACNvH,KAAOxM,OAEjByP,OACaA,GAAcR,MAAM4E,EAAe1E,CAAnC,UAGH5I,MAAQsN,EAActN,OAAS,gCAGvCsN,GAtBA,sBAyBIjM,EAAA,SAAUiM,EAA6B1E,EAApD,KACQlD,EAASkD,EAAQlD,QAAU4H,EAAc5H,QAAU,MACnD6H,EAAMD,EAAcC,IACpBE,GAAe/H,EAAf,KAAyBkD,EAAQ2E,KAAOA,GACxCrE,GAAgB3E,GAAQkJ,EAAR,EAElBvE,OACaA,GAAcgB,UAAUoD,EAAe1E,CAAvC,OAGX8E,GAAgBJ,EAChBE,GAAMF,EAAcE,cACZvH,MAAUsH,GAAO3E,EAAQ2E,KAAvC,IAA8CC,GAEvCE,IAdI,iBD1CPC,GAAO,2DAIPrC,GAAsE,QAClE,iBAEDjK,EAAA,SAAUiM,EAA6B1E,EAAhD,KACQgF,EAAiBN,WACRO,KAAOD,EAAeJ,MACtBA,IAAM/T,OAEjB,CAACmP,EAAQ6B,WAAa,CAACmD,EAAeC,MAAQ,CAACD,EAAeC,KAAKrI,MAAMmI,EAA1B,OACnC3N,MAAQ4N,EAAe5N,OAAS,sBAGzC4N,GATA,mBAYIvM,EAAA,SAAUuM,EAA+BhF,EAAtD,KACQ0E,EAAgBM,WAERJ,KAAOI,EAAeC,MAAQ,IAAI5T,YAA5B,EACbqT,GAJI,cDxBb/I,GAAQiH,GAAK9F,MAAb,EAAuB8F,GAGvBjH,GAAQuJ,GAAMpI,MAAd,EAAwBoI,GAGxBvJ,GAAQsH,GAAGnG,MAAX,EAAqBmG,GAGrBtH,GAAQwJ,GAAIrI,MAAZ,EAAsBqI,GAGtBxJ,GAAQyJ,GAAOtI,MAAf,EAAyBsI,GAGzBzJ,GAAQ0J,GAAIvI,MAAZ,EAAsBuI,GAGtB1J,GAAQsJ,GAAKnI,MAAb,EAAuBmI,2ParBvB,IAAAK,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAMAA,GAAO,QAAUC,EAAA,SAASC,EAAMC,EAAGC,EAAG,CACpC,GAAID,IAAMC,EAAG,MAAO,GAEpB,GAAID,GAAKC,GAAK,OAAOD,GAAK,UAAY,OAAOC,GAAK,SAAU,CAC1D,GAAID,EAAE,cAAgBC,EAAE,YAAa,MAAO,GAE5C,IAAIC,EAAQ,EAAGC,EACf,GAAI,MAAM,QAAQH,CAAC,EAAG,CAEpB,GADAE,EAASF,EAAE,OACPE,GAAUD,EAAE,OAAQ,MAAO,GAC/B,IAAK,EAAIC,EAAQ,MAAQ,GACvB,GAAI,CAACH,EAAMC,EAAE,CAAC,EAAGC,EAAE,CAAC,CAAC,EAAG,MAAO,GACjC,MAAO,EACT,CAIA,GAAID,EAAE,cAAgB,OAAQ,OAAOA,EAAE,SAAWC,EAAE,QAAUD,EAAE,QAAUC,EAAE,MAC5E,GAAID,EAAE,UAAY,OAAO,UAAU,QAAS,OAAOA,EAAE,QAAQ,IAAMC,EAAE,QAAQ,EAC7E,GAAID,EAAE,WAAa,OAAO,UAAU,SAAU,OAAOA,EAAE,SAAS,IAAMC,EAAE,SAAS,EAIjF,GAFAE,EAAO,OAAO,KAAKH,CAAC,EACpBE,EAASC,EAAK,OACVD,IAAW,OAAO,KAAKD,CAAC,EAAE,OAAQ,MAAO,GAE7C,IAAK,EAAIC,EAAQ,MAAQ,GACvB,GAAI,CAAC,OAAO,UAAU,eAAe,KAAKD,EAAGE,EAAK,CAAC,CAAC,EAAG,MAAO,GAEhE,IAAK,EAAID,EAAQ,MAAQ,GAAI,CAC3B,IAAIE,EAAMD,EAAK,CAAC,EAEhB,GAAI,CAACJ,EAAMC,EAAEI,CAAG,EAAGH,EAAEG,CAAG,CAAC,EAAG,MAAO,EACrC,CAEA,MAAO,EACT,CAGA,OAAOJ,IAAIA,GAAKC,IAAIA,CACtB,EAvCiB,WCNjB,IAAAI,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAIAA,GAAO,QAAUC,EAAA,SAAoBC,EAAK,CAKxC,QAJIC,EAAS,EACTC,EAAMF,EAAI,OACVG,EAAM,EACNC,EACGD,EAAMD,GACXD,IACAG,EAAQJ,EAAI,WAAWG,GAAK,EACxBC,GAAS,OAAUA,GAAS,OAAUD,EAAMD,IAE9CE,EAAQJ,EAAI,WAAWG,CAAG,GACrBC,EAAQ,QAAW,OAAQD,KAGpC,OAAOF,CACT,EAfiB,gBCJjB,IAAAI,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAGAA,GAAO,QAAU,CACf,KAAMC,GACN,cAAeC,GACf,eAAgBC,GAChB,cAAeC,GACf,OAAQC,GACR,YAAaC,GACb,aAAcC,GACd,MAAO,KACP,WAAY,KACZ,cAAeC,GACf,WAAYC,GACZ,eAAgBC,GAChB,qBAAsBC,GACtB,mBAAoBC,GACpB,eAAgBC,GAChB,YAAaC,GACb,QAASC,GACT,QAASC,GACT,iBAAkBC,GAClB,oBAAqBC,GACrB,eAAgBC,GAChB,kBAAmBC,EACrB,EAGA,SAASnB,GAAKoB,EAAGC,EAAI,CACnBA,EAAKA,GAAM,CAAC,EACZ,QAASC,KAAOF,EAAGC,EAAGC,CAAG,EAAIF,EAAEE,CAAG,EAClC,OAAOD,CACT,CAJSE,EAAAvB,GAAA,QAOT,SAASC,GAAcuB,EAAUC,EAAMC,EAAeC,EAAQ,CAC5D,IAAIC,EAAQD,EAAS,QAAU,QAC3BE,EAAMF,EAAS,OAAS,OACxBG,EAAKH,EAAS,IAAM,GACpBI,EAAMJ,EAAS,GAAK,IACxB,OAAQH,EAAU,CAChB,IAAK,OAAQ,OAAOC,EAAOG,EAAQ,OACnC,IAAK,QAAS,OAAOE,EAAK,iBAAmBL,EAAO,IACpD,IAAK,SAAU,MAAO,IAAMK,EAAKL,EAAOI,EAClB,UAAYJ,EAAOG,EAAQ,WAAaC,EACxCE,EAAM,iBAAmBN,EAAO,KACtD,IAAK,UAAW,MAAO,WAAaA,EAAOG,EAAQ,WAAaC,EACzCE,EAAM,IAAMN,EAAO,QACnBI,EAAMJ,EAAOG,EAAQH,GACpBC,EAAiBG,EAAMC,EAAK,YAAcL,EAAO,IAAO,IAAM,IACtF,IAAK,SAAU,MAAO,WAAaA,EAAOG,EAAQ,IAAMJ,EAAW,KAC5CE,EAAiBG,EAAMC,EAAK,YAAcL,EAAO,IAAO,IAAM,IACrF,QAAS,MAAO,UAAYA,EAAOG,EAAQ,IAAMJ,EAAW,GAC9D,CACF,CAnBSD,EAAAtB,GAAA,iBAsBT,SAASC,GAAe8B,EAAWP,EAAMC,EAAe,CACtD,OAAQM,EAAU,OAAQ,CACxB,IAAK,GAAG,OAAO/B,GAAc+B,EAAU,CAAC,EAAGP,EAAMC,EAAe,EAAI,EACpE,QACE,IAAIO,EAAO,GACPC,EAAQ9B,GAAO4B,CAAS,EACxBE,EAAM,OAASA,EAAM,SACvBD,EAAOC,EAAM,KAAO,IAAK,KAAOT,EAAO,OACvCQ,GAAQ,UAAYR,EAAO,iBAC3B,OAAOS,EAAM,KACb,OAAOA,EAAM,MACb,OAAOA,EAAM,QAEXA,EAAM,QAAQ,OAAOA,EAAM,QAC/B,QAASC,KAAKD,EACZD,IAASA,EAAO,OAAS,IAAOhC,GAAckC,EAAGV,EAAMC,EAAe,EAAI,EAE5E,OAAOO,CACX,CACF,CAnBSV,EAAArB,GAAA,kBAsBT,IAAIkC,GAAkBhC,GAAO,CAAE,SAAU,SAAU,UAAW,UAAW,MAAO,CAAC,EACjF,SAASD,GAAckC,EAAmBL,EAAW,CACnD,GAAI,MAAM,QAAQA,CAAS,EAAG,CAE5B,QADIE,EAAQ,CAAC,EACJI,EAAE,EAAGA,EAAEN,EAAU,OAAQM,IAAK,CACrC,IAAIH,EAAIH,EAAUM,CAAC,GACfF,GAAgBD,CAAC,GACZE,IAAsB,SAAWF,IAAM,WAASD,EAAMA,EAAM,MAAM,EAAIC,EACjF,CACA,GAAID,EAAM,OAAQ,OAAOA,CAC3B,KAAO,IAAIE,GAAgBJ,CAAS,EAClC,MAAO,CAACA,CAAS,EACZ,GAAIK,IAAsB,SAAWL,IAAc,QACxD,MAAO,CAAC,OAAO,EAEnB,CAdST,EAAApB,GAAA,iBAiBT,SAASC,GAAOmC,EAAK,CAEnB,QADIC,EAAO,CAAC,EACHF,EAAE,EAAGA,EAAEC,EAAI,OAAQD,IAAKE,EAAKD,EAAID,CAAC,CAAC,EAAI,GAChD,OAAOE,CACT,CAJSjB,EAAAnB,GAAA,UAOT,IAAIqC,GAAa,wBACbC,GAAe,QACnB,SAASrC,GAAYiB,EAAK,CACxB,OAAO,OAAOA,GAAO,SACX,IAAMA,EAAM,IACZmB,GAAW,KAAKnB,CAAG,EACjB,IAAMA,EACN,KAAOhB,GAAagB,CAAG,EAAI,IACzC,CANSC,EAAAlB,GAAA,eAST,SAASC,GAAaqC,EAAK,CACzB,OAAOA,EAAI,QAAQD,GAAc,MAAM,EAC5B,QAAQ,MAAO,KAAK,EACpB,QAAQ,MAAO,KAAK,EACpB,QAAQ,MAAO,KAAK,EACpB,QAAQ,MAAO,KAAK,CACjC,CANSnB,EAAAjB,GAAA,gBAST,SAASC,GAAcoC,EAAKC,EAAS,CACnCA,GAAW,SACX,IAAIC,EAAUF,EAAI,MAAM,IAAI,OAAOC,EAAS,GAAG,CAAC,EAChD,OAAOC,EAAUA,EAAQ,OAAS,CACpC,CAJStB,EAAAhB,GAAA,iBAOT,SAASC,GAAWmC,EAAKC,EAASE,EAAM,CACtC,OAAAF,GAAW,WACXE,EAAOA,EAAK,QAAQ,MAAO,MAAM,EAC1BH,EAAI,QAAQ,IAAI,OAAOC,EAAS,GAAG,EAAGE,EAAO,IAAI,CAC1D,CAJSvB,EAAAf,GAAA,cAOT,SAASC,GAAesC,EAAQC,EAAO,CACrC,GAAI,OAAOD,GAAU,UAAW,MAAO,CAACA,EACxC,QAASzB,KAAOyB,EAAQ,GAAIC,EAAM1B,CAAG,EAAG,MAAO,EACjD,CAHSC,EAAAd,GAAA,kBAMT,SAASC,GAAqBqC,EAAQC,EAAOC,EAAe,CAC1D,GAAI,OAAOF,GAAU,UAAW,MAAO,CAACA,GAAUE,GAAiB,MACnE,QAAS3B,KAAOyB,EAAQ,GAAIzB,GAAO2B,GAAiBD,EAAM1B,CAAG,EAAG,MAAO,EACzE,CAHSC,EAAAb,GAAA,wBAMT,SAASC,GAAmBoC,EAAQC,EAAO,CACzC,GAAI,OAAOD,GAAU,WACrB,QAASzB,KAAOyB,EAAQ,GAAI,CAACC,EAAM1B,CAAG,EAAG,OAAOA,EAClD,CAHSC,EAAAZ,GAAA,sBAMT,SAASC,GAAe+B,EAAK,CAC3B,MAAO,IAAOrC,GAAaqC,CAAG,EAAI,GACpC,CAFSpB,EAAAX,GAAA,kBAKT,SAASC,GAAYqC,EAAaJ,EAAMK,EAAcC,EAAU,CAC9D,IAAIC,EAAOF,EACG,SAAaL,GAAQM,EAAW,GAAK,8CACpCA,EAAW,SAAaN,EAAO,SAAa,YAAiBA,EAAO,YACnF,OAAOQ,GAAUJ,EAAaG,CAAI,CACpC,CALS9B,EAAAV,GAAA,eAQT,SAASC,GAAQoC,EAAaK,EAAMJ,EAAc,CAChD,IAAIE,EACUzC,GADHuC,EACkB,IAAMhC,GAAkBoC,CAAI,EAC5BlD,GAAYkD,CAAI,CADa,EAE1D,OAAOD,GAAUJ,EAAaG,CAAI,CACpC,CALS9B,EAAAT,GAAA,WAQT,IAAI0C,GAAe,sBACfC,GAAwB,mCAC5B,SAAS1C,GAAQ2C,EAAOC,EAAKC,EAAO,CAClC,IAAIC,EAAIC,EAAarC,EAAMoB,EAC3B,GAAIa,IAAU,GAAI,MAAO,WACzB,GAAIA,EAAM,CAAC,GAAK,IAAK,CACnB,GAAI,CAACF,GAAa,KAAKE,CAAK,EAAG,MAAM,IAAI,MAAM,yBAA2BA,CAAK,EAC/EI,EAAcJ,EACdjC,EAAO,UACT,KAAO,CAEL,GADAoB,EAAUa,EAAM,MAAMD,EAAqB,EACvC,CAACZ,EAAS,MAAM,IAAI,MAAM,yBAA2Ba,CAAK,EAG9D,GAFAG,EAAK,CAAChB,EAAQ,CAAC,EACfiB,EAAcjB,EAAQ,CAAC,EACnBiB,GAAe,IAAK,CACtB,GAAID,GAAMF,EAAK,MAAM,IAAI,MAAM,gCAAkCE,EAAK,gCAAkCF,CAAG,EAC3G,OAAOC,EAAMD,EAAME,CAAE,CACvB,CAEA,GAAIA,EAAKF,EAAK,MAAM,IAAI,MAAM,sBAAwBE,EAAK,gCAAkCF,CAAG,EAEhG,GADAlC,EAAO,QAAWkC,EAAME,GAAO,IAC3B,CAACC,EAAa,OAAOrC,CAC3B,CAIA,QAFIqB,EAAOrB,EACPsC,EAAWD,EAAY,MAAM,GAAG,EAC3BxB,EAAE,EAAGA,EAAEyB,EAAS,OAAQzB,IAAK,CACpC,IAAI0B,EAAUD,EAASzB,CAAC,EACpB0B,IACFvC,GAAQpB,GAAYY,GAAoB+C,CAAO,CAAC,EAChDlB,GAAQ,OAASrB,EAErB,CACA,OAAOqB,CACT,CAhCSvB,EAAAR,GAAA,WAmCT,SAASuC,GAAWW,EAAGC,EAAG,CACxB,OAAID,GAAK,KAAaC,GACdD,EAAI,MAAQC,GAAG,QAAQ,iBAAkB,IAAI,CACvD,CAHS3C,EAAA+B,GAAA,aAMT,SAAStC,GAAiB2B,EAAK,CAC7B,OAAO1B,GAAoB,mBAAmB0B,CAAG,CAAC,CACpD,CAFSpB,EAAAP,GAAA,oBAKT,SAASE,GAAeyB,EAAK,CAC3B,OAAO,mBAAmBxB,GAAkBwB,CAAG,CAAC,CAClD,CAFSpB,EAAAL,GAAA,kBAKT,SAASC,GAAkBwB,EAAK,CAC9B,OAAOA,EAAI,QAAQ,KAAM,IAAI,EAAE,QAAQ,MAAO,IAAI,CACpD,CAFSpB,EAAAJ,GAAA,qBAKT,SAASF,GAAoB0B,EAAK,CAChC,OAAOA,EAAI,QAAQ,MAAO,GAAG,EAAE,QAAQ,MAAO,GAAG,CACnD,CAFSpB,EAAAN,GAAA,yBC5OT,IAAAkD,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAO,KAEXD,GAAO,QAAUE,GAEjB,SAASA,GAAaC,EAAK,CACzBF,GAAK,KAAKE,EAAK,IAAI,CACrB,CAFSC,EAAAF,GAAA,kBCNT,IAAAG,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAWD,GAAO,QAAU,SAAUE,EAAQC,EAAMC,EAAI,CAEtD,OAAOD,GAAQ,aACjBC,EAAKD,EACLA,EAAO,CAAC,GAGVC,EAAKD,EAAK,IAAMC,EAChB,IAAIC,EAAO,OAAOD,GAAM,WAAcA,EAAKA,EAAG,KAAO,UAAW,CAAC,EAC7DE,EAAOF,EAAG,MAAQ,UAAW,CAAC,EAElCG,GAAUJ,EAAME,EAAKC,EAAMJ,EAAQ,GAAIA,CAAM,CAC/C,EAGAD,GAAS,SAAW,CAClB,gBAAiB,GACjB,MAAO,GACP,SAAU,GACV,qBAAsB,GACtB,cAAe,GACf,IAAK,EACP,EAEAA,GAAS,cAAgB,CACvB,MAAO,GACP,MAAO,GACP,MAAO,GACP,MAAO,EACT,EAEAA,GAAS,cAAgB,CACvB,YAAa,GACb,WAAY,GACZ,kBAAmB,GACnB,aAAc,EAChB,EAEAA,GAAS,aAAe,CACtB,QAAS,GACT,KAAM,GACN,MAAO,GACP,SAAU,GACV,QAAS,GACT,QAAS,GACT,iBAAkB,GAClB,iBAAkB,GAClB,WAAY,GACZ,UAAW,GACX,UAAW,GACX,QAAS,GACT,OAAQ,GACR,SAAU,GACV,SAAU,GACV,YAAa,GACb,cAAe,GACf,cAAe,EACjB,EAGA,SAASM,GAAUJ,EAAME,EAAKC,EAAMJ,EAAQM,EAASC,EAAYC,EAAeC,EAAeC,EAAcC,EAAU,CACrH,GAAIX,GAAU,OAAOA,GAAU,UAAY,CAAC,MAAM,QAAQA,CAAM,EAAG,CACjEG,EAAIH,EAAQM,EAASC,EAAYC,EAAeC,EAAeC,EAAcC,CAAQ,EACrF,QAASC,KAAOZ,EAAQ,CACtB,IAAIa,EAAMb,EAAOY,CAAG,EACpB,GAAI,MAAM,QAAQC,CAAG,GACnB,GAAID,KAAOb,GAAS,cAClB,QAASe,EAAE,EAAGA,EAAED,EAAI,OAAQC,IAC1BT,GAAUJ,EAAME,EAAKC,EAAMS,EAAIC,CAAC,EAAGR,EAAU,IAAMM,EAAM,IAAME,EAAGP,EAAYD,EAASM,EAAKZ,EAAQc,CAAC,UAEhGF,KAAOb,GAAS,eACzB,GAAIc,GAAO,OAAOA,GAAO,SACvB,QAASE,KAAQF,EACfR,GAAUJ,EAAME,EAAKC,EAAMS,EAAIE,CAAI,EAAGT,EAAU,IAAMM,EAAM,IAAMI,GAAcD,CAAI,EAAGR,EAAYD,EAASM,EAAKZ,EAAQe,CAAI,OAExHH,KAAOb,GAAS,UAAaE,EAAK,SAAW,EAAEW,KAAOb,GAAS,gBACxEM,GAAUJ,EAAME,EAAKC,EAAMS,EAAKP,EAAU,IAAMM,EAAKL,EAAYD,EAASM,EAAKZ,CAAM,CAEzF,CACAI,EAAKJ,EAAQM,EAASC,EAAYC,EAAeC,EAAeC,EAAcC,CAAQ,CACxF,CACF,CArBSM,EAAAZ,GAAA,aAwBT,SAASW,GAAcE,EAAK,CAC1B,OAAOA,EAAI,QAAQ,KAAM,IAAI,EAAE,QAAQ,MAAO,IAAI,CACpD,CAFSD,EAAAD,GAAA,mBCtFT,IAAAG,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAM,KACNC,GAAQ,KACRC,GAAO,KACPC,GAAe,KACfC,GAAW,KAEfL,GAAO,QAAUM,GAEjBA,GAAQ,YAAcC,GACtBD,GAAQ,SAAWE,GACnBF,GAAQ,IAAMG,GACdH,GAAQ,IAAMI,GACdJ,GAAQ,UAAYK,GACpBL,GAAQ,OAASM,GAUjB,SAASN,GAAQO,EAASC,EAAMC,EAAK,CAEnC,IAAIC,EAAS,KAAK,MAAMD,CAAG,EAC3B,GAAI,OAAOC,GAAU,SACnB,GAAI,KAAK,MAAMA,CAAM,EAAGA,EAAS,KAAK,MAAMA,CAAM,MAC7C,QAAOV,GAAQ,KAAK,KAAMO,EAASC,EAAME,CAAM,EAItD,GADAA,EAASA,GAAU,KAAK,SAASD,CAAG,EAChCC,aAAkBZ,GACpB,OAAOO,GAAUK,EAAO,OAAQ,KAAK,MAAM,UAAU,EAC3CA,EAAO,OACPA,EAAO,UAAY,KAAK,SAASA,CAAM,EAGnD,IAAIC,EAAML,GAAc,KAAK,KAAME,EAAMC,CAAG,EACxCG,EAAQC,EAAGC,EACf,OAAIH,IACFC,EAASD,EAAI,OACbH,EAAOG,EAAI,KACXG,EAASH,EAAI,QAGXC,aAAkBd,GACpBe,EAAID,EAAO,UAAYL,EAAQ,KAAK,KAAMK,EAAO,OAAQJ,EAAM,OAAWM,CAAM,EACvEF,IAAW,SACpBC,EAAIR,GAAUO,EAAQ,KAAK,MAAM,UAAU,EACrCA,EACAL,EAAQ,KAAK,KAAMK,EAAQJ,EAAM,OAAWM,CAAM,GAGnDD,CACT,CAhCSE,EAAAf,GAAA,WA0CT,SAASM,GAAcE,EAAMC,EAAK,CAEhC,IAAIO,EAAIrB,GAAI,MAAMc,CAAG,EACjBQ,EAAUC,GAAaF,CAAC,EACxBF,EAASZ,GAAY,KAAK,OAAOM,EAAK,MAAM,CAAC,EACjD,GAAI,OAAO,KAAKA,EAAK,MAAM,EAAE,SAAW,GAAKS,IAAYH,EAAQ,CAC/D,IAAIK,EAAKlB,GAAYgB,CAAO,EACxBP,EAAS,KAAK,MAAMS,CAAE,EAC1B,GAAI,OAAOT,GAAU,SACnB,OAAOU,GAAiB,KAAK,KAAMZ,EAAME,EAAQM,CAAC,EAC7C,GAAIN,aAAkBZ,GACtBY,EAAO,UAAU,KAAK,SAASA,CAAM,EAC1CF,EAAOE,UAEPA,EAAS,KAAK,SAASS,CAAE,EACrBT,aAAkBZ,GAAc,CAElC,GADKY,EAAO,UAAU,KAAK,SAASA,CAAM,EACtCS,GAAMlB,GAAYQ,CAAG,EACvB,MAAO,CAAE,OAAQC,EAAQ,KAAMF,EAAM,OAAQM,CAAO,EACtDN,EAAOE,CACT,KACE,QAGJ,GAAI,CAACF,EAAK,OAAQ,OAClBM,EAASZ,GAAY,KAAK,OAAOM,EAAK,MAAM,CAAC,CAC/C,CACA,OAAOa,GAAe,KAAK,KAAML,EAAGF,EAAQN,EAAK,OAAQA,CAAI,CAC/D,CA5BSO,EAAAT,GAAA,iBAgCT,SAASc,GAAiBZ,EAAMC,EAAKa,EAAW,CAE9C,IAAIX,EAAML,GAAc,KAAK,KAAME,EAAMC,CAAG,EAC5C,GAAIE,EAAK,CACP,IAAIC,EAASD,EAAI,OACbG,EAASH,EAAI,OACjBH,EAAOG,EAAI,KACX,IAAIQ,EAAK,KAAK,OAAOP,CAAM,EAC3B,OAAIO,IAAIL,EAASX,GAAWW,EAAQK,CAAE,GAC/BE,GAAe,KAAK,KAAMC,EAAWR,EAAQF,EAAQJ,CAAI,CAClE,CACF,CAXSO,EAAAK,GAAA,oBAcT,IAAIG,GAAuB1B,GAAK,OAAO,CAAC,aAAc,oBAAqB,OAAQ,eAAgB,aAAa,CAAC,EAEjH,SAASwB,GAAeC,EAAWR,EAAQF,EAAQJ,EAAM,CAGvD,GADAc,EAAU,SAAWA,EAAU,UAAY,GACvCA,EAAU,SAAS,MAAM,EAAE,CAAC,GAAK,IAGrC,SAFIE,EAAQF,EAAU,SAAS,MAAM,GAAG,EAE/BG,EAAI,EAAGA,EAAID,EAAM,OAAQC,IAAK,CACrC,IAAIC,EAAOF,EAAMC,CAAC,EAClB,GAAIC,EAAM,CAGR,GAFAA,EAAO7B,GAAK,iBAAiB6B,CAAI,EACjCd,EAASA,EAAOc,CAAI,EAChBd,IAAW,OAAW,MAC1B,IAAIO,EACJ,GAAI,CAACI,GAAqBG,CAAI,IAC5BP,EAAK,KAAK,OAAOP,CAAM,EACnBO,IAAIL,EAASX,GAAWW,EAAQK,CAAE,GAClCP,EAAO,MAAM,CACf,IAAIe,EAAOxB,GAAWW,EAAQF,EAAO,IAAI,EACrCD,EAAML,GAAc,KAAK,KAAME,EAAMmB,CAAI,EACzChB,IACFC,EAASD,EAAI,OACbH,EAAOG,EAAI,KACXG,EAASH,EAAI,OAEjB,CAEJ,CACF,CACA,GAAIC,IAAW,QAAaA,IAAWJ,EAAK,OAC1C,MAAO,CAAE,OAAQI,EAAQ,KAAMJ,EAAM,OAAQM,CAAO,EACxD,CA9BSC,EAAAM,GAAA,kBAiCT,IAAIO,GAAiB/B,GAAK,OAAO,CAC/B,OAAQ,SAAU,UAClB,YAAa,YACb,gBAAiB,gBACjB,WAAY,WACZ,UAAW,UACX,cAAe,aACf,WAAY,MACd,CAAC,EACD,SAASQ,GAAUO,EAAQiB,EAAO,CAChC,GAAIA,IAAU,GAAO,MAAO,GAC5B,GAAIA,IAAU,QAAaA,IAAU,GAAM,OAAOC,GAAWlB,CAAM,EAC9D,GAAIiB,EAAO,OAAOE,GAAUnB,CAAM,GAAKiB,CAC9C,CAJSd,EAAAV,GAAA,aAOT,SAASyB,GAAWlB,EAAQ,CAC1B,IAAIoB,EACJ,GAAI,MAAM,QAAQpB,CAAM,GACtB,QAASa,EAAE,EAAGA,EAAEb,EAAO,OAAQa,IAE7B,GADAO,EAAOpB,EAAOa,CAAC,EACX,OAAOO,GAAQ,UAAY,CAACF,GAAWE,CAAI,EAAG,MAAO,OAG3D,SAASC,KAAOrB,EAGd,GAFIqB,GAAO,SACXD,EAAOpB,EAAOqB,CAAG,EACb,OAAOD,GAAQ,UAAY,CAACF,GAAWE,CAAI,GAAG,MAAO,GAG7D,MAAO,EACT,CAfSjB,EAAAe,GAAA,cAkBT,SAASC,GAAUnB,EAAQ,CACzB,IAAIsB,EAAQ,EAAGF,EACf,GAAI,MAAM,QAAQpB,CAAM,GACtB,QAASa,EAAE,EAAGA,EAAEb,EAAO,OAAQa,IAG7B,GAFAO,EAAOpB,EAAOa,CAAC,EACX,OAAOO,GAAQ,WAAUE,GAASH,GAAUC,CAAI,GAChDE,GAAS,IAAU,MAAO,SAGhC,SAASD,KAAOrB,EAAQ,CACtB,GAAIqB,GAAO,OAAQ,MAAO,KAC1B,GAAIL,GAAeK,CAAG,EACpBC,YAEAF,EAAOpB,EAAOqB,CAAG,EACb,OAAOD,GAAQ,WAAUE,GAASH,GAAUC,CAAI,EAAI,GACpDE,GAAS,IAAU,MAAO,IAElC,CAEF,OAAOA,CACT,CArBSnB,EAAAgB,GAAA,aAwBT,SAAS7B,GAAYiB,EAAIgB,EAAW,CAC9BA,IAAc,KAAOhB,EAAKlB,GAAYkB,CAAE,GAC5C,IAAIH,EAAIrB,GAAI,MAAMwB,CAAE,EACpB,OAAOD,GAAaF,CAAC,CACvB,CAJSD,EAAAb,GAAA,eAOT,SAASgB,GAAaF,EAAG,CACvB,OAAOrB,GAAI,UAAUqB,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,EAAI,GAC1C,CAFSD,EAAAG,GAAA,gBAKT,IAAIkB,GAAsB,QAC1B,SAASnC,GAAYkB,EAAI,CACvB,OAAOA,EAAKA,EAAG,QAAQiB,GAAqB,EAAE,EAAI,EACpD,CAFSrB,EAAAd,GAAA,eAKT,SAASE,GAAWW,EAAQK,EAAI,CAC9B,OAAAA,EAAKlB,GAAYkB,CAAE,EACZxB,GAAI,QAAQmB,EAAQK,CAAE,CAC/B,CAHSJ,EAAAZ,GAAA,cAOT,SAASC,GAAWQ,EAAQ,CAC1B,IAAIyB,EAAWpC,GAAY,KAAK,OAAOW,CAAM,CAAC,EAC1C0B,EAAU,CAAC,GAAID,CAAQ,EACvBE,EAAY,CAAC,GAAIrC,GAAYmC,EAAU,EAAK,CAAC,EAC7CG,EAAY,CAAC,EACbC,EAAO,KAEX,OAAA1C,GAASa,EAAQ,CAAC,QAAS,EAAI,EAAG,SAAS8B,EAAKC,EAASC,EAAYC,EAAeC,EAAeC,EAAcC,EAAU,CACzH,GAAIL,IAAY,GAChB,KAAIxB,EAAKsB,EAAK,OAAOC,CAAG,EACpB5B,EAASwB,EAAQO,CAAa,EAC9BI,EAAWV,EAAUM,CAAa,EAAI,IAAMC,EAIhD,GAHIE,IAAa,SACfC,GAAY,KAAO,OAAOD,GAAY,SAAWA,EAAWnD,GAAK,eAAemD,CAAQ,IAEtF,OAAO7B,GAAM,SAAU,CACzBA,EAAKL,EAASb,GAAYa,EAASnB,GAAI,QAAQmB,EAAQK,CAAE,EAAIA,CAAE,EAE/D,IAAIT,EAAS+B,EAAK,MAAMtB,CAAE,EAE1B,GADI,OAAOT,GAAU,WAAUA,EAAS+B,EAAK,MAAM/B,CAAM,GACrDA,GAAUA,EAAO,QACnB,GAAI,CAACd,GAAM8C,EAAKhC,EAAO,MAAM,EAC3B,MAAM,IAAI,MAAM,OAASS,EAAK,oCAAoC,UAC3DA,GAAMlB,GAAYgD,CAAQ,EACnC,GAAI9B,EAAG,CAAC,GAAK,IAAK,CAChB,GAAIqB,EAAUrB,CAAE,GAAK,CAACvB,GAAM8C,EAAKF,EAAUrB,CAAE,CAAC,EAC5C,MAAM,IAAI,MAAM,OAASA,EAAK,oCAAoC,EACpEqB,EAAUrB,CAAE,EAAIuB,CAClB,MACED,EAAK,MAAMtB,CAAE,EAAI8B,CAGvB,CACAX,EAAQK,CAAO,EAAI7B,EACnByB,EAAUI,CAAO,EAAIM,EACvB,CAAC,EAEMT,CACT,CAtCSzB,EAAAX,GAAA,gBCvOT,IAAA8C,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAU,KAEdD,GAAO,QAAU,CACf,WAAYE,GAAcC,EAAe,EACzC,WAAYD,GAAcE,EAAe,CAC3C,EAGA,SAASD,GAAgBE,EAAQ,CAC/B,KAAK,QAAU,oBACf,KAAK,OAASA,EACd,KAAK,IAAM,KAAK,WAAa,EAC/B,CAJSC,EAAAH,GAAA,mBAOTC,GAAgB,QAAU,SAAUG,EAAQC,EAAK,CAC/C,MAAO,2BAA8BA,EAAM,YAAcD,CAC3D,EAGA,SAASH,GAAgBG,EAAQC,EAAKC,EAAS,CAC7C,KAAK,QAAUA,GAAWL,GAAgB,QAAQG,EAAQC,CAAG,EAC7D,KAAK,WAAaP,GAAQ,IAAIM,EAAQC,CAAG,EACzC,KAAK,cAAgBP,GAAQ,YAAYA,GAAQ,SAAS,KAAK,UAAU,CAAC,CAC5E,CAJSK,EAAAF,GAAA,mBAOT,SAASF,GAAcQ,EAAU,CAC/B,OAAAA,EAAS,UAAY,OAAO,OAAO,MAAM,SAAS,EAClDA,EAAS,UAAU,YAAcA,EAC1BA,CACT,CAJSJ,EAAAJ,GAAA,mBC7BT,IAAAS,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEAA,GAAO,QAAU,SAAUC,EAAMC,EAAM,CAC9BA,IAAMA,EAAO,CAAC,GACf,OAAOA,GAAS,aAAYA,EAAO,CAAE,IAAKA,CAAK,GACnD,IAAIC,EAAU,OAAOD,EAAK,QAAW,UAAaA,EAAK,OAAS,GAE5DE,EAAMF,EAAK,KAAQ,SAAUG,EAAG,CAChC,OAAO,SAAUC,EAAM,CACnB,OAAO,SAAUC,EAAGC,EAAG,CACnB,IAAIC,EAAO,CAAE,IAAKF,EAAG,MAAOD,EAAKC,CAAC,CAAE,EAChCG,EAAO,CAAE,IAAKF,EAAG,MAAOF,EAAKE,CAAC,CAAE,EACpC,OAAOH,EAAEI,EAAMC,CAAI,CACvB,CACJ,CACJ,EAAGR,EAAK,GAAG,EAEPS,EAAO,CAAC,EACZ,OAAQC,EAAA,SAASC,EAAWP,EAAM,CAK9B,GAJIA,GAAQA,EAAK,QAAU,OAAOA,EAAK,QAAW,aAC9CA,EAAOA,EAAK,OAAO,GAGnBA,IAAS,OACb,IAAI,OAAOA,GAAQ,SAAU,OAAO,SAASA,CAAI,EAAI,GAAKA,EAAO,OACjE,GAAI,OAAOA,GAAS,SAAU,OAAO,KAAK,UAAUA,CAAI,EAExD,IAAIQ,EAAGC,EACP,GAAI,MAAM,QAAQT,CAAI,EAAG,CAErB,IADAS,EAAM,IACDD,EAAI,EAAGA,EAAIR,EAAK,OAAQQ,IACrBA,IAAGC,GAAO,KACdA,GAAOF,EAAUP,EAAKQ,CAAC,CAAC,GAAK,OAEjC,OAAOC,EAAM,GACjB,CAEA,GAAIT,IAAS,KAAM,MAAO,OAE1B,GAAIK,EAAK,QAAQL,CAAI,IAAM,GAAI,CAC3B,GAAIH,EAAQ,OAAO,KAAK,UAAU,WAAW,EAC7C,MAAM,IAAI,UAAU,uCAAuC,CAC/D,CAEA,IAAIa,EAAYL,EAAK,KAAKL,CAAI,EAAI,EAC9BW,EAAO,OAAO,KAAKX,CAAI,EAAE,KAAKF,GAAOA,EAAIE,CAAI,CAAC,EAElD,IADAS,EAAM,GACDD,EAAI,EAAGA,EAAIG,EAAK,OAAQH,IAAK,CAC9B,IAAII,EAAMD,EAAKH,CAAC,EACZK,EAAQN,EAAUP,EAAKY,CAAG,CAAC,EAE1BC,IACDJ,IAAKA,GAAO,KAChBA,GAAO,KAAK,UAAUG,CAAG,EAAI,IAAMC,EACvC,CACA,OAAAR,EAAK,OAAOK,EAAW,CAAC,EACjB,IAAMD,EAAM,IACvB,EAvCQ,aAuCLd,CAAI,CACX,IC1DA,IAAAmB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAA2BC,EAAIC,EAAUC,EAAW,CACnE,IAAIC,EAAM,GACNC,EAASJ,EAAG,OAAO,SAAW,GAChCK,EAAeL,EAAG,KAAK,qBAAqBA,EAAG,OAAQA,EAAG,MAAM,IAAK,MAAM,EAC3EM,EAAMN,EAAG,KAAK,OAAOA,EAAG,MAAM,EAChC,GAAIA,EAAG,KAAK,eAAgB,CAC1B,IAAIO,EAAcP,EAAG,KAAK,mBAAmBA,EAAG,OAAQA,EAAG,MAAM,QAAQ,EACzE,GAAIO,EAAa,CACf,IAAIC,EAAe,oBAAsBD,EACzC,GAAIP,EAAG,KAAK,iBAAmB,MAAOA,EAAG,OAAO,KAAKQ,CAAY,MAC5D,OAAM,IAAI,MAAMA,CAAY,CACnC,CACF,CAYA,GAXIR,EAAG,QACLG,GAAO,mBACHC,IACFJ,EAAG,MAAQ,GACXG,GAAO,UAETA,GAAO,sFACHG,IAAQN,EAAG,KAAK,YAAcA,EAAG,KAAK,eACxCG,GAAO,KAAO,iBAAoBG,EAAM,OAAS,MAGjD,OAAON,EAAG,QAAU,WAAa,EAAEK,GAAgBL,EAAG,OAAO,MAAO,CACtE,IAAIC,EAAW,eACXQ,EAAOT,EAAG,MACVU,EAAWV,EAAG,UACdW,EAAUX,EAAG,OAAOC,CAAQ,EAC5BW,EAAcZ,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DY,EAAiBb,EAAG,cAAgB,IAAMC,EAC1Ca,EAAgB,CAACd,EAAG,KAAK,UACzBe,EACAC,EAAQ,QAAUN,GAAY,IAC9BO,EAAS,QAAUR,EACvB,GAAIT,EAAG,SAAW,GAAO,CACnBA,EAAG,MACLc,EAAgB,GAEhBX,GAAO,QAAWc,EAAU,aAE9B,IAAIC,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKf,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,iBAAoBY,GAAiB,gBAAkB,oCAA0Cf,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAea,CAAc,EAAK,iBACnLb,EAAG,KAAK,WAAa,KACvBG,GAAO,0CAELH,EAAG,KAAK,UACVG,GAAO,mDAAsDH,EAAG,WAAc,YAAegB,EAAS,KAExGb,GAAO,OAEPA,GAAO,OAET,IAAIgB,EAAQhB,EACZA,EAAMe,EAAW,IAAI,EACjB,CAAClB,EAAG,eAAiBc,EAEnBd,EAAG,MACLG,GAAO,+BAAkCgB,EAAS,OAElDhB,GAAO,uBAA0BgB,EAAS,oBAG5ChB,GAAO,cAAiBgB,EAAS,8EAErC,MACMnB,EAAG,MACDI,EACFD,GAAO,iBAEPA,GAAO,yCAGTA,GAAO,QAAWc,EAAU,YAGhC,OAAIjB,EAAG,QACLG,GAAO,yBAEFA,CACT,CACA,GAAIH,EAAG,MAAO,CACZ,IAAIoB,EAAOpB,EAAG,MACZS,EAAOT,EAAG,MAAQ,EAClBU,EAAWV,EAAG,UAAY,EAC1BgB,EAAQ,OAKV,GAJAhB,EAAG,OAASA,EAAG,QAAQ,SAASA,EAAG,KAAK,OAAOA,EAAG,KAAK,MAAM,CAAC,EAC9DA,EAAG,OAASA,EAAG,QAAUA,EAAG,OAC5B,OAAOA,EAAG,MACVA,EAAG,YAAc,CAAC,EAAE,EAChBA,EAAG,OAAO,UAAY,QAAaA,EAAG,KAAK,aAAeA,EAAG,KAAK,eAAgB,CACpF,IAAIqB,EAAc,wCAClB,GAAIrB,EAAG,KAAK,iBAAmB,MAAOA,EAAG,OAAO,KAAKqB,CAAW,MAC3D,OAAM,IAAI,MAAMA,CAAW,CAClC,CACAlB,GAAO,wBACPA,GAAO,wBACPA,GAAO,gDACT,KAAO,CACL,IAAIM,EAAOT,EAAG,MACZU,EAAWV,EAAG,UACdgB,EAAQ,QAAUN,GAAY,IAEhC,GADIJ,IAAKN,EAAG,OAASA,EAAG,QAAQ,IAAIA,EAAG,OAAQM,CAAG,GAC9CF,GAAU,CAACJ,EAAG,MAAO,MAAM,IAAI,MAAM,6BAA6B,EACtEG,GAAO,aAAgBM,EAAQ,YACjC,CACA,IAAIQ,EAAS,QAAUR,EACrBK,EAAgB,CAACd,EAAG,KAAK,UACzBsB,EAAkB,GAClBC,GAAkB,GAChBR,EACAS,EAAcxB,EAAG,OAAO,KAC1ByB,GAAe,MAAM,QAAQD,CAAW,EAa1C,GAZIA,GAAexB,EAAG,KAAK,UAAYA,EAAG,OAAO,WAAa,KACxDyB,GACED,EAAY,QAAQ,MAAM,GAAK,KAAIA,EAAcA,EAAY,OAAO,MAAM,GACrEA,GAAe,SACxBA,EAAc,CAACA,EAAa,MAAM,EAClCC,GAAe,KAGfA,IAAgBD,EAAY,QAAU,IACxCA,EAAcA,EAAY,CAAC,EAC3BC,GAAe,IAEbzB,EAAG,OAAO,MAAQK,EAAc,CAClC,GAAIL,EAAG,KAAK,YAAc,OACxB,MAAM,IAAI,MAAM,qDAAuDA,EAAG,cAAgB,2BAA2B,EAC5GA,EAAG,KAAK,aAAe,KAChCK,EAAe,GACfL,EAAG,OAAO,KAAK,6CAA+CA,EAAG,cAAgB,GAAG,EAExF,CAIA,GAHIA,EAAG,OAAO,UAAYA,EAAG,KAAK,WAChCG,GAAO,IAAOH,EAAG,MAAM,IAAI,SAAS,KAAKA,EAAI,UAAU,GAErDwB,EAAa,CACf,GAAIxB,EAAG,KAAK,YACV,IAAI0B,EAAiB1B,EAAG,KAAK,cAAcA,EAAG,KAAK,YAAawB,CAAW,EAE7E,IAAIG,EAAc3B,EAAG,MAAM,MAAMwB,CAAW,EAC5C,GAAIE,GAAkBD,IAAgBE,IAAgB,IAASA,GAAe,CAACC,GAAgBD,CAAW,EAAI,CAC5G,IAAIf,EAAcZ,EAAG,WAAa,QAChCa,EAAiBb,EAAG,cAAgB,QAClCY,EAAcZ,EAAG,WAAa,QAChCa,EAAiBb,EAAG,cAAgB,QACpC6B,EAAUJ,GAAe,iBAAmB,gBAE9C,GADAtB,GAAO,QAAWH,EAAG,KAAK6B,CAAO,EAAEL,EAAaR,EAAOhB,EAAG,KAAK,cAAe,EAAI,EAAK,OACnF0B,EAAgB,CAClB,IAAII,EAAY,WAAarB,EAC3BsB,GAAW,UAAYtB,EACzBN,GAAO,QAAW2B,EAAa,aAAgBd,EAAS,SAAYe,GAAY,iBAC5E/B,EAAG,KAAK,aAAe,UACzBG,GAAO,QAAW2B,EAAa,iCAAsCd,EAAS,QAAWA,EAAS,mBAAsBA,EAAS,MAASA,EAAS,QAAWc,EAAa,aAAgBd,EAAS,SAAYhB,EAAG,KAAK,cAAcA,EAAG,OAAO,KAAMgB,EAAOhB,EAAG,KAAK,aAAa,EAAK,KAAQ+B,GAAY,MAASf,EAAS,QAE/Tb,GAAO,QAAW4B,GAAY,qBAC9B,IAAIC,GAAON,EACX,GAAIM,GAGF,QAFIC,GAAOC,GAAK,GACdC,GAAKH,GAAK,OAAS,EACdE,GAAKC,IACVF,GAAQD,GAAKE,IAAM,CAAC,EAChBD,IAAS,SACX9B,GAAO,aAAgB2B,EAAa,mBAAwBA,EAAa,kBAAuBC,GAAY,WAAgBf,EAAS,cAAiBA,EAAS,cAAiBe,GAAY,UACnLE,IAAS,UAAYA,IAAS,WACvC9B,GAAO,aAAgB2B,EAAa,oBAAyBd,EAAS,iBAAoBc,EAAa,mBAAwBd,EAAS,OAAUA,EAAS,QAAWA,EAAS,IAC3KiB,IAAS,YACX9B,GAAO,SAAYa,EAAS,SAE9Bb,GAAO,MAAS4B,GAAY,OAAUf,EAAS,MACtCiB,IAAS,UAClB9B,GAAO,aAAgBa,EAAS,mBAAwBA,EAAS,aAAgBA,EAAS,cAAiBe,GAAY,sBAAyBf,EAAS,kBAAuBA,EAAS,WAAce,GAAY,YAC1ME,IAAS,OAClB9B,GAAO,aAAgBa,EAAS,cAAmBA,EAAS,aAAgBA,EAAS,eAAkBe,GAAY,YAC1G/B,EAAG,KAAK,aAAe,SAAWiC,IAAS,UACpD9B,GAAO,aAAgB2B,EAAa,mBAAwBA,EAAa,mBAAwBA,EAAa,oBAAyBd,EAAS,aAAgBe,GAAY,OAAUf,EAAS,OAIrMb,GAAO,aACP,IAAIe,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKf,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,iBAAoBY,GAAiB,QAAU,oCAA0Cf,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAea,CAAc,EAAK,uBAC3KY,GACFtB,GAAO,GAAMqB,EAAY,KAAK,GAAG,EAEjCrB,GAAO,GAAMqB,EAEfrB,GAAO,OACHH,EAAG,KAAK,WAAa,KACvBG,GAAO,0BACHsB,GACFtB,GAAO,GAAMqB,EAAY,KAAK,GAAG,EAEjCrB,GAAO,GAAMqB,EAEfrB,GAAO,MAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCS,EAAe,mCAAsCZ,EAAG,WAAc,YAAegB,EAAS,KAEvIb,GAAO,OAEPA,GAAO,OAET,IAAIgB,EAAQhB,EACZA,EAAMe,EAAW,IAAI,EACjB,CAAClB,EAAG,eAAiBc,EAEnBd,EAAG,MACLG,GAAO,+BAAkCgB,EAAS,OAElDhB,GAAO,uBAA0BgB,EAAS,oBAG5ChB,GAAO,cAAiBgB,EAAS,+EAEnChB,GAAO,UAAa4B,GAAY,sBAChC,IAAIK,GAAc1B,EAAW,QAAWA,EAAW,GAAM,IAAM,aAC7D2B,GAAsB3B,EAAWV,EAAG,YAAYU,CAAQ,EAAI,qBAC9DP,GAAO,IAAOa,EAAS,MAASe,GAAY,KACvCrB,IACHP,GAAO,OAAUiC,GAAe,mBAElCjC,GAAO,IAAOiC,GAAe,IAAOC,GAAuB,OAAUN,GAAY,MACnF,KAAO,CACL,IAAIb,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKf,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,iBAAoBY,GAAiB,QAAU,oCAA0Cf,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAea,CAAc,EAAK,uBAC3KY,GACFtB,GAAO,GAAMqB,EAAY,KAAK,GAAG,EAEjCrB,GAAO,GAAMqB,EAEfrB,GAAO,OACHH,EAAG,KAAK,WAAa,KACvBG,GAAO,0BACHsB,GACFtB,GAAO,GAAMqB,EAAY,KAAK,GAAG,EAEjCrB,GAAO,GAAMqB,EAEfrB,GAAO,MAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCS,EAAe,mCAAsCZ,EAAG,WAAc,YAAegB,EAAS,KAEvIb,GAAO,OAEPA,GAAO,OAET,IAAIgB,EAAQhB,EACZA,EAAMe,EAAW,IAAI,EACjB,CAAClB,EAAG,eAAiBc,EAEnBd,EAAG,MACLG,GAAO,+BAAkCgB,EAAS,OAElDhB,GAAO,uBAA0BgB,EAAS,oBAG5ChB,GAAO,cAAiBgB,EAAS,8EAErC,CACAhB,GAAO,KACT,CACF,CACA,GAAIH,EAAG,OAAO,MAAQ,CAACK,EACrBF,GAAO,IAAOH,EAAG,MAAM,IAAI,KAAK,KAAKA,EAAI,MAAM,EAAK,IAChDc,IACFX,GAAO,qBACHiB,EACFjB,GAAO,IAEPA,GAAO,QAAWM,EAEpBN,GAAO,OACPoB,IAAmB,SAEhB,CACL,IAAIe,GAAOtC,EAAG,MACd,GAAIsC,IAGF,QAFIX,EAAaY,GAAK,GACpBC,GAAKF,GAAK,OAAS,EACdC,GAAKC,IAEV,GADAb,EAAcW,GAAKC,IAAM,CAAC,EACtBX,GAAgBD,CAAW,EAAG,CAIhC,GAHIA,EAAY,OACdxB,GAAO,QAAWH,EAAG,KAAK,cAAc2B,EAAY,KAAMX,EAAOhB,EAAG,KAAK,aAAa,EAAK,QAEzFA,EAAG,KAAK,aACV,GAAI2B,EAAY,MAAQ,UAAY3B,EAAG,OAAO,WAAY,CACxD,IAAIW,EAAUX,EAAG,OAAO,WACtByC,GAAc,OAAO,KAAK9B,CAAO,EAC/B+B,EAAOD,GACX,GAAIC,EAGF,QAFIC,EAAcC,EAAK,GACrBC,EAAKH,EAAK,OAAS,EACdE,EAAKC,GAAI,CACdF,EAAeD,EAAKE,GAAM,CAAC,EAC3B,IAAIE,GAAOnC,EAAQgC,CAAY,EAC/B,GAAIG,GAAK,UAAY,OAAW,CAC9B,IAAIC,GAAY/B,EAAQhB,EAAG,KAAK,YAAY2C,CAAY,EACxD,GAAI3C,EAAG,eACL,GAAIA,EAAG,KAAK,eAAgB,CAC1B,IAAIqB,EAAc,2BAA6B0B,GAC/C,GAAI/C,EAAG,KAAK,iBAAmB,MAAOA,EAAG,OAAO,KAAKqB,CAAW,MAC3D,OAAM,IAAI,MAAMA,CAAW,CAClC,OAEAlB,GAAO,QAAW4C,GAAa,kBAC3B/C,EAAG,KAAK,aAAe,UACzBG,GAAO,OAAU4C,GAAa,gBAAmBA,GAAa,YAEhE5C,GAAO,MAAS4C,GAAa,MACzB/C,EAAG,KAAK,aAAe,SACzBG,GAAO,IAAOH,EAAG,WAAW8C,GAAK,OAAO,EAAK,IAE7C3C,GAAO,IAAO,KAAK,UAAU2C,GAAK,OAAO,EAAK,IAEhD3C,GAAO,IAEX,CACF,CAEJ,SAAWwB,EAAY,MAAQ,SAAW,MAAM,QAAQ3B,EAAG,OAAO,KAAK,EAAG,CACxE,IAAIgD,GAAOhD,EAAG,OAAO,MACrB,GAAIgD,IAGF,QAFIF,GAAMZ,GAAK,GACbe,GAAKD,GAAK,OAAS,EACdd,GAAKe,IAEV,GADAH,GAAOE,GAAKd,IAAM,CAAC,EACfY,GAAK,UAAY,OAAW,CAC9B,IAAIC,GAAY/B,EAAQ,IAAMkB,GAAK,IACnC,GAAIlC,EAAG,eACL,GAAIA,EAAG,KAAK,eAAgB,CAC1B,IAAIqB,EAAc,2BAA6B0B,GAC/C,GAAI/C,EAAG,KAAK,iBAAmB,MAAOA,EAAG,OAAO,KAAKqB,CAAW,MAC3D,OAAM,IAAI,MAAMA,CAAW,CAClC,OAEAlB,GAAO,QAAW4C,GAAa,kBAC3B/C,EAAG,KAAK,aAAe,UACzBG,GAAO,OAAU4C,GAAa,gBAAmBA,GAAa,YAEhE5C,GAAO,MAAS4C,GAAa,MACzB/C,EAAG,KAAK,aAAe,SACzBG,GAAO,IAAOH,EAAG,WAAW8C,GAAK,OAAO,EAAK,IAE7C3C,GAAO,IAAO,KAAK,UAAU2C,GAAK,OAAO,EAAK,IAEhD3C,GAAO,IAEX,EAGN,EAEF,IAAI+C,GAAOvB,EAAY,MACvB,GAAIuB,IAGF,QAFIC,GAAOC,GAAK,GACdC,GAAKH,GAAK,OAAS,EACdE,GAAKC,IAEV,GADAF,GAAQD,GAAKE,IAAM,CAAC,EAChBE,GAAeH,EAAK,EAAG,CACzB,IAAII,GAAQJ,GAAM,KAAKnD,EAAImD,GAAM,QAASxB,EAAY,IAAI,EACtD4B,KACFpD,GAAO,IAAOoD,GAAS,IACnBzC,IACFQ,GAAmB,KAGzB,EAOJ,GAJIR,IACFX,GAAO,IAAOmB,EAAmB,IACjCA,EAAkB,IAEhBK,EAAY,OACdxB,GAAO,MACHqB,GAAeA,IAAgBG,EAAY,MAAQ,CAACD,GAAgB,CACtEvB,GAAO,WACP,IAAIS,EAAcZ,EAAG,WAAa,QAChCa,EAAiBb,EAAG,cAAgB,QAClCkB,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKf,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,iBAAoBY,GAAiB,QAAU,oCAA0Cf,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAea,CAAc,EAAK,uBAC3KY,GACFtB,GAAO,GAAMqB,EAAY,KAAK,GAAG,EAEjCrB,GAAO,GAAMqB,EAEfrB,GAAO,OACHH,EAAG,KAAK,WAAa,KACvBG,GAAO,0BACHsB,GACFtB,GAAO,GAAMqB,EAAY,KAAK,GAAG,EAEjCrB,GAAO,GAAMqB,EAEfrB,GAAO,MAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCS,EAAe,mCAAsCZ,EAAG,WAAc,YAAegB,EAAS,KAEvIb,GAAO,OAEPA,GAAO,OAET,IAAIgB,EAAQhB,EACZA,EAAMe,EAAW,IAAI,EACjB,CAAClB,EAAG,eAAiBc,EAEnBd,EAAG,MACLG,GAAO,+BAAkCgB,EAAS,OAElDhB,GAAO,uBAA0BgB,EAAS,oBAG5ChB,GAAO,cAAiBgB,EAAS,+EAEnChB,GAAO,KACT,CAEEW,IACFX,GAAO,mBACHiB,EACFjB,GAAO,IAEPA,GAAO,QAAWM,EAEpBN,GAAO,OACPoB,IAAmB,IAEvB,EAGN,CACIT,IACFX,GAAO,IAAOoB,GAAmB,KAE/BH,GACEhB,GACFD,GAAO,6CACPA,GAAO,+CAEPA,GAAO,+BACPA,GAAO,gCAETA,GAAO,wBAEPA,GAAO,QAAWc,EAAU,sBAAyBR,EAAQ,IAG/D,SAASmB,GAAgBD,GAAa,CAEpC,QADI6B,GAAQ7B,GAAY,MACf8B,EAAI,EAAGA,EAAID,GAAM,OAAQC,IAChC,GAAIH,GAAeE,GAAMC,CAAC,CAAC,EAAG,MAAO,EACzC,CAJS1D,EAAA6B,GAAA,mBAMT,SAAS0B,GAAeH,GAAO,CAC7B,OAAOnD,EAAG,OAAOmD,GAAM,OAAO,IAAM,QAAcA,GAAM,YAAcO,GAA2BP,EAAK,CACxG,CAFSpD,EAAAuD,GAAA,kBAIT,SAASI,GAA2BP,GAAO,CAEzC,QADIQ,GAAOR,GAAM,WACRM,EAAI,EAAGA,EAAIE,GAAK,OAAQF,IAC/B,GAAIzD,EAAG,OAAO2D,GAAKF,CAAC,CAAC,IAAM,OAAW,MAAO,EACjD,CAJS,OAAA1D,EAAA2D,GAAA,8BAKFvD,CACT,EAheiB,uBCDjB,IAAAyD,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAU,KACVC,GAAO,KACPC,GAAe,KACfC,GAAkB,KAElBC,GAAoB,KAMpBC,GAAaJ,GAAK,WAClBK,GAAQ,KAGRC,GAAkBL,GAAa,WAEnCH,GAAO,QAAUS,GAYjB,SAASA,GAAQC,EAAQC,EAAMC,EAAWC,EAAQ,CAGhD,IAAIC,EAAO,KACPC,EAAO,KAAK,MACZC,EAAS,CAAE,MAAU,EACrBC,EAAO,CAAC,EACRC,EAAW,CAAC,EACZC,EAAe,CAAC,EAChBC,EAAW,CAAC,EACZC,EAAe,CAAC,EAChBC,EAAc,CAAC,EAEnBX,EAAOA,GAAQ,CAAE,OAAQD,EAAQ,OAAQM,EAAQ,KAAMC,CAAK,EAE5D,IAAIM,EAAIC,GAAe,KAAK,KAAMd,EAAQC,EAAME,CAAM,EAClDY,EAAc,KAAK,cAAcF,EAAE,KAAK,EAC5C,GAAIA,EAAE,UAAW,OAAQE,EAAY,aAAeC,EAEpD,IAAIC,EAAU,KAAK,SACfC,EAAQ,KAAK,MAEjB,GAAI,CACF,IAAIC,EAAIC,EAAapB,EAAQC,EAAMC,EAAWC,CAAM,EACpDY,EAAY,SAAWI,EACvB,IAAIE,EAAKN,EAAY,aACrB,OAAIM,IACFA,EAAG,OAASF,EAAE,OACdE,EAAG,OAAS,KACZA,EAAG,KAAOF,EAAE,KACZE,EAAG,OAASF,EAAE,OACdE,EAAG,KAAOF,EAAE,KACZE,EAAG,OAASF,EAAE,OACVd,EAAK,aAAYgB,EAAG,OAASF,EAAE,SAE9BA,CACT,QAAE,CACAG,GAAa,KAAK,KAAMtB,EAAQC,EAAME,CAAM,CAC9C,CAGA,SAASa,GAAe,CAEtB,IAAIO,EAAWR,EAAY,SACvBS,EAASD,EAAS,MAAM,KAAM,SAAS,EAC3C,OAAAP,EAAa,OAASO,EAAS,OACxBC,CACT,CANSC,EAAAT,EAAA,gBAQT,SAASI,EAAaM,EAASC,EAAOzB,GAAWC,GAAQ,CACvD,IAAIyB,GAAS,CAACD,GAAUA,GAASA,EAAM,QAAUD,EACjD,GAAIC,EAAM,QAAU1B,EAAK,OACvB,OAAOF,GAAQ,KAAKK,EAAMsB,EAASC,EAAOzB,GAAWC,EAAM,EAE7D,IAAI0B,GAASH,EAAQ,SAAW,GAE5BI,GAAanC,GAAkB,CACjC,MAAO,GACP,OAAQ+B,EACR,OAAQE,GACR,OAAQzB,GACR,KAAMwB,EACN,WAAY,GACZ,cAAe,IACf,UAAW,KACX,gBAAiBlC,GAAa,WAC9B,MAAOyB,EACP,SAAUvB,GACV,KAAMH,GACN,QAASD,GACT,WAAYwC,EACZ,WAAYC,GACZ,WAAYC,EACZ,cAAeC,EACf,KAAM7B,EACN,QAASY,EACT,OAAQb,EAAK,OACb,KAAMA,CACR,CAAC,EAED0B,GAAaK,GAAK7B,EAAQ8B,EAAU,EAAID,GAAK3B,EAAU6B,EAAW,EACjDF,GAAKzB,EAAU4B,EAAW,EAAIH,GAAKvB,EAAa2B,EAAc,EAC9DT,GAEbzB,EAAK,cAAayB,GAAazB,EAAK,YAAYyB,GAAYJ,CAAO,GAEvE,IAAIH,GACJ,GAAI,CACF,IAAIiB,GAAe,IAAI,SACrB,OACA,QACA,UACA,OACA,SACA,WACA,cACA,QACA,aACA,kBACAV,EACF,EAEAP,GAAWiB,GACTpC,EACAc,EACAD,EACAhB,EACAK,EACAI,EACAE,EACAf,GACAD,GACAE,EACF,EAEAQ,EAAO,CAAC,EAAIiB,EACd,OAAQkB,GAAG,CACT,MAAArC,EAAK,OAAO,MAAM,yCAA0C0B,EAAU,EAChEW,EACR,CAEA,OAAAlB,GAAS,OAASG,EAClBH,GAAS,OAAS,KAClBA,GAAS,KAAOhB,EAChBgB,GAAS,OAASjB,EAClBiB,GAAS,KAAOK,GAASL,GAAWI,EAChCE,KAAQN,GAAS,OAAS,IAC1BlB,EAAK,aAAe,KACtBkB,GAAS,OAAS,CAChB,KAAMO,GACN,SAAUtB,EACV,SAAUE,CACZ,GAGKa,EACT,CAvFSE,EAAAL,EAAA,gBAyFT,SAASW,EAAW5B,EAAQuC,EAAKd,GAAQ,CACvCc,EAAMnD,GAAQ,IAAIY,EAAQuC,CAAG,EAC7B,IAAIC,GAAWpC,EAAKmC,CAAG,EACnBE,GAASC,GACb,GAAIF,KAAa,OACf,OAAAC,GAAUtC,EAAOqC,EAAQ,EACzBE,GAAU,UAAYF,GAAW,IAC1BG,EAAYF,GAASC,EAAO,EAErC,GAAI,CAACjB,IAAU3B,EAAK,KAAM,CACxB,IAAI8C,GAAY9C,EAAK,KAAKyC,CAAG,EAC7B,GAAIK,KAAc,OAChB,OAAAH,GAAU3C,EAAK,OAAO8C,EAAS,EAC/BF,GAAUG,EAAYN,EAAKE,EAAO,EAC3BE,EAAYF,GAASC,EAAO,CAEvC,CAEAA,GAAUG,EAAYN,CAAG,EACzB,IAAIvB,GAAI5B,GAAQ,KAAKa,EAAMgB,EAAcnB,EAAMyC,CAAG,EAClD,GAAIvB,KAAM,OAAW,CACnB,IAAI8B,GAAc/C,GAAaA,EAAUwC,CAAG,EACxCO,KACF9B,GAAI5B,GAAQ,UAAU0D,GAAa5C,EAAK,UAAU,EAC5C4C,GACAlD,GAAQ,KAAKK,EAAM6C,GAAahD,EAAMC,EAAWC,CAAM,EAEjE,CAEA,GAAIgB,KAAM,OACR+B,GAAeR,CAAG,MAElB,QAAAS,EAAgBT,EAAKvB,EAAC,EACf2B,EAAY3B,GAAG0B,EAAO,CAEjC,CAnCSpB,EAAAM,EAAA,cAqCT,SAASiB,EAAYN,EAAKvB,EAAG,CAC3B,IAAIiC,GAAQ9C,EAAO,OACnB,OAAAA,EAAO8C,EAAK,EAAIjC,EAChBZ,EAAKmC,CAAG,EAAIU,GACL,SAAWA,EACpB,CALS3B,EAAAuB,EAAA,eAOT,SAASE,GAAeR,EAAK,CAC3B,OAAOnC,EAAKmC,CAAG,CACjB,CAFSjB,EAAAyB,GAAA,kBAIT,SAASC,EAAgBT,EAAKvB,EAAG,CAC/B,IAAIiC,GAAQ7C,EAAKmC,CAAG,EACpBpC,EAAO8C,EAAK,EAAIjC,CAClB,CAHSM,EAAA0B,EAAA,mBAKT,SAASL,EAAYxC,EAAQ+C,EAAM,CACjC,OAAO,OAAO/C,GAAU,UAAY,OAAOA,GAAU,UAC3C,CAAE,KAAM+C,EAAM,OAAQ/C,EAAQ,OAAQ,EAAK,EAC3C,CAAE,KAAM+C,EAAM,OAAQ/C,GAAU,CAAC,CAACA,EAAO,MAAO,CAC5D,CAJSmB,EAAAqB,EAAA,eAMT,SAASd,GAAWsB,EAAU,CAC5B,IAAIC,EAAQ9C,EAAa6C,CAAQ,EACjC,OAAIC,IAAU,SACZA,EAAQ9C,EAAa6C,CAAQ,EAAI9C,EAAS,OAC1CA,EAAS+C,CAAK,EAAID,GAEb,UAAYC,CACrB,CAPS9B,EAAAO,GAAA,cAST,SAASC,EAAWuB,EAAO,CACzB,OAAQ,OAAOA,EAAO,CACpB,IAAK,UACL,IAAK,SACH,MAAO,GAAKA,EACd,IAAK,SACH,OAAOhE,GAAK,eAAegE,CAAK,EAClC,IAAK,SACH,GAAIA,IAAU,KAAM,MAAO,OAC3B,IAAIC,EAAW/D,GAAgB8D,CAAK,EAChCD,GAAQ5C,EAAa8C,CAAQ,EACjC,OAAIF,KAAU,SACZA,GAAQ5C,EAAa8C,CAAQ,EAAI/C,EAAS,OAC1CA,EAAS6C,EAAK,EAAIC,GAEb,UAAYD,EACvB,CACF,CAjBS9B,EAAAQ,EAAA,cAmBT,SAASC,EAAcwB,EAAM1D,EAAQ2D,GAAcC,GAAI,CACrD,GAAIxD,EAAK,MAAM,iBAAmB,GAAO,CACvC,IAAIyD,GAAOH,EAAK,WAAW,aAC3B,GAAIG,IAAQ,CAACA,GAAK,MAAM,SAASC,EAAS,CACxC,OAAO,OAAO,UAAU,eAAe,KAAKH,GAAcG,CAAO,CACnE,CAAC,EACC,MAAM,IAAI,MAAM,kDAAoDD,GAAK,KAAK,GAAG,CAAC,EAEpF,IAAIE,GAAiBL,EAAK,WAAW,eACrC,GAAIK,GAAgB,CAClB,IAAIC,GAAQD,GAAe/D,CAAM,EACjC,GAAI,CAACgE,GAAO,CACV,IAAIC,GAAU,8BAAgC7D,EAAK,WAAW2D,GAAe,MAAM,EACnF,GAAI3D,EAAK,MAAM,gBAAkB,MAAOA,EAAK,OAAO,MAAM6D,EAAO,MAC5D,OAAM,IAAI,MAAMA,EAAO,CAC9B,CACF,CACF,CAEA,IAAIlE,GAAU2D,EAAK,WAAW,QAC1BQ,GAASR,EAAK,WAAW,OACzBS,GAAQT,EAAK,WAAW,MAExBnC,GACJ,GAAIxB,GACFwB,GAAWxB,GAAQ,KAAKK,EAAMJ,EAAQ2D,GAAcC,EAAE,UAC7CO,GACT5C,GAAW4C,GAAM,KAAK/D,EAAMJ,EAAQ2D,GAAcC,EAAE,EAChDvD,EAAK,iBAAmB,IAAOD,EAAK,eAAemB,GAAU,EAAI,UAC5D2C,GACT3C,GAAW2C,GAAO,KAAK9D,EAAMwD,GAAIF,EAAK,QAAS1D,EAAQ2D,EAAY,UAEnEpC,GAAWmC,EAAK,WAAW,SACvB,CAACnC,GAAU,OAGjB,GAAIA,KAAa,OACf,MAAM,IAAI,MAAM,mBAAqBmC,EAAK,QAAU,oBAAoB,EAE1E,IAAIH,GAAQ3C,EAAY,OACxB,OAAAA,EAAY2C,EAAK,EAAIhC,GAEd,CACL,KAAM,aAAegC,GACrB,SAAUhC,EACZ,CACF,CA9CSE,EAAAS,EAAA,gBA+CX,CAhRST,EAAA1B,GAAA,WA2RT,SAASe,GAAed,EAAQC,EAAME,EAAQ,CAE5C,IAAIoD,EAAQa,GAAU,KAAK,KAAMpE,EAAQC,EAAME,CAAM,EACrD,OAAIoD,GAAS,EAAU,CAAE,MAAOA,EAAO,UAAW,EAAK,GACvDA,EAAQ,KAAK,cAAc,OAC3B,KAAK,cAAcA,CAAK,EAAI,CAC1B,OAAQvD,EACR,KAAMC,EACN,OAAQE,CACV,EACO,CAAE,MAAOoD,EAAO,UAAW,EAAM,EAC1C,CAXS9B,EAAAX,GAAA,kBAqBT,SAASQ,GAAatB,EAAQC,EAAME,EAAQ,CAE1C,IAAIkE,EAAID,GAAU,KAAK,KAAMpE,EAAQC,EAAME,CAAM,EAC7CkE,GAAK,GAAG,KAAK,cAAc,OAAOA,EAAG,CAAC,CAC5C,CAJS5C,EAAAH,GAAA,gBAeT,SAAS8C,GAAUpE,EAAQC,EAAME,EAAQ,CAEvC,QAASkE,EAAE,EAAGA,EAAE,KAAK,cAAc,OAAQA,IAAK,CAC9C,IAAIxD,EAAI,KAAK,cAAcwD,CAAC,EAC5B,GAAIxD,EAAE,QAAUb,GAAUa,EAAE,MAAQZ,GAAQY,EAAE,QAAUV,EAAQ,OAAOkE,CACzE,CACA,MAAO,EACT,CAPS5C,EAAA2C,GAAA,aAUT,SAAS/B,GAAYgC,EAAG7D,EAAU,CAChC,MAAO,cAAgB6D,EAAI,iBAAmB7E,GAAK,eAAegB,EAAS6D,CAAC,CAAC,EAAI,IACnF,CAFS5C,EAAAY,GAAA,eAKT,SAASC,GAAY+B,EAAG,CACtB,MAAO,cAAgBA,EAAI,eAAiBA,EAAI,IAClD,CAFS5C,EAAAa,GAAA,eAKT,SAASF,GAAWiC,EAAG/D,EAAQ,CAC7B,OAAOA,EAAO+D,CAAC,IAAM,OAAY,GAAK,aAAeA,EAAI,aAAeA,EAAI,IAC9E,CAFS5C,EAAAW,GAAA,cAKT,SAASG,GAAe8B,EAAG,CACzB,MAAO,iBAAmBA,EAAI,kBAAoBA,EAAI,IACxD,CAFS5C,EAAAc,GAAA,kBAKT,SAASJ,GAAKmC,EAAKC,EAAW,CAC5B,GAAI,CAACD,EAAI,OAAQ,MAAO,GAExB,QADIjB,EAAO,GACFgB,EAAE,EAAGA,EAAEC,EAAI,OAAQD,IAC1BhB,GAAQkB,EAAUF,EAAGC,CAAG,EAC1B,OAAOjB,CACT,CANS5B,EAAAU,GAAA,UC5XT,IAAAqC,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAGA,IAAIC,GAAQD,GAAO,QAAUE,EAAA,UAAiB,CAC5C,KAAK,OAAS,CAAC,CACjB,EAF6B,SAK7BD,GAAM,UAAU,IAAMC,EAAA,SAAmBC,EAAKC,EAAO,CACnD,KAAK,OAAOD,CAAG,EAAIC,CACrB,EAFsB,aAKtBH,GAAM,UAAU,IAAMC,EAAA,SAAmBC,EAAK,CAC5C,OAAO,KAAK,OAAOA,CAAG,CACxB,EAFsB,aAKtBF,GAAM,UAAU,IAAMC,EAAA,SAAmBC,EAAK,CAC5C,OAAO,KAAK,OAAOA,CAAG,CACxB,EAFsB,aAKtBF,GAAM,UAAU,MAAQC,EAAA,UAAuB,CAC7C,KAAK,OAAS,CAAC,CACjB,EAFwB,iBCvBxB,IAAAG,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAO,KAEPC,GAAO,6BACPC,GAAO,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAC7CC,GAAO,0DACPC,GAAW,wGACXC,GAAM,+nCACNC,GAAS,yoCAETC,GAAc,oLAKdC,GAAM,grDACNC,GAAO,+DACPC,GAAe,4BACfC,GAA4B,+DAC5BC,GAAwB,mDAG5Bb,GAAO,QAAUc,GAEjB,SAASA,GAAQC,EAAM,CACrB,OAAAA,EAAOA,GAAQ,OAAS,OAAS,OAC1Bd,GAAK,KAAKa,GAAQC,CAAI,CAAC,CAChC,CAHSC,EAAAF,GAAA,WAMTA,GAAQ,KAAO,CAEb,KAAM,6BAEN,KAAM,8EACN,YAAa,0GAEb,IAAK,6CACL,gBAAiB,0EACjB,eAAgBN,GAChB,IAAKC,GAIL,MAAO,mHACP,SAAUJ,GAEV,KAAM,4EAEN,KAAM,qpCACN,MAAOY,GAEP,KAAMP,GAGN,eAAgBC,GAChB,4BAA6BC,GAE7B,wBAAyBC,EAC3B,EAGAC,GAAQ,KAAO,CACb,KAAMI,GACN,KAAMC,GACN,YAAaC,GACb,IAAKC,GACL,gBAAiBd,GACjB,eAAgBC,GAChB,IAAKC,GACL,MAAO,2IACP,SAAUJ,GACV,KAAM,4EACN,KAAM,qpCACN,MAAOY,GACP,KAAMP,GACN,eAAgBC,GAChB,4BAA6BC,GAC7B,wBAAyBC,EAC3B,EAGA,SAASS,GAAWC,EAAM,CAExB,OAAOA,EAAO,IAAM,IAAMA,EAAO,MAAQ,GAAKA,EAAO,MAAQ,EAC/D,CAHSP,EAAAM,GAAA,cAMT,SAASJ,GAAKM,EAAK,CAEjB,IAAIC,EAAUD,EAAI,MAAMtB,EAAI,EAC5B,GAAI,CAACuB,EAAS,MAAO,GAErB,IAAIF,EAAO,CAACE,EAAQ,CAAC,EACjBC,EAAQ,CAACD,EAAQ,CAAC,EAClBE,EAAM,CAACF,EAAQ,CAAC,EAEpB,OAAOC,GAAS,GAAKA,GAAS,IAAMC,GAAO,GACnCA,IAAQD,GAAS,GAAKJ,GAAWC,CAAI,EAAI,GAAKpB,GAAKuB,CAAK,EAClE,CAXSV,EAAAE,GAAA,QAcT,SAASC,GAAKK,EAAKI,EAAM,CACvB,IAAIH,EAAUD,EAAI,MAAMpB,EAAI,EAC5B,GAAI,CAACqB,EAAS,MAAO,GAErB,IAAII,EAAOJ,EAAQ,CAAC,EAChBK,EAASL,EAAQ,CAAC,EAClBM,EAASN,EAAQ,CAAC,EAClBO,EAAWP,EAAQ,CAAC,EACxB,OAASI,GAAQ,IAAMC,GAAU,IAAMC,GAAU,IACxCF,GAAQ,IAAMC,GAAU,IAAMC,GAAU,MACzC,CAACH,GAAQI,EACnB,CAXShB,EAAAG,GAAA,QAcT,IAAIc,GAAsB,QAC1B,SAASb,GAAUI,EAAK,CAEtB,IAAIU,EAAWV,EAAI,MAAMS,EAAmB,EAC5C,OAAOC,EAAS,QAAU,GAAKhB,GAAKgB,EAAS,CAAC,CAAC,GAAKf,GAAKe,EAAS,CAAC,EAAG,EAAI,CAC5E,CAJSlB,EAAAI,GAAA,aAOT,IAAIe,GAAmB,OACvB,SAASd,GAAIG,EAAK,CAEhB,OAAOW,GAAiB,KAAKX,CAAG,GAAKlB,GAAI,KAAKkB,CAAG,CACnD,CAHSR,EAAAK,GAAA,OAMT,IAAIe,GAAW,WACf,SAASnB,GAAMO,EAAK,CAClB,GAAIY,GAAS,KAAKZ,CAAG,EAAG,MAAO,GAC/B,GAAI,CACF,WAAI,OAAOA,CAAG,EACP,EACT,MAAW,CACT,MAAO,EACT,CACF,CARSR,EAAAC,GAAA,WCrIT,IAAAoB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAsBC,EAAIC,EAAUC,EAAW,CAC9D,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAiBP,EAAG,cAAgB,IAAMC,EAC1CO,EAAgB,CAACR,EAAG,KAAK,UACzBS,EAAQ,QAAUJ,GAAY,IAC9BK,EAAS,QAAUN,EACnBO,EAAQC,EACZ,GAAIN,GAAW,KAAOA,GAAW,KAC3BN,EAAG,QACLW,EAASX,EAAG,MACZY,EAAW,aAEXD,EAASX,EAAG,KAAK,OAAO,SAAW,GACnCY,EAAW,sBAER,CACL,IAAIC,EAAUb,EAAG,WAAWA,EAAG,OAAQM,EAASN,EAAG,MAAM,EACzD,GAAIa,IAAY,OAAW,CACzB,IAAIC,EAAWd,EAAG,gBAAgB,QAAQA,EAAG,OAAQM,CAAO,EAC5D,GAAIN,EAAG,KAAK,aAAe,OAAQ,CACjCA,EAAG,OAAO,MAAMc,CAAQ,EACxB,IAAIC,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKZ,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,qDAAwEH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeO,CAAc,EAAK,sBAA0BP,EAAG,KAAK,aAAaM,CAAO,EAAK,OACrNN,EAAG,KAAK,WAAa,KACvBG,GAAO,0CAA+CH,EAAG,KAAK,aAAaM,CAAO,EAAK,MAErFN,EAAG,KAAK,UACVG,GAAO,cAAiBH,EAAG,KAAK,eAAeM,CAAO,EAAK,mCAAsCN,EAAG,WAAc,YAAeS,EAAS,KAE5IN,GAAO,OAEPA,GAAO,OAET,IAAIa,EAAQb,EACZA,EAAMY,EAAW,IAAI,EACjB,CAACf,EAAG,eAAiBQ,EAEnBR,EAAG,MACLG,GAAO,+BAAkCa,EAAS,OAElDb,GAAO,uBAA0Ba,EAAS,oBAG5Cb,GAAO,cAAiBa,EAAS,+EAE/BR,IACFL,GAAO,iBAEX,SAAWH,EAAG,KAAK,aAAe,SAChCA,EAAG,OAAO,KAAKc,CAAQ,EACnBN,IACFL,GAAO,qBAGT,OAAM,IAAIH,EAAG,gBAAgBA,EAAG,OAAQM,EAASQ,CAAQ,CAE7D,SAAWD,EAAQ,OAAQ,CACzB,IAAII,EAAMjB,EAAG,KAAK,KAAKA,CAAE,EACzBiB,EAAI,QACJ,IAAIC,EAAa,QAAUD,EAAI,MAC/BA,EAAI,OAASJ,EAAQ,OACrBI,EAAI,WAAa,GACjBA,EAAI,cAAgBX,EACpB,IAAIa,EAAQnB,EAAG,SAASiB,CAAG,EAAE,QAAQ,oBAAqBJ,EAAQ,IAAI,EACtEV,GAAO,IAAOgB,EAAS,IACnBX,IACFL,GAAO,QAAWe,EAAc,OAEpC,MACEP,EAASE,EAAQ,SAAW,IAASb,EAAG,OAASa,EAAQ,SAAW,GACpED,EAAWC,EAAQ,IAEvB,CACA,GAAID,EAAU,CACZ,IAAIG,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKZ,CAAG,EACnBA,EAAM,GACFH,EAAG,KAAK,YACVG,GAAO,IAAOS,EAAY,eAE1BT,GAAO,IAAOS,EAAY,KAE5BT,GAAO,IAAOM,EAAS,qBACnBT,EAAG,WAAa,OAClBG,GAAO,MAASH,EAAG,WAErB,IAAIoB,EAAcf,EAAW,QAAWA,EAAW,GAAM,IAAM,aAC7DgB,EAAsBhB,EAAWL,EAAG,YAAYK,CAAQ,EAAI,qBAC9DF,GAAO,MAASiB,EAAe,MAASC,EAAuB,gBAC/D,IAAIC,GAAiBnB,EAErB,GADAA,EAAMY,EAAW,IAAI,EACjBJ,EAAQ,CACV,GAAI,CAACX,EAAG,MAAO,MAAM,IAAI,MAAM,wCAAwC,EACnEQ,IACFL,GAAO,QAAWO,EAAU,MAE9BP,GAAO,gBAAmBmB,GAAkB,KACxCd,IACFL,GAAO,IAAOO,EAAU,aAE1BP,GAAO,4KACHK,IACFL,GAAO,IAAOO,EAAU,cAE1BP,GAAO,MACHK,IACFL,GAAO,QAAWO,EAAU,OAEhC,MACEP,GAAO,SAAYmB,GAAkB,uCAA0CV,EAAY,0CAA6CA,EAAY,wCAChJJ,IACFL,GAAO,WAGb,CACA,OAAOA,CACT,EA1HiB,kBCDjB,IAAAoB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAwBC,EAAIC,EAAUC,EAAW,CAChE,IAAIC,EAAM,IACNC,EAAUJ,EAAG,OAAOC,CAAQ,EAC5BI,EAAcL,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DK,EAAiBN,EAAG,cAAgB,IAAMC,EAC1CM,EAAgB,CAACP,EAAG,KAAK,UACzBQ,EAAMR,EAAG,KAAK,KAAKA,CAAE,EACrBS,EAAiB,GACrBD,EAAI,QACJ,IAAIE,EAAa,QAAUF,EAAI,MAC3BG,EAAiBH,EAAI,OACvBI,EAAmB,GACjBC,EAAOT,EACX,GAAIS,EAGF,QAFIC,EAAMC,EAAK,GACbC,EAAKH,EAAK,OAAS,EACdE,EAAKC,GACVF,EAAOD,EAAKE,GAAM,CAAC,GACdf,EAAG,KAAK,eAAkB,OAAOc,GAAQ,UAAY,OAAO,KAAKA,CAAI,EAAE,OAAS,GAAMA,IAAS,GAAQd,EAAG,KAAK,eAAec,EAAMd,EAAG,MAAM,GAAG,KACnJY,EAAmB,GACnBJ,EAAI,OAASM,EACbN,EAAI,WAAaH,EAAc,IAAMU,EAAK,IAC1CP,EAAI,cAAgBF,EAAiB,IAAMS,EAC3CZ,GAAO,KAAQH,EAAG,SAASQ,CAAG,EAAK,IACnCA,EAAI,OAASG,EACTJ,IACFJ,GAAO,QAAWO,EAAc,OAChCD,GAAkB,MAK1B,OAAIF,IACEK,EACFT,GAAO,gBAEPA,GAAO,IAAOM,EAAe,MAAM,EAAG,EAAE,EAAK,KAG1CN,CACT,EAxCiB,oBCDjB,IAAAc,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAwBC,EAAIC,EAAUC,EAAW,CAChE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAS,QAAUP,EACnBQ,EAAQ,SAAWR,EACnBS,EAAMb,EAAG,KAAK,KAAKA,CAAE,EACrBc,EAAiB,GACrBD,EAAI,QACJ,IAAIE,EAAa,QAAUF,EAAI,MAC3BG,EAAiBV,EAAQ,MAAM,SAASW,EAAM,CAChD,OAAQjB,EAAG,KAAK,eAAkB,OAAOiB,GAAQ,UAAY,OAAO,KAAKA,CAAI,EAAE,OAAS,GAAMA,IAAS,GAAQjB,EAAG,KAAK,eAAeiB,EAAMjB,EAAG,MAAM,GAAG,CAC1J,CAAC,EACD,GAAIgB,EAAgB,CAClB,IAAIE,EAAiBL,EAAI,OACzBV,GAAO,QAAWS,EAAS,kBAAqBD,EAAU,cAC1D,IAAIQ,EAAgBnB,EAAG,cACvBA,EAAG,cAAgBa,EAAI,cAAgB,GACvC,IAAIO,EAAOd,EACX,GAAIc,EAGF,QAFIH,EAAMI,EAAK,GACbC,GAAKF,EAAK,OAAS,EACdC,EAAKC,IACVL,EAAOG,EAAKC,GAAM,CAAC,EACnBR,EAAI,OAASI,EACbJ,EAAI,WAAaN,EAAc,IAAMc,EAAK,IAC1CR,EAAI,cAAgBL,EAAiB,IAAMa,EAC3ClB,GAAO,KAAQH,EAAG,SAASa,CAAG,EAAK,IACnCA,EAAI,OAASK,EACbf,GAAO,IAAOQ,EAAU,MAASA,EAAU,OAAUI,EAAc,UAAaJ,EAAU,OAC1FG,GAAkB,IAGtBd,EAAG,cAAgBa,EAAI,cAAgBM,EACvChB,GAAO,IAAOW,EAAkB,SAAYH,EAAU,qBAClDX,EAAG,eAAiB,IACtBG,GAAO,sDAAyEH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,iBAC3JR,EAAG,KAAK,WAAa,KACvBG,GAAO,oDAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAETA,GAAO,+EACH,CAACH,EAAG,eAAiBS,IAEnBT,EAAG,MACLG,GAAO,wCAEPA,GAAO,8CAGXA,GAAO,uBAA0BS,EAAS,iCAAoCA,EAAS,sBAAyBA,EAAS,4BACrHZ,EAAG,KAAK,YACVG,GAAO,MAEX,MACMM,IACFN,GAAO,iBAGX,OAAOA,CACT,EAvEiB,oBCDjB,IAAAoB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAA0BC,EAAIC,EAAUC,EAAW,CAClE,IAAIC,EAAM,IACNC,EAAUJ,EAAG,OAAOC,CAAQ,EAC5BI,EAAiBL,EAAG,cAAgB,IAAMC,EAC1CK,EAAgB,CAACN,EAAG,KAAK,UACzBO,EAAWP,EAAG,KAAK,eAAeI,CAAO,EAC7C,OAAIJ,EAAG,KAAK,WAAa,GACvBG,GAAO,gBAAmBI,EAAY,KAC7B,OAAOP,EAAG,KAAK,UAAY,aACpCG,GAAO,wBAA2BI,EAAY,KAAQP,EAAG,KAAK,eAAeK,CAAc,EAAK,4BAE3FF,CACT,EAZiB,sBCDjB,IAAAK,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAwBC,EAAIC,EAAUC,EAAW,CAChE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAS,QAAUP,EACnBQ,EAAUZ,EAAG,KAAK,OAASM,GAAWA,EAAQ,MAChDO,EACED,GACFT,GAAO,cAAiBC,EAAQ,MAASJ,EAAG,KAAK,QAAQM,EAAQ,MAAOD,EAAUL,EAAG,WAAW,EAAK,KACrGa,EAAe,SAAWT,GAE1BS,EAAeP,EAEZM,IACHT,GAAO,cAAiBC,EAAQ,qBAAwBG,EAAe,KAEzEJ,GAAO,OAAUQ,EAAU,YAAeD,EAAS,WAAcN,EAAQ,WAAcO,EAAU,SACjG,IAAIG,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKX,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,sDAAyEH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,oCAAuCJ,EAAQ,MAC1MJ,EAAG,KAAK,WAAa,KACvBG,GAAO,8CAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAET,IAAIY,EAAQZ,EACZ,OAAAA,EAAMW,EAAW,IAAI,EACjB,CAACd,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCY,EAAS,OAElDZ,GAAO,uBAA0BY,EAAS,oBAG5CZ,GAAO,cAAiBY,EAAS,+EAEnCZ,GAAO,KACHM,IACFN,GAAO,YAEFA,CACT,EAtDiB,oBCDjB,IAAAa,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAA2BC,EAAIC,EAAUC,EAAW,CACnE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAS,QAAUP,EACnBQ,EAAQ,SAAWR,EACnBS,EAAMb,EAAG,KAAK,KAAKA,CAAE,EACrBc,EAAiB,GACrBD,EAAI,QACJ,IAAIE,EAAa,QAAUF,EAAI,MAC3BG,EAAO,IAAMZ,EACfa,EAAWJ,EAAI,UAAYb,EAAG,UAAY,EAC1CkB,EAAY,OAASD,EACrBE,EAAiBnB,EAAG,OACpBoB,EAAmBpB,EAAG,KAAK,eAAkB,OAAOM,GAAW,UAAY,OAAO,KAAKA,CAAO,EAAE,OAAS,GAAMA,IAAY,GAAQN,EAAG,KAAK,eAAeM,EAASN,EAAG,MAAM,GAAG,EAEjL,GADAG,GAAO,OAAUS,EAAS,iBAAoBD,EAAU,IACpDS,EAAiB,CACnB,IAAIC,EAAgBrB,EAAG,cACvBA,EAAG,cAAgBa,EAAI,cAAgB,GACvCA,EAAI,OAASP,EACbO,EAAI,WAAaN,EACjBM,EAAI,cAAgBL,EACpBL,GAAO,QAAWY,EAAc,sBAAyBC,EAAQ,SAAYA,EAAQ,MAASN,EAAS,YAAeM,EAAQ,SAC9HH,EAAI,UAAYb,EAAG,KAAK,YAAYA,EAAG,UAAWgB,EAAMhB,EAAG,KAAK,aAAc,EAAI,EAClF,IAAIsB,GAAYZ,EAAQ,IAAMM,EAAO,IACrCH,EAAI,YAAYI,CAAQ,EAAID,EAC5B,IAAIO,EAAQvB,EAAG,SAASa,CAAG,EAC3BA,EAAI,OAASM,EACTnB,EAAG,KAAK,cAAcuB,EAAOL,CAAS,EAAI,EAC5Cf,GAAO,IAAOH,EAAG,KAAK,WAAWuB,EAAOL,EAAWI,EAAS,EAAK,IAEjEnB,GAAO,QAAWe,EAAa,MAASI,GAAa,KAAQC,EAAS,IAExEpB,GAAO,QAAWY,EAAc,eAChCf,EAAG,cAAgBa,EAAI,cAAgBQ,EACvClB,GAAO,IAAOW,EAAkB,SAAYC,EAAc,KAC5D,MACEZ,GAAO,QAAWO,EAAS,kBAE7B,IAAIc,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKrB,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,yDAA4EH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,iBAC9JR,EAAG,KAAK,WAAa,KACvBG,GAAO,8CAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAET,IAAIsB,GAAQtB,EACZ,OAAAA,EAAMqB,EAAW,IAAI,EACjB,CAACxB,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCsB,GAAS,OAElDtB,GAAO,uBAA0BsB,GAAS,oBAG5CtB,GAAO,cAAiBsB,GAAS,+EAEnCtB,GAAO,aACHiB,IACFjB,GAAO,cAAiBS,EAAS,iCAAoCA,EAAS,sBAAyBA,EAAS,6BAE9GZ,EAAG,KAAK,YACVG,GAAO,OAEFA,CACT,EA/EiB,uBCDjB,IAAAuB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAA+BC,EAAIC,EAAUC,EAAW,CACvE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAQ,SAAWP,EACnBQ,EAAMZ,EAAG,KAAK,KAAKA,CAAE,EACrBa,EAAiB,GACrBD,EAAI,QACJ,IAAIE,EAAa,QAAUF,EAAI,MAC3BG,EAAc,CAAC,EACjBC,EAAgB,CAAC,EACjBC,EAAiBjB,EAAG,KAAK,cAC3B,IAAKkB,KAAaZ,EAChB,GAAIY,GAAa,YACjB,KAAIC,EAAOb,EAAQY,CAAS,EACxBE,EAAQ,MAAM,QAAQD,CAAI,EAAIH,EAAgBD,EAClDK,EAAMF,CAAS,EAAIC,EAErBhB,GAAO,OAAUQ,EAAS,aAC1B,IAAIU,EAAoBrB,EAAG,UAC3BG,GAAO,cAAiBC,EAAQ,IAChC,QAASc,KAAaF,EAEpB,GADAI,EAAQJ,EAAcE,CAAS,EAC3BE,EAAM,OAAQ,CAKhB,GAJAjB,GAAO,SAAYO,EAAUV,EAAG,KAAK,YAAYkB,CAAS,EAAK,kBAC3DD,IACFd,GAAO,4CAA+CO,EAAS,MAAUV,EAAG,KAAK,aAAakB,CAAS,EAAK,OAE1GT,EAAe,CACjBN,GAAO,SACP,IAAImB,GAAOF,EACX,GAAIE,GAGF,QAFIC,EAAcC,EAAK,GACrBC,GAAKH,GAAK,OAAS,EACdE,EAAKC,IAAI,CACdF,EAAeD,GAAKE,GAAM,CAAC,EACvBA,IACFrB,GAAO,QAET,IAAIuB,EAAQ1B,EAAG,KAAK,YAAYuB,CAAY,EAC1CI,EAAWjB,EAAQgB,EACrBvB,GAAO,QAAWwB,EAAY,kBAC1BV,IACFd,GAAO,8CAAiDO,EAAS,MAAUV,EAAG,KAAK,aAAauB,CAAY,EAAK,OAEnHpB,GAAO,gBAAmBC,EAAQ,MAASJ,EAAG,KAAK,eAAeA,EAAG,KAAK,aAAeuB,EAAeG,CAAK,EAAK,MACpH,CAEFvB,GAAO,SACP,IAAIyB,EAAgB,UAAYxB,EAC9ByB,EAAmB,OAAUD,EAAgB,OAC3C5B,EAAG,KAAK,yBACVA,EAAG,UAAYA,EAAG,KAAK,aAAeA,EAAG,KAAK,YAAYqB,EAAmBO,EAAe,EAAI,EAAIP,EAAoB,MAAQO,GAElI,IAAIE,GAAaA,IAAc,CAAC,EAChCA,GAAW,KAAK3B,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,6DAAgFH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,2BAA+BR,EAAG,KAAK,aAAakB,CAAS,EAAK,wBAA6BW,EAAoB,iBAAqBT,EAAM,OAAU,YAAgBpB,EAAG,KAAK,aAAaoB,EAAM,QAAU,EAAIA,EAAM,CAAC,EAAIA,EAAM,KAAK,IAAI,CAAC,EAAK,OACnZpB,EAAG,KAAK,WAAa,KACvBG,GAAO,4BACHiB,EAAM,QAAU,EAClBjB,GAAO,YAAeH,EAAG,KAAK,aAAaoB,EAAM,CAAC,CAAC,EAEnDjB,GAAO,cAAiBH,EAAG,KAAK,aAAaoB,EAAM,KAAK,IAAI,CAAC,EAE/DjB,GAAO,kBAAqBH,EAAG,KAAK,aAAakB,CAAS,EAAK,iBAE7DlB,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAET,IAAI4B,GAAQ5B,EACZA,EAAM2B,GAAW,IAAI,EACjB,CAAC9B,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkC4B,GAAS,OAElD5B,GAAO,uBAA0B4B,GAAS,oBAG5C5B,GAAO,cAAiB4B,GAAS,8EAErC,KAAO,CACL5B,GAAO,QACP,IAAI6B,GAAOZ,EACX,GAAIY,GAGF,QAFIT,EAAcU,GAAK,GACrBC,GAAKF,GAAK,OAAS,EACdC,GAAKC,IAAI,CACdX,EAAeS,GAAKC,IAAM,CAAC,EAC3B,IAAIP,EAAQ1B,EAAG,KAAK,YAAYuB,CAAY,EAC1CM,EAAmB7B,EAAG,KAAK,aAAauB,CAAY,EACpDI,EAAWjB,EAAQgB,EACjB1B,EAAG,KAAK,yBACVA,EAAG,UAAYA,EAAG,KAAK,QAAQqB,EAAmBE,EAAcvB,EAAG,KAAK,YAAY,GAEtFG,GAAO,SAAYwB,EAAY,kBAC3BV,IACFd,GAAO,8CAAiDO,EAAS,MAAUV,EAAG,KAAK,aAAauB,CAAY,EAAK,OAEnHpB,GAAO,oBACHH,EAAG,eAAiB,IACtBG,GAAO,6DAAgFH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,2BAA+BR,EAAG,KAAK,aAAakB,CAAS,EAAK,wBAA6BW,EAAoB,iBAAqBT,EAAM,OAAU,YAAgBpB,EAAG,KAAK,aAAaoB,EAAM,QAAU,EAAIA,EAAM,CAAC,EAAIA,EAAM,KAAK,IAAI,CAAC,EAAK,OACnZpB,EAAG,KAAK,WAAa,KACvBG,GAAO,4BACHiB,EAAM,QAAU,EAClBjB,GAAO,YAAeH,EAAG,KAAK,aAAaoB,EAAM,CAAC,CAAC,EAEnDjB,GAAO,cAAiBH,EAAG,KAAK,aAAaoB,EAAM,KAAK,IAAI,CAAC,EAE/DjB,GAAO,kBAAqBH,EAAG,KAAK,aAAakB,CAAS,EAAK,iBAE7DlB,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAETA,GAAO,gFACT,CAEJ,CACAA,GAAO,QACHM,IACFI,GAAkB,IAClBV,GAAO,WAEX,CAEFH,EAAG,UAAYqB,EACf,IAAIc,GAAiBvB,EAAI,OACzB,QAASM,KAAaH,EAAa,CACjC,IAAII,EAAOJ,EAAYG,CAAS,GAC3BlB,EAAG,KAAK,eAAkB,OAAOmB,GAAQ,UAAY,OAAO,KAAKA,CAAI,EAAE,OAAS,GAAMA,IAAS,GAAQnB,EAAG,KAAK,eAAemB,EAAMnB,EAAG,MAAM,GAAG,KACnJG,GAAO,IAAOW,EAAc,iBAAoBJ,EAAUV,EAAG,KAAK,YAAYkB,CAAS,EAAK,kBACxFD,IACFd,GAAO,4CAA+CO,EAAS,MAAUV,EAAG,KAAK,aAAakB,CAAS,EAAK,OAE9Gf,GAAO,OACPS,EAAI,OAASO,EACbP,EAAI,WAAaL,EAAcP,EAAG,KAAK,YAAYkB,CAAS,EAC5DN,EAAI,cAAgBJ,EAAiB,IAAMR,EAAG,KAAK,eAAekB,CAAS,EAC3Ef,GAAO,KAAQH,EAAG,SAASY,CAAG,EAAK,IACnCA,EAAI,OAASuB,GACbhC,GAAO,OACHM,IACFN,GAAO,QAAWW,EAAc,OAChCD,GAAkB,KAGxB,CACA,OAAIJ,IACFN,GAAO,MAASU,EAAkB,QAAWF,EAAS,iBAEjDR,CACT,EAtKiB,2BCDjB,IAAAiC,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAuBC,EAAIC,EAAUC,EAAW,CAC/D,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAS,QAAUP,EACnBQ,EAAUZ,EAAG,KAAK,OAASM,GAAWA,EAAQ,MAChDO,EACED,GACFT,GAAO,cAAiBC,EAAQ,MAASJ,EAAG,KAAK,QAAQM,EAAQ,MAAOD,EAAUL,EAAG,WAAW,EAAK,KACrGa,EAAe,SAAWT,GAE1BS,EAAeP,EAEjB,IAAIQ,EAAK,IAAMV,EACbW,EAAW,SAAWX,EACnBQ,IACHT,GAAO,QAAWY,EAAY,qBAAwBR,EAAe,KAEvEJ,GAAO,OAAUQ,EAAU,IACvBC,IACFT,GAAO,cAAiBC,EAAQ,mBAAsBO,EAAU,0CAA6CP,EAAQ,MAASO,EAAU,oBAE1IR,GAAO,GAAMQ,EAAU,qBAAwBG,EAAM,OAAUA,EAAM,IAAOC,EAAY,YAAeD,EAAM,iBAAoBJ,EAAS,KAAQK,EAAY,IAAOD,EAAM,SAAYH,EAAU,oBAC7LC,IACFT,GAAO,SAETA,GAAO,SAAYQ,EAAU,SAC7B,IAAIK,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKb,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,qDAAwEH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,qCAAwCJ,EAAQ,MAC1MJ,EAAG,KAAK,WAAa,KACvBG,GAAO,+DAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAET,IAAIc,EAAQd,EACZ,OAAAA,EAAMa,EAAW,IAAI,EACjB,CAAChB,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCc,EAAS,OAElDd,GAAO,uBAA0Bc,EAAS,oBAG5Cd,GAAO,cAAiBc,EAAS,+EAEnCd,GAAO,KACHM,IACFN,GAAO,YAEFA,CACT,EAhEiB,mBCDjB,IAAAe,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAyBC,EAAIC,EAAUC,EAAW,CACjE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAClC,GAAIL,EAAG,KAAK,SAAW,GACrB,OAAIS,IACFN,GAAO,iBAEFA,EAET,IAAIQ,EAAUX,EAAG,KAAK,OAASM,GAAWA,EAAQ,MAChDM,EACED,GACFR,GAAO,cAAiBC,EAAQ,MAASJ,EAAG,KAAK,QAAQM,EAAQ,MAAOD,EAAUL,EAAG,WAAW,EAAK,KACrGY,EAAe,SAAWR,GAE1BQ,EAAeN,EAEjB,IAAIO,EAAkBb,EAAG,KAAK,eAC5Bc,EAAgB,MAAM,QAAQD,CAAe,EAC/C,GAAIF,EAAS,CACX,IAAII,EAAU,SAAWX,EACvBY,EAAY,WAAaZ,EACzBa,EAAc,aAAeb,EAC/BD,GAAO,QAAWY,EAAW,cAAiBH,EAAgB,UAAaI,EAAa,aAAgBD,EAAW,qBAA0BA,EAAW,0BAA6BA,EAAW,kBAAqBE,EAAe,MAASD,EAAa,OAAUD,EAAW,0BAA+BC,EAAa,OACvThB,EAAG,QACLG,GAAO,aAAgBC,EAAQ,MAASW,EAAW,YAErDZ,GAAO,IAAOY,EAAW,MAASA,EAAW,sBACzCJ,IACFR,GAAO,KAAQS,EAAgB,4BAA+BA,EAAgB,qBAEhFT,GAAO,KACHU,GAAmB,WACrBV,GAAO,KAAQS,EAAgB,QAAWG,EAAW,IACjDD,IACFX,GAAO,yCAA4CS,EAAgB,YAErET,GAAO,SAETA,GAAO,KAAQY,EAAW,OAAUE,EAAe,QAAYf,EAAa,iBAAqBa,EAAW,oBACxGf,EAAG,MACLG,GAAO,UAAaC,EAAQ,YAAeW,EAAW,IAAOL,EAAS,OAAUK,EAAW,IAAOL,EAAS,MAE3GP,GAAO,IAAOY,EAAW,IAAOL,EAAS,KAE3CP,GAAO,MAASY,EAAW,SAAYL,EAAS,SAClD,KAAO,CACL,IAAIK,EAAUf,EAAG,QAAQM,CAAO,EAChC,GAAI,CAACS,EAAS,CACZ,GAAIF,GAAmB,SACrB,OAAAb,EAAG,OAAO,KAAK,mBAAqBM,EAAU,gCAAkCN,EAAG,cAAgB,GAAG,EAClGS,IACFN,GAAO,iBAEFA,EACF,GAAIW,GAAiBD,EAAgB,QAAQP,CAAO,GAAK,EAC9D,OAAIG,IACFN,GAAO,iBAEFA,EAEP,MAAM,IAAI,MAAM,mBAAqBG,EAAU,gCAAkCN,EAAG,cAAgB,GAAG,CAE3G,CACA,IAAIgB,EAAY,OAAOD,GAAW,UAAY,EAAEA,aAAmB,SAAWA,EAAQ,SAClFE,EAAcD,GAAaD,EAAQ,MAAQ,SAC/C,GAAIC,EAAW,CACb,IAAIE,EAASH,EAAQ,QAAU,GAC/BA,EAAUA,EAAQ,QACpB,CACA,GAAIE,GAAef,EACjB,OAAIO,IACFN,GAAO,iBAEFA,EAET,GAAIe,EAAQ,CACV,GAAI,CAAClB,EAAG,MAAO,MAAM,IAAI,MAAM,6BAA6B,EAC5D,IAAImB,EAAa,UAAYnB,EAAG,KAAK,YAAYM,CAAO,EAAI,YAC5DH,GAAO,gBAAmBgB,EAAc,IAAOT,EAAS,QAC1D,KAAO,CACLP,GAAO,UACP,IAAIgB,EAAa,UAAYnB,EAAG,KAAK,YAAYM,CAAO,EACpDU,IAAWG,GAAc,aACzB,OAAOJ,GAAW,WACpBZ,GAAO,IAAOgB,EAAc,IAAOT,EAAS,KAE5CP,GAAO,IAAOgB,EAAc,SAAYT,EAAS,KAEnDP,GAAO,MACT,CACF,CACA,IAAIiB,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKjB,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,uDAA0EH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,yBAC5JG,EACFR,GAAO,GAAMS,EAEbT,GAAO,GAAMH,EAAG,KAAK,eAAeM,CAAO,EAE7CH,GAAO,OACHH,EAAG,KAAK,WAAa,KACvBG,GAAO,qCACHQ,EACFR,GAAO,OAAWS,EAAgB,OAElCT,GAAO,GAAMH,EAAG,KAAK,aAAaM,CAAO,EAE3CH,GAAO,OAELH,EAAG,KAAK,UACVG,GAAO,eACHQ,EACFR,GAAO,kBAAqBI,EAE5BJ,GAAO,GAAMH,EAAG,KAAK,eAAeM,CAAO,EAE7CH,GAAO,2CAA8CH,EAAG,WAAc,YAAeU,EAAS,KAEhGP,GAAO,OAEPA,GAAO,OAET,IAAIkB,EAAQlB,EACZ,OAAAA,EAAMiB,EAAW,IAAI,EACjB,CAACpB,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCkB,EAAS,OAElDlB,GAAO,uBAA0BkB,EAAS,oBAG5ClB,GAAO,cAAiBkB,EAAS,+EAEnClB,GAAO,MACHM,IACFN,GAAO,YAEFA,CACT,EApJiB,qBCDjB,IAAAmB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAqBC,EAAIC,EAAUC,EAAW,CAC7D,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAS,QAAUP,EACnBQ,EAAQ,SAAWR,EACnBS,EAAMb,EAAG,KAAK,KAAKA,CAAE,EACzBa,EAAI,QACJ,IAAIC,EAAa,QAAUD,EAAI,MAC3BE,EAAWf,EAAG,OAAO,KACvBgB,EAAWhB,EAAG,OAAO,KACrBiB,EAAeF,IAAa,SAAcf,EAAG,KAAK,eAAkB,OAAOe,GAAY,UAAY,OAAO,KAAKA,CAAQ,EAAE,OAAS,GAAMA,IAAa,GAAQf,EAAG,KAAK,eAAee,EAAUf,EAAG,MAAM,GAAG,GAC1MkB,EAAeF,IAAa,SAAchB,EAAG,KAAK,eAAkB,OAAOgB,GAAY,UAAY,OAAO,KAAKA,CAAQ,EAAE,OAAS,GAAMA,IAAa,GAAQhB,EAAG,KAAK,eAAegB,EAAUhB,EAAG,MAAM,GAAG,GAC1MmB,EAAiBN,EAAI,OACvB,GAAII,GAAgBC,EAAc,CAChC,IAAIE,EACJP,EAAI,aAAe,GACnBA,EAAI,OAASP,EACbO,EAAI,WAAaN,EACjBM,EAAI,cAAgBL,EACpBL,GAAO,QAAWS,EAAS,kBAAqBD,EAAU,aAC1D,IAAIU,EAAgBrB,EAAG,cACvBA,EAAG,cAAgBa,EAAI,cAAgB,GACvCV,GAAO,KAAQH,EAAG,SAASa,CAAG,EAAK,IACnCA,EAAI,OAASM,EACbN,EAAI,aAAe,GACnBV,GAAO,cAAiBS,EAAS,iCAAoCA,EAAS,sBAAyBA,EAAS,6BAChHZ,EAAG,cAAgBa,EAAI,cAAgBQ,EACnCJ,GACFd,GAAO,QAAWW,EAAc,QAChCD,EAAI,OAASb,EAAG,OAAO,KACvBa,EAAI,WAAab,EAAG,WAAa,QACjCa,EAAI,cAAgBb,EAAG,cAAgB,QACvCG,GAAO,KAAQH,EAAG,SAASa,CAAG,EAAK,IACnCA,EAAI,OAASM,EACbhB,GAAO,IAAOQ,EAAU,MAASG,EAAc,KAC3CG,GAAgBC,GAClBE,EAAY,WAAahB,EACzBD,GAAO,QAAWiB,EAAa,eAE/BA,EAAY,SAEdjB,GAAO,MACHe,IACFf,GAAO,aAGTA,GAAO,SAAYW,EAAc,OAE/BI,IACFL,EAAI,OAASb,EAAG,OAAO,KACvBa,EAAI,WAAab,EAAG,WAAa,QACjCa,EAAI,cAAgBb,EAAG,cAAgB,QACvCG,GAAO,KAAQH,EAAG,SAASa,CAAG,EAAK,IACnCA,EAAI,OAASM,EACbhB,GAAO,IAAOQ,EAAU,MAASG,EAAc,KAC3CG,GAAgBC,GAClBE,EAAY,WAAahB,EACzBD,GAAO,QAAWiB,EAAa,eAE/BA,EAAY,SAEdjB,GAAO,OAETA,GAAO,SAAYQ,EAAU,qBACzBX,EAAG,eAAiB,IACtBG,GAAO,mDAAsEH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,gCAAmCY,EAAa,MACxMpB,EAAG,KAAK,WAAa,KACvBG,GAAO,kCAAuCiB,EAAa,kBAEzDpB,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAETA,GAAO,+EACH,CAACH,EAAG,eAAiBS,IAEnBT,EAAG,MACLG,GAAO,wCAEPA,GAAO,8CAGXA,GAAO,QACHM,IACFN,GAAO,WAEX,MACMM,IACFN,GAAO,iBAGX,OAAOA,CACT,EArGiB,iBCDjB,IAAAmB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAwBC,EAAIC,EAAUC,EAAW,CAChE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAS,QAAUP,EACnBQ,EAAQ,SAAWR,EACnBS,EAAMb,EAAG,KAAK,KAAKA,CAAE,EACrBc,EAAiB,GACrBD,EAAI,QACJ,IAAIE,EAAa,QAAUF,EAAI,MAC3BG,EAAO,IAAMZ,EACfa,EAAWJ,EAAI,UAAYb,EAAG,UAAY,EAC1CkB,EAAY,OAASD,EACrBE,EAAiBnB,EAAG,OAEtB,GADAG,GAAO,OAAUS,EAAS,iBAAoBD,EAAU,IACpD,MAAM,QAAQL,CAAO,EAAG,CAC1B,IAAIc,EAAmBpB,EAAG,OAAO,gBACjC,GAAIoB,IAAqB,GAAO,CAC9BjB,GAAO,IAAOQ,EAAU,MAASD,EAAS,cAAiBJ,EAAQ,OAAU,KAC7E,IAAIe,EAAqBb,EACzBA,EAAiBR,EAAG,cAAgB,mBACpCG,GAAO,UAAaQ,EAAU,SAC9B,IAAIW,GAAaA,IAAc,CAAC,EAChCA,GAAW,KAAKnB,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,gEAAmFH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,uBAA0BF,EAAQ,OAAU,MACjNN,EAAG,KAAK,WAAa,KACvBG,GAAO,0CAA8CG,EAAQ,OAAU,YAErEN,EAAG,KAAK,UACVG,GAAO,mDAAsDH,EAAG,WAAc,YAAeU,EAAS,KAExGP,GAAO,OAEPA,GAAO,OAET,IAAIoB,EAAQpB,EACZA,EAAMmB,GAAW,IAAI,EACjB,CAACtB,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCoB,EAAS,OAElDpB,GAAO,uBAA0BoB,EAAS,oBAG5CpB,GAAO,cAAiBoB,EAAS,+EAEnCpB,GAAO,MACPK,EAAiBa,EACbZ,IACFK,GAAkB,IAClBX,GAAO,WAEX,CACA,IAAIqB,EAAOlB,EACX,GAAIkB,GAGF,QAFIC,GAAMC,EAAK,GACbC,EAAKH,EAAK,OAAS,EACdE,EAAKC,GAEV,GADAF,GAAOD,EAAKE,GAAM,CAAC,EACd1B,EAAG,KAAK,eAAkB,OAAOyB,IAAQ,UAAY,OAAO,KAAKA,EAAI,EAAE,OAAS,GAAMA,KAAS,GAAQzB,EAAG,KAAK,eAAeyB,GAAMzB,EAAG,MAAM,GAAG,EAAI,CACvJG,GAAO,IAAOY,EAAc,gBAAmBL,EAAS,aAAgBgB,EAAM,OAC9E,IAAIE,EAAYlB,EAAQ,IAAMgB,EAAK,IACnCb,EAAI,OAASY,GACbZ,EAAI,WAAaN,EAAc,IAAMmB,EAAK,IAC1Cb,EAAI,cAAgBL,EAAiB,IAAMkB,EAC3Cb,EAAI,UAAYb,EAAG,KAAK,YAAYA,EAAG,UAAW0B,EAAI1B,EAAG,KAAK,aAAc,EAAI,EAChFa,EAAI,YAAYI,CAAQ,EAAIS,EAC5B,IAAIG,EAAQ7B,EAAG,SAASa,CAAG,EAC3BA,EAAI,OAASM,EACTnB,EAAG,KAAK,cAAc6B,EAAOX,CAAS,EAAI,EAC5Cf,GAAO,IAAOH,EAAG,KAAK,WAAW6B,EAAOX,EAAWU,CAAS,EAAK,IAEjEzB,GAAO,QAAWe,EAAa,MAASU,EAAa,KAAQC,EAAS,IAExE1B,GAAO,OACHM,IACFN,GAAO,QAAWY,EAAc,OAChCD,GAAkB,IAEtB,EAGJ,GAAI,OAAOM,GAAoB,WAAapB,EAAG,KAAK,eAAkB,OAAOoB,GAAoB,UAAY,OAAO,KAAKA,CAAgB,EAAE,OAAS,GAAMA,IAAqB,GAAQpB,EAAG,KAAK,eAAeoB,EAAkBpB,EAAG,MAAM,GAAG,GAAI,CAC9Oa,EAAI,OAASO,EACbP,EAAI,WAAab,EAAG,WAAa,mBACjCa,EAAI,cAAgBb,EAAG,cAAgB,mBACvCG,GAAO,IAAOY,EAAc,gBAAmBL,EAAS,aAAgBJ,EAAQ,OAAU,iBAAoBU,EAAQ,MAASV,EAAQ,OAAU,KAAQU,EAAQ,MAASN,EAAS,YAAeM,EAAQ,SAC1MH,EAAI,UAAYb,EAAG,KAAK,YAAYA,EAAG,UAAWgB,EAAMhB,EAAG,KAAK,aAAc,EAAI,EAClF,IAAI4B,EAAYlB,EAAQ,IAAMM,EAAO,IACrCH,EAAI,YAAYI,CAAQ,EAAID,EAC5B,IAAIa,EAAQ7B,EAAG,SAASa,CAAG,EAC3BA,EAAI,OAASM,EACTnB,EAAG,KAAK,cAAc6B,EAAOX,CAAS,EAAI,EAC5Cf,GAAO,IAAOH,EAAG,KAAK,WAAW6B,EAAOX,EAAWU,CAAS,EAAK,IAEjEzB,GAAO,QAAWe,EAAa,MAASU,EAAa,KAAQC,EAAS,IAEpEpB,IACFN,GAAO,SAAYY,EAAc,aAEnCZ,GAAO,SACHM,IACFN,GAAO,QAAWY,EAAc,OAChCD,GAAkB,IAEtB,CACF,SAAYd,EAAG,KAAK,eAAkB,OAAOM,GAAW,UAAY,OAAO,KAAKA,CAAO,EAAE,OAAS,GAAMA,IAAY,GAAQN,EAAG,KAAK,eAAeM,EAASN,EAAG,MAAM,GAAG,EAAI,CAC1Ka,EAAI,OAASP,EACbO,EAAI,WAAaN,EACjBM,EAAI,cAAgBL,EACpBL,GAAO,cAAiBa,EAAQ,SAAsBA,EAAQ,MAASN,EAAS,YAAeM,EAAQ,SACvGH,EAAI,UAAYb,EAAG,KAAK,YAAYA,EAAG,UAAWgB,EAAMhB,EAAG,KAAK,aAAc,EAAI,EAClF,IAAI4B,EAAYlB,EAAQ,IAAMM,EAAO,IACrCH,EAAI,YAAYI,CAAQ,EAAID,EAC5B,IAAIa,EAAQ7B,EAAG,SAASa,CAAG,EAC3BA,EAAI,OAASM,EACTnB,EAAG,KAAK,cAAc6B,EAAOX,CAAS,EAAI,EAC5Cf,GAAO,IAAOH,EAAG,KAAK,WAAW6B,EAAOX,EAAWU,CAAS,EAAK,IAEjEzB,GAAO,QAAWe,EAAa,MAASU,EAAa,KAAQC,EAAS,IAEpEpB,IACFN,GAAO,SAAYY,EAAc,aAEnCZ,GAAO,IACT,CACA,OAAIM,IACFN,GAAO,IAAOW,EAAkB,QAAWF,EAAS,iBAE/CT,CACT,EA1IiB,oBCDjB,IAAA2B,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAyBC,EAAIC,EAAUC,EAAW,CACjE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EACAC,EAAQ,QAAUN,GAAY,IAC9BO,EAAUZ,EAAG,KAAK,OAASM,GAAWA,EAAQ,MAChDO,EACED,GACFT,GAAO,cAAiBC,EAAQ,MAASJ,EAAG,KAAK,QAAQM,EAAQ,MAAOD,EAAUL,EAAG,WAAW,EAAK,KACrGa,EAAe,SAAWT,GAE1BS,EAAeP,EAEjB,IAAIQ,EAASb,GAAY,UACvBc,EAAoBD,EAAS,mBAAqB,mBAClDE,EAAchB,EAAG,OAAOe,CAAiB,EACzCE,EAAcjB,EAAG,KAAK,OAASgB,GAAeA,EAAY,MAC1DE,EAAMJ,EAAS,IAAM,IACrBK,EAASL,EAAS,IAAM,IACxBJ,EAAgB,OAClB,GAAI,EAAEE,GAAW,OAAON,GAAW,UAAYA,IAAY,QACzD,MAAM,IAAI,MAAML,EAAW,iBAAiB,EAE9C,GAAI,EAAEgB,GAAeD,IAAgB,QAAa,OAAOA,GAAe,UAAY,OAAOA,GAAe,WACxG,MAAM,IAAI,MAAMD,EAAoB,4BAA4B,EAElE,GAAIE,EAAa,CACf,IAAIG,EAAmBpB,EAAG,KAAK,QAAQgB,EAAY,MAAOX,EAAUL,EAAG,WAAW,EAChFqB,EAAa,YAAcjB,EAC3BkB,GAAY,WAAalB,EACzBmB,EAAgB,eAAiBnB,EACjCoB,EAAU,KAAOpB,EACjBqB,GAAS,OAAUD,EAAU,OAC/BrB,GAAO,kBAAqBC,EAAQ,MAASgB,EAAoB,KACjEA,EAAmB,aAAehB,EAClCD,GAAO,QAAWkB,EAAc,SAAYC,GAAa,aAAgBF,EAAoB,SAAYE,GAAa,oBAAyBA,GAAa,sBAA2BA,GAAa,mBACpM,IAAIZ,EAAgBK,EAChBW,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKvB,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,iBAAoBO,GAAiB,mBAAqB,oCAA0CV,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,iBACtLR,EAAG,KAAK,WAAa,KACvBG,GAAO,gBAAoBY,EAAqB,wBAE9Cf,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeW,EAAS,KAEvIR,GAAO,OAEPA,GAAO,OAET,IAAIwB,EAAQxB,EACZA,EAAMuB,EAAW,IAAI,EACjB,CAAC1B,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCwB,EAAS,OAElDxB,GAAO,uBAA0BwB,EAAS,oBAG5CxB,GAAO,cAAiBwB,EAAS,+EAEnCxB,GAAO,gBACHS,IACFT,GAAO,KAAQU,EAAgB,4BAA+BA,EAAgB,qBAEhFV,GAAO,IAAOmB,GAAa,qBAA0BD,EAAc,MAASR,EAAgB,qBAAwBO,EAAoB,IAAOF,EAAO,KAAQL,EAAgB,OAAUF,EAAS,IAAOQ,EAAU,KAAQC,EAAoB,MAAST,EAAS,IAAOQ,EAAU,IAAON,EAAgB,WAAcQ,EAAc,MAASD,EAAoB,gBAAmBT,EAAS,IAAOQ,EAAU,KAAQN,EAAgB,MAASF,EAAS,IAAOQ,EAAU,IAAON,EAAgB,SAAYF,EAAS,QAAWA,EAAS,aAAgBP,EAAQ,MAASiB,EAAc,OAAWH,EAAO,QAAaA,EAAO,OAC1lBZ,IAAY,SACdI,EAAgBK,EAChBP,EAAiBR,EAAG,cAAgB,IAAMe,EAC1CF,EAAeO,EACfR,EAAUK,EAEd,KAAO,CACL,IAAIM,EAAgB,OAAOP,GAAe,SACxCS,GAASP,EACX,GAAIK,GAAiBX,EAAS,CAC5B,IAAIY,EAAU,IAAOC,GAAS,IAC9BtB,GAAO,SACHS,IACFT,GAAO,KAAQU,EAAgB,4BAA+BA,EAAgB,qBAEhFV,GAAO,MAASU,EAAgB,qBAAwBG,EAAe,IAAOE,EAAO,KAAQL,EAAgB,MAASF,EAAS,IAAOQ,EAAU,KAAQH,EAAe,MAASL,EAAS,IAAOQ,EAAU,IAAON,EAAgB,SAAYF,EAAS,QAAWA,EAAS,MAC5Q,KAAO,CACDY,GAAiBjB,IAAY,QAC/Be,EAAa,GACbX,EAAgBK,EAChBP,EAAiBR,EAAG,cAAgB,IAAMe,EAC1CF,EAAeG,EACfG,GAAU,MAENI,IAAeV,EAAe,KAAKC,EAAS,MAAQ,KAAK,EAAEE,EAAaV,CAAO,GAC/EU,KAAiBO,EAAgBV,EAAe,KAClDQ,EAAa,GACbX,EAAgBK,EAChBP,EAAiBR,EAAG,cAAgB,IAAMe,EAC1CI,GAAU,MAEVE,EAAa,GACbI,IAAU,MAGd,IAAID,EAAU,IAAOC,GAAS,IAC9BtB,GAAO,SACHS,IACFT,GAAO,KAAQU,EAAgB,4BAA+BA,EAAgB,qBAEhFV,GAAO,IAAOQ,EAAS,IAAOQ,EAAU,IAAON,EAAgB,OAAUF,EAAS,QAAWA,EAAS,MACxG,CACF,CACAD,EAAgBA,GAAiBT,EACjC,IAAIyB,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKvB,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,iBAAoBO,GAAiB,UAAY,oCAA0CV,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,4BAA+BgB,EAAW,YAAeX,EAAgB,gBAAmBQ,EAAc,MACvRrB,EAAG,KAAK,WAAa,KACvBG,GAAO,0BAA8BsB,GAAU,IAC3Cb,EACFT,GAAO,OAAWU,EAElBV,GAAO,GAAMU,EAAgB,KAG7Bb,EAAG,KAAK,UACVG,GAAO,eACHS,EACFT,GAAO,kBAAqBI,EAE5BJ,GAAO,GAAMG,EAEfH,GAAO,2CAA8CH,EAAG,WAAc,YAAeW,EAAS,KAEhGR,GAAO,OAEPA,GAAO,OAET,IAAIwB,EAAQxB,EACZ,OAAAA,EAAMuB,EAAW,IAAI,EACjB,CAAC1B,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCwB,EAAS,OAElDxB,GAAO,uBAA0BwB,EAAS,oBAG5CxB,GAAO,cAAiBwB,EAAS,+EAEnCxB,GAAO,MACHM,IACFN,GAAO,YAEFA,CACT,EAjKiB,qBCDjB,IAAAyB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAA8BC,EAAIC,EAAUC,EAAW,CACtE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EACAC,EAAQ,QAAUN,GAAY,IAC9BO,EAAUZ,EAAG,KAAK,OAASM,GAAWA,EAAQ,MAChDO,EAOF,GANID,GACFT,GAAO,cAAiBC,EAAQ,MAASJ,EAAG,KAAK,QAAQM,EAAQ,MAAOD,EAAUL,EAAG,WAAW,EAAK,KACrGa,EAAe,SAAWT,GAE1BS,EAAeP,EAEb,EAAEM,GAAW,OAAON,GAAW,UACjC,MAAM,IAAI,MAAML,EAAW,iBAAiB,EAE9C,IAAIa,EAAMb,GAAY,WAAa,IAAM,IACzCE,GAAO,QACHS,IACFT,GAAO,KAAQU,EAAgB,4BAA+BA,EAAgB,qBAEhFV,GAAO,IAAOQ,EAAS,WAAcG,EAAO,IAAOD,EAAgB,OACnE,IAAIH,EAAgBT,EAChBc,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKZ,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,iBAAoBO,GAAiB,eAAiB,oCAA0CV,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,uBAA0BK,EAAgB,MAC5Nb,EAAG,KAAK,WAAa,KACvBG,GAAO,gCACHF,GAAY,WACdE,GAAO,OAEPA,GAAO,QAETA,GAAO,SACHS,EACFT,GAAO,OAAWU,EAAgB,OAElCV,GAAO,GAAMG,EAEfH,GAAO,YAELH,EAAG,KAAK,UACVG,GAAO,eACHS,EACFT,GAAO,kBAAqBI,EAE5BJ,GAAO,GAAMG,EAEfH,GAAO,2CAA8CH,EAAG,WAAc,YAAeW,EAAS,KAEhGR,GAAO,OAEPA,GAAO,OAET,IAAIa,EAAQb,EACZ,OAAAA,EAAMY,EAAW,IAAI,EACjB,CAACf,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCa,EAAS,OAElDb,GAAO,uBAA0Ba,EAAS,oBAG5Cb,GAAO,cAAiBa,EAAS,+EAEnCb,GAAO,KACHM,IACFN,GAAO,YAEFA,CACT,EA9EiB,0BCDjB,IAAAc,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAA+BC,EAAIC,EAAUC,EAAW,CACvE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EACAC,EAAQ,QAAUN,GAAY,IAC9BO,EAAUZ,EAAG,KAAK,OAASM,GAAWA,EAAQ,MAChDO,EAOF,GANID,GACFT,GAAO,cAAiBC,EAAQ,MAASJ,EAAG,KAAK,QAAQM,EAAQ,MAAOD,EAAUL,EAAG,WAAW,EAAK,KACrGa,EAAe,SAAWT,GAE1BS,EAAeP,EAEb,EAAEM,GAAW,OAAON,GAAW,UACjC,MAAM,IAAI,MAAML,EAAW,iBAAiB,EAE9C,IAAIa,EAAMb,GAAY,YAAc,IAAM,IAC1CE,GAAO,QACHS,IACFT,GAAO,KAAQU,EAAgB,4BAA+BA,EAAgB,qBAE5Eb,EAAG,KAAK,UAAY,GACtBG,GAAO,IAAOQ,EAAS,WAEvBR,GAAO,eAAkBQ,EAAS,KAEpCR,GAAO,IAAOW,EAAO,IAAOD,EAAgB,OAC5C,IAAIH,EAAgBT,EAChBc,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKZ,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,iBAAoBO,GAAiB,gBAAkB,oCAA0CV,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,uBAA0BK,EAAgB,MAC7Nb,EAAG,KAAK,WAAa,KACvBG,GAAO,8BACHF,GAAY,YACdE,GAAO,SAEPA,GAAO,UAETA,GAAO,SACHS,EACFT,GAAO,OAAWU,EAAgB,OAElCV,GAAO,GAAMG,EAEfH,GAAO,iBAELH,EAAG,KAAK,UACVG,GAAO,eACHS,EACFT,GAAO,kBAAqBI,EAE5BJ,GAAO,GAAMG,EAEfH,GAAO,2CAA8CH,EAAG,WAAc,YAAeW,EAAS,KAEhGR,GAAO,OAEPA,GAAO,OAET,IAAIa,EAAQb,EACZ,OAAAA,EAAMY,EAAW,IAAI,EACjB,CAACf,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCa,EAAS,OAElDb,GAAO,uBAA0Ba,EAAS,oBAG5Cb,GAAO,cAAiBa,EAAS,+EAEnCb,GAAO,KACHM,IACFN,GAAO,YAEFA,CACT,EAnFiB,2BCDjB,IAAAc,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAmCC,EAAIC,EAAUC,EAAW,CAC3E,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EACAC,EAAQ,QAAUN,GAAY,IAC9BO,EAAUZ,EAAG,KAAK,OAASM,GAAWA,EAAQ,MAChDO,EAOF,GANID,GACFT,GAAO,cAAiBC,EAAQ,MAASJ,EAAG,KAAK,QAAQM,EAAQ,MAAOD,EAAUL,EAAG,WAAW,EAAK,KACrGa,EAAe,SAAWT,GAE1BS,EAAeP,EAEb,EAAEM,GAAW,OAAON,GAAW,UACjC,MAAM,IAAI,MAAML,EAAW,iBAAiB,EAE9C,IAAIa,EAAMb,GAAY,gBAAkB,IAAM,IAC9CE,GAAO,QACHS,IACFT,GAAO,KAAQU,EAAgB,4BAA+BA,EAAgB,qBAEhFV,GAAO,gBAAmBQ,EAAS,YAAeG,EAAO,IAAOD,EAAgB,OAChF,IAAIH,EAAgBT,EAChBc,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKZ,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,iBAAoBO,GAAiB,oBAAsB,oCAA0CV,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,uBAA0BK,EAAgB,MACjOb,EAAG,KAAK,WAAa,KACvBG,GAAO,gCACHF,GAAY,gBACdE,GAAO,OAEPA,GAAO,QAETA,GAAO,SACHS,EACFT,GAAO,OAAWU,EAAgB,OAElCV,GAAO,GAAMG,EAEfH,GAAO,iBAELH,EAAG,KAAK,UACVG,GAAO,eACHS,EACFT,GAAO,kBAAqBI,EAE5BJ,GAAO,GAAMG,EAEfH,GAAO,2CAA8CH,EAAG,WAAc,YAAeW,EAAS,KAEhGR,GAAO,OAEPA,GAAO,OAET,IAAIa,EAAQb,EACZ,OAAAA,EAAMY,EAAW,IAAI,EACjB,CAACf,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCa,EAAS,OAElDb,GAAO,uBAA0Ba,EAAS,oBAG5Cb,GAAO,cAAiBa,EAAS,+EAEnCb,GAAO,KACHM,IACFN,GAAO,YAEFA,CACT,EA9EiB,+BCDjB,IAAAc,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAA6BC,EAAIC,EAAUC,EAAW,CACrE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAUX,EAAG,KAAK,OAASM,GAAWA,EAAQ,MAChDM,EAOF,GANID,GACFR,GAAO,cAAiBC,EAAQ,MAASJ,EAAG,KAAK,QAAQM,EAAQ,MAAOD,EAAUL,EAAG,WAAW,EAAK,KACrGY,EAAe,SAAWR,GAE1BQ,EAAeN,EAEb,EAAEK,GAAW,OAAOL,GAAW,UACjC,MAAM,IAAI,MAAML,EAAW,iBAAiB,EAE9CE,GAAO,eAAkBC,EAAQ,QAC7BO,IACFR,GAAO,IAAOS,EAAgB,8BAAiCA,EAAgB,oBAEjFT,GAAO,aAAgBC,EAAQ,MAASM,EAAS,MAASE,EAAgB,KACtEZ,EAAG,KAAK,oBACVG,GAAO,gCAAmCC,EAAQ,eAAkBA,EAAQ,UAAaJ,EAAG,KAAK,oBAAuB,IAExHG,GAAO,YAAeC,EAAQ,yBAA4BA,EAAQ,KAEpED,GAAO,MACHQ,IACFR,GAAO,SAETA,GAAO,UACP,IAAIU,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKV,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,2DAA8EH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,4BAA+BI,EAAgB,MAC/MZ,EAAG,KAAK,WAAa,KACvBG,GAAO,sCACHQ,EACFR,GAAO,OAAWS,EAElBT,GAAO,GAAMS,EAAgB,KAG7BZ,EAAG,KAAK,UACVG,GAAO,eACHQ,EACFR,GAAO,kBAAqBI,EAE5BJ,GAAO,GAAMG,EAEfH,GAAO,2CAA8CH,EAAG,WAAc,YAAeU,EAAS,KAEhGP,GAAO,OAEPA,GAAO,OAET,IAAIW,EAAQX,EACZ,OAAAA,EAAMU,EAAW,IAAI,EACjB,CAACb,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCW,EAAS,OAElDX,GAAO,uBAA0BW,EAAS,oBAG5CX,GAAO,cAAiBW,EAAS,+EAEnCX,GAAO,KACHM,IACFN,GAAO,YAEFA,CACT,EA9EiB,yBCDjB,IAAAY,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAsBC,EAAIC,EAAUC,EAAW,CAC9D,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAQ,SAAWP,EACnBQ,EAAMZ,EAAG,KAAK,KAAKA,CAAE,EACzBY,EAAI,QACJ,IAAIC,EAAa,QAAUD,EAAI,MAC/B,GAAKZ,EAAG,KAAK,eAAkB,OAAOM,GAAW,UAAY,OAAO,KAAKA,CAAO,EAAE,OAAS,GAAMA,IAAY,GAAQN,EAAG,KAAK,eAAeM,EAASN,EAAG,MAAM,GAAG,EAAI,CACnKY,EAAI,OAASN,EACbM,EAAI,WAAaL,EACjBK,EAAI,cAAgBJ,EACpBL,GAAO,QAAWQ,EAAS,eAC3B,IAAIG,EAAgBd,EAAG,cACvBA,EAAG,cAAgBY,EAAI,cAAgB,GACvCA,EAAI,aAAe,GACnB,IAAIG,EACAH,EAAI,KAAK,YACXG,EAAmBH,EAAI,KAAK,UAC5BA,EAAI,KAAK,UAAY,IAEvBT,GAAO,IAAOH,EAAG,SAASY,CAAG,EAAK,IAClCA,EAAI,aAAe,GACfG,IAAkBH,EAAI,KAAK,UAAYG,GAC3Cf,EAAG,cAAgBY,EAAI,cAAgBE,EACvCX,GAAO,QAAWU,EAAc,SAChC,IAAIG,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKb,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,oDAAuEH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,iBACzJR,EAAG,KAAK,WAAa,KACvBG,GAAO,sCAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAET,IAAIc,EAAQd,EACZA,EAAMa,EAAW,IAAI,EACjB,CAAChB,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCc,EAAS,OAElDd,GAAO,uBAA0Bc,EAAS,oBAG5Cd,GAAO,cAAiBc,EAAS,+EAEnCd,GAAO,uBAA0BQ,EAAS,iCAAoCA,EAAS,sBAAyBA,EAAS,4BACrHX,EAAG,KAAK,YACVG,GAAO,MAEX,MACEA,GAAO,iBACHH,EAAG,eAAiB,IACtBG,GAAO,oDAAuEH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,iBACzJR,EAAG,KAAK,WAAa,KACvBG,GAAO,sCAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAETA,GAAO,+EACHM,IACFN,GAAO,kBAGX,OAAOA,CACT,EAlFiB,kBCDjB,IAAAe,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAwBC,EAAIC,EAAUC,EAAW,CAChE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAS,QAAUP,EACnBQ,EAAQ,SAAWR,EACnBS,EAAMb,EAAG,KAAK,KAAKA,CAAE,EACrBc,EAAiB,GACrBD,EAAI,QACJ,IAAIE,EAAa,QAAUF,EAAI,MAC3BG,EAAiBH,EAAI,OACvBI,EAAa,YAAcb,EAC3Bc,EAAkB,iBAAmBd,EACvCD,GAAO,OAAUS,EAAS,eAAkBK,EAAc,cAAiBN,EAAU,cAAiBO,EAAmB,YACzH,IAAIC,EAAgBnB,EAAG,cACvBA,EAAG,cAAgBa,EAAI,cAAgB,GACvC,IAAIO,EAAOd,EACX,GAAIc,EAGF,QAFIC,EAAMC,GAAK,GACbC,EAAKH,EAAK,OAAS,EACdE,GAAKC,GACVF,EAAOD,EAAKE,IAAM,CAAC,GACdtB,EAAG,KAAK,eAAkB,OAAOqB,GAAQ,UAAY,OAAO,KAAKA,CAAI,EAAE,OAAS,GAAMA,IAAS,GAAQrB,EAAG,KAAK,eAAeqB,EAAMrB,EAAG,MAAM,GAAG,IACnJa,EAAI,OAASQ,EACbR,EAAI,WAAaN,EAAc,IAAMe,GAAK,IAC1CT,EAAI,cAAgBL,EAAiB,IAAMc,GAC3CnB,GAAO,KAAQH,EAAG,SAASa,CAAG,EAAK,IACnCA,EAAI,OAASG,GAEbb,GAAO,QAAWY,EAAc,YAE9BO,KACFnB,GAAO,QAAWY,EAAc,OAAUE,EAAc,OAAUN,EAAU,aAAgBO,EAAmB,OAAUA,EAAmB,KAAQI,GAAM,eAC1JR,GAAkB,KAEpBX,GAAO,QAAWY,EAAc,OAAUJ,EAAU,MAASM,EAAc,YAAeC,EAAmB,MAASI,GAAM,MAGhI,OAAAtB,EAAG,cAAgBa,EAAI,cAAgBM,EACvChB,GAAO,GAAMW,EAAkB,QAAWH,EAAU,qBAChDX,EAAG,eAAiB,IACtBG,GAAO,sDAAyEH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,gCAAmCU,EAAmB,MACjNlB,EAAG,KAAK,WAAa,KACvBG,GAAO,2DAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAETA,GAAO,+EACH,CAACH,EAAG,eAAiBS,IAEnBT,EAAG,MACLG,GAAO,wCAEPA,GAAO,8CAGXA,GAAO,sBAAyBS,EAAS,iCAAoCA,EAAS,sBAAyBA,EAAS,2BACpHZ,EAAG,KAAK,YACVG,GAAO,OAEFA,CACT,EAvEiB,oBCDjB,IAAAqB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAA0BC,EAAIC,EAAUC,EAAW,CAClE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAUX,EAAG,KAAK,OAASM,GAAWA,EAAQ,MAChDM,EACED,GACFR,GAAO,cAAiBC,EAAQ,MAASJ,EAAG,KAAK,QAAQM,EAAQ,MAAOD,EAAUL,EAAG,WAAW,EAAK,KACrGY,EAAe,SAAWR,GAE1BQ,EAAeN,EAEjB,IAAIO,EAAUF,EAAU,eAAiBC,EAAe,KAAOZ,EAAG,WAAWM,CAAO,EACpFH,GAAO,QACHQ,IACFR,GAAO,KAAQS,EAAgB,4BAA+BA,EAAgB,qBAEhFT,GAAO,KAAQU,EAAW,SAAYH,EAAS,WAC/C,IAAII,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKX,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,wDAA2EH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,0BAC7JG,EACFR,GAAO,GAAMS,EAEbT,GAAO,GAAMH,EAAG,KAAK,eAAeM,CAAO,EAE7CH,GAAO,OACHH,EAAG,KAAK,WAAa,KACvBG,GAAO,sCACHQ,EACFR,GAAO,OAAWS,EAAgB,OAElCT,GAAO,GAAMH,EAAG,KAAK,aAAaM,CAAO,EAE3CH,GAAO,OAELH,EAAG,KAAK,UACVG,GAAO,eACHQ,EACFR,GAAO,kBAAqBI,EAE5BJ,GAAO,GAAMH,EAAG,KAAK,eAAeM,CAAO,EAE7CH,GAAO,2CAA8CH,EAAG,WAAc,YAAeU,EAAS,KAEhGP,GAAO,OAEPA,GAAO,OAET,IAAIY,EAAQZ,EACZ,OAAAA,EAAMW,EAAW,IAAI,EACjB,CAACd,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCY,EAAS,OAElDZ,GAAO,uBAA0BY,EAAS,oBAG5CZ,GAAO,cAAiBY,EAAS,+EAEnCZ,GAAO,KACHM,IACFN,GAAO,YAEFA,CACT,EAzEiB,sBCDjB,IAAAa,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAA6BC,EAAIC,EAAUC,EAAW,CACrE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAQ,SAAWP,EACnBQ,EAAMZ,EAAG,KAAK,KAAKA,CAAE,EACrBa,EAAiB,GACrBD,EAAI,QACJ,IAAIE,EAAa,QAAUF,EAAI,MAC3BG,EAAO,MAAQX,EACjBY,EAAO,MAAQZ,EACfa,EAAWL,EAAI,UAAYZ,EAAG,UAAY,EAC1CkB,EAAY,OAASD,EACrBE,EAAkB,iBAAmBf,EACnCgB,EAAc,OAAO,KAAKd,GAAW,CAAC,CAAC,EAAE,OAAOe,EAAQ,EAC1DC,EAAetB,EAAG,OAAO,mBAAqB,CAAC,EAC/CuB,GAAiB,OAAO,KAAKD,CAAY,EAAE,OAAOD,EAAQ,EAC1DG,EAAexB,EAAG,OAAO,qBACzByB,EAAkBL,EAAY,QAAUG,GAAe,OACvDG,GAAgBF,IAAiB,GACjCG,EAAsB,OAAOH,GAAgB,UAAY,OAAO,KAAKA,CAAY,EAAE,OACnFI,EAAoB5B,EAAG,KAAK,iBAC5B6B,EAAmBH,IAAiBC,GAAuBC,EAC3DE,EAAiB9B,EAAG,KAAK,cACzB+B,GAAiB/B,EAAG,OAClBgC,GAAYhC,EAAG,OAAO,SAC1B,GAAIgC,IAAa,EAAEhC,EAAG,KAAK,OAASgC,GAAU,QAAUA,GAAU,OAAShC,EAAG,KAAK,aACjF,IAAIiC,GAAgBjC,EAAG,KAAK,OAAOgC,EAAS,EAG9C,SAASX,GAASa,EAAG,CACnB,OAAOA,IAAM,WACf,CAKA,GAPSnC,EAAAsB,GAAA,YAGTlB,GAAO,OAAUQ,EAAS,iBAAoBG,EAAc,WACxDgB,IACF3B,GAAO,QAAWgB,EAAmB,iBAEnCU,EAAkB,CAMpB,GALIC,EACF3B,GAAO,IAAOgB,EAAmB,MAASA,EAAmB,mBAAsBT,EAAS,eAAkBM,EAAQ,OAAUA,EAAQ,IAAOG,EAAmB,YAAeH,EAAQ,aAAgBD,EAAQ,MAASI,EAAmB,IAAOH,EAAQ,MAE5Pb,GAAO,aAAgBY,EAAQ,OAAUL,EAAS,OAEhDe,EAAiB,CAEnB,GADAtB,GAAO,oBAAuBC,EAAQ,cAClCgB,EAAY,OACd,GAAIA,EAAY,OAAS,EACvBjB,GAAO,sBAAyBI,EAAe,mBAAsBQ,EAAQ,SACxE,CACL,IAAIoB,GAAOf,EACX,GAAIe,GAGF,QAFIC,GAAcC,GAAK,GACrBC,GAAKH,GAAK,OAAS,EACdE,GAAKC,IACVF,GAAeD,GAAKE,IAAM,CAAC,EAC3BlC,GAAO,OAAUY,EAAQ,OAAUf,EAAG,KAAK,eAAeoC,EAAY,EAAK,GAGjF,CAEF,GAAIb,GAAe,OAAQ,CACzB,IAAIgB,GAAOhB,GACX,GAAIgB,GAGF,QAFIC,GAAYC,GAAK,GACnBC,EAAKH,GAAK,OAAS,EACdE,GAAKC,GACVF,GAAaD,GAAKE,IAAM,CAAC,EACzBtC,GAAO,OAAUH,EAAG,WAAWwC,EAAU,EAAK,SAAYzB,EAAQ,IAGxE,CACAZ,GAAO,uBAA0BC,EAAQ,MAC3C,CACA,GAAIwB,GAAqB,MACvBzB,GAAO,WAAcO,EAAS,IAAOK,EAAQ,UACxC,CACL,IAAI4B,EAAoB3C,EAAG,UACvB4C,EAAsB,OAAU7B,EAAO,OAI3C,GAHIf,EAAG,KAAK,yBACVA,EAAG,UAAYA,EAAG,KAAK,YAAYA,EAAG,UAAWe,EAAMf,EAAG,KAAK,YAAY,GAEzE0B,GACF,GAAIE,EACFzB,GAAO,WAAcO,EAAS,IAAOK,EAAQ,UACxC,CACLZ,GAAO,IAAOW,EAAc,aAC5B,IAAI+B,EAAqBrC,EACzBA,EAAiBR,EAAG,cAAgB,wBACpC,IAAI8C,GAAaA,IAAc,CAAC,EAChCA,GAAW,KAAK3C,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,qEAAwFH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,qCAAyCoC,EAAuB,OAC1O5C,EAAG,KAAK,WAAa,KACvBG,GAAO,gBACHH,EAAG,KAAK,uBACVG,GAAO,oCAEPA,GAAO,wCAETA,GAAO,MAELH,EAAG,KAAK,UACVG,GAAO,mDAAsDH,EAAG,WAAc,YAAeU,EAAS,KAExGP,GAAO,OAEPA,GAAO,OAET,IAAI4C,GAAQ5C,EACZA,EAAM2C,GAAW,IAAI,EACjB,CAAC9C,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkC4C,GAAS,OAElD5C,GAAO,uBAA0B4C,GAAS,oBAG5C5C,GAAO,cAAiB4C,GAAS,+EAEnCvC,EAAiBqC,EACbpC,IACFN,GAAO,WAEX,SACSwB,EACT,GAAIC,GAAqB,UAAW,CAClCzB,GAAO,QAAWQ,EAAS,eAC3B,IAAIqC,GAAgBhD,EAAG,cACvBA,EAAG,cAAgBY,EAAI,cAAgB,GACvCA,EAAI,OAASY,EACbZ,EAAI,WAAaZ,EAAG,WAAa,wBACjCY,EAAI,cAAgBZ,EAAG,cAAgB,wBACvCY,EAAI,UAAYZ,EAAG,KAAK,uBAAyBA,EAAG,UAAYA,EAAG,KAAK,YAAYA,EAAG,UAAWe,EAAMf,EAAG,KAAK,YAAY,EAC5H,IAAIiD,GAAYvC,EAAQ,IAAMK,EAAO,IACrCH,EAAI,YAAYK,CAAQ,EAAIF,EAC5B,IAAImC,GAAQlD,EAAG,SAASY,CAAG,EAC3BA,EAAI,OAASmB,GACT/B,EAAG,KAAK,cAAckD,GAAOhC,CAAS,EAAI,EAC5Cf,GAAO,IAAOH,EAAG,KAAK,WAAWkD,GAAOhC,EAAW+B,EAAS,EAAK,IAEjE9C,GAAO,QAAWe,EAAa,MAAS+B,GAAa,KAAQC,GAAS,IAExE/C,GAAO,SAAYW,EAAc,gBAAmBH,EAAS,wHAA2HD,EAAS,IAAOK,EAAQ,SAChNf,EAAG,cAAgBY,EAAI,cAAgBoC,EACzC,KAAO,CACLpC,EAAI,OAASY,EACbZ,EAAI,WAAaZ,EAAG,WAAa,wBACjCY,EAAI,cAAgBZ,EAAG,cAAgB,wBACvCY,EAAI,UAAYZ,EAAG,KAAK,uBAAyBA,EAAG,UAAYA,EAAG,KAAK,YAAYA,EAAG,UAAWe,EAAMf,EAAG,KAAK,YAAY,EAC5H,IAAIiD,GAAYvC,EAAQ,IAAMK,EAAO,IACrCH,EAAI,YAAYK,CAAQ,EAAIF,EAC5B,IAAImC,GAAQlD,EAAG,SAASY,CAAG,EAC3BA,EAAI,OAASmB,GACT/B,EAAG,KAAK,cAAckD,GAAOhC,CAAS,EAAI,EAC5Cf,GAAO,IAAOH,EAAG,KAAK,WAAWkD,GAAOhC,EAAW+B,EAAS,EAAK,IAEjE9C,GAAO,QAAWe,EAAa,MAAS+B,GAAa,KAAQC,GAAS,IAEpEzC,IACFN,GAAO,SAAYW,EAAc,YAErC,CAEFd,EAAG,UAAY2C,CACjB,CACIlB,IACFtB,GAAO,OAETA,GAAO,OACHM,IACFN,GAAO,QAAWW,EAAc,OAChCD,GAAkB,IAEtB,CACA,IAAIsC,GAAenD,EAAG,KAAK,aAAe,CAACA,EAAG,cAC9C,GAAIoB,EAAY,OAAQ,CACtB,IAAIgC,GAAOhC,EACX,GAAIgC,GAGF,QAFIhB,GAAciB,GAAK,GACrBC,GAAKF,GAAK,OAAS,EACdC,GAAKC,IAAI,CACdlB,GAAegB,GAAKC,IAAM,CAAC,EAC3B,IAAIE,GAAOjD,EAAQ8B,EAAY,EAC/B,GAAKpC,EAAG,KAAK,eAAkB,OAAOuD,IAAQ,UAAY,OAAO,KAAKA,EAAI,EAAE,OAAS,GAAMA,KAAS,GAAQvD,EAAG,KAAK,eAAeuD,GAAMvD,EAAG,MAAM,GAAG,EAAI,CACvJ,IAAIwD,GAAQxD,EAAG,KAAK,YAAYoC,EAAY,EAC1Ca,GAAYvC,EAAQ8C,GACpBC,GAAcN,IAAgBI,GAAK,UAAY,OACjD3C,EAAI,OAAS2C,GACb3C,EAAI,WAAaL,EAAciD,GAC/B5C,EAAI,cAAgBJ,EAAiB,IAAMR,EAAG,KAAK,eAAeoC,EAAY,EAC9ExB,EAAI,UAAYZ,EAAG,KAAK,QAAQA,EAAG,UAAWoC,GAAcpC,EAAG,KAAK,YAAY,EAChFY,EAAI,YAAYK,CAAQ,EAAIjB,EAAG,KAAK,eAAeoC,EAAY,EAC/D,IAAIc,GAAQlD,EAAG,SAASY,CAAG,EAE3B,GADAA,EAAI,OAASmB,GACT/B,EAAG,KAAK,cAAckD,GAAOhC,CAAS,EAAI,EAAG,CAC/CgC,GAAQlD,EAAG,KAAK,WAAWkD,GAAOhC,EAAW+B,EAAS,EACtD,IAAIS,GAAWT,EACjB,KAAO,CACL,IAAIS,GAAWxC,EACff,GAAO,QAAWe,EAAa,MAAS+B,GAAa,IACvD,CACA,GAAIQ,GACFtD,GAAO,IAAO+C,GAAS,QAClB,CACL,GAAIjB,IAAiBA,GAAcG,EAAY,EAAG,CAChDjC,GAAO,SAAYuD,GAAY,kBAC3B5B,IACF3B,GAAO,8CAAiDO,EAAS,MAAUV,EAAG,KAAK,aAAaoC,EAAY,EAAK,OAEnHjC,GAAO,OAAUW,EAAc,aAC/B,IAAI6B,EAAoB3C,EAAG,UACzB6C,EAAqBrC,EACrBmD,GAAmB3D,EAAG,KAAK,aAAaoC,EAAY,EAClDpC,EAAG,KAAK,yBACVA,EAAG,UAAYA,EAAG,KAAK,QAAQ2C,EAAmBP,GAAcpC,EAAG,KAAK,YAAY,GAEtFQ,EAAiBR,EAAG,cAAgB,YACpC,IAAI8C,GAAaA,IAAc,CAAC,EAChCA,GAAW,KAAK3C,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,yDAA4EH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,kCAAsCmD,GAAoB,OACxN3D,EAAG,KAAK,WAAa,KACvBG,GAAO,gBACHH,EAAG,KAAK,uBACVG,GAAO,yBAEPA,GAAO,oCAAwCwD,GAAoB,MAErExD,GAAO,MAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAET,IAAI4C,GAAQ5C,EACZA,EAAM2C,GAAW,IAAI,EACjB,CAAC9C,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkC4C,GAAS,OAElD5C,GAAO,uBAA0B4C,GAAS,oBAG5C5C,GAAO,cAAiB4C,GAAS,+EAEnCvC,EAAiBqC,EACjB7C,EAAG,UAAY2C,EACfxC,GAAO,YACT,MACMM,GACFN,GAAO,SAAYuD,GAAY,kBAC3B5B,IACF3B,GAAO,8CAAiDO,EAAS,MAAUV,EAAG,KAAK,aAAaoC,EAAY,EAAK,OAEnHjC,GAAO,OAAUW,EAAc,uBAE/BX,GAAO,QAAWuD,GAAY,kBAC1B5B,IACF3B,GAAO,8CAAiDO,EAAS,MAAUV,EAAG,KAAK,aAAaoC,EAAY,EAAK,OAEnHjC,GAAO,SAGXA,GAAO,IAAO+C,GAAS,KACzB,CACF,CACIzC,IACFN,GAAO,QAAWW,EAAc,OAChCD,GAAkB,IAEtB,CAEJ,CACA,GAAIU,GAAe,OAAQ,CACzB,IAAIqC,EAAOrC,GACX,GAAIqC,EAGF,QAFIpB,GAAYqB,EAAK,GACnBC,EAAKF,EAAK,OAAS,EACdC,EAAKC,GAAI,CACdtB,GAAaoB,EAAKC,GAAM,CAAC,EACzB,IAAIN,GAAOjC,EAAakB,EAAU,EAClC,GAAKxC,EAAG,KAAK,eAAkB,OAAOuD,IAAQ,UAAY,OAAO,KAAKA,EAAI,EAAE,OAAS,GAAMA,KAAS,GAAQvD,EAAG,KAAK,eAAeuD,GAAMvD,EAAG,MAAM,GAAG,EAAI,CACvJY,EAAI,OAAS2C,GACb3C,EAAI,WAAaZ,EAAG,WAAa,qBAAuBA,EAAG,KAAK,YAAYwC,EAAU,EACtF5B,EAAI,cAAgBZ,EAAG,cAAgB,sBAAwBA,EAAG,KAAK,eAAewC,EAAU,EAC5FV,EACF3B,GAAO,IAAOgB,EAAmB,MAASA,EAAmB,mBAAsBT,EAAS,eAAkBM,EAAQ,OAAUA,EAAQ,IAAOG,EAAmB,YAAeH,EAAQ,aAAgBD,EAAQ,MAASI,EAAmB,IAAOH,EAAQ,MAE5Pb,GAAO,aAAgBY,EAAQ,OAAUL,EAAS,OAEpDP,GAAO,QAAWH,EAAG,WAAWwC,EAAU,EAAK,SAAYzB,EAAQ,QACnEH,EAAI,UAAYZ,EAAG,KAAK,YAAYA,EAAG,UAAWe,EAAMf,EAAG,KAAK,YAAY,EAC5E,IAAIiD,GAAYvC,EAAQ,IAAMK,EAAO,IACrCH,EAAI,YAAYK,CAAQ,EAAIF,EAC5B,IAAImC,GAAQlD,EAAG,SAASY,CAAG,EAC3BA,EAAI,OAASmB,GACT/B,EAAG,KAAK,cAAckD,GAAOhC,CAAS,EAAI,EAC5Cf,GAAO,IAAOH,EAAG,KAAK,WAAWkD,GAAOhC,EAAW+B,EAAS,EAAK,IAEjE9C,GAAO,QAAWe,EAAa,MAAS+B,GAAa,KAAQC,GAAS,IAEpEzC,IACFN,GAAO,SAAYW,EAAc,aAEnCX,GAAO,MACHM,IACFN,GAAO,SAAYW,EAAc,aAEnCX,GAAO,OACHM,IACFN,GAAO,QAAWW,EAAc,OAChCD,GAAkB,IAEtB,CACF,CAEJ,CACA,OAAIJ,IACFN,GAAO,IAAOU,EAAkB,QAAWF,EAAS,iBAE/CR,CACT,EA7UiB,yBCDjB,IAAA4D,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAgCC,EAAIC,EAAUC,EAAW,CACxE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAQ,SAAWP,EACnBQ,EAAMZ,EAAG,KAAK,KAAKA,CAAE,EACrBa,EAAiB,GACrBD,EAAI,QACJ,IAAIE,EAAa,QAAUF,EAAI,MAE/B,GADAT,GAAO,OAAUQ,EAAS,aACrBX,EAAG,KAAK,eAAkB,OAAOM,GAAW,UAAY,OAAO,KAAKA,CAAO,EAAE,OAAS,GAAMA,IAAY,GAAQN,EAAG,KAAK,eAAeM,EAASN,EAAG,MAAM,GAAG,EAAI,CACnKY,EAAI,OAASN,EACbM,EAAI,WAAaL,EACjBK,EAAI,cAAgBJ,EACpB,IAAIO,EAAO,MAAQX,EACjBY,EAAO,MAAQZ,EACfa,EAAK,IAAMb,EACXc,EAAe,OAAUH,EAAO,OAChCI,EAAWP,EAAI,UAAYZ,EAAG,UAAY,EAC1CoB,EAAY,OAASD,EACrBE,EAAkB,iBAAmBjB,EACrCkB,GAAiBtB,EAAG,KAAK,cACzBuB,EAAiBvB,EAAG,OAClBsB,KACFnB,GAAO,QAAWkB,EAAmB,kBAEnCC,GACFnB,GAAO,IAAOkB,EAAmB,MAASA,EAAmB,mBAAsBX,EAAS,eAAkBM,EAAQ,OAAUA,EAAQ,IAAOK,EAAmB,YAAeL,EAAQ,aAAgBD,EAAQ,MAASM,EAAmB,IAAOL,EAAQ,MAE5Pb,GAAO,aAAgBY,EAAQ,OAAUL,EAAS,OAEpDP,GAAO,iBAAoBC,EAAQ,cACnC,IAAIoB,EAAYT,EACZU,GAAgBzB,EAAG,cACvBA,EAAG,cAAgBY,EAAI,cAAgB,GACvC,IAAIc,EAAQ1B,EAAG,SAASY,CAAG,EAC3BA,EAAI,OAASW,EACTvB,EAAG,KAAK,cAAc0B,EAAON,CAAS,EAAI,EAC5CjB,GAAO,IAAOH,EAAG,KAAK,WAAW0B,EAAON,EAAWI,CAAS,EAAK,IAEjErB,GAAO,QAAWiB,EAAa,MAASI,EAAa,KAAQE,EAAS,IAExE1B,EAAG,cAAgBY,EAAI,cAAgBa,GACvCtB,GAAO,SAAYW,EAAc,gBAAmBG,EAAM,aAAgBb,EAAQ,KAAQa,EAAM,YAAeA,EAAM,iBAAoBA,EAAM,oBAAuBF,EAAQ,qBAC1Kf,EAAG,eAAiB,IACtBG,GAAO,8DAAiFH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,+BAAmCU,EAAgB,OACtNlB,EAAG,KAAK,WAAa,KACvBG,GAAO,iCAAsCe,EAAgB,oBAE3DlB,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAETA,GAAO,+EACH,CAACH,EAAG,eAAiBS,IAEnBT,EAAG,MACLG,GAAO,wCAEPA,GAAO,8CAGPM,IACFN,GAAO,YAETA,GAAO,MACT,CACA,OAAIM,IACFN,GAAO,IAAOU,EAAkB,QAAWF,EAAS,iBAE/CR,CACT,EA/EiB,4BCDjB,IAAAwB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAA2BC,EAAIC,EAAUC,EAAW,CACnE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAS,QAAUP,EACnBQ,EAAUZ,EAAG,KAAK,OAASM,GAAWA,EAAQ,MAChDO,EACED,GACFT,GAAO,cAAiBC,EAAQ,MAASJ,EAAG,KAAK,QAAQM,EAAQ,MAAOD,EAAUL,EAAG,WAAW,EAAK,KACrGa,EAAe,SAAWT,GAE1BS,EAAeP,EAEjB,IAAIQ,EAAW,SAAWV,EAC1B,GAAI,CAACQ,EACH,GAAIN,EAAQ,OAASN,EAAG,KAAK,cAAgBA,EAAG,OAAO,YAAc,OAAO,KAAKA,EAAG,OAAO,UAAU,EAAE,OAAQ,CAC7G,IAAIe,EAAY,CAAC,EACbC,EAAOV,EACX,GAAIU,EAGF,QAFIC,EAAWC,EAAK,GAClBC,EAAKH,EAAK,OAAS,EACdE,EAAKC,GAAI,CACdF,EAAYD,EAAKE,GAAM,CAAC,EACxB,IAAIE,EAAepB,EAAG,OAAO,WAAWiB,CAAS,EAC3CG,IAAiBpB,EAAG,KAAK,eAAkB,OAAOoB,GAAgB,UAAY,OAAO,KAAKA,CAAY,EAAE,OAAS,GAAMA,IAAiB,GAAQpB,EAAG,KAAK,eAAeoB,EAAcpB,EAAG,MAAM,GAAG,KACrMe,EAAUA,EAAU,MAAM,EAAIE,EAElC,CAEJ,KACE,KAAIF,EAAYT,EAGpB,GAAIM,GAAWG,EAAU,OAAQ,CAC/B,IAAIM,EAAoBrB,EAAG,UACzBsB,GAAgBV,GAAWG,EAAU,QAAUf,EAAG,KAAK,aACvDuB,EAAiBvB,EAAG,KAAK,cAC3B,GAAIS,EAEF,GADAN,GAAO,eAAkBC,EAAQ,KAC7BkB,GAAe,CACZV,IACHT,GAAO,QAAWW,EAAY,qBAAwBP,EAAe,MAEvE,IAAIiB,EAAK,IAAMpB,EACbqB,GAAgB,SAAWrB,EAAO,IAAMoB,EAAK,IAC7CE,EAAmB,OAAUD,GAAgB,OAC3CzB,EAAG,KAAK,yBACVA,EAAG,UAAYA,EAAG,KAAK,YAAYqB,EAAmBI,GAAezB,EAAG,KAAK,YAAY,GAE3FG,GAAO,QAAWQ,EAAU,YACxBC,IACFT,GAAO,cAAiBC,EAAQ,mBAAsBO,EAAU,0CAA6CP,EAAQ,MAASO,EAAU,oBAE1IR,GAAO,aAAgBqB,EAAM,SAAYA,EAAM,MAASV,EAAY,YAAeU,EAAM,SAAYb,EAAU,MAASD,EAAS,IAAOI,EAAY,IAAOU,EAAM,oBAC7JD,IACFpB,GAAO,8CAAiDO,EAAS,KAAQI,EAAY,IAAOU,EAAM,OAEpGrB,GAAO,UAAaQ,EAAU,cAC1BC,IACFT,GAAO,SAETA,GAAO,UAAaQ,EAAU,SAC9B,IAAIgB,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKxB,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,yDAA4EH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,kCAAsCkB,EAAoB,OACxN1B,EAAG,KAAK,WAAa,KACvBG,GAAO,gBACHH,EAAG,KAAK,uBACVG,GAAO,yBAEPA,GAAO,oCAAwCuB,EAAoB,MAErEvB,GAAO,MAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAET,IAAIyB,EAAQzB,EACZA,EAAMwB,EAAW,IAAI,EACjB,CAAC3B,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCyB,EAAS,OAElDzB,GAAO,uBAA0ByB,EAAS,oBAG5CzB,GAAO,cAAiByB,EAAS,+EAEnCzB,GAAO,YACT,KAAO,CACLA,GAAO,SACP,IAAI0B,EAAOd,EACX,GAAIc,EAGF,QAFIC,GAAcN,EAAK,GACrBO,GAAKF,EAAK,OAAS,EACdL,EAAKO,IAAI,CACdD,GAAeD,EAAKL,GAAM,CAAC,EACvBA,IACFrB,GAAO,QAET,IAAI6B,GAAQhC,EAAG,KAAK,YAAY8B,EAAY,EAC1CG,GAAWvB,EAAQsB,GACrB7B,GAAO,QAAW8B,GAAY,kBAC1BV,IACFpB,GAAO,8CAAiDO,EAAS,MAAUV,EAAG,KAAK,aAAa8B,EAAY,EAAK,OAEnH3B,GAAO,gBAAmBC,EAAQ,MAASJ,EAAG,KAAK,eAAeA,EAAG,KAAK,aAAe8B,GAAeE,EAAK,EAAK,MACpH,CAEF7B,GAAO,QACP,IAAIsB,GAAgB,UAAYrB,EAC9BsB,EAAmB,OAAUD,GAAgB,OAC3CzB,EAAG,KAAK,yBACVA,EAAG,UAAYA,EAAG,KAAK,aAAeA,EAAG,KAAK,YAAYqB,EAAmBI,GAAe,EAAI,EAAIJ,EAAoB,MAAQI,IAElI,IAAIE,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKxB,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,yDAA4EH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,kCAAsCkB,EAAoB,OACxN1B,EAAG,KAAK,WAAa,KACvBG,GAAO,gBACHH,EAAG,KAAK,uBACVG,GAAO,yBAEPA,GAAO,oCAAwCuB,EAAoB,MAErEvB,GAAO,MAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAET,IAAIyB,EAAQzB,EACZA,EAAMwB,EAAW,IAAI,EACjB,CAAC3B,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCyB,EAAS,OAElDzB,GAAO,uBAA0ByB,EAAS,oBAG5CzB,GAAO,cAAiByB,EAAS,+EAEnCzB,GAAO,YACT,SAEImB,GAAe,CACZV,IACHT,GAAO,QAAWW,EAAY,qBAAwBP,EAAe,MAEvE,IAAIiB,EAAK,IAAMpB,EACbqB,GAAgB,SAAWrB,EAAO,IAAMoB,EAAK,IAC7CE,EAAmB,OAAUD,GAAgB,OAC3CzB,EAAG,KAAK,yBACVA,EAAG,UAAYA,EAAG,KAAK,YAAYqB,EAAmBI,GAAezB,EAAG,KAAK,YAAY,GAEvFY,IACFT,GAAO,QAAWW,EAAY,sBAAyBA,EAAY,qBAC/Dd,EAAG,eAAiB,IACtBG,GAAO,yDAA4EH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,kCAAsCkB,EAAoB,OACxN1B,EAAG,KAAK,WAAa,KACvBG,GAAO,gBACHH,EAAG,KAAK,uBACVG,GAAO,yBAEPA,GAAO,oCAAwCuB,EAAoB,MAErEvB,GAAO,MAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAETA,GAAO,0FAA6FW,EAAY,sBAElHX,GAAO,aAAgBqB,EAAM,SAAYA,EAAM,MAASV,EAAY,YAAeU,EAAM,aAAgBd,EAAS,IAAOI,EAAY,IAAOU,EAAM,oBAC9ID,IACFpB,GAAO,8CAAiDO,EAAS,KAAQI,EAAY,IAAOU,EAAM,OAEpGrB,GAAO,oBACHH,EAAG,eAAiB,IACtBG,GAAO,yDAA4EH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,kCAAsCkB,EAAoB,OACxN1B,EAAG,KAAK,WAAa,KACvBG,GAAO,gBACHH,EAAG,KAAK,uBACVG,GAAO,yBAEPA,GAAO,oCAAwCuB,EAAoB,MAErEvB,GAAO,MAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAETA,GAAO,mFACHS,IACFT,GAAO,QAEX,KAAO,CACL,IAAI+B,GAAOnB,EACX,GAAImB,GAGF,QAFIJ,GAAcK,GAAK,GACrBC,GAAKF,GAAK,OAAS,EACdC,GAAKC,IAAI,CACdN,GAAeI,GAAKC,IAAM,CAAC,EAC3B,IAAIH,GAAQhC,EAAG,KAAK,YAAY8B,EAAY,EAC1CJ,EAAmB1B,EAAG,KAAK,aAAa8B,EAAY,EACpDG,GAAWvB,EAAQsB,GACjBhC,EAAG,KAAK,yBACVA,EAAG,UAAYA,EAAG,KAAK,QAAQqB,EAAmBS,GAAc9B,EAAG,KAAK,YAAY,GAEtFG,GAAO,SAAY8B,GAAY,kBAC3BV,IACFpB,GAAO,8CAAiDO,EAAS,MAAUV,EAAG,KAAK,aAAa8B,EAAY,EAAK,OAEnH3B,GAAO,oBACHH,EAAG,eAAiB,IACtBG,GAAO,yDAA4EH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,kCAAsCkB,EAAoB,OACxN1B,EAAG,KAAK,WAAa,KACvBG,GAAO,gBACHH,EAAG,KAAK,uBACVG,GAAO,yBAEPA,GAAO,oCAAwCuB,EAAoB,MAErEvB,GAAO,MAELH,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeU,EAAS,KAEvIP,GAAO,OAEPA,GAAO,OAETA,GAAO,gFACT,CAEJ,CAEFH,EAAG,UAAYqB,CACjB,MAAWZ,IACTN,GAAO,gBAET,OAAOA,CACT,EA5QiB,uBCDjB,IAAAkC,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAA8BC,EAAIC,EAAUC,EAAW,CACtE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EAAQ,QAAUL,GAAY,IAC9BM,EAAS,QAAUP,EACnBQ,EAAUZ,EAAG,KAAK,OAASM,GAAWA,EAAQ,MAChDO,EAOF,GANID,GACFT,GAAO,cAAiBC,EAAQ,MAASJ,EAAG,KAAK,QAAQM,EAAQ,MAAOD,EAAUL,EAAG,WAAW,EAAK,KACrGa,EAAe,SAAWT,GAE1BS,EAAeP,GAEZA,GAAWM,IAAYZ,EAAG,KAAK,cAAgB,GAAO,CACrDY,IACFT,GAAO,QAAWQ,EAAU,SAAYE,EAAgB,iBAAoBA,EAAgB,mBAAsBF,EAAU,4BAA+BE,EAAgB,kBAAuBF,EAAU,qBAE9MR,GAAO,YAAeO,EAAS,aAAgBC,EAAU,6BACzD,IAAIG,EAAYd,EAAG,OAAO,OAASA,EAAG,OAAO,MAAM,KACjDe,EAAe,MAAM,QAAQD,CAAS,EACxC,GAAI,CAACA,GAAaA,GAAa,UAAYA,GAAa,SAAYC,IAAiBD,EAAU,QAAQ,QAAQ,GAAK,GAAKA,EAAU,QAAQ,OAAO,GAAK,GACrJX,GAAO,uDAA0DO,EAAS,QAAWA,EAAS,WAAcC,EAAU,oCACjH,CACLR,GAAO,yDAA4DO,EAAS,QAC5E,IAAIM,EAAU,iBAAmBD,EAAe,IAAM,IACtDZ,GAAO,QAAWH,EAAG,KAAKgB,CAAO,EAAEF,EAAW,OAAQd,EAAG,KAAK,cAAe,EAAI,EAAK,eAClFe,IACFZ,GAAO,qDAETA,GAAO,gDAAqDQ,EAAU,qEACxE,CACAR,GAAO,MACHS,IACFT,GAAO,SAETA,GAAO,SAAYQ,EAAU,SAC7B,IAAIM,EAAaA,GAAc,CAAC,EAChCA,EAAW,KAAKd,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,4DAA+EH,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,6BACjKR,EAAG,KAAK,WAAa,KACvBG,GAAO,mGAELH,EAAG,KAAK,UACVG,GAAO,eACHS,EACFT,GAAO,kBAAqBI,EAE5BJ,GAAO,GAAMG,EAEfH,GAAO,2CAA8CH,EAAG,WAAc,YAAeU,EAAS,KAEhGP,GAAO,OAEPA,GAAO,OAET,IAAIe,EAAQf,EACZA,EAAMc,EAAW,IAAI,EACjB,CAACjB,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCe,EAAS,OAElDf,GAAO,uBAA0Be,EAAS,oBAG5Cf,GAAO,cAAiBe,EAAS,+EAEnCf,GAAO,MACHM,IACFN,GAAO,WAEX,MACMM,IACFN,GAAO,iBAGX,OAAOA,CACT,EApFiB,0BCDjB,IAAAgB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAGAA,GAAO,QAAU,CACf,KAAQ,KACR,MAAO,KACP,MAAO,KACP,SAAY,KACZ,MAAO,KACP,SAAU,KACV,aAAc,KACd,KAAQ,KACR,OAAQ,KACR,GAAM,KACN,MAAO,KACP,QAAS,KACT,QAAS,KACT,SAAU,KACV,SAAU,KACV,UAAW,KACX,UAAW,KACX,cAAe,KACf,cAAe,KACf,WAAY,KACZ,IAAK,KACL,MAAO,KACP,QAAS,KACT,WAAY,KACZ,cAAe,KACf,SAAU,KACV,YAAa,KACb,SAAU,IACZ,IChCA,IAAAC,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAc,KACdC,GAAS,KAAkB,OAE/BF,GAAO,QAAUG,EAAA,UAAiB,CAChC,IAAIC,EAAQ,CACV,CAAE,KAAM,SACN,MAAO,CAAE,CAAE,QAAW,CAAC,kBAAkB,CAAE,EAClC,CAAE,QAAW,CAAC,kBAAkB,CAAE,EAAG,aAAc,QAAQ,CAAE,EACxE,CAAE,KAAM,SACN,MAAO,CAAE,YAAa,YAAa,UAAW,QAAS,CAAE,EAC3D,CAAE,KAAM,QACN,MAAO,CAAE,WAAY,WAAY,QAAS,WAAY,aAAc,CAAE,EACxE,CAAE,KAAM,SACN,MAAO,CAAE,gBAAiB,gBAAiB,WAAY,eAAgB,gBAC9D,CAAE,WAAc,CAAC,uBAAwB,mBAAmB,CAAE,CAAE,CAAE,EAC7E,CAAE,MAAO,CAAE,OAAQ,QAAS,OAAQ,MAAO,QAAS,QAAS,QAAS,IAAK,CAAE,CAC/E,EAEIC,EAAM,CAAE,OAAQ,UAAW,EAC3BC,EAAW,CACb,UAAW,MAAO,KAAM,QAAS,SAAU,QAC3C,cAAe,UAAW,cAC1B,WAAY,WAAY,YACxB,mBAAoB,kBACpB,kBAAmB,OAAQ,MAC7B,EACIC,EAAQ,CAAE,SAAU,UAAW,SAAU,QAAS,SAAU,UAAW,MAAO,EAClF,OAAAH,EAAM,IAAMF,GAAOG,CAAG,EACtBD,EAAM,MAAQF,GAAOK,CAAK,EAE1BH,EAAM,QAAQ,SAAUI,EAAO,CAC7BA,EAAM,MAAQA,EAAM,MAAM,IAAI,SAAUC,EAAS,CAC/C,IAAIC,EACJ,GAAI,OAAOD,GAAW,SAAU,CAC9B,IAAIE,EAAM,OAAO,KAAKF,CAAO,EAAE,CAAC,EAChCC,EAAeD,EAAQE,CAAG,EAC1BF,EAAUE,EACVD,EAAa,QAAQ,SAAUE,EAAG,CAChCP,EAAI,KAAKO,CAAC,EACVR,EAAM,IAAIQ,CAAC,EAAI,EACjB,CAAC,CACH,CACAP,EAAI,KAAKI,CAAO,EAChB,IAAII,EAAOT,EAAM,IAAIK,CAAO,EAAI,CAC9B,QAASA,EACT,KAAMR,GAAYQ,CAAO,EACzB,WAAYC,CACd,EACA,OAAOG,CACT,CAAC,EAEDT,EAAM,IAAI,SAAW,CACnB,QAAS,WACT,KAAMH,GAAY,QACpB,EAEIO,EAAM,OAAMJ,EAAM,MAAMI,EAAM,IAAI,EAAIA,EAC5C,CAAC,EAEDJ,EAAM,SAAWF,GAAOG,EAAI,OAAOC,CAAQ,CAAC,EAC5CF,EAAM,OAAS,CAAC,EAETA,CACT,EA5DiB,WCLjB,IAAAU,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAW,CACb,aACA,UACA,mBACA,UACA,mBACA,YACA,YACA,UACA,kBACA,WACA,WACA,cACA,gBACA,gBACA,WACA,uBACA,OACA,SACA,OACF,EAEAD,GAAO,QAAU,SAAUE,EAAYC,EAAsB,CAC3D,QAASC,EAAE,EAAGA,EAAED,EAAqB,OAAQC,IAAK,CAChDF,EAAa,KAAK,MAAM,KAAK,UAAUA,CAAU,CAAC,EAClD,IAAIG,EAAWF,EAAqBC,CAAC,EAAE,MAAM,GAAG,EAC5CE,EAAWJ,EACXK,EACJ,IAAKA,EAAE,EAAGA,EAAEF,EAAS,OAAQE,IAC3BD,EAAWA,EAASD,EAASE,CAAC,CAAC,EAEjC,IAAKA,EAAE,EAAGA,EAAEN,GAAS,OAAQM,IAAK,CAChC,IAAIC,EAAMP,GAASM,CAAC,EAChBE,EAASH,EAASE,CAAG,EACrBC,IACFH,EAASE,CAAG,EAAI,CACd,MAAO,CACLC,EACA,CAAE,KAAM,gFAAiF,CAC3F,CACF,EAEJ,CACF,CAEA,OAAOP,CACT,IChDA,IAAAQ,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAkB,KAA2B,WAEjDD,GAAO,QAAUE,GAYjB,SAASA,GAAaC,EAAQC,EAAMC,EAAU,CAI5C,IAAIC,EAAO,KACX,GAAI,OAAO,KAAK,MAAM,YAAc,WAClC,MAAM,IAAI,MAAM,yCAAyC,EAEvD,OAAOF,GAAQ,aACjBC,EAAWD,EACXA,EAAO,QAGT,IAAIG,EAAIC,EAAiBL,CAAM,EAAE,KAAK,UAAY,CAChD,IAAIM,EAAYH,EAAK,WAAWH,EAAQ,OAAWC,CAAI,EACvD,OAAOK,EAAU,UAAYC,EAAcD,CAAS,CACtD,CAAC,EAED,OAAIJ,GACFE,EAAE,KACA,SAASI,EAAG,CAAEN,EAAS,KAAMM,CAAC,CAAG,EACjCN,CACF,EAGKE,EAGP,SAASC,EAAiBI,EAAK,CAC7B,IAAIC,EAAUD,EAAI,QAClB,OAAOC,GAAW,CAACP,EAAK,UAAUO,CAAO,EAC/BX,GAAa,KAAKI,EAAM,CAAE,KAAMO,CAAQ,EAAG,EAAI,EAC/C,QAAQ,QAAQ,CAC5B,CALSC,EAAAN,EAAA,oBAQT,SAASE,EAAcD,EAAW,CAChC,GAAI,CAAE,OAAOH,EAAK,SAASG,CAAS,CAAG,OACjCM,EAAG,CACP,GAAIA,aAAad,GAAiB,OAAOe,EAAkBD,CAAC,EAC5D,MAAMA,CACR,CAGA,SAASC,EAAkBD,EAAG,CAC5B,IAAIE,EAAMF,EAAE,cACZ,GAAIG,EAAMD,CAAG,EAAG,MAAM,IAAI,MAAM,UAAYA,EAAM,kBAAoBF,EAAE,WAAa,qBAAqB,EAE1G,IAAII,EAAgBb,EAAK,gBAAgBW,CAAG,EAC5C,OAAKE,IACHA,EAAgBb,EAAK,gBAAgBW,CAAG,EAAIX,EAAK,MAAM,WAAWW,CAAG,EACrEE,EAAc,KAAKC,EAAeA,CAAa,GAG1CD,EAAc,KAAK,SAAUP,EAAK,CACvC,GAAI,CAACM,EAAMD,CAAG,EACZ,OAAOT,EAAiBI,CAAG,EAAE,KAAK,UAAY,CACvCM,EAAMD,CAAG,GAAGX,EAAK,UAAUM,EAAKK,EAAK,OAAWb,CAAI,CAC3D,CAAC,CAEL,CAAC,EAAE,KAAK,UAAW,CACjB,OAAOM,EAAcD,CAAS,CAChC,CAAC,EAED,SAASW,GAAgB,CACvB,OAAOd,EAAK,gBAAgBW,CAAG,CACjC,CAFSH,EAAAM,EAAA,iBAIT,SAASF,EAAMD,EAAK,CAClB,OAAOX,EAAK,MAAMW,CAAG,GAAKX,EAAK,SAASW,CAAG,CAC7C,CAFSH,EAAAI,EAAA,QAGX,CA3BSJ,EAAAE,EAAA,oBA4BX,CApCSF,EAAAJ,EAAA,gBAqCX,CAzESI,EAAAZ,GAAA,kBChBT,IAAAmB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cACAA,GAAO,QAAUC,EAAA,SAAyBC,EAAIC,EAAUC,EAAW,CACjE,IAAIC,EAAM,IACNC,EAAOJ,EAAG,MACVK,EAAWL,EAAG,UACdM,EAAUN,EAAG,OAAOC,CAAQ,EAC5BM,EAAcP,EAAG,WAAaA,EAAG,KAAK,YAAYC,CAAQ,EAC1DO,EAAiBR,EAAG,cAAgB,IAAMC,EAC1CQ,EAAgB,CAACT,EAAG,KAAK,UACzBU,EACAC,EAAQ,QAAUN,GAAY,IAC9BO,EAAS,QAAUR,EACnBS,EAAQ,SAAWT,EACnBU,EAAUd,EAAG,KAAK,OAASM,GAAWA,EAAQ,MAChDS,EACED,GACFX,GAAO,cAAiBC,EAAQ,MAASJ,EAAG,KAAK,QAAQM,EAAQ,MAAOD,EAAUL,EAAG,WAAW,EAAK,KACrGe,EAAe,SAAWX,GAE1BW,EAAeT,EAEjB,IAAIU,EAAQ,KACVC,EAAc,aAAeb,EAC7Bc,EAAQF,EAAM,WACdG,EAAiB,GACfC,EAAUC,EAASC,GAAQC,EAAeC,EAC9C,GAAIV,GAAWI,EAAM,MAAO,CAC1BM,EAAgB,kBAAoBpB,EACpC,IAAIqB,GAAkBP,EAAM,eAC5Bf,GAAO,QAAWc,EAAe,oBAAwBhB,EAAY,sBAA0BuB,EAAiB,MAASP,EAAe,YAC1I,KAAO,CAEL,GADAM,EAAgBvB,EAAG,cAAcgB,EAAOV,EAASN,EAAG,OAAQA,CAAE,EAC1D,CAACuB,EAAe,OACpBR,EAAe,kBAAoBR,EACnCiB,EAAgBD,EAAc,KAC9BH,EAAWF,EAAM,QACjBG,EAAUH,EAAM,OAChBI,GAASJ,EAAM,KACjB,CACA,IAAIQ,EAAYF,EAAgB,UAC9BG,EAAK,IAAMvB,EACXwB,EAAW,UAAYxB,EACvByB,EAAgBX,EAAM,MACxB,GAAIW,GAAiB,CAAC7B,EAAG,MAAO,MAAM,IAAI,MAAM,8BAA8B,EAa9E,GAZMqB,GAAWC,KACfnB,GAAO,GAAMuB,EAAa,YAE5BvB,GAAO,OAAUU,EAAS,iBAAoBD,EAAU,IACpDE,GAAWI,EAAM,QACnBC,GAAkB,IAClBhB,GAAO,QAAWY,EAAgB,qBAAwBH,EAAU,qBAChEa,KACFN,GAAkB,IAClBhB,GAAO,IAAOS,EAAU,MAASK,EAAe,mBAAsBF,EAAgB,UAAaH,EAAU,SAG7GS,EACEH,EAAM,WACRf,GAAO,IAAOoB,EAAc,SAAY,IAExCpB,GAAO,IAAOS,EAAU,MAASW,EAAc,SAAY,aAEpDD,GAAQ,CACjB,IAAIQ,GAAM9B,EAAG,KAAK,KAAKA,CAAE,EACrBmB,EAAiB,GACrBW,GAAI,QACJ,IAAIC,GAAa,QAAUD,GAAI,MAC/BA,GAAI,OAASP,EAAc,SAC3BO,GAAI,WAAa,GACjB,IAAIE,GAAgBhC,EAAG,cACvBA,EAAG,cAAgB8B,GAAI,cAAgB,GACvC,IAAIG,GAAQjC,EAAG,SAAS8B,EAAG,EAAE,QAAQ,oBAAqBN,CAAa,EACvExB,EAAG,cAAgB8B,GAAI,cAAgBE,GACvC7B,GAAO,IAAO8B,EAChB,KAAO,CACL,IAAIC,GAAaA,IAAc,CAAC,EAChCA,GAAW,KAAK/B,CAAG,EACnBA,EAAM,GACNA,GAAO,KAAQqB,EAAiB,UAC5BxB,EAAG,KAAK,YACVG,GAAO,OAEPA,GAAO,OAELiB,GAAYF,EAAM,SAAW,GAC/Bf,GAAO,MAASQ,EAAS,IAEzBR,GAAO,MAASY,EAAgB,MAASJ,EAAS,qBAAwBX,EAAG,WAAc,IAE7FG,GAAO,sBACHH,EAAG,WAAa,OAClBG,GAAO,MAASH,EAAG,WAErB,IAAImC,GAAc9B,EAAW,QAAWA,EAAW,GAAM,IAAM,aAC7D+B,GAAsB/B,EAAWL,EAAG,YAAYK,CAAQ,EAAI,qBAC9DF,GAAO,MAASgC,GAAe,MAASC,GAAuB,kBAC/D,IAAIC,GAAuBlC,EAC3BA,EAAM+B,GAAW,IAAI,EACjBhB,EAAM,SAAW,IACnBf,GAAO,IAAOS,EAAU,MACpBiB,IACF1B,GAAO,UAETA,GAAO,GAAMkC,GAAwB,MAEjCR,GACFH,EAAY,eAAiBtB,EAC7BD,GAAO,QAAWuB,EAAa,kBAAqBd,EAAU,YAAeyB,GAAwB,mBAAsBzB,EAAU,+CAAkDc,EAAa,iCAEpMvB,GAAO,IAAOuB,EAAa,YAAed,EAAU,MAASyB,GAAwB,IAG3F,CAKA,GAJInB,EAAM,YACRf,GAAO,QAAWgC,GAAe,KAAQxB,EAAS,MAASwB,GAAe,IAAOC,GAAuB,MAE1GjC,GAAO,GAAMgB,EACTD,EAAM,MACJT,IACFN,GAAO,qBAEJ,CACLA,GAAO,SACHe,EAAM,QAAU,QAClBf,GAAO,KACHmB,GACFnB,GAAO,GAAM4B,GAEb5B,GAAO,GAAMS,GAGfT,GAAO,IAAO,CAACe,EAAM,MAAS,IAEhCf,GAAO,OACPO,EAAgBM,EAAM,QACtB,IAAIkB,GAAaA,IAAc,CAAC,EAChCA,GAAW,KAAK/B,CAAG,EACnBA,EAAM,GACN,IAAI+B,GAAaA,IAAc,CAAC,EAChCA,GAAW,KAAK/B,CAAG,EACnBA,EAAM,GACFH,EAAG,eAAiB,IACtBG,GAAO,iBAAoBO,GAAiB,UAAY,oCAA0CV,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,0BAA8BQ,EAAM,QAAW,OAC5NhB,EAAG,KAAK,WAAa,KACvBG,GAAO,6BAAiCa,EAAM,QAAW,0BAEvDhB,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeW,EAAS,KAEvIR,GAAO,OAEPA,GAAO,OAET,IAAImC,GAAQnC,EACZA,EAAM+B,GAAW,IAAI,EACjB,CAAClC,EAAG,eAAiBS,EAEnBT,EAAG,MACLG,GAAO,+BAAkCmC,GAAS,OAElDnC,GAAO,uBAA0BmC,GAAS,oBAG5CnC,GAAO,cAAiBmC,GAAS,+EAEnC,IAAIC,GAAkBpC,EACtBA,EAAM+B,GAAW,IAAI,EACjBb,EACEH,EAAM,OACJA,EAAM,QAAU,SAClBf,GAAO,cAAiBwB,EAAM,IAAOd,EAAS,KAAQc,EAAM,YAAeA,EAAM,aAAgBC,EAAY,cAAiBD,EAAM,UAAaC,EAAY,4BAA+BA,EAAY,kCAAuC5B,EAAG,UAAa,SAAY4B,EAAY,gCAAmCA,EAAY,kBAAqBpB,EAAkB,QACzWR,EAAG,KAAK,UACVG,GAAO,IAAOyB,EAAY,aAAgBb,EAAgB,KAAQa,EAAY,WAAcjB,EAAS,MAEvGR,GAAO,OAGLe,EAAM,SAAW,GACnBf,GAAO,IAAOoC,GAAmB,KAEjCpC,GAAO,QAAWU,EAAS,iBAAoB0B,GAAmB,uBAA0BZ,EAAM,IAAOd,EAAS,KAAQc,EAAM,YAAeA,EAAM,aAAgBC,EAAY,cAAiBD,EAAM,UAAaC,EAAY,4BAA+BA,EAAY,kCAAuC5B,EAAG,UAAa,SAAY4B,EAAY,gCAAmCA,EAAY,kBAAqBpB,EAAkB,QAC7aR,EAAG,KAAK,UACVG,GAAO,IAAOyB,EAAY,aAAgBb,EAAgB,KAAQa,EAAY,WAAcjB,EAAS,MAEvGR,GAAO,SAGFmB,IACTnB,GAAO,kBACHH,EAAG,eAAiB,IACtBG,GAAO,iBAAoBO,GAAiB,UAAY,oCAA0CV,EAAG,UAAa,kBAAqBA,EAAG,KAAK,eAAeQ,CAAc,EAAK,0BAA8BQ,EAAM,QAAW,OAC5NhB,EAAG,KAAK,WAAa,KACvBG,GAAO,6BAAiCa,EAAM,QAAW,0BAEvDhB,EAAG,KAAK,UACVG,GAAO,6BAAgCI,EAAe,mCAAsCP,EAAG,WAAc,YAAeW,EAAS,KAEvIR,GAAO,OAEPA,GAAO,OAETA,GAAO,+EACH,CAACH,EAAG,eAAiBS,IAEnBT,EAAG,MACLG,GAAO,wCAEPA,GAAO,+CAIPe,EAAM,SAAW,GACnBf,GAAO,IAAOoC,GAAmB,KAEjCpC,GAAO,sBAAyBuB,EAAa,wCAA2CA,EAAa,mCAAsCA,EAAa,yCAA4CC,EAAM,IAAOd,EAAS,KAAQc,EAAM,YAAeA,EAAM,aAAgBC,EAAY,cAAiBD,EAAM,UAAaC,EAAY,4BAA+BA,EAAY,kCAAuC5B,EAAG,UAAa,MAAS4B,EAAY,kBAAqBpB,EAAkB,OACneR,EAAG,KAAK,UACVG,GAAO,IAAOyB,EAAY,aAAgBb,EAAgB,KAAQa,EAAY,WAAcjB,EAAS,MAEvGR,GAAO,eAAkBoC,GAAmB,OAGhDpC,GAAO,MACHM,IACFN,GAAO,WAEX,CACA,OAAOA,CACT,EAlOiB,qBCDjB,IAAAqC,GAAAC,GAAA,CAAAC,GAAAC,KAAA,CAAAA,GAAA,SACI,QAAW,0CACX,IAAO,0CACP,MAAS,0BACT,YAAe,CACX,YAAe,CACX,KAAQ,QACR,SAAY,EACZ,MAAS,CAAE,KAAQ,GAAI,CAC3B,EACA,mBAAsB,CAClB,KAAQ,UACR,QAAW,CACf,EACA,2BAA8B,CAC1B,MAAS,CACL,CAAE,KAAQ,kCAAmC,EAC7C,CAAE,QAAW,CAAE,CACnB,CACJ,EACA,YAAe,CACX,KAAQ,CACJ,QACA,UACA,UACA,OACA,SACA,SACA,QACJ,CACJ,EACA,YAAe,CACX,KAAQ,QACR,MAAS,CAAE,KAAQ,QAAS,EAC5B,YAAe,GACf,QAAW,CAAC,CAChB,CACJ,EACA,KAAQ,CAAC,SAAU,SAAS,EAC5B,WAAc,CACV,IAAO,CACH,KAAQ,SACR,OAAU,eACd,EACA,QAAW,CACP,KAAQ,SACR,OAAU,KACd,EACA,KAAQ,CACJ,KAAQ,SACR,OAAU,eACd,EACA,SAAY,CACR,KAAQ,QACZ,EACA,MAAS,CACL,KAAQ,QACZ,EACA,YAAe,CACX,KAAQ,QACZ,EACA,QAAW,GACX,SAAY,CACR,KAAQ,UACR,QAAW,EACf,EACA,SAAY,CACR,KAAQ,QACR,MAAS,EACb,EACA,WAAc,CACV,KAAQ,SACR,iBAAoB,CACxB,EACA,QAAW,CACP,KAAQ,QACZ,EACA,iBAAoB,CAChB,KAAQ,QACZ,EACA,QAAW,CACP,KAAQ,QACZ,EACA,iBAAoB,CAChB,KAAQ,QACZ,EACA,UAAa,CAAE,KAAQ,kCAAmC,EAC1D,UAAa,CAAE,KAAQ,0CAA2C,EAClE,QAAW,CACP,KAAQ,SACR,OAAU,OACd,EACA,gBAAmB,CAAE,KAAQ,GAAI,EACjC,MAAS,CACL,MAAS,CACL,CAAE,KAAQ,GAAI,EACd,CAAE,KAAQ,2BAA4B,CAC1C,EACA,QAAW,EACf,EACA,SAAY,CAAE,KAAQ,kCAAmC,EACzD,SAAY,CAAE,KAAQ,0CAA2C,EACjE,YAAe,CACX,KAAQ,UACR,QAAW,EACf,EACA,SAAY,CAAE,KAAQ,GAAI,EAC1B,cAAiB,CAAE,KAAQ,kCAAmC,EAC9D,cAAiB,CAAE,KAAQ,0CAA2C,EACtE,SAAY,CAAE,KAAQ,2BAA4B,EAClD,qBAAwB,CAAE,KAAQ,GAAI,EACtC,YAAe,CACX,KAAQ,SACR,qBAAwB,CAAE,KAAQ,GAAI,EACtC,QAAW,CAAC,CAChB,EACA,WAAc,CACV,KAAQ,SACR,qBAAwB,CAAE,KAAQ,GAAI,EACtC,QAAW,CAAC,CAChB,EACA,kBAAqB,CACjB,KAAQ,SACR,qBAAwB,CAAE,KAAQ,GAAI,EACtC,cAAiB,CAAE,OAAU,OAAQ,EACrC,QAAW,CAAC,CAChB,EACA,aAAgB,CACZ,KAAQ,SACR,qBAAwB,CACpB,MAAS,CACL,CAAE,KAAQ,GAAI,EACd,CAAE,KAAQ,2BAA4B,CAC1C,CACJ,CACJ,EACA,cAAiB,CAAE,KAAQ,GAAI,EAC/B,MAAS,GACT,KAAQ,CACJ,KAAQ,QACR,MAAS,GACT,SAAY,EACZ,YAAe,EACnB,EACA,KAAQ,CACJ,MAAS,CACL,CAAE,KAAQ,2BAA4B,EACtC,CACI,KAAQ,QACR,MAAS,CAAE,KAAQ,2BAA4B,EAC/C,SAAY,EACZ,YAAe,EACnB,CACJ,CACJ,EACA,OAAU,CAAE,KAAQ,QAAS,EAC7B,iBAAoB,CAAE,KAAQ,QAAS,EACvC,gBAAmB,CAAE,KAAQ,QAAS,EACtC,GAAM,CAAC,KAAQ,GAAG,EAClB,KAAQ,CAAC,KAAQ,GAAG,EACpB,KAAQ,CAAC,KAAQ,GAAG,EACpB,MAAS,CAAE,KAAQ,2BAA4B,EAC/C,MAAS,CAAE,KAAQ,2BAA4B,EAC/C,MAAS,CAAE,KAAQ,2BAA4B,EAC/C,IAAO,CAAE,KAAQ,GAAI,CACzB,EACA,QAAW,EACf,ICvKA,IAAAC,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAa,KAEjBD,GAAO,QAAU,CACf,IAAK,4EACL,YAAa,CACX,YAAaC,GAAW,YAAY,WACtC,EACA,KAAM,SACN,aAAc,CACZ,OAAQ,CAAC,UAAU,EACnB,MAAO,CAAC,UAAU,EAClB,WAAY,CAAC,QAAQ,EACrB,MAAO,CAAC,IAAK,CAAC,SAAU,CAAC,OAAO,CAAC,CAAC,CACpC,EACA,WAAY,CACV,KAAMA,GAAW,WAAW,KAC5B,OAAQ,CAAC,KAAM,SAAS,EACxB,WAAY,CAAC,KAAM,SAAS,EAC5B,aAAc,CACZ,KAAM,QACN,MAAO,CAAC,KAAM,QAAQ,CACxB,EACA,WAAY,CAAC,KAAM,QAAQ,EAC3B,UAAW,CAAC,KAAM,SAAS,EAC3B,MAAO,CAAC,KAAM,SAAS,EACvB,MAAO,CAAC,KAAM,SAAS,EACvB,MAAO,CAAC,KAAM,SAAS,EACvB,OAAQ,CACN,MAAO,CACL,CAAC,KAAM,SAAS,EAChB,CAAC,MAAO,MAAM,CAChB,CACF,CACF,CACF,ICpCA,IAAAC,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAa,yBACbC,GAAiB,KACjBC,GAAmB,KAEvBH,GAAO,QAAU,CACf,IAAKI,GACL,IAAKC,GACL,OAAQC,GACR,SAAUC,EACZ,EAUA,SAASH,GAAWI,EAASC,EAAY,CAGvC,IAAIC,EAAQ,KAAK,MACjB,GAAIA,EAAM,SAASF,CAAO,EACxB,MAAM,IAAI,MAAM,WAAaA,EAAU,qBAAqB,EAE9D,GAAI,CAACP,GAAW,KAAKO,CAAO,EAC1B,MAAM,IAAI,MAAM,WAAaA,EAAU,4BAA4B,EAErE,GAAIC,EAAY,CACd,KAAK,gBAAgBA,EAAY,EAAI,EAErC,IAAIE,EAAWF,EAAW,KAC1B,GAAI,MAAM,QAAQE,CAAQ,EACxB,QAAS,EAAE,EAAG,EAAEA,EAAS,OAAQ,IAC/BC,EAASJ,EAASG,EAAS,CAAC,EAAGF,CAAU,OAE3CG,EAASJ,EAASG,EAAUF,CAAU,EAGxC,IAAII,EAAaJ,EAAW,WACxBI,IACEJ,EAAW,OAAS,KAAK,MAAM,QACjCI,EAAa,CACX,MAAO,CACLA,EACA,CAAE,KAAQ,gFAAiF,CAC7F,CACF,GAEFJ,EAAW,eAAiB,KAAK,QAAQI,EAAY,EAAI,EAE7D,CAEAH,EAAM,SAASF,CAAO,EAAIE,EAAM,IAAIF,CAAO,EAAI,GAG/C,SAASI,EAASJ,EAASG,EAAUF,EAAY,CAE/C,QADIK,EACKC,EAAE,EAAGA,EAAEL,EAAM,OAAQK,IAAK,CACjC,IAAIC,EAAKN,EAAMK,CAAC,EAChB,GAAIC,EAAG,MAAQL,EAAU,CACvBG,EAAYE,EACZ,KACF,CACF,CAEKF,IACHA,EAAY,CAAE,KAAMH,EAAU,MAAO,CAAC,CAAE,EACxCD,EAAM,KAAKI,CAAS,GAGtB,IAAIG,EAAO,CACT,QAAST,EACT,WAAYC,EACZ,OAAQ,GACR,KAAMP,GACN,WAAYO,EAAW,UACzB,EACAK,EAAU,MAAM,KAAKG,CAAI,EACzBP,EAAM,OAAOF,CAAO,EAAIS,CAC1B,CAxBS,OAAAC,EAAAN,EAAA,YA0BF,IACT,CAjESM,EAAAd,GAAA,cA0ET,SAASC,GAAWG,EAAS,CAE3B,IAAIS,EAAO,KAAK,MAAM,OAAOT,CAAO,EACpC,OAAOS,EAAOA,EAAK,WAAa,KAAK,MAAM,SAAST,CAAO,GAAK,EAClE,CAJSU,EAAAb,GAAA,cAaT,SAASC,GAAcE,EAAS,CAE9B,IAAIE,EAAQ,KAAK,MACjB,OAAOA,EAAM,SAASF,CAAO,EAC7B,OAAOE,EAAM,IAAIF,CAAO,EACxB,OAAOE,EAAM,OAAOF,CAAO,EAC3B,QAASO,EAAE,EAAGA,EAAEL,EAAM,OAAQK,IAE5B,QADII,EAAQT,EAAMK,CAAC,EAAE,MACZK,EAAE,EAAGA,EAAED,EAAM,OAAQC,IAC5B,GAAID,EAAMC,CAAC,EAAE,SAAWZ,EAAS,CAC/BW,EAAM,OAAOC,EAAG,CAAC,EACjB,KACF,CAGJ,OAAO,IACT,CAhBSF,EAAAZ,GAAA,iBA0BT,SAASC,GAAgBE,EAAYY,EAAY,CAC/Cd,GAAgB,OAAS,KACzB,IAAIe,EAAI,KAAK,iBAAmB,KAAK,kBACF,KAAK,QAAQnB,GAAkB,EAAI,EAEtE,GAAImB,EAAEb,CAAU,EAAG,MAAO,GAE1B,GADAF,GAAgB,OAASe,EAAE,OACvBD,EACF,MAAM,IAAI,MAAM,yCAA4C,KAAK,WAAWC,EAAE,MAAM,CAAC,EAErF,MAAO,EACX,CAXSJ,EAAAX,GAAA,qBCtIT,IAAAgB,GAAAC,GAAA,CAAAC,GAAAC,KAAA,CAAAA,GAAA,SACI,QAAW,0CACX,IAAO,iFACP,YAAe,mEACf,KAAQ,SACR,SAAY,CAAE,OAAQ,EACtB,WAAc,CACV,MAAS,CACL,KAAQ,SACR,MAAS,CACL,CAAE,OAAU,uBAAwB,EACpC,CAAE,OAAU,cAAe,CAC/B,CACJ,CACJ,EACA,qBAAwB,EAC5B,IChBA,IAAAC,GAAAC,GAAA,CAAAC,GAAAC,KAAA,cAEA,IAAIC,GAAgB,KAChBC,GAAU,KACVC,GAAQ,KACRC,GAAe,KACfC,GAAkB,KAClBC,GAAU,KACVC,GAAQ,KACRC,GAAkB,KAClBC,GAAO,KAEXT,GAAO,QAAUU,GAEjBA,GAAI,UAAU,SAAWC,GACzBD,GAAI,UAAU,QAAUE,GACxBF,GAAI,UAAU,UAAYG,GAC1BH,GAAI,UAAU,cAAgBI,GAC9BJ,GAAI,UAAU,eAAiBK,GAC/BL,GAAI,UAAU,UAAYM,GAC1BN,GAAI,UAAU,aAAeO,GAC7BP,GAAI,UAAU,UAAYQ,GAC1BR,GAAI,UAAU,WAAaS,GAE3BT,GAAI,UAAU,WAAaU,GAC3BV,GAAI,UAAU,SAAWW,GAEzBX,GAAI,UAAU,aAAe,KAC7B,IAAIY,GAAgB,KACpBZ,GAAI,UAAU,WAAaY,GAAc,IACzCZ,GAAI,UAAU,WAAaY,GAAc,IACzCZ,GAAI,UAAU,cAAgBY,GAAc,OAC5CZ,GAAI,UAAU,gBAAkBY,GAAc,SAE9C,IAAIC,GAAe,KACnBb,GAAI,gBAAkBa,GAAa,WACnCb,GAAI,gBAAkBa,GAAa,WACnCb,GAAI,gBAAkBF,GAEtB,IAAIgB,GAAiB,yCAEjBC,GAAsB,CAAE,mBAAoB,cAAe,cAAe,gBAAiB,EAC3FC,GAAoB,CAAC,aAAa,EAQtC,SAAShB,GAAIiB,EAAM,CACjB,GAAI,EAAE,gBAAgBjB,IAAM,OAAO,IAAIA,GAAIiB,CAAI,EAC/CA,EAAO,KAAK,MAAQlB,GAAK,KAAKkB,CAAI,GAAK,CAAC,EACxCC,GAAU,IAAI,EACd,KAAK,SAAW,CAAC,EACjB,KAAK,MAAQ,CAAC,EACd,KAAK,WAAa,CAAC,EACnB,KAAK,SAAWtB,GAAQqB,EAAK,MAAM,EAEnC,KAAK,OAASA,EAAK,OAAS,IAAIxB,GAChC,KAAK,gBAAkB,CAAC,EACxB,KAAK,cAAgB,CAAC,EACtB,KAAK,MAAQI,GAAM,EACnB,KAAK,OAASsB,GAAYF,CAAI,EAE9BA,EAAK,aAAeA,EAAK,cAAgB,IACrCA,EAAK,eAAiB,aAAYA,EAAK,uBAAyB,IAChEA,EAAK,YAAc,SAAWA,EAAK,UAAYtB,IACnD,KAAK,UAAYyB,GAAqB,IAAI,EAEtCH,EAAK,SAASI,GAAkB,IAAI,EACpCJ,EAAK,UAAUK,GAAmB,IAAI,EAC1CC,GAAqB,IAAI,EACrB,OAAON,EAAK,MAAQ,UAAU,KAAK,cAAcA,EAAK,IAAI,EAC1DA,EAAK,UAAU,KAAK,WAAW,WAAY,CAAC,WAAY,CAAC,KAAM,SAAS,CAAC,CAAC,EAC9EO,GAAkB,IAAI,CACxB,CA1BSC,EAAAzB,GAAA,OAsCT,SAASC,GAASyB,EAAcC,EAAM,CACpC,IAAIC,EACJ,GAAI,OAAOF,GAAgB,UAEzB,GADAE,EAAI,KAAK,UAAUF,CAAY,EAC3B,CAACE,EAAG,MAAM,IAAI,MAAM,8BAAgCF,EAAe,GAAG,MACrE,CACL,IAAIG,EAAY,KAAK,WAAWH,CAAY,EAC5CE,EAAIC,EAAU,UAAY,KAAK,SAASA,CAAS,CACnD,CAEA,IAAIC,EAAQF,EAAED,CAAI,EAClB,OAAIC,EAAE,SAAW,KAAM,KAAK,OAASA,EAAE,QAChCE,CACT,CAbSL,EAAAxB,GAAA,YAuBT,SAASC,GAAQ6B,EAAQC,EAAO,CAC9B,IAAIH,EAAY,KAAK,WAAWE,EAAQ,OAAWC,CAAK,EACxD,OAAOH,EAAU,UAAY,KAAK,SAASA,CAAS,CACtD,CAHSJ,EAAAvB,GAAA,WAeT,SAASC,GAAU4B,EAAQE,EAAKC,EAAiBF,EAAO,CACtD,GAAI,MAAM,QAAQD,CAAM,EAAE,CACxB,QAAS,EAAE,EAAG,EAAEA,EAAO,OAAQ,IAAK,KAAK,UAAUA,EAAO,CAAC,EAAG,OAAWG,EAAiBF,CAAK,EAC/F,OAAO,IACT,CACA,IAAIG,EAAK,KAAK,OAAOJ,CAAM,EAC3B,GAAII,IAAO,QAAa,OAAOA,GAAM,SACnC,MAAM,IAAI,MAAM,0BAA0B,EAC5C,OAAAF,EAAMzC,GAAQ,YAAYyC,GAAOE,CAAE,EACnCC,GAAY,KAAMH,CAAG,EACrB,KAAK,SAASA,CAAG,EAAI,KAAK,WAAWF,EAAQG,EAAiBF,EAAO,EAAI,EAClE,IACT,CAZSP,EAAAtB,GAAA,aAwBT,SAASC,GAAc2B,EAAQE,EAAKI,EAAgB,CAClD,YAAK,UAAUN,EAAQE,EAAKI,EAAgB,EAAI,EACzC,IACT,CAHSZ,EAAArB,GAAA,iBAaT,SAASC,GAAe0B,EAAQO,EAAiB,CAC/C,IAAIC,EAAUR,EAAO,QACrB,GAAIQ,IAAY,QAAa,OAAOA,GAAW,SAC7C,MAAM,IAAI,MAAM,0BAA0B,EAE5C,GADAA,EAAUA,GAAW,KAAK,MAAM,aAAeC,GAAY,IAAI,EAC3D,CAACD,EACH,YAAK,OAAO,KAAK,2BAA2B,EAC5C,KAAK,OAAS,KACP,GAET,IAAIT,EAAQ,KAAK,SAASS,EAASR,CAAM,EACzC,GAAI,CAACD,GAASQ,EAAiB,CAC7B,IAAIG,EAAU,sBAAwB,KAAK,WAAW,EACtD,GAAI,KAAK,MAAM,gBAAkB,MAAO,KAAK,OAAO,MAAMA,CAAO,MAC5D,OAAM,IAAI,MAAMA,CAAO,CAC9B,CACA,OAAOX,CACT,CAjBSL,EAAApB,GAAA,kBAoBT,SAASmC,GAAYE,EAAM,CACzB,IAAIC,EAAOD,EAAK,MAAM,KACtB,OAAAA,EAAK,MAAM,YAAc,OAAOC,GAAQ,SACZD,EAAK,OAAOC,CAAI,GAAKA,EACrBD,EAAK,UAAU5B,EAAc,EAC3BA,GACA,OACvB4B,EAAK,MAAM,WACpB,CARSjB,EAAAe,GAAA,eAiBT,SAASlC,GAAUsC,EAAQ,CACzB,IAAIf,EAAYgB,GAAc,KAAMD,CAAM,EAC1C,OAAQ,OAAOf,EAAW,CACxB,IAAK,SAAU,OAAOA,EAAU,UAAY,KAAK,SAASA,CAAS,EACnE,IAAK,SAAU,OAAO,KAAK,UAAUA,CAAS,EAC9C,IAAK,YAAa,OAAOiB,GAAmB,KAAMF,CAAM,CAC1D,CACF,CAPSnB,EAAAnB,GAAA,aAUT,SAASwC,GAAmBJ,EAAMK,EAAK,CACrC,IAAIC,EAAMxD,GAAQ,OAAO,KAAKkD,EAAM,CAAE,OAAQ,CAAC,CAAE,EAAGK,CAAG,EACvD,GAAIC,EAAK,CACP,IAAIjB,EAASiB,EAAI,OACbC,EAAOD,EAAI,KACXE,EAASF,EAAI,OACbpB,EAAIrC,GAAc,KAAKmD,EAAMX,EAAQkB,EAAM,OAAWC,CAAM,EAChE,OAAAR,EAAK,WAAWK,CAAG,EAAI,IAAIrD,GAAa,CACtC,IAAKqD,EACL,SAAU,GACV,OAAQhB,EACR,KAAMkB,EACN,OAAQC,EACR,SAAUtB,CACZ,CAAC,EACMA,CACT,CACF,CAjBSH,EAAAqB,GAAA,sBAoBT,SAASD,GAAcH,EAAME,EAAQ,CACnC,OAAAA,EAASpD,GAAQ,YAAYoD,CAAM,EAC5BF,EAAK,SAASE,CAAM,GAAKF,EAAK,MAAME,CAAM,GAAKF,EAAK,WAAWE,CAAM,CAC9E,CAHSnB,EAAAoB,GAAA,iBAeT,SAAStC,GAAamB,EAAc,CAClC,GAAIA,aAAwB,OAC1B,OAAAyB,GAAkB,KAAM,KAAK,SAAUzB,CAAY,EACnDyB,GAAkB,KAAM,KAAK,MAAOzB,CAAY,EACzC,KAET,OAAQ,OAAOA,EAAc,CAC3B,IAAK,YACH,OAAAyB,GAAkB,KAAM,KAAK,QAAQ,EACrCA,GAAkB,KAAM,KAAK,KAAK,EAClC,KAAK,OAAO,MAAM,EACX,KACT,IAAK,SACH,IAAItB,EAAYgB,GAAc,KAAMnB,CAAY,EAChD,OAAIG,GAAW,KAAK,OAAO,IAAIA,EAAU,QAAQ,EACjD,OAAO,KAAK,SAASH,CAAY,EACjC,OAAO,KAAK,MAAMA,CAAY,EACvB,KACT,IAAK,SACH,IAAI0B,EAAY,KAAK,MAAM,UACvBC,EAAWD,EAAYA,EAAU1B,CAAY,EAAIA,EACrD,KAAK,OAAO,IAAI2B,CAAQ,EACxB,IAAIlB,EAAK,KAAK,OAAOT,CAAY,EAC7BS,IACFA,EAAK3C,GAAQ,YAAY2C,CAAE,EAC3B,OAAO,KAAK,SAASA,CAAE,EACvB,OAAO,KAAK,MAAMA,CAAE,EAE1B,CACA,OAAO,IACT,CA9BSV,EAAAlB,GAAA,gBAiCT,SAAS4C,GAAkBT,EAAMY,EAASC,EAAO,CAC/C,QAASX,KAAUU,EAAS,CAC1B,IAAIzB,EAAYyB,EAAQV,CAAM,EAC1B,CAACf,EAAU,OAAS,CAAC0B,GAASA,EAAM,KAAKX,CAAM,KACjDF,EAAK,OAAO,IAAIb,EAAU,QAAQ,EAClC,OAAOyB,EAAQV,CAAM,EAEzB,CACF,CARSnB,EAAA0B,GAAA,qBAYT,SAASzC,GAAWqB,EAAQM,EAAgBM,EAAMa,EAAiB,CACjE,GAAI,OAAOzB,GAAU,UAAY,OAAOA,GAAU,UAChD,MAAM,IAAI,MAAM,oCAAoC,EACtD,IAAIqB,EAAY,KAAK,MAAM,UACvBC,EAAWD,EAAYA,EAAUrB,CAAM,EAAIA,EAC3C0B,EAAS,KAAK,OAAO,IAAIJ,CAAQ,EACrC,GAAII,EAAQ,OAAOA,EAEnBD,EAAkBA,GAAmB,KAAK,MAAM,gBAAkB,GAElE,IAAIrB,EAAK3C,GAAQ,YAAY,KAAK,OAAOuC,CAAM,CAAC,EAC5CI,GAAMqB,GAAiBpB,GAAY,KAAMD,CAAE,EAE/C,IAAIuB,EAAe,KAAK,MAAM,iBAAmB,IAAS,CAACrB,EACvDsB,EACAD,GAAgB,EAAEC,EAAgBxB,GAAMA,GAAM3C,GAAQ,YAAYuC,EAAO,OAAO,IAClF,KAAK,eAAeA,EAAQ,EAAI,EAElC,IAAI6B,EAAYpE,GAAQ,IAAI,KAAK,KAAMuC,CAAM,EAEzCF,EAAY,IAAInC,GAAa,CAC/B,GAAIyC,EACJ,OAAQJ,EACR,UAAW6B,EACX,SAAUP,EACV,KAAMV,CACR,CAAC,EAED,OAAIR,EAAG,CAAC,GAAK,KAAOqB,IAAiB,KAAK,MAAMrB,CAAE,EAAIN,GACtD,KAAK,OAAO,IAAIwB,EAAUxB,CAAS,EAE/B6B,GAAgBC,GAAe,KAAK,eAAe5B,EAAQ,EAAI,EAE5DF,CACT,CAlCSJ,EAAAf,GAAA,cAsCT,SAASC,GAASkB,EAAWoB,EAAM,CACjC,GAAIpB,EAAU,UACZ,OAAAA,EAAU,SAAWgC,EACrBA,EAAa,OAAShC,EAAU,OAChCgC,EAAa,OAAS,KACtBA,EAAa,KAAOZ,GAAcY,EAC9BhC,EAAU,OAAO,SAAW,KAC9BgC,EAAa,OAAS,IACjBA,EAEThC,EAAU,UAAY,GAEtB,IAAIiC,EACAjC,EAAU,OACZiC,EAAc,KAAK,MACnB,KAAK,MAAQ,KAAK,WAGpB,IAAIlC,EACJ,GAAI,CAAEA,EAAIrC,GAAc,KAAK,KAAMsC,EAAU,OAAQoB,EAAMpB,EAAU,SAAS,CAAG,OAC3EkC,EAAG,CACP,aAAOlC,EAAU,SACXkC,CACR,QACA,CACElC,EAAU,UAAY,GAClBA,EAAU,OAAM,KAAK,MAAQiC,EACnC,CAEA,OAAAjC,EAAU,SAAWD,EACrBC,EAAU,KAAOD,EAAE,KACnBC,EAAU,OAASD,EAAE,OACrBC,EAAU,KAAOD,EAAE,KACZA,EAIP,SAASiC,GAAe,CAEtB,IAAIG,EAAYnC,EAAU,SACtBoC,EAASD,EAAU,MAAM,KAAM,SAAS,EAC5C,OAAAH,EAAa,OAASG,EAAU,OACzBC,CACT,CANSxC,EAAAoC,EAAA,eAOX,CA5CSpC,EAAAd,GAAA,YA+CT,SAASQ,GAAYF,EAAM,CACzB,OAAQA,EAAK,SAAU,CACrB,IAAK,OAAQ,OAAOiD,GACpB,IAAK,KAAM,OAAOC,GAClB,QAAS,OAAOC,EAClB,CACF,CANS3C,EAAAN,GAAA,eAST,SAASgD,GAAOpC,EAAQ,CACtB,OAAIA,EAAO,KAAK,KAAK,OAAO,KAAK,qBAAsBA,EAAO,GAAG,EAC1DA,EAAO,EAChB,CAHSN,EAAA0C,GAAA,UAMT,SAASC,GAAQrC,EAAQ,CACvB,OAAIA,EAAO,IAAI,KAAK,OAAO,KAAK,oBAAqBA,EAAO,EAAE,EACvDA,EAAO,GAChB,CAHSN,EAAA2C,GAAA,WAMT,SAASF,GAAYnC,EAAQ,CAC3B,GAAIA,EAAO,KAAOA,EAAO,IAAMA,EAAO,KAAOA,EAAO,GAClD,MAAM,IAAI,MAAM,iCAAiC,EACnD,OAAOA,EAAO,KAAOA,EAAO,EAC9B,CAJSN,EAAAyC,GAAA,eAcT,SAASzD,GAAW4D,EAAQC,EAAS,CAEnC,GADAD,EAASA,GAAU,KAAK,OACpB,CAACA,EAAQ,MAAO,YACpBC,EAAUA,GAAW,CAAC,EAKtB,QAJIC,EAAYD,EAAQ,YAAc,OAAY,KAAOA,EAAQ,UAC7DE,EAAUF,EAAQ,UAAY,OAAY,OAASA,EAAQ,QAE3DG,EAAO,GACFC,EAAE,EAAGA,EAAEL,EAAO,OAAQK,IAAK,CAClC,IAAIX,EAAIM,EAAOK,CAAC,EACZX,IAAGU,GAAQD,EAAUT,EAAE,SAAW,IAAMA,EAAE,QAAUQ,EAC1D,CACA,OAAOE,EAAK,MAAM,EAAG,CAACF,EAAU,MAAM,CACxC,CAbS9C,EAAAhB,GAAA,cAuBT,SAASD,GAAUmE,EAAMC,EAAQ,CAC/B,OAAI,OAAOA,GAAU,WAAUA,EAAS,IAAI,OAAOA,CAAM,GACzD,KAAK,SAASD,CAAI,EAAIC,EACf,IACT,CAJSnD,EAAAjB,GAAA,aAOT,SAASe,GAAqBmB,EAAM,CAClC,IAAImC,EAKJ,GAJInC,EAAK,MAAM,QACbmC,EAAc,KACdnC,EAAK,cAAcmC,EAAaA,EAAY,IAAK,EAAI,GAEnDnC,EAAK,MAAM,OAAS,GACxB,KAAIoC,EAAa,KACbpC,EAAK,MAAM,QAAOoC,EAAahF,GAAgBgF,EAAY9D,EAAiB,GAChF0B,EAAK,cAAcoC,EAAYhE,GAAgB,EAAI,EACnD4B,EAAK,MAAM,+BAA+B,EAAI5B,GAChD,CAXSW,EAAAF,GAAA,wBAcT,SAASC,GAAkBkB,EAAM,CAC/B,IAAIqC,EAAcrC,EAAK,MAAM,QAC7B,GAAKqC,EACL,GAAI,MAAM,QAAQA,CAAW,EAAGrC,EAAK,UAAUqC,CAAW,MACrD,SAAS9C,KAAO8C,EAAarC,EAAK,UAAUqC,EAAY9C,CAAG,EAAGA,CAAG,CACxE,CALSR,EAAAD,GAAA,qBAQT,SAASH,GAAkBqB,EAAM,CAC/B,QAASiC,KAAQjC,EAAK,MAAM,QAAS,CACnC,IAAIkC,EAASlC,EAAK,MAAM,QAAQiC,CAAI,EACpCjC,EAAK,UAAUiC,EAAMC,CAAM,CAC7B,CACF,CALSnD,EAAAJ,GAAA,qBAQT,SAASC,GAAmBoB,EAAM,CAChC,QAASiC,KAAQjC,EAAK,MAAM,SAAU,CACpC,IAAIsC,EAAUtC,EAAK,MAAM,SAASiC,CAAI,EACtCjC,EAAK,WAAWiC,EAAMK,CAAO,CAC/B,CACF,CALSvD,EAAAH,GAAA,sBAQT,SAASc,GAAYM,EAAMP,EAAI,CAC7B,GAAIO,EAAK,SAASP,CAAE,GAAKO,EAAK,MAAMP,CAAE,EACpC,MAAM,IAAI,MAAM,0BAA4BA,EAAK,kBAAkB,CACvE,CAHSV,EAAAW,GAAA,eAMT,SAAShB,GAAqBsB,EAAM,CAElC,QADIuC,EAAWlF,GAAK,KAAK2C,EAAK,KAAK,EAC1BgC,EAAE,EAAGA,EAAE3D,GAAoB,OAAQ2D,IAC1C,OAAOO,EAASlE,GAAoB2D,CAAC,CAAC,EACxC,OAAOO,CACT,CALSxD,EAAAL,GAAA,wBAQT,SAASF,GAAUwB,EAAM,CACvB,IAAIwC,EAASxC,EAAK,MAAM,OACxB,GAAIwC,IAAW,GACbxC,EAAK,OAAS,CAAC,IAAKyC,GAAM,KAAMA,GAAM,MAAOA,EAAI,MAC5C,CAEL,GADID,IAAW,SAAWA,EAAS,SAC/B,EAAE,OAAOA,GAAU,UAAYA,EAAO,KAAOA,EAAO,MAAQA,EAAO,OACrE,MAAM,IAAI,MAAM,mDAAmD,EACrExC,EAAK,OAASwC,CAChB,CACF,CAVSzD,EAAAP,GAAA,aAaT,SAASiE,IAAO,CAAC,CAAR1D,EAAA0D,GAAA,UCzfT,IAAAC,GAAA,GAAAC,GAAAD,GAAA,kBAAAE,GAAA,mBAAAC,GAAA,kBAAAC,GAAA,eAAAC,GAAA,qBAAAC,GAAA,2BAAAC,GAAA,eAAAC,GAAA,iBAAAC,GAAA,kBAAAC,GAAA,wBAAAC,GAAA,gBAAAC,GAAA,QAAAC,GAAA,kBAAAC,KAAA,eAAAC,GAAAf,ICGA,IAAAgB,GAA+D,SCQ/D,IAAAC,EAqBO,SChCQ,SAARC,GAAyBC,EAAG,CACjC,0BAEA,OAAOD,GAAwB,OAAO,QAArB,YAA2C,OAAO,OAAO,UAA1B,SAAqC,SAAUC,EAAG,CAChG,OAAO,OAAOA,CAChB,EAAI,SAAUA,EAAG,CACf,OAAOA,GAAmB,OAAO,QAArB,YAA+BA,EAAE,cAAgB,QAAUA,IAAM,OAAO,UAAY,SAAW,OAAOA,CACpH,EAAGD,GAAQC,CAAC,CACd,CARwBC,EAAAF,GAAA,WCAT,SAARG,GAAiCC,EAAUC,EAAa,CAC7D,GAAI,EAAED,aAAoBC,GACxB,MAAM,IAAI,UAAU,mCAAmC,CAE3D,CAJwBC,EAAAH,GAAA,mBCCT,SAARI,GAA8BC,EAAOC,EAAM,CAChD,GAAIC,GAAQF,CAAK,IAAM,UAAYA,IAAU,KAAM,OAAOA,EAC1D,IAAIG,EAAOH,EAAM,OAAO,WAAW,EACnC,GAAIG,IAAS,OAAW,CACtB,IAAIC,EAAMD,EAAK,KAAKH,EAAOC,GAAQ,SAAS,EAC5C,GAAIC,GAAQE,CAAG,IAAM,SAAU,OAAOA,EACtC,MAAM,IAAI,UAAU,8CAA8C,CACpE,CACA,OAAQH,IAAS,SAAW,OAAS,QAAQD,CAAK,CACpD,CATwBK,EAAAN,GAAA,gBCCT,SAARO,GAAgCC,EAAK,CAC1C,IAAIC,EAAMC,GAAYF,EAAK,QAAQ,EACnC,OAAOG,GAAQF,CAAG,IAAM,SAAWA,EAAM,OAAOA,CAAG,CACrD,CAHwBG,EAAAL,GAAA,kBCDxB,SAASM,GAAkBC,EAAQC,EAAO,CACxC,QAASC,EAAI,EAAGA,EAAID,EAAM,OAAQC,IAAK,CACrC,IAAIC,EAAaF,EAAMC,CAAC,EACxBC,EAAW,WAAaA,EAAW,YAAc,GACjDA,EAAW,aAAe,GACtB,UAAWA,IAAYA,EAAW,SAAW,IACjD,OAAO,eAAeH,EAAQI,GAAcD,EAAW,GAAG,EAAGA,CAAU,CACzE,CACF,CARSE,EAAAN,GAAA,qBASM,SAARO,GAA8BC,EAAaC,EAAYC,EAAa,CACzE,OAAID,GAAYT,GAAkBQ,EAAY,UAAWC,CAAU,EAC/DC,GAAaV,GAAkBQ,EAAaE,CAAW,EAC3D,OAAO,eAAeF,EAAa,YAAa,CAC9C,SAAU,EACZ,CAAC,EACMA,CACT,CAPwBF,EAAAC,GAAA,gBCVT,SAARI,GAAwCC,EAAM,CACnD,GAAIA,IAAS,OACX,MAAM,IAAI,eAAe,2DAA2D,EAEtF,OAAOA,CACT,CALwBC,EAAAF,GAAA,0BCAT,SAARG,GAAiCC,EAAGC,EAAG,CAC5C,OAAAF,GAAkB,OAAO,eAAiB,OAAO,eAAe,KAAK,EAAIG,EAAA,SAAyBF,EAAGC,EAAG,CACtG,OAAAD,EAAE,UAAYC,EACPD,CACT,EAHyE,mBAIlED,GAAgBC,EAAGC,CAAC,CAC7B,CANwBC,EAAAH,GAAA,mBCCT,SAARI,GAA2BC,EAAUC,EAAY,CACtD,GAAI,OAAOA,GAAe,YAAcA,IAAe,KACrD,MAAM,IAAI,UAAU,oDAAoD,EAE1ED,EAAS,UAAY,OAAO,OAAOC,GAAcA,EAAW,UAAW,CACrE,YAAa,CACX,MAAOD,EACP,SAAU,GACV,aAAc,EAChB,CACF,CAAC,EACD,OAAO,eAAeA,EAAU,YAAa,CAC3C,SAAU,EACZ,CAAC,EACGC,GAAYC,GAAeF,EAAUC,CAAU,CACrD,CAfwBE,EAAAJ,GAAA,aCCT,SAARK,GAA4CC,EAAMC,EAAM,CAC7D,GAAIA,IAASC,GAAQD,CAAI,IAAM,UAAY,OAAOA,GAAS,YACzD,OAAOA,EACF,GAAIA,IAAS,OAClB,MAAM,IAAI,UAAU,0DAA0D,EAEhF,OAAOE,GAAsBH,CAAI,CACnC,CAPwBI,EAAAL,GAAA,8BCFT,SAARM,GAAiCC,EAAG,CACzC,OAAAD,GAAkB,OAAO,eAAiB,OAAO,eAAe,KAAK,EAAIE,EAAA,SAAyBD,EAAG,CACnG,OAAOA,EAAE,WAAa,OAAO,eAAeA,CAAC,CAC/C,EAFyE,mBAGlED,GAAgBC,CAAC,CAC1B,CALwBC,EAAAF,GAAA,mBCCT,SAARG,GAAiCC,EAAKC,EAAKC,EAAO,CACvD,OAAAD,EAAME,GAAcF,CAAG,EACnBA,KAAOD,EACT,OAAO,eAAeA,EAAKC,EAAK,CAC9B,MAAOC,EACP,WAAY,GACZ,aAAc,GACd,SAAU,EACZ,CAAC,EAEDF,EAAIC,CAAG,EAAIC,EAENF,CACT,CAbwBI,EAAAL,GAAA,mBCDT,SAARM,GAAiCC,EAAK,CAC3C,GAAI,MAAM,QAAQA,CAAG,EAAG,OAAOA,CACjC,CAFwBC,EAAAF,GAAA,mBCAT,SAARG,GAAkCC,EAAM,CAC7C,GAAI,OAAO,OAAW,KAAeA,EAAK,OAAO,QAAQ,GAAK,MAAQA,EAAK,YAAY,GAAK,KAAM,OAAO,MAAM,KAAKA,CAAI,CAC1H,CAFwBC,EAAAF,GAAA,oBCAT,SAARG,GAAmCC,EAAKC,EAAK,EAC9CA,GAAO,MAAQA,EAAMD,EAAI,UAAQC,EAAMD,EAAI,QAC/C,QAASE,EAAI,EAAGC,EAAO,IAAI,MAAMF,CAAG,EAAGC,EAAID,EAAKC,IAAKC,EAAKD,CAAC,EAAIF,EAAIE,CAAC,EACpE,OAAOC,CACT,CAJwBC,EAAAL,GAAA,qBCCT,SAARM,GAA6CC,EAAGC,EAAQ,CAC7D,GAAKD,EACL,IAAI,OAAOA,GAAM,SAAU,OAAOE,GAAiBF,EAAGC,CAAM,EAC5D,IAAI,EAAI,OAAO,UAAU,SAAS,KAAKD,CAAC,EAAE,MAAM,EAAG,EAAE,EAErD,GADI,IAAM,UAAYA,EAAE,cAAa,EAAIA,EAAE,YAAY,MACnD,IAAM,OAAS,IAAM,MAAO,OAAO,MAAM,KAAKA,CAAC,EACnD,GAAI,IAAM,aAAe,2CAA2C,KAAK,CAAC,EAAG,OAAOE,GAAiBF,EAAGC,CAAM,EAChH,CAPwBE,EAAAJ,GAAA,+BCDT,SAARK,IAAoC,CACzC,MAAM,IAAI,UAAU;AAAA,mFAA2I,CACjK,CAFwBC,EAAAD,GAAA,oBCIT,SAARE,GAA0BC,EAAK,CACpC,OAAOC,GAAeD,CAAG,GAAKE,GAAgBF,CAAG,GAAKG,GAA2BH,CAAG,GAAKI,GAAgB,CAC3G,CAFwBC,EAAAN,GAAA,YCMxB,SAASO,GAAUC,EAAQC,EAAgB,CAAE,IAAIC,EAAO,OAAO,KAAKF,CAAM,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIG,EAAU,OAAO,sBAAsBH,CAAM,EAAGC,IAAmBE,EAAUA,EAAQ,OAAO,SAAUC,EAAK,CAAE,OAAO,OAAO,yBAAyBJ,EAAQI,CAAG,EAAE,UAAY,CAAC,GAAIF,EAAK,KAAK,MAAMA,EAAMC,CAAO,CAAG,CAAE,OAAOD,CAAM,CAA7UG,EAAAN,GAAA,aACT,SAASO,GAAgBC,EAAQ,CAAE,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAIC,EAAiB,UAAUD,CAAC,GAAnB,KAAuB,UAAUA,CAAC,EAAI,CAAC,EAAGA,EAAI,EAAIT,GAAU,OAAOU,CAAM,EAAG,EAAE,EAAE,QAAQ,SAAUC,EAAK,CAAEC,GAAgBJ,EAAQG,EAAKD,EAAOC,CAAG,CAAC,CAAG,CAAC,EAAI,OAAO,0BAA4B,OAAO,iBAAiBH,EAAQ,OAAO,0BAA0BE,CAAM,CAAC,EAAIV,GAAU,OAAOU,CAAM,CAAC,EAAE,QAAQ,SAAUC,EAAK,CAAE,OAAO,eAAeH,EAAQG,EAAK,OAAO,yBAAyBD,EAAQC,CAAG,CAAC,CAAG,CAAC,CAAG,CAAE,OAAOH,CAAQ,CAAtfF,EAAAC,GAAA,mBACT,IAAIM,GAAgB,CAClB,KAAM,SACN,IAAKP,EAAA,SAAaQ,EAAM,CACtB,KAAK,OAAO,MAAOA,CAAI,CACzB,EAFK,OAGL,KAAMR,EAAA,SAAcQ,EAAM,CACxB,KAAK,OAAO,OAAQA,CAAI,CAC1B,EAFM,QAGN,MAAOR,EAAA,SAAeQ,EAAM,CAC1B,KAAK,OAAO,QAASA,CAAI,CAC3B,EAFO,SAGP,OAAQR,EAAA,SAAgBS,EAAMD,EAAM,CAC9B,SAAW,QAAQC,CAAI,GAAG,QAAQA,CAAI,EAAE,MAAM,QAASD,CAAI,CACjE,EAFQ,SAGV,EACIE,GAAS,UAAY,CACvB,SAASA,EAAOC,EAAgB,CAC9B,IAAIC,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EACnFC,GAAgB,KAAMH,CAAM,EAC5B,KAAK,KAAKC,EAAgBC,CAAO,CACnC,CAJS,OAAAZ,EAAAU,EAAA,UAKTI,GAAaJ,EAAQ,CAAC,CACpB,IAAK,OACL,MAAOV,EAAA,SAAcW,EAAgB,CACnC,IAAIC,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EACnF,KAAK,OAASA,EAAQ,QAAU,WAChC,KAAK,OAASD,GAAkBJ,GAChC,KAAK,QAAUK,EACf,KAAK,MAAQA,EAAQ,KACvB,EANO,OAOT,EAAG,CACD,IAAK,WACL,MAAOZ,EAAA,SAAkBe,EAAM,CAC7B,KAAK,MAAQA,CACf,EAFO,WAGT,EAAG,CACD,IAAK,MACL,MAAOf,EAAA,UAAe,CACpB,QAASgB,EAAO,UAAU,OAAQR,EAAO,IAAI,MAAMQ,CAAI,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAC/ET,EAAKS,CAAI,EAAI,UAAUA,CAAI,EAE7B,OAAO,KAAK,QAAQT,EAAM,MAAO,GAAI,EAAI,CAC3C,EALO,MAMT,EAAG,CACD,IAAK,OACL,MAAOR,EAAA,UAAgB,CACrB,QAASkB,EAAQ,UAAU,OAAQV,EAAO,IAAI,MAAMU,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFX,EAAKW,CAAK,EAAI,UAAUA,CAAK,EAE/B,OAAO,KAAK,QAAQX,EAAM,OAAQ,GAAI,EAAI,CAC5C,EALO,OAMT,EAAG,CACD,IAAK,QACL,MAAOR,EAAA,UAAiB,CACtB,QAASoB,EAAQ,UAAU,OAAQZ,EAAO,IAAI,MAAMY,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFb,EAAKa,CAAK,EAAI,UAAUA,CAAK,EAE/B,OAAO,KAAK,QAAQb,EAAM,QAAS,EAAE,CACvC,EALO,QAMT,EAAG,CACD,IAAK,YACL,MAAOR,EAAA,UAAqB,CAC1B,QAASsB,EAAQ,UAAU,OAAQd,EAAO,IAAI,MAAMc,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFf,EAAKe,CAAK,EAAI,UAAUA,CAAK,EAE/B,OAAO,KAAK,QAAQf,EAAM,OAAQ,uBAAwB,EAAI,CAChE,EALO,YAMT,EAAG,CACD,IAAK,UACL,MAAOR,EAAA,SAAiBQ,EAAMgB,EAAKC,EAAQC,EAAW,CACpD,OAAIA,GAAa,CAAC,KAAK,MAAc,MACjC,OAAOlB,EAAK,CAAC,GAAM,WAAUA,EAAK,CAAC,EAAI,GAAG,OAAOiB,CAAM,EAAE,OAAO,KAAK,OAAQ,GAAG,EAAE,OAAOjB,EAAK,CAAC,CAAC,GAC7F,KAAK,OAAOgB,CAAG,EAAEhB,CAAI,EAC9B,EAJO,UAKT,EAAG,CACD,IAAK,SACL,MAAOR,EAAA,SAAgB2B,EAAY,CACjC,OAAO,IAAIjB,EAAO,KAAK,OAAQT,GAAgBA,GAAgB,CAAC,EAAG,CACjE,OAAQ,GAAG,OAAO,KAAK,OAAQ,GAAG,EAAE,OAAO0B,EAAY,GAAG,CAC5D,CAAC,EAAG,KAAK,OAAO,CAAC,CACnB,EAJO,SAKT,EAAG,CACD,IAAK,QACL,MAAO3B,EAAA,SAAeY,EAAS,CAC7B,OAAAA,EAAUA,GAAW,KAAK,QAC1BA,EAAQ,OAASA,EAAQ,QAAU,KAAK,OACjC,IAAIF,EAAO,KAAK,OAAQE,CAAO,CACxC,EAJO,QAKT,CAAC,CAAC,EACKF,CACT,EAAE,EACEkB,GAAa,IAAIlB,GAEjBmB,GAAe,UAAY,CAC7B,SAASA,GAAe,CACtBhB,GAAgB,KAAMgB,CAAY,EAClC,KAAK,UAAY,CAAC,CACpB,CAHS,OAAA7B,EAAA6B,EAAA,gBAITf,GAAae,EAAc,CAAC,CAC1B,IAAK,KACL,MAAO7B,EAAA,SAAY8B,EAAQC,EAAU,CACnC,IAAIC,EAAQ,KACZ,OAAAF,EAAO,MAAM,GAAG,EAAE,QAAQ,SAAUG,EAAO,CACzCD,EAAM,UAAUC,CAAK,EAAID,EAAM,UAAUC,CAAK,GAAK,CAAC,EACpDD,EAAM,UAAUC,CAAK,EAAE,KAAKF,CAAQ,CACtC,CAAC,EACM,IACT,EAPO,KAQT,EAAG,CACD,IAAK,MACL,MAAO/B,EAAA,SAAaiC,EAAOF,EAAU,CACnC,GAAK,KAAK,UAAUE,CAAK,EACzB,IAAI,CAACF,EAAU,CACb,OAAO,KAAK,UAAUE,CAAK,EAC3B,MACF,CACA,KAAK,UAAUA,CAAK,EAAI,KAAK,UAAUA,CAAK,EAAE,OAAO,SAAUC,EAAG,CAChE,OAAOA,IAAMH,CACf,CAAC,EACH,EATO,MAUT,EAAG,CACD,IAAK,OACL,MAAO/B,EAAA,SAAciC,EAAO,CAC1B,QAASjB,EAAO,UAAU,OAAQR,EAAO,IAAI,MAAMQ,EAAO,EAAIA,EAAO,EAAI,CAAC,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAClGT,EAAKS,EAAO,CAAC,EAAI,UAAUA,CAAI,EAEjC,GAAI,KAAK,UAAUgB,CAAK,EAAG,CACzB,IAAIE,EAAS,CAAC,EAAE,OAAO,KAAK,UAAUF,CAAK,CAAC,EAC5CE,EAAO,QAAQ,SAAUC,EAAU,CACjCA,EAAS,MAAM,OAAQ5B,CAAI,CAC7B,CAAC,CACH,CACA,GAAI,KAAK,UAAU,GAAG,EAAG,CACvB,IAAI6B,EAAU,CAAC,EAAE,OAAO,KAAK,UAAU,GAAG,CAAC,EAC3CA,EAAQ,QAAQ,SAAUD,EAAU,CAClCA,EAAS,MAAMA,EAAU,CAACH,CAAK,EAAE,OAAOzB,CAAI,CAAC,CAC/C,CAAC,CACH,CACF,EAhBO,OAiBT,CAAC,CAAC,EACKqB,CACT,EAAE,EAEF,SAASS,IAAQ,CACf,IAAIC,EACAC,EACAC,EAAU,IAAI,QAAQ,SAAUC,EAASC,EAAQ,CACnDJ,EAAMG,EACNF,EAAMG,CACR,CAAC,EACD,OAAAF,EAAQ,QAAUF,EAClBE,EAAQ,OAASD,EACVC,CACT,CAVSzC,EAAAsC,GAAA,SAWT,SAASM,GAAWjD,EAAQ,CAC1B,OAAIA,GAAU,KAAa,GACpB,GAAKA,CACd,CAHSK,EAAA4C,GAAA,cAIT,SAASC,GAAKC,EAAGC,EAAGC,EAAG,CACrBF,EAAE,QAAQ,SAAUG,EAAG,CACjBF,EAAEE,CAAC,IAAGD,EAAEC,CAAC,EAAIF,EAAEE,CAAC,EACtB,CAAC,CACH,CAJSjD,EAAA6C,GAAA,QAKT,SAASK,GAAcvD,EAAQwD,EAAMC,EAAO,CAC1C,SAASC,EAAShD,EAAK,CACrB,OAAOA,GAAOA,EAAI,QAAQ,KAAK,EAAI,GAAKA,EAAI,QAAQ,OAAQ,GAAG,EAAIA,CACrE,CAFSL,EAAAqD,EAAA,YAGT,SAASC,GAAuB,CAC9B,MAAO,CAAC3D,GAAU,OAAOA,GAAW,QACtC,CAFSK,EAAAsD,EAAA,wBAIT,QADIC,EAAQ,OAAOJ,GAAS,SAAW,CAAC,EAAE,OAAOA,CAAI,EAAIA,EAAK,MAAM,GAAG,EAChEI,EAAM,OAAS,GAAG,CACvB,GAAID,EAAqB,EAAG,MAAO,CAAC,EACpC,IAAIjD,EAAMgD,EAASE,EAAM,MAAM,CAAC,EAC5B,CAAC5D,EAAOU,CAAG,GAAK+C,IAAOzD,EAAOU,CAAG,EAAI,IAAI+C,GACzC,OAAO,UAAU,eAAe,KAAKzD,EAAQU,CAAG,EAClDV,EAASA,EAAOU,CAAG,EAEnBV,EAAS,CAAC,CAEd,CACA,OAAI2D,EAAqB,EAAU,CAAC,EAC7B,CACL,IAAK3D,EACL,EAAG0D,EAASE,EAAM,MAAM,CAAC,CAC3B,CACF,CAvBSvD,EAAAkD,GAAA,iBAwBT,SAASM,GAAQ7D,EAAQwD,EAAMM,EAAU,CACvC,IAAIC,EAAiBR,GAAcvD,EAAQwD,EAAM,MAAM,EACrDQ,EAAMD,EAAe,IACrBE,EAAIF,EAAe,EACrBC,EAAIC,CAAC,EAAIH,CACX,CALSzD,EAAAwD,GAAA,WAMT,SAASK,GAASlE,EAAQwD,EAAMM,EAAUK,EAAQ,CAChD,IAAIC,EAAkBb,GAAcvD,EAAQwD,EAAM,MAAM,EACtDQ,EAAMI,EAAgB,IACtBH,EAAIG,EAAgB,EACtBJ,EAAIC,CAAC,EAAID,EAAIC,CAAC,GAAK,CAAC,EAChBE,IAAQH,EAAIC,CAAC,EAAID,EAAIC,CAAC,EAAE,OAAOH,CAAQ,GACtCK,GAAQH,EAAIC,CAAC,EAAE,KAAKH,CAAQ,CACnC,CAPSzD,EAAA6D,GAAA,YAQT,SAASG,GAAQrE,EAAQwD,EAAM,CAC7B,IAAIc,EAAkBf,GAAcvD,EAAQwD,CAAI,EAC9CQ,EAAMM,EAAgB,IACtBL,EAAIK,EAAgB,EACtB,GAAKN,EACL,OAAOA,EAAIC,CAAC,CACd,CANS5D,EAAAgE,GAAA,WAOT,SAASE,GAAoBC,EAAMC,EAAa/D,EAAK,CACnD,IAAIgE,EAAQL,GAAQG,EAAM9D,CAAG,EAC7B,OAAIgE,IAAU,OACLA,EAEFL,GAAQI,EAAa/D,CAAG,CACjC,CANSL,EAAAkE,GAAA,uBAOT,SAASI,GAAWpE,EAAQE,EAAQmE,EAAW,CAC7C,QAASC,KAAQpE,EACXoE,IAAS,aAAeA,IAAS,gBAC/BA,KAAQtE,EACN,OAAOA,EAAOsE,CAAI,GAAM,UAAYtE,EAAOsE,CAAI,YAAa,QAAU,OAAOpE,EAAOoE,CAAI,GAAM,UAAYpE,EAAOoE,CAAI,YAAa,OAChID,IAAWrE,EAAOsE,CAAI,EAAIpE,EAAOoE,CAAI,GAEzCF,GAAWpE,EAAOsE,CAAI,EAAGpE,EAAOoE,CAAI,EAAGD,CAAS,EAGlDrE,EAAOsE,CAAI,EAAIpE,EAAOoE,CAAI,GAIhC,OAAOtE,CACT,CAfSF,EAAAsE,GAAA,cAgBT,SAASG,GAAYC,EAAK,CACxB,OAAOA,EAAI,QAAQ,sCAAuC,MAAM,CAClE,CAFS1E,EAAAyE,GAAA,eAGT,IAAIE,GAAa,CACf,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,QACL,IAAK,QACP,EACA,SAASC,GAAOT,EAAM,CACpB,OAAI,OAAOA,GAAS,SACXA,EAAK,QAAQ,aAAc,SAAUpB,EAAG,CAC7C,OAAO4B,GAAW5B,CAAC,CACrB,CAAC,EAEIoB,CACT,CAPSnE,EAAA4E,GAAA,UAQT,IAAIC,GAAS,OAAO,OAAW,KAAe,OAAO,WAAa,OAAO,OAAO,UAAU,cAAkB,KAAe,OAAO,UAAU,WAAa,OAAO,UAAU,UAAU,QAAQ,MAAM,EAAI,GAClMC,GAAQ,CAAC,IAAK,IAAK,IAAK,IAAK,GAAG,EACpC,SAASC,GAAoB1E,EAAK2E,EAAaC,EAAc,CAC3DD,EAAcA,GAAe,GAC7BC,EAAeA,GAAgB,GAC/B,IAAIC,EAAgBJ,GAAM,OAAO,SAAUK,EAAG,CAC5C,OAAOH,EAAY,QAAQG,CAAC,EAAI,GAAKF,EAAa,QAAQE,CAAC,EAAI,CACjE,CAAC,EACD,GAAID,EAAc,SAAW,EAAG,MAAO,GACvC,IAAIE,EAAI,IAAI,OAAO,IAAI,OAAOF,EAAc,IAAI,SAAUC,EAAG,CAC3D,OAAOA,IAAM,IAAM,MAAQA,CAC7B,CAAC,EAAE,KAAK,GAAG,EAAG,GAAG,CAAC,EACdE,EAAU,CAACD,EAAE,KAAK/E,CAAG,EACzB,GAAI,CAACgF,EAAS,CACZ,IAAIC,EAAKjF,EAAI,QAAQ4E,CAAY,EAC7BK,EAAK,GAAK,CAACF,EAAE,KAAK/E,EAAI,UAAU,EAAGiF,CAAE,CAAC,IACxCD,EAAU,GAEd,CACA,OAAOA,CACT,CAlBSrF,EAAA+E,GAAA,uBAmBT,SAASQ,GAAS5B,EAAKR,EAAM,CAC3B,IAAI8B,EAAe,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,IACvF,GAAKtB,EACL,IAAIA,EAAIR,CAAI,EAAG,OAAOQ,EAAIR,CAAI,EAG9B,QAFIqC,EAAQrC,EAAK,MAAM8B,CAAY,EAC/BQ,EAAU9B,EACLxD,EAAI,EAAGA,EAAIqF,EAAM,OAAQ,EAAErF,EAAG,CAErC,GADI,CAACsF,GACD,OAAOA,EAAQD,EAAMrF,CAAC,CAAC,GAAM,UAAYA,EAAI,EAAIqF,EAAM,OACzD,OAEF,GAAIC,EAAQD,EAAMrF,CAAC,CAAC,IAAM,OAAW,CAInC,QAHIuF,EAAI,EACJC,EAAIH,EAAM,MAAMrF,EAAGA,EAAIuF,CAAC,EAAE,KAAKT,CAAY,EAC3CW,EAAMH,EAAQE,CAAC,EACZC,IAAQ,QAAaJ,EAAM,OAASrF,EAAIuF,GAC7CA,IACAC,EAAIH,EAAM,MAAMrF,EAAGA,EAAIuF,CAAC,EAAE,KAAKT,CAAY,EAC3CW,EAAMH,EAAQE,CAAC,EAEjB,GAAIC,IAAQ,OAAW,OACvB,GAAIA,IAAQ,KAAM,OAAO,KACzB,GAAIzC,EAAK,SAASwC,CAAC,EAAG,CACpB,GAAI,OAAOC,GAAQ,SAAU,OAAOA,EACpC,GAAID,GAAK,OAAOC,EAAID,CAAC,GAAM,SAAU,OAAOC,EAAID,CAAC,CACnD,CACA,IAAIE,EAAaL,EAAM,MAAMrF,EAAIuF,CAAC,EAAE,KAAKT,CAAY,EACrD,OAAIY,EAAmBN,GAASK,EAAKC,EAAYZ,CAAY,EAC7D,MACF,CACAQ,EAAUA,EAAQD,EAAMrF,CAAC,CAAC,CAC5B,CACA,OAAOsF,EACT,CAjCSzF,EAAAuF,GAAA,YAmCT,SAASO,GAAUnG,EAAQC,EAAgB,CAAE,IAAIC,EAAO,OAAO,KAAKF,CAAM,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIG,EAAU,OAAO,sBAAsBH,CAAM,EAAGC,IAAmBE,EAAUA,EAAQ,OAAO,SAAUC,EAAK,CAAE,OAAO,OAAO,yBAAyBJ,EAAQI,CAAG,EAAE,UAAY,CAAC,GAAIF,EAAK,KAAK,MAAMA,EAAMC,CAAO,CAAG,CAAE,OAAOD,CAAM,CAA7UG,EAAA8F,GAAA,aACT,SAASC,GAAgB7F,EAAQ,CAAE,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAIC,EAAiB,UAAUD,CAAC,GAAnB,KAAuB,UAAUA,CAAC,EAAI,CAAC,EAAGA,EAAI,EAAI2F,GAAU,OAAO1F,CAAM,EAAG,EAAE,EAAE,QAAQ,SAAUC,EAAK,CAAEC,GAAgBJ,EAAQG,EAAKD,EAAOC,CAAG,CAAC,CAAG,CAAC,EAAI,OAAO,0BAA4B,OAAO,iBAAiBH,EAAQ,OAAO,0BAA0BE,CAAM,CAAC,EAAI0F,GAAU,OAAO1F,CAAM,CAAC,EAAE,QAAQ,SAAUC,EAAK,CAAE,OAAO,eAAeH,EAAQG,EAAK,OAAO,yBAAyBD,EAAQC,CAAG,CAAC,CAAG,CAAC,CAAG,CAAE,OAAOH,CAAQ,CAAtfF,EAAA+F,GAAA,mBACT,SAASC,GAAeC,EAAS,CAAE,IAAIC,EAA4BC,GAA4B,EAAG,OAAOnG,EAAA,UAAgC,CAAE,IAAIoG,EAAQC,GAAgBJ,CAAO,EAAGK,EAAQ,GAAIJ,EAA2B,CAAE,IAAIK,EAAYF,GAAgB,IAAI,EAAE,YAAaC,EAAS,QAAQ,UAAUF,EAAO,UAAWG,CAAS,CAAG,MAASD,EAASF,EAAM,MAAM,KAAM,SAAS,EAAK,OAAOI,GAA2B,KAAMF,CAAM,CAAG,EAAhU,uBAAmU,CAAnatG,EAAAgG,GAAA,kBACT,SAASG,IAA8B,CAA0E,GAApE,OAAO,QAAY,KAAe,CAAC,QAAQ,WAA6B,QAAQ,UAAU,KAAM,MAAO,GAAO,GAAI,OAAO,OAAU,WAAY,MAAO,GAAM,GAAI,CAAE,eAAQ,UAAU,QAAQ,KAAK,QAAQ,UAAU,QAAS,CAAC,EAAG,UAAY,CAAC,CAAC,CAAC,EAAU,EAAM,MAAY,CAAE,MAAO,EAAO,CAAE,CAAjUnG,EAAAmG,GAAA,+BACT,IAAIM,GAAgB,SAAUC,EAAe,CAC3CC,GAAUF,EAAeC,CAAa,EACtC,IAAIE,EAASZ,GAAeS,CAAa,EACzC,SAASA,EAActC,EAAM,CAC3B,IAAInC,EACApB,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAChF,GAAI,CAAC,aAAa,EAClB,UAAW,aACb,EACA,OAAAC,GAAgB,KAAM4F,CAAa,EACnCzE,EAAQ4E,EAAO,KAAK,IAAI,EACpB/B,IACFhD,GAAa,KAAKgF,GAAuB7E,CAAK,CAAC,EAEjDA,EAAM,KAAOmC,GAAQ,CAAC,EACtBnC,EAAM,QAAUpB,EACZoB,EAAM,QAAQ,eAAiB,SACjCA,EAAM,QAAQ,aAAe,KAE3BA,EAAM,QAAQ,sBAAwB,SACxCA,EAAM,QAAQ,oBAAsB,IAE/BA,CACT,CApBS,OAAAhC,EAAAyG,EAAA,iBAqBT3F,GAAa2F,EAAe,CAAC,CAC3B,IAAK,gBACL,MAAOzG,EAAA,SAAuB8G,EAAI,CAC5B,KAAK,QAAQ,GAAG,QAAQA,CAAE,EAAI,GAChC,KAAK,QAAQ,GAAG,KAAKA,CAAE,CAE3B,EAJO,gBAKT,EAAG,CACD,IAAK,mBACL,MAAO9G,EAAA,SAA0B8G,EAAI,CACnC,IAAIC,EAAQ,KAAK,QAAQ,GAAG,QAAQD,CAAE,EAClCC,EAAQ,IACV,KAAK,QAAQ,GAAG,OAAOA,EAAO,CAAC,CAEnC,EALO,mBAMT,EAAG,CACD,IAAK,cACL,MAAO/G,EAAA,SAAqBgH,EAAKF,EAAIzG,EAAK,CACxC,IAAIO,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/EqE,EAAerE,EAAQ,eAAiB,OAAYA,EAAQ,aAAe,KAAK,QAAQ,aACxFqG,EAAsBrG,EAAQ,sBAAwB,OAAYA,EAAQ,oBAAsB,KAAK,QAAQ,oBAC7GuC,EAAO,CAAC6D,EAAKF,CAAE,EACfzG,GAAO,OAAOA,GAAQ,WAAU8C,EAAOA,EAAK,OAAO9C,CAAG,GACtDA,GAAO,OAAOA,GAAQ,WAAU8C,EAAOA,EAAK,OAAO8B,EAAe5E,EAAI,MAAM4E,CAAY,EAAI5E,CAAG,GAC/F2G,EAAI,QAAQ,GAAG,EAAI,KACrB7D,EAAO6D,EAAI,MAAM,GAAG,GAEtB,IAAIV,EAAStC,GAAQ,KAAK,KAAMb,CAAI,EACpC,OAAImD,GAAU,CAACW,GAAuB,OAAO5G,GAAQ,SAAiBiG,EAC/Df,GAAS,KAAK,MAAQ,KAAK,KAAKyB,CAAG,GAAK,KAAK,KAAKA,CAAG,EAAEF,CAAE,EAAGzG,EAAK4E,CAAY,CACtF,EAbO,cAcT,EAAG,CACD,IAAK,cACL,MAAOjF,EAAA,SAAqBgH,EAAKF,EAAIzG,EAAKgE,EAAO,CAC/C,IAAIzD,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAChF,OAAQ,EACV,EACIqE,EAAerE,EAAQ,eAAiB,OAAYA,EAAQ,aAAe,KAAK,QAAQ,aACxFuC,EAAO,CAAC6D,EAAKF,CAAE,EACfzG,IAAK8C,EAAOA,EAAK,OAAO8B,EAAe5E,EAAI,MAAM4E,CAAY,EAAI5E,CAAG,GACpE2G,EAAI,QAAQ,GAAG,EAAI,KACrB7D,EAAO6D,EAAI,MAAM,GAAG,EACpB3C,EAAQyC,EACRA,EAAK3D,EAAK,CAAC,GAEb,KAAK,cAAc2D,CAAE,EACrBtD,GAAQ,KAAK,KAAML,EAAMkB,CAAK,EACzBzD,EAAQ,QAAQ,KAAK,KAAK,QAASoG,EAAKF,EAAIzG,EAAKgE,CAAK,CAC7D,EAfO,cAgBT,EAAG,CACD,IAAK,eACL,MAAOrE,EAAA,SAAsBgH,EAAKF,EAAII,EAAW,CAC/C,IAAItG,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAChF,OAAQ,EACV,EACA,QAASqC,KAAKiE,GACR,OAAOA,EAAUjE,CAAC,GAAM,UAAY,OAAO,UAAU,SAAS,MAAMiE,EAAUjE,CAAC,CAAC,IAAM,mBAAkB,KAAK,YAAY+D,EAAKF,EAAI7D,EAAGiE,EAAUjE,CAAC,EAAG,CACrJ,OAAQ,EACV,CAAC,EAEErC,EAAQ,QAAQ,KAAK,KAAK,QAASoG,EAAKF,EAAII,CAAS,CAC5D,EAVO,eAWT,EAAG,CACD,IAAK,oBACL,MAAOlH,EAAA,SAA2BgH,EAAKF,EAAII,EAAWC,EAAM5C,EAAW,CACrE,IAAI3D,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAChF,OAAQ,EACV,EACIuC,EAAO,CAAC6D,EAAKF,CAAE,EACfE,EAAI,QAAQ,GAAG,EAAI,KACrB7D,EAAO6D,EAAI,MAAM,GAAG,EACpBG,EAAOD,EACPA,EAAYJ,EACZA,EAAK3D,EAAK,CAAC,GAEb,KAAK,cAAc2D,CAAE,EACrB,IAAIM,EAAOpD,GAAQ,KAAK,KAAMb,CAAI,GAAK,CAAC,EACpCgE,EACF7C,GAAW8C,EAAMF,EAAW3C,CAAS,EAErC6C,EAAOrB,GAAgBA,GAAgB,CAAC,EAAGqB,CAAI,EAAGF,CAAS,EAE7D1D,GAAQ,KAAK,KAAML,EAAMiE,CAAI,EACxBxG,EAAQ,QAAQ,KAAK,KAAK,QAASoG,EAAKF,EAAII,CAAS,CAC5D,EApBO,oBAqBT,EAAG,CACD,IAAK,uBACL,MAAOlH,EAAA,SAA8BgH,EAAKF,EAAI,CACxC,KAAK,kBAAkBE,EAAKF,CAAE,GAChC,OAAO,KAAK,KAAKE,CAAG,EAAEF,CAAE,EAE1B,KAAK,iBAAiBA,CAAE,EACxB,KAAK,KAAK,UAAWE,EAAKF,CAAE,CAC9B,EANO,uBAOT,EAAG,CACD,IAAK,oBACL,MAAO9G,EAAA,SAA2BgH,EAAKF,EAAI,CACzC,OAAO,KAAK,YAAYE,EAAKF,CAAE,IAAM,MACvC,EAFO,oBAGT,EAAG,CACD,IAAK,oBACL,MAAO9G,EAAA,SAA2BgH,EAAKF,EAAI,CAEzC,OADKA,IAAIA,EAAK,KAAK,QAAQ,WACvB,KAAK,QAAQ,mBAAqB,KAAaf,GAAgBA,GAAgB,CAAC,EAAG,CAAC,CAAC,EAAG,KAAK,YAAYiB,EAAKF,CAAE,CAAC,EAC9G,KAAK,YAAYE,EAAKF,CAAE,CACjC,EAJO,oBAKT,EAAG,CACD,IAAK,oBACL,MAAO9G,EAAA,SAA2BgH,EAAK,CACrC,OAAO,KAAK,KAAKA,CAAG,CACtB,EAFO,oBAGT,EAAG,CACD,IAAK,8BACL,MAAOhH,EAAA,SAAqCgH,EAAK,CAC/C,IAAI7C,EAAO,KAAK,kBAAkB6C,CAAG,EACjCK,EAAIlD,GAAQ,OAAO,KAAKA,CAAI,GAAK,CAAC,EACtC,MAAO,CAAC,CAACkD,EAAE,KAAK,SAAUC,EAAG,CAC3B,OAAOnD,EAAKmD,CAAC,GAAK,OAAO,KAAKnD,EAAKmD,CAAC,CAAC,EAAE,OAAS,CAClD,CAAC,CACH,EANO,8BAOT,EAAG,CACD,IAAK,SACL,MAAOtH,EAAA,UAAkB,CACvB,OAAO,KAAK,IACd,EAFO,SAGT,CAAC,CAAC,EACKyG,CACT,EAAE5E,EAAY,EAEV0F,GAAgB,CAClB,WAAY,CAAC,EACb,iBAAkBvH,EAAA,SAA0BwH,EAAQ,CAClD,KAAK,WAAWA,EAAO,IAAI,EAAIA,CACjC,EAFkB,oBAGlB,OAAQxH,EAAA,SAAgByH,EAAYpD,EAAOhE,EAAKO,EAAS8G,EAAY,CACnE,IAAI1F,EAAQ,KACZ,OAAAyF,EAAW,QAAQ,SAAUE,EAAW,CAClC3F,EAAM,WAAW2F,CAAS,IAAGtD,EAAQrC,EAAM,WAAW2F,CAAS,EAAE,QAAQtD,EAAOhE,EAAKO,EAAS8G,CAAU,EAC9G,CAAC,EACMrD,CACT,EANQ,SAOV,EAEA,SAASuD,GAAUjI,EAAQC,EAAgB,CAAE,IAAIC,EAAO,OAAO,KAAKF,CAAM,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIG,EAAU,OAAO,sBAAsBH,CAAM,EAAGC,IAAmBE,EAAUA,EAAQ,OAAO,SAAUC,EAAK,CAAE,OAAO,OAAO,yBAAyBJ,EAAQI,CAAG,EAAE,UAAY,CAAC,GAAIF,EAAK,KAAK,MAAMA,EAAMC,CAAO,CAAG,CAAE,OAAOD,CAAM,CAA7UG,EAAA4H,GAAA,aACT,SAASC,GAAgB3H,EAAQ,CAAE,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAIC,EAAiB,UAAUD,CAAC,GAAnB,KAAuB,UAAUA,CAAC,EAAI,CAAC,EAAGA,EAAI,EAAIyH,GAAU,OAAOxH,CAAM,EAAG,EAAE,EAAE,QAAQ,SAAUC,EAAK,CAAEC,GAAgBJ,EAAQG,EAAKD,EAAOC,CAAG,CAAC,CAAG,CAAC,EAAI,OAAO,0BAA4B,OAAO,iBAAiBH,EAAQ,OAAO,0BAA0BE,CAAM,CAAC,EAAIwH,GAAU,OAAOxH,CAAM,CAAC,EAAE,QAAQ,SAAUC,EAAK,CAAE,OAAO,eAAeH,EAAQG,EAAK,OAAO,yBAAyBD,EAAQC,CAAG,CAAC,CAAG,CAAC,CAAG,CAAE,OAAOH,CAAQ,CAAtfF,EAAA6H,GAAA,mBACT,SAASC,GAAe7B,EAAS,CAAE,IAAIC,EAA4B6B,GAA4B,EAAG,OAAO/H,EAAA,UAAgC,CAAE,IAAIoG,EAAQC,GAAgBJ,CAAO,EAAGK,EAAQ,GAAIJ,EAA2B,CAAE,IAAIK,EAAYF,GAAgB,IAAI,EAAE,YAAaC,EAAS,QAAQ,UAAUF,EAAO,UAAWG,CAAS,CAAG,MAASD,EAASF,EAAM,MAAM,KAAM,SAAS,EAAK,OAAOI,GAA2B,KAAMF,CAAM,CAAG,EAAhU,uBAAmU,CAAnatG,EAAA8H,GAAA,kBACT,SAASC,IAA8B,CAA0E,GAApE,OAAO,QAAY,KAAe,CAAC,QAAQ,WAA6B,QAAQ,UAAU,KAAM,MAAO,GAAO,GAAI,OAAO,OAAU,WAAY,MAAO,GAAM,GAAI,CAAE,eAAQ,UAAU,QAAQ,KAAK,QAAQ,UAAU,QAAS,CAAC,EAAG,UAAY,CAAC,CAAC,CAAC,EAAU,EAAM,MAAY,CAAE,MAAO,EAAO,CAAE,CAAjU/H,EAAA+H,GAAA,+BACT,IAAIC,GAAmB,CAAC,EACpBC,GAAa,SAAUvB,EAAe,CACxCC,GAAUsB,EAAYvB,CAAa,EACnC,IAAIE,EAASkB,GAAeG,CAAU,EACtC,SAASA,EAAWC,EAAU,CAC5B,IAAIlG,EACApB,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EACnF,OAAAC,GAAgB,KAAMoH,CAAU,EAChCjG,EAAQ4E,EAAO,KAAK,IAAI,EACpB/B,IACFhD,GAAa,KAAKgF,GAAuB7E,CAAK,CAAC,EAEjDa,GAAK,CAAC,gBAAiB,gBAAiB,iBAAkB,eAAgB,mBAAoB,aAAc,OAAO,EAAGqF,EAAUrB,GAAuB7E,CAAK,CAAC,EAC7JA,EAAM,QAAUpB,EACZoB,EAAM,QAAQ,eAAiB,SACjCA,EAAM,QAAQ,aAAe,KAE/BA,EAAM,OAASJ,GAAW,OAAO,YAAY,EACtCI,CACT,CAfS,OAAAhC,EAAAiI,EAAA,cAgBTnH,GAAamH,EAAY,CAAC,CACxB,IAAK,iBACL,MAAOjI,EAAA,SAAwBgH,EAAK,CAC9BA,IAAK,KAAK,SAAWA,EAC3B,EAFO,iBAGT,EAAG,CACD,IAAK,SACL,MAAOhH,EAAA,SAAgBK,EAAK,CAC1B,IAAIO,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAChF,cAAe,CAAC,CAClB,EACA,GAAyBP,GAAQ,KAC/B,MAAO,GAET,IAAI8H,EAAW,KAAK,QAAQ9H,EAAKO,CAAO,EACxC,OAAOuH,GAAYA,EAAS,MAAQ,MACtC,EATO,SAUT,EAAG,CACD,IAAK,iBACL,MAAOnI,EAAA,SAAwBK,EAAKO,EAAS,CAC3C,IAAIoE,EAAcpE,EAAQ,cAAgB,OAAYA,EAAQ,YAAc,KAAK,QAAQ,YACrFoE,IAAgB,SAAWA,EAAc,KAC7C,IAAIC,EAAerE,EAAQ,eAAiB,OAAYA,EAAQ,aAAe,KAAK,QAAQ,aACxFwH,EAAaxH,EAAQ,IAAM,KAAK,QAAQ,WAAa,CAAC,EACtDyH,EAAuBrD,GAAe3E,EAAI,QAAQ2E,CAAW,EAAI,GACjEsD,EAAuB,CAAC,KAAK,QAAQ,yBAA2B,CAAC1H,EAAQ,cAAgB,CAAC,KAAK,QAAQ,wBAA0B,CAACA,EAAQ,aAAe,CAACmE,GAAoB1E,EAAK2E,EAAaC,CAAY,EAChN,GAAIoD,GAAwB,CAACC,EAAsB,CACjD,IAAIrF,EAAI5C,EAAI,MAAM,KAAK,aAAa,aAAa,EACjD,GAAI4C,GAAKA,EAAE,OAAS,EAClB,MAAO,CACL,IAAK5C,EACL,WAAY+H,CACd,EAEF,IAAIG,EAAQlI,EAAI,MAAM2E,CAAW,GAC7BA,IAAgBC,GAAgBD,IAAgBC,GAAgB,KAAK,QAAQ,GAAG,QAAQsD,EAAM,CAAC,CAAC,EAAI,MAAIH,EAAaG,EAAM,MAAM,GACrIlI,EAAMkI,EAAM,KAAKtD,CAAY,CAC/B,CACA,OAAI,OAAOmD,GAAe,WAAUA,EAAa,CAACA,CAAU,GACrD,CACL,IAAK/H,EACL,WAAY+H,CACd,CACF,EAxBO,iBAyBT,EAAG,CACD,IAAK,YACL,MAAOpI,EAAA,SAAmBH,EAAMe,EAAS4H,EAAS,CAChD,IAAIC,EAAS,KAMb,GALIC,GAAQ9H,CAAO,IAAM,UAAY,KAAK,QAAQ,mCAChDA,EAAU,KAAK,QAAQ,iCAAiC,SAAS,GAE/D8H,GAAQ9H,CAAO,IAAM,WAAUA,EAAUiH,GAAgB,CAAC,EAAGjH,CAAO,GACnEA,IAASA,EAAU,CAAC,GACCf,GAAS,KAAM,MAAO,GAC3C,MAAM,QAAQA,CAAI,IAAGA,EAAO,CAAC,OAAOA,CAAI,CAAC,GAC9C,IAAI8I,EAAgB/H,EAAQ,gBAAkB,OAAYA,EAAQ,cAAgB,KAAK,QAAQ,cAC3FqE,EAAerE,EAAQ,eAAiB,OAAYA,EAAQ,aAAe,KAAK,QAAQ,aACxFgI,EAAuB,KAAK,eAAe/I,EAAKA,EAAK,OAAS,CAAC,EAAGe,CAAO,EAC3EP,EAAMuI,EAAqB,IAC3BR,EAAaQ,EAAqB,WAChCC,EAAYT,EAAWA,EAAW,OAAS,CAAC,EAC5CpB,EAAMpG,EAAQ,KAAO,KAAK,SAC1BkI,EAA0BlI,EAAQ,yBAA2B,KAAK,QAAQ,wBAC9E,GAAIoG,GAAOA,EAAI,YAAY,IAAM,SAAU,CACzC,GAAI8B,EAAyB,CAC3B,IAAI9D,EAAcpE,EAAQ,aAAe,KAAK,QAAQ,YACtD,OAAI+H,EACK,CACL,IAAK,GAAG,OAAOE,CAAS,EAAE,OAAO7D,CAAW,EAAE,OAAO3E,CAAG,EACxD,QAASA,EACT,aAAcA,EACd,QAAS2G,EACT,OAAQ6B,CACV,EAEK,GAAG,OAAOA,CAAS,EAAE,OAAO7D,CAAW,EAAE,OAAO3E,CAAG,CAC5D,CACA,OAAIsI,EACK,CACL,IAAKtI,EACL,QAASA,EACT,aAAcA,EACd,QAAS2G,EACT,OAAQ6B,CACV,EAEKxI,CACT,CACA,IAAI8H,EAAW,KAAK,QAAQtI,EAAMe,CAAO,EACrC2B,EAAM4F,GAAYA,EAAS,IAC3BY,EAAaZ,GAAYA,EAAS,SAAW9H,EAC7C2I,EAAkBb,GAAYA,EAAS,cAAgB9H,EACvD4I,EAAU,OAAO,UAAU,SAAS,MAAM1G,CAAG,EAC7C2G,EAAW,CAAC,kBAAmB,oBAAqB,iBAAiB,EACrEC,GAAavI,EAAQ,aAAe,OAAYA,EAAQ,WAAa,KAAK,QAAQ,WAClFwI,EAA6B,CAAC,KAAK,YAAc,KAAK,WAAW,eACjEC,EAAiB,OAAO9G,GAAQ,UAAY,OAAOA,GAAQ,WAAa,OAAOA,GAAQ,SAC3F,GAAI6G,GAA8B7G,GAAO8G,GAAkBH,EAAS,QAAQD,CAAO,EAAI,GAAK,EAAE,OAAOE,IAAe,UAAYF,IAAY,kBAAmB,CAC7J,GAAI,CAACrI,EAAQ,eAAiB,CAAC,KAAK,QAAQ,cAAe,CACpD,KAAK,QAAQ,uBAChB,KAAK,OAAO,KAAK,iEAAiE,EAEpF,IAAIwE,GAAI,KAAK,QAAQ,sBAAwB,KAAK,QAAQ,sBAAsB2D,EAAYxG,EAAKsF,GAAgBA,GAAgB,CAAC,EAAGjH,CAAO,EAAG,CAAC,EAAG,CACjJ,GAAIwH,CACN,CAAC,CAAC,EAAI,QAAQ,OAAO/H,EAAK,IAAI,EAAE,OAAO,KAAK,SAAU,0CAA0C,EAChG,OAAIsI,GACFR,EAAS,IAAM/C,GACR+C,GAEF/C,EACT,CACA,GAAIH,EAAc,CAChB,IAAIqE,EAAiBL,IAAY,iBAC7BpG,EAAOyG,EAAiB,CAAC,EAAI,CAAC,EAC9BC,EAAcD,EAAiBN,EAAkBD,EACrD,QAAS9F,KAAKV,EACZ,GAAI,OAAO,UAAU,eAAe,KAAKA,EAAKU,CAAC,EAAG,CAChD,IAAIuG,GAAU,GAAG,OAAOD,CAAW,EAAE,OAAOtE,CAAY,EAAE,OAAOhC,CAAC,EAClEJ,EAAKI,CAAC,EAAI,KAAK,UAAUuG,GAAS3B,GAAgBA,GAAgB,CAAC,EAAGjH,CAAO,EAAG,CAC9E,WAAY,GACZ,GAAIwH,CACN,CAAC,CAAC,EACEvF,EAAKI,CAAC,IAAMuG,KAAS3G,EAAKI,CAAC,EAAIV,EAAIU,CAAC,EAC1C,CAEFV,EAAMM,CACR,CACF,SAAWuG,GAA8B,OAAOD,IAAe,UAAYF,IAAY,iBACrF1G,EAAMA,EAAI,KAAK4G,EAAU,EACrB5G,IAAKA,EAAM,KAAK,kBAAkBA,EAAK1C,EAAMe,EAAS4H,CAAO,OAC5D,CACL,IAAIiB,GAAc,GACdC,GAAU,GACVC,GAAsB/I,EAAQ,QAAU,QAAa,OAAOA,EAAQ,OAAU,SAC9EgJ,GAAkB3B,EAAW,gBAAgBrH,CAAO,EACpDiJ,GAAqBF,GAAsB,KAAK,eAAe,UAAU3C,EAAKpG,EAAQ,MAAOA,CAAO,EAAI,GACxGkJ,GAAelJ,EAAQ,eAAe,OAAOiJ,EAAkB,CAAC,GAAKjJ,EAAQ,aAC7E,CAAC,KAAK,cAAc2B,CAAG,GAAKqH,KAC9BH,GAAc,GACdlH,EAAMuH,IAEH,KAAK,cAAcvH,CAAG,IACzBmH,GAAU,GACVnH,EAAMlC,GAER,IAAI0J,GAAiCnJ,EAAQ,gCAAkC,KAAK,QAAQ,+BACxFoJ,GAAgBD,IAAkCL,GAAU,OAAYnH,EACxE0H,GAAgBL,IAAmBE,KAAiBvH,GAAO,KAAK,QAAQ,cAC5E,GAAImH,IAAWD,IAAeQ,GAAe,CAE3C,GADA,KAAK,OAAO,IAAIA,GAAgB,YAAc,aAAcjD,EAAK6B,EAAWxI,EAAK4J,GAAgBH,GAAevH,CAAG,EAC/G0C,EAAc,CAChB,IAAIiF,GAAK,KAAK,QAAQ7J,EAAKwH,GAAgBA,GAAgB,CAAC,EAAGjH,CAAO,EAAG,CAAC,EAAG,CAC3E,aAAc,EAChB,CAAC,CAAC,EACEsJ,IAAMA,GAAG,KAAK,KAAK,OAAO,KAAK,iLAAiL,CACtN,CACA,IAAIC,EAAO,CAAC,EACRC,EAAe,KAAK,cAAc,iBAAiB,KAAK,QAAQ,YAAaxJ,EAAQ,KAAO,KAAK,QAAQ,EAC7G,GAAI,KAAK,QAAQ,gBAAkB,YAAcwJ,GAAgBA,EAAa,CAAC,EAC7E,QAASjK,EAAI,EAAGA,EAAIiK,EAAa,OAAQjK,IACvCgK,EAAK,KAAKC,EAAajK,CAAC,CAAC,OAElB,KAAK,QAAQ,gBAAkB,MACxCgK,EAAO,KAAK,cAAc,mBAAmBvJ,EAAQ,KAAO,KAAK,QAAQ,EAEzEuJ,EAAK,KAAKvJ,EAAQ,KAAO,KAAK,QAAQ,EAExC,IAAIyJ,EAAOrK,EAAA,SAAckC,GAAG0B,GAAG0G,GAAsB,CACnD,IAAIC,GAAoBX,IAAmBU,KAAyB/H,EAAM+H,GAAuBN,GAC7FvB,EAAO,QAAQ,kBACjBA,EAAO,QAAQ,kBAAkBvG,GAAG2G,EAAWjF,GAAG2G,GAAmBN,GAAerJ,CAAO,EAClF6H,EAAO,kBAAoBA,EAAO,iBAAiB,aAC5DA,EAAO,iBAAiB,YAAYvG,GAAG2G,EAAWjF,GAAG2G,GAAmBN,GAAerJ,CAAO,EAEhG6H,EAAO,KAAK,aAAcvG,GAAG2G,EAAWjF,GAAGrB,CAAG,CAChD,EARW,QASP,KAAK,QAAQ,cACX,KAAK,QAAQ,oBAAsBoH,GACrCQ,EAAK,QAAQ,SAAUK,GAAU,CAC/B/B,EAAO,eAAe,YAAY+B,GAAU5J,CAAO,EAAE,QAAQ,SAAU6J,GAAQ,CAC7EJ,EAAK,CAACG,EAAQ,EAAGnK,EAAMoK,GAAQ7J,EAAQ,eAAe,OAAO6J,EAAM,CAAC,GAAKX,EAAY,CACvF,CAAC,CACH,CAAC,EAEDO,EAAKF,EAAM9J,EAAKyJ,EAAY,EAGlC,CACAvH,EAAM,KAAK,kBAAkBA,EAAK1C,EAAMe,EAASuH,EAAUK,CAAO,EAC9DkB,IAAWnH,IAAQlC,GAAO,KAAK,QAAQ,8BAA6BkC,EAAM,GAAG,OAAOsG,EAAW,GAAG,EAAE,OAAOxI,CAAG,IAC7GqJ,IAAWD,KAAgB,KAAK,QAAQ,yBACvC,KAAK,QAAQ,mBAAqB,KACpClH,EAAM,KAAK,QAAQ,uBAAuB,KAAK,QAAQ,4BAA8B,GAAG,OAAOsG,EAAW,GAAG,EAAE,OAAOxI,CAAG,EAAIA,EAAKoJ,GAAclH,EAAM,MAAS,EAE/JA,EAAM,KAAK,QAAQ,uBAAuBA,CAAG,EAGnD,CACA,OAAIoG,GACFR,EAAS,IAAM5F,EACR4F,GAEF5F,CACT,EA7JO,YA8JT,EAAG,CACD,IAAK,oBACL,MAAOvC,EAAA,SAA2BuC,EAAKlC,EAAKO,EAASuH,EAAUK,EAAS,CACtE,IAAIkC,EAAS,KACb,GAAI,KAAK,YAAc,KAAK,WAAW,MACrCnI,EAAM,KAAK,WAAW,MAAMA,EAAKsF,GAAgBA,GAAgB,CAAC,EAAG,KAAK,QAAQ,cAAc,gBAAgB,EAAGjH,CAAO,EAAGuH,EAAS,QAASA,EAAS,OAAQA,EAAS,QAAS,CAChL,SAAUA,CACZ,CAAC,UACQ,CAACvH,EAAQ,kBAAmB,CACjCA,EAAQ,eAAe,KAAK,aAAa,KAAKiH,GAAgBA,GAAgB,CAAC,EAAGjH,CAAO,EAAG,CAC9F,cAAeiH,GAAgBA,GAAgB,CAAC,EAAG,KAAK,QAAQ,aAAa,EAAGjH,EAAQ,aAAa,CACvG,CAAC,CAAC,EACF,IAAI+J,EAAkB,OAAOpI,GAAQ,WAAa3B,GAAWA,EAAQ,eAAiBA,EAAQ,cAAc,kBAAoB,OAAYA,EAAQ,cAAc,gBAAkB,KAAK,QAAQ,cAAc,iBAC3MgK,EACJ,GAAID,EAAiB,CACnB,IAAIE,EAAKtI,EAAI,MAAM,KAAK,aAAa,aAAa,EAClDqI,EAAUC,GAAMA,EAAG,MACrB,CACA,IAAI1G,EAAOvD,EAAQ,SAAW,OAAOA,EAAQ,SAAY,SAAWA,EAAQ,QAAUA,EAGtF,GAFI,KAAK,QAAQ,cAAc,mBAAkBuD,EAAO0D,GAAgBA,GAAgB,CAAC,EAAG,KAAK,QAAQ,cAAc,gBAAgB,EAAG1D,CAAI,GAC9I5B,EAAM,KAAK,aAAa,YAAYA,EAAK4B,EAAMvD,EAAQ,KAAO,KAAK,SAAUA,CAAO,EAChF+J,EAAiB,CACnB,IAAIG,EAAKvI,EAAI,MAAM,KAAK,aAAa,aAAa,EAC9CwI,EAAUD,GAAMA,EAAG,OACnBF,EAAUG,IAASnK,EAAQ,KAAO,GACxC,CACI,CAACA,EAAQ,KAAO,KAAK,QAAQ,mBAAqB,MAAQuH,GAAYA,EAAS,MAAKvH,EAAQ,IAAMuH,EAAS,SAC3GvH,EAAQ,OAAS,KAAO2B,EAAM,KAAK,aAAa,KAAKA,EAAK,UAAY,CACxE,QAASvB,EAAO,UAAU,OAAQR,EAAO,IAAI,MAAMQ,CAAI,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAC/ET,EAAKS,CAAI,EAAI,UAAUA,CAAI,EAE7B,OAAIuH,GAAWA,EAAQ,CAAC,IAAMhI,EAAK,CAAC,GAAK,CAACI,EAAQ,SAChD8J,EAAO,OAAO,KAAK,6CAA6C,OAAOlK,EAAK,CAAC,EAAG,WAAW,EAAE,OAAOH,EAAI,CAAC,CAAC,CAAC,EACpG,MAEFqK,EAAO,UAAU,MAAMA,EAAQlK,EAAK,OAAO,CAACH,CAAG,CAAC,CAAC,CAC1D,EAAGO,CAAO,GACNA,EAAQ,eAAe,KAAK,aAAa,MAAM,CACrD,CACA,IAAIoK,EAAcpK,EAAQ,aAAe,KAAK,QAAQ,YAClDqK,EAAqB,OAAOD,GAAgB,SAAW,CAACA,CAAW,EAAIA,EAC3E,OAAyBzI,GAAQ,MAAQ0I,GAAsBA,EAAmB,QAAUrK,EAAQ,qBAAuB,KACzH2B,EAAMgF,GAAc,OAAO0D,EAAoB1I,EAAKlC,EAAK,KAAK,SAAW,KAAK,QAAQ,wBAA0BwH,GAAgB,CAC9H,aAAcM,CAChB,EAAGvH,CAAO,EAAIA,EAAS,IAAI,GAEtB2B,CACT,EA7CO,oBA8CT,EAAG,CACD,IAAK,UACL,MAAOvC,EAAA,SAAiBH,EAAM,CAC5B,IAAIqL,EAAS,KACTtK,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/EuK,EACAzB,EACA0B,EACAC,EACAC,EACJ,OAAI,OAAOzL,GAAS,WAAUA,EAAO,CAACA,CAAI,GAC1CA,EAAK,QAAQ,SAAU+D,EAAG,CACxB,GAAI,CAAAsH,EAAO,cAAcC,CAAK,EAC9B,KAAII,EAAYL,EAAO,eAAetH,EAAGhD,CAAO,EAC5CP,EAAMkL,EAAU,IACpB7B,EAAUrJ,EACV,IAAI+H,EAAamD,EAAU,WACvBL,EAAO,QAAQ,aAAY9C,EAAaA,EAAW,OAAO8C,EAAO,QAAQ,UAAU,GACvF,IAAIvB,EAAsB/I,EAAQ,QAAU,QAAa,OAAOA,EAAQ,OAAU,SAC9E4K,EAAwB7B,GAAuB,CAAC/I,EAAQ,SAAWA,EAAQ,QAAU,GAAKsK,EAAO,eAAe,iBAAiB,EACjIO,EAAuB7K,EAAQ,UAAY,SAAc,OAAOA,EAAQ,SAAY,UAAY,OAAOA,EAAQ,SAAY,WAAaA,EAAQ,UAAY,GAC5J8K,EAAQ9K,EAAQ,KAAOA,EAAQ,KAAOsK,EAAO,cAAc,mBAAmBtK,EAAQ,KAAOsK,EAAO,SAAUtK,EAAQ,WAAW,EACrIwH,EAAW,QAAQ,SAAUtB,EAAI,CAC3BoE,EAAO,cAAcC,CAAK,IAC9BG,EAASxE,EACL,CAACkB,GAAiB,GAAG,OAAO0D,EAAM,CAAC,EAAG,GAAG,EAAE,OAAO5E,CAAE,CAAC,GAAKoE,EAAO,OAASA,EAAO,MAAM,oBAAsB,CAACA,EAAO,MAAM,mBAAmBI,CAAM,IACtJtD,GAAiB,GAAG,OAAO0D,EAAM,CAAC,EAAG,GAAG,EAAE,OAAO5E,CAAE,CAAC,EAAI,GACxDoE,EAAO,OAAO,KAAK,QAAS,OAAOxB,EAAS,mBAAqB,EAAE,OAAOgC,EAAM,KAAK,IAAI,EAAG,qCAAuC,EAAE,OAAOJ,EAAQ,sBAAuB,EAAG,0NAA0N,GAE1YI,EAAM,QAAQ,SAAUC,EAAM,CAC5B,GAAI,CAAAT,EAAO,cAAcC,CAAK,EAC9B,CAAAE,EAAUM,EACV,IAAIC,EAAY,CAACvL,CAAG,EACpB,GAAI6K,EAAO,YAAcA,EAAO,WAAW,cACzCA,EAAO,WAAW,cAAcU,EAAWvL,EAAKsL,EAAM7E,EAAIlG,CAAO,MAC5D,CACL,IAAIiL,GACAlC,IAAqBkC,GAAeX,EAAO,eAAe,UAAUS,EAAM/K,EAAQ,MAAOA,CAAO,GACpG,IAAIkL,EAAa,GAAG,OAAOZ,EAAO,QAAQ,gBAAiB,MAAM,EAOjE,GANIvB,IACFiC,EAAU,KAAKvL,EAAMwL,EAAY,EAC7BL,GACFI,EAAU,KAAKvL,EAAMyL,CAAU,GAG/BL,EAAsB,CACxB,IAAIM,EAAa,GAAG,OAAO1L,CAAG,EAAE,OAAO6K,EAAO,QAAQ,gBAAgB,EAAE,OAAOtK,EAAQ,OAAO,EAC9FgL,EAAU,KAAKG,CAAU,EACrBpC,IACFiC,EAAU,KAAKG,EAAaF,EAAY,EACpCL,GACFI,EAAU,KAAKG,EAAaD,CAAU,EAG5C,CACF,CAEA,QADIE,GACGA,GAAcJ,EAAU,IAAI,GAC5BV,EAAO,cAAcC,CAAK,IAC7BC,EAAeY,GACfb,EAAQD,EAAO,YAAYS,EAAM7E,EAAIkF,GAAapL,CAAO,GAG/D,CAAC,EACH,CAAC,EACH,CAAC,EACM,CACL,IAAKuK,EACL,QAASzB,EACT,aAAc0B,EACd,QAASC,EACT,OAAQC,CACV,CACF,EAvEO,UAwET,EAAG,CACD,IAAK,gBACL,MAAOtL,EAAA,SAAuBuC,EAAK,CACjC,OAAOA,IAAQ,QAAa,EAAE,CAAC,KAAK,QAAQ,YAAcA,IAAQ,OAAS,EAAE,CAAC,KAAK,QAAQ,mBAAqBA,IAAQ,GAC1H,EAFO,gBAGT,EAAG,CACD,IAAK,cACL,MAAOvC,EAAA,SAAqB2L,EAAM7E,EAAIzG,EAAK,CACzC,IAAIO,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EACnF,OAAI,KAAK,YAAc,KAAK,WAAW,YAAoB,KAAK,WAAW,YAAY+K,EAAM7E,EAAIzG,EAAKO,CAAO,EACtG,KAAK,cAAc,YAAY+K,EAAM7E,EAAIzG,EAAKO,CAAO,CAC9D,EAJO,cAKT,CAAC,EAAG,CAAC,CACH,IAAK,kBACL,MAAOZ,EAAA,SAAyBY,EAAS,CACvC,IAAIa,EAAS,eACb,QAASwK,KAAUrL,EACjB,GAAI,OAAO,UAAU,eAAe,KAAKA,EAASqL,CAAM,GAAKxK,IAAWwK,EAAO,UAAU,EAAGxK,EAAO,MAAM,GAAmBb,EAAQqL,CAAM,IAA5B,OAC5G,MAAO,GAGX,MAAO,EACT,EARO,kBAST,CAAC,CAAC,EACKhE,CACT,EAAEpG,EAAY,EAEd,SAASqK,GAAWC,EAAQ,CAC1B,OAAOA,EAAO,OAAO,CAAC,EAAE,YAAY,EAAIA,EAAO,MAAM,CAAC,CACxD,CAFSnM,EAAAkM,GAAA,cAGT,IAAIE,GAAe,UAAY,CAC7B,SAASA,EAAaxL,EAAS,CAC7BC,GAAgB,KAAMuL,CAAY,EAClC,KAAK,QAAUxL,EACf,KAAK,cAAgB,KAAK,QAAQ,eAAiB,GACnD,KAAK,OAASgB,GAAW,OAAO,eAAe,CACjD,CALS,OAAA5B,EAAAoM,EAAA,gBAMTtL,GAAasL,EAAc,CAAC,CAC1B,IAAK,wBACL,MAAOpM,EAAA,SAA+B2L,EAAM,CAC1C,GAAI,CAACA,GAAQA,EAAK,QAAQ,GAAG,EAAI,EAAG,OAAO,KAC3C,IAAIhG,EAAIgG,EAAK,MAAM,GAAG,EAGtB,OAFIhG,EAAE,SAAW,IACjBA,EAAE,IAAI,EACFA,EAAEA,EAAE,OAAS,CAAC,EAAE,YAAY,IAAM,KAAY,KAC3C,KAAK,mBAAmBA,EAAE,KAAK,GAAG,CAAC,CAC5C,EAPO,wBAQT,EAAG,CACD,IAAK,0BACL,MAAO3F,EAAA,SAAiC2L,EAAM,CAC5C,GAAI,CAACA,GAAQA,EAAK,QAAQ,GAAG,EAAI,EAAG,OAAOA,EAC3C,IAAIhG,EAAIgG,EAAK,MAAM,GAAG,EACtB,OAAO,KAAK,mBAAmBhG,EAAE,CAAC,CAAC,CACrC,EAJO,0BAKT,EAAG,CACD,IAAK,qBACL,MAAO3F,EAAA,SAA4B2L,EAAM,CACvC,GAAI,OAAOA,GAAS,UAAYA,EAAK,QAAQ,GAAG,EAAI,GAAI,CACtD,IAAIU,EAAe,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAM,EACtE1G,EAAIgG,EAAK,MAAM,GAAG,EACtB,OAAI,KAAK,QAAQ,aACfhG,EAAIA,EAAE,IAAI,SAAU2G,EAAM,CACxB,OAAOA,EAAK,YAAY,CAC1B,CAAC,EACQ3G,EAAE,SAAW,GACtBA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAE,YAAY,EACxBA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAE,YAAY,EACpB0G,EAAa,QAAQ1G,EAAE,CAAC,EAAE,YAAY,CAAC,EAAI,KAAIA,EAAE,CAAC,EAAIuG,GAAWvG,EAAE,CAAC,EAAE,YAAY,CAAC,IAC9EA,EAAE,SAAW,IACtBA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAE,YAAY,EACpBA,EAAE,CAAC,EAAE,SAAW,IAAGA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAE,YAAY,GAC3CA,EAAE,CAAC,IAAM,OAASA,EAAE,CAAC,EAAE,SAAW,IAAGA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAE,YAAY,GAC7D0G,EAAa,QAAQ1G,EAAE,CAAC,EAAE,YAAY,CAAC,EAAI,KAAIA,EAAE,CAAC,EAAIuG,GAAWvG,EAAE,CAAC,EAAE,YAAY,CAAC,GACnF0G,EAAa,QAAQ1G,EAAE,CAAC,EAAE,YAAY,CAAC,EAAI,KAAIA,EAAE,CAAC,EAAIuG,GAAWvG,EAAE,CAAC,EAAE,YAAY,CAAC,IAElFA,EAAE,KAAK,GAAG,CACnB,CACA,OAAO,KAAK,QAAQ,WAAa,KAAK,QAAQ,aAAegG,EAAK,YAAY,EAAIA,CACpF,EAtBO,qBAuBT,EAAG,CACD,IAAK,kBACL,MAAO3L,EAAA,SAAyB2L,EAAM,CACpC,OAAI,KAAK,QAAQ,OAAS,gBAAkB,KAAK,QAAQ,4BACvDA,EAAO,KAAK,wBAAwBA,CAAI,GAEnC,CAAC,KAAK,eAAiB,CAAC,KAAK,cAAc,QAAU,KAAK,cAAc,QAAQA,CAAI,EAAI,EACjG,EALO,kBAMT,EAAG,CACD,IAAK,wBACL,MAAO3L,EAAA,SAA+B0L,EAAO,CAC3C,IAAI1J,EAAQ,KACZ,GAAI,CAAC0J,EAAO,OAAO,KACnB,IAAIP,EACJ,OAAAO,EAAM,QAAQ,SAAUC,EAAM,CAC5B,GAAI,CAAAR,EACJ,KAAIoB,EAAavK,EAAM,mBAAmB2J,CAAI,GAC1C,CAAC3J,EAAM,QAAQ,eAAiBA,EAAM,gBAAgBuK,CAAU,KAAGpB,EAAQoB,GACjF,CAAC,EACG,CAACpB,GAAS,KAAK,QAAQ,eACzBO,EAAM,QAAQ,SAAUC,EAAM,CAC5B,GAAI,CAAAR,EACJ,KAAIqB,EAAUxK,EAAM,wBAAwB2J,CAAI,EAChD,GAAI3J,EAAM,gBAAgBwK,CAAO,EAAG,OAAOrB,EAAQqB,EACnDrB,EAAQnJ,EAAM,QAAQ,cAAc,KAAK,SAAUyK,EAAc,CAC/D,GAAIA,IAAiBD,EAAS,OAAOC,EACrC,GAAI,EAAAA,EAAa,QAAQ,GAAG,EAAI,GAAKD,EAAQ,QAAQ,GAAG,EAAI,IACxDC,EAAa,QAAQD,CAAO,IAAM,EAAG,OAAOC,CAClD,CAAC,EACH,CAAC,EAEEtB,IAAOA,EAAQ,KAAK,iBAAiB,KAAK,QAAQ,WAAW,EAAE,CAAC,GAC9DA,CACT,EAvBO,wBAwBT,EAAG,CACD,IAAK,mBACL,MAAOnL,EAAA,SAA0B0M,EAAWf,EAAM,CAChD,GAAI,CAACe,EAAW,MAAO,CAAC,EAGxB,GAFI,OAAOA,GAAc,aAAYA,EAAYA,EAAUf,CAAI,GAC3D,OAAOe,GAAc,WAAUA,EAAY,CAACA,CAAS,GACrD,OAAO,UAAU,SAAS,MAAMA,CAAS,IAAM,iBAAkB,OAAOA,EAC5E,GAAI,CAACf,EAAM,OAAOe,EAAU,SAAc,CAAC,EAC3C,IAAIvB,EAAQuB,EAAUf,CAAI,EAC1B,OAAKR,IAAOA,EAAQuB,EAAU,KAAK,sBAAsBf,CAAI,CAAC,GACzDR,IAAOA,EAAQuB,EAAU,KAAK,mBAAmBf,CAAI,CAAC,GACtDR,IAAOA,EAAQuB,EAAU,KAAK,wBAAwBf,CAAI,CAAC,GAC3DR,IAAOA,EAAQuB,EAAU,SACvBvB,GAAS,CAAC,CACnB,EAZO,mBAaT,EAAG,CACD,IAAK,qBACL,MAAOnL,EAAA,SAA4B2L,EAAMgB,EAAc,CACrD,IAAIlE,EAAS,KACTmE,EAAgB,KAAK,iBAAiBD,GAAgB,KAAK,QAAQ,aAAe,CAAC,EAAGhB,CAAI,EAC1FD,EAAQ,CAAC,EACTmB,EAAU7M,EAAA,SAAiBmF,EAAG,CAC3BA,IACDsD,EAAO,gBAAgBtD,CAAC,EAC1BuG,EAAM,KAAKvG,CAAC,EAEZsD,EAAO,OAAO,KAAK,uDAAuD,OAAOtD,CAAC,CAAC,EAEvF,EAPc,WAQd,OAAI,OAAOwG,GAAS,UAAYA,EAAK,QAAQ,GAAG,EAAI,IAC9C,KAAK,QAAQ,OAAS,gBAAgBkB,EAAQ,KAAK,mBAAmBlB,CAAI,CAAC,EAC3E,KAAK,QAAQ,OAAS,gBAAkB,KAAK,QAAQ,OAAS,eAAekB,EAAQ,KAAK,sBAAsBlB,CAAI,CAAC,EACrH,KAAK,QAAQ,OAAS,eAAekB,EAAQ,KAAK,wBAAwBlB,CAAI,CAAC,GAC1E,OAAOA,GAAS,UACzBkB,EAAQ,KAAK,mBAAmBlB,CAAI,CAAC,EAEvCiB,EAAc,QAAQ,SAAUE,EAAI,CAC9BpB,EAAM,QAAQoB,CAAE,EAAI,GAAGD,EAAQpE,EAAO,mBAAmBqE,CAAE,CAAC,CAClE,CAAC,EACMpB,CACT,EAvBO,qBAwBT,CAAC,CAAC,EACKU,CACT,EAAE,EAEEW,GAAO,CAAC,CACV,KAAM,CAAC,MAAO,KAAM,KAAM,MAAO,KAAM,MAAO,MAAO,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,QAAS,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EACrI,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,CACN,EAAG,CACD,KAAM,CAAC,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,MAAO,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,KAAM,MAAO,MAAO,KAAM,QAAS,KAAM,MAAO,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAC7Y,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,CACN,EAAG,CACD,KAAM,CAAC,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAC5I,GAAI,CAAC,CAAC,EACN,GAAI,CACN,EAAG,CACD,KAAM,CAAC,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,IAAI,EACtD,GAAI,CAAC,EAAG,EAAG,CAAC,EACZ,GAAI,CACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,GAAG,EACxB,GAAI,CACN,EAAG,CACD,KAAM,CAAC,KAAM,IAAI,EACjB,GAAI,CAAC,EAAG,EAAG,CAAC,EACZ,GAAI,CACN,EAAG,CACD,KAAM,CAAC,MAAO,IAAI,EAClB,GAAI,CAAC,EAAG,EAAG,CAAC,EACZ,GAAI,CACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAG,CAAC,EACf,GAAI,CACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,CACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAG,EAAG,EAAE,EACnB,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAG,EAAE,EAChB,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAG,CAAC,EACf,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAE,EACb,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,CAAC,EACZ,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,EACN,EAAG,CACD,KAAM,CAAC,KAAK,EACZ,GAAI,CAAC,EAAG,EAAG,CAAC,EACZ,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,GAAI,EAAE,EACjB,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,CACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAE,EACb,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAG,CAAC,EACf,GAAI,EACN,EAAG,CACD,KAAM,CAAC,KAAM,IAAI,EACjB,GAAI,CAAC,EAAG,EAAG,GAAI,EAAE,EACjB,GAAI,EACN,CAAC,EACGC,GAAqB,CACvB,EAAGhN,EAAA,SAAWqH,EAAG,CACf,MAAO,EAAOA,EAAI,EACpB,EAFG,KAGH,EAAGrH,EAAA,SAAWqH,EAAG,CACf,MAAO,EAAOA,GAAK,EACrB,EAFG,KAGH,EAAGrH,EAAA,SAAWqH,EAAG,CACf,MAAO,EACT,EAFG,KAGH,EAAGrH,EAAA,SAAWqH,EAAG,CACf,OAAcA,EAAI,IAAM,GAAKA,EAAI,KAAO,GAAK,EAAIA,EAAI,IAAM,GAAKA,EAAI,IAAM,IAAMA,EAAI,IAAM,IAAMA,EAAI,KAAO,IAAM,EAAI,CACvH,EAFG,KAGH,EAAGrH,EAAA,SAAWqH,EAAG,CACf,OAAcA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAIA,EAAI,KAAO,GAAKA,EAAI,KAAO,GAAK,EAAIA,EAAI,KAAO,GAAK,EAAI,CAC/G,EAFG,KAGH,EAAGrH,EAAA,SAAWqH,EAAG,CACf,OAAcA,GAAK,EAAI,EAAIA,GAAK,GAAKA,GAAK,EAAI,EAAI,CACpD,EAFG,KAGH,EAAGrH,EAAA,SAAWqH,EAAG,CACf,OAAcA,GAAK,EAAI,EAAIA,EAAI,IAAM,GAAKA,EAAI,IAAM,IAAMA,EAAI,IAAM,IAAMA,EAAI,KAAO,IAAM,EAAI,CACjG,EAFG,KAGH,EAAGrH,EAAA,SAAWqH,EAAG,CACf,OAAcA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAIA,GAAK,GAAKA,GAAK,GAAK,EAAI,CAClE,EAFG,KAGH,EAAGrH,EAAA,SAAWqH,EAAG,CACf,MAAO,EAAOA,GAAK,EACrB,EAFG,KAGH,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,OAAcA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAIA,EAAI,EAAI,EAAIA,EAAI,GAAK,EAAI,CACnE,EAFI,KAGJ,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,OAAcA,GAAK,GAAKA,GAAK,GAAK,EAAIA,GAAK,GAAKA,GAAK,GAAK,EAAIA,EAAI,GAAKA,EAAI,GAAK,EAAI,CACtF,EAFI,KAGJ,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,MAAO,EAAOA,EAAI,IAAM,GAAKA,EAAI,KAAO,GAC1C,EAFI,KAGJ,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,MAAO,EAAOA,IAAM,EACtB,EAFI,KAGJ,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,OAAcA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAI,CACvD,EAFI,KAGJ,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,OAAcA,EAAI,IAAM,GAAKA,EAAI,KAAO,GAAK,EAAIA,EAAI,IAAM,IAAMA,EAAI,IAAM,IAAMA,EAAI,KAAO,IAAM,EAAI,CACxG,EAFI,KAGJ,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,OAAcA,EAAI,IAAM,GAAKA,EAAI,KAAO,GAAK,EAAIA,IAAM,EAAI,EAAI,CACjE,EAFI,KAGJ,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,OAAcA,GAAK,GAAKA,EAAI,IAAM,GAAKA,EAAI,KAAO,GAAK,EAAI,CAC7D,EAFI,KAGJ,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,OAAcA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAI,CAC1C,EAFI,KAGJ,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,OAAcA,GAAK,EAAI,EAAIA,GAAK,GAAKA,EAAI,IAAM,GAAKA,EAAI,IAAM,GAAK,EAAIA,EAAI,IAAM,IAAMA,EAAI,IAAM,GAAK,EAAI,CAC5G,EAFI,KAGJ,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,OAAcA,GAAK,EAAI,EAAIA,GAAK,GAAKA,EAAI,IAAM,GAAKA,EAAI,IAAM,GAAK,EAAI,CACzE,EAFI,KAGJ,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,OAAcA,EAAI,KAAO,EAAI,EAAIA,EAAI,KAAO,EAAI,EAAIA,EAAI,KAAO,GAAKA,EAAI,KAAO,EAAI,EAAI,CACzF,EAFI,KAGJ,GAAIrH,EAAA,SAAWqH,EAAG,CAChB,OAAcA,GAAK,EAAI,EAAIA,GAAK,EAAI,GAAKA,EAAI,GAAKA,EAAI,KAAOA,EAAI,IAAM,EAAI,EAAI,CACjF,EAFI,IAGN,EACI4F,GAAyB,CAAC,KAAM,KAAM,IAAI,EAC1CC,GAAgB,CAClB,KAAM,EACN,IAAK,EACL,IAAK,EACL,IAAK,EACL,KAAM,EACN,MAAO,CACT,EACA,SAASC,IAAc,CACrB,IAAIC,EAAQ,CAAC,EACb,OAAAL,GAAK,QAAQ,SAAUM,EAAK,CAC1BA,EAAI,KAAK,QAAQ,SAAUnL,EAAG,CAC5BkL,EAAMlL,CAAC,EAAI,CACT,QAASmL,EAAI,GACb,QAASL,GAAmBK,EAAI,EAAE,CACpC,CACF,CAAC,CACH,CAAC,EACMD,CACT,CAXSpN,EAAAmN,GAAA,eAYT,IAAIG,GAAiB,UAAY,CAC/B,SAASA,EAAeC,EAAe,CACrC,IAAI3M,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EACnFC,GAAgB,KAAMyM,CAAc,EACpC,KAAK,cAAgBC,EACrB,KAAK,QAAU3M,EACf,KAAK,OAASgB,GAAW,OAAO,gBAAgB,GAC3C,CAAC,KAAK,QAAQ,mBAAqB,KAAK,QAAQ,oBAAsB,QAAU,OAAO,KAAS,KAAe,CAAC,KAAK,eACxH,KAAK,QAAQ,kBAAoB,KACjC,KAAK,OAAO,MAAM,oJAAoJ,GAExK,KAAK,MAAQuL,GAAY,CAC3B,CAXS,OAAAnN,EAAAsN,EAAA,kBAYTxM,GAAawM,EAAgB,CAAC,CAC5B,IAAK,UACL,MAAOtN,EAAA,SAAiBgH,EAAKrD,EAAK,CAChC,KAAK,MAAMqD,CAAG,EAAIrD,CACpB,EAFO,UAGT,EAAG,CACD,IAAK,UACL,MAAO3D,EAAA,SAAiB2L,EAAM,CAC5B,IAAI/K,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EACnF,GAAI,KAAK,iBAAiB,EACxB,GAAI,CACF,OAAO,IAAI,KAAK,YAAY+K,EAAM,CAChC,KAAM/K,EAAQ,QAAU,UAAY,UACtC,CAAC,CACH,MAAkB,CAChB,MACF,CAEF,OAAO,KAAK,MAAM+K,CAAI,GAAK,KAAK,MAAM,KAAK,cAAc,wBAAwBA,CAAI,CAAC,CACxF,EAZO,UAaT,EAAG,CACD,IAAK,cACL,MAAO3L,EAAA,SAAqB2L,EAAM,CAChC,IAAI/K,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/E4M,EAAO,KAAK,QAAQ7B,EAAM/K,CAAO,EACrC,OAAI,KAAK,iBAAiB,EACjB4M,GAAQA,EAAK,gBAAgB,EAAE,iBAAiB,OAAS,EAE3DA,GAAQA,EAAK,QAAQ,OAAS,CACvC,EAPO,cAQT,EAAG,CACD,IAAK,sBACL,MAAOxN,EAAA,SAA6B2L,EAAMtL,EAAK,CAC7C,IAAIO,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EACnF,OAAO,KAAK,YAAY+K,EAAM/K,CAAO,EAAE,IAAI,SAAU6J,EAAQ,CAC3D,MAAO,GAAG,OAAOpK,CAAG,EAAE,OAAOoK,CAAM,CACrC,CAAC,CACH,EALO,sBAMT,EAAG,CACD,IAAK,cACL,MAAOzK,EAAA,SAAqB2L,EAAM,CAChC,IAAI3J,EAAQ,KACRpB,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/E4M,EAAO,KAAK,QAAQ7B,EAAM/K,CAAO,EACrC,OAAK4M,EAGD,KAAK,iBAAiB,EACjBA,EAAK,gBAAgB,EAAE,iBAAiB,KAAK,SAAUC,EAAiBC,EAAiB,CAC9F,OAAOR,GAAcO,CAAe,EAAIP,GAAcQ,CAAe,CACvE,CAAC,EAAE,IAAI,SAAUC,EAAgB,CAC/B,MAAO,GAAG,OAAO3L,EAAM,QAAQ,OAAO,EAAE,OAAO2L,CAAc,CAC/D,CAAC,EAEIH,EAAK,QAAQ,IAAI,SAAUI,EAAQ,CACxC,OAAO5L,EAAM,UAAU2J,EAAMiC,EAAQhN,CAAO,CAC9C,CAAC,EAXQ,CAAC,CAYZ,EAjBO,cAkBT,EAAG,CACD,IAAK,YACL,MAAOZ,EAAA,SAAmB2L,EAAMkC,EAAO,CACrC,IAAIjN,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/E4M,EAAO,KAAK,QAAQ7B,EAAM/K,CAAO,EACrC,OAAI4M,EACE,KAAK,iBAAiB,EACjB,GAAG,OAAO,KAAK,QAAQ,OAAO,EAAE,OAAOA,EAAK,OAAOK,CAAK,CAAC,EAE3D,KAAK,yBAAyBL,EAAMK,CAAK,GAElD,KAAK,OAAO,KAAK,6BAA6B,OAAOlC,CAAI,CAAC,EACnD,GACT,EAXO,YAYT,EAAG,CACD,IAAK,2BACL,MAAO3L,EAAA,SAAkCwN,EAAMK,EAAO,CACpD,IAAIpF,EAAS,KACTqF,EAAMN,EAAK,MAAQA,EAAK,QAAQK,CAAK,EAAIL,EAAK,QAAQ,KAAK,IAAIK,CAAK,CAAC,EACrEpD,EAAS+C,EAAK,QAAQM,CAAG,EACzB,KAAK,QAAQ,sBAAwBN,EAAK,QAAQ,SAAW,GAAKA,EAAK,QAAQ,CAAC,IAAM,IACpF/C,IAAW,EACbA,EAAS,SACAA,IAAW,IACpBA,EAAS,KAGb,IAAIsD,EAAe/N,EAAA,UAAwB,CACzC,OAAOyI,EAAO,QAAQ,SAAWgC,EAAO,SAAS,EAAIhC,EAAO,QAAQ,QAAUgC,EAAO,SAAS,EAAIA,EAAO,SAAS,CACpH,EAFmB,gBAGnB,OAAI,KAAK,QAAQ,oBAAsB,KACjCA,IAAW,EAAU,GACrB,OAAOA,GAAW,SAAiB,WAAW,OAAOA,EAAO,SAAS,CAAC,EACnEsD,EAAa,EACX,KAAK,QAAQ,oBAAsB,MAEnC,KAAK,QAAQ,sBAAwBP,EAAK,QAAQ,SAAW,GAAKA,EAAK,QAAQ,CAAC,IAAM,EADxFO,EAAa,EAIf,KAAK,QAAQ,SAAWD,EAAI,SAAS,EAAI,KAAK,QAAQ,QAAUA,EAAI,SAAS,EAAIA,EAAI,SAAS,CACvG,EAxBO,2BAyBT,EAAG,CACD,IAAK,mBACL,MAAO9N,EAAA,UAA4B,CACjC,MAAO,CAACiN,GAAuB,SAAS,KAAK,QAAQ,iBAAiB,CACxE,EAFO,mBAGT,CAAC,CAAC,EACKK,CACT,EAAE,EAEF,SAASU,GAAUrO,EAAQC,EAAgB,CAAE,IAAIC,EAAO,OAAO,KAAKF,CAAM,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIG,EAAU,OAAO,sBAAsBH,CAAM,EAAGC,IAAmBE,EAAUA,EAAQ,OAAO,SAAUC,EAAK,CAAE,OAAO,OAAO,yBAAyBJ,EAAQI,CAAG,EAAE,UAAY,CAAC,GAAIF,EAAK,KAAK,MAAMA,EAAMC,CAAO,CAAG,CAAE,OAAOD,CAAM,CAA7UG,EAAAgO,GAAA,aACT,SAASC,GAAgB/N,EAAQ,CAAE,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAIC,EAAiB,UAAUD,CAAC,GAAnB,KAAuB,UAAUA,CAAC,EAAI,CAAC,EAAGA,EAAI,EAAI6N,GAAU,OAAO5N,CAAM,EAAG,EAAE,EAAE,QAAQ,SAAUC,EAAK,CAAEC,GAAgBJ,EAAQG,EAAKD,EAAOC,CAAG,CAAC,CAAG,CAAC,EAAI,OAAO,0BAA4B,OAAO,iBAAiBH,EAAQ,OAAO,0BAA0BE,CAAM,CAAC,EAAI4N,GAAU,OAAO5N,CAAM,CAAC,EAAE,QAAQ,SAAUC,EAAK,CAAE,OAAO,eAAeH,EAAQG,EAAK,OAAO,yBAAyBD,EAAQC,CAAG,CAAC,CAAG,CAAC,CAAG,CAAE,OAAOH,CAAQ,CAAtfF,EAAAiO,GAAA,mBACT,SAASC,GAAqB/J,EAAMC,EAAa/D,EAAK,CACpD,IAAI4E,EAAe,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,IACnFgC,EAAsB,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,GAC1F9D,EAAOe,GAAoBC,EAAMC,EAAa/D,CAAG,EACrD,MAAI,CAAC8C,GAAQ8D,GAAuB,OAAO5G,GAAQ,WACjD8C,EAAOoC,GAASpB,EAAM9D,EAAK4E,CAAY,EACnC9B,IAAS,SAAWA,EAAOoC,GAASnB,EAAa/D,EAAK4E,CAAY,IAEjE9B,CACT,CATSnD,EAAAkO,GAAA,wBAUT,IAAIC,GAAe,UAAY,CAC7B,SAASA,GAAe,CACtB,IAAIvN,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EACnFC,GAAgB,KAAMsN,CAAY,EAClC,KAAK,OAASvM,GAAW,OAAO,cAAc,EAC9C,KAAK,QAAUhB,EACf,KAAK,OAASA,EAAQ,eAAiBA,EAAQ,cAAc,QAAU,SAAUyD,EAAO,CACtF,OAAOA,CACT,EACA,KAAK,KAAKzD,CAAO,CACnB,CATS,OAAAZ,EAAAmO,EAAA,gBAUTrN,GAAaqN,EAAc,CAAC,CAC1B,IAAK,OACL,MAAOnO,EAAA,UAAgB,CACrB,IAAIY,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC9EA,EAAQ,gBAAeA,EAAQ,cAAgB,CAClD,YAAa,EACf,GACA,IAAIwN,EAAQxN,EAAQ,cACpB,KAAK,OAASwN,EAAM,SAAW,OAAYA,EAAM,OAASxJ,GAC1D,KAAK,YAAcwJ,EAAM,cAAgB,OAAYA,EAAM,YAAc,GACzE,KAAK,oBAAsBA,EAAM,sBAAwB,OAAYA,EAAM,oBAAsB,GACjG,KAAK,OAASA,EAAM,OAAS3J,GAAY2J,EAAM,MAAM,EAAIA,EAAM,eAAiB,KAChF,KAAK,OAASA,EAAM,OAAS3J,GAAY2J,EAAM,MAAM,EAAIA,EAAM,eAAiB,KAChF,KAAK,gBAAkBA,EAAM,gBAAkBA,EAAM,gBAAkBA,EAAM,iBAAmB,IAChG,KAAK,eAAiBA,EAAM,eAAiB,GAAKA,EAAM,gBAAkB,IAC1E,KAAK,eAAiB,KAAK,eAAiB,GAAKA,EAAM,gBAAkB,GACzE,KAAK,cAAgBA,EAAM,cAAgB3J,GAAY2J,EAAM,aAAa,EAAIA,EAAM,sBAAwB3J,GAAY,KAAK,EAC7H,KAAK,cAAgB2J,EAAM,cAAgB3J,GAAY2J,EAAM,aAAa,EAAIA,EAAM,sBAAwB3J,GAAY,GAAG,EAC3H,KAAK,wBAA0B2J,EAAM,wBAA0BA,EAAM,wBAA0BA,EAAM,yBAA2B,IAChI,KAAK,YAAcA,EAAM,YAAcA,EAAM,YAAc,IAC3D,KAAK,aAAeA,EAAM,eAAiB,OAAYA,EAAM,aAAe,GAC5E,KAAK,YAAY,CACnB,EApBO,OAqBT,EAAG,CACD,IAAK,QACL,MAAOpO,EAAA,UAAiB,CAClB,KAAK,SAAS,KAAK,KAAK,KAAK,OAAO,CAC1C,EAFO,QAGT,EAAG,CACD,IAAK,cACL,MAAOA,EAAA,UAAuB,CAC5B,IAAIqO,EAAY,GAAG,OAAO,KAAK,OAAQ,OAAO,EAAE,OAAO,KAAK,MAAM,EAClE,KAAK,OAAS,IAAI,OAAOA,EAAW,GAAG,EACvC,IAAIC,EAAoB,GAAG,OAAO,KAAK,MAAM,EAAE,OAAO,KAAK,eAAgB,OAAO,EAAE,OAAO,KAAK,cAAc,EAAE,OAAO,KAAK,MAAM,EAClI,KAAK,eAAiB,IAAI,OAAOA,EAAmB,GAAG,EACvD,IAAIC,EAAmB,GAAG,OAAO,KAAK,cAAe,OAAO,EAAE,OAAO,KAAK,aAAa,EACvF,KAAK,cAAgB,IAAI,OAAOA,EAAkB,GAAG,CACvD,EAPO,cAQT,EAAG,CACD,IAAK,cACL,MAAOvO,EAAA,SAAqB0E,EAAKP,EAAM6C,EAAKpG,EAAS,CACnD,IAAIoB,EAAQ,KACRwM,EACAnK,EACAoK,EACArK,EAAc,KAAK,SAAW,KAAK,QAAQ,eAAiB,KAAK,QAAQ,cAAc,kBAAoB,CAAC,EAChH,SAASsK,EAAUC,EAAK,CACtB,OAAOA,EAAI,QAAQ,MAAO,MAAM,CAClC,CAFS3O,EAAA0O,EAAA,aAGT,IAAIE,EAAe5O,EAAA,SAAsBK,EAAK,CAC5C,GAAIA,EAAI,QAAQ2B,EAAM,eAAe,EAAI,EAAG,CAC1C,IAAImB,EAAO+K,GAAqB/J,EAAMC,EAAa/D,EAAK2B,EAAM,QAAQ,aAAcA,EAAM,QAAQ,mBAAmB,EACrH,OAAOA,EAAM,aAAeA,EAAM,OAAOmB,EAAM,OAAW6D,EAAKiH,GAAgBA,GAAgBA,GAAgB,CAAC,EAAGrN,CAAO,EAAGuD,CAAI,EAAG,CAAC,EAAG,CACtI,iBAAkB9D,CACpB,CAAC,CAAC,EAAI8C,CACR,CACA,IAAIwC,EAAItF,EAAI,MAAM2B,EAAM,eAAe,EACnC4B,EAAI+B,EAAE,MAAM,EAAE,KAAK,EACnBkJ,EAAIlJ,EAAE,KAAK3D,EAAM,eAAe,EAAE,KAAK,EAC3C,OAAOA,EAAM,OAAOkM,GAAqB/J,EAAMC,EAAaR,EAAG5B,EAAM,QAAQ,aAAcA,EAAM,QAAQ,mBAAmB,EAAG6M,EAAG7H,EAAKiH,GAAgBA,GAAgBA,GAAgB,CAAC,EAAGrN,CAAO,EAAGuD,CAAI,EAAG,CAAC,EAAG,CAC9M,iBAAkBP,CACpB,CAAC,CAAC,CACJ,EAbmB,gBAcnB,KAAK,YAAY,EACjB,IAAIkL,EAA8BlO,GAAWA,EAAQ,6BAA+B,KAAK,QAAQ,4BAC7F+J,EAAkB/J,GAAWA,EAAQ,eAAiBA,EAAQ,cAAc,kBAAoB,OAAYA,EAAQ,cAAc,gBAAkB,KAAK,QAAQ,cAAc,gBAC/KmO,EAAQ,CAAC,CACX,MAAO,KAAK,eACZ,UAAW/O,EAAA,SAAmB2O,EAAK,CACjC,OAAOD,EAAUC,CAAG,CACtB,EAFW,YAGb,EAAG,CACD,MAAO,KAAK,OACZ,UAAW3O,EAAA,SAAmB2O,EAAK,CACjC,OAAO3M,EAAM,YAAc0M,EAAU1M,EAAM,OAAO2M,CAAG,CAAC,EAAID,EAAUC,CAAG,CACzE,EAFW,YAGb,CAAC,EACD,OAAAI,EAAM,QAAQ,SAAUC,EAAM,CAE5B,IADAP,EAAW,EACJD,EAAQQ,EAAK,MAAM,KAAKtK,CAAG,GAAG,CACnC,IAAIuK,EAAaT,EAAM,CAAC,EAAE,KAAK,EAE/B,GADAnK,EAAQuK,EAAaK,CAAU,EAC3B5K,IAAU,OACZ,GAAI,OAAOyK,GAAgC,WAAY,CACrD,IAAII,EAAOJ,EAA4BpK,EAAK8J,EAAO5N,CAAO,EAC1DyD,EAAQ,OAAO6K,GAAS,SAAWA,EAAO,EAC5C,SAAWtO,GAAW,OAAO,UAAU,eAAe,KAAKA,EAASqO,CAAU,EAC5E5K,EAAQ,WACCsG,EAAiB,CAC1BtG,EAAQmK,EAAM,CAAC,EACf,QACF,MACExM,EAAM,OAAO,KAAK,8BAA8B,OAAOiN,EAAY,qBAAqB,EAAE,OAAOvK,CAAG,CAAC,EACrGL,EAAQ,QAED,OAAOA,GAAU,UAAY,CAACrC,EAAM,sBAC7CqC,EAAQzB,GAAWyB,CAAK,GAE1B,IAAI8K,EAAYH,EAAK,UAAU3K,CAAK,EASpC,GARAK,EAAMA,EAAI,QAAQ8J,EAAM,CAAC,EAAGW,CAAS,EACjCxE,GACFqE,EAAK,MAAM,WAAa3K,EAAM,OAC9B2K,EAAK,MAAM,WAAaR,EAAM,CAAC,EAAE,QAEjCQ,EAAK,MAAM,UAAY,EAEzBP,IACIA,GAAYzM,EAAM,YACpB,KAEJ,CACF,CAAC,EACM0C,CACT,EAzEO,cA0ET,EAAG,CACD,IAAK,OACL,MAAO1E,EAAA,SAAc0E,EAAKoI,EAAI,CAC5B,IAAIrE,EAAS,KACT7H,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/E4N,EACAnK,EACA+K,EACJ,SAASC,EAAiBhP,EAAKiP,EAAkB,CAC/C,IAAIC,EAAM,KAAK,wBACf,GAAIlP,EAAI,QAAQkP,CAAG,EAAI,EAAG,OAAOlP,EACjC,IAAI8E,EAAI9E,EAAI,MAAM,IAAI,OAAO,GAAG,OAAOkP,EAAK,OAAO,CAAC,CAAC,EACjDC,EAAgB,IAAI,OAAOrK,EAAE,CAAC,CAAC,EACnC9E,EAAM8E,EAAE,CAAC,EACTqK,EAAgB,KAAK,YAAYA,EAAeJ,CAAa,EAC7D,IAAIK,EAAsBD,EAAc,MAAM,IAAI,EAC9CE,EAAsBF,EAAc,MAAM,IAAI,GAC9CC,GAAuBA,EAAoB,OAAS,IAAM,GAAK,CAACC,GAAuBA,EAAoB,OAAS,IAAM,KAC5HF,EAAgBA,EAAc,QAAQ,KAAM,GAAG,GAEjD,GAAI,CACFJ,EAAgB,KAAK,MAAMI,CAAa,EACpCF,IAAkBF,EAAgBnB,GAAgBA,GAAgB,CAAC,EAAGqB,CAAgB,EAAGF,CAAa,EAC5G,OAASO,EAAG,CACV,YAAK,OAAO,KAAK,oDAAoD,OAAOtP,CAAG,EAAGsP,CAAC,EAC5E,GAAG,OAAOtP,CAAG,EAAE,OAAOkP,CAAG,EAAE,OAAOC,CAAa,CACxD,CACA,cAAOJ,EAAc,aACd/O,CACT,CACA,IAtBSL,EAAAqP,EAAA,oBAsBFb,EAAQ,KAAK,cAAc,KAAK9J,CAAG,GAAG,CAC3C,IAAIkL,EAAa,CAAC,EAClBR,EAAgBnB,GAAgB,CAAC,EAAGrN,CAAO,EAC3CwO,EAAgBA,EAAc,SAAW,OAAOA,EAAc,SAAY,SAAWA,EAAc,QAAUA,EAC7GA,EAAc,mBAAqB,GACnC,OAAOA,EAAc,aACrB,IAAIS,EAAW,GACf,GAAIrB,EAAM,CAAC,EAAE,QAAQ,KAAK,eAAe,IAAM,IAAM,CAAC,OAAO,KAAKA,EAAM,CAAC,CAAC,EAAG,CAC3E,IAAIpJ,EAAIoJ,EAAM,CAAC,EAAE,MAAM,KAAK,eAAe,EAAE,IAAI,SAAUsB,EAAM,CAC/D,OAAOA,EAAK,KAAK,CACnB,CAAC,EACDtB,EAAM,CAAC,EAAIpJ,EAAE,MAAM,EACnBwK,EAAaxK,EACbyK,EAAW,EACb,CAEA,GADAxL,EAAQyI,EAAGuC,EAAiB,KAAK,KAAMb,EAAM,CAAC,EAAE,KAAK,EAAGY,CAAa,EAAGA,CAAa,EACjF/K,GAASmK,EAAM,CAAC,IAAM9J,GAAO,OAAOL,GAAU,SAAU,OAAOA,EAC/D,OAAOA,GAAU,WAAUA,EAAQzB,GAAWyB,CAAK,GAClDA,IACH,KAAK,OAAO,KAAK,qBAAqB,OAAOmK,EAAM,CAAC,EAAG,eAAe,EAAE,OAAO9J,CAAG,CAAC,EACnFL,EAAQ,IAENwL,IACFxL,EAAQuL,EAAW,OAAO,SAAUtI,EAAGuH,EAAG,CACxC,OAAOpG,EAAO,OAAOnB,EAAGuH,EAAGjO,EAAQ,IAAKqN,GAAgBA,GAAgB,CAAC,EAAGrN,CAAO,EAAG,CAAC,EAAG,CACxF,iBAAkB4N,EAAM,CAAC,EAAE,KAAK,CAClC,CAAC,CAAC,CACJ,EAAGnK,EAAM,KAAK,CAAC,GAEjBK,EAAMA,EAAI,QAAQ8J,EAAM,CAAC,EAAGnK,CAAK,EACjC,KAAK,OAAO,UAAY,CAC1B,CACA,OAAOK,CACT,EA7DO,OA8DT,CAAC,CAAC,EACKyJ,CACT,EAAE,EAEF,SAAS4B,GAAUpQ,EAAQC,EAAgB,CAAE,IAAIC,EAAO,OAAO,KAAKF,CAAM,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIG,EAAU,OAAO,sBAAsBH,CAAM,EAAGC,IAAmBE,EAAUA,EAAQ,OAAO,SAAUC,EAAK,CAAE,OAAO,OAAO,yBAAyBJ,EAAQI,CAAG,EAAE,UAAY,CAAC,GAAIF,EAAK,KAAK,MAAMA,EAAMC,CAAO,CAAG,CAAE,OAAOD,CAAM,CAA7UG,EAAA+P,GAAA,aACT,SAASC,GAAgB9P,EAAQ,CAAE,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAIC,EAAiB,UAAUD,CAAC,GAAnB,KAAuB,UAAUA,CAAC,EAAI,CAAC,EAAGA,EAAI,EAAI4P,GAAU,OAAO3P,CAAM,EAAG,EAAE,EAAE,QAAQ,SAAUC,EAAK,CAAEC,GAAgBJ,EAAQG,EAAKD,EAAOC,CAAG,CAAC,CAAG,CAAC,EAAI,OAAO,0BAA4B,OAAO,iBAAiBH,EAAQ,OAAO,0BAA0BE,CAAM,CAAC,EAAI2P,GAAU,OAAO3P,CAAM,CAAC,EAAE,QAAQ,SAAUC,EAAK,CAAE,OAAO,eAAeH,EAAQG,EAAK,OAAO,yBAAyBD,EAAQC,CAAG,CAAC,CAAG,CAAC,CAAG,CAAE,OAAOH,CAAQ,CAAtfF,EAAAgQ,GAAA,mBACT,SAASC,GAAeC,EAAW,CACjC,IAAIC,EAAaD,EAAU,YAAY,EAAE,KAAK,EAC1CE,EAAgB,CAAC,EACrB,GAAIF,EAAU,QAAQ,GAAG,EAAI,GAAI,CAC/B,IAAIvK,EAAIuK,EAAU,MAAM,GAAG,EAC3BC,EAAaxK,EAAE,CAAC,EAAE,YAAY,EAAE,KAAK,EACrC,IAAI0K,EAAS1K,EAAE,CAAC,EAAE,UAAU,EAAGA,EAAE,CAAC,EAAE,OAAS,CAAC,EAC9C,GAAIwK,IAAe,YAAcE,EAAO,QAAQ,GAAG,EAAI,EAChDD,EAAc,WAAUA,EAAc,SAAWC,EAAO,KAAK,WACzDF,IAAe,gBAAkBE,EAAO,QAAQ,GAAG,EAAI,EAC3DD,EAAc,QAAOA,EAAc,MAAQC,EAAO,KAAK,OACvD,CACL,IAAIC,EAAOD,EAAO,MAAM,GAAG,EAC3BC,EAAK,QAAQ,SAAUC,EAAK,CAC1B,GAAKA,EACL,KAAIC,EAAaD,EAAI,MAAM,GAAG,EAC5BE,EAAcC,GAASF,CAAU,EACjCnQ,EAAMoQ,EAAY,CAAC,EACnBE,EAAOF,EAAY,MAAM,CAAC,EACxB9B,EAAMgC,EAAK,KAAK,GAAG,EAAE,KAAK,EAAE,QAAQ,WAAY,EAAE,EACjDP,EAAc/P,EAAI,KAAK,CAAC,IAAG+P,EAAc/P,EAAI,KAAK,CAAC,EAAIsO,GACxDA,IAAQ,UAASyB,EAAc/P,EAAI,KAAK,CAAC,EAAI,IAC7CsO,IAAQ,SAAQyB,EAAc/P,EAAI,KAAK,CAAC,EAAI,IAC3C,MAAMsO,CAAG,IAAGyB,EAAc/P,EAAI,KAAK,CAAC,EAAI,SAASsO,EAAK,EAAE,GAC/D,CAAC,CACH,CACF,CACA,MAAO,CACL,WAAYwB,EACZ,cAAeC,CACjB,CACF,CA/BSpQ,EAAAiQ,GAAA,kBAgCT,SAASW,GAAsBC,EAAI,CACjC,IAAIC,EAAQ,CAAC,EACb,OAAO9Q,EAAA,SAAyB2O,EAAK3H,EAAKpG,EAAS,CACjD,IAAIP,EAAM2G,EAAM,KAAK,UAAUpG,CAAO,EAClCmQ,EAAYD,EAAMzQ,CAAG,EACzB,OAAK0Q,IACHA,EAAYF,EAAG7J,EAAKpG,CAAO,EAC3BkQ,EAAMzQ,CAAG,EAAI0Q,GAERA,EAAUpC,CAAG,CACtB,EARO,kBAST,CAXS3O,EAAA4Q,GAAA,yBAYT,IAAII,GAAY,UAAY,CAC1B,SAASA,GAAY,CACnB,IAAIpQ,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EACnFC,GAAgB,KAAMmQ,CAAS,EAC/B,KAAK,OAASpP,GAAW,OAAO,WAAW,EAC3C,KAAK,QAAUhB,EACf,KAAK,QAAU,CACb,OAAQgQ,GAAsB,SAAU5J,EAAKuJ,EAAK,CAChD,IAAIQ,EAAY,IAAI,KAAK,aAAa/J,EAAKgJ,GAAgB,CAAC,EAAGO,CAAG,CAAC,EACnE,OAAO,SAAU5B,EAAK,CACpB,OAAOoC,EAAU,OAAOpC,CAAG,CAC7B,CACF,CAAC,EACD,SAAUiC,GAAsB,SAAU5J,EAAKuJ,EAAK,CAClD,IAAIQ,EAAY,IAAI,KAAK,aAAa/J,EAAKgJ,GAAgBA,GAAgB,CAAC,EAAGO,CAAG,EAAG,CAAC,EAAG,CACvF,MAAO,UACT,CAAC,CAAC,EACF,OAAO,SAAU5B,EAAK,CACpB,OAAOoC,EAAU,OAAOpC,CAAG,CAC7B,CACF,CAAC,EACD,SAAUiC,GAAsB,SAAU5J,EAAKuJ,EAAK,CAClD,IAAIQ,EAAY,IAAI,KAAK,eAAe/J,EAAKgJ,GAAgB,CAAC,EAAGO,CAAG,CAAC,EACrE,OAAO,SAAU5B,EAAK,CACpB,OAAOoC,EAAU,OAAOpC,CAAG,CAC7B,CACF,CAAC,EACD,aAAciC,GAAsB,SAAU5J,EAAKuJ,EAAK,CACtD,IAAIQ,EAAY,IAAI,KAAK,mBAAmB/J,EAAKgJ,GAAgB,CAAC,EAAGO,CAAG,CAAC,EACzE,OAAO,SAAU5B,EAAK,CACpB,OAAOoC,EAAU,OAAOpC,EAAK4B,EAAI,OAAS,KAAK,CACjD,CACF,CAAC,EACD,KAAMK,GAAsB,SAAU5J,EAAKuJ,EAAK,CAC9C,IAAIQ,EAAY,IAAI,KAAK,WAAW/J,EAAKgJ,GAAgB,CAAC,EAAGO,CAAG,CAAC,EACjE,OAAO,SAAU5B,EAAK,CACpB,OAAOoC,EAAU,OAAOpC,CAAG,CAC7B,CACF,CAAC,CACH,EACA,KAAK,KAAK/N,CAAO,CACnB,CAxCS,OAAAZ,EAAAgR,EAAA,aAyCTlQ,GAAakQ,EAAW,CAAC,CACvB,IAAK,OACL,MAAOhR,EAAA,SAAckI,EAAU,CAC7B,IAAItH,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAChF,cAAe,CAAC,CAClB,EACIwN,EAAQxN,EAAQ,cACpB,KAAK,gBAAkBwN,EAAM,gBAAkBA,EAAM,gBAAkBA,EAAM,iBAAmB,GAClG,EANO,OAOT,EAAG,CACD,IAAK,MACL,MAAOpO,EAAA,SAAaiR,EAAMnE,EAAI,CAC5B,KAAK,QAAQmE,EAAK,YAAY,EAAE,KAAK,CAAC,EAAInE,CAC5C,EAFO,MAGT,EAAG,CACD,IAAK,YACL,MAAO9M,EAAA,SAAmBiR,EAAMnE,EAAI,CAClC,KAAK,QAAQmE,EAAK,YAAY,EAAE,KAAK,CAAC,EAAIL,GAAsB9D,CAAE,CACpE,EAFO,YAGT,EAAG,CACD,IAAK,SACL,MAAO9M,EAAA,SAAgBqE,EAAO6M,EAASlK,EAAK,CAC1C,IAAIhF,EAAQ,KACRpB,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/EuQ,EAAUD,EAAQ,MAAM,KAAK,eAAe,EAC5C5K,EAAS6K,EAAQ,OAAO,SAAUC,EAAK,EAAG,CAC5C,IAAIC,EAAkBpB,GAAe,CAAC,EACpCE,EAAakB,EAAgB,WAC7BjB,EAAgBiB,EAAgB,cAClC,GAAIrP,EAAM,QAAQmO,CAAU,EAAG,CAC7B,IAAImB,EAAYF,EAChB,GAAI,CACF,IAAIG,EAAa3Q,GAAWA,EAAQ,cAAgBA,EAAQ,aAAaA,EAAQ,gBAAgB,GAAK,CAAC,EACnGsB,EAAIqP,EAAW,QAAUA,EAAW,KAAO3Q,EAAQ,QAAUA,EAAQ,KAAOoG,EAChFsK,EAAYtP,EAAM,QAAQmO,CAAU,EAAEiB,EAAKlP,EAAG8N,GAAgBA,GAAgBA,GAAgB,CAAC,EAAGI,CAAa,EAAGxP,CAAO,EAAG2Q,CAAU,CAAC,CACzI,OAASC,EAAO,CACdxP,EAAM,OAAO,KAAKwP,CAAK,CACzB,CACA,OAAOF,CACT,MACEtP,EAAM,OAAO,KAAK,oCAAoC,OAAOmO,CAAU,CAAC,EAE1E,OAAOiB,CACT,EAAG/M,CAAK,EACR,OAAOiC,CACT,EAxBO,SAyBT,CAAC,CAAC,EACK0K,CACT,EAAE,EAEF,SAASS,GAAU9R,EAAQC,EAAgB,CAAE,IAAIC,EAAO,OAAO,KAAKF,CAAM,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIG,EAAU,OAAO,sBAAsBH,CAAM,EAAGC,IAAmBE,EAAUA,EAAQ,OAAO,SAAUC,EAAK,CAAE,OAAO,OAAO,yBAAyBJ,EAAQI,CAAG,EAAE,UAAY,CAAC,GAAIF,EAAK,KAAK,MAAMA,EAAMC,CAAO,CAAG,CAAE,OAAOD,CAAM,CAA7UG,EAAAyR,GAAA,aACT,SAASC,GAAgBxR,EAAQ,CAAE,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAIC,EAAiB,UAAUD,CAAC,GAAnB,KAAuB,UAAUA,CAAC,EAAI,CAAC,EAAGA,EAAI,EAAIsR,GAAU,OAAOrR,CAAM,EAAG,EAAE,EAAE,QAAQ,SAAUC,EAAK,CAAEC,GAAgBJ,EAAQG,EAAKD,EAAOC,CAAG,CAAC,CAAG,CAAC,EAAI,OAAO,0BAA4B,OAAO,iBAAiBH,EAAQ,OAAO,0BAA0BE,CAAM,CAAC,EAAIqR,GAAU,OAAOrR,CAAM,CAAC,EAAE,QAAQ,SAAUC,EAAK,CAAE,OAAO,eAAeH,EAAQG,EAAK,OAAO,yBAAyBD,EAAQC,CAAG,CAAC,CAAG,CAAC,CAAG,CAAE,OAAOH,CAAQ,CAAtfF,EAAA0R,GAAA,mBACT,SAASC,GAAe1L,EAAS,CAAE,IAAIC,EAA4B0L,GAA4B,EAAG,OAAO5R,EAAA,UAAgC,CAAE,IAAIoG,EAAQC,GAAgBJ,CAAO,EAAGK,EAAQ,GAAIJ,EAA2B,CAAE,IAAIK,EAAYF,GAAgB,IAAI,EAAE,YAAaC,EAAS,QAAQ,UAAUF,EAAO,UAAWG,CAAS,CAAG,MAASD,EAASF,EAAM,MAAM,KAAM,SAAS,EAAK,OAAOI,GAA2B,KAAMF,CAAM,CAAG,EAAhU,uBAAmU,CAAnatG,EAAA2R,GAAA,kBACT,SAASC,IAA8B,CAA0E,GAApE,OAAO,QAAY,KAAe,CAAC,QAAQ,WAA6B,QAAQ,UAAU,KAAM,MAAO,GAAO,GAAI,OAAO,OAAU,WAAY,MAAO,GAAM,GAAI,CAAE,eAAQ,UAAU,QAAQ,KAAK,QAAQ,UAAU,QAAS,CAAC,EAAG,UAAY,CAAC,CAAC,CAAC,EAAU,EAAM,MAAY,CAAE,MAAO,EAAO,CAAE,CAAjU5R,EAAA4R,GAAA,+BACT,SAASC,GAAcC,EAAGb,EAAM,CAC1Ba,EAAE,QAAQb,CAAI,IAAM,SACtB,OAAOa,EAAE,QAAQb,CAAI,EACrBa,EAAE,eAEN,CALS9R,EAAA6R,GAAA,iBAMT,IAAIE,GAAY,SAAUrL,EAAe,CACvCC,GAAUoL,EAAWrL,CAAa,EAClC,IAAIE,EAAS+K,GAAeI,CAAS,EACrC,SAASA,EAAUC,EAASC,EAAO/J,EAAU,CAC3C,IAAIlG,EACApB,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EACnF,OAAAC,GAAgB,KAAMkR,CAAS,EAC/B/P,EAAQ4E,EAAO,KAAK,IAAI,EACpB/B,IACFhD,GAAa,KAAKgF,GAAuB7E,CAAK,CAAC,EAEjDA,EAAM,QAAUgQ,EAChBhQ,EAAM,MAAQiQ,EACdjQ,EAAM,SAAWkG,EACjBlG,EAAM,cAAgBkG,EAAS,cAC/BlG,EAAM,QAAUpB,EAChBoB,EAAM,OAASJ,GAAW,OAAO,kBAAkB,EACnDI,EAAM,aAAe,CAAC,EACtBA,EAAM,iBAAmBpB,EAAQ,kBAAoB,GACrDoB,EAAM,aAAe,EACrBA,EAAM,WAAapB,EAAQ,YAAc,EAAIA,EAAQ,WAAa,EAClEoB,EAAM,aAAepB,EAAQ,cAAgB,EAAIA,EAAQ,aAAe,IACxEoB,EAAM,MAAQ,CAAC,EACfA,EAAM,MAAQ,CAAC,EACXA,EAAM,SAAWA,EAAM,QAAQ,MACjCA,EAAM,QAAQ,KAAKkG,EAAUtH,EAAQ,QAASA,CAAO,EAEhDoB,CACT,CAzBS,OAAAhC,EAAA+R,EAAA,aA0BTjR,GAAaiR,EAAW,CAAC,CACvB,IAAK,YACL,MAAO/R,EAAA,SAAmBkS,EAAW9J,EAAYxH,EAASuR,EAAU,CAClE,IAAI1J,EAAS,KACT2J,EAAS,CAAC,EACVC,EAAU,CAAC,EACXC,EAAkB,CAAC,EACnBC,EAAmB,CAAC,EACxB,OAAAL,EAAU,QAAQ,SAAUlL,EAAK,CAC/B,IAAIwL,EAAmB,GACvBpK,EAAW,QAAQ,SAAUtB,EAAI,CAC/B,IAAImK,EAAO,GAAG,OAAOjK,EAAK,GAAG,EAAE,OAAOF,CAAE,EACpC,CAAClG,EAAQ,QAAU6H,EAAO,MAAM,kBAAkBzB,EAAKF,CAAE,EAC3D2B,EAAO,MAAMwI,CAAI,EAAI,EACZxI,EAAO,MAAMwI,CAAI,EAAI,IAAcxI,EAAO,MAAMwI,CAAI,IAAM,EAC/DoB,EAAQpB,CAAI,IAAM,SAAWoB,EAAQpB,CAAI,EAAI,KAEjDxI,EAAO,MAAMwI,CAAI,EAAI,EACrBuB,EAAmB,GACfH,EAAQpB,CAAI,IAAM,SAAWoB,EAAQpB,CAAI,EAAI,IAC7CmB,EAAOnB,CAAI,IAAM,SAAWmB,EAAOnB,CAAI,EAAI,IAC3CsB,EAAiBzL,CAAE,IAAM,SAAWyL,EAAiBzL,CAAE,EAAI,KAEnE,CAAC,EACI0L,IAAkBF,EAAgBtL,CAAG,EAAI,GAChD,CAAC,GACG,OAAO,KAAKoL,CAAM,EAAE,QAAU,OAAO,KAAKC,CAAO,EAAE,SACrD,KAAK,MAAM,KAAK,CACd,QAASA,EACT,aAAc,OAAO,KAAKA,CAAO,EAAE,OACnC,OAAQ,CAAC,EACT,OAAQ,CAAC,EACT,SAAUF,CACZ,CAAC,EAEI,CACL,OAAQ,OAAO,KAAKC,CAAM,EAC1B,QAAS,OAAO,KAAKC,CAAO,EAC5B,gBAAiB,OAAO,KAAKC,CAAe,EAC5C,iBAAkB,OAAO,KAAKC,CAAgB,CAChD,CACF,EAvCO,YAwCT,EAAG,CACD,IAAK,SACL,MAAOvS,EAAA,SAAgBiR,EAAMwB,EAAKtO,EAAM,CACtC,IAAIpB,EAAIkO,EAAK,MAAM,GAAG,EAClBjK,EAAMjE,EAAE,CAAC,EACT+D,EAAK/D,EAAE,CAAC,EACR0P,GAAK,KAAK,KAAK,gBAAiBzL,EAAKF,EAAI2L,CAAG,EAC5CtO,GACF,KAAK,MAAM,kBAAkB6C,EAAKF,EAAI3C,CAAI,EAE5C,KAAK,MAAM8M,CAAI,EAAIwB,EAAM,GAAK,EAC9B,IAAIC,EAAS,CAAC,EACd,KAAK,MAAM,QAAQ,SAAUZ,EAAG,CAC9BjO,GAASiO,EAAE,OAAQ,CAAC9K,CAAG,EAAGF,CAAE,EAC5B+K,GAAcC,EAAGb,CAAI,EACjBwB,GAAKX,EAAE,OAAO,KAAKW,CAAG,EACtBX,EAAE,eAAiB,GAAK,CAACA,EAAE,OAC7B,OAAO,KAAKA,EAAE,MAAM,EAAE,QAAQ,SAAU5P,EAAG,CACpCwQ,EAAOxQ,CAAC,IAAGwQ,EAAOxQ,CAAC,EAAI,CAAC,GAC7B,IAAIyQ,EAAab,EAAE,OAAO5P,CAAC,EACvByQ,EAAW,QACbA,EAAW,QAAQ,SAAUtL,EAAG,CAC1BqL,EAAOxQ,CAAC,EAAEmF,CAAC,IAAM,SAAWqL,EAAOxQ,CAAC,EAAEmF,CAAC,EAAI,GACjD,CAAC,CAEL,CAAC,EACDyK,EAAE,KAAO,GACLA,EAAE,OAAO,OACXA,EAAE,SAASA,EAAE,MAAM,EAEnBA,EAAE,SAAS,EAGjB,CAAC,EACD,KAAK,KAAK,SAAUY,CAAM,EAC1B,KAAK,MAAQ,KAAK,MAAM,OAAO,SAAUZ,EAAG,CAC1C,MAAO,CAACA,EAAE,IACZ,CAAC,CACH,EApCO,SAqCT,EAAG,CACD,IAAK,OACL,MAAO9R,EAAA,SAAcgH,EAAKF,EAAI8L,EAAQ,CACpC,IAAIlI,EAAS,KACTmI,EAAQ,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,EAC5EC,EAAO,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,KAAK,aAChFX,EAAW,UAAU,OAAS,EAAI,UAAU,CAAC,EAAI,OACrD,GAAI,CAACnL,EAAI,OAAQ,OAAOmL,EAAS,KAAM,CAAC,CAAC,EACzC,GAAI,KAAK,cAAgB,KAAK,iBAAkB,CAC9C,KAAK,aAAa,KAAK,CACrB,IAAKnL,EACL,GAAIF,EACJ,OAAQ8L,EACR,MAAOC,EACP,KAAMC,EACN,SAAUX,CACZ,CAAC,EACD,MACF,CACA,KAAK,eACL,IAAIY,EAAW/S,EAAA,SAAkByS,EAAKtO,EAAM,CAE1C,GADAuG,EAAO,eACHA,EAAO,aAAa,OAAS,EAAG,CAClC,IAAIsI,EAAOtI,EAAO,aAAa,MAAM,EACrCA,EAAO,KAAKsI,EAAK,IAAKA,EAAK,GAAIA,EAAK,OAAQA,EAAK,MAAOA,EAAK,KAAMA,EAAK,QAAQ,CAClF,CACA,GAAIP,GAAOtO,GAAQ0O,EAAQnI,EAAO,WAAY,CAC5C,WAAW,UAAY,CACrBA,EAAO,KAAK,KAAKA,EAAQ1D,EAAKF,EAAI8L,EAAQC,EAAQ,EAAGC,EAAO,EAAGX,CAAQ,CACzE,EAAGW,CAAI,EACP,MACF,CACAX,EAASM,EAAKtO,CAAI,CACpB,EAbe,YAcX2I,EAAK,KAAK,QAAQ8F,CAAM,EAAE,KAAK,KAAK,OAAO,EAC/C,GAAI9F,EAAG,SAAW,EAAG,CACnB,GAAI,CACF,IAAI1H,EAAI0H,EAAG9F,EAAKF,CAAE,EACd1B,GAAK,OAAOA,EAAE,MAAS,WACzBA,EAAE,KAAK,SAAUjB,EAAM,CACrB,OAAO4O,EAAS,KAAM5O,CAAI,CAC5B,CAAC,EAAE,MAAS4O,CAAQ,EAEpBA,EAAS,KAAM3N,CAAC,CAEpB,OAASqN,EAAK,CACZM,EAASN,CAAG,CACd,CACA,MACF,CACA,OAAO3F,EAAG9F,EAAKF,EAAIiM,CAAQ,CAC7B,EAjDO,OAkDT,EAAG,CACD,IAAK,iBACL,MAAO/S,EAAA,SAAwBkS,EAAW9J,EAAY,CACpD,IAAI8C,EAAS,KACTtK,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/EuR,EAAW,UAAU,OAAS,EAAI,UAAU,CAAC,EAAI,OACrD,GAAI,CAAC,KAAK,QACR,YAAK,OAAO,KAAK,gEAAgE,EAC1EA,GAAYA,EAAS,EAE1B,OAAOD,GAAc,WAAUA,EAAY,KAAK,cAAc,mBAAmBA,CAAS,GAC1F,OAAO9J,GAAe,WAAUA,EAAa,CAACA,CAAU,GAC5D,IAAIgK,EAAS,KAAK,UAAUF,EAAW9J,EAAYxH,EAASuR,CAAQ,EACpE,GAAI,CAACC,EAAO,OAAO,OACjB,OAAKA,EAAO,QAAQ,QAAQD,EAAS,EAC9B,KAETC,EAAO,OAAO,QAAQ,SAAUnB,EAAM,CACpC/F,EAAO,QAAQ+F,CAAI,CACrB,CAAC,CACH,EAlBO,iBAmBT,EAAG,CACD,IAAK,OACL,MAAOjR,EAAA,SAAckS,EAAW9J,EAAY+J,EAAU,CACpD,KAAK,eAAeD,EAAW9J,EAAY,CAAC,EAAG+J,CAAQ,CACzD,EAFO,OAGT,EAAG,CACD,IAAK,SACL,MAAOnS,EAAA,SAAgBkS,EAAW9J,EAAY+J,EAAU,CACtD,KAAK,eAAeD,EAAW9J,EAAY,CACzC,OAAQ,EACV,EAAG+J,CAAQ,CACb,EAJO,SAKT,EAAG,CACD,IAAK,UACL,MAAOnS,EAAA,SAAiBiR,EAAM,CAC5B,IAAIgC,EAAS,KACTxR,EAAS,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,GAC7EsB,EAAIkO,EAAK,MAAM,GAAG,EAClBjK,EAAMjE,EAAE,CAAC,EACT+D,EAAK/D,EAAE,CAAC,EACZ,KAAK,KAAKiE,EAAKF,EAAI,OAAQ,OAAW,OAAW,SAAU2L,EAAKtO,EAAM,CAChEsO,GAAKQ,EAAO,OAAO,KAAK,GAAG,OAAOxR,EAAQ,oBAAoB,EAAE,OAAOqF,EAAI,gBAAgB,EAAE,OAAOE,EAAK,SAAS,EAAGyL,CAAG,EACxH,CAACA,GAAOtO,GAAM8O,EAAO,OAAO,IAAI,GAAG,OAAOxR,EAAQ,mBAAmB,EAAE,OAAOqF,EAAI,gBAAgB,EAAE,OAAOE,CAAG,EAAG7C,CAAI,EACzH8O,EAAO,OAAOhC,EAAMwB,EAAKtO,CAAI,CAC/B,CAAC,CACH,EAXO,UAYT,EAAG,CACD,IAAK,cACL,MAAOnE,EAAA,SAAqBkS,EAAWrJ,EAAWxI,EAAK6S,EAAeC,EAAU,CAC9E,IAAIvS,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/EwS,EAAM,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,UAAY,CAAC,EAC3F,GAAI,KAAK,SAAS,OAAS,KAAK,SAAS,MAAM,oBAAsB,CAAC,KAAK,SAAS,MAAM,mBAAmBvK,CAAS,EAAG,CACvH,KAAK,OAAO,KAAK,qBAAsB,OAAOxI,EAAK,sBAAwB,EAAE,OAAOwI,EAAW,sBAAuB,EAAG,0NAA0N,EACnV,MACF,CACA,GAAI,EAAqBxI,GAAQ,MAAQA,IAAQ,IACjD,IAAI,KAAK,SAAW,KAAK,QAAQ,OAAQ,CACvC,IAAIiQ,EAAOoB,GAAgBA,GAAgB,CAAC,EAAG9Q,CAAO,EAAG,CAAC,EAAG,CAC3D,SAAUuS,CACZ,CAAC,EACGrG,EAAK,KAAK,QAAQ,OAAO,KAAK,KAAK,OAAO,EAC9C,GAAIA,EAAG,OAAS,EACd,GAAI,CACF,IAAI1H,EACA0H,EAAG,SAAW,EAChB1H,EAAI0H,EAAGoF,EAAWrJ,EAAWxI,EAAK6S,EAAe5C,CAAI,EAErDlL,EAAI0H,EAAGoF,EAAWrJ,EAAWxI,EAAK6S,CAAa,EAE7C9N,GAAK,OAAOA,EAAE,MAAS,WACzBA,EAAE,KAAK,SAAUjB,EAAM,CACrB,OAAOiP,EAAI,KAAMjP,CAAI,CACvB,CAAC,EAAE,MAASiP,CAAG,EAEfA,EAAI,KAAMhO,CAAC,CAEf,OAASqN,EAAK,CACZW,EAAIX,CAAG,CACT,MAEA3F,EAAGoF,EAAWrJ,EAAWxI,EAAK6S,EAAeE,EAAK9C,CAAI,CAE1D,CACI,CAAC4B,GAAa,CAACA,EAAU,CAAC,GAC9B,KAAK,MAAM,YAAYA,EAAU,CAAC,EAAGrJ,EAAWxI,EAAK6S,CAAa,EACpE,EArCO,cAsCT,CAAC,CAAC,EACKnB,CACT,EAAElQ,EAAY,EAEd,SAASwR,IAAM,CACb,MAAO,CACL,MAAO,GACP,cAAe,GACf,GAAI,CAAC,aAAa,EAClB,UAAW,CAAC,aAAa,EACzB,YAAa,CAAC,KAAK,EACnB,WAAY,GACZ,cAAe,GACf,yBAA0B,GAC1B,KAAM,MACN,QAAS,GACT,qBAAsB,GACtB,aAAc,IACd,YAAa,IACb,gBAAiB,IACjB,iBAAkB,IAClB,wBAAyB,GACzB,YAAa,GACb,cAAe,GACf,cAAe,WACf,mBAAoB,GACpB,kBAAmB,GACnB,4BAA6B,GAC7B,YAAa,GACb,wBAAyB,GACzB,WAAY,GACZ,kBAAmB,GACnB,cAAe,GACf,WAAY,GACZ,sBAAuB,GACvB,uBAAwB,GACxB,4BAA6B,GAC7B,wBAAyB,GACzB,iCAAkCrT,EAAA,SAAgBQ,EAAM,CACtD,IAAI8S,EAAM,CAAC,EAIX,GAHI5K,GAAQlI,EAAK,CAAC,CAAC,IAAM,WAAU8S,EAAM9S,EAAK,CAAC,GAC3C,OAAOA,EAAK,CAAC,GAAM,WAAU8S,EAAI,aAAe9S,EAAK,CAAC,GACtD,OAAOA,EAAK,CAAC,GAAM,WAAU8S,EAAI,aAAe9S,EAAK,CAAC,GACtDkI,GAAQlI,EAAK,CAAC,CAAC,IAAM,UAAYkI,GAAQlI,EAAK,CAAC,CAAC,IAAM,SAAU,CAClE,IAAII,EAAUJ,EAAK,CAAC,GAAKA,EAAK,CAAC,EAC/B,OAAO,KAAKI,CAAO,EAAE,QAAQ,SAAUP,EAAK,CAC1CiT,EAAIjT,CAAG,EAAIO,EAAQP,CAAG,CACxB,CAAC,CACH,CACA,OAAOiT,CACT,EAZkC,UAalC,cAAe,CACb,YAAa,GACb,OAAQtT,EAAA,SAAgBqE,EAAO6M,EAASlK,EAAKpG,EAAS,CACpD,OAAOyD,CACT,EAFQ,UAGR,OAAQ,KACR,OAAQ,KACR,gBAAiB,IACjB,eAAgB,IAChB,cAAe,MACf,cAAe,IACf,wBAAyB,IACzB,YAAa,IACb,gBAAiB,EACnB,CACF,CACF,CA/DSrE,EAAAqT,GAAA,OAgET,SAASE,GAAiB3S,EAAS,CACjC,OAAI,OAAOA,EAAQ,IAAO,WAAUA,EAAQ,GAAK,CAACA,EAAQ,EAAE,GACxD,OAAOA,EAAQ,aAAgB,WAAUA,EAAQ,YAAc,CAACA,EAAQ,WAAW,GACnF,OAAOA,EAAQ,YAAe,WAAUA,EAAQ,WAAa,CAACA,EAAQ,UAAU,GAChFA,EAAQ,eAAiBA,EAAQ,cAAc,QAAQ,QAAQ,EAAI,IACrEA,EAAQ,cAAgBA,EAAQ,cAAc,OAAO,CAAC,QAAQ,CAAC,GAE1DA,CACT,CARSZ,EAAAuT,GAAA,oBAUT,SAASC,GAAQ7T,EAAQC,EAAgB,CAAE,IAAIC,EAAO,OAAO,KAAKF,CAAM,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIG,EAAU,OAAO,sBAAsBH,CAAM,EAAGC,IAAmBE,EAAUA,EAAQ,OAAO,SAAUC,EAAK,CAAE,OAAO,OAAO,yBAAyBJ,EAAQI,CAAG,EAAE,UAAY,CAAC,GAAIF,EAAK,KAAK,MAAMA,EAAMC,CAAO,CAAG,CAAE,OAAOD,CAAM,CAA3UG,EAAAwT,GAAA,WACT,SAASC,GAAcvT,EAAQ,CAAE,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAIC,EAAiB,UAAUD,CAAC,GAAnB,KAAuB,UAAUA,CAAC,EAAI,CAAC,EAAGA,EAAI,EAAIqT,GAAQ,OAAOpT,CAAM,EAAG,EAAE,EAAE,QAAQ,SAAUC,EAAK,CAAEC,GAAgBJ,EAAQG,EAAKD,EAAOC,CAAG,CAAC,CAAG,CAAC,EAAI,OAAO,0BAA4B,OAAO,iBAAiBH,EAAQ,OAAO,0BAA0BE,CAAM,CAAC,EAAIoT,GAAQ,OAAOpT,CAAM,CAAC,EAAE,QAAQ,SAAUC,EAAK,CAAE,OAAO,eAAeH,EAAQG,EAAK,OAAO,yBAAyBD,EAAQC,CAAG,CAAC,CAAG,CAAC,CAAG,CAAE,OAAOH,CAAQ,CAAhfF,EAAAyT,GAAA,iBACT,SAASC,GAAazN,EAAS,CAAE,IAAIC,EAA4ByN,GAA0B,EAAG,OAAO3T,EAAA,UAAgC,CAAE,IAAIoG,EAAQC,GAAgBJ,CAAO,EAAGK,EAAQ,GAAIJ,EAA2B,CAAE,IAAIK,EAAYF,GAAgB,IAAI,EAAE,YAAaC,EAAS,QAAQ,UAAUF,EAAO,UAAWG,CAAS,CAAG,MAASD,EAASF,EAAM,MAAM,KAAM,SAAS,EAAK,OAAOI,GAA2B,KAAMF,CAAM,CAAG,EAAhU,uBAAmU,CAA/ZtG,EAAA0T,GAAA,gBACT,SAASC,IAA4B,CAA0E,GAApE,OAAO,QAAY,KAAe,CAAC,QAAQ,WAA6B,QAAQ,UAAU,KAAM,MAAO,GAAO,GAAI,OAAO,OAAU,WAAY,MAAO,GAAM,GAAI,CAAE,eAAQ,UAAU,QAAQ,KAAK,QAAQ,UAAU,QAAS,CAAC,EAAG,UAAY,CAAC,CAAC,CAAC,EAAU,EAAM,MAAY,CAAE,MAAO,EAAO,CAAE,CAA/T3T,EAAA2T,GAAA,6BACT,SAASC,IAAO,CAAC,CAAR5T,EAAA4T,GAAA,QACT,SAASC,GAAoBC,EAAM,CACjC,IAAIC,EAAO,OAAO,oBAAoB,OAAO,eAAeD,CAAI,CAAC,EACjEC,EAAK,QAAQ,SAAU3C,EAAK,CACtB,OAAO0C,EAAK1C,CAAG,GAAM,aACvB0C,EAAK1C,CAAG,EAAI0C,EAAK1C,CAAG,EAAE,KAAK0C,CAAI,EAEnC,CAAC,CACH,CAPS9T,EAAA6T,GAAA,uBAQT,IAAIG,GAAO,SAAUtN,EAAe,CAClCC,GAAUqN,EAAMtN,CAAa,EAC7B,IAAIE,EAAS8M,GAAaM,CAAI,EAC9B,SAASA,GAAO,CACd,IAAIhS,EACApB,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/EuR,EAAW,UAAU,OAAS,EAAI,UAAU,CAAC,EAAI,OAarD,GAZAtR,GAAgB,KAAMmT,CAAI,EAC1BhS,EAAQ4E,EAAO,KAAK,IAAI,EACpB/B,IACFhD,GAAa,KAAKgF,GAAuB7E,CAAK,CAAC,EAEjDA,EAAM,QAAUuR,GAAiB3S,CAAO,EACxCoB,EAAM,SAAW,CAAC,EAClBA,EAAM,OAASJ,GACfI,EAAM,QAAU,CACd,SAAU,CAAC,CACb,EACA6R,GAAoBhN,GAAuB7E,CAAK,CAAC,EAC7CmQ,GAAY,CAACnQ,EAAM,eAAiB,CAACpB,EAAQ,QAAS,CACxD,GAAI,CAACoB,EAAM,QAAQ,cACjB,OAAAA,EAAM,KAAKpB,EAASuR,CAAQ,EACrB3L,GAA2BxE,EAAO6E,GAAuB7E,CAAK,CAAC,EAExE,WAAW,UAAY,CACrBA,EAAM,KAAKpB,EAASuR,CAAQ,CAC9B,EAAG,CAAC,CACN,CACA,OAAOnQ,CACT,CA1BS,OAAAhC,EAAAgU,EAAA,QA2BTlT,GAAakT,EAAM,CAAC,CAClB,IAAK,OACL,MAAOhU,EAAA,UAAgB,CACrB,IAAIyI,EAAS,KACT7H,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/EuR,EAAW,UAAU,OAAS,EAAI,UAAU,CAAC,EAAI,OACjD,OAAOvR,GAAY,aACrBuR,EAAWvR,EACXA,EAAU,CAAC,GAET,CAACA,EAAQ,WAAaA,EAAQ,YAAc,IAASA,EAAQ,KAC3D,OAAOA,EAAQ,IAAO,SACxBA,EAAQ,UAAYA,EAAQ,GACnBA,EAAQ,GAAG,QAAQ,aAAa,EAAI,IAC7CA,EAAQ,UAAYA,EAAQ,GAAG,CAAC,IAGpC,IAAIqT,EAAUZ,GAAI,EAClB,KAAK,QAAUI,GAAcA,GAAcA,GAAc,CAAC,EAAGQ,CAAO,EAAG,KAAK,OAAO,EAAGV,GAAiB3S,CAAO,CAAC,EAC3G,KAAK,QAAQ,mBAAqB,OACpC,KAAK,QAAQ,cAAgB6S,GAAcA,GAAc,CAAC,EAAGQ,EAAQ,aAAa,EAAG,KAAK,QAAQ,aAAa,GAE7GrT,EAAQ,eAAiB,SAC3B,KAAK,QAAQ,wBAA0BA,EAAQ,cAE7CA,EAAQ,cAAgB,SAC1B,KAAK,QAAQ,uBAAyBA,EAAQ,aAEhD,SAASsT,EAAoBC,EAAe,CAC1C,OAAKA,EACD,OAAOA,GAAkB,WAAmB,IAAIA,EAC7CA,EAFoB,IAG7B,CACA,GALSnU,EAAAkU,EAAA,uBAKL,CAAC,KAAK,QAAQ,QAAS,CACrB,KAAK,QAAQ,OACftS,GAAW,KAAKsS,EAAoB,KAAK,QAAQ,MAAM,EAAG,KAAK,OAAO,EAEtEtS,GAAW,KAAK,KAAM,KAAK,OAAO,EAEpC,IAAImP,EACA,KAAK,QAAQ,UACfA,EAAY,KAAK,QAAQ,UAChB,OAAO,KAAS,MACzBA,EAAYC,IAEd,IAAIoD,EAAK,IAAIhI,GAAa,KAAK,OAAO,EACtC,KAAK,MAAQ,IAAI3F,GAAc,KAAK,QAAQ,UAAW,KAAK,OAAO,EACnE,IAAI1D,EAAI,KAAK,SACbA,EAAE,OAASnB,GACXmB,EAAE,cAAgB,KAAK,MACvBA,EAAE,cAAgBqR,EAClBrR,EAAE,eAAiB,IAAIuK,GAAe8G,EAAI,CACxC,QAAS,KAAK,QAAQ,gBACtB,kBAAmB,KAAK,QAAQ,kBAChC,qBAAsB,KAAK,QAAQ,oBACrC,CAAC,EACGrD,IAAc,CAAC,KAAK,QAAQ,cAAc,QAAU,KAAK,QAAQ,cAAc,SAAWkD,EAAQ,cAAc,UAClHlR,EAAE,UAAYmR,EAAoBnD,CAAS,EAC3ChO,EAAE,UAAU,KAAKA,EAAG,KAAK,OAAO,EAChC,KAAK,QAAQ,cAAc,OAASA,EAAE,UAAU,OAAO,KAAKA,EAAE,SAAS,GAEzEA,EAAE,aAAe,IAAIoL,GAAa,KAAK,OAAO,EAC9CpL,EAAE,MAAQ,CACR,mBAAoB,KAAK,mBAAmB,KAAK,IAAI,CACvD,EACAA,EAAE,iBAAmB,IAAIgP,GAAUmC,EAAoB,KAAK,QAAQ,OAAO,EAAGnR,EAAE,cAAeA,EAAG,KAAK,OAAO,EAC9GA,EAAE,iBAAiB,GAAG,IAAK,SAAUd,EAAO,CAC1C,QAASjB,EAAO,UAAU,OAAQR,EAAO,IAAI,MAAMQ,EAAO,EAAIA,EAAO,EAAI,CAAC,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAClGT,EAAKS,EAAO,CAAC,EAAI,UAAUA,CAAI,EAEjCwH,EAAO,KAAK,MAAMA,EAAQ,CAACxG,CAAK,EAAE,OAAOzB,CAAI,CAAC,CAChD,CAAC,EACG,KAAK,QAAQ,mBACfuC,EAAE,iBAAmBmR,EAAoB,KAAK,QAAQ,gBAAgB,EAClEnR,EAAE,iBAAiB,MAAMA,EAAE,iBAAiB,KAAKA,EAAG,KAAK,QAAQ,UAAW,KAAK,OAAO,GAE1F,KAAK,QAAQ,aACfA,EAAE,WAAamR,EAAoB,KAAK,QAAQ,UAAU,EACtDnR,EAAE,WAAW,MAAMA,EAAE,WAAW,KAAK,IAAI,GAE/C,KAAK,WAAa,IAAIkF,GAAW,KAAK,SAAU,KAAK,OAAO,EAC5D,KAAK,WAAW,GAAG,IAAK,SAAUhG,EAAO,CACvC,QAASf,EAAQ,UAAU,OAAQV,EAAO,IAAI,MAAMU,EAAQ,EAAIA,EAAQ,EAAI,CAAC,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACxGX,EAAKW,EAAQ,CAAC,EAAI,UAAUA,CAAK,EAEnCsH,EAAO,KAAK,MAAMA,EAAQ,CAACxG,CAAK,EAAE,OAAOzB,CAAI,CAAC,CAChD,CAAC,EACD,KAAK,QAAQ,SAAS,QAAQ,SAAUyC,EAAG,CACrCA,EAAE,MAAMA,EAAE,KAAKwF,CAAM,CAC3B,CAAC,CACH,CAGA,GAFA,KAAK,OAAS,KAAK,QAAQ,cAAc,OACpC0J,IAAUA,EAAWyB,IACtB,KAAK,QAAQ,aAAe,CAAC,KAAK,SAAS,kBAAoB,CAAC,KAAK,QAAQ,IAAK,CACpF,IAAIlI,EAAQ,KAAK,SAAS,cAAc,iBAAiB,KAAK,QAAQ,WAAW,EAC7EA,EAAM,OAAS,GAAKA,EAAM,CAAC,IAAM,QAAO,KAAK,QAAQ,IAAMA,EAAM,CAAC,EACxE,CACI,CAAC,KAAK,SAAS,kBAAoB,CAAC,KAAK,QAAQ,KACnD,KAAK,OAAO,KAAK,yDAAyD,EAE5E,IAAI2I,EAAW,CAAC,cAAe,oBAAqB,oBAAqB,mBAAmB,EAC5FA,EAAS,QAAQ,SAAUzB,EAAQ,CACjCnK,EAAOmK,CAAM,EAAI,UAAY,CAC3B,IAAI0B,EACJ,OAAQA,EAAe7L,EAAO,OAAOmK,CAAM,EAAE,MAAM0B,EAAc,SAAS,CAC5E,CACF,CAAC,EACD,IAAIC,EAAkB,CAAC,cAAe,eAAgB,oBAAqB,sBAAsB,EACjGA,EAAgB,QAAQ,SAAU3B,EAAQ,CACxCnK,EAAOmK,CAAM,EAAI,UAAY,CAC3B,IAAI4B,EACJ,OAACA,EAAgB/L,EAAO,OAAOmK,CAAM,EAAE,MAAM4B,EAAe,SAAS,EAC9D/L,CACT,CACF,CAAC,EACD,IAAIgM,EAAWnS,GAAM,EACjBoS,EAAO1U,EAAA,UAAgB,CACzB,IAAI2U,EAAS3U,EAAA,SAAgByS,EAAKzP,EAAG,CAC/ByF,EAAO,eAAiB,CAACA,EAAO,sBAAsBA,EAAO,OAAO,KAAK,uEAAuE,EACpJA,EAAO,cAAgB,GAClBA,EAAO,QAAQ,SAASA,EAAO,OAAO,IAAI,cAAeA,EAAO,OAAO,EAC5EA,EAAO,KAAK,cAAeA,EAAO,OAAO,EACzCgM,EAAS,QAAQzR,CAAC,EAClBmP,EAASM,EAAKzP,CAAC,CACjB,EAPa,UAQb,GAAIyF,EAAO,WAAaA,EAAO,QAAQ,mBAAqB,MAAQ,CAACA,EAAO,cAAe,OAAOkM,EAAO,KAAMlM,EAAO,EAAE,KAAKA,CAAM,CAAC,EACpIA,EAAO,eAAeA,EAAO,QAAQ,IAAKkM,CAAM,CAClD,EAXW,QAYX,OAAI,KAAK,QAAQ,WAAa,CAAC,KAAK,QAAQ,cAC1CD,EAAK,EAEL,WAAWA,EAAM,CAAC,EAEbD,CACT,EApIO,OAqIT,EAAG,CACD,IAAK,gBACL,MAAOzU,EAAA,SAAuBwK,EAAU,CACtC,IAAIE,EAAS,KACTyH,EAAW,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAIyB,GAC/EgB,EAAezC,EACf9G,EAAU,OAAOb,GAAa,SAAWA,EAAW,KAAK,SAE7D,GADI,OAAOA,GAAa,aAAYoK,EAAepK,GAC/C,CAAC,KAAK,QAAQ,WAAa,KAAK,QAAQ,wBAAyB,CACnE,GAAIa,GAAWA,EAAQ,YAAY,IAAM,SAAU,OAAOuJ,EAAa,EACvE,IAAIxC,EAAS,CAAC,EACVyC,EAAS7U,EAAA,SAAgBgH,EAAK,CAChC,GAAKA,EACL,KAAImD,EAAOO,EAAO,SAAS,cAAc,mBAAmB1D,CAAG,EAC/DmD,EAAK,QAAQ,SAAUjI,EAAG,CACpBkQ,EAAO,QAAQlQ,CAAC,EAAI,GAAGkQ,EAAO,KAAKlQ,CAAC,CAC1C,CAAC,EACH,EANa,UAOb,GAAKmJ,EAMHwJ,EAAOxJ,CAAO,MANF,CACZ,IAAIqB,EAAY,KAAK,SAAS,cAAc,iBAAiB,KAAK,QAAQ,WAAW,EACrFA,EAAU,QAAQ,SAAUxK,EAAG,CAC7B,OAAO2S,EAAO3S,CAAC,CACjB,CAAC,CACH,CAGI,KAAK,QAAQ,SACf,KAAK,QAAQ,QAAQ,QAAQ,SAAUA,EAAG,CACxC,OAAO2S,EAAO3S,CAAC,CACjB,CAAC,EAEH,KAAK,SAAS,iBAAiB,KAAKkQ,EAAQ,KAAK,QAAQ,GAAI,SAAUzC,EAAG,CACpE,CAACA,GAAK,CAACjF,EAAO,kBAAoBA,EAAO,UAAUA,EAAO,oBAAoBA,EAAO,QAAQ,EACjGkK,EAAajF,CAAC,CAChB,CAAC,CACH,MACEiF,EAAa,IAAI,CAErB,EApCO,gBAqCT,EAAG,CACD,IAAK,kBACL,MAAO5U,EAAA,SAAyBmK,EAAMrD,EAAIqL,EAAU,CAClD,IAAIsC,EAAWnS,GAAM,EACrB,OAAK6H,IAAMA,EAAO,KAAK,WAClBrD,IAAIA,EAAK,KAAK,QAAQ,IACtBqL,IAAUA,EAAWyB,IAC1B,KAAK,SAAS,iBAAiB,OAAOzJ,EAAMrD,EAAI,SAAU2L,EAAK,CAC7DgC,EAAS,QAAQ,EACjBtC,EAASM,CAAG,CACd,CAAC,EACMgC,CACT,EAVO,kBAWT,EAAG,CACD,IAAK,MACL,MAAOzU,EAAA,SAAawH,EAAQ,CAC1B,GAAI,CAACA,EAAQ,MAAM,IAAI,MAAM,+FAA+F,EAC5H,GAAI,CAACA,EAAO,KAAM,MAAM,IAAI,MAAM,0FAA0F,EAC5H,OAAIA,EAAO,OAAS,YAClB,KAAK,QAAQ,QAAUA,IAErBA,EAAO,OAAS,UAAYA,EAAO,KAAOA,EAAO,MAAQA,EAAO,SAClE,KAAK,QAAQ,OAASA,GAEpBA,EAAO,OAAS,qBAClB,KAAK,QAAQ,iBAAmBA,GAE9BA,EAAO,OAAS,eAClB,KAAK,QAAQ,WAAaA,GAExBA,EAAO,OAAS,iBAClBD,GAAc,iBAAiBC,CAAM,EAEnCA,EAAO,OAAS,cAClB,KAAK,QAAQ,UAAYA,GAEvBA,EAAO,OAAS,YAClB,KAAK,QAAQ,SAAS,KAAKA,CAAM,EAE5B,IACT,EAzBO,MA0BT,EAAG,CACD,IAAK,sBACL,MAAOxH,EAAA,SAA6BkC,EAAG,CACrC,GAAI,GAACA,GAAK,CAAC,KAAK,YACZ,GAAC,SAAU,KAAK,EAAE,QAAQA,CAAC,EAAI,IACnC,QAAS4S,EAAK,EAAGA,EAAK,KAAK,UAAU,OAAQA,IAAM,CACjD,IAAIC,EAAY,KAAK,UAAUD,CAAE,EACjC,GAAI,GAAC,SAAU,KAAK,EAAE,QAAQC,CAAS,EAAI,KACvC,KAAK,MAAM,4BAA4BA,CAAS,EAAG,CACrD,KAAK,iBAAmBA,EACxB,KACF,CACF,CACF,EAXO,sBAYT,EAAG,CACD,IAAK,iBACL,MAAO/U,EAAA,SAAwBgH,EAAKmL,EAAU,CAC5C,IAAIjH,EAAS,KACb,KAAK,qBAAuBlE,EAC5B,IAAIyN,EAAWnS,GAAM,EACrB,KAAK,KAAK,mBAAoB0E,CAAG,EACjC,IAAIgO,EAAchV,EAAA,SAAqBkC,EAAG,CACxCgJ,EAAO,SAAWhJ,EAClBgJ,EAAO,UAAYA,EAAO,SAAS,cAAc,mBAAmBhJ,CAAC,EACrEgJ,EAAO,iBAAmB,OAC1BA,EAAO,oBAAoBhJ,CAAC,CAC9B,EALkB,eAMd+S,EAAOjV,EAAA,SAAcyS,EAAKvQ,EAAG,CAC3BA,GACF8S,EAAY9S,CAAC,EACbgJ,EAAO,WAAW,eAAehJ,CAAC,EAClCgJ,EAAO,qBAAuB,OAC9BA,EAAO,KAAK,kBAAmBhJ,CAAC,EAChCgJ,EAAO,OAAO,IAAI,kBAAmBhJ,CAAC,GAEtCgJ,EAAO,qBAAuB,OAEhCuJ,EAAS,QAAQ,UAAY,CAC3B,OAAOvJ,EAAO,EAAE,MAAMA,EAAQ,SAAS,CACzC,CAAC,EACGiH,GAAUA,EAASM,EAAK,UAAY,CACtC,OAAOvH,EAAO,EAAE,MAAMA,EAAQ,SAAS,CACzC,CAAC,CACH,EAhBW,QAiBPgK,EAASlV,EAAA,SAAgBmK,EAAM,CAC7B,CAACnD,GAAO,CAACmD,GAAQe,EAAO,SAAS,mBAAkBf,EAAO,CAAC,GAC/D,IAAIjI,EAAI,OAAOiI,GAAS,SAAWA,EAAOe,EAAO,SAAS,cAAc,sBAAsBf,CAAI,EAC9FjI,IACGgJ,EAAO,UACV8J,EAAY9S,CAAC,EAEVgJ,EAAO,WAAW,UAAUA,EAAO,WAAW,eAAehJ,CAAC,EAC/DgJ,EAAO,SAAS,kBAAoBA,EAAO,SAAS,iBAAiB,mBAAmBA,EAAO,SAAS,iBAAiB,kBAAkBhJ,CAAC,GAElJgJ,EAAO,cAAchJ,EAAG,SAAUuQ,EAAK,CACrCwC,EAAKxC,EAAKvQ,CAAC,CACb,CAAC,CACH,EAba,UAcb,MAAI,CAAC8E,GAAO,KAAK,SAAS,kBAAoB,CAAC,KAAK,SAAS,iBAAiB,MAC5EkO,EAAO,KAAK,SAAS,iBAAiB,OAAO,CAAC,EACrC,CAAClO,GAAO,KAAK,SAAS,kBAAoB,KAAK,SAAS,iBAAiB,MAC9E,KAAK,SAAS,iBAAiB,OAAO,SAAW,EACnD,KAAK,SAAS,iBAAiB,OAAO,EAAE,KAAKkO,CAAM,EAEnD,KAAK,SAAS,iBAAiB,OAAOA,CAAM,EAG9CA,EAAOlO,CAAG,EAELyN,CACT,EAtDO,iBAuDT,EAAG,CACD,IAAK,YACL,MAAOzU,EAAA,SAAmBgH,EAAKF,EAAIqO,EAAW,CAC5C,IAAIlC,EAAS,KACTmC,EAASpV,EAAA,SAASoV,EAAO/U,EAAKiQ,EAAM,CACtC,IAAI1P,EACJ,GAAI8H,GAAQ4H,CAAI,IAAM,SAAU,CAC9B,QAASlP,EAAQ,UAAU,OAAQuP,EAAO,IAAI,MAAMvP,EAAQ,EAAIA,EAAQ,EAAI,CAAC,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACxGsP,EAAKtP,EAAQ,CAAC,EAAI,UAAUA,CAAK,EAEnCT,EAAUqS,EAAO,QAAQ,iCAAiC,CAAC5S,EAAKiQ,CAAI,EAAE,OAAOK,CAAI,CAAC,CACpF,MACE/P,EAAU6S,GAAc,CAAC,EAAGnD,CAAI,EAElC1P,EAAQ,IAAMA,EAAQ,KAAOwU,EAAO,IACpCxU,EAAQ,KAAOA,EAAQ,MAAQwU,EAAO,KACtCxU,EAAQ,GAAKA,EAAQ,IAAMwU,EAAO,GAClCxU,EAAQ,UAAYA,EAAQ,WAAauU,GAAaC,EAAO,UAC7D,IAAInQ,EAAegO,EAAO,QAAQ,cAAgB,IAC9CoC,EACJ,OAAIzU,EAAQ,WAAa,MAAM,QAAQP,CAAG,EACxCgV,EAAYhV,EAAI,IAAI,SAAUuD,EAAG,CAC/B,MAAO,GAAG,OAAOhD,EAAQ,SAAS,EAAE,OAAOqE,CAAY,EAAE,OAAOrB,CAAC,CACnE,CAAC,EAEDyR,EAAYzU,EAAQ,UAAY,GAAG,OAAOA,EAAQ,SAAS,EAAE,OAAOqE,CAAY,EAAE,OAAO5E,CAAG,EAAIA,EAE3F4S,EAAO,EAAEoC,EAAWzU,CAAO,CACpC,EAxBa,UAyBb,OAAI,OAAOoG,GAAQ,SACjBoO,EAAO,IAAMpO,EAEboO,EAAO,KAAOpO,EAEhBoO,EAAO,GAAKtO,EACZsO,EAAO,UAAYD,EACZC,CACT,EAnCO,YAoCT,EAAG,CACD,IAAK,IACL,MAAOpV,EAAA,UAAa,CAClB,IAAIsV,EACJ,OAAO,KAAK,aAAeA,EAAmB,KAAK,YAAY,UAAU,MAAMA,EAAkB,SAAS,CAC5G,EAHO,IAIT,EAAG,CACD,IAAK,SACL,MAAOtV,EAAA,UAAkB,CACvB,IAAIuV,EACJ,OAAO,KAAK,aAAeA,EAAoB,KAAK,YAAY,OAAO,MAAMA,EAAmB,SAAS,CAC3G,EAHO,SAIT,EAAG,CACD,IAAK,sBACL,MAAOvV,EAAA,SAA6B8G,EAAI,CACtC,KAAK,QAAQ,UAAYA,CAC3B,EAFO,sBAGT,EAAG,CACD,IAAK,qBACL,MAAO9G,EAAA,SAA4B8G,EAAI,CACrC,IAAI0O,EAAS,KACT5U,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EACnF,GAAI,CAAC,KAAK,cACR,YAAK,OAAO,KAAK,kDAAmD,KAAK,SAAS,EAC3E,GAET,GAAI,CAAC,KAAK,WAAa,CAAC,KAAK,UAAU,OACrC,YAAK,OAAO,KAAK,6DAA8D,KAAK,SAAS,EACtF,GAET,IAAIoG,EAAMpG,EAAQ,KAAO,KAAK,kBAAoB,KAAK,UAAU,CAAC,EAC9D6U,EAAc,KAAK,QAAU,KAAK,QAAQ,YAAc,GACxDC,EAAU,KAAK,UAAU,KAAK,UAAU,OAAS,CAAC,EACtD,GAAI1O,EAAI,YAAY,IAAM,SAAU,MAAO,GAC3C,IAAI2O,EAAiB3V,EAAA,SAAwBkC,EAAGmF,EAAG,CACjD,IAAIuO,EAAYJ,EAAO,SAAS,iBAAiB,MAAM,GAAG,OAAOtT,EAAG,GAAG,EAAE,OAAOmF,CAAC,CAAC,EAClF,OAAOuO,IAAc,IAAMA,IAAc,CAC3C,EAHqB,kBAIrB,GAAIhV,EAAQ,SAAU,CACpB,IAAIiV,EAAYjV,EAAQ,SAAS,KAAM+U,CAAc,EACrD,GAAIE,IAAc,OAAW,OAAOA,CACtC,CAGA,MAFI,QAAK,kBAAkB7O,EAAKF,CAAE,GAC9B,CAAC,KAAK,SAAS,iBAAiB,SAAW,KAAK,QAAQ,WAAa,CAAC,KAAK,QAAQ,yBACnF6O,EAAe3O,EAAKF,CAAE,IAAM,CAAC2O,GAAeE,EAAeD,EAAS5O,CAAE,GAE5E,EA3BO,qBA4BT,EAAG,CACD,IAAK,iBACL,MAAO9G,EAAA,SAAwB8G,EAAIqL,EAAU,CAC3C,IAAI2D,EAAS,KACTrB,EAAWnS,GAAM,EACrB,OAAK,KAAK,QAAQ,IAId,OAAOwE,GAAO,WAAUA,EAAK,CAACA,CAAE,GACpCA,EAAG,QAAQ,SAAUO,EAAG,CAClByO,EAAO,QAAQ,GAAG,QAAQzO,CAAC,EAAI,GAAGyO,EAAO,QAAQ,GAAG,KAAKzO,CAAC,CAChE,CAAC,EACD,KAAK,cAAc,SAAUoL,EAAK,CAChCgC,EAAS,QAAQ,EACbtC,GAAUA,EAASM,CAAG,CAC5B,CAAC,EACMgC,IAXDtC,GAAUA,EAAS,EAChB,QAAQ,QAAQ,EAW3B,EAhBO,iBAiBT,EAAG,CACD,IAAK,gBACL,MAAOnS,EAAA,SAAuBmK,EAAMgI,EAAU,CAC5C,IAAIsC,EAAWnS,GAAM,EACjB,OAAO6H,GAAS,WAAUA,EAAO,CAACA,CAAI,GAC1C,IAAI4L,EAAY,KAAK,QAAQ,SAAW,CAAC,EACrCC,EAAU7L,EAAK,OAAO,SAAUnD,EAAK,CACvC,OAAO+O,EAAU,QAAQ/O,CAAG,EAAI,CAClC,CAAC,EACD,OAAKgP,EAAQ,QAIb,KAAK,QAAQ,QAAUD,EAAU,OAAOC,CAAO,EAC/C,KAAK,cAAc,SAAUvD,EAAK,CAChCgC,EAAS,QAAQ,EACbtC,GAAUA,EAASM,CAAG,CAC5B,CAAC,EACMgC,IARDtC,GAAUA,EAAS,EAChB,QAAQ,QAAQ,EAQ3B,EAjBO,gBAkBT,EAAG,CACD,IAAK,MACL,MAAOnS,EAAA,SAAagH,EAAK,CAEvB,GADKA,IAAKA,EAAM,KAAK,mBAAqB,KAAK,WAAa,KAAK,UAAU,OAAS,EAAI,KAAK,UAAU,CAAC,EAAI,KAAK,WAC7G,CAACA,EAAK,MAAO,MACjB,IAAIiP,EAAU,CAAC,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,KAAM,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,KAAM,MAAO,MAAO,MAAO,KAAM,KAAM,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,MAAO,KAAM,MAAO,KAAK,EACjb1I,EAAgB,KAAK,UAAY,KAAK,SAAS,eAAiB,IAAInB,GAAaiH,GAAI,CAAC,EAC1F,OAAO4C,EAAQ,QAAQ1I,EAAc,wBAAwBvG,CAAG,CAAC,EAAI,IAAMA,EAAI,YAAY,EAAE,QAAQ,OAAO,EAAI,EAAI,MAAQ,KAC9H,EANO,MAOT,EAAG,CACD,IAAK,gBACL,MAAOhH,EAAA,UAAyB,CAC9B,IAAIkW,EAAS,KACTtV,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/EuR,EAAW,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAIyB,GAC/EuC,EAAgB1C,GAAcA,GAAcA,GAAc,CAAC,EAAG,KAAK,OAAO,EAAG7S,CAAO,EAAG,CACzF,QAAS,EACX,CAAC,EACGwV,EAAQ,IAAIpC,EAAKmC,CAAa,GAC9BvV,EAAQ,QAAU,QAAaA,EAAQ,SAAW,UACpDwV,EAAM,OAASA,EAAM,OAAO,MAAMxV,CAAO,GAE3C,IAAIyV,EAAgB,CAAC,QAAS,WAAY,UAAU,EACpD,OAAAA,EAAc,QAAQ,SAAUpT,EAAG,CACjCmT,EAAMnT,CAAC,EAAIiT,EAAOjT,CAAC,CACrB,CAAC,EACDmT,EAAM,SAAW3C,GAAc,CAAC,EAAG,KAAK,QAAQ,EAChD2C,EAAM,SAAS,MAAQ,CACrB,mBAAoBA,EAAM,mBAAmB,KAAKA,CAAK,CACzD,EACAA,EAAM,WAAa,IAAInO,GAAWmO,EAAM,SAAUA,EAAM,OAAO,EAC/DA,EAAM,WAAW,GAAG,IAAK,SAAUnU,EAAO,CACxC,QAASX,EAAQ,UAAU,OAAQd,EAAO,IAAI,MAAMc,EAAQ,EAAIA,EAAQ,EAAI,CAAC,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACxGf,EAAKe,EAAQ,CAAC,EAAI,UAAUA,CAAK,EAEnC6U,EAAM,KAAK,MAAMA,EAAO,CAACnU,CAAK,EAAE,OAAOzB,CAAI,CAAC,CAC9C,CAAC,EACD4V,EAAM,KAAKD,EAAehE,CAAQ,EAClCiE,EAAM,WAAW,QAAUA,EAAM,QACjCA,EAAM,WAAW,iBAAiB,SAAS,MAAQ,CACjD,mBAAoBA,EAAM,mBAAmB,KAAKA,CAAK,CACzD,EACOA,CACT,EAhCO,gBAiCT,EAAG,CACD,IAAK,SACL,MAAOpW,EAAA,UAAkB,CACvB,MAAO,CACL,QAAS,KAAK,QACd,MAAO,KAAK,MACZ,SAAU,KAAK,SACf,UAAW,KAAK,UAChB,iBAAkB,KAAK,gBACzB,CACF,EARO,SAST,CAAC,CAAC,EACKgU,CACT,EAAEnS,EAAY,EACdvB,GAAgB0T,GAAM,iBAAkB,UAAY,CAClD,IAAIpT,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAC,EAC/EuR,EAAW,UAAU,OAAS,EAAI,UAAU,CAAC,EAAI,OACrD,OAAO,IAAI6B,GAAKpT,EAASuR,CAAQ,CACnC,CAAC,EACD,IAAImE,EAAWtC,GAAK,eAAe,EACnCsC,EAAS,eAAiBtC,GAAK,eAE/B,IAAIuC,GAAiBD,EAAS,eAC1BE,GAAMF,EAAS,IACfG,GAAOH,EAAS,KAChBI,GAAgBJ,EAAS,cACzBK,GAAkBL,EAAS,gBAC3BM,GAAMN,EAAS,IACfO,GAAiBP,EAAS,eAC1BQ,GAAYR,EAAS,UACrBtT,GAAIsT,EAAS,EACbS,GAAST,EAAS,OAClBU,GAAsBV,EAAS,oBAC/BW,GAAqBX,EAAS,mBAC9BY,GAAiBZ,EAAS,eAC1Ba,GAAgBb,EAAS,clB55E7B,IAAAc,GAAkB,SAClBC,GAAwB,SACxBC,GAA4C,SAC5CC,GAAqD,sDACrDC,GAA6C,iEmBvD7C,IAAAC,GAAiC,SAkB1B,IAAMC,GAAMC,EAAA,CAACC,EAAyBC,KAAuBC,IAA6B,CACzFF,EACAA,EAAOC,EAAS,QAAQ,EAAEA,EAAS,QAAS,CAAE,SAAUA,EAAS,SAAU,GAAGC,CAAK,CAAC,EAEhFD,EAAS,SACLA,EAAS,SAAS,MAClB,QAAQ,IACJ,GAAG,oBAAiBA,EAAS,QAAQ,CAAC,KAAKA,EAAS,OAAO,eACvDA,EAAS,SAAS,IACtB,KAAKA,EAAS,SAAS,KAAK,GAC5B,GAAGC,CACP,EAEA,QAAQ,IACJ,GAAG,oBAAiBD,EAAS,QAAQ,CAAC,KAAKA,EAAS,OAAO,eAAeA,EAAS,SAAS,IAAI,GAChG,GAAGC,CACP,EAGJ,QAAQ,IAAI,GAAG,oBAAiBD,EAAS,QAAQ,CAAC,KAAKA,EAAS,OAAO,GAAI,GAAGC,CAAI,CAG9F,EAtBmB,OnByCZ,IAAMC,EAAyB,iBASzBC,GAAuBC,EAAA,CAACC,EAAwBC,EAAcC,IAA2C,CAClH,GAAI,CAACF,EACD,OAEJ,IAAIG,EAAiB,IAAIH,CAAc,KAAKC,CAAI,GAChD,OAAIC,IACAC,GAAkB,IAAID,CAAS,IAE5BC,CACX,EAToC,wBAgB7B,SAASC,GAAwBC,EAA6BC,EAA4C,CAC7G,IAAMC,EAA6B,CAAC,EAChCC,EACJ,OAAIH,GACAA,EAAgB,QAAQ,SAAUI,EAA0B,CACxD,GAAI,CACAF,EAAY,QAAK,UAAME,EAAe,YAAaA,EAAe,aAAa,CAAC,CACpF,OAASC,EAAO,CACZ,OAAAC,GACIL,EACA,CACI,SAAU,cAAY,MACtB,QAASM,EAAQ,EAAE,SAAS,EAC5B,SAAU,CAAE,KAAMA,EAAQ,EAAE,iBAAkB,CAAE,KAAMH,EAAe,aAAc,CAAC,CAAE,CAC1F,EACAC,CACJ,EACOF,CACX,CACJ,CAAC,EAEDD,EAAY,OAAS,IACrBC,KAAkB,eAAQ,GAAAK,OAAY,GAAGN,CAAW,CAAC,GAGlDC,CACX,CA1BgBT,EAAAK,GAAA,2BA4BT,IAAMU,GAA6Bf,EAACgB,IACvCA,GAAA,YAAAA,EAAoB,SAASA,GAAA,YAAAA,EAAoB,MADX,8BASnC,SAASC,GAAoBC,EAAkCC,EAAwBC,EAAuB,CA1HrH,IAAAC,EAAAC,EAAAC,EAAAC,EA2HI,IAAIH,EAAAH,GAAA,YAAAA,EAAa,SAAb,MAAAG,EAAqB,MACrB,GAAI,OAAOH,EAAY,OAAO,OAAU,SACpCE,EAAQF,EAAY,OAAO,cACpBA,EAAY,OAAO,MAAM,OAAY,OAAQ,CACpD,IAAMO,EAAiBN,GAAcA,EAAW,YAAYD,EAAY,OAAO,MAAM,IAAO,EACxFO,GAAA,MAAAA,EAAgB,MAChBL,EAAQK,EAAe,MAChB,QAAOH,EAAAG,GAAA,YAAAA,EAAgB,SAAhB,YAAAH,EAAwB,QAAU,WAChDF,EAAQK,EAAe,YAAY,OAAO,MAElD,MAAW,QAAOD,GAAAD,EAAAL,EAAY,SAAZ,YAAAK,EAAoB,QAApB,YAAAC,EAA2B,aAAe,WACxDJ,EAAQF,EAAY,OAAO,MAAM,SAAS,GAGlD,OAAOE,CACX,CAhBgBpB,EAAAiB,GAAA,uBAwBT,SAASS,GAAwBC,EAA4BR,EAAgC,CAChG,IAAIC,EAAQO,EAAa,MACzB,OAAIA,EAAa,UACbP,EAAQH,GAAoBU,EAAa,QAAQ,YAAaR,EAAYC,CAAK,GAE5EA,CACX,CANgBpB,EAAA0B,GAAA,2BAcT,SAASE,GAAqBC,EAA+BV,EAAgC,CAhKpG,IAAAE,EAAAC,EAiKI,IAAIF,EAAeU,EACnB,OAAID,EAAM,MACF,OAAOA,EAAM,OAAa,SAC1BC,EAAWX,GAAcA,EAAW,iBAAiB,KAAMY,GAAOA,EAAG,OAASF,EAAM,KAAQ,GAE5FC,EAAWX,GAAcA,EAAW,YAAYU,EAAM,MAAS,IAAI,EAC9DC,IACDA,EAAWD,EAAM,MAAS,UAG3BA,EAAM,QAAaA,EAAM,OAAU,UACtCA,EAAM,OAAU,QAAQ,MACxBC,EAAWD,EAAM,OAAU,QAAQ,MAAM,QAClCA,EAAM,OAAU,QAAQ,QAC/BT,EAAQS,EAAM,OAAU,QAAQ,SAGpCP,GAAAD,EAAAS,GAAA,YAAAA,EAAU,cAAV,YAAAT,EAAuB,SAAvB,MAAAC,EAA+B,QAC/BF,EAAQH,GAAoBa,EAAS,YAAaX,EAAYC,CAAK,GAEhEA,CACX,CAtBgBpB,EAAA4B,GAAA,wBA8BhB,SAASI,GAASC,EAAqBd,EAAgC,CA9LvE,IAAAE,EAAAC,EA+LI,GAAI,OAAOW,GAAmB,SAC1B,OAAOA,EACJ,GAAI,OAAOA,GAAmB,UAAYA,EAAe,KAAM,CAClE,IAAMH,EAAWX,GAAcA,EAAW,YAAYc,EAAe,IAAI,EACzE,GAAI,CAACH,GAAYA,EAAS,SAAW,EACjC,OACG,CACH,IAAMI,EAAiBJ,EAAS,CAAC,EACjC,IAAIR,GAAAD,EAAAa,GAAA,YAAAA,EAAgB,cAAhB,YAAAb,EAA6B,SAA7B,MAAAC,EAAqC,MAAO,CAC5C,IAAMF,EAAgBa,EACtB,OAAOhB,GAAoBiB,EAAe,YAAaf,EAAYC,CAAK,CAC5E,CACJ,CACJ,KACI,OAER,CAjBSpB,EAAAgC,GAAA,YAmBT,SAASG,GAAqBC,EAAsBjB,EAAwBc,EAAgC,CACxG,IAAMI,EAAsBT,GAAqBQ,EAAqCjB,CAAU,EAChG,OACIc,GACAI,IACCD,EAAU,MAAM,QAAUA,EAAU,MAAM,QAAQ,KAAOA,EAAU,MAAM,OAASA,EAAU,MAAM,KAE3G,CAPSpC,EAAAmC,GAAA,wBAcF,SAASG,GAAwBC,EAA2CpB,EAAgC,CAC/G,IAAIqB,EAAQ,GACRH,EACAD,EACEH,EAAiBD,GAASO,EAAkB,MAAOpB,CAAU,EAEnE,OAAQoB,EAAkB,MAAO,CAC7B,KAAK,qBAAkB,UACnBH,EAAYG,EACZC,EAAQL,GAAqBC,EAAWjB,EAAYc,CAAc,EAClE,MACJ,KAAK,qBAAkB,iBACnBG,EAAYG,EACZF,EAAsBT,GAAqBW,EAAmBpB,CAAU,EACxEqB,EACIP,GACAI,IACC,OAAOD,EAAU,OAAU,SAAWA,EAAU,MAAQA,EAAU,MAAM,MAC7E,MACJ,KAAK,qBAAkB,uBACnBA,EAAYG,EACZF,EAAsBT,GAAqBW,EAAmBpB,CAAU,EACxEqB,EAAQP,GAAkBI,GAAuBD,EAAU,OAAO,QAAQ,OAASA,EAAU,OAAO,MACpG,MACJ,KAAK,qBAAkB,mBACvB,KAAK,qBAAkB,oBACvB,KAAK,qBAAkB,kCACnBA,EAAYG,EACRN,EACAO,EAAQ,OAAOP,GAAmB,SAAWA,EAAkBG,EAAU,OAEzEI,EAAQD,EAAkB,OAE9B,MACJ,KAAK,qBAAkB,mCACnBH,EAAYG,EACZF,EAAsBT,GAAqBW,EAAmBpB,CAAU,EACxEqB,EAAQH,GAAuBD,EAAU,MAAM,KAC/C,MACJ,KAAK,qBAAkB,4BACnBA,EAAYG,EACZC,EAAQL,GAAqBC,EAAWjB,EAAYc,CAAc,EAClE,MACJ,QACI,KACR,CACA,OAAOO,CACX,CA/CgBxC,EAAAsC,GAAA,2BAsDT,SAASG,GAAWC,EAA4D,CACnF,OAAQA,EAAoB,QAAQ,IAAK,IAAI,EAAE,QAAQ,MAAO,KAAK,CACvE,CAFgB1C,EAAAyC,GAAA,cAQT,SAASE,GAAcC,EAAsC,CAChE,GAAIA,EAAM,CACN,IAAMC,EAAe,GAAG,KAAG,cAAc,IACzC,OAAOD,EAAK,MAAMC,CAAY,EAAE,CAAC,CACrC,CACJ,CALgB7C,EAAA2C,GAAA,iBAWT,SAASG,GAAcC,EAAuF,CACjH,GAAKA,EAA4B,MAASA,EAA4B,OAAS,KAAG,2BAA4B,CAC1G,IAAMF,EAAe,GAAG,KAAG,cAAc,IACzC,OAAQE,EAA4B,KAAK,MAAMF,CAAY,EAAE,CAAC,CAClE,UACKE,GAAA,YAAAA,EAA6B,QAAS,KAAG,4BACzCA,EAA6C,QAC7CA,EAA6C,SAE9C,OAAO,aAAW,UAE1B,CAXgB/C,EAAA8C,GAAA,iBAahB,SAASE,GAAwBC,EAAuBC,EAAyB,GAAe,CAC5F,IAAMC,EAAoB,GAAGF,EAAiB,IAAI,IAAIA,EAAiB,SAAS,GAChF,MAAO,GAAIC,EAA+B,GAAN,GAAQ,GACxCD,EAAiB,UAAYE,EAAoBF,EAAiB,IACtE,EACJ,CALSjD,EAAAgD,GAAA,2BAaF,SAASI,GAAUC,EAAmBC,EAAwD,CACjG,GAAI,CAACA,EACD,OAEJ,IAAIC,EAAiBD,EAAgB,WAAW,KAAME,GAC3CA,EAAU,YAAcH,CAClC,EACD,OAAKE,IACDA,EAAiBD,EAAgB,WAAW,KAAME,GACvCA,EAAU,QAAUH,CAC9B,GAEAE,IACDA,EAAiBD,EAAgB,WAAW,KAAME,GAE1CA,EAAU,MAAM,YAAY,IAC5BH,EAAU,MAAM,OAAO,EAAEA,EAAU,MAAM,OAAO,EAAE,OAAS,CAAC,EAAE,YAAY,CAEjF,GAEEE,GAAA,YAAAA,EAAgB,KAC3B,CArBgBvD,EAAAoD,GAAA,aA8BhB,SAASK,GACLC,EACAvC,EACAmC,EACG,CApWP,IAAAjC,EAqWI,IAAMsC,EAAqBD,EAAgBA,EAAgB,OAAS,CAAC,EAC/DE,EAAaD,EAAmB,UAAUA,EAAmB,YAAY,GAAG,EAAI,EAAGA,EAAmB,MAAM,EAC5GE,EAAQT,GACVO,EAAmB,UAAU,EAAGA,EAAmB,YAAY,GAAG,CAAC,EAAE,QAAQ,IAAK,EAAE,EACpFL,CACJ,EACA,OAAOjC,EAAAF,GAAA,YAAAA,EAAY,YAAY0C,KAAxB,YAAAxC,EAAiCuC,EAC5C,CAZS5D,EAAAyD,GAAA,6BAoBT,SAASK,GAAUC,EAAaL,EAA2BR,EAAyC,CAChG,IAAMc,EAAUN,EAAgBA,EAAgB,OAAS,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,EACxE,GAAIM,EAAQ,SAAS,WAAW,EAAG,CAC/B,IAAMC,EAAYF,EAAI,MAAM,IAAI,EAChCE,EAAUA,EAAU,OAAS,CAAC,EAAI,GAAIf,EAA+B,GAAN,GAAQ,GAAG,qBAAkB,QAAQ,GACpGa,EAAME,EAAU,KAAK,IAAI,CAC7B,MACIF,EAAMC,EAAQ,QAAQ,MAAO,GAAId,EAA+B,GAAN,GAAQ,GAAG,cAAY,EAAE,EAEvF,OAAOa,CACX,CAVS/D,EAAA8D,GAAA,aAYT,SAASI,GACLZ,EACAS,EACA5C,EACAgD,EACAC,EAAe,uBAAqB,GACpClB,EAAyB,GAC0D,CAvYvF,IAAA7B,EAAAC,EAwYI,IAAI+C,EAAiB,GACjBhB,EACEK,EAAkBS,EAAc,MAAM,GAAG,EACzCG,EAAaZ,EAAgB,OAAS,EACxCY,GAAcnD,IACdA,GAAaE,EAAAF,EAAW,YAAYgD,EAAc,UAAU,EAAGA,EAAc,YAAY,GAAG,CAAC,CAAC,IAAjF,YAAA9C,EAAoF,YAErG0C,EAAMD,GAAUC,EAAKL,EAAiBR,CAAsB,EAE5D,IAAMD,EAAmBQ,GAA0BC,EAAiBvC,EAAYmC,CAAe,EAC/F,GAAIL,EAAkB,CAClB,IAAMsB,EAAYH,IAAiB,uBAAqB,GAAK,KAAO,IACpEL,EAAMf,GAAwBC,EAAkBC,CAAsB,EAAE,QAAQ,IAAKqB,CAAS,EAC9FlB,GAAY/B,EAAA2B,EAAiB,qBAAjB,YAAA3B,EAAqC,MAAM,KAAK,EAChE,KACI,QAAA+C,EAAiB,GACV,CAAE,IAAAN,EAAK,WAAA5C,EAAY,eAAAkD,EAAgB,UAAAhB,CAAU,EAGxD,GAAIiB,EAAY,CACZ,IAAME,EAAeJ,IAAiB,uBAAqB,GAAK,KAAO,IACvEV,EAAgB,IAAI,EAEpBK,EAAM,GADgB,CAAC,GAAGL,CAAe,EAAE,KAAKc,CAAY,CACtC,GAAGA,CAAY,GAAGT,CAAG,EAC/C,CACA,MAAO,CAAE,IAAAA,EAAK,WAAA5C,EAAY,eAAAkD,EAAgB,UAAAhB,CAAU,CACxD,CAlCSrD,EAAAkE,GAAA,uCA6CF,SAASO,GACZC,EACAC,EACArB,EACA/C,EACA6D,EAAe,uBAAqB,GACpClB,EAAyB,GACD,CApb5B,IAAA7B,EAAAC,EAAAC,EAsbI,IAAMqD,GAAYtD,EAAAoD,EAAgB,qBAAhB,YAAApD,EAAoC,WAClDD,EAAAqD,EAAgB,qBAAhB,YAAArD,EAAoC,YAAY,MAEhD0C,EAAcW,EAAgB,GAAKA,EAAgB,GAAG,SAAS,EAAIE,EACnEvB,GAAY9B,EAAAmD,EAAgB,qBAAhB,YAAAnD,EAAoC,MAAM,KAAK,GAC3DJ,EAAawD,EAGjB,GAAID,EAAgB,QAAU,qBAAkB,iBAAmB,WAAYA,EAAiB,CAC5F,IAAMP,EAAgBpD,GAA2B2D,EAAgB,MAAM,EACvE,GAAI,CAACP,EAAe,CAChBvD,GAAIL,EAAQ,CACR,SAAU,cAAY,MACtB,QAASM,EAAQ,EAAE,WAAY,CAAE,OAAQ6D,EAAgB,MAAO,CAAC,CACrE,CAAC,EACD,MACJ,CACA,GAAM,CACF,IAAKG,EACL,WAAYC,EACZ,eAAAT,EACA,UAAWU,CACf,EAAIb,GACAZ,EACAS,EACA5C,EACAgD,EACAC,EACAlB,CACJ,EACA,GAAImB,EACA,OAEJN,EAAMc,EACN1D,EAAa2D,EACbzB,EAAY0B,CAChB,CAEA,GADAhB,EAAMA,EAAI,QAAQ,OAAQ,IAAI,EAC1BA,EACA,MAAO,CACH,IAAAA,EACA,GAAIW,EAAgB,OAAS,CAAE,MAAOA,EAAgB,MAAM,SAAS,CAAE,EACvE,GAAIA,EAAgB,IAAM,CAAE,GAAIA,EAAgB,GAAG,SAAS,CAAE,EAC9D,WAAAvD,EACA,UAAAkC,CACJ,CAIR,CA1DgBrD,EAAAyE,GAAA,mBAuET,IAAMO,GAA6BhF,EAAA,CACtCiF,EACAC,EACAjC,EACAkC,EACAC,EAAiB,KACI,CACrB,GAAI,CAACF,EACD,OAEJ,IAAIG,EAAkBJ,EAChBK,EAAeJ,EAAK,MAAM,GAAG,EACnC,QAASK,EAAQ,EAAGA,EAAQD,EAAa,OAAQC,IAAS,CACtD,IAAMC,EAAUF,EAAaC,CAAK,EAClC,GAAIC,IAAY,KACZ,SAEJ,IAAMC,EACFN,GAA2BA,IAA4BK,EACjDvC,EACAuC,EAAQ,QAAQ,KAAM,GAAG,EAEnC,GAAI,CAACH,EAAgBI,CAAc,EAAG,CAClC,GAAIL,EACA,OAEAE,EAAaC,EAAQ,CAAC,IAAM,KAC5BF,EAAgBI,CAAc,EAAI,CAAC,EAEnCJ,EAAgBI,CAAc,EAAI,CAAC,CAE3C,CACAJ,EAAkBA,EAAgBI,CAAc,CACpD,CACA,OAAOJ,CACX,EAnC0C,8BAqCnC,SAASK,GAA6BC,EAAgD,CACzF,IAAIC,EAAWC,EAAQC,EACvB,OAAQH,EAAe,MAAO,CAC1B,KAAK,qBAAkB,UACnBC,EAAY7E,GAA2B4E,EAAe,KAAK,EAC3D,MACJ,KAAK,qBAAkB,iBACnBC,EACI,OAAOD,EAAe,OAAU,SAC1BA,EAAe,MACf5E,GAA2B4E,EAAe,KAAK,EACzD,MACJ,KAAK,qBAAkB,uBACnBE,EAASF,EAAe,OAAO,MAC3BE,IACAD,EACI,qCACAC,EACK,QAAQ,MAAO,IAAI,cAAY,EAAE,EACjC,QAAQ,iBAAkB,wCAAwC,EAClE,QAAQ,WAAY,kCAAkC,GAEnE,MACJ,KAAK,qBAAkB,mBACfF,EAAe,SACfC,EAAY,iCAAiCnD,GAAWkD,EAAe,MAAgB,CAAC,IAE5F,MACJ,KAAK,qBAAkB,mCACnBG,EAAQ/E,GAA2B4E,EAAe,KAAK,EACvDC,EAAY,mDAAmDE,CAAK,uBAAuBH,EAAe,cAAc,eAAeA,EAAe,MAAM,GAC5J,MACJ,KAAK,qBAAkB,kCACfA,EAAe,SACfC,EAAY,wDACRD,EAAe,cACnB,eAAelD,GAAWkD,EAAe,MAAM,CAAC,IAEpD,MACJ,KAAK,qBAAkB,4BACnBG,EAAQ/E,GAA2B4E,EAAe,KAAK,EACvDE,EAAS9E,GAA2B4E,EAAe,MAAM,EACzDC,EAAY,4CAA8CE,EAAQ,eAAiBD,EACnF,MACJ,QACI,KACR,CAEA,OAAOD,CACX,CAjDgB5F,EAAA0F,GAAA,gCA0DhB,SAASK,GAAoBb,EAAcrB,EAAe1C,EAAuD,CAC7G,OAAI+D,EAAK,SAAS,qBAAkB,KAAK,GAAKA,EAAK,SAASrB,EAAQ,QAAQ,EACjE,qBAAkB,MAClBqB,EAAK,SAAS,qBAAkB,cAAc,GAAKA,EAAK,SAASrB,EAAQ,iBAAiB,EAC1F,qBAAkB,eACjB1C,GAAc+D,EAAK,SAAS,qBAAkB,QAAQ,GAAMA,EAAK,SAASrB,EAAQ,WAAW,EAC9F,qBAAkB,SAClBqB,EAAK,SAAS,qBAAkB,UAAU,GAAKA,EAAK,SAASrB,EAAQ,aAAa,EAClF,qBAAkB,WAClBqB,EAAK,SAAS,qBAAkB,SAAS,GAAKA,EAAK,SAASrB,EAAQ,YAAY,EAChF,qBAAkB,UAClBqB,EAAK,SAAS,qBAAkB,mBAAmB,GAAKA,EAAK,SAASrB,EAAQ,sBAAsB,EACpG,qBAAkB,oBAEzB,MAER,CAhBS7D,EAAA+F,GAAA,uBAyBT,SAASC,GAA+Bd,EAAcrB,EAAyD,CAC3G,OAAIqB,EAAK,SAAS,+CAA+C,GAAKA,EAAK,SAASrB,EAAQ,UAAU,EAC3F,gCAA6B,QAC7BqB,EAAK,SAAS,+CAA+C,GAAKA,EAAK,SAASrB,EAAQ,UAAU,EAClG,gCAA6B,QAEpC,MAER,CARS7D,EAAAgG,GAAA,kCAiBT,SAASC,GACLf,EACArB,EACA1C,EAC4D,CAC5D,OAAO4E,GAAoBb,EAAMrB,EAAO1C,CAAU,GAAK6E,GAA+Bd,EAAMrB,CAAK,CACrG,CANS7D,EAAAiG,GAAA,qBAiBT,SAASC,GACLC,EACAC,EACAC,EACAlF,EACAmC,EACAc,EAAe,uBAAqB,GACpC7D,EACI,CAtpBR,IAAAc,EAAAC,EAAAC,EAAAC,EAAA8E,EAAAC,EAAAC,EAAAC,EAAAC,EAupBI,IAAM7C,EAAQT,GAAU,eAAcE,CAAe,EACjD4B,EAAOiB,EAAUA,EAAQ,IAAM,GAC7BQ,EAAmBR,EAAQ,WAGjC,OAFuBF,GAAkBf,EAAMrB,EAAO1C,CAAU,EAExC,CACpB,KAAK,qBAAkB,MAAO,CAC1BkF,EAAOnB,CAAI,EAAI,CAAE,KAAM,YAAU,KAAM,EACvCmB,EAAOnB,CAAI,EAAE,QAAS7D,EAAA+E,GAAA,YAAAA,EAAkB,SAAlB,YAAA/E,EAA0B,QAChDgF,EAAOnB,CAAI,EAAE,WAAayB,EAC1BN,EAAOnB,CAAI,EAAE,UAAYiB,EAAQ,UACjC,KACJ,CACA,KAAK,qBAAkB,eAAgB,CACnCE,EAAOnB,CAAI,EAAI,CAAE,KAAM,YAAU,cAAe,EAChDmB,EAAOnB,CAAI,EAAE,QAAS5D,EAAA8E,GAAA,YAAAA,EAAkB,SAAlB,YAAA9E,EAA0B,QAChD+E,EAAOnB,CAAI,EAAE,WAAayB,EAC1BN,EAAOnB,CAAI,EAAE,UAAYiB,EAAQ,UACjC,KACJ,CACA,KAAK,qBAAkB,SAAU,CAC7B,GAAI,CAACjB,EAAK,SAAS,qBAAkB,QAAQ,GAAKA,EAAK,SAAS,WAAW,EAAG,CAC1E,IAAMjB,EAAYiB,EAAK,MAAM,IAAI,EACjCjB,EAAUA,EAAU,OAAS,CAAC,EAAI,IAAI,qBAAkB,QAAQ,GAChEiB,EAAOjB,EAAU,KAAK,IAAI,CAC9B,CACAoC,EAAOnB,CAAI,EAAI,CAAE,KAAM,YAAU,QAAS,EAC1CmB,EAAOnB,CAAI,EAAE,QAAS3D,EAAA6E,GAAA,YAAAA,EAAkB,SAAlB,YAAA7E,EAA0B,QAChD8E,EAAOnB,CAAI,EAAE,WAAayB,EAC1BN,EAAOnB,CAAI,EAAE,UAAYiB,EAAQ,UACjC,KACJ,CACA,KAAK,qBAAkB,WAAY,CAC/BE,EAAOnB,CAAI,EAAI,CAAE,KAAM,YAAU,IAAK,EACtCmB,EAAOnB,CAAI,EAAE,QAAS1D,EAAA4E,GAAA,YAAAA,EAAkB,SAAlB,YAAA5E,EAA0B,QAChD6E,EAAOnB,CAAI,EAAE,WAAayB,EAC1BN,EAAOnB,CAAI,EAAE,UAAYiB,EAAQ,UACjC,KACJ,CACA,KAAK,qBAAkB,UAAW,CAC9BE,EAAOnB,CAAI,EAAI,CAAE,KAAM,YAAU,SAAU,EAC3CmB,EAAOnB,CAAI,EAAE,OAAQoB,EAAAF,GAAA,YAAAA,EAAkB,SAAlB,YAAAE,EAA0B,QAAQ,MACvDD,EAAOnB,CAAI,EAAE,QAASqB,EAAAH,GAAA,YAAAA,EAAkB,SAAlB,YAAAG,EAA0B,QAChDF,EAAOnB,CAAI,EAAE,WAAayB,EAC1BN,EAAOnB,CAAI,EAAE,UAAYiB,EAAQ,UACjC,KACJ,CACA,KAAK,qBAAkB,oBAAqB,CACxCE,EAAOnB,CAAI,EAAI,CAAE,KAAM,YAAU,mBAAoB,EACrDmB,EAAOnB,CAAI,EAAE,QAASsB,EAAAJ,GAAA,YAAAA,EAAkB,SAAlB,YAAAI,EAA0B,QAChDH,EAAOnB,CAAI,EAAE,WAAayB,EAC1BN,EAAOnB,CAAI,EAAE,UAAYiB,EAAQ,UACjC,KACJ,CACA,KAAK,gCAA6B,QAAS,CACvCE,EAAOnB,CAAI,EAAI,CAAE,KAAM,YAAU,OAAQ,EACzCmB,EAAOnB,CAAI,EAAE,QAASuB,EAAAL,GAAA,YAAAA,EAAkB,SAAlB,YAAAK,EAA0B,QAChDJ,EAAOnB,CAAI,EAAE,WAAayB,EAC1BN,EAAOnB,CAAI,EAAE,UAAYiB,EAAQ,UACjC,KACJ,CACA,KAAK,gCAA6B,QAAS,CACvCE,EAAOnB,CAAI,EAAI,CAAE,KAAM,YAAU,OAAQ,EACzCmB,EAAOnB,CAAI,EAAE,QAASwB,EAAAN,GAAA,YAAAA,EAAkB,SAAlB,YAAAM,EAA0B,QAChDL,EAAOnB,CAAI,EAAE,WAAayB,EAC1BN,EAAOnB,CAAI,EAAE,UAAYiB,EAAQ,UACjC,KACJ,CACA,QACIE,EAAOnB,CAAI,EAAI,CAAE,KAAM,YAAU,OAAQ,CAEjD,CAEImB,EAAOnB,CAAI,IACXmB,EAAOnB,CAAI,EAAE,eAAiB,IAAIkB,EAAiB,mBAAmB,QAClE,wBACA,cACJ,CAAC,GACGA,EAAiB,QACjBC,EAAOnB,CAAI,EAAE,MAAQkB,EAAiB,OAGtCA,EAAiB,KACjBC,EAAOnB,CAAI,EAAE,GAAQkB,EAAiB,IAEtCD,GAAWA,EAAQ,aACnBE,EAAOnB,CAAI,EAAE,WAAaiB,EAAQ,YAG9C,CAlGSnG,EAAAkG,GAAA,4BA8GT,SAASU,GACLR,EACA9C,EACAuD,EACA1F,EACAkF,EACAjC,EAAe,uBAAqB,GACpC7D,EACI,CApwBR,IAAAc,EAqwBI,IAAM8E,EAAwB1B,GAC1B2B,EACAjF,EACAmC,EACA/C,EACA6D,EACA,EACJ,EACA,GAAI+B,EACA,OAAQC,EAAiB,MAAO,CAC5B,KAAK,qBAAkB,eAAgB,CACnCF,GACIC,EACAC,EACAC,EACAlF,EACAmC,EACAc,EACA7D,CACJ,EACA,KACJ,CACA,KAAK,qBAAkB,gBAAiB,CACpC,IAAMH,EAAiB,IAAIe,EAAW,kBAAkB,IACpDiF,EAAiB,mBAAmB,MAAMjF,EAAW,kBAAkB,EAAE,CAAC,CAC9E,GACM2F,EAAST,EAAOF,EAAQ,GAAG,EAAI,CACjC,KAAM,YAAU,gBAChB,OAAQ,CAAC,EACT,GAAIA,EAAQ,GACZ,eAAgB/F,EAChB,MAAO+F,EAAQ,MACf,UAAWA,EAAQ,SACvB,EACI,CAACW,EAAM,IAAM1C,IAAiB,uBAAqB,IACnDxD,GAAIL,EAAQ,CACR,SAAU,cAAY,MACtB,QAASM,EAAQ,EAAE,eAAgB,CAAE,MAAOuF,EAAiB,kBAAmB,CAAC,CACrF,CAAC,GAEL/E,EAAA+E,EAAiB,SAAjB,MAAA/E,EAAyB,QAAS0F,GAAmB,CACjDH,GACIG,EACAzD,EACAuD,EACA1F,EACA2F,EAAM,OACN1C,EACA7D,CACJ,CACJ,GACA,KACJ,CACJ,CAER,CAhESP,EAAA4G,GAAA,oBAyEF,SAASI,GACZ7F,EACAmC,EACAc,EAAe,uBAAqB,GACpC7D,EACwB,CA10B5B,IAAAc,EAAAC,EA20BI,IAAM+E,EAAuB,CAAC,EAC9B,GAAI,CAAClF,GAAc,CAACA,EAAW,YAC3B,OAEJ,IAAM0C,EAAQT,GAAU,eAAcE,CAAe,EAC/C2D,EAAkBpD,KAASvC,GAAAD,EAAAF,GAAA,YAAAA,EAAY,cAAZ,YAAAE,EAA0BwC,KAA1B,YAAAvC,EAAkC,cACnE,GAAI2F,EAAiB,CACjB,IAAMC,EAAU/F,GAAcA,EAAW,mBAAmB,YAAY,GAAG,EACrE0F,EAAc1F,GAAcA,EAAW,mBAAmB,UAAU,EAAG+F,CAAO,EAGpFD,EAAgB,QAASE,GAAS,CAC9BP,GAAiBO,EAAM7D,EAAiBuD,EAAa1F,EAAYkF,EAAQjC,EAAc7D,CAAM,CACjG,CAAC,CACL,CACA,OAAO8F,CACX,CAtBgBrG,EAAAgH,GAAA,6BA+BT,SAASI,GACZjG,EACAmC,EACAc,EAAe,uBAAqB,GACpC7D,EACwB,CAz2B5B,IAAAc,EA02BI,IAAMgF,EAAuB,CAAC,EAC9B,GAAI,CAAClF,GAAc,CAACA,EAAW,YAC3B,OAEJ,IAAM0C,EAAQT,GAAU,eAAcE,CAAe,EAC/C2D,EAAkBpD,KAASxC,EAAAF,GAAA,YAAAA,EAAY,YAAY0C,KAAxB,YAAAxC,EAAgC,QACjE,GAAI4F,EAAiB,CACjB,IAAMC,EAAU/F,GAAcA,EAAW,mBAAmB,YAAY,GAAG,EACrE0F,EAAc1F,GAAcA,EAAW,mBAAmB,UAAU,EAAG+F,CAAO,EAGpFD,EAAgB,QAASE,GAAS,CAC9BP,GAAiBO,EAAM7D,EAAiBuD,EAAa1F,EAAYkF,EAAQjC,EAAc7D,CAAM,CACjG,CAAC,CACL,CACA,OAAO8F,CACX,CAtBgBrG,EAAAoH,GAAA,uBA4BT,SAASC,GAAuBpC,EAA0C,CAC7E,OAAIA,EAAS,kBAAgB,OAAO,GAAKA,EAAS,kBAAgB,GAAG,EAC1D,uBAAqB,GAErB,uBAAqB,EAEpC,CANgBjF,EAAAqH,GAAA,0BAcT,SAASC,GAAoBrC,EAAoB1E,EAAmD,CA94B3G,IAAAc,EAAAC,EA+4BI,IAAIiG,EACJ,GAAItC,EAAS,kBAAgB,OAAO,EAAG,CACnC,IAAMuC,EAAUvC,EAAS,kBAAgB,OAAO,EAAE,MAClD,GAAI,CAACuC,EAAS,CACV5G,GAAIL,EAAQ,CACR,SAAU,cAAY,MACtB,QAASM,EAAQ,EAAE,UAAW,CAAE,MAAOoE,EAAS,SAAS,EAAE,EAAM,CAAC,EAClE,SAAU,CACN,KAAM,eACN,MAAO,CAAC,kBAAgB,OAAO,CACnC,CACJ,CAAC,EACD,MACJ,CACA,QAAWwC,KAAWD,EAAS,CAC3B,IAAME,EAASF,EAAQC,CAAO,EAC9B,GAAI9E,IAActB,EAAAqG,EAAO,YAAP,YAAArG,EAAkB,IAAI,IAAM,aAAW,mBAAoB,CACzEkG,EAAe,eAAa,qBAC5B,KACJ,SAAW5E,IAAcrB,EAAAoG,EAAO,YAAP,YAAApG,EAAkB,IAAI,IAAM,aAAW,WAAY,CACxEiG,EAAe,eAAa,uBAC5B,KACJ,CACJ,CACJ,MACSA,GACD3G,GAAIL,EAAQ,CACR,SAAU,cAAY,MACtB,QAASM,EAAQ,EAAE,aAAc,CAAE,QAAS,kBAAgB,OAAQ,CAAC,EACrE,SAAU,CACN,KAAM,eACN,MAAO,CAAC,kBAAgB,OAAO,CACnC,CACJ,CAAC,EAGT,OAAO0G,CACX,CAtCgBvH,EAAAsH,GAAA,uBA6CT,SAASK,GAA4BC,EAAqD,CA37BjG,IAAAvG,EAAAC,EAAAC,EAAAC,EA47BI,IAAI+F,EACEM,EAAW/E,GAAc8E,CAAM,EACrC,GAAIC,IAAa,aAAW,mBACxBN,EAAe,eAAa,6BACrBM,IAAa,aAAW,WAAY,CAC3C,IAAMC,GAAYtG,GAAAD,GAAAD,GAAAD,EAAAuG,EAAO,UAAP,YAAAvG,EAAgB,WAAhB,YAAAC,EAA0B,QAA1B,YAAAC,EAAiC,QAAjC,YAAAC,EAA+D,GAC7EsG,IAAaA,EAAS,cAAY,OAAO,GAAKA,EAAS,cAAY,SAAS,GAC5EP,EAAe,eAAa,qBAE5BA,EAAe,eAAa,sBAEpC,MAAWM,IAAa,aAAW,WAC/BN,EAAe,eAAa,uBAErBM,IAAa,aAAW,aAC/BN,EAAe,eAAa,iBAEhC,OAAOA,CACX,CAnBgBvH,EAAA2H,GAAA,+BA0BhB,SAASI,GAA6BC,EAA8D,CAChG,IAAIT,EACJ,QAAWE,KAAWO,EAAS,CAC3B,IAAMJ,EAASI,EAAQP,CAAO,EAE9B,GADAF,EAAeI,GAA4BC,CAAM,EAC7CL,EACA,KAER,CACA,OAAOA,CACX,CAVSvH,EAAA+H,GAAA,gCAkBF,SAASE,GAAoBhD,EAAoB1E,EAAmD,CACvG,IAAMyH,EACF/C,EAAS,kBAAgB,GAAG,EAAE,SAC7BA,EAAS,kBAAgB,GAAG,EAAE,QAAQ,QAE3C,GAAI,CAAC+C,GAAW,OAAO,KAAKA,CAAO,EAAE,SAAW,EAC5C,OAAApH,GAAIL,EAAQ,CACR,SAAU,cAAY,KACtB,QAASM,EAAQ,EAAE,UAAW,CAAE,MAAOoE,EAAS,SAAS,EAAE,EAAM,CAAC,EAClE,SAAU,CACN,KAAM,eACN,MAAO,CAAC,kBAAgB,IAAK,SAAS,CAC1C,CACJ,CAAC,EACM,eAAa,uBAGxB,IAAMsC,EAAeQ,GAA6BC,CAAO,EACzD,OAAKT,GACD3G,GAAIL,EAAQ,CACR,SAAU,cAAY,MACtB,QAASM,EAAQ,EAAE,aAAc,CAAE,QAAS,kBAAgB,GAAI,CAAC,EACjE,SAAU,CACN,KAAM,eACN,MAAO,CAAC,kBAAgB,IAAK,UAAW,SAAS,CACrD,CACJ,CAAC,EAEE0G,CACX,CA7BgBvH,EAAAiI,GAAA,uBAsCT,SAASC,GACZjD,EACAkD,EACA5H,EACwB,CACxB,IAAIgH,EACJ,OAAItC,EAAS,kBAAgB,GAAG,EAC5BsC,EAAe,eAAa,eACrBY,IAAyB,uBAAqB,GACrDZ,EAAeD,GAAoBrC,EAAU1E,CAAM,EAC5C4H,IAAyB,uBAAqB,GACrDZ,EAAeU,GAAoBhD,EAAU1E,CAAM,EAE9CgH,GACD3G,GAAIL,EAAQ,CACR,SAAU,cAAY,MACtB,QAASM,EAAQ,EAAE,MAAM,EACzB,SAAU,CACN,KAAM,cACV,CACJ,CAAC,EAGF0G,CACX,CAxBgBvH,EAAAkI,GAAA,+BAgCT,SAASE,GAA8BtB,EAAoBX,EAAqBkC,EAAwB,CACvGvB,GAAA,MAAAA,EAAO,IACPX,EAAQ,MAAQ,mBAAmBW,EAAM,GACzCX,EAAQ,YAAU,IAAI,EAAI,CAAC,CAAE,KAAM,gBAAc,GAAI,MAAOW,EAAM,EAAG,CAAC,IAEtEX,EAAQ,MAAQkC,EAAS,QAAQ,YAAa,SAAS,EACvDlC,EAAQ,YAAU,IAAI,EAAI,CAAC,CAAE,KAAM,gBAAc,GAAI,MAAOkC,EAAS,QAAQ,uBAAsB,EAAE,CAAE,CAAC,GAGxGvB,GAAA,MAAAA,EAAO,MACPX,EAAQ,YAAcW,EAAM,MACrBA,GAAA,MAAAA,EAAO,GACdX,EAAQ,YAAcW,EAAM,GAE5BX,EAAQ,YAAckC,EAAS,UAAUA,EAAS,YAAY,GAAG,EAAI,CAAC,CAE9E,CAhBgBrI,EAAAoI,GAAA,iCAwBT,SAASE,GAAoCxB,EAAoBX,EAAqBkC,EAAwB,CArkCrH,IAAAhH,EAskCI+G,GAA8BtB,EAAOX,EAASkC,CAAQ,EAClDvB,GAAA,MAAAA,EAAO,MACPX,EAAQ,YAAcW,GAAA,YAAAA,EAAO,MACtBA,GAAA,MAAAA,EAAQ,MACfX,EAAQ,YAAcW,EAAM,OACrBzF,EAAAyF,GAAA,YAAAA,EAAO,SAAP,MAAAzF,EAAgB,QACvB8E,EAAQ,YAAcW,EAAM,OAAO,MAE3C,CATgB9G,EAAAsI,GAAA,uCAgBT,SAASC,GAAqBC,EAAuB1B,EAAoBuB,EAA8B,CAC1G,GAAI,CAACvB,EACD,OAEJ,IAAIX,EACJ,OAAIqC,EAAU,YAAY,kBAEtBrC,EAAU,KAAK,MAAM,KAAK,UAAUqC,EAAU,YAAY,iBAAiB,CAAC,GAE5ErC,EAAU,CACN,KAAM,SACN,WAAY,CAAC,EACb,qBAAsB,EAC1B,EACAA,EAAQ,YAAU,UAAU,EAAI,IAEpCA,EAAQ,YAAU,cAAc,EAAIW,EAAM,eAC1CsB,GAA8BtB,EAAOX,EAASkC,CAAQ,EAC/ClC,CACX,CAnBgBnG,EAAAuI,GAAA,wBA8BT,SAASE,GACZtH,EACAmC,EACA/C,EACA6D,EAAe,uBAAqB,GACpCsE,EAA0B,GACZ,CAznClB,IAAArH,EAAAC,EA0nCI,IAAMuC,EAAQT,GAAU,eAAcE,CAAe,EACjDqF,EAA2B,CAAC,EAChC,GAAIxH,EAAY,CACZ,IAAM8F,EAAkBpD,KAASvC,GAAAD,EAAAF,GAAA,YAAAA,EAAY,cAAZ,YAAAE,EAA0BwC,KAA1B,YAAAvC,EAAkC,QAEnE,OAAI2F,IACA0B,EAAW1B,EAAgB,OAAO,SAAU2B,EAAwBzB,EAAkB,CAClF,GAAIuB,GAA2B,CAACvB,EAAK,IAAS,EAAE,WAAYA,GAAQA,EAAK,QACrE,OAAOyB,EAEX,IAAMzC,EAAwB1B,GAC1B0C,EACAhG,EACAmC,EACA/C,EACA6D,EACA,EACJ,EACA,OAAI+B,GACAyC,EAAO,KAAKzC,CAAO,EAEhByC,CACX,EAAGD,CAAQ,GAERA,CACX,CACJ,CAjCgB3I,EAAAyI,GAAA,6BA0CT,IAAMI,GAAuB7I,EAAA,CAChCiF,EACAC,EACAjC,EACAkC,IACO,CACP,GAAI,CAACD,EACD,OAEJ,IAAIG,EAAkBJ,EAChB6D,EAAY5D,EAAK,MAAM,GAAG,EAChC4D,EAAU,QAAQ,SAAUtD,EAAS,CACjC,IAAMC,EACFN,GAA2BA,IAA4BK,EACjDvC,EACAuC,EAAQ,QAAQ,KAAM,GAAG,EACnC,GAAKH,EAAgBI,CAAc,EAGnC,IAAI,OAAO,KAAKJ,EAAgBI,CAAc,CAAC,EAAE,SAAW,EAAG,CACvD,MAAM,QAAQJ,CAAe,EAC7BA,EAAgB,OAAO,OAAOI,CAAc,EAAG,CAAC,EAEhD,OAAOJ,EAAgBI,CAAc,EAEzCqD,EAAU,IAAI,EACdD,GAAqB5D,EAAU6D,EAAU,KAAK,GAAG,EAAG7F,EAAkBkC,CAAuB,EAC7F,MACJ,CACAE,EAAkBA,GAAmBA,EAAgBI,CAAc,EACvE,CAAC,CACL,EA/BoC,wBAsC9BsD,GAA2B/I,EAACgJ,GAC1BA,IAAe,aAAW,cACnB,aAAW,WAEf,GAAGA,CAAU,GAJS,4BAapBC,GAAoBjJ,EAAA,CAC7BgJ,EACAE,IACiB,CACjB,IAAMC,EAA6B,CAC/B,SAAU,GACV,KAAM,EACV,EACA,OAAQH,EAAY,CAEhB,KAAK,aAAW,YAAa,CAEzBG,EAAW,SAAW,MAEtBA,EAAW,KAAO,KAAK,UAAQ,OAAO,IAAIA,EAAW,QAAQ,GAC7D,KACJ,CAEA,KAAK,aAAW,WAChB,KAAK,aAAW,WAAY,CAExBA,EAAW,SAAWD,EAAY,GAAGF,CAAU,IAAIE,CAAS,GAAKH,GAAyBC,CAAU,EAEpGG,EAAW,KAAO,MAAM,UAAQ,OAAO,IAAIA,EAAW,QAAQ,GAC9D,KACJ,CAEA,QAAS,CAELA,EAAW,SAAWJ,GAAyBC,CAAU,EAEzDG,EAAW,KAAO,MAAM,UAAQ,OAAO,IAAIA,EAAW,QAAQ,GAC9D,KACJ,CACJ,CACA,OAAAA,EAAW,MAAQ,QACZA,CACX,EArCiC,qBAiD1B,SAASC,GACZvB,EACAqB,EACAG,EACAC,EACM,CACN,GAAIzB,IAAa,aAAW,WAAY,CACpC,IAAM0B,EAAQF,GAAUA,EAAO,MAAM,GAAG,EACxC,OAAOE,GAASA,EAAMA,EAAM,OAAS,CAAC,EAAI,MAC9C,CACA,IAAMC,EAAkB,CAAC,EACzB,OAAAA,EAAM,KAAK3B,CAAQ,EACfqB,EACAM,EAAM,KAAKN,CAAS,EACbI,GACPE,EAAM,KAAKF,EAAS,QAAQ,IAAK,EAAE,EAAE,QAAQzB,EAAU,EAAE,CAAC,EAEvD2B,EAAM,KAAK,GAAG,CACzB,CAlBgBxJ,EAAAoJ,GAAA,kBA0BhB,SAASK,GACLjE,EACAgD,EACAkB,EACAC,EACF,CACE,IAAMC,EAAOpE,EAAQ,KACrB,GAAIoE,EAAM,CACN,IAAMC,EAAgBD,EAAK,MAAM9J,CAAsB,EAAE,CAAC,EAC1D,GAAI0I,EAAU,YAAYqB,CAAa,EAAG,CACtC,IAAMC,EAAkBtB,EAAU,YAAYqB,CAAa,EAAE,gBACzDD,EAAK,SAASF,EAAoBI,CAAe,CAAC,GAClDH,EAAgB,KAAKE,CAAa,CAE1C,CACJ,CACJ,CAhBS7J,EAAAyJ,GAAA,+BA0BT,SAASM,GACLC,EACAN,EACAlB,EACK,CACL,IAAMmB,EAAkB,CAAC,EACzB,GAAIK,EAAmB,KACnBL,EAAgB,KAAKK,EAAmB,KAAK,MAAMlK,CAAsB,EAAE,CAAC,CAAC,UACtEkK,EAAmB,QACtBN,GACAM,EAAmB,MAAM,QAASxE,GAAY,CAC1CiE,GAA4BjE,EAAuBgD,EAAWkB,EAAqBC,CAAe,CACtG,CAAC,EAEDA,EAAgB,SAAW,GAC3B,OAGR,OAAOA,CACX,CAnBS3J,EAAA+J,GAAA,mCAkCT,SAASE,GACLN,EACAnB,EACAhG,EACAkH,EACA3F,EACAmG,EACArC,EACAmC,EACc,CAh2ClB,IAAA3I,EAAAC,EAAAC,EAAAC,EAi2CI,IAAI2I,EAAiC,CACjC,aAAc,OACd,iBAAkB,CAAC,EACnB,MAAO,EACX,EACA,GAAIR,EAAgB,OAAQ,CACxB,IAAMS,EAAiBT,EAAgBA,EAAgB,OAAS,CAAC,EAGjE,GAFAQ,EAAe,iBAAmB3B,EAAU,YAAe4B,CAAc,GAErE/I,EAAA8I,GAAA,YAAAA,EAAgB,mBAAhB,MAAA9I,EAAmC,QAAWC,EAAA6I,GAAA,YAAAA,EAAgB,mBAAhB,YAAA7I,EAAmC,QAAY,QAE7F,OAAA6I,EAAiBE,GACb7B,EACAhG,EACAkH,EACAS,EAAe,iBACfpG,EACAmG,EACArC,CACJ,EACOsC,EAEPR,EAAgB,OAAS,GACzBA,EAAgB,QAASnE,GAAY,CAC7BA,IAAY,KACZ2E,EAAe,iBAAiB,WAAgB,CAC5C,GAAGA,EAAe,iBAAiB,WACnC,GAAG3B,EAAU,YAAehD,CAAO,EAAE,UACzC,EAER,CAAC,EAEL2E,EAAe,OAAQ5I,EAAA4I,GAAA,YAAAA,EAAgB,mBAAhB,MAAA5I,EAAmC,MACpD4I,EAAe,iBAAiB,MAChC3H,EACN,IAAM8H,EAAaF,GAAA,YAAAA,EAAgB,MAAM,KAAK,GACxCG,EAAeb,GAA4C,CAAC,EAClES,EAAe,aAAeD,EAAQ,eAClCrC,EACAyC,EACAC,GACA/I,EAAA2I,GAAA,YAAAA,EAAgB,mBAAhB,YAAA3I,EAAmC,eACvC,CACJ,MAEI2I,EAAe,iBAAmBH,EAClCG,EAAe,MAAQA,EAAe,iBAAiB,MACjDA,EAAe,iBAAiB,MAChCpG,EACNoG,EAAe,aAAeT,EAElC,OAAOS,CACX,CA9DSnK,EAAAiK,GAAA,8CA0EF,SAASI,GACZ7B,EACAhG,EACAkH,EACAM,EACAjG,EACAmG,EACArC,EACc,CACd,IAAIsC,EACJ,GAAIH,EAAmB,OAAY,QAC/B,OAAAG,EAAiBE,GACb7B,EACAhG,EACAkH,EACAM,EAAmB,MACnBjG,EACAmG,EACArC,CACJ,EACOsC,EAEX,IAAMR,EAAkBI,GAAgCC,EAAoBN,EAAqBlB,CAAS,EAC1G,GAAKmB,EAGL,OAAAQ,EAAiBF,GACbN,EACAnB,EACAhG,EACAkH,EACA3F,EACAmG,EACArC,EACAmC,CACJ,EACOG,CACX,CArCgBnK,EAAAqK,GAAA,2BA+CT,IAAMG,GAAoBxK,EAAA,CAAC6F,EAAQ4E,EAAQC,IAAsB,CACpE,IAAMC,EAAc9E,EAAO,MAAM,EACjC,OAAA4E,EAAO,QAAQ,CAACtD,EAAM5B,IAAU,CACxB,OAAOoF,EAAYpF,CAAK,EAAM,IAC9BoF,EAAYpF,CAAK,EAAImF,EAAQ,8BAA8BvD,EAAMuD,CAAO,EACjEA,EAAQ,kBAAkBvD,CAAI,EACrCwD,EAAYpF,CAAK,KAAI,GAAAqF,SAAM/E,EAAON,CAAK,EAAG4B,EAAMuD,CAAO,EAChD7E,EAAO,QAAQsB,CAAI,IAAM,IAChCwD,EAAY,KAAKxD,CAAI,CAE7B,CAAC,EACMwD,CACX,EAZiC,qBAgC1B,SAASE,GAA2BC,EAAsC,CAC7E,GAAKA,EAGL,OAAQA,EAAS,QAAQ,IAAI,EAAI,GAAKA,EAAS,MAAM,IAAI,EAAE,CAAC,EAAIA,GAAU,QAAQ,KAAM,IAAI,CAChG,CALgBC,EAAAF,GAAA,8BAYT,SAASG,GAAiBC,EAAsB,CACnD,OAAOA,GAAA,YAAAA,EAAM,MAAMC,GAAwB,EAC/C,CAFgBH,EAAAC,GAAA,oBAWT,SAASG,GAAsBC,EAAoBC,EAAuB,CAC7EA,EAAM,QAAQ,CAACC,EAAsBC,IAAkB,CAC/CH,EAAO,WAAWE,CAAY,IAC9BF,EAAO,WAAWE,CAAY,EAAE,cAAmBC,EAE3D,CAAC,CACL,CANgBR,EAAAI,GAAA,yBAaT,SAASK,GAAiBC,EAAqB,CAClD,OAAAA,EAAMA,EAAI,QAAQ,kBAAiB,EAAE,EACrCA,EAAMA,EAAI,QAAQ,yCAA0C,EAAE,EACvDA,CACX,CAJgBV,EAAAS,GAAA,oBAWT,SAASE,GAAkBD,EAAqB,CACnD,OAAAA,EAAMA,EAAI,QAAQ,eAAc,IAAI,EACpCA,EAAMA,EAAI,QAAQ,wCAAyC,eAAe,EACnEA,CACX,CAJgBV,EAAAW,GAAA,qBoB7hDhB,IAAAC,GAAqD,sDASrDC,GAeO,SCxBP,IAAAC,GAMO,SAQA,IAAMC,GAA2BC,EAAA,CAACC,EAAgBC,IAC9CD,EAASC,EAAc,KAAK,IAAI,EADH,4BAU3BC,GAAwBH,EAAA,CAACC,EAAgBC,EAAyBE,IACpEH,EAASC,EAAc,KAAK,IAAI,EAAIE,EAAY,CAAC,EADvB,yBAWxBC,GAAmBL,EAAA,CAACM,EAAmBC,IAA0B,CAC1E,IAAIC,EACEC,EAAiB,oBACvB,OAAIF,IAAU,QAAaA,EAAM,SAASE,CAAM,EAC5CD,EAAqBD,EAAM,MAAME,CAAM,EAAE,CAAC,EAE1CD,EAAqBF,EAAU,QAAQ,IAAI,OAAO,KAAM,GAAG,EAAG,IAAI,EAAE,QAAQ,YAAa,SAAS,EAE/FE,CACX,EATgC,oBAWzB,SAASE,GAASC,EAAwB,CAI7C,OAAOA,EAAO,QAAQ,oBAAqB,SAAUC,EAAG,CACpD,IAAMC,EAAQD,EAAE,WAAW,CAAC,EAAE,SAAS,EAAE,EACzC,MAAO,IAAIC,EAAM,SAAW,EAAI,IAAM,EAAE,GAAGA,CAAK,EACpD,CAAC,CACL,CARgBb,EAAAU,GAAA,YAYT,IAAKI,QACRA,EAAA,SAAW,iBACXA,EAAA,YAAc,uBAFNA,QAAA,IAYZ,SAASC,GAAeb,EAAyBc,EAA4BT,EAAe,CACxF,IAAID,EACJ,OAAAJ,EAAgBA,EAAc,IAAI,SAAUe,EAAM,CAC9C,GAAIA,IAAS,gBAAa,UACtB,QAASC,EAAQ,EAAGA,EAAQF,EAAiB,OAAQE,IAEjD,GADmBF,EAAiBE,CAAK,IACtB,gBAAa,WAC5BZ,EAAYU,EAAiBE,EAAQ,CAAC,EAClCZ,EAAU,QAAQ,aAAU,QAAQ,IAAM,IAC1C,OAAAU,EAAiBE,EAAQ,CAAC,EAAIb,GAAiBC,EAAWC,CAAK,EAAI,UAC5DS,EAAiBE,EAAQ,CAAC,EAKjD,OAAOD,CACX,CAAC,EACM,CAAE,cAAAf,CAAc,CAC3B,CAlBSF,EAAAe,GAAA,kBA4BF,IAAMI,GAAuBnB,EAAA,CAChCC,EACAC,EACAE,EACAgB,EACAb,IACS,CACT,IAAIc,EAAU,aACRL,EAAmB,CAAC,GAAGZ,CAAW,GAEvC,CAAE,cAAAF,CAAc,EAAIa,GAAeb,EAAec,EAAkBT,CAAK,GACtES,EAAiB,CAAC,IAAM,gBAAa,SACrCK,EAAUL,EAAiB,CAAC,EACvB,QAAQ,0BAA2B,eAAY,EAC/C,QAAQ,2BAA4B,eAAY,EAC9Cd,EAAc,CAAC,IAAM,gBAAa,QACzCmB,EAAUnB,EAAc,CAAC,GAE7B,IAAMoB,EAAaN,EAAiBA,EAAiB,OAAS,CAAC,EAC1D,QAAQ,0BAA2B,eAAY,EAC/C,QAAQ,2BAA4B,eAAY,EAChD,QAAQ,YAAa,YAAY,EACjC,QAAQ,IAAK,KAAK,EACnBO,EACEC,EAAaF,EAAW,QAAQ,KAAK,EAC3C,OAAIA,EAAW,WAAW,WAAW,GAAKE,EAAa,GACnDD,EAAS,GAAGtB,CAAM,4BAA4BqB,EAAW,UACrD,EACAE,CACJ,CAAC,qBAAqBH,EAAQ,QAAQ,UAAW,aAAa,CAAC,MAAMC,EAAW,UAAUE,EAAa,CAAC,CAAC,GAEzGD,EAAS,GAAGtB,CAAM,GAAGC,EAAc,KAAK,IAAI,CAAC,IAAIoB,CAAU,GAExDZ,GAASa,CAAM,CAC1B,EAlCoC,wBAyCvBE,GAA2BzB,EACpCI,GAC6F,CAC7F,IAAMsB,EAAgBtB,EAAYA,EAAY,OAAS,CAAC,EAAE,MAAM,KAAK,EACjEuB,EAAYC,EAAkBC,EAClC,OAAIH,EAAc,OAAS,GACvBC,EAAaD,EAAc,CAAC,EAC5BE,EAAmBF,EAAc,CAAC,EAAE,MAAM,IAAI,EAAE,CAAC,EACjDG,EAAWH,EAAc,CAAC,EAAE,MAAM,IAAI,EAAE,CAAC,GAClCA,EAAc,SAAW,GAChCC,EAAaD,EAAc,CAAC,EAC5BG,EAAWH,EAAc,CAAC,EAAE,MAAM,WAAW,EAAE,CAAC,GAEhDG,EAAWH,EAAc,CAAC,EAEvB,CAAE,WAAAC,EAAY,iBAAAC,EAAkB,SAAAC,CAAS,CACpD,EAhBwC,4BAuBxC,SAASC,GAAiBC,EAAsC,CAC5D,IAAIC,EAAU,gCACd,GAAID,EAAiB,KAAM,CACvB,IAAIE,EACJF,EAAiB,KAAK,QAASG,GAAc,CACpCA,EAAU,SAAS,EAAE,WAAW,GAAG,IACpCD,EAAcA,EAAc,GAAGA,CAAW,IAAIC,EAAU,SAAS,CAAC,GAAKA,EAAU,SAAS,EAElG,CAAC,EACDF,EAAU,KAAKC,CAAW,MAAMD,CAAO,EAC3C,CACA,OAAID,EAAiB,MAAWA,EAAiB,OAAY,YACzDC,EAAU,kBAAkBA,CAAO,IAEhCA,CACX,CAfShC,EAAA8B,GAAA,oBAwBT,IAAMK,GAAmCnC,EAAA,CACrCoC,EACAC,EACAC,EACAC,IACO,CACP,IAAMC,EAAeH,GAAcA,EAAW,WAC9C,GAAIG,EAAaF,CAAY,EAAE,QAC3B,OAEJ,IAAMG,EAAqBD,EAAaF,CAAY,EAChDI,EAAmBD,EACjBE,EAAmBF,EAAmB,KACtCL,EAAO,YAAeK,EAAmB,KAAK,MAAMG,CAAsB,EAAE,CAAC,CAAC,EAC9EH,EACAI,EAAcJ,EAAmB,YAAcA,EAAmB,YAAcE,EAAiB,YACjGX,EAAUF,GAAiBa,CAAgB,EAC7CA,EAAiB,MAAWA,EAAiB,OAAY,YAEzDD,EAAmB,CAAE,KAAM,CAAC,GAAO,EAAI,CAAE,GAEzCH,GAAiBG,EAAiB,MAClCH,EAAc,QAASO,GAAU,CACzBJ,EAAiB,KAAQ,QAAQI,CAAK,IAAM,IAC5CJ,EAAiB,KAAQ,KAAKI,CAAK,CAE3C,CAAC,EAELN,EAAaF,CAAY,EAAI,CACzB,QAASN,EACT,MAAO,CACHU,EACA,CACI,KAAM,QACV,CACJ,CACJ,EACIG,IACAL,EAAaF,CAAY,EAAE,YAAcO,EACzC,OAAOJ,EAAmB,YAElC,EAzCyC,oCA2C5BM,GAAqC/C,EAAA,CAACoC,EAAgBC,EAAoBC,IAA+B,CAClHH,GAAiCC,EAAQC,EAAYC,CAAY,CACrE,EAFkD,sCAIrCU,GAAqChD,EAAA,CAACoC,EAAgBC,EAAoBC,IAA+B,CAClH,IAAMC,EAAgB,OAAO,OAAOzB,EAAY,EAChDqB,GAAiCC,EAAQC,EAAYC,EAAcC,CAAa,CACpF,EAHkD,sCC7NlD,IAAIU,IACH,SAAUA,EAAS,EAGf,SAAUC,EAAS,CAChB,IAAIC,EAAO,OAAO,QAAW,SAAW,OACpC,OAAO,MAAS,SAAW,KACvB,OAAO,MAAS,SAAW,KACvB,SAAS,cAAc,EAAE,EACjCC,EAAWC,EAAaJ,CAAO,EAC/B,OAAOE,EAAK,QAAY,IACxBA,EAAK,QAAUF,EAGfG,EAAWC,EAAaF,EAAK,QAASC,CAAQ,EAElDF,EAAQE,CAAQ,EAChB,SAASC,EAAaC,EAAQC,EAAU,CACpC,OAAO,SAAUC,EAAKC,EAAO,CACrB,OAAOH,EAAOE,CAAG,GAAM,YACvB,OAAO,eAAeF,EAAQE,EAAK,CAAE,aAAc,GAAM,SAAU,GAAM,MAAOC,CAAM,CAAC,EAEvFF,GACAA,EAASC,EAAKC,CAAK,CAC3B,CACJ,CARSC,EAAAL,EAAA,eASb,GAAG,SAAUD,EAAU,CACnB,IAAIO,EAAS,OAAO,UAAU,eAE1BC,EAAiB,OAAO,QAAW,WACnCC,EAAoBD,GAAkB,OAAO,OAAO,YAAgB,IAAc,OAAO,YAAc,gBACvGE,EAAiBF,GAAkB,OAAO,OAAO,SAAa,IAAc,OAAO,SAAW,aAC9FG,EAAiB,OAAO,OAAO,QAAW,WAC1CC,EAAgB,CAAE,UAAW,CAAC,CAAE,YAAa,MAC7CC,EAAY,CAACF,GAAkB,CAACC,EAChCE,EAAU,CAEV,OAAQH,EACF,UAAY,CAAE,OAAOI,GAAe,OAAO,OAAO,IAAI,CAAC,CAAG,EAC1DH,EACI,UAAY,CAAE,OAAOG,GAAe,CAAE,UAAW,IAAK,CAAC,CAAG,EAC1D,UAAY,CAAE,OAAOA,GAAe,CAAC,CAAC,CAAG,EACnD,IAAKF,EACC,SAAUG,EAAKZ,EAAK,CAAE,OAAOG,EAAO,KAAKS,EAAKZ,CAAG,CAAG,EACpD,SAAUY,EAAKZ,EAAK,CAAE,OAAOA,KAAOY,CAAK,EAC/C,IAAKH,EACC,SAAUG,EAAKZ,EAAK,CAAE,OAAOG,EAAO,KAAKS,EAAKZ,CAAG,EAAIY,EAAIZ,CAAG,EAAI,MAAW,EAC3E,SAAUY,EAAKZ,EAAK,CAAE,OAAOY,EAAIZ,CAAG,CAAG,CACjD,EAEIa,EAAoB,OAAO,eAAe,QAAQ,EAClDC,EAAc,OAAO,SAAY,UAAY,QAAQ,KAAO,QAAQ,IAAI,oCAAyC,OACjHC,EAAO,CAACD,GAAe,OAAO,KAAQ,YAAc,OAAO,IAAI,UAAU,SAAY,WAAa,IAAME,GAAkB,EAC1HC,EAAO,CAACH,GAAe,OAAO,KAAQ,YAAc,OAAO,IAAI,UAAU,SAAY,WAAa,IAAMI,GAAkB,EAC1HC,EAAW,CAACL,GAAe,OAAO,SAAY,WAAa,QAAUM,GAAsB,EAG3FC,EAAW,IAAIF,EAwCnB,SAASG,EAASC,EAAYzB,EAAQ0B,EAAaC,EAAY,CAC3D,GAAKC,GAAYF,CAAW,EAYvB,CACD,GAAI,CAACG,GAAQJ,CAAU,EACnB,MAAM,IAAI,UACd,GAAI,CAACK,GAAc9B,CAAM,EACrB,MAAM,IAAI,UACd,OAAO+B,GAAoBN,EAAYzB,CAAM,CACjD,KAlB+B,CAC3B,GAAI,CAAC6B,GAAQJ,CAAU,EACnB,MAAM,IAAI,UACd,GAAI,CAACO,GAAShC,CAAM,EAChB,MAAM,IAAI,UACd,GAAI,CAACgC,GAASL,CAAU,GAAK,CAACC,GAAYD,CAAU,GAAK,CAACM,GAAON,CAAU,EACvE,MAAM,IAAI,UACd,OAAIM,GAAON,CAAU,IACjBA,EAAa,QACjBD,EAAcQ,EAAcR,CAAW,EAChCS,EAAiBV,EAAYzB,EAAQ0B,EAAaC,CAAU,CACvE,CAQJ,CApBSvB,EAAAoB,EAAA,YAqBT1B,EAAS,WAAY0B,CAAQ,EA2C7B,SAASY,EAASC,EAAaC,EAAe,CAC1C,SAASC,EAAUvC,EAAQ0B,GAAa,CACpC,GAAI,CAACM,GAAShC,CAAM,EAChB,MAAM,IAAI,UACd,GAAI,CAAC4B,GAAYF,EAAW,GAAK,CAACc,GAAcd,EAAW,EACvD,MAAM,IAAI,UACde,GAA0BJ,EAAaC,EAAetC,EAAQ0B,EAAW,CAC7E,CANS,OAAAtB,EAAAmC,EAAA,aAOFA,CACX,CATSnC,EAAAgC,EAAA,YAUTtC,EAAS,WAAYsC,CAAQ,EAwC7B,SAASM,EAAeL,EAAaC,EAAetC,EAAQ0B,EAAa,CACrE,GAAI,CAACM,GAAShC,CAAM,EAChB,MAAM,IAAI,UACd,OAAK4B,GAAYF,CAAW,IACxBA,EAAcQ,EAAcR,CAAW,GACpCe,GAA0BJ,EAAaC,EAAetC,EAAQ0B,CAAW,CACpF,CANStB,EAAAsC,EAAA,kBAOT5C,EAAS,iBAAkB4C,CAAc,EAmCzC,SAASC,EAAYN,EAAarC,EAAQ0B,EAAa,CACnD,GAAI,CAACM,GAAShC,CAAM,EAChB,MAAM,IAAI,UACd,OAAK4B,GAAYF,CAAW,IACxBA,EAAcQ,EAAcR,CAAW,GACpCkB,EAAoBP,EAAarC,EAAQ0B,CAAW,CAC/D,CANStB,EAAAuC,EAAA,eAOT7C,EAAS,cAAe6C,CAAW,EAmCnC,SAASE,EAAeR,EAAarC,EAAQ0B,EAAa,CACtD,GAAI,CAACM,GAAShC,CAAM,EAChB,MAAM,IAAI,UACd,OAAK4B,GAAYF,CAAW,IACxBA,EAAcQ,EAAcR,CAAW,GACpCoB,EAAuBT,EAAarC,EAAQ0B,CAAW,CAClE,CANStB,EAAAyC,EAAA,kBAOT/C,EAAS,iBAAkB+C,CAAc,EAmCzC,SAASE,EAAYV,EAAarC,EAAQ0B,EAAa,CACnD,GAAI,CAACM,GAAShC,CAAM,EAChB,MAAM,IAAI,UACd,OAAK4B,GAAYF,CAAW,IACxBA,EAAcQ,EAAcR,CAAW,GACpCsB,GAAoBX,EAAarC,EAAQ0B,CAAW,CAC/D,CANStB,EAAA2C,EAAA,eAOTjD,EAAS,cAAeiD,CAAW,EAmCnC,SAASE,EAAeZ,EAAarC,EAAQ0B,EAAa,CACtD,GAAI,CAACM,GAAShC,CAAM,EAChB,MAAM,IAAI,UACd,OAAK4B,GAAYF,CAAW,IACxBA,EAAcQ,EAAcR,CAAW,GACpCwB,GAAuBb,EAAarC,EAAQ0B,CAAW,CAClE,CANStB,EAAA6C,EAAA,kBAOTnD,EAAS,iBAAkBmD,CAAc,EAkCzC,SAASE,GAAgBnD,EAAQ0B,EAAa,CAC1C,GAAI,CAACM,GAAShC,CAAM,EAChB,MAAM,IAAI,UACd,OAAK4B,GAAYF,CAAW,IACxBA,EAAcQ,EAAcR,CAAW,GACpC0B,GAAqBpD,EAAQ0B,CAAW,CACnD,CANStB,EAAA+C,GAAA,mBAOTrD,EAAS,kBAAmBqD,EAAe,EAkC3C,SAASE,EAAmBrD,EAAQ0B,EAAa,CAC7C,GAAI,CAACM,GAAShC,CAAM,EAChB,MAAM,IAAI,UACd,OAAK4B,GAAYF,CAAW,IACxBA,EAAcQ,EAAcR,CAAW,GACpC4B,GAAwBtD,EAAQ0B,CAAW,CACtD,CANStB,EAAAiD,EAAA,sBAOTvD,EAAS,qBAAsBuD,CAAkB,EAmCjD,SAASE,EAAelB,EAAarC,EAAQ0B,EAAa,CACtD,GAAI,CAACM,GAAShC,CAAM,EAChB,MAAM,IAAI,UACT4B,GAAYF,CAAW,IACxBA,EAAcQ,EAAcR,CAAW,GAC3C,IAAI8B,EAAcC,EAAuBzD,EAAQ0B,EAAwB,EAAK,EAG9E,GAFIE,GAAY4B,CAAW,GAEvB,CAACA,EAAY,OAAOnB,CAAW,EAC/B,MAAO,GACX,GAAImB,EAAY,KAAO,EACnB,MAAO,GACX,IAAIE,GAAiBnC,EAAS,IAAIvB,CAAM,EAExC,OADA0D,GAAe,OAAOhC,CAAW,EAC7BgC,GAAe,KAAO,GAE1BnC,EAAS,OAAOvB,CAAM,EACf,EACX,CAlBSI,EAAAmD,EAAA,kBAmBTzD,EAAS,iBAAkByD,CAAc,EACzC,SAASxB,GAAoBN,EAAYzB,EAAQ,CAC7C,QAAS2D,EAAIlC,EAAW,OAAS,EAAGkC,GAAK,EAAG,EAAEA,EAAG,CAC7C,IAAIpB,EAAYd,EAAWkC,CAAC,EACxBC,GAAYrB,EAAUvC,CAAM,EAChC,GAAI,CAAC4B,GAAYgC,EAAS,GAAK,CAAC3B,GAAO2B,EAAS,EAAG,CAC/C,GAAI,CAAC9B,GAAc8B,EAAS,EACxB,MAAM,IAAI,UACd5D,EAAS4D,EACb,CACJ,CACA,OAAO5D,CACX,CAXSI,EAAA2B,GAAA,uBAYT,SAASI,EAAiBV,EAAYzB,EAAQ0B,EAAamC,EAAY,CACnE,QAASF,GAAIlC,EAAW,OAAS,EAAGkC,IAAK,EAAG,EAAEA,GAAG,CAC7C,IAAIpB,GAAYd,EAAWkC,EAAC,EACxBC,GAAYrB,GAAUvC,EAAQ0B,EAAamC,CAAU,EACzD,GAAI,CAACjC,GAAYgC,EAAS,GAAK,CAAC3B,GAAO2B,EAAS,EAAG,CAC/C,GAAI,CAAC5B,GAAS4B,EAAS,EACnB,MAAM,IAAI,UACdC,EAAaD,EACjB,CACJ,CACA,OAAOC,CACX,CAXSzD,EAAA+B,EAAA,oBAYT,SAASsB,EAAuBK,EAAGC,EAAGC,EAAQ,CAC1C,IAAIN,EAAiBnC,EAAS,IAAIuC,CAAC,EACnC,GAAIlC,GAAY8B,CAAc,EAAG,CAC7B,GAAI,CAACM,EACD,OACJN,EAAiB,IAAIzC,EACrBM,EAAS,IAAIuC,EAAGJ,CAAc,CAClC,CACA,IAAIF,GAAcE,EAAe,IAAIK,CAAC,EACtC,GAAInC,GAAY4B,EAAW,EAAG,CAC1B,GAAI,CAACQ,EACD,OACJR,GAAc,IAAIvC,EAClByC,EAAe,IAAIK,EAAGP,EAAW,CACrC,CACA,OAAOA,EACX,CAhBSpD,EAAAqD,EAAA,0BAmBT,SAASb,EAAoBqB,EAAaH,EAAGC,EAAG,CAC5C,IAAI1D,EAASyC,EAAuBmB,EAAaH,EAAGC,CAAC,EACrD,GAAI1D,EACA,MAAO,GACX,IAAI6D,GAASC,GAAuBL,CAAC,EACrC,OAAK7B,GAAOiC,EAAM,EAEX,GADItB,EAAoBqB,EAAaC,GAAQH,CAAC,CAEzD,CARS3D,EAAAwC,EAAA,uBAWT,SAASE,EAAuBmB,EAAaH,EAAGC,EAAG,CAC/C,IAAIP,EAAcC,EAAuBK,EAAGC,EAAc,EAAK,EAC/D,OAAInC,GAAY4B,CAAW,EAChB,GACJY,EAAUZ,EAAY,IAAIS,CAAW,CAAC,CACjD,CALS7D,EAAA0C,EAAA,0BAQT,SAASE,GAAoBiB,EAAaH,EAAGC,EAAG,CAC5C,IAAI1D,EAASyC,EAAuBmB,EAAaH,EAAGC,CAAC,EACrD,GAAI1D,EACA,OAAO6C,GAAuBe,EAAaH,EAAGC,CAAC,EACnD,IAAIG,GAASC,GAAuBL,CAAC,EACrC,GAAI,CAAC7B,GAAOiC,EAAM,EACd,OAAOlB,GAAoBiB,EAAaC,GAAQH,CAAC,CAEzD,CARS3D,EAAA4C,GAAA,uBAWT,SAASE,GAAuBe,EAAaH,EAAGC,EAAG,CAC/C,IAAIP,EAAcC,EAAuBK,EAAGC,EAAc,EAAK,EAC/D,GAAI,CAAAnC,GAAY4B,CAAW,EAE3B,OAAOA,EAAY,IAAIS,CAAW,CACtC,CALS7D,EAAA8C,GAAA,0BAQT,SAAST,GAA0BwB,EAAaI,EAAeP,EAAGC,EAAG,CACjE,IAAIP,GAAcC,EAAuBK,EAAGC,EAAc,EAAI,EAC9DP,GAAY,IAAIS,EAAaI,CAAa,CAC9C,CAHSjE,EAAAqC,GAAA,6BAMT,SAASW,GAAqBU,EAAGC,EAAG,CAChC,IAAIO,EAAUhB,GAAwBQ,EAAGC,CAAC,EACtCG,EAASC,GAAuBL,CAAC,EACrC,GAAII,IAAW,KACX,OAAOI,EACX,IAAIC,GAAanB,GAAqBc,EAAQH,CAAC,EAC/C,GAAIQ,GAAW,QAAU,EACrB,OAAOD,EACX,GAAIA,EAAQ,QAAU,EAClB,OAAOC,GAGX,QAFIC,GAAM,IAAIrD,EACVsD,GAAO,CAAC,EACHC,GAAK,EAAGC,GAAYL,EAASI,GAAKC,GAAU,OAAQD,KAAM,CAC/D,IAAIxE,GAAMyE,GAAUD,EAAE,EAClBE,GAASJ,GAAI,IAAItE,EAAG,EACnB0E,KACDJ,GAAI,IAAItE,EAAG,EACXuE,GAAK,KAAKvE,EAAG,EAErB,CACA,QAAS2E,GAAK,EAAGC,GAAeP,GAAYM,GAAKC,GAAa,OAAQD,KAAM,CACxE,IAAI3E,GAAM4E,GAAaD,EAAE,EACrBD,GAASJ,GAAI,IAAItE,EAAG,EACnB0E,KACDJ,GAAI,IAAItE,EAAG,EACXuE,GAAK,KAAKvE,EAAG,EAErB,CACA,OAAOuE,EACX,CA7BSrE,EAAAgD,GAAA,wBAgCT,SAASE,GAAwBQ,EAAGC,EAAG,CACnC,IAAIU,EAAO,CAAC,EACRjB,EAAcC,EAAuBK,EAAGC,EAAc,EAAK,EAC/D,GAAInC,GAAY4B,CAAW,EACvB,OAAOiB,EAIX,QAHIM,GAAUvB,EAAY,KAAK,EAC3BwB,GAAWC,GAAYF,EAAO,EAC9BG,GAAI,IACK,CACT,IAAIC,GAAOC,GAAaJ,EAAQ,EAChC,GAAI,CAACG,GACD,OAAAV,EAAK,OAASS,GACPT,EAEX,IAAIY,GAAYC,GAAcH,EAAI,EAClC,GAAI,CACAV,EAAKS,EAAC,EAAIG,EACd,OACOE,GAAG,CACN,GAAI,CACAC,GAAcR,EAAQ,CAC1B,QACA,CACI,MAAMO,EACV,CACJ,CACAL,IACJ,CACJ,CA5BS9E,EAAAkD,GAAA,2BA+BT,SAASmC,GAAKC,EAAG,CACb,GAAIA,IAAM,KACN,MAAO,GACX,OAAQ,OAAOA,EAAG,CACd,IAAK,YAAa,MAAO,GACzB,IAAK,UAAW,MAAO,GACvB,IAAK,SAAU,MAAO,GACtB,IAAK,SAAU,MAAO,GACtB,IAAK,SAAU,MAAO,GACtB,IAAK,SAAU,OAAOA,IAAM,KAAO,EAAe,EAClD,QAAS,MAAO,EACpB,CACJ,CAZStF,EAAAqF,GAAA,QAeT,SAAS7D,GAAY8D,EAAG,CACpB,OAAOA,IAAM,MACjB,CAFStF,EAAAwB,GAAA,eAKT,SAASK,GAAOyD,EAAG,CACf,OAAOA,IAAM,IACjB,CAFStF,EAAA6B,GAAA,UAKT,SAAS0D,GAASD,EAAG,CACjB,OAAO,OAAOA,GAAM,QACxB,CAFStF,EAAAuF,GAAA,YAKT,SAAS3D,GAAS0D,EAAG,CACjB,OAAO,OAAOA,GAAM,SAAWA,IAAM,KAAO,OAAOA,GAAM,UAC7D,CAFStF,EAAA4B,GAAA,YAOT,SAAS4D,GAAYC,EAAOC,EAAe,CACvC,OAAQL,GAAKI,CAAK,EAAG,CACjB,IAAK,GAAmB,OAAOA,EAC/B,IAAK,GAAc,OAAOA,EAC1B,IAAK,GAAiB,OAAOA,EAC7B,IAAK,GAAgB,OAAOA,EAC5B,IAAK,GAAgB,OAAOA,EAC5B,IAAK,GAAgB,OAAOA,CAChC,CACA,IAAIE,EAAOD,IAAkB,EAAiB,SAAWA,IAAkB,EAAiB,SAAW,UACnGE,EAAeC,GAAUJ,EAAOtF,CAAiB,EACrD,GAAIyF,IAAiB,OAAW,CAC5B,IAAIE,GAASF,EAAa,KAAKH,EAAOE,CAAI,EAC1C,GAAI/D,GAASkE,EAAM,EACf,MAAM,IAAI,UACd,OAAOA,EACX,CACA,OAAOC,EAAoBN,EAAOE,IAAS,UAAY,SAAWA,CAAI,CAC1E,CAlBS3F,EAAAwF,GAAA,eAqBT,SAASO,EAAoBrC,EAAGiC,EAAM,CAClC,GAAIA,IAAS,SAAU,CACnB,IAAIK,EAAatC,EAAE,SACnB,GAAIuC,GAAWD,CAAU,EAAG,CACxB,IAAIF,EAASE,EAAW,KAAKtC,CAAC,EAC9B,GAAI,CAAC9B,GAASkE,CAAM,EAChB,OAAOA,CACf,CACA,IAAII,GAAUxC,EAAE,QAChB,GAAIuC,GAAWC,EAAO,EAAG,CACrB,IAAIJ,EAASI,GAAQ,KAAKxC,CAAC,EAC3B,GAAI,CAAC9B,GAASkE,CAAM,EAChB,OAAOA,CACf,CACJ,KACK,CACD,IAAII,GAAUxC,EAAE,QAChB,GAAIuC,GAAWC,EAAO,EAAG,CACrB,IAAIJ,EAASI,GAAQ,KAAKxC,CAAC,EAC3B,GAAI,CAAC9B,GAASkE,CAAM,EAChB,OAAOA,CACf,CACA,IAAIK,GAAazC,EAAE,SACnB,GAAIuC,GAAWE,EAAU,EAAG,CACxB,IAAIL,EAASK,GAAW,KAAKzC,CAAC,EAC9B,GAAI,CAAC9B,GAASkE,CAAM,EAChB,OAAOA,CACf,CACJ,CACA,MAAM,IAAI,SACd,CA9BS9F,EAAA+F,EAAA,uBAiCT,SAAS/B,EAAUoC,EAAU,CACzB,MAAO,CAAC,CAACA,CACb,CAFSpG,EAAAgE,EAAA,aAKT,SAASqC,EAASD,EAAU,CACxB,MAAO,GAAKA,CAChB,CAFSpG,EAAAqG,EAAA,YAKT,SAASvE,EAAcsE,EAAU,CAC7B,IAAItG,EAAM0F,GAAYY,EAAU,CAAc,EAC9C,OAAIb,GAASzF,CAAG,EACLA,EACJuG,EAASvG,CAAG,CACvB,CALSE,EAAA8B,EAAA,iBAUT,SAASL,GAAQ2E,EAAU,CACvB,OAAO,MAAM,QACP,MAAM,QAAQA,CAAQ,EACtBA,aAAoB,OAChBA,aAAoB,MACpB,OAAO,UAAU,SAAS,KAAKA,CAAQ,IAAM,gBAC3D,CANSpG,EAAAyB,GAAA,WAST,SAASwE,GAAWG,EAAU,CAE1B,OAAO,OAAOA,GAAa,UAC/B,CAHSpG,EAAAiG,GAAA,cAMT,SAASvE,GAAc0E,EAAU,CAE7B,OAAO,OAAOA,GAAa,UAC/B,CAHSpG,EAAA0B,GAAA,iBAMT,SAASU,GAAcgE,EAAU,CAC7B,OAAQf,GAAKe,CAAQ,EAAG,CACpB,IAAK,GAAgB,MAAO,GAC5B,IAAK,GAAgB,MAAO,GAC5B,QAAS,MAAO,EACpB,CACJ,CANSpG,EAAAoC,GAAA,iBAWT,SAASyD,GAAUS,EAAG3C,EAAG,CACrB,IAAI4C,EAAOD,EAAE3C,CAAC,EACd,GAA0B4C,GAAS,KAEnC,IAAI,CAACN,GAAWM,CAAI,EAChB,MAAM,IAAI,UACd,OAAOA,EACX,CAPSvG,EAAA6F,GAAA,aAUT,SAAShB,GAAY2B,EAAK,CACtB,IAAIC,EAASZ,GAAUW,EAAKpG,CAAc,EAC1C,GAAI,CAAC6F,GAAWQ,CAAM,EAClB,MAAM,IAAI,UACd,IAAI7B,EAAW6B,EAAO,KAAKD,CAAG,EAC9B,GAAI,CAAC5E,GAASgD,CAAQ,EAClB,MAAM,IAAI,UACd,OAAOA,CACX,CARS5E,EAAA6E,GAAA,eAWT,SAASK,GAAcwB,EAAY,CAC/B,OAAOA,EAAW,KACtB,CAFS1G,EAAAkF,GAAA,iBAKT,SAASF,GAAaJ,EAAU,CAC5B,IAAIkB,EAASlB,EAAS,KAAK,EAC3B,OAAOkB,EAAO,KAAO,GAAQA,CACjC,CAHS9F,EAAAgF,GAAA,gBAMT,SAASI,GAAcR,EAAU,CAC7B,IAAI+B,EAAI/B,EAAS,OACb+B,GACAA,EAAE,KAAK/B,CAAQ,CACvB,CAJS5E,EAAAoF,GAAA,iBAST,SAASrB,GAAuBL,EAAG,CAC/B,IAAIkD,EAAQ,OAAO,eAAelD,CAAC,EAUnC,GATI,OAAOA,GAAM,YAAcA,IAAM/C,GASjCiG,IAAUjG,EACV,OAAOiG,EAEX,IAAIC,EAAYnD,EAAE,UACdoD,EAAiBD,GAAa,OAAO,eAAeA,CAAS,EACjE,GAAIC,GAAkB,MAAQA,IAAmB,OAAO,UACpD,OAAOF,EAEX,IAAIG,GAAcD,EAAe,YAIjC,OAHI,OAAOC,IAAgB,YAGvBA,KAAgBrD,EACTkD,EAEJG,EACX,CA3BS/G,EAAA+D,GAAA,0BA6BT,SAASjD,IAAoB,CACzB,IAAIkG,EAAgB,CAAC,EACjBC,EAAgB,CAAC,EACjBC,EAA6B,UAAY,CACzC,SAASA,GAAY7C,GAAM8C,GAAQC,GAAU,CACzC,KAAK,OAAS,EACd,KAAK,MAAQ/C,GACb,KAAK,QAAU8C,GACf,KAAK,UAAYC,EACrB,CALS,OAAApH,EAAAkH,GAAA,eAMTA,GAAY,UAAU,YAAY,EAAI,UAAY,CAAE,OAAO,IAAM,EACjEA,GAAY,UAAU9G,CAAc,EAAI,UAAY,CAAE,OAAO,IAAM,EACnE8G,GAAY,UAAU,KAAO,UAAY,CACrC,IAAIG,GAAQ,KAAK,OACjB,GAAIA,IAAS,GAAKA,GAAQ,KAAK,MAAM,OAAQ,CACzC,IAAIvB,GAAS,KAAK,UAAU,KAAK,MAAMuB,EAAK,EAAG,KAAK,QAAQA,EAAK,CAAC,EAClE,OAAIA,GAAQ,GAAK,KAAK,MAAM,QACxB,KAAK,OAAS,GACd,KAAK,MAAQJ,EACb,KAAK,QAAUA,GAGf,KAAK,SAEF,CAAE,MAAOnB,GAAQ,KAAM,EAAM,CACxC,CACA,MAAO,CAAE,MAAO,OAAW,KAAM,EAAK,CAC1C,EACAoB,GAAY,UAAU,MAAQ,SAAUI,GAAO,CAC3C,MAAI,KAAK,QAAU,IACf,KAAK,OAAS,GACd,KAAK,MAAQL,EACb,KAAK,QAAUA,GAEbK,EACV,EACAJ,GAAY,UAAU,OAAS,SAAUnH,GAAO,CAC5C,OAAI,KAAK,QAAU,IACf,KAAK,OAAS,GACd,KAAK,MAAQkH,EACb,KAAK,QAAUA,GAEZ,CAAE,MAAOlH,GAAO,KAAM,EAAK,CACtC,EACOmH,EACX,EAAE,EACF,OAAsB,UAAY,CAC9B,SAASK,IAAM,CACX,KAAK,MAAQ,CAAC,EACd,KAAK,QAAU,CAAC,EAChB,KAAK,UAAYP,EACjB,KAAK,YAAc,EACvB,CALS,OAAAhH,EAAAuH,GAAA,OAMT,OAAO,eAAeA,GAAI,UAAW,OAAQ,CACzC,IAAK,UAAY,CAAE,OAAO,KAAK,MAAM,MAAQ,EAC7C,WAAY,GACZ,aAAc,EAClB,CAAC,EACDA,GAAI,UAAU,IAAM,SAAUzH,GAAK,CAAE,OAAO,KAAK,MAAMA,GAAgB,EAAK,GAAK,CAAG,EACpFyH,GAAI,UAAU,IAAM,SAAUzH,GAAK,CAC/B,IAAIuH,GAAQ,KAAK,MAAMvH,GAAgB,EAAK,EAC5C,OAAOuH,IAAS,EAAI,KAAK,QAAQA,EAAK,EAAI,MAC9C,EACAE,GAAI,UAAU,IAAM,SAAUzH,GAAKC,GAAO,CACtC,IAAIsH,GAAQ,KAAK,MAAMvH,GAAgB,EAAI,EAC3C,YAAK,QAAQuH,EAAK,EAAItH,GACf,IACX,EACAwH,GAAI,UAAU,OAAS,SAAUzH,GAAK,CAClC,IAAIuH,GAAQ,KAAK,MAAMvH,GAAgB,EAAK,EAC5C,GAAIuH,IAAS,EAAG,CAEZ,QADIG,GAAO,KAAK,MAAM,OACbjE,GAAI8D,GAAQ,EAAG9D,GAAIiE,GAAMjE,KAC9B,KAAK,MAAMA,GAAI,CAAC,EAAI,KAAK,MAAMA,EAAC,EAChC,KAAK,QAAQA,GAAI,CAAC,EAAI,KAAK,QAAQA,EAAC,EAExC,YAAK,MAAM,SACX,KAAK,QAAQ,SACTzD,KAAQ,KAAK,YACb,KAAK,UAAYkH,EACjB,KAAK,YAAc,IAEhB,EACX,CACA,MAAO,EACX,EACAO,GAAI,UAAU,MAAQ,UAAY,CAC9B,KAAK,MAAM,OAAS,EACpB,KAAK,QAAQ,OAAS,EACtB,KAAK,UAAYP,EACjB,KAAK,YAAc,EACvB,EACAO,GAAI,UAAU,KAAO,UAAY,CAAE,OAAO,IAAIL,EAAY,KAAK,MAAO,KAAK,QAASO,CAAM,CAAG,EAC7FF,GAAI,UAAU,OAAS,UAAY,CAAE,OAAO,IAAIL,EAAY,KAAK,MAAO,KAAK,QAASQ,EAAQ,CAAG,EACjGH,GAAI,UAAU,QAAU,UAAY,CAAE,OAAO,IAAIL,EAAY,KAAK,MAAO,KAAK,QAASS,EAAQ,CAAG,EAClGJ,GAAI,UAAU,YAAY,EAAI,UAAY,CAAE,OAAO,KAAK,QAAQ,CAAG,EACnEA,GAAI,UAAUnH,CAAc,EAAI,UAAY,CAAE,OAAO,KAAK,QAAQ,CAAG,EACrEmH,GAAI,UAAU,MAAQ,SAAUzH,GAAK8H,GAAQ,CACzC,OAAI,KAAK,YAAc9H,KACnB,KAAK,YAAc,KAAK,MAAM,QAAQ,KAAK,UAAYA,EAAG,GAE1D,KAAK,YAAc,GAAK8H,KACxB,KAAK,YAAc,KAAK,MAAM,OAC9B,KAAK,MAAM,KAAK9H,EAAG,EACnB,KAAK,QAAQ,KAAK,MAAS,GAExB,KAAK,WAChB,EACOyH,EACX,EAAE,EACF,SAASE,EAAO3H,GAAK+H,GAAG,CACpB,OAAO/H,EACX,CACA,SAAS4H,GAASG,GAAG9H,GAAO,CACxB,OAAOA,EACX,CACA,SAAS4H,GAAS7H,GAAKC,GAAO,CAC1B,MAAO,CAACD,GAAKC,EAAK,CACtB,CACJ,CAvHSC,EAAAc,GAAA,qBAyHT,SAASE,IAAoB,CACzB,OAAsB,UAAY,CAC9B,SAAS8G,GAAM,CACX,KAAK,KAAO,IAAIjH,CACpB,CAFS,OAAAb,EAAA8H,EAAA,OAGT,OAAO,eAAeA,EAAI,UAAW,OAAQ,CACzC,IAAK,UAAY,CAAE,OAAO,KAAK,KAAK,IAAM,EAC1C,WAAY,GACZ,aAAc,EAClB,CAAC,EACDA,EAAI,UAAU,IAAM,SAAU/H,EAAO,CAAE,OAAO,KAAK,KAAK,IAAIA,CAAK,CAAG,EACpE+H,EAAI,UAAU,IAAM,SAAU/H,EAAO,CAAE,OAAO,KAAK,KAAK,IAAIA,EAAOA,CAAK,EAAG,IAAM,EACjF+H,EAAI,UAAU,OAAS,SAAU/H,EAAO,CAAE,OAAO,KAAK,KAAK,OAAOA,CAAK,CAAG,EAC1E+H,EAAI,UAAU,MAAQ,UAAY,CAAE,KAAK,KAAK,MAAM,CAAG,EACvDA,EAAI,UAAU,KAAO,UAAY,CAAE,OAAO,KAAK,KAAK,KAAK,CAAG,EAC5DA,EAAI,UAAU,OAAS,UAAY,CAAE,OAAO,KAAK,KAAK,OAAO,CAAG,EAChEA,EAAI,UAAU,QAAU,UAAY,CAAE,OAAO,KAAK,KAAK,QAAQ,CAAG,EAClEA,EAAI,UAAU,YAAY,EAAI,UAAY,CAAE,OAAO,KAAK,KAAK,CAAG,EAChEA,EAAI,UAAU1H,CAAc,EAAI,UAAY,CAAE,OAAO,KAAK,KAAK,CAAG,EAC3D0H,CACX,EAAE,CACN,CArBS9H,EAAAgB,GAAA,qBAuBT,SAASE,IAAwB,CAC7B,IAAI6G,EAAY,GACZ1D,EAAO7D,EAAQ,OAAO,EACtBwH,EAAUC,EAAgB,EAC9B,OAAsB,UAAY,CAC9B,SAASC,IAAU,CACf,KAAK,KAAOD,EAAgB,CAChC,CAFS,OAAAjI,EAAAkI,GAAA,WAGTA,GAAQ,UAAU,IAAM,SAAUtI,GAAQ,CACtC,IAAIuI,GAAQC,GAAwBxI,GAAmB,EAAK,EAC5D,OAAOuI,KAAU,OAAY3H,EAAQ,IAAI2H,GAAO,KAAK,IAAI,EAAI,EACjE,EACAD,GAAQ,UAAU,IAAM,SAAUtI,GAAQ,CACtC,IAAIuI,GAAQC,GAAwBxI,GAAmB,EAAK,EAC5D,OAAOuI,KAAU,OAAY3H,EAAQ,IAAI2H,GAAO,KAAK,IAAI,EAAI,MACjE,EACAD,GAAQ,UAAU,IAAM,SAAUtI,GAAQG,GAAO,CAC7C,IAAIoI,GAAQC,GAAwBxI,GAAmB,EAAI,EAC3D,OAAAuI,GAAM,KAAK,IAAI,EAAIpI,GACZ,IACX,EACAmI,GAAQ,UAAU,OAAS,SAAUtI,GAAQ,CACzC,IAAIuI,GAAQC,GAAwBxI,GAAmB,EAAK,EAC5D,OAAOuI,KAAU,OAAY,OAAOA,GAAM,KAAK,IAAI,EAAI,EAC3D,EACAD,GAAQ,UAAU,MAAQ,UAAY,CAElC,KAAK,KAAOD,EAAgB,CAChC,EACOC,EACX,EAAE,EACF,SAASD,GAAkB,CACvB,IAAInI,GACJ,GACIA,GAAM,cAAgBuI,GAAW,QAC9B7H,EAAQ,IAAI6D,EAAMvE,EAAG,GAC5B,OAAAuE,EAAKvE,EAAG,EAAI,GACLA,EACX,CACA,SAASsI,GAAwBxI,GAAQ0I,GAAQ,CAC7C,GAAI,CAACrI,EAAO,KAAKL,GAAQoI,CAAO,EAAG,CAC/B,GAAI,CAACM,GACD,OACJ,OAAO,eAAe1I,GAAQoI,EAAS,CAAE,MAAOxH,EAAQ,OAAO,CAAE,CAAC,CACtE,CACA,OAAOZ,GAAOoI,CAAO,CACzB,CACA,SAASO,GAAgBC,GAAQhB,GAAM,CACnC,QAASjE,GAAI,EAAGA,GAAIiE,GAAM,EAAEjE,GACxBiF,GAAOjF,EAAC,EAAI,KAAK,OAAO,EAAI,IAAO,EACvC,OAAOiF,EACX,CACA,SAASC,GAAejB,GAAM,CAC1B,OAAI,OAAO,YAAe,WAClB,OAAO,OAAW,IACX,OAAO,gBAAgB,IAAI,WAAWA,EAAI,CAAC,EAClD,OAAO,SAAa,IACb,SAAS,gBAAgB,IAAI,WAAWA,EAAI,CAAC,EACjDe,GAAgB,IAAI,WAAWf,EAAI,EAAGA,EAAI,EAE9Ce,GAAgB,IAAI,MAAMf,EAAI,EAAGA,EAAI,CAChD,CACA,SAASa,IAAa,CAClB,IAAIK,GAAOD,GAAeV,CAAS,EAEnCW,GAAK,CAAC,EAAIA,GAAK,CAAC,EAAI,GAAO,GAC3BA,GAAK,CAAC,EAAIA,GAAK,CAAC,EAAI,IAAO,IAE3B,QADI5C,GAAS,GACJ6C,GAAS,EAAGA,GAASZ,EAAW,EAAEY,GAAQ,CAC/C,IAAIC,GAAOF,GAAKC,EAAM,GAClBA,KAAW,GAAKA,KAAW,GAAKA,KAAW,KAC3C7C,IAAU,KACV8C,GAAO,KACP9C,IAAU,KACdA,IAAU8C,GAAK,SAAS,EAAE,EAAE,YAAY,CAC5C,CACA,OAAO9C,EACX,CACJ,CA9ES9F,EAAAkB,GAAA,yBAgFT,SAAST,GAAe+F,EAAK,CACzB,OAAAA,EAAI,GAAK,OACT,OAAOA,EAAI,GACJA,CACX,CAJSxG,EAAAS,GAAA,iBAKb,CAAC,CACL,GAAGlB,KAAYA,GAAU,CAAC,EAAE,ECvmCrB,IAAMsJ,GAAqB,OAAO,0BAA0B,EACtDC,EAAWC,EAACC,GACd,QAAQ,SAASH,GAAoBG,CAAQ,EADhC,YAIjB,SAASC,GAAmBC,EAAgBC,EAA4C,CAC3F,IAAIC,EACJ,OAAIF,IACAE,EAAO,QAAQ,YAAYP,GAAoBK,EAAQC,CAAY,GAEhEC,CACX,CANgBL,EAAAE,GAAA,sBAQT,IAAMI,GACTN,EAACO,GACAC,GAAgC,CAC7BA,EAAY,UAAU,sBAAwBD,CAClD,EAHA,yBAKEE,GAAa,OAAO,SAAS,EACtBC,GAAUV,EAACW,GACb,QAAQ,SAASF,GAAYE,CAAE,EADnB,WAIVC,GAAaZ,EAAA,CAACG,EAAaC,IAC7B,QAAQ,YAAYK,GAAYN,EAAQC,CAAY,EADrC,cAIbS,GAA2Bb,EAACG,GAC9B,OAAO,eAAeA,CAAM,EAAE,sBADD,4BAQ3BW,GAAsB,OAAO,qBAAqB,EAClDC,EAAWf,EAACC,GACd,QAAQ,SAASa,GAAqBb,CAAQ,EADjC,YAIjB,SAASe,GAAqBC,EAAaC,EAAmD,CACjG,IAAIC,EAAO,GAAGF,CAAG,iBACjB,OAAIC,GAAuBA,EAAoB,aAC3CC,EAAOD,EAAoB,WAAW,MAAQ,GAAGC,CAAI,UAAUD,EAAoB,WAAW,KAAK,GAAKC,EACxGA,EAAOD,EAAoB,WAAW,KAAO,GAAGC,CAAI,KAAKD,EAAoB,WAAW,IAAI,GAAKC,GAG9FA,CACX,CARgBnB,EAAAgB,GAAA,wBCrChB,IAAAI,GAA2B,SAC3BC,GAAgC,SAEhC,IAAMC,GAAyB,WAAQ,OAEjCC,GAAgB,CAClB,WAAY,GACZ,cAAe,IACf,aAAc,gBACd,KAAM,gBACV,EAOO,SAASC,GAAmBC,EAAoCC,EAA4B,CAC/F,IAAIC,EAAe,GACnB,GAAI,CACA,QAAWC,KAAgBL,GACnBE,EAAOG,CAAY,IAAM,SACzBH,EAAOG,CAAY,EAAIL,GAAcK,CAAY,GAGzDD,EAAeL,GAAa,mBAAmBG,EAAQC,CAAQ,CACnE,OAASG,EAAO,CACZ,QAAQ,MAAM,kCAAmCA,CAAK,CAC1D,CACA,OAAOF,CACX,CAbgBG,EAAAN,GAAA,sBAmBT,SAASO,GAAkBJ,EAAkD,CAChF,GAAI,CACA,OAAOL,GAAa,MAAMK,CAAY,CAC1C,MAAgB,CACZ,MAAO,EACX,CACJ,CANgBG,EAAAC,GAAA,qBAqBT,SAASC,GACZC,EACAC,EACAC,EACAC,EACAC,EAC0B,CAC1B,IAAMC,EAAaH,EAAW,MAAQA,EAAW,QAAU,mBAAgB,SAAW,GAEhFI,EAAyC,CAC3C,UAAAF,EACA,YAAaH,EAAS,KAAK,YAAY,EACvC,QAAS,CACL,SAAUE,CACd,EACA,cAAeD,EAAW,WAC1B,WAAAG,CACJ,EACA,OAAIL,EAAaG,CAAG,IAAM,OAClBF,EAAS,KAAK,gBACdA,EAAS,KAAK,gBAAgBK,EAAYN,EAAcG,CAAG,EACpDH,EAAaG,CAAG,EAAE,SAAS,EAAE,WAAW,GAAG,GAClDG,EAAW,QAAQ,WAAaN,EAAaG,CAAG,EAChDG,EAAW,KAAO,yBAElBA,EAAW,QAAQ,SAAWN,EAAaG,CAAG,EAGlDG,EAAW,QAAQ,SAAW,KAE3BA,CACX,CA/BgBT,EAAAE,GAAA,yBC7DT,SAASQ,GAAmBC,EAAoCC,EAA4B,CAC/F,OAAOC,GAAmBF,EAAQC,CAAQ,CAC9C,CAFgBE,EAAAJ,GAAA,sBCChB,IAAAK,GAA8D,SAWvD,SAASC,GACZC,EACAC,EACAC,EACAC,EACAC,EACAC,EACI,CACJ,IAAMC,EAAcN,EAAS,SAAS,KAAOE,EACvCK,EAAgBP,EAAS,SAAS,OACxC,GAAIO,GAAiB,OAAOA,GAAkB,WAAY,CACtD,IAAMC,EAAQD,EAAcN,EAAiBG,EAAWF,EAAaG,CAAW,EAC5EG,IAAU,SACVL,EAAWD,CAAW,EAAIM,EAElC,MAAWP,EAAgBK,CAAW,IAAM,SACxCH,EAAWD,CAAW,EAAID,EAAgBK,CAAW,EAE7D,CAlBgBG,EAAAV,GAAA,kBA4BT,SAASW,GACZC,EACAV,EACAW,EACAC,EACI,CACJ,GAAIZ,GAAmBU,EACnB,QAAWG,KAAOb,EAAiB,CAC/B,IAAMc,EAAaJ,EAAqBG,CAAG,EACvCC,IACAC,GAAIH,EAAQ,CACR,SAAU,eAAY,QACtB,QAASI,GAAqBH,EAAKC,CAAU,EAC7C,SAAU,CACN,KAAM,wBACN,MAAOH,EAAK,MAAM,GAAG,CACzB,CACJ,CAAC,EACD,OAAOD,EAAqBG,CAAG,EAEvC,CAER,CAtBgBL,EAAAC,GAAA,6BA6BT,SAASQ,GAAgBC,EAA2BC,EAA4C,CACnG,GAAID,EAAc,MAAQ,CAACA,EAAc,MAAO,CAC5C,IAAME,EAAWD,EAAW,YAAYD,EAAc,KAAK,MAAMG,CAAsB,EAAE,CAAC,CAAC,EAC3F,OAAOJ,GAAgBG,EAAUD,CAAU,CAC/C,KAAO,QAAID,EAAc,MACjBA,EAAc,MAAM,WAAW,mBAAgB,EACxCA,EAAc,MAAM,MAAM,mBAAgB,EAAE,CAAC,EAAE,QAAQ,WAAY,UAAU,EAE7EA,EAAc,MAAM,QAAQ,WAAY,UAAU,EAG7D,MAER,CAbgBV,EAAAS,GAAA,mBAqBT,SAASK,GAA6BC,EAAiC,CAC1E,IAAMC,EAAWD,EAAI,MAAM,GAAG,kBAAe,aAAa,GAAG,EAC7D,GAAIC,EAAS,CAAC,EACV,OAAOA,EAAS,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,CAGvC,CANgBhB,EAAAc,GAAA,gCAaT,SAASG,GAAqBC,EAAgBC,EAAyB,CACrED,EAAOC,CAAS,GAGjB,OAAO,KAAKD,EAAOC,CAAS,CAAC,EAAE,OAAS,GACxC,OAAOD,EAAOC,CAAS,CAE/B,CAPgBnB,EAAAiB,GAAA,wBCxGhB,IAAAG,GAAqD,sDCFrD,IAAAC,GAAkC,sDAO3B,SAASC,GAAoBC,EAAqB,CACrD,GAAI,OAAOA,GAAQ,SASnB,KANAA,EAAMA,EACD,QAAQ,gBAAiB,EAAE,EAC3B,QAAQ,gBAAiB,EAAE,EAC3B,QAAQ,YAAa,IAAI,EAGvBA,EAAI,QAAQ,MAAM,EAAI,IACzBA,EAAMA,EAAI,QAAQ,OAAQ,IAAI,EAIlC,OAAIA,EAAI,MAAM,EAAE,IAAM,OAClBA,EAAMA,EAAI,MAAM,EAAG,EAAE,GAGlBA,EACX,CApBgBC,EAAAF,GAAA,uBAsBT,IAAMG,GAAYD,EAAA,SAAUD,EAAqB,CACpD,OAAOD,GAAoBI,GAAiBH,CAAG,CAAC,CACpD,EAFyB,aAIzB,SAASI,GAAeC,EAAa,CACjC,IAAIC,EAAc,GAClB,QAAWC,KAAcF,EAAO,MAAM,KAC9BE,EAAW,QACPD,IACAA,GAAe,MAEnBA,GAAeC,EAAW,OAGlC,OAAOD,CACX,CAXSL,EAAAG,GAAA,kBAaF,SAASI,GAAyBH,EAAiC,CA9C1E,IAAAI,EA+CI,GAAIJ,GAAA,MAAAA,EAAQ,OAASA,GAAA,MAAAA,EAAQ,KACzB,OAAOA,EAAO,OAASA,EAAO,KAGlC,KAAII,EAAAJ,GAAA,YAAAA,EAAQ,QAAR,YAAAI,EAAe,YAAY,YAAa,eACxC,OAAOL,GAAeC,CAAM,EAGhC,GAAIA,GACI,OAAOA,GAAW,SAClB,OAAON,GAAoBM,EAAO,QAAQ,KAAM,GAAG,CAAC,CAGhE,CAdgBJ,EAAAO,GAAA,4BAgBT,IAAME,GAA6CT,EAAA,SAAUU,EAAyB,CACzF,IAAIC,EAAU,GACd,OAAI,OAAOD,EAAW,gBAAmB,SACrCC,GAAWD,EAAW,eACfA,EAAW,eAAe,QACjCC,GAAWD,EAAW,eAAe,OAErC,OAAOA,EAAW,QAAW,SAC7BC,GAAW,KAAOD,EAAW,OACtBA,EAAW,QAAUA,EAAW,OAAO,QAC9CC,GAAW,KAAOD,EAAW,OAAO,OAEpCA,EAAW,kBACXC,GAAW,qBAERA,CACX,EAhB0D,8CAkB7CC,GAA+BZ,EAAA,SAAUU,EAAqC,CACvF,IAAIC,EAAU,GAEd,GAAID,EAAW,OAASA,EAAW,QAAU,qBAAkB,mBAC3D,OAAAC,EAAU,uBACVA,GAAWD,EAAW,OACfT,GAAUU,CAAO,EACrB,GAAID,EAAW,OAASA,EAAW,QAAU,qBAAkB,kCAClE,OAAAC,EAAU,sCACVA,GAAWF,GAA2CC,CAAU,EACzDC,EACJ,GAAID,EAAW,OAASA,EAAW,QAAU,qBAAkB,uBAClE,OAAAC,EAAU,2BACVA,GAAWV,GAAUS,EAAW,OAAO,iBAAmBA,EAAW,OAAO,KAAK,EAC1EC,EACJ,GAAID,EAAW,OAASA,EAAW,QAAU,qBAAkB,oBAClE,OAAAC,EAAU,wBACND,EAAW,QACXC,GAAWJ,GAAyBG,EAAW,KAAK,EAAI,MAE5DC,GAAWD,EAAW,OACfT,GAAUU,CAAO,EACrB,GAAID,EAAW,OAASA,EAAW,QAAU,qBAAkB,UAClE,OAAAC,EAAU,cACVA,GAAWJ,GAAyBG,EAAW,KAAK,EAC7CT,GAAUU,CAAO,EACrB,GAAID,EAAW,OAASA,EAAW,QAAU,qBAAkB,mCAClE,OAAAC,EAAU,uCACVA,GAAWJ,GAAyBG,EAAW,KAAK,EAAI,KACxDC,GAAWF,GAA2CC,CAAU,EACzDT,GAAUU,CAAO,EACrB,GAAID,EAAW,OAASA,EAAW,QAAU,qBAAkB,4BAClE,OAAAC,EAAU,gCACVA,GAAWJ,GAAyBG,EAAW,KAAK,EAChDA,EAAW,QAAUA,EAAW,OAAO,0BACvCC,GAAW,KAAOD,EAAW,OAAO,yBAEjCT,GAAUU,CAAO,EACrB,GAAID,EAAW,OAASA,EAAW,QAAU,qBAAkB,iBAClE,OAAAC,EAAU,qBACVA,GAAWJ,GAAyBG,EAAW,KAAK,EAC7CT,GAAUU,CAAO,CAMhC,EA/C4C,gCD3E5C,IAAAE,EAUO,SEZP,IAAAC,GAAmF,SAmBnF,IAAAC,GAAqD,sDACrDC,GAAoB,gBACpBC,GAAyB,SCElB,IAAMC,GAAmB,4CACnBC,GAAoB,6CACpBC,GAAY,uBACZC,GAAkB,6BAClBC,GAAY,uBAEZC,GAAmC,aACnCC,GAAmC,iCDAhD,SAASC,GACLC,EACAC,EACAC,EACI,CACAF,EAAU,YAAY,kBAAe,SAAS,IAC7CA,EAAU,YAAY,kBAAe,SAAS,EAAiB,WAAW,OAAY,CACnF,KAAM,GAAGG,CAAsB,GAAGF,CAA2B,EACjE,GAEJD,EAAU,YAAYC,CAA2B,EAAI,CACjD,KAAM,QACN,MAAO,CACH,KAAM,GAAGE,CAAsB,GAAGD,CAA0B,EAChE,EACA,YAAa,gBACjB,EACAF,EAAU,YAAYC,CAA2B,EAAE,aAAU,UAAU,EAAI,GAC3E,IAAMG,EAAiBJ,EAAU,YAAYE,CAA0B,EAAiB,WAAW,cAC/FE,IACAA,EAAc,aAAU,YAAY,EAAI,gBAAa,SAE7D,CAtBSC,EAAAN,GAAA,6BA8BT,SAASO,GACLC,EACAC,EACM,CACN,IAAIC,EAeJ,OAdIF,mCACAE,EAAWC,GAA6BF,EAAmB,cAAc,EAClED,gCAAkDA,8BACzDE,EAAWE,GACP,GAAGH,EAAmB,eAAe,cAAc,KAAKA,EAAmB,eAAe,MAAM,EACpG,EAEAD,yBACAC,EAAmB,eAAe,QAAU,qBAAkB,mBAE9DC,EAAWE,GAAW,iCAAiCH,EAAmB,eAAe,MAAM,EAAE,EAEjGC,EAAWE,GAAWH,EAAmB,eAAe,MAAM,EAE9DA,EAAmB,YAAcA,EAAmB,aAAe,YAC5D,GAAGA,EAAmB,UAAU,KAAKC,CAAQ,GAE7CA,CAEf,CAxBSJ,EAAAC,GAAA,eAmCF,SAASM,GACZZ,EACAa,EACAC,EACAP,EACAQ,EACI,CACJ,IAAIC,EACEC,EAAiBH,EAAc,aAAe,kBAAe,UAAY,GAAK,aAC9EL,EAAWH,GAAYC,EAAYO,CAAa,EAElDP,oBAAsCA,+BACtCS,EAAsB,SACtBT,kBACOA,yBAAsCA,mCAC7CS,EAAsB,qBAEtBA,EAAsBC,IAAmB,GAAK,GAAGA,CAAc,GAAGV,CAAU,GAAK,SACjFA,mBAEJ,IAAMW,EAAmB,GAAGD,CAAc,GAAGV,CAAU,IAAIE,CAAQ,IAC7DU,EAAcC,GAChBN,EAAc,eACdA,EAAc,UAClB,EACAD,EAAQ,WAAWJ,CAAQ,EAAI,CAC3B,KAAMN,EAAyBe,CACnC,EACAL,EAAQ,WAAWJ,CAAQ,EAAE,aAAU,aAAa,EAAIM,EACxD,GAAM,CAAE,IAAAM,EAAK,GAAAC,CAAG,EAAIC,GAAaT,EAAc,eAAe,OAAQ,EAAI,EACtEd,EAAU,YAAYgB,CAAmB,GACzChB,EAAU,YAAYkB,CAAgB,EAAI,CACtC,GAAG,KAAK,MAAM,KAAK,UAAUlB,EAAU,YAAYgB,CAAmB,CAAC,CAAC,EACxE,YAAAG,EACA,KAAM,CAAC,CAAE,KAAM,SAAU,MAAOE,CAAI,CAAC,EACrC,eAAgB,GAAGP,EAAc,YAAY,IAAIC,CAAW,EAChE,EACIO,IACAtB,EAAU,YAAYkB,CAAgB,EAAE,aAAU,MAAM,EAAII,KAGhEtB,EAAU,YAAYkB,CAAgB,EAAI,CACtC,KAAM,SACN,WAAY,CAAC,EACb,YAAAC,EACA,qBAAsB,EAC1B,EACAnB,EAAU,YAAYkB,CAAgB,EAAE,aAAU,UAAU,EAAI,GAChElB,EAAU,YAAYkB,CAAgB,EAAE,aAAU,IAAI,EAAI,CAAC,CAAE,KAAM,iBAAc,OAAQ,MAAOG,CAAI,CAAC,EACjGC,IACAtB,EAAU,YAAYkB,CAAgB,EAAE,aAAU,MAAM,EAAII,GAEhEtB,EAAU,YAAYkB,CAAgB,EAClC,aAAU,cACd,EAAI,GAAGJ,EAAc,YAAY,IAAIC,CAAW,GAExD,CAxDgBV,EAAAO,GAAA,sBAgEhB,SAASY,GAAoBC,EAAoBC,EAAgBC,EAA6B,CAEtFF,IAAe,kBAAe,WAC9BC,EAAe,SAAW,KACzBA,EAAe,QAAU,qBAAkB,oBACxCA,EAAe,QAAU,qBAAkB,mCAE/CC,EAAY,kCAA0B,EAC/BD,EAAe,SAAW,IAAQA,EAAe,QAAU,qBAAkB,mBACpFC,EAAY,wBAAwB,EAEpCD,EAAe,SAAW,IAC1BA,EAAe,QAAU,qBAAkB,mCAE3CC,EAAY,mCAAmC,CAEvD,CAhBStB,EAAAmB,GAAA,uBAuBT,SAASI,GAAcF,EAAwCD,EAAgD,CAC3G,IAAME,EAA8B,CAAC,EACrC,GACI,EAAAD,EAAe,QAAU,qBAAkB,oBAC3CA,EAAe,QAAU,qBAAkB,mCAI/C,OACIA,EAAe,SAAW,IAC1BA,EAAe,cAAgB,IAC/BA,EAAe,QAAU,qBAAkB,mBAE3CC,EAAY,oBAAyB,EAErCD,EAAe,SAAW,IAC1BA,EAAe,cAAgB,IAC/BA,EAAe,QAAU,qBAAkB,kCAE3CC,EAAY,+BAAoC,EACzCD,EAAe,cAAgB,IAAQA,EAAe,QAAU,qBAAkB,mBACzFC,EAAY,mBAAwB,EAEpCD,EAAe,cAAgB,IAC/BA,EAAe,QAAU,qBAAkB,mCAE3CC,EAAY,8BAAmC,EAEnDH,GAAoBC,EAAYC,EAAgBC,CAAW,EACpDA,CACX,CA9BStB,EAAAuB,GAAA,iBAuCT,SAASC,GAAsBrB,EAAwCR,EAAuBe,EAAqB,CAC/G,IAAMe,EAAYpB,GAA6BF,EAAmB,cAAc,EAChF,GAAIsB,EAAW,CACX,IAAMC,EAAqB/B,EAAU,YAAYQ,EAAmB,UAAU,EAC9EuB,EAAmB,WAAWD,CAAS,EAAI,CACvC,KAAM3B,EAAyB,kBAAe,YAC9C,YAAaiB,GAAwBZ,EAAmB,eAAgBA,EAAmB,UAAU,CAEzG,EACAuB,EAAmB,WAAWD,CAAS,EAAE,aAAU,aAAa,EAAIf,EACpEgB,EAAmB,WAAWD,CAAS,EACnC,aAAU,cACd,EAAI,GAAGtB,EAAmB,YAAY,IAAIO,CAAW,GACrDiB,GACID,EAAmB,WAAWD,CAAS,EACvCtB,EAAmB,cACvB,EACAyB,GAAmBzB,EAAmB,eAAgBuB,EAAmB,WAAYD,CAAS,CAClG,CACJ,CAnBSzB,EAAAwB,GAAA,yBAqBT,SAASK,GACL3B,EACAP,EACAa,EACAL,EACAO,EACAoB,EACAV,EACF,CACE,OAAQlB,EAAY,CAChB,oBACA,+BAAsC,CAClCK,GAAmBZ,EAAWa,EAASL,EAAoBD,EAAYQ,CAAW,EAClF,KACJ,CACA,mBACA,8BAAqC,CAC7BoB,GACAvB,GAAmBZ,EAAWmC,EAAe3B,EAAoBD,EAAYQ,CAAW,EAE5F,KACJ,CACA,wBACA,mCAAqC,CACjCH,GACIZ,EACAA,EAAU,YAAYyB,CAAU,EAChCjB,EACAD,EACAQ,CACJ,EACA,KACJ,CACA,kCACIc,GAAsBrB,EAAoBR,EAAWe,CAAW,CAExE,CACJ,CArCSV,EAAA6B,GAAA,mBAgDF,SAASE,GACZpC,EACAqC,EACAC,EACAb,EACAc,EACI,CAEJd,EAAaA,GAAc,kBAAe,UAE1C,GAAM,CAAE,QAAAZ,EAAS,cAAAsB,EAAe,aAAAK,CAAa,EAAIC,GAC7CzC,EACAqC,EACAC,EACAb,CACJ,EAEA,GAAIY,EAAoB,CACpB,IAAItB,EAAc,EAClBsB,EAAmB,QAASX,GAAmB,CAC3C,IAAMlB,EAAyC,CAAE,aAAAgC,EAAc,eAAAd,EAAgB,WAAAD,EAAY,WAAAa,CAAW,EAChGX,EAAcC,GAAcF,EAAgBD,CAAU,EACxDE,EACAA,EAAY,QAASpB,GAAe,CAChC2B,GACI3B,EACAP,EACAa,EACAL,EACAO,EACAoB,EACAV,CACJ,CACJ,CAAC,EAEDI,GAAsBrB,EAAoBR,EAAWe,CAAW,EAEpEA,GACJ,CAAC,CACL,CACIwB,IACCvC,EAAU,YAAYyB,CAAU,EAAiB,WAAW,OAAY,CACrE,KAAM,GAAGtB,CAAsB,GAAGoC,CAAe,EACrD,EAER,CA7CgBlC,EAAA+B,GAAA,oBAqDT,SAASM,GACZ1C,EACAsC,EACAK,EACI,CA9VR,IAAAC,EAAAC,EAgWI,IAAMC,GAAwBD,GAAAD,EAAA5C,EAAU,YAAY2C,CAAc,IAApC,YAAAC,EAAwC,aAAxC,YAAAC,EAC1B,gBAEJ,GAAIC,EAAuB,CACvB,IAAMC,EAAa,CAEf,IAAIT,GAAA,YAAAA,EAAY,mBAAoB,CAAC,EAErC,IAAIA,GAAA,YAAAA,EAAY,uBAAwB,CAAC,CAC7C,EACAQ,EAAsB,KAAUC,GAAA,YAAAA,EAAY,OAAO,CAACC,EAAkBC,KAC7DD,EAAO,SAASC,EAAS,IAAI,GAC9BD,EAAO,KAAKC,EAAS,IAAI,EAEtBD,GACR,CAAC,EACR,CACJ,CAvBgB3C,EAAAqC,GAAA,kCAgCT,SAASQ,GACZlD,EACA2C,EACAQ,EACAC,EACI,CA/XR,IAAAR,EAAAC,EAAAQ,EAAAC,EAAAC,EAgYI,IAAMC,GAAuBX,GAAAD,EAAA5C,EAAU,YAAY2C,CAAc,IAApC,YAAAC,EAAwC,aAAxC,YAAAC,EAAwD,OACrF,GAAI,CAACM,EAAM,CACHC,IACAI,EAAqB,YACjB,gFACJA,EAAqB,KAAU,CAACJ,CAAO,GAE3C,MACJ,CACA,IAAMK,GAAiBF,GAAAD,GAAAD,EAAAF,EAAK,YAAL,YAAAE,EAAgB,WAAhB,YAAAC,EAA0B,yBAA1B,YAAAC,EAAmD,SAC1E,GAAIE,EAAgB,CAChB,IAAMC,EAAc,CAAC,EACrB,OAAO,KAAKD,CAAc,EAAE,OAAO,CAACT,EAAkBW,IAAY,CAC9D,IAAMtC,EACFoC,EAAeE,CAAO,GAAKF,EAAeE,CAAO,EAAE,MAAW,OACxDF,EAAeE,CAAO,EAAE,IACxB,OAEV,OAAItC,IAAQ,QAAa,CAAC2B,EAAO,SAAS3B,CAAG,GACzC2B,EAAO,KAAK3B,CAAG,EAEZ2B,CACX,EAAGU,CAAW,EACdE,GAAgBF,EAAaF,CAAoB,CACrD,CACJ,CA/BgBnD,EAAA6C,GAAA,iBAyCT,SAASW,GACZ7D,EACA8D,EACAC,EACAd,EACAN,EACI,CAzaR,IAAAC,EAAAC,EA0aI,GAAI,CAACiB,GAAa,CAACC,GAASA,EAAM,WAAW,IAAI,EAC7C,OAEJ,IAAML,EAAc,CAAC,EACrBI,EAAU,QAASE,GAAa,CAC5B,IAAIC,EAAUD,EAAS,cAAc,MAAM,QAAQ,EAAE,CAAC,EACtD,GAAIC,GAAWA,EAAQ,QAAQ,eAAe,EAAI,EAAG,CACjD,IAAMC,EAAe,KAAK,SAAM,aAASF,EAAS,YAAa,CAAE,QAAS,EAAK,CAAC,CAAC,EAC7E,yBACJ,EACA,GACKf,IAAa,iBACT,CAACiB,GACEA,EAAa,QACbA,EAAa,cAAc,GAC3BA,EAAa,wBAAwB,IAC5CjB,IAAa,sBACT,CAACiB,GACG,CAACA,EAAa,QACX,CAACA,EAAa,cAAc,GAC5B,CAACA,EAAa,wBAAwB,GACtC,CAACA,EAAa,qCAAqC,GACjE,CACED,EAAUA,EAAQ,QAAQ,IAAI,OAAO,KAAO,OAAK,GAAG,EAAG,GAAG,EAC1D,IAAME,EAAeJ,EAAQE,EAAQ,MAAM,eAAe,EAAE,CAAC,EAAE,QAAQ,MAAO,GAAG,EACjFP,EAAY,KAAKS,CAAY,CACjC,CACJ,CACJ,CAAC,EACDP,GAAgBF,GAAab,GAAAD,EAAA5C,EAAU,YAAY2C,CAAc,IAApC,YAAAC,EAAwC,aAAxC,YAAAC,EAAwDI,EAAS,CAClG,CArCgB5C,EAAAwD,GAAA,mBAkDT,SAASO,GACZpE,EACAsC,EACAa,EACAkB,EACAP,EACA7D,EAAsC,kBAAe,cACrDC,EAAqC,kBAAe,aACpDkD,EACI,CACJrD,GAA0BC,EAAWC,EAA6BC,CAA0B,EAG5FwC,GAA+B1C,EAAWsC,EAAYpC,CAA0B,EAEhFgD,GAAclD,EAAWE,EAA4BiD,EAAMC,CAAO,EAElE,IAAMW,EAAQM,GAAYA,EAAS,SAAS,GAAKA,EAAS,SAAS,EAAE,GACrER,GAAgB7D,EAAW8D,EAAWC,EAAO,eAAgB7D,CAA0B,EAEvF2D,GAAgB7D,EAAW8D,EAAWC,EAAO,eAAgB,kBAAe,YAAY,EACxFF,GAAgB7D,EAAW8D,EAAWC,EAAO,oBAAqB7D,CAA0B,EAC5F2D,GAAgB7D,EAAW8D,EAAWC,EAAO,oBAAqB,kBAAe,YAAY,CACjG,CAvBgB1D,EAAA+D,GAAA,4BAgMT,SAASE,GAAuBC,EAAwBC,EAAsC,CACjG,QAAWC,KAASD,EAAgB,CAChC,IAAME,EAAQH,EAAO,QAAQE,CAAK,EAC9BC,IAAU,IAEVH,EAAO,OAAOG,EAAO,CAAC,CAE9B,CACJ,CARgBC,EAAAL,GAAA,0BAgBT,SAASM,GACZC,EACAC,EACAC,EACI,CACJF,EAAU,YAAY,gBAAkB,CACpC,GAAIA,EAAU,YAAY,gBAC1B,WAAY,CAAC,EACb,qBAAsB,EAC1B,EACA,IAAMG,EAA4BH,EAAU,YAAY,gBAClDI,EAAiBC,GAAqBH,GAAA,YAAAA,EAAY,mBAAoB,qBAAkB,eAAe,EAI7G,GAHIE,IACAD,EAA0B,aAAU,cAAc,EAAIC,GAEtD,CAACH,EACD,OAEJ,IAAIK,EAAI,EACRL,EAA0B,QAASM,GAAmB,CAClD,IAAIC,EAAcD,EAAe,MAC3BE,EAAkB,kBAAkBC,GAAWH,EAAe,KAAK,CAAC,IACpEI,EAAWC,GAAkBL,CAAc,EAC7CA,EAAe,OAAS,iBACxBC,EAAcK,GAAwBN,EAAgBL,CAAU,GAEpEC,EAA0B,WAAWI,EAAe,KAAK,EAAI,CACzD,KAAMO,EAAyBL,CACnC,EACAN,EAA0B,WAAWI,EAAe,KAAK,EAAE,aAAU,aAAa,EAAID,EACtFN,EAAU,YAAYS,CAAe,EAAI,CACrC,KAAM,SACN,YAAAD,EACA,qBAAsB,EAC1B,EACAR,EAAU,YAAYS,CAAe,EAAE,aAAU,UAAU,EAAI,GAC/DT,EAAU,YAAYS,CAAe,EAAE,aAAU,cAAc,EAAIF,GAAA,YAAAA,EAAgB,KACnFP,EAAU,YAAYS,CAAe,EAAE,aAAU,QAAQ,EAAIE,EAC7DX,EAAU,YAAYS,CAAe,EAAE,aAAU,IAAI,EAAI,CACrD,CAAE,KAAM,iBAAc,MAAO,MAAO,GAAGF,EAAe,KAAK,EAAG,CAClE,EACAP,EAAU,YAAYS,CAAe,EAAE,aAAU,cAAc,EAAI,GAC/DN,EAA0B,aAAU,cAAc,CACtD,IAAIG,CAAC,GAED,CAAC,OAAQ,WAAY,gBAAgB,EAAE,SAASK,CAAQ,EACxDX,EAAU,YAAYS,CAAe,EAAE,KAAU,GAAGK,CAAsB,6BAE1Ed,EAAU,YAAYS,CAAe,EAAE,WAAgB,CAAC,EAE5DH,GACJ,CAAC,CACL,CApDgBR,EAAAC,GAAA,sBA2DT,SAASgB,GAAeb,EAAiC,CAI5D,MAAO,CAAC,CAH2BA,EAAW,qBAAqB,KAC9Dc,GAAaA,EAAS,OAAS,yBACpC,CAEJ,CALgBlB,EAAAiB,GAAA,kBAaT,SAASE,GAAyBjB,EAAuBkB,EAAO,GAAOC,EAA4B,CAEtG,IAAIC,EAA6B,kBAAe,sBAC5CC,EAAmB,kBAAe,sBAClCC,EAAmB,kBAAe,qBAClCJ,IACAE,EAA6B,kBAAe,eAC5CC,EAAmB,kBAAe,cAClCC,EAAmB,kBAAe,gCAEtC,IAAMC,EAA0BvB,EAAU,YAAYoB,CAA0B,EAC1EI,EAAgBxB,EAAU,YAAYqB,CAAgB,EAC5DG,EAAc,aAAU,UAAU,EAAI,GACtCA,EAAc,YAAc,UAE5B,OAAO,SADiBL,GAAWI,GACJ,UAAU,EAAE,QAAQ,CAAC,CAACE,EAAMC,CAAU,IAAM,CACvE,IAAMC,EAAYD,EAAW,KAAQ,MAAMZ,CAAsB,EAAE,CAAC,EAC9Dc,EAAY,GAAGN,CAAgB,IAAIK,CAAS,IAClDH,EAAc,WAAWC,CAAI,EAAI,CAAE,KAAM,GAAGX,CAAsB,GAAGc,CAAS,EAAG,EACjF5B,EAAU,YAAY4B,CAAS,EAAI5B,EAAU,YAAY2B,CAAS,EAClE3B,EAAU,YAAY2B,CAAS,EAAE,aAAU,UAAU,EAAI,cAAW,QACxE,CAAC,CACL,CAtBgB7B,EAAAmB,GAAA,4BA8BT,SAASY,GAA2B7B,EAAuBmB,EAA2B,CACzF,IAAMW,EAAkB9B,EAAU,YAAY,kBAAe,uBAAuB,EACpF,QAAW+B,KAAUD,EAAgB,WAAY,CAC7C,IAAMH,EAAYG,EAAgB,WAAWC,CAAM,EAAE,KAAQ,MAAMjB,CAAsB,EAAE,CAAC,EACtFc,EAAY,GAAG,kBAAe,8BAA8B,IAAID,CAAS,IAC/ER,EAAQ,WAAWY,CAAM,EAAI,CAAE,KAAM,GAAGjB,CAAsB,GAAGc,CAAS,EAAG,EAC7E5B,EAAU,YAAY4B,CAAS,EAAI5B,EAAU,YAAY2B,CAAS,EAClE3B,EAAU,YAAY2B,CAAS,EAAE,aAAU,UAAU,EAAI,cAAW,QACxE,CACJ,CATgB7B,EAAA+B,GAAA,8BFjuBhB,SAASG,GACLC,EACAC,EACAC,EACAC,EACF,CACE,GAAIH,IAAY,uBAAqB,IAAMC,EAAU,YAAe,MAChE,OAAQC,EAAM,MAAO,CACjB,KAAK,qBAAkB,UACvB,KAAK,qBAAkB,uBACvB,KAAK,qBAAkB,4BACvB,KAAK,qBAAkB,iBAAkB,CACpCD,EAAU,YAAYE,CAAe,EAAiB,WACnDF,EAAU,YAAY,MAAM,WAChC,KACJ,CACJ,SACOD,IAAY,uBAAqB,IAAMC,EAAU,YAAe,MACvE,OAAQC,EAAM,MAAO,CACjB,KAAK,qBAAkB,UACvB,KAAK,qBAAkB,uBACvB,KAAK,qBAAkB,iBAAkB,CACpCD,EAAU,YAAYE,CAAe,EAAiB,WACnDF,EAAU,YAAY,MAAM,WAChC,KACJ,CACJ,CAER,CA5BSG,EAAAL,GAAA,uBAsCT,SAASM,GACLL,EACAM,EACAC,EACAC,EACM,CACN,IAAMC,EACFT,IAAY,uBAAqB,IAAMM,GAAoBA,EAAiB,SAAS,IAAI,EACnFA,EAAiB,MAAM,IAAI,EAAE,CAAC,EAAE,QAAQ,YAAa,OAAO,EAC5D,OACV,OAAIN,IAAY,uBAAqB,GAC1B,GAAGS,CAAkB,IAAIF,CAAQ,KAAKC,CAAc,IAEpD,GAAGD,CAAQ,KAAKC,CAAc,EAE7C,CAfSJ,EAAAC,GAAA,gCAuBT,SAASK,GAAuBR,EAAOD,EAAuBU,EAA0B,CAChF,OAAOT,EAAM,OAAU,UAAYA,EAAM,MAAM,OAAS,QACxDD,EAAU,YAAYU,CAAgB,EAAE,YAAU,IAAI,EAAI,CACtD,CACI,KAAM,QACN,MAAOT,EAAM,MAAM,IACvB,CACJ,EACAD,EAAU,YAAYU,CAAgB,EAAE,YAAU,MAAM,EAAIT,EAAM,MAAM,QAClEA,EAAM,MAAM,QAAQ,mBAAmB,MAAM,GAAG,EAAE,CAAC,EACnDA,EAAM,MAAM,MACX,OAAOA,EAAM,OAAU,UAAYA,EAAM,QAChDD,EAAU,YAAYU,CAAgB,EAAE,YAAU,IAAI,EAAI,CACtD,CACI,KAAM,QACN,MAAOT,EAAM,KACjB,CACJ,EACAD,EAAU,YAAYU,CAAgB,EAAE,YAAU,MAAM,EAAIT,EAAM,mBAAmB,MAAM,GAAG,EAAE,CAAC,EAEzG,CApBSE,EAAAM,GAAA,0BA4BT,SAASE,GAAkBV,EAA+BD,EAAuBU,EAA0B,CACvG,GACIT,EAAM,QAAU,qBAAkB,WAClCA,EAAM,QAAU,qBAAkB,kBAClCA,EAAM,QAAU,qBAAkB,4BAElCQ,GAAuBR,EAAOD,EAAWU,CAAgB,UAClDT,EAAM,QAAU,qBAAkB,uBACzCD,EAAU,YAAYU,CAAgB,EAAE,YAAU,IAAI,EAAI,CACtD,CACI,KAAM,SACN,MAAOE,GAAkBX,EAAM,OAAO,KAAK,CAC/C,CACJ,EACAD,EAAU,YAAYU,CAAgB,EAAE,YAAU,MAAM,EACpDT,EAAM,OAAO,QAAQ,mBAAmB,MAAM,GAAG,EAAE,CAAC,UACjDA,EAAM,QAAU,qBAAkB,mBAAoB,CAC7D,IAAMY,EAAYZ,EAAM,OAAO,YAAY,GAAG,EAC1CY,IAAc,GACdb,EAAU,YAAYU,CAAgB,EAAE,YAAU,IAAI,EAAI,CACtD,CACI,KAAM,SACN,MAAOT,EAAM,MACjB,CACJ,GAEAD,EAAU,YAAYU,CAAgB,EAAE,YAAU,IAAI,EAAI,CACtD,CACI,KAAM,SACN,MAAOT,EAAM,OAAO,UAAUY,EAAY,EAAGZ,EAAM,OAAO,MAAM,CACpE,CACJ,EACAD,EAAU,YAAYU,CAAgB,EAAE,YAAU,MAAM,EAAIT,EAAM,OAAO,UAAU,EAAGY,CAAS,EAEvG,MAAWZ,EAAM,QAAU,qBAAkB,oCACzCD,EAAU,YAAYU,CAAgB,EAAE,YAAU,IAAI,EAAI,CACtD,CACI,KAAM,gBAAc,eACpB,MAAOT,EAAM,cACjB,CACJ,EACIA,EAAM,QACND,EAAU,YAAYU,CAAgB,EAAE,YAAU,IAAI,EAAE,KAAK,CACzD,KAAM,SACN,MAAOT,EAAM,MACjB,CAAC,EAELD,EAAU,YAAYU,CAAgB,EAAE,YAAU,MAAM,EAAIT,EAAM,mBAAmB,MAAM,GAAG,EAAE,CAAC,EAEzG,CAjDSE,EAAAQ,GAAA,qBAwDT,SAASG,GAAiBb,EAAgE,CA3L1F,IAAAc,EAAAC,EA4LI,OACIf,EAAM,QAAU,qBAAkB,0BAClCe,GAAAD,EAAAd,EAAM,SAAN,YAAAc,EAAc,UAAd,YAAAC,EAAuB,SAAU,qBAAkB,mBAE3D,CALSb,EAAAW,GAAA,oBAgBT,SAASG,GACLC,EACAlB,EACAC,EACAkB,EACApB,EACqB,CACrB,IAAMqB,EAASnB,EAAM,OAAO,QACtBoB,EAAoC,CAAC,EAC3C,GAAID,EAAO,QAAU,qBAAkB,oBAAqB,CAExD,IAAME,GADWF,EAAO,UAAY,IACL,MAAM,sBAAsB,GAAK,CAAC,EAC3DG,EAAaH,EAAO,KAEtBI,EAAgBF,EAAc,OAClC,QAAWG,KAAYF,EAAY,CAC/B,IAAMG,EAAaH,EAAWE,CAAQ,EACtC,GAAI,OAAOC,GAAe,UAAY,UAAWA,EAAY,CACzD,IAAIC,EAAQL,EAAc,UAAWM,GAAgBA,IAAgBH,CAAQ,EACzEE,IAAU,KACVA,EAAQH,EACRA,KAGJK,GACIX,EACAlB,EACA0B,EACA,oBAAoBN,EAAO,SAAS,GACpCO,EAAM,SAAS,EACfR,EACApB,EACA,OACA,CACI,QAASsB,EACT,OAAQA,CACZ,EACAD,EAAO,mBAAmB,MAAM,GAAG,EAAE,CAAC,CAC1C,CACJ,CACJ,CACJ,CACA,OAAOC,CACX,CA3CSlB,EAAAc,GAAA,sBAoDT,SAASa,GACL9B,EACA+B,EACAV,EACqB,CACrB,GAAIA,EACA,OAAOA,EAEX,IAAMW,EAAmBC,GAAWF,CAAG,EACvC,OAAO/B,EAAU,YAAYgC,CAAgB,EAAE,UACnD,CAVS7B,EAAA2B,GAAA,4BAyBT,SAASD,GACLX,EACAlB,EACAC,EACAK,EACA4B,EACAf,EACApB,EACAoC,EAAc,GACdC,EAA0C,CAAC,EAC3CC,EAAiBlB,EAAQ,WAAW,mBAChC,CAnSR,IAAAJ,EAqSI,IAAMV,EAAmBiC,GAA6BrC,CAAK,EACrDM,EACFR,IAAY,uBAAqB,IAAMM,GAAoBA,EAAiB,SAAS,IAAI,EACnFA,EAAiB,MAAM,IAAI,EAAE,OAAO,CAAC,EAAE,KAAK,IAAI,EAChDA,EAEJK,EAAmBN,GAA6BL,EAASM,EAAkBC,EAAUC,CAAc,EAErGc,EAAoC,CAAC,EAEzC,GAAI,GAACpB,GAAS,CAACA,EAAM,OAEd,IACHA,EAAM,QAAU,qBAAkB,oBAClCA,EAAM,QAAU,qBAAkB,mCAElC,GAAIkC,GAAejB,IAAgB,cAAY,QAAS,CACpD,IAAMqB,EAAoBT,GACtB9B,EACA,GAAGkB,CAAW,GAAG,iBAAe,OAAO,IAAIZ,CAAQ,IACnD8B,EAAiB,OACrB,EACMI,EAAiBD,EAAkBhC,CAAc,EAAI,CACvD,KAAM,GAAGkC,CAAsB,GAAG/B,CAAgB,EACtD,EACA8B,EAAc,YAAU,aAAa,EAAI,SAASN,CAAG,CACzD,MACG,CACH,IAAMQ,EAAmBZ,GACrB9B,EACA,GAAGkB,CAAW,GAAG,iBAAe,MAAM,IAAIZ,CAAQ,IAClD8B,EAAiB,MACrB,EACAM,EAAiBnC,CAAc,EAAI,CAC/B,KAAM,GAAGkC,CAAsB,GAAG/B,CAAgB,GAClD,cAAe,SAASwB,CAAG,CAC/B,EACIpB,GAAiBb,CAAK,IAEtBoB,EAAaJ,GAAmBC,EAAalB,EAAWC,EAAOkB,EAASpB,CAAO,EAEvF,CAEAC,EAAU,YAAYU,CAAgB,EAAI,CACtC,KAAM,SACN,WAAAW,EACA,YAAasB,GAAwB1C,EAAOkB,EAAQ,UAAU,EAC9D,qBAAsB,EAC1B,EAEAR,GAAkBV,EAAOD,EAAWU,CAAgB,EACpDV,EAAU,YAAYU,CAAgB,EAAE,YAAU,cAAc,EAAI,IAAI2B,CAAc,IAClFpC,EAAM,mBAAmB,MAAMoC,CAAc,EAAE,CAAC,CACpD,GACArC,EAAU,YAAYU,CAAgB,EAAE,YAAU,cAAc,EAAIT,EAAM,MAC1ED,EAAU,YAAYU,CAAgB,EAAE,YAAU,UAAU,EAAI,GAEhEkC,GAAwB5C,EAAU,YAAYU,CAAgB,EAAiBT,CAAK,EAGpFH,GAAoBC,EAASC,EAAWC,EAAOS,CAAgB,EAC3DT,EAAM,QAAU,qBAAkB,sBAAsBc,EAAAf,EAAU,cAAV,MAAAe,EAAwB,cAC/Ef,EAAU,YAAYU,CAAgB,EAAiB,WACpDV,EAAU,YAAY,iBAAe,UAAU,EACjD,YAEV,CA/ESG,EAAA0B,GAAA,YAsFT,SAASgB,GAAwB1B,EAAsB,CACnD,IAAIb,EACJ,OAAIa,EAAQ,QAAUA,EAAQ,OAAO,WAAgBA,EAAQ,WACzDb,EAAW,GAAGa,EAAQ,WAAW,IAAI,KAAKA,EAAQ,IAAI,KAAKA,EAAQ,OAAO,SAAY,GAC/EA,EAAQ,WACfb,EAAW,GAAGa,EAAQ,WAAW,IAAI,KAAKA,EAAQ,IAAI,GAEtDb,EAAWa,EAAQ,GAEhBb,CACX,CAVSH,EAAA0C,GAAA,2BAoBT,SAASC,GACL3B,EACAD,EACAlB,EACAM,EACAP,EACAoC,EAAc,GACV,CAzYR,IAAApB,EA0YI,GAAI,CAACI,EAAQ,OACT,OAEJ,IAAM4B,EAAiBd,GAAW,GAAGf,CAAW,GAAG,iBAAe,IAAI,IAAIZ,CAAQ,GAAG,EAC/E0B,EAAmBC,GAAW,GAAGf,CAAW,GAAG,iBAAe,MAAM,IAAIZ,CAAQ,GAAG,EACnF0C,EAAoBf,GAAW,GAAGf,CAAW,GAAG,iBAAe,OAAO,IAAIZ,CAAQ,GAAG,EAqD3F,GAlDAN,EAAU,WAAW,KAAU,CAAE,KAAM,GAAGyC,CAAsB,GAAGM,CAAc,EAAG,EAEhF7B,IAAgB,cAAY,SAAWiB,GACvCnC,EAAU,YAAe+C,CAAc,EAAI,CACvC,KAAM,SACN,WAAY,CACR,QAAS,CACL,KAAM,GAAGN,CAAsB,GAAGO,CAAiB,EACvD,EACA,OAAQ,CAAE,KAAM,GAAGP,CAAsB,GAAGT,CAAgB,EAAG,CACnE,EACA,YAAa,OACb,qBAAsB,EAC1B,EACAhC,EAAU,YAAegD,CAAiB,EAAI,CAC1C,KAAM,SACN,WAAY,CAAC,EACb,YAAa,UACb,qBAAsB,EAC1B,EACAhD,EAAU,YAAegD,CAAiB,EAAE,YAAU,UAAU,EAAI,IAEpEhD,EAAU,YAAe+C,CAAc,EAAI,CACvC,KAAM,SACN,WAAY,CACR,OAAQ,CAAE,KAAM,GAAGN,CAAsB,GAAGT,CAAgB,EAAG,CACnE,EACA,YAAa,OACb,qBAAsB,EAC1B,EAEJhC,EAAU,YAAY+C,CAAc,EAAE,YAAU,UAAU,EAAI,IAE1DhC,EAAAI,EAAQ,aAAR,MAAAJ,EAAoB,OACpBf,EAAU,YAAY+C,CAAc,EAAE,YAAU,cAAc,EAAIE,GAC9D9B,EAAQ,WAAW,mBACnBA,EAAQ,OAAO,KACfA,EAAQ,OAAO,SACnB,GAIJnB,EAAU,YAAYgC,CAAgB,EAAI,CACtC,KAAM,SACN,WAAY,CAAC,EACb,YAAa,SACb,qBAAsB,EAC1B,EACAhC,EAAU,YAAYgC,CAAgB,EAAE,YAAU,UAAU,EAAI,GAE5Db,EAAQ,OAAS,YAAU,eAC3B,QAAWe,KAAOf,EAAQ,OAAQ,CAC9B,IAAMlB,EAAQkB,EAAQ,OAAOe,CAAG,EAC5BjC,GACA4B,GAASX,EAAalB,EAAWC,EAAOK,EAAU4B,EAAKf,EAASpB,EAASoC,CAAW,CAE5F,KAEA,SAAWD,KAAOf,EAAQ,OAAO,KAAS,CACtC,IAAMlB,EAAQkB,EAAQ,OAAO,KAAQe,CAAG,EACxCL,GAASX,EAAalB,EAAWC,EAAOK,EAAU4B,EAAKf,EAASpB,CAAO,CAC3E,CAER,CA/ESI,EAAA2C,GAAA,6BAuFT,SAASI,GAAwB/B,EAAsBnB,EAAuBmD,EAA2B,CAzdzG,IAAApC,EAAAC,EA0dI,GAAIG,EAAQ,OAAQ,CAChB,IAAMiC,EAAcjC,EAAQ,OAAO,UAC7B,GAAGA,EAAQ,OAAO,IAAO,IAAIA,EAAQ,OAAO,SAAY,GACxD,GAAGA,EAAQ,OAAO,IAAO,GAC/BnB,EAAU,YAAYmD,CAAiB,EAAE,YAAU,IAAI,EAAI,CACvD,CACI,KAAM,gBAAc,OACpB,MAAOC,EAAY,QAAQ,+BAAgC,EAAE,CACjE,CACJ,EACApD,EAAU,YAAYmD,CAAiB,EAAE,YAAU,MAAM,GACrDpC,EAAAI,EAAQ,OAAO,qBAAf,YAAAJ,EAAsC,MAAM,KAAK,EACzD,CACAf,EAAU,YAAYmD,CAAiB,EAAE,YAAU,UAAU,EAAI,IAE7DnC,EAAAG,EAAQ,aAAR,MAAAH,EAAoB,OACpBhB,EAAU,YAAYmD,CAAiB,EAAE,YAAU,cAAc,EAAIF,GACjE9B,EAAQ,WAAW,mBACnBA,EAAQ,OAAO,KACfA,EAAQ,OAAO,SACnB,EAER,CAvBShB,EAAA+C,GAAA,2BAmCF,SAASG,GACZnC,EACAC,EACAmC,EACAtD,EACAD,EACAwD,EACkB,CAClB,GAAI,CAACpC,EAAQ,OACT,OAEJ,IAAMb,EAAmBuC,GAAwB1B,CAAO,EAClDgC,EAAoBlB,GAAW,GAAGf,CAAW,GAAG,iBAAe,IAAI,IAAIZ,CAAQ,GAAG,EAClFkD,EAAsBvB,GAAW,GAAGf,CAAW,GAAG,iBAAe,MAAM,IAAIZ,CAAQ,GAAG,EACtFmD,EAAuBxB,GAAW,GAAGf,CAAW,GAAG,iBAAe,OAAO,IAAIZ,CAAQ,GAAG,EACxF6B,EAAc,EAAAhB,EAAQ,OAAS,YAAU,gBAAkBoC,EAAS,QAAQ,GAAG,EAAI,GAGzF,OAAAD,EAAiB,WAAW,KAAO,CAAE,KAAM,GAAGb,CAAsB,GAAGU,CAAiB,EAAG,EAEvFjC,IAAgB,cAAY,SAAWiB,GACvCnC,EAAU,YAAYmD,CAAiB,EAAI,CACvC,KAAM,SACN,WAAY,CACR,QAAS,CACL,KAAM,GAAGV,CAAsB,GAAGgB,CAAoB,EAC1D,EACA,OAAQ,CAAE,KAAM,GAAGhB,CAAsB,GAAGe,CAAmB,EAAG,CACtE,EACA,YAAa,OACb,qBAAsB,EAC1B,EACAxD,EAAU,YAAYyD,CAAoB,EAAI,CAC1C,KAAM,SACN,WAAY,CAAC,EACb,YAAa,UACb,qBAAsB,EAC1B,EACAzD,EAAU,YAAYyD,CAAoB,EAAE,YAAU,UAAU,EAAI,IAEpEzD,EAAU,YAAYmD,CAAiB,EAAI,CACvC,KAAM,SACN,WAAY,CACR,OAAQ,CAAE,KAAM,GAAGV,CAAsB,GAAGe,CAAmB,EAAG,CACtE,EACA,YAAa,OACb,qBAAsB,EAC1B,EAGJN,GAAwB/B,EAASnB,EAAWmD,CAAiB,EAG7DnD,EAAU,YAAYwD,CAAmB,EAAI,CACzC,KAAM,SACN,WAAY,CAAC,EACb,YAAa,SACb,qBAAsB,EAC1B,EACAxD,EAAU,YAAYwD,CAAmB,EAAE,YAAU,UAAU,EAAI,GAEnEV,GAA0B3B,EAASD,EAAalB,EAAWM,EAAUP,EAASoC,CAAW,EAClF7B,CACX,CA/DgBH,EAAAkD,GAAA,cAuET,SAASK,GAAaC,EAA8BC,EAA4C,CACnG,IAAMC,EAAiBF,EAAqB,QAAQ,GAAG,EAAI,GAAKA,EAAqB,MAAM,GAAG,EAAE,CAAC,EAAI,OACjGG,EAASH,EACb,GAAIE,GAAkBD,EAAiB,CACnC,IAAMG,EAAaF,EAAe,QAAQ,QAAS,EAAE,EAC/CG,EAAYJ,EAAgB,WAAW,KAAM7B,GACxCA,EAAI,QAAUgC,CACxB,EACGC,IACAF,EAASH,EAAqB,QAAQE,EAAgBG,EAAU,SAAS,EAEjF,CACA,OAAOF,CACX,CAbgB3D,EAAAuD,GAAA,gBAqBT,SAASO,GACZC,EACAN,EAC2D,CAC3D,IAAMO,EAAST,GAAaQ,EAAK,OAAQN,CAAe,EAEpDQ,EAAiBD,EACjBE,EAAiBF,EAAO,QAAQ,GAAG,EAEnCE,EAAiB,IACjBD,EAAiBD,EAAO,UAAU,EAAGE,CAAc,GAEvDA,EAAiBD,EAAe,YAAY,GAAG,EAC3CC,IAAmB,KACnBA,EAAiBD,EAAe,YAAY,GAAG,GAEnD,IAAIE,EAAoBC,EAAkBC,EAC1C,OAAIH,EAAiB,IACjBC,EAAaF,EAAe,UAAUC,EAAiB,CAAC,EACxDG,EAAYJ,EAAe,UAAU,EAAGC,CAAc,EACtDE,EAAW,GAAGH,EAAe,UAAU,EAAGC,CAAc,CAAC,KAAKC,CAAU,KAExEA,EAAaF,EACbI,EAAYN,EAAK,mBAAmB,MAAM,GAAG,EAAE,CAAC,EAC5CI,GAAcA,IAAe,KAC7BC,EAAW,GAAGC,EAAU,UAAU,EAAGA,EAAU,OAAS,CAAC,CAAC,KAAKF,CAAU,KAG1E,CAAE,WAAAA,EAAY,SAAAC,EAAU,UAAAC,CAAU,CAC7C,CA7BgBrE,EAAA8D,GAAA,sBAqChB,SAASQ,GAAkBC,EAA2BC,EAA0D,CA7nBhH,IAAA5D,EAAAC,EA8nBI,QAAWkB,KAAOwC,EAAO,CACrB,IAAME,EAAUF,EAAMxC,CAAG,EACzB,QAAInB,EAAA6D,EAAQ,YAAR,YAAA7D,EAAmB,QAAS,KAAG,6BAC3BC,EAAA2D,EAAmB,YAAnB,YAAA3D,EAA8B,QAAS4D,EAAQ,UAMhDH,GAAkBG,EAAQ,MAAOD,CAAkB,CAC9D,CACJ,CAZSxE,EAAAsE,GAAA,qBAsBF,SAASI,GACZ7E,EACA2E,EACA5E,EACA2E,EACI,CAxpBR,IAAA3D,EAAAC,EAAA8D,EAypBI9E,EAAU,YAAY,iBAAe,gBAAgB,EAAI,KAAK,MAC1D,KAAK,UAAUA,EAAU,YAAY,GAAG,iBAAe,gBAAgB,2BAA2B,CAAC,CACvG,EAEAA,EAAU,WAAW,OAAY,CAC7B,KAAM,GAAGyC,CAAsB,GAAG,iBAAe,gBAAgB,EACrE,EAECzC,EAAU,YAAY,iBAAe,gBAAgB,EAAiB,WAAW,eAAa,OAAO,EAAI,CACtG,KAAM,GAAGyC,CAAsB,GAAG,iBAAe,aAAa,EAClE,EACA,IAAMsC,EAAiB/E,EAAU,YAAY,iBAAe,aAAa,EAAI,CACzE,KAAM,SACN,WAAY,CAAC,EACb,YAAa,UACb,qBAAsB,EAC1B,EACA+E,EAAc,YAAU,UAAU,EAAI,GAEtC,IAAMC,EAAQC,GAAU,eAAcN,EAAmB,UAAU,EAC7DO,GAAanE,EAAA4D,EAAmB,YAAnB,YAAA5D,EAA8B,WAC3CoE,EAAmBH,KAASF,GAAA9D,EAAAkE,GAAA,YAAAA,EAAY,cAAZ,YAAAlE,EAA0BgE,KAA1B,YAAAF,EAAkC,gBACpE,GAAIK,EAAkB,CAClB,IAAMC,EAA0BD,EAAiB,mBAAmB,QAChE,IAAI,qBAAkB,cAAc,GACpC,KAAK,qBAAkB,cAAc,EACzC,EACAJ,EAAc,YAAU,cAAc,EAAI,IAAIK,CAAuB,GACrED,EAAiB,QAAQ,CAACjB,EAAMvC,IAAU,CACtC,GAAIuC,EAAK,aAAkBA,EAAK,QAAU,qBAAkB,mBAAoB,CAC5E,GAAM,CAAE,WAAAI,EAAY,SAAAC,CAAS,EAAIN,GAAmBC,EAAMS,EAAmB,UAAU,EACjFU,EAAcnB,EAAK,OAASI,EAC5BgB,EAAsBrD,GAAW,GAAG,iBAAe,sBAAsB,IAAIsC,CAAQ,GAAG,EAC1FvE,EAAU,YAAY,iBAAe,sBAAsB,EAC3DA,EAAU,YAAYsF,CAAmB,EAAI,CACzC,GAAG,KAAK,MAAM,KAAK,UAAUtF,EAAU,YAAY,iBAAe,sBAAsB,CAAC,CAAC,EAC1F,YAAAqF,EACA,eAAgB,IAAID,CAAuB,IAAIzD,CAAK,EACxD,GAEA3B,EAAU,YAAYsF,CAAmB,EAAI,CACzC,KAAM,SACN,WAAY,CAAC,EACb,YAAaD,CACjB,EACArF,EAAU,YAAYsF,CAAmB,EAAE,YAAU,UAAU,EAAI,GACnEtF,EAAU,YAAYsF,CAAmB,EACrC,YAAU,cACd,EAAI,IAAIF,CAAuB,IAAIzD,CAAK,IAE5CoD,EAAc,WAAWR,CAAQ,EAAI,CACjC,KAAM,GAAG9B,CAAsB,GAAG6C,CAAmB,EACzD,CACJ,CACJ,CAAC,CACL,MAAWJ,IACPH,EACI,YAAU,cACd,EAAI,IAAIG,EAAW,kBAAkB,KAAK,qBAAkB,cAAc,IAG1EnF,IAAY,uBAAqB,IACjC0E,GAAkBC,EAAOC,CAAkB,GAC3C,CAACY,GAAeL,CAAU,GAE1BM,GAA2BxF,EAAW+E,CAAa,EAEvD,OAAO/E,EAAU,YAAY,iBAAe,uBAAuB,EACnE,OAAOA,EAAU,YAAY,GAAG,iBAAe,gBAAgB,IAAI,iBAAe,uBAAuB,GAAG,CAChH,CA3EgBG,EAAA0E,GAAA,oBAmFT,SAASY,GACZzF,EACAkF,EACAtB,EACA8B,EACAC,EAAO,GACH,CA5uBR,IAAA5E,EAAAC,EA6uBI,IAAMgC,EAAoB,iBAAe,cACnC4C,EAAU5F,EAAU,YAAYgD,CAAiB,EACtDhD,EAAU,YAAY,iBAAe,gBAAgB,EAAiB,WAAW,eAAa,OAAO,EAAI,CACtG,KAAM,GAAGyC,CAAsB,GAAGO,CAAiB,EACvD,EACA,IAAM6C,EAAiB7F,EAAU,YAAYgD,CAAiB,EAAI,CAC9D,KAAM,SACN,WAAY,CAAC,EACb,YAAa,UACb,qBAAsB,EAC1B,EACA6C,EAAc,YAAU,UAAU,EAAI,GAEtC,IAAMb,EAAQC,GAAU,eAAcrB,CAAe,EAC/CkC,EAAiBd,KAAShE,GAAAD,EAAAmE,GAAA,YAAAA,EAAY,cAAZ,YAAAnE,EAA0BiE,KAA1B,YAAAhE,EAAkC,gBAE9D8E,GACAD,EAAc,YAAU,cAAc,EAClC,IACAC,EAAe,mBAAmB,QAC9B,IAAI,qBAAkB,cAAc,GACpC,KAAK,qBAAkB,cAAc,EACzC,EACJA,EAAe,QACXJ,EAAwBR,EAAYlF,EAAW8F,EAAgBD,EAAejC,CAAe,CACjG,GACOsB,IACPW,EACI,YAAU,cACd,EAAI,IAAIX,EAAW,kBAAkB,KAAK,qBAAkB,cAAc,IAE1ES,GAEAI,GAAyB/F,EAAW,GAAM4F,CAAO,EAErD,OAAO5F,EAAU,YAAY,iBAAe,cAAc,EAC1D,OAAOA,EAAU,YAAY,GAAG,iBAAe,gBAAgB,IAAI,iBAAe,cAAc,GAAG,CACvG,CA5CgBG,EAAAsF,GAAA,oBAmDT,SAASO,GAAsBhG,EAAuBkF,EAA8B,CACvFlF,EAAU,WAAW,OAAY,CAC7B,KAAM,GAAGyC,CAAsB,GAAG,iBAAe,gBAAgB,EACrE,EACAzC,EAAU,YAAY,iBAAe,gBAAgB,EAAI,KAAK,MAC1D,KAAK,UAAUA,EAAU,YAAY,GAAG,iBAAe,gBAAgB,IAAI,iBAAe,cAAc,GAAG,CAAC,CAChH,EACIkF,IACAlF,EAAU,YAAY,iBAAe,gBAAgB,EACjD,YAAU,cACd,EAAI,IAAIkF,EAAW,kBAAkB,KAAK,qBAAkB,UAAU,GAE9E,CAZgB/E,EAAA6F,GAAA,yBAoBT,SAASC,GAA0BC,EAAoBC,EAAsD,CAChH,OAAOD,EAAM,WACPC,EAAW,WAAW,KACjBC,GAAOA,EAAG,WAAW,OAASF,EAAM,WAAW,MAAQE,EAAG,OAASF,EAAM,WAAW,IACzF,EACA,MACV,CANgB/F,EAAA8F,GAAA,6BI3yBhB,IAAAI,GAAqD,sDAYrD,IAAAC,GAAuE,SAShE,SAASC,GAAgBC,EAAuBC,EAA+B,CAC7EA,GAGDD,EAAY,OAAS,IACjBA,EAAY,OAAS,EACrBC,EAAkB,KAAOD,EAEzBC,EAAkB,MAAQD,EAAY,CAAC,EAGnD,CAXgBE,EAAAH,GAAA,mBAmBT,SAASI,GACZC,EACAC,EACAC,EACI,CA9CR,IAAAC,EA+CI,IAAMC,GAAgBD,EAAAH,GAAA,YAAAA,EAAY,cAAZ,YAAAG,EAAyB,GAC/C,GAAI,CAACC,EACD,OAEJ,IAAMR,EAAc,CAAC,EACrB,QAAWS,KAAOD,EAAe,CAC7B,IAAME,EAAaF,EAAcC,CAAG,EACpC,GAAIJ,EAAiB,QAAQK,EAAW,IAAI,EAAI,GAAI,CAChD,IAAMC,EAAYD,EAAW,UACvB,GAAGA,EAAW,IAAI,IAAIA,EAAW,SAAS,GAC1C,GAAGA,EAAW,IAAI,GACpBV,EAAY,QAAQW,CAAS,IAAM,IACnCX,EAAY,KAAKW,CAAS,CAElC,CACJ,CACAZ,GAAgBC,EAAaM,CAAQ,CACzC,CAtBgBJ,EAAAC,GAAA,8BA8BT,SAASS,GACZR,EACAS,EACAC,EACI,CACJ,IAAMR,EAAYO,EAAU,YAAYC,CAAc,EAAiB,WAAW,aAAU,cAAc,EACpGT,EAAmB,CAAC,qBAAkB,iBAAkB,qBAAkB,4BAA4B,EAC5GF,GAA2BC,EAAYC,EAAkBC,CAAsB,CACnF,CARgBJ,EAAAU,GAAA,8BAgBT,SAASG,GAA0BF,EAAuBC,EAAwBE,EAA4B,CAxFrH,IAAAT,EAyFI,IAAMD,GAAYC,EAAAM,EAAU,YAAYC,CAAc,IAApC,YAAAP,EAAsD,WAAW,eAC7EF,EAAmB,CAAC,qBAAkB,iBAAkB,qBAAkB,4BAA4B,EAC5GF,GAA2Ba,EAAU,WAAYX,EAAkBC,CAAsB,CAC7F,CAJgBJ,EAAAa,GAAA,6BAYT,SAASE,GACZC,EACAL,EACAC,EACI,CACJ,IAAME,EAAaH,EAAU,YAAYC,CAAc,EAAiB,WAAW,UAC7Ed,EAAc,CAAC,EAChBkB,IAILA,EAAgB,WAAW,QAASC,GAAkB,CAClDnB,EAAY,KAAKmB,EAAG,IAAI,CAC5B,CAAC,EACDpB,GAAgBC,EAAagB,CAAS,EAC1C,CAfgBd,EAAAe,GAAA,8BAyBT,SAASG,GACZP,EACAQ,EACAC,EACAC,EACI,CACJ,IAAMC,EAAgBF,EAAc,IAAKG,GAA0B,CAE/D,IAAMC,EAAeH,EAAa,KAAMI,GAAa,CAAC,CAACF,EAAQE,CAAQ,CAAC,EAClEC,EAAqBH,EAAQC,CAAY,EACzCG,EAAQJ,EAAQ,OAASA,EAAQ,MACvC,MAAO,CACH,MAAOG,EACP,GAAIC,GAAS,CAAE,YAAaA,CAAM,EAClC,GAAIJ,EAAQ,QAAU,CAAE,OAAQA,EAAQ,MAAO,CACnD,CACJ,CAAC,EAED,GAAID,EAAc,OAAQ,CAGtBX,EAAU,YAAY,kBAAe,gBAAgB,EAAI,CACrD,KAAM,SACN,MAAOW,CACX,EAGA,QAAWM,KAAQT,EAAoB,CACnC,IAAMU,EAAalB,EAAU,YAAYiB,CAAI,EACvCH,EAAWI,EAAW,WAAW,aACvCA,EAAW,WAAW,aAAkB,CACpC,MAAO,CACH,CACI,GAAI,OAAOJ,GAAa,SAAWA,EAAW,OAC9C,KAAM,GAAGK,CAAsB,GAAG,kBAAe,gBAAgB,EACrE,EACAL,CACJ,CACJ,CACJ,CACJ,CACJ,CAzCgBzB,EAAAkB,GAAA,oCAgDT,SAASa,GAAoBC,EAA0B,CAC1D,OAAOA,EAAS,QAAQ,IAAK,IAAI,CACrC,CAFgBhC,EAAA+B,GAAA,uBAUhB,SAASE,GAAsBJ,EAAoBG,EAA0B,CACzE,MAAO,GAAGH,CAAU,IAAIE,GAAoBC,CAAQ,CAAC,GACzD,CAFShC,EAAAiC,GAAA,yBAaF,SAASC,GACZL,EACAG,EACArB,EACAwB,EAAqB,GACrBC,EACU,CACV,IAAIC,EAAqBL,EAIzB,GAHIG,IACAE,EAAqBJ,GAAsBG,GAAwCP,EAAYG,CAAQ,GAEvGH,GAAcA,IAAeQ,EAAoB,CACjD,IAAMC,EAAmB,KAAK,MAAM,KAAK,UAAU3B,EAAU,YAAYkB,CAAU,CAAC,CAAC,EACrFlB,EAAU,YAAY0B,CAAkB,EAAIC,CAChD,CACA,OAAO3B,EAAU,YAAY0B,CAAkB,CACnD,CAhBgBrC,EAAAkC,GAAA,yBA0BT,SAASK,GACZ5B,EACA6B,EACAtC,EACAuC,EACAC,EACwE,CACxE,IAAIC,EAEJhC,EAAU,YAAY8B,CAAU,EAAI,CAChC,KAAM,SACN,WAAY,CAAC,EACb,YAAa,SACjB,EACC9B,EAAU,YAAY8B,CAAU,EAAiB,qBAAuB,GACzE9B,EAAU,YAAY8B,CAAU,EAAE,aAAU,UAAU,EAAI,GAC1D,IAAIG,EAEAH,IAAe,kBAAe,WAC9BA,IAAe,4BACfA,IAAe,uCAEfG,EAA0B,GAAGd,CAAsB,GAAGY,CAA0B,IAEhFE,EAA0B,GAAGd,CAAsB,GAAGY,CAA0B,IAAID,CAAU,IAC9FP,GAAsBQ,EAA4BD,EAAY9B,EAAW,EAAI,GAEhFA,EAAU,YAAY8B,CAAU,EAAiB,qBAAuBC,EACnE,CAAE,KAAM,GAAGE,CAAuB,EAAG,EACrC,GAEN,IAAMC,EAAUJ,EAAW,WAAW,kBAAe,SAAS,EACxD,kBAAe,QACf,kBAAe,kBACfK,EAAqB,GAAGD,CAAO,IAAIJ,CAAU,IACnD9B,EAAU,YAAYmC,CAAkB,EAAI,KAAK,MAAM,KAAK,UAAUnC,EAAU,YAAY,GAAGkC,CAAO,EAAE,CAAC,CAAC,EAE1G,IAAME,EAAqB,GAAG,kBAAe,OAAO,IAAIC,GAAWP,CAAU,CAAC,IAC7E9B,EAAU,YAAYmC,CAAkB,EAAiB,WAAW,QAAQ,KACzEhB,EAAyBiB,EAE7B,IAAME,EAAWR,EAAW,WAAW,kBAAe,SAAS,EACzD,kBAAe,QACf,kBAAe,yBACfS,EAAWvC,EAAU,YAAYoC,CAAkB,EAAI,KAAK,MAC9D,KAAK,UAAUpC,EAAU,YAAYsC,CAAQ,CAAC,CAClD,EACAC,EAAQ,WAAa,CAAC,EACtBA,EAAQ,qBAAuB,GAG/B,IAAIC,EAAeC,EACnB,GAAIX,IAAe,kBAAe,WAAa9B,EAAU,WAAW,OAAW,CAC3EyC,EAAoB,GAAG,kBAAe,MAAM,IAAIX,CAAU,IACzD9B,EAAU,WAAW,OAAyB,KAAO,GAAGmB,CAAsB,GAAGsB,CAAiB,GAEnGzC,EAAU,YAAYyC,CAAiB,EAAI,KAAK,MAC5C,KAAK,UAAUzC,EAAU,YAAY,kBAAe,aAAa,CAAC,CACtE,EACA,IAAM0C,EAA2B,GAAG,kBAAe,aAAa,IAAIL,GAAWP,CAAU,CAAC,IACzF9B,EAAU,YAAYyC,CAAiB,EAAiB,WAAW,QAAQ,KACxEtB,EAAyBuB,EAE7BF,EAAgBxC,EAAU,YAAY0C,CAAwB,EAAI,KAAK,MACnE,KAAK,UAAU1C,EAAU,YAAY,kBAAe,OAAO,CAAC,CAChE,EACAwC,EAAc,WAAa,CAAC,EAC5BA,EAAc,qBAAuB,EACzC,CAEA,OAAIX,IACAG,EAAeW,GACXpD,GAAA,YAAAA,EAAY,mBACZsC,EAAmB,KACnBA,EAAmB,SACvB,EACIG,IACAhC,EAAU,YAAY8B,CAAU,EAAE,aAAU,cAAc,EAAI9B,EAAU,YAAYmC,CAAkB,EAClG,aAAU,cACd,EAAIH,EACAQ,IACAxC,EAAU,YAAYyC,CAAiB,EAAE,aAAU,cAAc,EAAIT,KAK1E,CAAE,QAAAO,EAAS,cAAAC,EAAe,aAAAR,CAAa,CAClD,CAvFgB3C,EAAAuC,GAAA,gCA0GT,SAASgB,GAA0BC,EAA4B,CAElE,OADiBA,EAAW,UAAUA,EAAW,YAAY,GAAG,EAAI,CAAC,EACrD,QAAQ,QAAS,EAAE,CACvC,CAHgBC,EAAAF,GAAA,6BAUT,SAASG,GAA0BC,EAAiC,CAlV3E,IAAAC,EAAAC,EAAAC,EAmVI,IAAIC,EAEJ,OAAIJ,EAAO,MACHA,EAAO,gBAAkB,8BACzBI,EAAW,SACJJ,EAAO,gBAAkB,gCAChCI,EAAW,WACJJ,EAAO,QAAU,2CACxBI,EAAW,YAEXA,GAAWF,GAAAD,EAAAD,EAAO,QAAP,YAAAC,EAAc,UAAd,YAAAC,EAAuB,KAAK,QAAQ,OAAQ,KAEpDC,EAAAH,EAAO,QAAP,MAAAG,EAAc,WAAW,2BAChCC,EAAWR,GAA0BI,EAAO,KAAK,GAE9CI,CACX,CAjBgBN,EAAAC,GAAA,6BA2BT,SAASM,GAAkBC,EAAmC,CA7WrE,IAAAL,EAAAC,EA8WI,IAAIE,EAEJ,OAAIE,EAAM,OACFL,EAAAK,EAAM,MAAS,UAAf,MAAAL,EAAwB,KACxBG,EAAWE,EAAM,MAAS,QAAQ,KAAK,QAAQ,OAAQ,EAAE,EAEzDF,EAAW,SAERE,EAAM,OACbF,EAAWL,GAA0BO,EAAM,OAAU,OAAO,EACrDA,EAAM,QACbF,EAAWE,EAAM,QAAW,KAAK,QAAQ,OAAQ,EAAE,GAC5CJ,EAAAI,EAAM,QAAN,MAAAJ,EAAgB,WAAW,yBAClCE,EAAWR,GAA0BU,EAAM,KAAQ,EAC5CA,EAAM,OACbF,EAAWE,EAAM,MAGdF,CACX,CApBgBN,EAAAO,GAAA,qBA2BT,SAASE,GAAwBC,EAAoBF,EAAqB,CAC7E,IAAMF,EAAWC,GAAkBC,CAAK,EACpCF,IACAI,EAAW,aAAU,QAAQ,EAAIJ,EAEzC,CALgBN,EAAAS,GAAA,2BAaT,SAASE,GAAuBD,EAA4CE,EAA0B,CACzG,MAAO,GAAGC,CAAsB,GAAGC,GAAsBJ,EAAYE,CAAQ,CAAC,EAClF,CAFgBZ,EAAAW,GAAA,0BAWT,SAASI,GAAiBC,EAAwBC,EAAmBC,EAA0B,CAClG,IAAMC,EAAaD,EAAY,GAAGD,CAAS,IAAIC,CAAS,IAAMD,EAC9DD,EAAW,KAAO,GAAGH,CAAsB,GAAGM,CAAU,EAC5D,CAHgBnB,EAAAe,GAAA,oBAUT,SAASK,GAAuBC,EAAyE,CAC5G,GAAKA,EAAsB,eACvB,OAAQA,EAAsB,eAC3B,GAAKA,EAAgC,mBAAoB,CAC5D,GAAM,CAACC,EAAWpB,CAAM,EAAKmB,EAAgC,mBAAmB,MAAM,IAAI,eAAY,EAAE,EACxG,MAAO,IAAIC,CAAS,KAAK,eAAY,GAAGpB,CAAM,EAClD,CAEJ,CARgBF,EAAAoB,GAAA,0BAkBT,SAASG,GACZF,EACAT,EACAY,EACAC,EACAC,EACAC,EACAC,EAAiB,GACnB,CACE,IAAMC,EAAiB,aAAaH,CAAa,GAAGL,EAAM,IAAI,GAAGO,CAAc,GACzEE,EAAoB,aAAaH,CAAgB,GAAGN,EAAM,IAAI,GAAGO,CAAc,GACrFJ,EAAS,WAAWZ,CAAQ,EAAI,CAC5B,KAAMD,GAAuBgB,EAAmBG,EAAoBD,EAAgBjB,CAAQ,CAChG,EACA,IAAMF,EAAaqB,GACfJ,EAAmBG,EAAoBD,EACvCjB,EACAa,EACA,GACAE,EAAmBG,EAAoB,MAC3C,EACAE,GAA8BX,EAAOX,EAAYE,CAAQ,EACzDF,EAAW,aAAU,cAAc,EAAIW,EAAM,eAC7CX,EAAW,aAAU,UAAU,EAAI,EACvC,CAxBgBV,EAAAuB,GAAA,wBAgChB,SAASU,GAAqBvB,EAAiCwB,EAAaC,EAAsB,CAC1F,OAAOzB,GAAe,WACtBA,EAAWwB,CAAG,EAAIC,EAE1B,CAJSnC,EAAAiC,GAAA,wBAYF,SAASG,GAAcX,EAAuBY,EAAwBC,EAASC,GAAW,EAAE,EAAS,CACxG,IAAMC,EAAYH,EAAW,iBAAiB,IAAKI,GAAaA,EAAS,IAAI,EACvEC,EAAgBjB,EAAU,YAAY,GAAG,kBAAe,aAAa,GAAGa,CAAM,EAAE,EACtFL,GAAqBS,EAAc,WAAW,OAAO,MAAU,OAAQF,CAAS,CACpF,CAJgBxC,EAAAoC,GAAA,iBAYT,SAASO,GAAaC,EAAgBC,EAAgD,CACzF,IAAIC,EAAYF,EACZtB,EACJ,OAAIwB,EAAU,QAAQ,GAAG,EAAI,IACzBA,EAAYA,EAAU,UAAU,EAAGA,EAAU,QAAQ,GAAG,CAAC,GAEzDD,GAAYC,EAAU,QAAQ,GAAG,EAAI,IACrCxB,EAAYwB,EAAU,UAAU,EAAGA,EAAU,QAAQ,GAAG,CAAC,EACzDA,EAAYA,EAAU,UAAUA,EAAU,YAAY,GAAG,EAAI,CAAC,GAE9DD,GAAYC,EAAU,QAAQ,GAAG,EAAI,IACrCxB,EAAYwB,EAAU,UAAU,EAAGA,EAAU,YAAY,GAAG,CAAC,EAC7DA,EAAYA,EAAU,UAAUA,EAAU,YAAY,GAAG,EAAI,CAAC,GAE7DxB,IACDA,EAAYsB,EAAO,UAAU,EAAGA,EAAO,YAAY,GAAG,CAAC,GAEpD,CAAE,IAAKE,EAAU,QAAQ,KAAM,EAAE,EAAG,GAAIxB,CAAU,CAC7D,CAlBgBtB,EAAA2C,GAAA,gBA0BT,SAASI,GAAmBC,EAAwBC,EAAoB/B,EAAyB,CACpG,GAAI8B,EAAe,MACfC,EAAW/B,CAAS,EAAE,aAAU,IAAI,EAAI,CACpC,CAAE,KAAM,iBAAc,MAAO,MAAOgC,GAAyBF,EAAe,KAAQ,CAAE,CAC1F,UAEAA,EAAe,QAAa,qBAAkB,qBAC9CA,EAAe,QAAa,qBAAkB,mBAChD,CACE,GAAM,CAAE,IAAAd,EAAK,GAAAiB,CAAG,EAAIR,GAAaK,EAAe,OAAW,EAAI,EAC/DC,EAAW/B,CAAS,EAAE,aAAU,IAAI,EAAI,CAAC,CAAE,KAAM,iBAAc,OAAQ,MAAOgB,CAAI,CAAC,EAC/EiB,IACAF,EAAW/B,CAAS,EAAE,aAAU,MAAM,EAAIiC,EAElD,SAAWH,EAAe,QAAa,qBAAkB,uBAAwB,CAC7E,GAAM,CAAE,IAAAd,CAAI,EAAIS,GAAaK,EAAe,OAAU,MAAO,EAAK,EAClEC,EAAW/B,CAAS,EAAE,aAAU,IAAI,EAAI,CAAC,CAAE,KAAM,iBAAc,OAAQ,MAAOkC,GAAkBlB,CAAG,CAAE,CAAC,EACtGe,EAAW/B,CAAS,EAAE,aAAU,MAAM,EAAI8B,EAAe,OAAU,QAAQ,mBAAmB,MAAM,GAAG,EAAE,CAAC,CAC9G,MACIA,EAAe,QAAa,qBAAkB,mCAC9CA,EAAe,QAAa,qBAAkB,sCAE9CC,EAAW/B,CAAS,EAAE,aAAU,IAAI,EAAI,CACpC,CAAE,KAAM,iBAAkB,MAAO8B,EAAe,iBAAc,cAAc,CAAE,EAC9E,CAAE,KAAM,SAAU,MAAOA,EAAe,MAAU,CACtD,EAER,CA3BgBhD,EAAA+C,GAAA,sBC7gBhB,IAAAM,GAA0C,SCMxC,IAAAC,GAAY,CACV,CACE,QAAW,QACX,QAAW,CACT,SACA,YACA,YACA,YACA,YACA,WACF,CACF,EACA,CACE,QAAW,QACX,QAAW,CACT,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,CACF,EACA,CACE,QAAW,QACX,QAAW,CACT,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,CACF,EACA,CACE,QAAW,OACX,QAAW,CACT,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACF,CACF,EACA,CACE,QAAW,OACX,QAAW,CACT,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACF,CACF,EACA,CACE,QAAW,OACX,QAAW,CACT,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACF,CACF,CACF,EC9GA,IAAAC,GAAW,UFKN,IAAMC,GAAN,MAAMA,EAAiB,CAG1B,aAAc,CACNA,GAAiB,eAAe,SAAW,IAC3CA,GAAiB,eAAiB,KAAK,qBAAqB,EAEpE,CAKA,OAAO,qBAA4B,CAC/BA,GAAiB,eAAiB,CAAC,CACvC,CAMO,gBAAqC,CACxC,OAAOC,EACX,CAQO,sBAAiC,CACpC,IAAIC,EAAmB,CAAC,EAClBC,EAAwBA,GAE1BC,EAAc,KAAK,eAAe,EACtC,GAAIA,EACA,GAAIA,EAAY,WAAW,OAAO,EAE9BF,EAASC,EAAS,CAAC,EAAE,YAClB,CACHC,EAAcA,EAAY,UAAU,EAAGA,EAAY,YAAY,GAAG,CAAC,EACnE,IAAMC,EAAMF,EAAS,KAAME,GAAQA,EAAI,QAAQ,WAAWD,CAAW,CAAC,EAClEC,IACAH,EAASG,EAAI,QAErB,CAEJ,OAAOH,CACX,CAOO,0BAA0BI,EAAuBC,EAA+B,CAEnF,GAAI,QAAQ,IAAI,wBAA0B,OACtC,OAEJ,GAAI,CAACD,GAAiBA,EAAc,WAAW,GAAG,EAAG,CACjD,IAAME,EAAUC,EAAQ,EAAE,uBAAwB,CAAE,cAAAH,CAAc,CAAC,EACnEI,GAAIH,EAAQ,CACR,SAAU,eAAY,KACtB,QAAAC,EACA,SAAU,CACN,KAAM,eACV,CACJ,CAAC,EACD,MACJ,CACA,IAAMG,EACFL,IAAkB,SAAW,SAAWA,EAAc,UAAU,EAAGA,EAAc,YAAY,GAAG,CAAC,EACrG,GAAI,CAACN,GAAiB,eAAe,SAASW,CAAa,EAAG,CAC1D,IAAMH,EAAUC,EAAQ,EAAE,qBAAsB,CAAE,cAAAH,CAAc,CAAC,EACjEI,GAAIH,EAAQ,CACR,SAAU,eAAY,QACtB,QAAAC,EACA,SAAU,CACN,KAAM,eACV,CACJ,CAAC,CACL,CACJ,CACJ,EApF8BI,EAAAZ,GAAA,oBAAjBA,GACF,eAA2B,CAAC,EADhC,IAAMa,GAANb,GGCP,IAAAc,GAYO,SCZP,IAAAC,GAQO,SCfP,IAAAC,GAOO,SAOA,IAAeC,GAAf,MAAeA,EAAY,CAOpB,YACNC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACF,CAVF,KAAO,qBAAsC,CAAC,EAW1C,IAAMC,EAAaC,GAAkB,cAAW,WAAW,EAC3D,KAAK,IAAM,CACP,QAASD,EAAW,KACpB,GAAIP,EAAS,SAAS,EAAE,GACxB,MAAAG,EACA,KAAAD,EACA,OAAQ,CACJ,cAAeE,EACf,MAAOA,IAAY,wBAAqB,GAAK,gBAAa,GAAK,gBAAa,EAChF,EACA,GAAIC,GAAY,CAAE,SAAAA,CAAS,CAC/B,EACA,KAAK,QAAUJ,EACf,KAAK,OAASK,CAClB,CASO,mBAA8D,CACjE,IAAMG,EAAqB,CAAC,EACtBC,EAAmB,CAAC,EACtBC,EAEJ,QAAWC,KAAU,KAAK,IAAI,MAE1B,GADAD,EAAO,KAAK,IAAI,MAAMC,CAAM,EACxBD,EAAK,OAAQ,CACb,IAAME,EAASF,EAAK,OACpB,GAAIA,EAAK,WAAa,YAAS,WAAY,CACvC,IAAMJ,EAAaC,GAAkBG,EAAK,SAAUA,EAAK,SAAS,EAClE,GAAI,KAAK,QAAQJ,EAAW,QAAQ,EAChCM,EAAO,QAAUN,EAAW,SACzB,CACH,IAAMO,EAAoBN,GAAkBG,EAAK,QAAQ,EACzDE,EAAO,QAAUC,EAAkB,IACvC,CACAL,EAAY,GAAG,WAAQ,KAAK,IAAIG,CAAM,OAAO,EAAIC,CACrD,CACJ,CAGJ,IAAME,EAAmB,KAAK,MAAM,KAAK,UAAU,KAAK,GAAG,CAAC,EAC5D,QAAWH,KAAUG,EAAI,MACrB,OAAOA,EAAI,MAAMH,CAAM,EAAE,OAE7B,OAAAF,EAAU,YAAS,GAAG,EAAIK,EAEnB,CAAE,UAAAL,EAAW,YAAAD,CAAY,CACpC,CACJ,EArEkCO,EAAAjB,GAAA,eAA3B,IAAekB,GAAflB,GCfP,IAAAmB,GAWO,SCVP,IAAAC,GAA2D,SAkBpD,SAASC,GAAgBC,EAAyBC,EAAyBC,EAA8B,CAC5G,GAAID,EAAO,YAAY,SAAS,kBAAe,KAAK,EAChDD,EAAOC,EAAO,UAAU,EAAIA,EAAO,iBAC5BA,EAAO,cAAgB,eAAY,YAAa,CAIvD,GAAI,EAHoBC,GAAA,YAAAA,EAAY,YAAY,kBAAe,cAA4B,WACvFD,EAAO,UACX,EAEI,OAEJ,IAAME,EAAUF,EAAO,UAAU,MAAM,GAAG,EAIpCG,EAHaD,EAAQA,EAAQ,OAAS,CAAC,EAGX,MAAM,2BAA2B,EAC7DE,EAAQD,EAAeA,EAAe,OAAS,CAAC,EACjD,QAAQ,sBAAuB,EAAE,EACjC,QAAQ,yBAA0B,gBAAa,EAC/C,QAAQ,IAAK,KAAK,EAClBJ,EAAO,UACRA,EAAO,QAAU,CAAC,GAEjBA,EAAO,QAAQK,CAAK,IACrBL,EAAO,QAAQK,CAAK,EAAI,CAAC,GAE7BL,EAAO,QAAQK,CAAK,EAAEJ,EAAO,UAAU,EAAIA,EAAO,QACtD,CACJ,CA3BgBK,EAAAP,GAAA,mBClBhB,IAAAQ,GAA+B,SAUxB,IAAMC,GAAgCC,EAAA,CAACC,EAAkBC,IAAyB,CACrF,IAAIC,EAAkBF,EACtB,OAAAC,EAAK,MAAM,GAAG,EAAE,QAAQ,SAAUE,EAAS,CAClCD,EAAgBC,CAAO,IACxBD,EAAgBC,CAAO,EAAI,CAAC,GAEhCD,EAAkBA,GAAmBA,EAAgBC,CAAO,CAChE,CAAC,EACMD,GAAoC,CAAC,CAChD,EAT6C,iCAkBhCE,GAA6BL,EAAA,CAACC,EAAkBC,IAAqC,CAC9F,IAAIC,EAAkBF,EAChBK,EAAWJ,EAAK,MAAM,GAAG,EAC/B,QAAWE,KAAWE,EAAU,CAC5B,GAAI,CAACH,EAAgBC,CAAO,EACxB,OAEJD,EAAkBA,GAAmBA,EAAgBC,CAAO,CAChE,CACA,OAAOD,GAAoC,CAAC,CAChD,EAV0C,8BAY7BI,GAAgCP,EAAA,CAACC,EAAkBC,IAAuB,CACnF,IAAIC,EAAkBF,EACtB,QAASO,EAAQ,EAAGA,EAAQN,EAAK,MAAM,GAAG,EAAE,OAAQM,IAAS,CACzD,IAAMJ,EAAUF,EAAK,MAAM,GAAG,EAAEM,CAAK,EACjCA,IAAUN,EAAK,MAAM,GAAG,EAAE,OAAS,EACnC,OAAOC,EAAgBC,CAAO,EAE9BD,EAAkBA,GAAmBA,EAAgBC,CAAO,CAEpE,CACJ,EAV6C,iCAY7C,SAASK,GAAmBC,EAA2C,CACnE,MAAO,CACH,UAAW,CACP,KAAM,iCAAmCA,CAC7C,CACJ,CACJ,CANSV,EAAAS,GAAA,sBAeT,SAASE,GACLC,EACAC,EACAC,EAC6B,CAC7B,GAAKF,EAGL,QAAWG,KAAUH,EAAO,CACxB,IAAMI,EAAOJ,EAAMG,CAAM,EACzB,GAAIC,EAAK,YAAcH,GAAaG,EAAK,qBAAuBF,EAC5D,OAAOE,CAEf,CACJ,CAdShB,EAAAW,GAAA,sBAgBT,SAASM,GAA6BC,EAAuBC,EAAqBC,EAAsB,CAEpG,GAAKF,EAAYC,CAAW,IAGxBC,EAAa,OAAY,CAAC,OAAO,OAAOA,EAAa,KAAQ,EAAE,CAAC,IAChEA,EAAa,MAAS,GAAGF,EAAYC,CAAW,EAAE,QAAQ,IAAID,EAAYC,CAAW,EAAE,SAAS,EAAE,EAC9FV,GAAmBS,EAAYC,CAAW,EAAE,QAAQ,GAEvDC,EAAa,QACdA,EAAa,MAAW,CACpB,CAAC,GAAGF,EAAYC,CAAW,EAAE,QAAQ,IAAID,EAAYC,CAAW,EAAE,SAAS,EAAE,EAAGV,GAC5ES,EAAYC,CAAW,EAAE,QAC7B,CACJ,GAEA,CAAC,MAAM,QAAQC,EAAa,KAAQ,GAAG,CACvC,IAAIC,EAAyBV,GACzBS,EAAa,MACbF,EAAYC,CAAW,EAAE,UACzBD,EAAYC,CAAW,EAAE,kBAC7B,EAEKE,IACDD,EAAa,MAAS,GAAGF,EAAYC,CAAW,EAAE,QAAQ,IAAID,EAAYC,CAAW,EAAE,SAAS,EAAE,EAC9FE,EAAyBZ,GAAmBS,EAAYC,CAAW,EAAE,QAAQ,GAGrFG,GAA6BH,EAAaD,EAAaG,CAAsB,CACjF,CACJ,CA9BSrB,EAAAiB,GAAA,gCAgCT,SAASM,GAAWH,EAAsBF,EAAuBM,EAAqB,CAC9EJ,EAAa,OACb,OAAO,KAAKA,EAAa,KAAQ,EAAE,QAASK,GAAQ,CAtH5D,IAAAC,EAuHY,IAAMC,EAAcP,EAAa,MAASK,CAAG,EAC7C,KAAIC,EAAAC,EAAY,YAAZ,YAAAD,EAAuB,QAAS,MAAG,2BAA4B,CAC/D,IAAME,EAAY,cAAcD,EAAY,SAAS,GAChDT,EAAYU,CAAS,GACtB,OAAOR,EAAa,MAASK,CAAG,CAExC,CACJ,CAAC,GAGAD,EAAW,WAAa,cAAW,YAAcA,EAAW,WAAa,cAAW,qBACrF,OAAO,KAAKA,EAAW,UAAU,EAAE,SAAW,GAE9C,OAAOJ,EAAa,KAE5B,CAlBSpB,EAAAuB,GAAA,cA0BF,SAASD,GAA6BP,EAAgBG,EAAuBE,EAA4B,CAC5G,IAAMI,EAAaN,EAAYH,CAAM,EACrC,GAAKS,IAGDA,EAAW,YACXJ,EAAa,UAAeI,EAAW,WAEvCA,EAAW,WAAa,cAAW,aACnCJ,EAAa,UAAa,KAAU,IAEpCI,EAAW,qBACXJ,EAAa,mBAAwBI,EAAW,oBAEhDA,EAAW,kBACXJ,EAAa,kBAAuBI,EAAW,kBACxC,sBAAuBJ,GAC9B,OAAOA,EAAa,kBAEpBI,EAAW,YAAY,CACvB,QAAWL,KAAeK,EAAW,WACjCP,GAA6BC,EAAaC,EAAaC,CAAY,EAGlE,MAAM,QAAQA,EAAa,KAAQ,GACpCG,GAAWH,EAAcF,EAAaM,CAAU,CAExD,CACJ,CA5BgBxB,EAAAsB,GAAA,gCF9GhB,IAAAO,GAAyB,SGhCzB,IAAAC,GAAA,GAAAC,GAAAD,GAAA,wBAAAE,GAAA,iBAAAC,GAAA,uBAAAC,GAAA,WAAAC,GAAA,mBAAAC,GAAA,gCAAAC,GAAA,oBAAAC,GAAA,sBAAAC,GAAA,kBAAAC,GAAA,uBAAAC,GAAA,wBAAAC,GAAA,sBAAAC,GAAA,eAAAC,GAAA,qBAAAC,GAAA,cAAAC,GAAA,wBAAAC,GAAA,UAAAC,GAAA,mBAAAC,GAAA,kBAAAC,GAAA,oBAAAC,GAAA,iBAAAC,GAAA,eAAAC,GAAA,wBAAAC,GAAA,cAAAC,GAAA,iBAAAC,GAAA,yBAAAC,GAAA,gBAAAC,GAAA,iBAAAC,GAAA,aAAAC,GAAA,wBAAAC,GAAA,8BAAAC,GAAA,oBAAAC,GAAA,kCAAAC,GAAA,oCAAAC,GAAA,gCAAAC,GAAA,2BAAAC,GAAA,mCAAAC,GAAA,wBAAAC,GAAA,qBAAAC,GAAA,mCAAAC,GAAA,qBAAAC,GAAA,8BAAAC,GAAA,+BAAAC,GAAA,6BAAAC,GAAA,+BAAAC,GAAA,4BAAAC,GAAA,6BAAAC,GAAA,wBAAAC,GAAA,gCAAAC,GAAA,kCAAAC,GAAA,+BAAAC,GAAA,gCAAAC,GAAA,2BAAAC,GAAA,4BAAAC,GAAA,wBAAAC,GAAA,0BAAAC,GAAA,4BAAAC,GAAA,2BAAAC,GAAA,oBAAAC,GAAA,iBAAAC,GAAA,kBAAAC,GAAA,+BAAAC,GAAA,oBAAAC,GAAA,UAAAC,GAAA,YAAAC,GAAA,cAAAC,GAAA,aAAAC,GAAA,cAAAC,GAAA,gBAAAC,GAAA,sBAAAC,GAAA,iCAAAC,GAAA,sBAAAC,GAAA,YAAAC,GAAA,kBAAAC,GAAA,cAAAC,GAAA,0BAAAC,GAAA,6BAAAC,GAAA,6BAAAC,GAAA,eAAAC,GAAA,iCAAAC,GAAA,kCAAAC,GAAA,uBAAAC,GAAA,4BAAAC,GAAA,eAAAC,GAAA,6BAAAC,GAAA,kCAAAC,GAAA,wBAAAC,GAAA,4BAAAC,GAAA,wCAAAC,GAAA,wBAAAC,GAAA,2BAAAC,GAAA,2BAAAC,GAAA,2BAAAC,GAAA,6BAAAC,GAAA,2BAAAC,GAAA,uBAAAC,KCQA,IAAAC,GAAuE,SAEhE,IAAMC,GAAsBC,EAACC,GACzB,GAAG,mBAAgB,OAAO,UAAUA,EAAS,CAAC,CAAC,sBADvB,uBAItBC,GAAwBF,EAACC,GAC3BF,GAAoBE,CAAQ,EAAI,iBADN,yBAIxBE,GAAwBH,EAACC,GAC3BF,GAAoBE,CAAQ,EAAI,iBADN,yBAIxBG,GAA2BJ,EAACC,GAC9BF,GAAoBE,CAAQ,EAAI,oBADH,4BAQjC,IAAMI,GAAoBC,EAAA,IACtB,mBAAgB,IADM,qBAIpBC,EAAsBD,EAACE,GAA8B,CAC9D,IAAMC,EAAsB,CAAC,mBAAgB,IAAM,QAAQ,EAC3D,OAAAD,EAAQ,QAASE,GAAU,CACnBA,KAAS,MAAG,iBACZD,EAAU,KAAK,UAAU,EAEzBA,EAAU,KAAKC,CAAK,CAE5B,CAAC,EACDD,EAAU,IAAI,EACPA,EAAU,KAAK,GAAG,CAC7B,EAXmC,uBAatBE,GAAwBL,EAACE,GAA8B,CAChE,IAAMC,EAAsB,CAAC,mBAAgB,GAAG,EAChD,OAAAD,EAAQ,QAASE,GAAU,CACvBD,EAAU,KAAKC,CAAK,CACxB,CAAC,EACDD,EAAU,IAAI,EACPA,EAAU,KAAK,GAAG,CAC7B,EAPqC,yBAUxBG,GAAqBN,EAAA,CAACO,EAAoBC,IAC5C,GAAG,mBAAgB,OAAO,UAAUD,EAAS,CAAC,CAAC,gDAAgDC,CAAM,GAD9E,sBAKrBC,GAA2BT,EAACO,GAA+B,CACpE,IAAMJ,EAAsB,CAAC,mBAAgB,OAAO,EACpD,OAAAI,EAAS,QAASG,GAAY,CAC1BP,EAAU,KAAK,SAAWO,CAAO,CACrC,CAAC,EACMP,EAAU,KAAK,GAAG,CAC7B,EANwC,4BAS3BQ,GAAyBX,EAACO,GAA+B,CAClE,IAAMJ,EAAsB,CAAC,EAC7B,OAAAA,EAAU,KAAKM,GAAyBF,CAAQ,CAAC,EACjDJ,EAAU,KAAK,oBAAoB,EAC5BA,EAAU,KAAK,GAAG,CAC7B,EALsC,0BAOzBS,GAAgCZ,EAAA,CAACO,EAAoBM,EAAqBC,IAA8B,CACjH,IAAMX,EAAsB,CAAC,EAC7BA,EAAU,KAAKM,GAAyBF,CAAQ,CAAC,EACjD,IAAMQ,EAAoBD,EAAU,QAAQ,iBAAe,wBAAwB,EACnF,OAAAX,EAAU,KAAK,+BAAiCY,CAAiB,EAC1DZ,EAAU,KAAK,GAAG,CAC7B,EAN6C,iCAQhCa,GAAmChB,EAAA,CAC5CO,EACAM,EACAC,IAEaF,GAA8BL,EAAU,CAAC,EAAeO,CAAS,EAChE,iBAN8B,oCASnCG,GAAmCjB,EAAA,CAC5CO,EACAM,EACAC,IAEaF,GAA8BL,EAAU,CAAC,EAAeO,CAAS,EAChE,iBAN8B,oCASnCI,GAAwBlB,EAAA,IAC1B,8BAA8B,MAAG,qBAAqB,IAAI,MAAG,iCAAiC,GADpE,yBAIxBmB,GAAiCnB,EAAA,CAC1CoB,EACAP,EACAC,KACGX,IACM,CACT,IAAMkB,EAAY,IACZC,EAAiBR,EAAU,MAAMO,CAAS,EAC1CE,EAAgBH,EAASA,EAAS,OAAS,CAAC,EAAE,MAAMC,CAAS,EAC/DG,EAAa,GACbF,EAAe,SAAW,EAG1BE,EAAa,CAACF,EAAe,CAAC,EAAGA,EAAe,CAAC,CAAC,EAAE,KAAKD,CAAS,EAC3DC,EAAe,SAAW,IACjCE,EAAaF,EAAe,CAAC,GAEjC,IAAMG,EAAkB,CAACH,EAAe,CAAC,EAAGC,EAAcA,EAAc,OAAS,CAAC,EAAGC,CAAU,EAAE,KAAKH,CAAS,EAE/G,OAAAlB,EAAU,QAAQsB,CAAe,EAE1B,GAAGP,GAAsB,CAAC,IAAIf,EAAU,KAAK,GAAG,CAAC,EAC5D,EAtB8C,kCAwBjCuB,GAAN,MAAMA,EAAqC,CAOlD,EAPkD1B,EAAA0B,GAAA,iBAM9CC,EAAA,CADCC,GAAQ,UAAU,GALVF,GAMT,wBANG,IAAMG,GAANH,GASMI,GAAN,MAAMA,EAAsC,CAsDnD,EAtDmD9B,EAAA8B,GAAA,eAM/CH,EAAA,CALCI,EAAS,CACN,SAAU,CACN,KAAM,IAAc,SACxB,CACJ,CAAC,GALQD,GAMT,qBAOAH,EAAA,CALCI,EAAS,CACN,SAAU,CACN,KAAM,IAAc,SACxB,CACJ,CAAC,GAZQD,GAaT,2BAUAH,EAAA,CARCI,EAAS,CACN,SAAU,CACN,KAAM,IAAc,qBACxB,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAtBQF,GAuBT,oCAUAH,EAAA,CARCI,EAAS,CACN,SAAU,CACN,KAAM,IAAc,qBACxB,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAhCQF,GAiCT,kCAUAH,EAAA,CARCI,EAAS,CACN,SAAU,CACN,KAAM,IAAc,qBACxB,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GA1CQF,GA2CT,4CAUAH,EAAA,CARCI,EAAS,CACN,SAAU,CACN,KAAM,IAAc,SACxB,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GApDQF,GAqDT,2BArDG,IAAMG,GAANH,GCnIA,IAAMI,GAAN,MAAMA,EAAoD,CAsEjE,EAtEiEC,EAAAD,GAAA,sBAM7DE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GALQJ,GAMT,yBAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAZQJ,GAaT,qBAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAnBQJ,GAoBT,wBAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA1BQJ,GA2BT,4CAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAjCQJ,GAkCT,uCAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAxCQJ,GAyCT,0CAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA/CQJ,GAgDT,2BAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAtDQJ,GAuDT,uCAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA7DQJ,GA8DT,oBAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GApEQJ,GAqET,8BArEG,IAAMM,GAANN,GAwEMO,GAAN,MAAMA,WAAmBD,EAAmE,CAmNnG,EAnNmGL,EAAAM,GAAA,cAM/FL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GALQG,GAMT,qBAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAZQG,GAaT,wBAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAnBQG,GAoBT,wBAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA1BQG,GA2BT,wBAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAjCQG,GAkCT,kCAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAxCQG,GAyCT,6BASAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAjDQG,GAkDT,0BAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAxDQG,GAyDT,wBAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA/DQG,GAgET,sBAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAtEQG,GAuET,yBAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA7EQG,GA8ET,8BAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GApFQG,GAqFT,mCAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA3FQG,GA4FT,uCAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAlGQG,GAmGT,iCAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAzGQG,GA0GT,mDAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAhHQG,GAiHT,6CAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAvHQG,GAwHT,6BAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA9HQG,GA+HT,yCAUAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAxIQG,GAyIT,8CAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA/IQG,GAgJT,0BAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAtJQG,GAuJT,kCAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA7JQG,GA8JT,mCAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GApKQG,GAqKT,8BAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA3KQG,GA4KT,kCAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAlLQG,GAmLT,6BAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAzLQG,GA0LT,4BAOAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAhMQG,GAiMT,+BAUAL,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA1MQG,GA2MT,4BA3MG,IAAMC,GAAND,GAqNME,GAAN,MAAMA,WAAiBH,EAA0C,CA6ExE,EA7EwEL,EAAAQ,GAAA,YAMpEP,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GALQK,GAMT,qBAOAP,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAZQK,GAaT,wBAOAP,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAnBQK,GAoBT,wBAOAP,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA1BQK,GA2BT,gCAOAP,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAjCQK,GAkCT,0BAOAP,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAxCQK,GAyCT,wBAOAP,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA/CQK,GAgDT,8BAOAP,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAtDQK,GAuDT,kCAOAP,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA7DQK,GA8DT,sBAOAP,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GApEQK,GAqET,yBAOAP,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA3EQK,GA4ET,uCA5EG,IAAMC,GAAND,GA+EME,GAAN,MAAMA,WAAuBL,EAAgD,CAiDpF,EAjDoFL,EAAAU,GAAA,kBAMhFT,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GALQO,GAMT,qBAOAT,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAZQO,GAaT,wBAOAT,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAnBQO,GAoBT,wBAOAT,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA1BQO,GA2BT,sCAOAT,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAjCQO,GAkCT,mCAOAT,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAxCQO,GAyCT,uCAOAT,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA/CQO,GAgDT,kCAhDG,IAAMC,GAAND,GAmDME,GAAN,MAAMA,WAAkBP,EAA2C,CA0C1E,EA1C0EL,EAAAY,GAAA,aAMtEX,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GALQS,GAMT,qBAOAX,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAZQS,GAaT,wBAOAX,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAnBQS,GAoBT,wBAOAX,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA1BQS,GA2BT,iCAOAX,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAjCQS,GAkCT,wBAOAX,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAxCQS,GAyCT,mDAzCG,IAAMC,GAAND,GA4CME,GAAN,MAAMA,WAAqBT,EAA8C,CAgHhF,EAhHgFL,EAAAc,GAAA,gBAM5Eb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GALQW,GAMT,qBAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAZQW,GAaT,wBAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAnBQW,GAoBT,wBAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA1BQW,GA2BT,oCAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAjCQW,GAkCT,qBAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAxCQW,GAyCT,wBAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA/CQW,GAgDT,yBAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAtDQW,GAuDT,0BAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA7DQW,GA8DT,sBAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GApEQW,GAqET,yBAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA3EQW,GA4ET,oCAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAlFQW,GAmFT,4CAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAzFQW,GA0FT,2BAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAhGQW,GAiGT,6BAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAvGQW,GAwGT,uCAOAb,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA9GQW,GA+GT,8BA/GG,IAAMC,GAAND,GAkHME,GAAN,MAAMA,WAAkBX,EAA2C,CA6E1E,EA7E0EL,EAAAgB,GAAA,aAMtEf,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GALQa,GAMT,qBAOAf,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAZQa,GAaT,wBAOAf,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAnBQa,GAoBT,2CAOAf,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA1BQa,GA2BT,wBAOAf,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAjCQa,GAkCT,iCAOAf,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAxCQa,GAyCT,8BAOAf,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA/CQa,GAgDT,0BAOAf,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAtDQa,GAuDT,wBAOAf,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA7DQa,GA8DT,uCAOAf,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GApEQa,GAqET,mDAOAf,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,EAAoBD,CAAQ,CAC5D,CACJ,CAAC,GA3EQa,GA4ET,kCA5EG,IAAMC,GAAND,GCtkBP,IAAAE,GAA4B,SAc5B,IAAMC,GAAyBC,EAAA,CAC3BC,EACAC,EACAC,EACAC,EACAC,IACS,CACT,IAAMC,EAAcC,GAAiBJ,EAAY,CAAC,EAAGE,CAAO,EACtDG,EAAaL,EAAY,MAAM,EAAE,EAAE,CAAC,EAE1C,OAAOM,GAAyBR,EADP,CAACK,EAAaE,EAAY,cAAc,CACT,CAC5D,EAX+B,0BAalBE,GAAN,MAAMA,EAA0B,CAUvC,EAVuCV,EAAAU,GAAA,SASnCC,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,aAC5C,iBAAkBc,EACtB,EACA,SAAUC,EACd,CAAC,GARQJ,GAST,uBATG,IAAMK,GAANL,GCzBP,IAAAM,GAAkD,SAE3C,SAASC,GAAmBC,EAAoC,CACnE,GAAI,CAACA,GAAmB,CAACA,EAAgB,aACrC,OAEJ,IAAMC,EAAwB,KAAK,MAAM,KAAK,UAAUD,EAAgB,YAAe,CAAC,EAExF,OAAI,OAAOA,EAAgB,aAAgB,gBAAsB,WAC7DC,EAAW,eAAiBD,EAAgB,aAAgB,eAAkB,MAAM,GAAG,GAE3F,OAAOC,EAAW,OACXA,CACX,CAXgBC,EAAAH,GAAA,sBAaT,SAASI,GAAmBH,EAA0BC,EAAuBG,EAAmB,CACnGJ,EAAgBI,CAAG,EAAI,KAAK,MAAM,KAAK,UAAUH,EAAWG,CAAG,CAAC,CAAC,EAEjE,IAAMC,EAAQJ,EAAWG,CAAG,EACxBA,IAAQ,mBACRJ,EAAgBI,CAAG,EAAIC,EAAM,KAAK,EAE1C,CAPgBH,EAAAC,GAAA,sBAShB,SAASG,GAAwBN,EAAyCO,EAAoBC,EAAqB,CAC/G,IAAMP,EAAaD,GAAA,MAAAA,EAAkBQ,GAC/B,KAAK,MAAM,KAAK,UAAUR,GAAA,YAAAA,EAAkBQ,EAAY,CAAC,EACzD,OACFC,EACJ,OAAID,IAAgB,kBAAoB,OAAOP,GAAe,WAC1DQ,EAAiBR,EAAW,MAAM,GAAG,GAErCO,IAAgB,UAAY,OAAOP,GAAe,WAClDQ,EAAiB,CAAC,EAClBR,EAAW,QAAQ,CAACS,EAASC,IAAU,CACnCF,EAAeE,CAAK,EAAID,EACpBA,EAAQ,QAAa,OAAOA,EAAQ,QAAc,WAClDD,EAAeE,CAAK,EAAE,OAASD,EAAQ,OAAU,MAAM,GAAG,EAElE,CAAC,GAEED,CACX,CAlBSP,EAAAI,GAAA,2BAoBF,SAASM,GAAwBZ,EAA0BC,EAAuBG,EAAmB,CACxGJ,EAAgBI,CAAG,EAAI,KAAK,MAAM,KAAK,UAAUH,EAAWG,CAAG,CAAC,CAAC,EACjE,IAAMC,EAAQJ,EAAWG,CAAG,EAI5B,GAHIA,IAAQ,mBACRJ,EAAgBI,CAAG,EAAIC,EAAM,KAAK,GAElCD,IAAQ,SACR,QAAWS,KAAaR,EAAO,CAC3B,IAAMS,EAAcT,EAAMQ,CAAS,EACnCb,EAAgBI,CAAG,EAAES,CAAS,EAAIC,EAC9BA,EAAY,QAAU,MAAM,QAAQA,EAAY,MAAM,IACtDd,EAAgBI,CAAG,EAAES,CAAS,EAAE,OAASC,EAAY,OAAO,KAAK,EAEzE,CAER,CAfgBZ,EAAAU,GAAA,2BAiBT,IAAMG,GAAN,MAAMA,EAAkC,CAkC/C,EAlC+Cb,EAAAa,GAAA,aAW3CC,EAAA,CAVCC,EAAS,CACN,SAAU,CACN,KAAOC,GACIC,GAAoBD,CAAQ,EAAI,mBAE/C,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAVQL,GAWT,4BAYAC,EAAA,CAVCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EAAI,oBAC5D,OAAQnB,GACR,OAAQI,EACZ,CACJ,CAAC,EACAiB,EAAS,CACN,MAAO,QACX,CAAC,GAtBQL,GAuBT,8BAUAC,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EAAI,mBAChE,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAhCQL,GAiCT,uBAjCG,IAAMM,GAANN,GAoCDO,GAA4B,CAC9B,UAAWC,GACX,YAAa,IAAmB,eAAY,eAC5C,iBAAkBC,EACtB,EAEMC,GAAgC,CAClC,KAAM,CAACP,EAAUQ,EAAWC,IACxB,GAAGR,GAAoBD,CAAQ,CAAC,GAAG,mBAAgB,WAAWS,CAAW,EACjF,EAEMC,GAA0C,CAC5C,GAAGH,GACH,OAAQnB,GACR,OAAQM,EACZ,EAEaiB,GAAN,MAAMA,EAAoE,CAgCjF,EAhCiF3B,EAAA2B,GAAA,8BAO7Eb,EAAA,CANCC,EAAS,CACN,SAAUW,EACd,CAAC,EACAR,EAAS,CACN,MAAO,QACX,CAAC,GANQS,GAOT,8BAQAb,EAAA,CANCC,EAAS,CACN,SAAUQ,EACd,CAAC,EACAL,EAAS,CACN,MAAO,QACX,CAAC,GAdQS,GAeT,uBAQAb,EAAA,CANCC,EAAS,CACN,SAAUQ,EACd,CAAC,EACAL,EAAS,CACN,MAAO,QACX,CAAC,GAtBQS,GAuBT,6CAQAb,EAAA,CANCC,EAAS,CACN,SAAUW,EACd,CAAC,EACAR,EAAS,CACN,MAAO,QACX,CAAC,GA9BQS,GA+BT,sBA/BG,IAAMC,GAAND,GAkCME,GAAN,MAAMA,EAA8C,CAE3D,EAF2D7B,EAAA6B,GAAA,mBAApD,IAAMC,GAAND,GAIME,GAAN,MAAMA,EAAsD,CA2EnE,EA3EmE/B,EAAA+B,GAAA,uBAS/DjB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GARQa,GAST,sCAQAjB,EAAA,CANCC,EAAS,CACN,KAAMK,EACV,CAAC,EACAF,EAAS,CACN,MAAO,QACX,CAAC,GAhBQa,GAiBT,wBAUAjB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GA1BQa,GA2BT,uCAUAjB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GApCQa,GAqCT,2CAWAjB,EAAA,CATCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EAAI,kBAC5D,OAAQnB,EACZ,CACJ,CAAC,EACAqB,EAAS,CACN,MAAO,QACX,CAAC,GA/CQa,GAgDT,4BAUAjB,EAAA,CANCC,EAAS,CACN,KAAMK,EACV,CAAC,EACAF,EAAS,CACN,MAAO,QACX,CAAC,GAzDQa,GA0DT,6BAQAjB,EAAA,CANCC,EAAS,CACN,KAAMK,EACV,CAAC,EACAF,EAAS,CACN,MAAO,QACX,CAAC,GAjEQa,GAkET,uCAQAjB,EAAA,CANCC,EAAS,CACN,KAAMK,EACV,CAAC,EACAF,EAAS,CACN,MAAO,QACX,CAAC,GAzEQa,GA0ET,+BA1EG,IAAMC,GAAND,GA6EME,GAAN,MAAMA,WAAoCD,EAA8D,CAiB/G,EAjB+GhC,EAAAiC,GAAA,+BAM3GnB,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,GALQiB,GAMT,uCAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAfQe,GAgBT,kDAhBG,IAAMC,GAAND,GCvOP,IAAAE,GAA4B,SAoB5B,IAAMC,GAAwBC,EAAA,CAC1BC,EACAC,EACAC,EACAC,EACAC,IACS,CACT,GAAID,EAAY,IAAM,eAAY,OAAQ,CACtC,IAAME,EAASH,EAAYA,EAAY,OAAS,CAAC,EAC3CI,EAAUC,GAAiBL,EAAY,CAAC,EAAGE,CAAO,EACxD,MAAO,GAAGJ,CAAM,WAAWK,CAAM,KAAKC,CAAO,cACjD,CACA,OAAOE,GAAyBR,EAAQC,CAAa,CACzD,EAb8B,yBAejBQ,GAAN,MAAMA,EAAoC,CAiDjD,EAjDiDV,EAAAU,GAAA,cAS7CC,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBc,EACtB,EACA,SAAUC,EACd,CAAC,GARQJ,GAST,uBASAC,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBc,EACtB,CACJ,CAAC,GAjBQH,GAkBT,uBASAC,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBc,EACtB,CACJ,CAAC,GA1BQH,GA2BT,oBASAC,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBc,EACtB,CACJ,CAAC,GAnCQH,GAoCT,0BAYAC,EAAA,CAVCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBc,EACtB,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GA/CQL,GAgDT,oBAhDG,IAAMM,GAANN,GAmDMO,GAAN,MAAMA,EAAwC,CAiDrD,EAjDqDjB,EAAAiB,GAAA,kBASjDN,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBc,EACtB,EACA,SAAUC,EACd,CAAC,GARQG,GAST,uBASAN,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBc,EACtB,CACJ,CAAC,GAjBQI,GAkBT,uBASAN,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBc,EACtB,CACJ,CAAC,GA1BQI,GA2BT,oBASAN,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBc,EACtB,CACJ,CAAC,GAnCQI,GAoCT,0BAYAN,EAAA,CAVCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBc,EACtB,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GA/CQE,GAgDT,oBAhDG,IAAMC,GAAND,GCvFP,IAAAE,GAAoE,SAEpEC,GAAmC,SCFnC,IAAAC,GAAqB,gBAErBC,GAAwB,SAExBC,GAAuB,SACvBC,GAA6B,cAE7B,IAAMC,MAAgB,SAAK,UAAW,WAAW,EAe1C,IAAMC,GAAiBC,EAAA,CAACC,EAAsBC,IAA8D,CAC/G,IAAMC,KAAW,iBAAaF,EAAc,MAAM,EAClD,SAAO,WAAOE,EAAUD,CAAY,CACxC,EAH8B,kBAiGvB,IAAME,GAAyBC,EAAA,CAACC,EAA8BC,IAAuC,CACxG,IAAMC,EAA0C,CAC5C,GAAIF,EAAO,GACX,KAAMA,EAAO,KACb,UAAWA,EAAO,UAClB,YAAaA,EAAO,cAAgB,OAAYA,EAAO,YAAY,SAAS,EAAI,OAChF,gBAAiBA,EAAO,eAC5B,EACA,OAAOG,MAAe,SAAKC,GAAeH,EAAW,MAAM,EAAGC,CAAY,CAC9E,EATsC,0BAgBzBG,GAA2BN,EAAA,CACpCO,EACAC,IACS,CACT,IAAIC,EAAW,GAEf,GADAA,EAAW,8FACPF,EACA,QAAWN,KAAUM,EAAe,CAChC,IAAMG,EAAaX,GAAuBE,EAAQO,CAAY,EAC9DC,EAAWA,EAAW;AAAA,EAAOC,CACjC,CAEJ,OAAOD,EAAW;AAAA,2BACtB,EAbwC,4BAoB3BE,GAAkCX,EAACO,GAAiD,CAC7F,IAAIE,EAAW,mEACf,OAAIF,GACAA,EAAc,QAAQ,IAAM,CACxBE,EAAWA,EAAW;AAAA,iCAC1B,CAAC,EAEEA,EAAW;AAAA,2BACtB,EAR+C,mCDhJ/C,IAAAG,GAAoB,gBAEb,IAAMC,GAAsB,0BACtBC,GAAe,eAEtBC,GAAwF,IAAI,IAAI,CAClG,CAAC,oBAAiB,gCAAiC,CAAE,UAAW,QAAS,KAAM,QAAS,CAAC,EACzF,CAAC,oBAAiB,0BAA2B,CAAE,UAAWD,GAAc,KAAM,QAAS,CAAC,EACxF,CAAC,oBAAiB,0BAA2B,CAAE,UAAWA,GAAc,KAAM,QAAS,CAAC,EACxF,CAAC,oBAAiB,gCAAiC,CAAE,UAAWA,GAAc,KAAM,kBAAmB,CAAC,CAC5G,CAAC,EAEKE,GAAsD,IAAI,IAAI,CAChE,CAAC,MAAG,2BAA4B,MAAG,iCAAiC,EACpE,CAAC,MAAG,mBAAoB,MAAG,0CAA0C,EACrE,CAAC,MAAG,2BAA4B,MAAG,iCAAiC,CACxE,CAAC,EAEKC,GAAa,CACf,KAAM,UACN,KAAM,OACN,WAAY,CAAE,KAAM,aAAc,CACtC,EACMC,GAAqB,KAAK,UAAUD,EAAU,EAQpD,SAASE,GAAsBC,EAAUC,EAAsE,CAC3G,IAAMC,EAAqBD,EACrBD,EAASP,EAAmB,EAAE,YAC9BO,EAAS,YACf,GAAIE,EAAoB,CACpB,IAAMC,EAAwB,IAAI,IAClC,cAAO,KAAKD,CAAkB,EACzB,OAAQE,GAAcA,EAAU,WAAW,OAAO,CAAC,EACnD,QAASC,GAAU,CAChB,IAAMC,EAAqBH,EAAsB,IAAID,EAAmBG,CAAK,CAAC,EAC9EF,EAAsB,IAClBD,EAAmBG,CAAK,EACxBC,EACM,CAAC,GAAGA,EAAoBD,EAAM,MAAM,GAAG,EAAE,CAAC,GAAKA,CAAK,EACpD,CAACA,EAAM,MAAM,GAAG,EAAE,CAAC,GAAKA,CAAK,CACvC,CACJ,CAAC,EACEF,CACX,CACJ,CAnBSI,EAAAR,GAAA,yBA2BT,SAASS,GAAWC,EAA0CC,EAAsC,CAChG,OAAKA,EAEMA,EAAmB,SAAS,OAAO,EACnCD,EAAI,KAEJ,GAAGC,CAAkB,IAAID,EAAI,IAAI,GAJjC,GAAGA,EAAI,SAAS,IAAIA,EAAI,IAAI,EAM3C,CARSF,EAAAC,GAAA,cAiBT,SAASG,GACLC,EACAC,EACAb,EAAoBY,EACF,CAClB,IAAME,EAAaf,GAAsBC,EAAU,GAAAa,GAAoBb,IAAaY,EAAyB,EAC7G,GAAIC,EAAkB,CAClB,IAAMJ,EAAMd,GAA0B,IAAIkB,CAAgB,EAC1D,OAAOL,GAAWC,EAAKK,EAAW,IAAIL,EAAI,SAAS,CAAC,CACxD,KAAO,CACH,IAAMM,EAAOpB,GAA0B,KAAK,EAC5C,QAAWqB,KAAOD,EAAM,CACpB,IAAMN,EAAMd,GAA0B,IAAIqB,CAAG,EACvCC,EAAUH,EAAaN,GAAWC,EAAKK,EAAW,IAAIL,EAAI,SAAS,CAAC,EAAIA,EAAI,KAClF,GAAIG,EAAWK,CAAO,EAClB,OAAOA,CAEf,CACJ,CAEJ,CApBSV,EAAAI,GAAA,8BA4BF,SAASO,GACZN,EACAZ,EAAWY,EACiB,CAC5B,IAAMO,EAAOR,GAA2BC,EAAY,OAAWZ,CAAQ,EACvE,OAAOY,EAAWO,CAAI,CAC1B,CANgBZ,EAAAW,GAAA,uCAchB,SAASE,GAAYC,EAAsCC,EAA6B,CACpF,IAAMC,EAAmB,CACrB,KACA,OACA,YACA,eACA,SACA,gBACA,mBACJ,EACIC,EAAW,MACf,QAAWR,KAAOK,EAAcC,CAAW,EAAG,CAC1C,IAAMG,EAAQJ,EAAcC,CAAW,EAAEN,CAAG,EACxC,CAACO,EAAiB,SAASP,CAAG,GAAKS,IAAU,QAAaA,EAAM,SAAW,IACvED,IAAa,QACbA,GAAY,MAEhBA,GAAY,IAAIR,CAAG,OAAOS,EAAM,SAAS,CAAC,IAElD,CACA,OAAAD,GAAY,IACLA,CACX,CAtBSjB,EAAAa,GAAA,eA6BT,SAASM,GAAqBC,EAA2BN,EAA+C,CA7JxG,IAAAO,EAAAC,EAAAC,EA8JI,IAAIC,EAAgB,GACdC,EAAaL,EAAkB,YAAiBA,EAAkB,kBAAkB,EAC1F,GAAI,CAACK,EACD,MAAO,GAGX,IAAIR,EAAWQ,EAAW,iBAAiB,EAAE,YAAY,MACnDC,EAAc,KAAK,MAAMT,EAAS,OAAO,EAAGA,EAAS,MAAM,CAAC,EAC5DF,EAAcD,EAAc,UAAWa,GAClCA,EAAO,YAAcD,EAAY,SAC3C,EACD,OAAIX,EAAc,EACP,IAIXS,EAAgB,GAChBP,EAAWJ,GAAYC,EAAeC,CAAW,EACjDU,EAAW,iBAAiB,EAAE,YAAY,MAAQR,EAC9C,CAACG,EAAkB,MAAW,CAACA,EAAkB,SAAYC,EAAAP,EAAcC,CAAW,IAAzB,MAAAM,EAA4B,QACzFD,EAAkB,KAAU,CACxB,YAAa,CAAC,CAClB,GAEAA,EAAkB,MAAWA,EAAkB,KAAQ,YACvDA,EAAkB,KAAQ,YAAY,MAAUE,EAAAR,EAAcC,CAAW,IAAzB,YAAAO,EAA4B,KACrEF,EAAkB,OAAYA,EAAkB,MAAS,cAChEA,EAAkB,MAAS,YAAY,MAAUG,EAAAT,EAAcC,CAAW,IAAzB,YAAAQ,EAA4B,MAE5EH,EAAkB,cACnBA,EAAkB,YAAiB,CAAC,GAExCA,EAAkB,YAAe,GAAQN,EAAcC,CAAW,EAAE,GACpED,EAAc,OAAOC,EAAa,CAAC,EAC5BS,EACX,CApCSxB,EAAAmB,GAAA,wBA6CT,SAASS,GACLC,EACAC,EACAC,EACAC,EACI,CACJ,IAAMC,EAAaJ,EAAgBE,CAAO,EAAE,aAAa,OAAOC,EAAM,OAAS,CAAC,EAC1EE,EAAeL,EAAgB,KAAUA,EAAgB,KAAQ,YAAY,EAAI,MACjFM,EAAgBF,EAAW,MAAM,GAAG,EACpCG,EAAeD,EAAcA,EAAc,OAAS,CAAC,EAAI,oBAAmBD,EAClF,QAAWzC,KAAYqC,EAAW,CAC9B,IAAMO,EAAoB5C,EAAS,cAAiB,MAAM,MAAG,EAC7D,GAAI4C,EAAkBA,EAAkB,OAAS,CAAC,IAAMD,EAAc,CAClE,IAAME,EAAe,KAAK,SAAM,aAAS7C,EAAS,YAAa,CAAE,QAAS,EAAK,CAAC,CAAC,EAC3EiB,EAAUN,GAA2BkC,EAAapD,EAAmB,CAAC,EACxEwB,IACA,OAAO4B,EAAapD,EAAmB,EAAEwB,CAAO,EAChDjB,EAAS,eAAc,aAAS,KAAK,UAAU6C,CAAY,EAAG,CAAE,QAAS,GAAM,OAAQ,CAAE,CAAC,GAE9F,KACJ,CACJ,CACJ,CAtBStC,EAAA4B,GAAA,6BA6BT,SAASW,GAAoBC,EAAoBC,EAAsC,CAEnF,QAASC,EAAQ,EAAGA,EAAQ,OAAO,KAAKF,CAAa,EAAE,QAC/C,OAAK,UAAUA,EAAcE,CAAK,CAAC,IAAMnD,KACzCiD,EAAc,OAAOE,EAAO,CAAC,EAC7BD,GAA0B,EACtBA,IAA2B,IAJwBC,IAC3D,CAQR,CAXS1C,EAAAuC,GAAA,uBAmBT,SAASI,GAAwBC,EAA6Bd,EAAuBE,EAAqB,CACtG,IAAME,EAAeU,EAAoB,KAAUA,EAAoB,KAAQ,YAAY,EAAI,MACzFT,EAAgBS,EAAoB,aAAgB,OAAOZ,EAAM,OAAS,CAAC,EAAE,MAAM,GAAG,EACtFI,EAAeD,EAAcA,EAAc,OAAS,CAAC,EAAI,oBAAmBD,EAClF,QAAWzC,KAAYqC,EACnB,GAAIrC,EAAS,cAAiB,SAAS2C,CAAY,EAAG,CAClD,IAAME,EAAe,KAAK,SAAM,aAAS7C,EAAS,WAAW,CAAC,EACxD+C,EACFF,EAAa,SAAS,CAAC,EAAE,UACzBA,EAAa,SAAS,CAAC,EAAE,SAAS,OAAQO,GAC/BA,EAAQ,OAAS,SAC3B,EACDL,GACAD,GAAoBD,EAAa,SAAS,CAAC,EAAE,SAAUE,EAAc,MAAM,EAE/E/C,EAAS,eAAc,aAAS,KAAK,UAAU6C,CAAY,EAAG,CAAE,OAAQ,CAAE,CAAC,EAC3E,KACJ,CAER,CAnBStC,EAAA2C,GAAA,2BA4BF,SAASG,GACZjB,EACAE,EACAC,EACAF,EACI,CACJ,GAAIA,EAAW,CAEXF,GAA0BC,EAAiBC,EAAWC,EAASC,CAAK,EAEpE,IAAMe,EAAYhB,EAAQ,QACtB,oBAAiB,gCACjB,oBAAiB,6BACrB,EACMa,EAAsBf,EAAgBkB,CAAS,EACjDH,GACAD,GAAwBC,EAAqBd,EAAWE,CAAK,CAErE,CACJ,CAnBgBhC,EAAA8C,GAAA,4BA2BhB,SAASE,GAAwBR,EAAoBF,EAAmBW,EAAqC,CACzG,IAAMC,EAAaV,EAAgB,OAAO,KAAKA,CAAa,EAAE,OAAS,EAClEF,EAAa,SAAS,CAAC,EAAE,WAC1BA,EAAa,SAAS,CAAC,EAAE,SAAW,CAAC,GAEzC,QAASI,EAAQQ,EAAYR,EAAQ,OAAO,KAAKO,CAAM,EAAE,OAAQP,IAC7DJ,EAAa,SAAS,CAAC,EAAE,SAAS,KAAKhD,EAAU,CAEzD,CARSU,EAAAgD,GAAA,2BAeT,SAASG,GAA4B1D,EAAoBwD,EAAqC,CAC1F,IAAMX,EAAe,KAAK,SAAM,aAAS7C,EAAS,WAAW,CAAC,EACxD+C,EACFF,EAAa,SAAS,CAAC,EAAE,UACzBA,EAAa,SAAS,CAAC,EAAE,SAAS,OAAQO,GAC/BA,EAAQ,OAAS,SAC3B,EACL,GAAI,CAACL,GAAiB,OAAO,KAAKA,CAAa,EAAE,SAAW,OAAO,KAAKS,CAAM,EAAE,OAAQ,CACpF,GAAI,CAACT,GAAiB,OAAO,KAAKA,CAAa,EAAE,OAAS,OAAO,KAAKS,CAAM,EAAE,OAC1ED,GAAwBR,EAAeF,EAAcW,CAAM,UACpD,OAAO,KAAKT,CAAa,EAAE,OAAS,OAAO,KAAKS,CAAM,EAAE,OAAQ,CACvE,IAAMR,EAAyB,OAAO,KAAKD,CAAa,EAAE,OAAS,OAAO,KAAKS,CAAM,EAAE,OACjFG,EAAmBd,EAAa,SAAS,CAAC,EAAE,SAClDC,GAAoBa,EAAkBX,CAAsB,CAChE,CACAhD,EAAS,eAAc,aAAS,KAAK,UAAU6C,CAAY,EAAG,CAAE,OAAQ,CAAE,CAAC,CAC/E,CACJ,CAjBStC,EAAAmD,GAAA,+BA0BT,SAASE,GACLvB,EACAwB,EACAL,EACO,CACP,IAAIM,EAAqB,GACzB,QAAW9D,KAAYqC,EAAW,CAC9B,IAAMO,EAAoB5C,EAAS,cAAiB,MAAM,MAAG,EAC7D,GAAI4C,EAAkBA,EAAkB,OAAS,CAAC,IAAMiB,EAAsB,CAC1EC,EAAqB,GACjB,CAAC9D,EAAS,aAAe,OAAO,KAAKA,EAAS,WAAW,EAAE,SAAW,EAEtEA,EAAS,YAAc+D,GAAgCP,CAAM,EAE7DE,GAA4B1D,EAAUwD,CAAM,EAEhD,KACJ,CACJ,CACA,OAAOM,CACX,CApBSvD,EAAAqD,GAAA,uBA+BT,SAASI,GACLC,EACAC,EACAV,EACAjB,EACA4B,EACgG,CA/XpG,IAAAvC,EAgYI,IAAIwC,EACAC,EACEC,EAAWJ,EAAc,SACzB9B,EAAkBmC,GAA8BD,EAAUL,CAAY,EACtExB,EAAeL,EAAgB,KAAUA,EAAgB,KAAQ,YAAY,EAAI,MACvFA,EAAgB,KAAUK,EAAa,YAAY,EAEnD,QAAW+B,KAAiBhB,EAAQ,CAEhC,GAAI,CAACgB,EAAc,aAAc,CAC7BC,GAAIN,EAAQ,CACR,SAAU,eAAY,MACtB,QAASO,EAAQ,EAAE,aAAc,CAAE,UAAWF,EAAc,SAAU,CAAC,CAC3E,CAAC,EACD,QACJ,CACApC,EAAgB,aAAkBoC,EAAc,aAChDpC,EAAgB,UAAeoC,EAAc,UAC7CJ,IACIxC,EAAA4C,EAAc,eAAd,YAAA5C,EAA4B,QAAQW,EAAO,iBAAiB,QAAQ,OAAQ,SAC5E,oBACAE,CACR,CACA,GAAIwB,EAAa,QAAQ,oBAAiB,+BAA+B,EAAI,GAAI,CAC7E,IAAMX,EAAYW,EAAa,QAC3B,oBAAiB,gCACjB,oBAAiB,6BACrB,EACMd,EAAsBoB,GAA8BD,EAAUhB,CAAS,EACvEqB,EAAsBnB,EAAO,OAAO,CAACoB,EAAgB1C,IAChDA,EAAO,kBAAoBA,EAAS0C,CAC9C,EACGD,GAAuBA,EAAoB,mBAC3CxB,EAAoB,aAAkBkB,EAAoBM,EAAoB,kBAC9ExB,EAAoB,UAAeK,EAAO,CAAC,EAAE,UAC7CL,EAAoB,KAAUV,EAAa,YAAY,GAEvDoC,GAA8BP,EAAUhB,CAAS,CAEzD,CACA,MAAO,CAAE,gBAAAlB,EAAiB,WAAAgC,EAAY,kBAAAC,EAAmB,aAAA5B,CAAa,CAC1E,CAhDSlC,EAAAyD,GAAA,iCA2DT,SAASc,GACL5C,EACArB,EACAkE,EACA/E,EACAgF,EACM,CACN,IAAMC,EAAoBC,GAAuBhD,EAAQrB,CAAgB,EACzE,GAAIoE,EAAmB,CACnB,IAAME,EAAsB,KAAK,SAAM,aAASF,EAAmB,CAAE,QAAS,EAAK,CAAC,CAAC,EAC/EG,EAAYlE,GAAoCiE,EAAqBnF,CAAQ,EACnF,GAAI,MAAM,QAAQ+E,CAA2B,EAEpBA,EAA4B,KAC5CM,GAAQ,KAAK,UAAUA,CAAG,IAAM,KAAK,UAAUD,CAAS,CAC7D,GAEIL,EAA4B,KAAKK,CAAS,UAG1CL,EAA6B,CAE7B,IAAMO,EAAiC,CAACP,CAA2B,EACnEO,EAA+B,OAAON,EAAQ,EAAGI,CAAS,EAC1DL,EAA8BO,CAClC,MACIP,EAA8B,CAACK,CAAS,CAGpD,CACA,OAAOL,CACX,CA/BSxE,EAAAuE,GAAA,6BAiCT,SAASS,GAA2BR,EAAoC1D,EAAsC,CAE1G,IAAMmE,EAAkC,CAAC,EACzC,QAASC,EAAI,EAAGA,EAAIV,EAA4B,OAAQU,IACxB/D,GAAqBqD,EAA4BU,CAAC,EAAGpE,CAAa,GAE1FmE,EAAgC,KAAKC,CAAC,EAG9C,QAASC,EAAIF,EAAgC,OAAS,EAAGE,GAAK,EAAGA,IAC7DX,EAA4B,OAAOS,EAAgCE,CAAC,EAAG,CAAC,CAEhF,CAZSnF,EAAAgF,GAAA,8BAcT,SAASI,GACLZ,EACA1D,EACAwB,EACF,CACE,GAAIkC,GAEA,GAAI,MAAM,QAAQA,CAA2B,EACzCQ,GAA2BR,EAA6B1D,CAAa,UAGjE,CADwBK,GAAqBqD,EAA6B1D,CAAa,EACjE,CACtB,IAAMuE,EAAcjF,GAA2BkC,EAAapD,EAAmB,CAAC,EAC5EmG,IACA,OAAO/C,EAAapD,EAAmB,EAAEmG,CAAW,EACpDb,EAA8B,OAEtC,EAGR,OAAOA,CACX,CArBSxE,EAAAoF,GAAA,oCAgCT,SAASE,GACLxE,EACAmB,EACAuC,EACAlE,EACAb,EACF,CACE,QAAWkC,KAAUb,EACjB,GAAIa,EAAO,aAAa,SAASM,CAAU,EAAG,CAC1C,IAAMwC,EAAS3D,EAAc,QAAQa,CAAM,EAC3C6C,EAA8BD,GAC1B5C,EACArB,EACAkE,EACA/E,EACAgF,CACJ,CACJ,CAEJ,OAAOD,CACX,CApBSxE,EAAAsF,GAAA,8BA+BT,SAASC,GACLzD,EACAM,EACAH,EACAnB,EACAR,EACO,CACP,IAAIkF,EAAgB,GAEpB,GAAI,CAAC1D,EACD,OAAO0D,EAIX,QAAW/F,KAAYqC,EACnB,GAAIrC,EAAS,cAAiB,SAAS2C,CAAY,EAAG,CAClD,IAAIoC,EAA8B,CAAC,EAEnC,GADAgB,EAAgB,GACZ,CAAC/F,EAAS,aAAeA,EAAS,YAAY,SAAW,EAEzDA,EAAS,YAAcgG,GAAyB3E,EAAeR,CAAgB,MAC5E,CACH,IAAMgC,EAAe,KAAK,SAAM,aAAS7C,EAAS,YAAa,CAAE,QAAS,EAAK,CAAC,CAAC,EAC3EiG,EAAuB,KAAK,UAAUpD,CAAY,EAExDkC,EAA8B7D,GAAoC2B,EAAapD,EAAmB,CAAC,EACnGsF,EAA8BY,GAC1BZ,EACA1D,EACAwB,CACJ,EAEAkC,EAA8Bc,GAC1BxE,EACAmB,EACAuC,EACAlE,EACAgC,CACJ,EACA,IAAM5B,EAAUN,GAA2BkC,EAAchC,CAAgB,EACzEgC,EAAapD,EAAmB,EAAEwB,CAAO,EAAI8D,EAC7C,IAAMmB,EAAkB,KAAK,UAAUrD,CAAY,EAC/CqD,IAAoBD,IACpBjG,EAAS,eAAc,aAASkG,EAAiB,CAAE,QAAS,GAAM,OAAQ,CAAE,CAAC,EAErF,CACA,KACJ,CAEJ,OAAOH,CACX,CAlDSxF,EAAAuF,GAAA,2BA6DF,SAASK,GACZjC,EACAD,EACAT,EACAjB,EACA1B,EACAsD,EACI,CACJ,IAAM9B,EAAwB6B,EAAc,UAGtC,CAAE,gBAAA9B,EAAiB,WAAAgC,EAAY,kBAAAC,EAAmB,aAAA5B,CAAa,EAAIuB,GACrEC,EACAC,EACAV,EACAjB,EACA4B,CACJ,EAGM9C,EAAgB,KAAK,MAAM,KAAK,UAAUmC,CAAM,CAAC,EACnDb,EAAeP,EAAgB,aAC7BI,EAAaG,EAAa,OAAOJ,EAAM,OAAS,CAAC,EACjDG,EAAgBF,EAAW,MAAM,GAAG,EAE1CG,EADqBD,EAAcA,EAAc,OAAS,CAAC,EAC7B,oBAAmBD,EACjD,IAAM2D,EAAoB/B,GAAA,YAAAA,EAAmB,MAAM,KAC7CgC,EAAmBD,EAAoBA,EAAkBA,EAAkB,OAAS,CAAC,EAAI,KACzFvC,EAAuBwC,EAAmBA,EAAmB,oBAAmB5D,EAAe,KAG/FsD,EAAgBD,GAAwBzD,EAAWM,EAAcH,EAAYnB,EAAeR,CAAgB,EAE9GiD,EAAqB,GAOzB,GANIO,EAEAP,EAAqBF,GAAoBvB,EAAWwB,EAAsBL,CAAM,EAEhFM,EAAqB,GAErB,CAACiC,EAAe,CAChB,IAAM/F,EAAqB,CACvB,YAAagG,GAAyB3E,EAAeR,CAAgB,EACrE,cAAeuD,CACnB,EACAF,EAAc,UAAU,KAAKlE,CAAQ,CACzC,CACA,GAAI,CAAC8D,EAAoB,CACrB,IAAM9D,EAAqB,CACvB,YAAa+D,GAAgCP,CAAM,EACnD,cAAeY,EAAW,QAAQzB,EAAckB,CAAoB,CACxE,EACAK,EAAc,UAAU,KAAKlE,CAAQ,CACzC,CACJ,CAtDgBO,EAAA4F,GAAA,iCA+DT,IAAMG,GAAsB/F,EAAA,CAC/BgG,EACAC,EACAC,EACAC,IACuD,CAnqB3D,IAAA9E,EAAAC,EAAAC,EAAA6E,EAoqBI,IAAMC,EAAoBhH,GAA+B,KAAIgC,EAAA2E,EAAK,YAAL,YAAA3E,EAAgB,IAAI,EACjF,GAAI,CAAC8E,EAA0B,CAC3B,IAAIG,GAAYF,GAAA7E,GAAAD,EAAA0E,EAAK,YAAL,YAAA1E,EAAgB,WAAhB,YAAAC,EAA0B,gBAA1B,YAAA6E,EAA0C,KACrDE,IACDA,EAAY,mBAEZD,IAAc,6EACdC,EAAY,mBAEhBH,EAA2BG,EAAY,kBAC3C,CACA,IAAMhG,EAAmB6F,EACrBI,EAAe,GAAGJ,CAAwB,IAAIF,CAAS,GAC3D,OAAIC,IACAK,GAAgB,IAAML,GAInB,CAAE,KAFI,oDAAsDG,EAAY,IAAME,EAEtE,iBAAAjG,CAAiB,CACpC,EAzBmC,uBE7pBnC,IAAAkG,GAMO,SAKA,IAAMC,GAAyBC,EAAA,CAClCC,EACAC,EACAC,EACAC,IAEIA,EAAY,IAAM,cACXH,EAAS,kBACTG,EAAY,IAAM,sCAAuCH,GAAA,MAAAA,EAAQ,SAAS,uBAC1EA,EAAS,gBAAa,MAE1BI,GAAyBJ,EAAQC,CAAa,EAXnB,0BAe/B,SAASI,GAAuBC,EAAiC,CA3BxE,IAAAC,EA4BI,GAAI,GAACA,EAAAD,EAAgB,4BAAhB,MAAAC,EAA8C,QAC/C,OAEJ,IAAMC,EAAuB,KAAK,MAAM,KAAK,UAAUF,EAAgB,0BAA6B,MAAM,CAAC,EACrGG,EAAa,CAAE,OAAQ,CAAC,CAAE,EAChC,QAAWC,KAAiBF,EACxBC,EAAW,OAAO,KAAKC,CAAa,EAExC,OAAOD,CACX,CAVgBV,EAAAM,GAAA,0BAaT,SAASM,GAA6BL,EAA0BG,EAA2BG,EAAmB,CACjH,IAAMC,EAAmBJ,EAAWG,CAAG,EACvC,GAAIC,EAAO,SAAW,EAAG,CACrB,OAAOP,EAAgBM,CAAG,EAC1B,MACJ,CACA,IAAME,EAAiB,CAAC,EACnBR,EAAgBM,CAAG,IACpBN,EAAgBM,CAAG,EAAI,CAAC,GAE5BC,EAAO,QAASE,GAAWD,EAAeC,CAAK,EAAIT,EAAgBM,CAAG,EAAEG,CAAK,GAAK,CAAE,KAAMA,CAAM,CAAE,EAClGT,EAAgBM,CAAG,EAAIE,CAC3B,CAZgBf,EAAAY,GAAA,gCAchB,SAASK,GAAeV,EAAyBW,EAA4B,CACzE,QAAWC,KAAWD,EAAa,SAAa,CAC5C,IAAME,EAAgBF,EAAa,SAAYC,CAAO,EAChDE,EAA0B,CAAC,OAAQ,cAAe,YAAa,iBAAkB,cAAc,EACrG,QAAWR,KAAOO,EACVC,EAAc,QAAQR,CAAG,IAAM,KAC1BO,EAAc,gBACfA,EAAc,cAAmB,CAAC,GAEtCA,EAAc,cAAiBP,CAAG,EAAIO,EAAcP,CAAG,EACvD,OAAOO,EAAcP,CAAG,GAG5BN,EAAgB,SAChBA,EAAgB,SAAYY,CAAO,EAAIC,EAEvCb,EAAgB,SAAc,CAC1B,CAACY,CAAO,EAAGC,CACf,CAER,CACJ,CArBSpB,EAAAiB,GAAA,kBAuBT,SAASK,GAA6Bf,EAAyBW,EAA4B,CAClFA,EAAa,WAGd,OAAO,KAAKA,EAAa,QAAW,EAAE,OAAS,EAC/CD,GAAeV,EAAiBW,CAAY,EAE5C,OAAOX,EAAgB,SAE/B,CATSP,EAAAsB,GAAA,gCAWF,IAAMC,GAAN,MAAMA,EAAkB,CAO/B,EAP+BvB,EAAAuB,GAAA,qBAM3BC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EAAI,oBAChE,CACJ,CAAC,GALQH,GAMT,wBANG,IAAMK,GAANL,GAUP,SAASM,GAAWtB,EAAiC,CAlGrD,IAAAC,EAmGI,IAAIA,EAAAD,GAAA,YAAAA,EAAkB,gBAAlB,MAAAC,EAAqC,KACrC,OAAOD,EAAgB,cAAiB,KACrC,GAAIA,GAAA,MAAAA,EAAkB,UACzB,OAAOA,EAAgB,SAE/B,CANSP,EAAA6B,GAAA,cASF,SAASC,GAAWvB,EAA0BG,EAA0B,CACvEA,GAAA,MAAAA,EAAa,OACRH,EAAgB,gBACjBA,EAAgB,cAAmB,CAAC,GAExCA,EAAgB,cAAiB,KAAUG,EAAW,KAClDH,GAAA,MAAAA,EAAkB,WAElB,OAAOA,EAAgB,UAGnC,CAXgBP,EAAA8B,GAAA,cAaT,SAASC,GAAWxB,EAAgC,CAxH3D,IAAAC,GAyHQA,EAAAD,GAAA,YAAAA,EAAkB,gBAAlB,MAAAC,EAAqC,MACrC,OAAOD,EAAgB,cAAiB,KAExCA,GAAA,MAAAA,EAAkB,WAElB,OAAOA,EAAgB,SAE/B,CARgBP,EAAA+B,GAAA,cAUT,IAAMC,GAAN,MAAMA,EAAiB,CAU9B,EAV8BhC,EAAAgC,GAAA,oBAS1BR,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBO,GAAyBP,CAAQ,CACjE,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GARQF,GAST,mCATG,IAAMG,GAANH,GAYMI,GAAN,MAAMA,EAA0C,CAWvD,EAXuDpC,EAAAoC,GAAA,iBAUnDZ,EAAA,CATCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBW,GAAsBX,CAAQ,EAAI,6BAC9D,OAAQd,EACZ,CACJ,CAAC,EACAsB,EAAS,CACN,MAAO,QACX,CAAC,GATQE,GAUT,sBAVG,IAAME,GAANF,GAaMG,GAAN,MAAMA,EAAsB,CAsBnC,EAtBmCvC,EAAAuC,GAAA,yBAS/Bf,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EAAI,eAChE,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GARQK,GAST,0BAUAf,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EAAI,eAChE,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GAlBQK,GAmBT,wBAnBG,IAAMC,GAAND,GAwBME,GAAN,MAAMA,EAA4D,CAiCzE,EAjCyEzC,EAAAyC,GAAA,0BASrEjB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EAAI,gBAChE,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GARQO,GAST,0BAUAjB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EAAI,gBAChE,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GAlBQO,GAmBT,iCAWAjB,EAAA,CATCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EAAI,iBAC5D,OAAQJ,EACZ,CACJ,CAAC,EACAY,EAAS,CACN,MAAO,QACX,CAAC,GA7BQO,GA8BT,wBA9BG,IAAMC,GAAND,GAmCME,GAAN,MAAMA,EAAsF,CAA5F,cACH,mBAAgB,KACL,CACH,UAAW,CACP,MAAO,SACP,WAAY,CACR,MAAO,SACP,KAAM,gCACV,CACJ,EACA,kBAAmB,CACf,MAAO,SACP,WAAY,CACR,MAAO,SACP,KAAM,+CACV,CACJ,CACJ,GA8IR,EA/JmG3C,EAAA2C,GAAA,uBA8B/FnB,EAAA,CAVCC,EAAS,CACN,SAAU,CACN,IAAK,4BACL,KAAOC,GAAqBW,GAAsBX,CAAQ,EAC1D,OAAQpB,EACZ,CACJ,CAAC,EACA4B,EAAS,CACN,MAAO,QACX,CAAC,GA7BQS,GA8BT,yCAYAnB,EAAA,CAVCC,EAAS,CACN,KAAM,CACF,UAAWpB,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkBuC,EACtB,CACJ,CAAC,EACAV,EAAS,CACN,MAAO,QACX,CAAC,GAzCQS,GA0CT,wCAYAnB,EAAA,CAVCC,EAAS,CACN,KAAM,CACF,UAAW1B,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkB6C,EACtB,CACJ,CAAC,EACAV,EAAS,CACN,MAAO,QACX,CAAC,GArDQS,GAsDT,gCAYAnB,EAAA,CAVCC,EAAS,CACN,KAAM,CACF,UAAW1B,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkB6C,EACtB,CACJ,CAAC,EACAV,EAAS,CACN,MAAO,QACX,CAAC,GAjEQS,GAkET,0BASAnB,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAW1B,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkB6C,EACtB,CACJ,CAAC,GA1EQD,GA2ET,4BAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GApFQS,GAqFT,qCAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GA9FQS,GA+FT,sCAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBW,GAAsBX,CAAQ,CAC9D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GAxGQS,GAyGT,2BAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBW,GAAsBX,CAAQ,CAC9D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GAlHQS,GAmHT,yBAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBW,GAAsBX,CAAQ,CAC9D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GA5HQS,GA6HT,8BAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GAtIQS,GAuIT,gCAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GAhJQS,GAiJT,oCAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GA1JQS,GA2JT,8CAGAnB,EAAA,CADCqB,GAAQ,SAAS,GA7JTF,GA8JT,uBA9JG,IAAMG,GAANH,GAgKMI,GAAN,MAAMA,WAAwBD,EAAkD,CA6EvF,EA7EuF9C,EAAA+C,GAAA,mBAYnFvB,EAAA,CAXCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EACxD,OAAQG,GACR,OAAQC,GACR,OAAQC,EACZ,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAXQa,GAYT,oBAUAvB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GArBQa,GAsBT,iCAaAvB,EAAA,CAXCC,EAAS,CACN,KAAM,CACF,UAAW1B,GACX,YAAa,IAAmB,eAAY,MAC5C,iBAAkB6C,EACtB,EACA,SAAUI,EACd,CAAC,EACAd,EAAS,CACN,MAAO,QACX,CAAC,GAlCQa,GAmCT,2BASAvB,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAW1B,GACX,YAAa,IAAmB,eAAY,MAC5C,iBAAkB6C,EACtB,CACJ,CAAC,GA3CQG,GA4CT,sCAUAvB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBW,GAAsBX,CAAQ,CAC9D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GArDQa,GAsDT,4BAUAvB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAM,IAAc,qBACxB,CACJ,CAAC,EACAS,EAAS,CACN,MAAO,QACX,CAAC,GA/DQa,GAgET,+BAYAvB,EAAA,CAVCC,EAAS,CACN,KAAM,CACF,UAAW1B,GACX,YAAa,IAAmB,eAAY,MAC5C,iBAAkB6C,EACtB,CACJ,CAAC,EACAV,EAAS,CACN,MAAO,QACX,CAAC,GA3EQa,GA4ET,gCA5EG,IAAME,GAANF,GA+EMG,GAAN,MAAMA,WAAkBJ,EAA4C,CAuB3E,EAvB2E9C,EAAAkD,GAAA,aAYvE1B,EAAA,CAXCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EACxD,OAAQG,GACR,OAAQC,GACR,OAAQC,EACZ,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAXQgB,GAYT,oBAUA1B,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAM,IAAc,qBACxB,CACJ,CAAC,EACAS,EAAS,CACN,MAAO,QACX,CAAC,GArBQgB,GAsBT,+BAtBG,IAAMC,GAAND,GAyBME,GAAN,MAAMA,WAAwBN,EAAkD,CAyFvF,EAzFuF9C,EAAAoD,GAAA,mBAYnF5B,EAAA,CAXCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EACxD,OAAQG,GACR,OAAQC,GACR,OAAQC,EACZ,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAXQkB,GAYT,oBAOA5B,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAlBQ0B,GAmBT,yBAeA5B,EAAA,CAbCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,EACAT,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAjCQ0B,GAkCT,kCAOA5B,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAxCQ0B,GAyCT,iCAUA5B,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GAlDQkB,GAmDT,4BAOA5B,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAzDQ0B,GA0DT,wBAUA5B,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GAnEQkB,GAoET,wCAUA5B,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GA7EQkB,GA8ET,iCAUA5B,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAM,IAAc,qBACxB,CACJ,CAAC,EACAS,EAAS,CACN,MAAO,QACX,CAAC,GAvFQkB,GAwFT,+BAxFG,IAAMC,GAAND,GA2FME,GAAN,MAAMA,WAAiBR,EAA2C,CAqEzE,EArEyE9C,EAAAsD,GAAA,YAYrE9B,EAAA,CAXCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EACxD,OAAQG,GACR,OAAQC,GACR,OAAQC,EACZ,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAXQoB,GAYT,oBAOA9B,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAlBQ4B,GAmBT,yBAeA9B,EAAA,CAbCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,EACAT,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAjCQ4B,GAkCT,kCAOA9B,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAxCQ4B,GAyCT,iCAUA9B,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GAlDQoB,GAmDT,4BAOA9B,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,GAzDQ4B,GA0DT,wBAUA9B,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GAnEQoB,GAoET,wCApEG,IAAMC,GAAND,GAuEME,GAAN,MAAMA,WAA2BD,EAAS,CAejD,EAfiDvD,EAAAwD,GAAA,sBAc7ChC,EAAA,CAVCC,EAAS,CACN,KAAM,CACF,UAAW1B,GACX,YAAa,IAAmB,eAAY,MAC5C,iBAAkB6C,EACtB,CACJ,CAAC,EACAV,EAAS,CACN,MAAO,QACX,CAAC,GAbQsB,GAcT,gCAdG,IAAMC,GAAND,GAiBME,GAAN,MAAMA,WAAqBH,EAAS,CAAC,EAADvD,EAAA0D,GAAA,gBAApC,IAAMC,GAAND,GAEME,GAAN,MAAMA,WAA2BL,EAAS,CAAC,EAADvD,EAAA4D,GAAA,sBAA1C,IAAMC,GAAND,GAEME,GAAN,MAAMA,WAAkBhB,EAA4C,CAiC3E,EAjC2E9C,EAAA8D,GAAA,aAYvEtC,EAAA,CAXCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,EACxD,OAAQG,GACR,OAAQC,GACR,OAAQC,EACZ,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAXQ4B,GAYT,oBAUAtC,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAoBD,CAAQ,CAC5D,CACJ,CAAC,EACAQ,EAAS,CACN,MAAO,QACX,CAAC,GArBQ4B,GAsBT,iCAUAtC,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAM,IAAc,qBACxB,CACJ,CAAC,EACAS,EAAS,CACN,MAAO,QACX,CAAC,GA/BQ4B,GAgCT,+BAhCG,IAAMC,GAAND,GCppBP,IAAAE,GAA4B,SAa5B,IAAMC,GAAoBC,EAAA,CAACC,EAAgBC,EAA0BC,IAAkC,CACnG,GAAM,CAAE,SAAAC,CAAS,EAAIC,GAAyBF,CAAW,EACzD,MAAO,GAAGF,CAAM,WAAWK,GAA2BF,CAAQ,EAAE,QAAQ,MAAO,IAAI,CAAC,EACxF,EAH0B,qBAapBG,GAA4BP,EAAA,CAACC,EAAgBC,EAA0BC,IAAkC,CAC3G,GAAM,CAAE,SAAAC,CAAS,EAAIC,GAAyBF,CAAW,EACzD,MAAO,GAAGF,CAAM,aAAaG,CAAQ,EACzC,EAHkC,6BAa5BI,GAAoCR,EAAA,CAACC,EAAgBC,EAA0BC,IAAkC,CACnH,GAAM,CAAE,SAAAC,CAAS,EAAIC,GAAyBF,CAAW,EACzD,MAAO,GAAGF,CAAM,GAAGQ,EAAgC,GAAGL,CAAQ,EAClE,EAH0C,qCAa7BM,GAA2BV,EAAA,CAACC,EAAgBC,EAA0BC,IAAkC,CACjH,GAAM,CAAE,iBAAAQ,EAAkB,SAAAP,CAAS,EAAIC,GAAyBF,CAAW,EAC3E,MAAO,GAAGF,CAAM,WAAWU,CAAgB,KAAKL,GAA2BF,CAAQ,CAAC,EACxF,EAHwC,4BAalCQ,GAA0BZ,EAAA,CAACC,EAAgBC,EAA0BC,IAAkC,CACzG,GAAM,CAAE,SAAAC,CAAS,EAAIC,GAAyBF,CAAW,EACzD,MAAO,GAAGF,CAAM,WAAWK,GAA2BF,CAAQ,EAAE,QAAQ,MAAO,IAAI,CAAC,eACxF,EAHgC,2BAK1BS,GAAoB,CACtB,UAAWd,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBe,EACtB,EAEMC,GAA4B,CAC9B,UAAWR,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBO,EACtB,EAEME,GAAoC,CACtC,UAAWR,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBM,EACtB,EAEMG,GAA0B,CAC5B,UAAWL,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBE,EACtB,EAEaI,GAAN,MAAMA,EAA4B,CAoBzC,EApByClB,EAAAkB,GAAA,UAIrCC,EAAA,CAHCC,EAAS,CACN,KAAMP,EACV,CAAC,GAHQK,GAIT,uBAKAC,EAAA,CAHCC,EAAS,CACN,KAAMP,EACV,CAAC,GARQK,GAST,oBAKAC,EAAA,CAHCC,EAAS,CACN,KAAMP,EACV,CAAC,GAbQK,GAcT,0BAKAC,EAAA,CAHCC,EAAS,CACN,KAAMP,EACV,CAAC,GAlBQK,GAmBT,oBAnBG,IAAMG,GAANH,GAsBMI,GAAN,MAAMA,EAAmC,CAoBhD,EApBgDtB,EAAAsB,GAAA,iBAI5CH,EAAA,CAHCC,EAAS,CACN,KAAMP,EACV,CAAC,GAHQS,GAIT,uBAKAH,EAAA,CAHCC,EAAS,CACN,KAAMP,EACV,CAAC,GARQS,GAST,oBAKAH,EAAA,CAHCC,EAAS,CACN,KAAMP,EACV,CAAC,GAbQS,GAcT,0BAKAH,EAAA,CAHCC,EAAS,CACN,KAAMP,EACV,CAAC,GAlBQS,GAmBT,oBAnBG,IAAMC,GAAND,GAsBME,GAAN,MAAMA,EAAkC,CAoB/C,EApB+CxB,EAAAwB,GAAA,gBAI3CL,EAAA,CAHCC,EAAS,CACN,KAAMH,EACV,CAAC,GAHQO,GAIT,uBAKAL,EAAA,CAHCC,EAAS,CACN,KAAMH,EACV,CAAC,GARQO,GAST,oBAKAL,EAAA,CAHCC,EAAS,CACN,KAAMH,EACV,CAAC,GAbQO,GAcT,0BAKAL,EAAA,CAHCC,EAAS,CACN,KAAMH,EACV,CAAC,GAlBQO,GAmBT,oBAnBG,IAAMC,GAAND,GAsBME,GAAN,MAAMA,EAA0B,CAKvC,EALuC1B,EAAA0B,GAAA,SAInCP,EAAA,CAHCC,EAAS,CACN,KAAML,EACV,CAAC,GAHQW,GAIT,uBAJG,IAAMC,GAAND,GAOME,GAAN,MAAMA,EAA8B,CAK3C,EAL2C5B,EAAA4B,GAAA,WAIvCT,EAAA,CAHCC,EAAS,CACN,KAAML,EACV,CAAC,GAHQa,GAIT,uBAJG,IAAMC,GAAND,GAOME,GAAN,MAAMA,EAA0D,CAKvE,EALuE9B,EAAA8B,GAAA,yBAInEX,EAAA,CAHCC,EAAS,CACN,KAAML,EACV,CAAC,GAHQe,GAIT,uBAJG,IAAMC,GAAND,GAOME,GAAN,MAAMA,EAA0C,CAMvD,EANuDhC,EAAAgC,GAAA,iBAKnDb,EAAA,CAJCC,EAAS,CACN,KAAMJ,GACN,SAAUiB,EACd,CAAC,GAJQD,GAKT,uBALG,IAAME,GAANF,GAQMG,GAAN,MAAMA,EAAwD,CAKrE,EALqEnC,EAAAmC,GAAA,wBAIjEhB,EAAA,CAHCC,EAAS,CACN,KAAML,EACV,CAAC,GAHQoB,GAIT,uBAJG,IAAMC,GAAND,GAOME,GAAN,MAAMA,EAA4E,CAKzF,EALyFrC,EAAAqC,GAAA,kCAIrFlB,EAAA,CAHCC,EAAS,CACN,KAAML,EACV,CAAC,GAHQsB,GAIT,uBAJG,IAAMC,GAAND,GAOME,GAAN,MAAMA,EAA4E,CAKzF,EALyFvC,EAAAuC,GAAA,kCAIrFpB,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAHQuB,GAIT,uBAJG,IAAMC,GAAND,GC1MP,IAAAE,GAA4B,SAY5B,IAAMC,GAAsBC,EAAA,CAACC,EAAgBC,EAAyBC,IAAkC,CACpG,IAAMC,EAAiB,yBACjB,CAAE,WAAAC,EAAY,SAAAC,CAAS,EAAIC,GAAyBJ,CAAW,EAC/DK,EAAe,kBAAkBN,EAAc,CAAC,CAAC,GACvD,MAAO,GAAGD,CAAM,GAAGG,CAAc,MAAMC,CAAU,MAAMG,CAAY,eAAeF,CAAQ,EAC9F,EAL4B,uBActBG,GAA2BT,EAAA,CAACC,EAAgBC,EAAyBC,IAAkC,CACzG,IAAMC,EAAiB,yBACjB,CAAE,WAAAC,EAAY,SAAAC,EAAU,iBAAAI,CAAiB,EAAIH,GAAyBJ,CAAW,EACjFK,EAAe,kBAAkBN,EAAc,CAAC,CAAC,GACvD,MAAO,GAAGD,CAAM,GAAGG,CAAc,MAAMC,CAAU,MAAMG,CAAY,uBAAuBE,CAAgB,eAAeJ,CAAQ,EACrI,EALiC,4BAe3BK,GAA4BX,EAAA,CAACC,EAAgBW,EAA0BT,IAAkC,CAC3G,GAAM,CAAE,SAAAG,CAAS,EAAIC,GAAyBJ,CAAW,EACzD,MAAO,GAAGF,CAAM,WAAWK,EAAS,QAAQ,MAAO,IAAI,CAAC,EAC5D,EAHkC,6BAM5BO,GAAoB,CACtB,UAAWd,GACX,YAAa,IAAmB,eAAY,YAC5C,iBAAkBe,EACtB,EAGMC,GAA0B,CAC5B,UAAWJ,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBG,EACtB,EAGME,GAA+B,CACjC,GAAGH,GACH,UAAWJ,EACf,EAGMQ,GAAqC,CACvC,GAAGF,GACH,UAAWG,EACf,EAEaC,GAAN,MAAMA,EAAsC,CAkBnD,EAlBmDnB,EAAAmB,GAAA,eAQ/CC,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWC,GACX,YAAa,IAAmB,eAAY,YAC5C,iBAAkBR,EACtB,CACJ,CAAC,GAPQK,GAQT,qBASAC,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWC,GACX,YAAa,IAAmB,eAAY,YAC5C,iBAAkBR,EACtB,EACA,SAAUS,EACd,CAAC,GAhBQJ,GAiBT,sBAjBG,IAAMK,GAANL,GAoBMM,GAAN,MAAMA,EAAkD,CA+B/D,EA/B+DzB,EAAAyB,GAAA,qBAI3DL,EAAA,CAHCC,EAAS,CACN,KAAMR,EACV,CAAC,GAHQY,GAIT,qBAMAL,EAAA,CAJCC,EAAS,CACN,KAAMR,GACN,SAAUU,EACd,CAAC,GATQE,GAUT,sBAKAL,EAAA,CAHCC,EAAS,CACN,KAAMN,EACV,CAAC,GAdQU,GAeT,uBAKAL,EAAA,CAHCC,EAAS,CACN,KAAMN,EACV,CAAC,GAnBQU,GAoBT,oBAKAL,EAAA,CAHCC,EAAS,CACN,KAAMN,EACV,CAAC,GAxBQU,GAyBT,0BAKAL,EAAA,CAHCC,EAAS,CACN,KAAMN,EACV,CAAC,GA7BQU,GA8BT,oBA9BG,IAAMC,GAAND,GAiCME,GAAN,MAAMA,WAAqCD,EAAkB,CA+BpE,EA/BoE1B,EAAA2B,GAAA,gCAIhEP,EAAA,CAHCC,EAAS,CACN,KAAML,EACV,CAAC,GAHQW,GAIT,qBAMAP,EAAA,CAJCC,EAAS,CACN,KAAML,GACN,SAAUO,EACd,CAAC,GATQI,GAUT,sBAKAP,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAdQU,GAeT,uBAKAP,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAnBQU,GAoBT,oBAKAP,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAxBQU,GAyBT,0BAKAP,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GA7BQU,GA8BT,oBA9BG,IAAMC,GAAND,GAqCME,GAAN,MAAMA,EAAkD,CAW/D,EAX+D7B,EAAA6B,GAAA,qBAAxD,IAAMC,GAAND,GClKA,IAAME,GAAN,MAAMA,EAA8B,CAE3C,EAF2CC,EAAAD,GAAA,WAApC,IAAME,GAANF,GCDP,IAAAG,GAA0C,SAKnC,IAAMC,GAAyBC,EAACC,GAC5BA,EAAS,gBAAa,MADK,0BAIzBC,GAAN,MAAMA,EAA0C,CAqDvD,EArDuDF,EAAAE,GAAA,iBAQnDC,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWL,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkBM,EACtB,CACJ,CAAC,GAPQH,GAQT,gCASAC,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWL,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkBM,EACtB,CACJ,CAAC,GAhBQH,GAiBT,kCASAC,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWL,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkBM,EACtB,CACJ,CAAC,GAzBQH,GA0BT,4CAgBAC,EAAA,CAdCC,EAAS,CACN,KAAM,CACF,UAAWL,GACX,YAAa,IAAmB,eAAY,WAC5C,gBAAiB,CAACO,EAAwCC,EAAsBC,IAAsB,CAClGF,EAAW,QAAQ,SAAWC,EAAaC,CAAG,EAAE,KAAK,CACzD,EACA,gBAAiB,CAACF,EAAwCC,EAAsBC,IAAsB,CAClGF,EAAW,QAAQ,SAAcA,EAAW,QAAQ,SACpDC,EAAaC,CAAG,EAAIF,EAAW,QAAQ,SAAY,MAAM,GAAG,CAChE,EACA,iBAAkBD,EACtB,CACJ,CAAC,GAzCQH,GA0CT,iCAUAC,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOK,GAAqBC,GAAsBD,CAAQ,CAC9D,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAnDQT,GAoDT,6BApDG,IAAMU,GAANV,GCNA,IAAMW,GAAN,MAAMA,EAAsC,CA0CnD,EA1CmDC,EAAAD,GAAA,eAM/CE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAUC,EAAWC,IAAmBC,GAAmBH,EAAUE,CAAM,CACtF,CACJ,CAAC,GALQN,GAMT,qBAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAUC,EAAWC,IAAmBC,GAAmBH,EAAUE,CAAM,CACtF,CACJ,CAAC,GAZQN,GAaT,yBAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAUC,EAAWC,IAAmBC,GAAmBH,EAAUE,CAAM,CACtF,CACJ,CAAC,GAnBQN,GAoBT,yBAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAUC,EAAWC,IAAmBC,GAAmBH,EAAUE,CAAM,CACtF,CACJ,CAAC,GA1BQN,GA2BT,0BAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAUC,EAAWC,IAAmBC,GAAmBH,EAAUE,CAAM,CACtF,CACJ,CAAC,GAjCQN,GAkCT,gCAOAE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAUC,EAAWC,IAAmBC,GAAmBH,EAAUE,CAAM,CACtF,CACJ,CAAC,GAxCQN,GAyCT,uBAzCG,IAAMQ,GAANR,GCHP,IAAAS,GAA4B,SAK5B,IAAMC,GAAqBC,EAAA,CAACC,EAAgBC,IAAoC,CAC5E,IAAMC,EAAoBD,EAAc,MAAM,CAAC,EAC/C,OAAAC,EAAkBD,EAAc,OAAS,CAAC,EAAI,cACvCE,GAAyBH,EAAQE,CAAiB,CAC7D,EAJ2B,sBAMdE,GAAN,MAAMA,EAA8E,CA0C3F,EA1C2FL,EAAAK,GAAA,oBASvFC,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAuBD,CAAQ,CAC/D,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GARQL,GAST,+BAUAC,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAuBD,CAAQ,CAC/D,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAlBQL,GAmBT,qCAUAC,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAqBC,GAAuBD,CAAQ,CAC/D,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GA5BQL,GA6BT,kCAUAC,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWR,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBY,EACtB,EACA,SAAUC,EACd,CAAC,GAtCQP,GAuCT,4BAvCG,IAAMQ,GAANR,GCXP,IAAAS,GAA4B,SAa5B,IAAMC,GAAoBC,EAAA,CACtBC,EACAC,EACAC,EACAC,IACS,CACT,GAAIA,EAAY,IAAM,eAAY,QAAUA,EAAY,IAAM,eAAY,aAAc,CACpF,IAAMC,EAAWF,EAAY,CAAC,EAC9B,MAAO,GAAGF,CAAM,WAAWK,GAA2BD,CAAQ,CAAC,EACnE,CACA,OAAOE,GAAyBN,EAAQC,CAAa,CACzD,EAX0B,qBAapBM,GAA0B,CAC5B,UAAWT,GACX,YAAa,IAAmB,eAAY,aAC5C,iBAAkBU,EACtB,EAEaC,GAAN,MAAMA,EAAwC,CA0BrD,EA1BqDV,EAAAU,GAAA,gBAKjDC,EAAA,CAJCC,EAAS,CACN,KAAMJ,GACN,SAAUK,EACd,CAAC,GAJQH,GAKT,uBAKAC,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GATQE,GAUT,uBAKAC,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAdQE,GAeT,oBAKAC,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAnBQE,GAoBT,0BAKAC,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAxBQE,GAyBT,oBAzBG,IAAMI,GAANJ,GChCP,IAAAK,GAA4B,SAiB5B,IAAMC,GAA0BC,EAAA,CAC5BC,EACAC,EACAC,EACAC,IACS,CACT,GAAIA,EAAY,IAAM,eAAY,OAAQ,CACtC,GAAM,CAAE,SAAAC,CAAS,EAAIC,GAAyBH,CAAW,EACzD,MAAO,GAAGF,CAAM,WAAWM,GAA2BF,CAAQ,CAAC,eACnE,CACA,OAAOG,GAAyBP,EAAQC,CAAa,CACzD,EAXgC,2BAa1BO,GAA0B,CAC5B,UAAWV,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBW,EACtB,EAEaC,GAAN,MAAMA,EAA4D,CA0BzE,EA1ByEX,EAAAW,GAAA,0BAKrEC,EAAA,CAJCC,EAAS,CACN,KAAMJ,GACN,SAAUK,EACd,CAAC,GAJQH,GAKT,uBAKAC,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GATQE,GAUT,uBAKAC,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAdQE,GAeT,oBAKAC,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAnBQE,GAoBT,0BAKAC,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAxBQE,GAyBT,oBAzBG,IAAMI,GAANJ,GCpCP,IAAAK,GAA4B,SAQ5B,IAAMC,GAAeC,EAAA,CAACC,EAAgBC,IAAoC,CACtE,IAAMC,EAAoBD,EAAc,MAAM,CAAC,EAC/C,OAAAC,EAAkBD,EAAc,OAAS,CAAC,EAAI,aACvCE,GAAyBH,EAAQE,CAAiB,CAC7D,EAJqB,gBAMRE,GAAN,MAAMA,EAAgD,CAwC7D,EAxC6DL,EAAAK,GAAA,oBASzDC,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWR,GACX,YAAa,IAAmB,eAAY,iBAC5C,iBAAkBS,EACtB,EACA,SAAUC,EACd,CAAC,GARQJ,GAST,iCASAC,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWR,GACX,YAAa,IAAmB,eAAY,iBAC5C,iBAAkBS,EACtB,CACJ,CAAC,GAjBQH,GAkBT,6BASAC,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWR,GACX,YAAa,IAAmB,eAAY,iBAC5C,iBAAkBS,EACtB,CACJ,CAAC,GA1BQH,GA2BT,6BAYAC,EAAA,CAVCC,EAAS,CACN,KAAM,CACF,UAAWR,GACX,YAAa,IAAmB,eAAY,iBAC5C,iBAAkBS,EACtB,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAtCQL,GAuCT,uCAvCG,IAAMM,GAANN,GCfP,IAAAO,GAAgC,SAKzB,IAAMC,GAAN,MAAMA,EAA4D,CAwDzE,EAxDyEC,EAAAD,GAAA,qBAiBrEE,EAAA,CAhBCC,EAAS,CACN,SAAU,CACN,KAAMC,GACN,OAAQ,GACR,OAAQ,CACJC,EACAC,IAEqBA,EAAU,MAAM,GAAG,EACpB,CAAC,CAE7B,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAhBQP,GAiBT,4BAiBAE,EAAA,CAfCC,EAAS,CACN,SAAU,CACN,KAAMC,GACN,OAAQ,GACR,OAAQ,CACJC,EACAC,IAEOA,EAAU,MAAM,GAAG,EAAE,CAAC,CAErC,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAjCQP,GAkCT,gCAWAE,EAAA,CATCC,EAAS,CACN,SAAU,CACN,KAAM,CAACK,EAAqBH,EAAqBC,IAC7CF,GAA+BI,EAAW,CAAC,EAAeF,EAAW,mBAAgB,OAAO,CACpG,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GA5CQP,GA6CT,qBAUAE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMC,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAtDQP,GAuDT,yBAvDG,IAAMS,GAANT,GA0DMU,GAAN,MAAMA,WAAwCD,EAAgE,CAsBrH,EAtBqHR,EAAAS,GAAA,mCAWjHR,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMC,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAVQG,GAWT,4BAUAR,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMC,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GApBQG,GAqBT,oBArBG,IAAMC,GAAND,GAwBME,GAAN,MAAMA,WAAoCH,EAA4D,CAsB7G,EAtB6GR,EAAAW,GAAA,+BAWzGV,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMC,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAVQK,GAWT,wBAUAV,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMC,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GApBQK,GAqBT,oBArBG,IAAMC,GAAND,GCtFP,IAAAE,GAA4C,SASrC,IAAMC,GAA2BC,EAAA,CACpCC,EACAC,EACAC,EACAC,EACAC,IACS,CAET,IAAMC,EAAmB,CADLC,GAAiBJ,EAAY,CAAC,EAAGE,CAAO,EACrB,kBAAe,KAAK,EAC3D,OAAOG,GAAyBP,EAAQK,CAAgB,CAC5D,EAVwC,4BAW3BG,GAA0BT,EAAA,CACnCC,EACAC,EACAC,EACAC,EACAC,IACS,CAET,IAAMC,EAAmB,CADLC,GAAiBJ,EAAY,CAAC,EAAGE,CAAO,EACrB,WAAW,EAClD,OAAOG,GAAyBP,EAAQK,CAAgB,CAC5D,EAVuC,2BAY1BI,GAA2BV,EAAA,CACpCC,EACAC,EACAC,EACAC,EACAO,IACS,CAET,IAAML,EAAmB,CADLC,GAAiBJ,EAAY,CAAC,EAAGQ,CAAO,EACrB,OAAO,EAC9C,OAAOH,GAAyBP,EAAQK,CAAgB,CAC5D,EAVwC,4BAY3BM,GAAsBZ,EAAA,CAC/BC,EACAC,EACAC,EACAC,EACAC,IACS,CAET,IAAMC,EAAmB,CADLC,GAAiBJ,EAAY,CAAC,EAAGE,CAAO,EACrB,SAAS,EAChD,OAAOG,GAAyBP,EAAQK,CAAgB,CAC5D,EAVmC,uBAYtBO,GAAyBb,EAAA,CAClCC,EACAC,EACAC,EACAC,EACAC,IACS,CAET,IAAMC,EAAmB,CADLC,GAAiBJ,EAAY,CAAC,EAAGE,CAAO,EACrB,YAAY,EACnD,OAAOG,GAAyBP,EAAQK,CAAgB,CAC5D,EAVsC,0BAYzBQ,GAAgCd,EAAA,CACzCC,EACAC,EACAC,EACAC,EACAC,IACS,CAET,IAAMC,EAAmB,CADLC,GAAiBJ,EAAY,CAAC,EAAGE,CAAO,EACrB,cAAc,EACrD,OAAOG,GAAyBP,EAAQK,CAAgB,CAC5D,EAV6C,iCAWhCS,GAAN,MAAMA,EAAsD,CAUnE,EAVmEf,EAAAe,GAAA,uBAS/DC,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWL,GACX,YAAa,IAAmB,eAAY,QAC5C,iBAAkBM,EACtB,EACA,SAAUC,EACd,CAAC,GARQJ,GAST,uBATG,IAAMK,GAANL,GAYMM,GAAN,MAAMA,EAA8D,CAU3E,EAV2ErB,EAAAqB,GAAA,2BASvEL,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWL,GACX,YAAa,IAAmB,eAAY,QAC5C,iBAAkBM,EACtB,EACA,SAAUC,EACd,CAAC,GARQE,GAST,uBATG,IAAMC,GAAND,GAYME,GAAN,MAAMA,EAAgE,CAU7E,EAV6EvB,EAAAuB,GAAA,4BASzEP,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWL,GACX,YAAa,IAAmB,eAAY,QAC5C,iBAAkBM,EACtB,EACA,SAAUC,EACd,CAAC,GARQI,GAST,uBATG,IAAMC,GAAND,GAYME,GAAN,MAAMA,EAAgE,CAU7E,EAV6EzB,EAAAyB,GAAA,4BASzET,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWL,GACX,YAAa,IAAmB,eAAY,QAC5C,iBAAkBM,EACtB,EACA,SAAUC,EACd,CAAC,GARQM,GAST,uBATG,IAAMC,GAAND,GAYME,GAAN,MAAMA,EAAoE,CAUjF,EAViF3B,EAAA2B,GAAA,8BAS7EX,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWL,GACX,YAAa,IAAmB,eAAY,QAC5C,iBAAkBM,EACtB,EACA,SAAUC,EACd,CAAC,GARQQ,GAST,uBATG,IAAMC,GAAND,GAYME,GAAN,MAAMA,EAAoE,CAUjF,EAViF7B,EAAA6B,GAAA,8BAS7Eb,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWL,GACX,YAAa,IAAmB,eAAY,QAC5C,iBAAkBM,EACtB,EACA,SAAUC,EACd,CAAC,GARQU,GAST,uBATG,IAAMC,GAAND,GAYME,GAAN,MAAMA,EAA4D,CAUzE,EAVyE/B,EAAA+B,GAAA,0BASrEf,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWJ,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkBK,EACtB,EACA,SAAUC,EACd,CAAC,GARQY,GAST,uBATG,IAAMC,GAAND,GAYME,GAAN,MAAMA,EAAgE,CAU7E,EAV6EjC,EAAAiC,GAAA,8BASzEjB,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWR,GACX,YAAa,IAAmB,eAAY,MAC5C,iBAAkBS,EACtB,EACA,SAAUC,EACd,CAAC,GARQc,GAST,uBATG,IAAMC,GAAND,GAYME,GAAN,MAAMA,EAAiE,CAU9E,EAV8EnC,EAAAmC,GAAA,+BAS1EnB,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWP,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkBQ,EACtB,EACA,SAAUC,EACd,CAAC,GARQgB,GAST,uBATG,IAAMC,GAAND,GAYME,GAAN,MAAMA,EAA0E,CAUvF,EAVuFrC,EAAAqC,GAAA,iCASnFrB,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWH,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkBI,EACtB,EACA,SAAUC,EACd,CAAC,GARQkB,GAST,uBATG,IAAMC,GAAND,GAYME,GAAN,MAAMA,EAAiE,CAU9E,EAV8EvC,EAAAuC,GAAA,+BAS1EvB,EAAA,CARCC,EAAS,CACN,KAAM,CACF,UAAWlB,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkBmB,EACtB,EACA,SAAUC,EACd,CAAC,GARQoB,GAST,uBATG,IAAMC,GAAND,GCpMA,IAAME,GAAN,MAAMA,EAA8C,CAU3D,EAV2DC,EAAAD,GAAA,mBASvDE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMC,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GARQL,GAST,iCATG,IAAMM,GAANN,GAYMO,GAAN,MAAMA,EAAsD,CAUnE,EAVmEN,EAAAM,GAAA,uBAS/DL,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOK,GAA+BC,GAAuBD,CAAQ,EAAI,gBAC7E,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GARQE,GAST,iCATG,IAAMG,GAANH,GCfP,IAAAI,GAA0D,SAa1D,IAAMC,GAAyBC,EAAA,CAC3BC,EACAC,EACAC,EACAC,EACAC,IACS,CACT,IAAMC,EAAkBH,EAAY,MAAM,EAAG,CAAC,EAC1CI,EAEJ,OAAIH,EAAY,IAAM,oCAClBG,EAAW,kBAAe,MACnBH,EAAY,IAAM,gBACzBG,EAAW,mBAEfD,EAAgB,KAAKC,CAAQ,EAC7BD,EAAgB,CAAC,EAAIE,GAAiBF,EAAgB,CAAC,EAAGD,CAAK,EACxDI,GAAyBR,EAAQK,CAAe,CAC3D,EAlB+B,0BAoBlBI,GAAN,MAAMA,EAAwB,CAwBrC,EAxBqCV,EAAAU,GAAA,2BAUjCC,EAAA,CATCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAUC,EAAUC,IACvBC,GAA8BH,EAAUC,EAAUC,CAAS,EAAI,eACvE,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GATQP,GAUT,0BAWAC,EAAA,CATCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAUC,EAAUC,IACvBC,GAA8BH,EAAUC,EAAUC,CAAS,EAAI,eACvE,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GApBQP,GAqBT,wBArBG,IAAMQ,GAANR,GA0BMS,GAAN,MAAMA,EAA4C,CAYzD,EAZyDnB,EAAAmB,GAAA,mBAWrDR,EAAA,CAVCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAUC,EAAUC,IACvBK,GAAiCP,EAAUC,EAAUC,CAAS,EAAI,6BACtE,OAAQM,EACZ,CACJ,CAAC,EACAJ,EAAS,CACN,MAAO,QACX,CAAC,GAVQE,GAWT,sBAXG,IAAMG,GAANH,GAcMI,GAAN,MAAMA,EAA0G,CAAhH,cACH,mBAAgB,KACL,CACH,UAAW,CACP,MAAO,SACP,WAAY,CACR,MAAO,SACP,KAAM,gCACV,CACJ,CACJ,GA2HR,EArIuHvB,EAAAuB,GAAA,iCAuBnHZ,EAAA,CAVCC,EAAS,CACN,SAAU,CACN,IAAK,4BACL,KAAMQ,GACN,OAAQI,EACZ,CACJ,CAAC,EACAP,EAAS,CACN,MAAO,QACX,CAAC,GAtBQM,GAuBT,yCAYAZ,EAAA,CAVCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkB0B,EACtB,CACJ,CAAC,EACAR,EAAS,CACN,MAAO,QACX,CAAC,GAlCQM,GAmCT,wBAUAZ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMQ,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GA5CQM,GA6CT,2BAUAZ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMQ,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GAtDQM,GAuDT,yBAUAZ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMQ,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GAhEQM,GAiET,8BAUAZ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GA1EQM,GA2ET,qCAYAZ,EAAA,CAVCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkB0B,EACtB,CACJ,CAAC,EACAR,EAAS,CACN,MAAO,QACX,CAAC,GAtFQM,GAuFT,gCAYAZ,EAAA,CAVCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,WAC5C,iBAAkB0B,EACtB,CACJ,CAAC,EACAR,EAAS,CACN,MAAO,QACX,CAAC,GAlGQM,GAmGT,0BAUAZ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GA5GQM,GA6GT,0BAUAZ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAtHQM,GAuHT,8CAUAZ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMQ,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GAhIQM,GAiIT,iCAGAZ,EAAA,CADCe,GAAQ,SAAS,GAnITH,GAoIT,uBApIG,IAAMI,GAANJ,GAuIMK,GAAN,MAAMA,WAAkCD,EAAsE,CAkDrH,EAlDqH3B,EAAA4B,GAAA,6BAMjHjB,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAMQ,EACV,CACJ,CAAC,GALQQ,GAMT,oBASAjB,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,MAC5C,iBAAkB0B,EACtB,CACJ,CAAC,GAdQG,GAeT,sCAaAjB,EAAA,CAXCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,MAC5C,iBAAkB0B,EACtB,EACA,SAAUI,EACd,CAAC,EACAZ,EAAS,CACN,MAAO,QACX,CAAC,GA3BQW,GA4BT,2BAUAjB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMQ,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GArCQW,GAsCT,4BAWAjB,EAAA,CAVCC,EAAS,CACN,KAAM,CACF,UAAWb,GACX,YAAa,IAAmB,eAAY,MAC5C,iBAAkB0B,EACtB,CACJ,CAAC,EACAR,EAAS,CACN,MAAO,QACX,CAAC,GAhDQW,GAiDT,gCAjDG,IAAME,GAANF,GAoDMG,GAAN,MAAMA,WAAkCJ,EAAsE,CAiBrH,EAjBqH3B,EAAA+B,GAAA,6BAMjHpB,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAMQ,EACV,CACJ,CAAC,GALQW,GAMT,oBAUApB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAfQc,GAgBT,oCAhBG,IAAMC,GAAND,GAmBME,GAAN,MAAMA,WAA4BN,EAAgE,CAiBzG,EAjByG3B,EAAAiC,GAAA,uBAMrGtB,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAMQ,EACV,CACJ,CAAC,GALQa,GAMT,oBAUAtB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAfQgB,GAgBT,oCAhBG,IAAMC,GAAND,GAmBME,GAAN,MAAMA,WAA4BR,EAAgE,CAiBzG,EAjByG3B,EAAAmC,GAAA,uBAMrGxB,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAMQ,EACV,CACJ,CAAC,GALQe,GAMT,oBAUAxB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAfQkB,GAgBT,oCAhBG,IAAMC,GAAND,GC1SP,IAAAE,GAA4B,SAmB5B,IAAMC,GAAoBC,EAAA,CACtBC,EACAC,EACAC,EACAC,EACAC,IACS,CACT,GAAM,CAAE,SAAAC,CAAS,EAAIC,GAAyBJ,CAAW,EACnDK,EAAUC,GAAiBN,EAAY,CAAC,EAAGE,CAAO,EACxD,MAAO,GAAGJ,CAAM,GAAGO,CAAO,aAAaE,GAA2BJ,CAAQ,EAAE,QAAQ,MAAO,IAAI,CAAC,EACpG,EAV0B,qBAYpBK,GAA6B,CAC/B,UAAWZ,GACX,YAAa,IAAmB,eAAY,OAC5C,iBAAkBa,EACtB,EAEaC,GAAN,MAAMA,EAA8D,CA0B3E,EA1B2Eb,EAAAa,GAAA,2BAKvEC,EAAA,CAJCC,EAAS,CACN,KAAMJ,GACN,SAAUK,EACd,CAAC,GAJQH,GAKT,uBAKAC,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GATQE,GAUT,uBAKAC,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAdQE,GAeT,oBAKAC,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAnBQE,GAoBT,0BAKAC,EAAA,CAHCC,EAAS,CACN,KAAMJ,EACV,CAAC,GAxBQE,GAyBT,oBAzBG,IAAMI,GAANJ,GzBEA,SAASK,GAAiBC,EAAwB,CACrD,OAAOA,EAAe,QAAQ,IAAK,IAAI,CAC3C,CAFgBC,EAAAF,GAAA,oBAST,SAASG,GAAgBC,EAA4B,CACxD,OAAOA,EAAW,QAAQ,OAAQ,GAAG,EAAE,QAAQ,OAAQ,GAAG,EAAE,QAAQ,OAAQ,GAAG,CACnF,CAFgBF,EAAAC,GAAA,mBAWhB,SAASE,GACLC,EACAC,EACAC,EACAC,EACF,CAjEF,IAAAC,EAAAC,EAAAC,EAAAC,KAmEQF,GAAAD,EAAAD,EAAW,cAAX,YAAAC,EAA4B,sBAA5B,YAAAC,EAAoD,WAAWJ,OAC/DM,GAAAD,EAAAH,EAAW,cAAX,YAAAG,EAA4B,8BAA5B,YAAAC,EAA4D,WAAWN,OAEvED,EAAO,UAAUC,CAAiB,EAAIC,EAAO,QAAQ,WAC/CA,EAAO,QAAQ,WACfA,EAAO,QAAQ,SAE7B,CAdSN,EAAAG,GAAA,yBAsBT,SAASS,GAAcC,EAAwBN,EAAY,CACvD,IAAMO,EAAU,OAAO,KAAKP,EAAW,WAAc,EAAE,OAClDQ,GAAeA,EAAW,WAAW,GAAGF,CAAc,EAAE,GAAKE,EAAW,SAAS,GAAG,CACzF,EACMC,EAAiC,IAAI,IAC3C,OAAAF,EAAQ,QAASG,GAAuB,CAvF5C,IAAAT,EAwFQ,IAAMU,EAAeC,IAA2BX,EAAAS,EAAmB,MAAM,GAAG,EAAE,CAAC,IAA/B,YAAAT,EAAkC,MAAM,KAAK,EAAE,EACzFY,EAAaF,EAAa,QAAQ,KAAK,EAC7C,GAAIA,EAAa,WAAW,WAAW,GAAKE,EAAa,GAAI,CACzD,IAAMC,EAAgBH,EAAa,MAAM,KAAK,EACxCI,EAAkBD,EAAc,KAAME,GAASA,EAAK,WAAW,iBAAiB,CAAC,EACjFC,EAAUH,EAAc,KAAME,GAASA,EAAK,WAAW,SAAS,CAAC,EACjEE,EAAcD,EAAQ,MAAM,WAAW,EAAE,CAAC,EAAE,QAAQ,MAAO,IAAI,EACrE,GAAIF,EAAiB,CACjB,IAAMI,EAAgB,GAAGJ,EAAgB,MAAM,IAAI,EAAE,CAAC,CAAC,KAAKG,CAAW,GACjEE,EAA0B,GAAGN,EAAc,CAAC,CAAC,MAAMC,CAAe,MAAME,CAAO,GACrFR,EAAU,IAAIU,EAAeT,CAAkB,EAC/CD,EAAU,IAAIC,EAAoBU,CAAuB,CAC7D,MACIX,EAAU,IAAIS,EAAaR,CAAkB,EAC7CD,EAAU,IAAIC,EAAoBC,CAAY,CAEtD,MACIF,EAAU,IAAIE,EAAa,QAAQ,MAAO,IAAI,EAAGD,CAAkB,EACnED,EAAU,IAAIC,EAAoBC,CAAY,CAEtD,CAAC,EACMF,CACX,CA5BShB,EAAAY,GAAA,iBAoCT,SAASgB,GACLC,EACAzB,EACA0B,EACF,CACOD,EAAO,aACRA,EAAO,WAAazB,EAAO,MAAM,QAAU,CAAC,GAE3CyB,EAAO,WAAW,GAAGC,CAAQ,EAAE,IAChCD,EAAO,WAAW,GAAGC,CAAQ,EAAE,EAAI,CAAC,EAE5C,CAXS9B,EAAA4B,GAAA,6BAkBT,SAASG,GAAYzB,EAA8C,CAxInE,IAAAE,EAAAC,EAyII,OAAID,EAAAF,EAAO,YAAP,MAAAE,EAAkB,SAAS,gBACpBF,EAAO,UAAU,MAAM,cAAc,EAAE,CAAC,GAE5CG,EAAAH,EAAO,YAAP,YAAAG,EAAkB,MAAM,cAAc,EACjD,CALST,EAAA+B,GAAA,eAcT,SAASC,GACL5B,EACAC,EACAC,EACAC,EACA0B,EACF,CACsB,CAChB,CAAE,4BAAmC,WAAY7B,EAAO,OAAO,QAAS,GAAA6B,CAAG,EAC3E,CAAE,sCAAqC,WAAY7B,EAAO,OAAO,QAAS,GAAA6B,CAAG,EAC7E,CACI,oBACA,WAAY7B,EAAO,OAAO,QAC1B,GAAI6B,GAAMA,EAAG,SAAS,aAAa,GAAKA,EAAG,MAAM,eAAe,EAAE,CAAC,CACvE,EACA,CAAE,sCAAqC,WAAY7B,EAAO,OAAO,QAAS,GAAA6B,CAAG,EAC7E,CAAE,qBAA4B,WAAY7B,EAAO,MAAM,QAAQ,QAAS,GAAA6B,CAAG,EAC3E,CAAE,yBAA2B,WAAY7B,EAAO,MAAM,QAAS,GAAA6B,CAAG,CACtE,EACY,QAASJ,GAAW,CAzKpC,IAAArB,EAAAC,EA0KQ,IAAMyB,EAAgBtB,GAAciB,EAAO,KAAMtB,CAAU,EAC3D,GAAI2B,EAAc,IAAIL,EAAO,EAAE,EAAG,CAC9B,IAAMM,EAAcD,EAAc,IAAIL,EAAO,EAAE,EACzCC,GAAWtB,EAAA2B,EAAY,MAAM,GAAG,EAAE,CAAC,IAAxB,YAAA3B,EAA2B,MAAM,KAAK,GACnDqB,EAAO,4BACPD,GAA0BC,EAAQzB,EAAQ0B,CAAQ,EAEtD,IAAMM,EAAaP,EAAO,WAAWC,CAAQ,IACrBrB,EAAAF,EAAW,YAAY4B,CAAW,IAAlC,YAAA1B,EAAoD,WAAWJ,KACjE+B,IAClBA,EAAW/B,CAAiB,EAAIC,EAAO,QAAQ,WACzCA,EAAO,QAAQ,WACfA,EAAO,QAAQ,SAE7B,CACJ,CAAC,CACL,CApCSN,EAAAgC,GAAA,iBA6CT,SAASK,GACLjC,EACAC,EACAC,EACAC,EACF,CAxMF,IAAAC,EA0MI,GADuBD,EAAW,YAAe,cAAiB,WAAWF,CAAiB,EAC1E,CAChB,IAAMiC,EAAWC,GAAmBnC,EAAO,gBAAa,KAAK,EAAGC,CAAiB,GAC7EG,EAAA8B,GAAA,YAAAA,EAAU,OAAV,MAAA9B,EAAgB,gBAChB8B,EAAS,KAAK,gBAAgBhC,EAAQF,EAAO,gBAAa,KAAK,EAAGC,CAAiB,EAEnFD,EAAO,gBAAa,KAAK,EAAEC,CAAiB,EAAIC,EAAO,QAAQ,WACzDA,EAAO,QAAQ,WACfA,EAAO,QAAQ,QAE7B,CACJ,CAjBSN,EAAAqC,GAAA,qBAyBT,SAASG,GACLpC,EACAE,EACAC,EACF,CAhOF,IAAAC,EAiOI,IAAMiC,EAAmC,CACrC,UAAWnC,EAAO,UAClB,WAAYA,EAAO,QAAQ,SAC3B,SAAUA,EAAO,QAAQ,WAAaA,EAAO,QAAQ,WAAaA,EAAO,QAAQ,SACjF,YAAaA,EAAO,YACpB,SAAUA,EAAO,QACrB,EACIoC,GAEC,CAACtC,EAAO,MAAM,MAAQA,EAAO,MAAM,OAAS,MAAG,YAAY,kBAC5D,GAACI,EAAAiC,EAAgB,YAAhB,MAAAjC,EAA2B,SAAS,wCAAqC,IAAI,cAAW,kBAAkB,IAE3GkC,EAAkB,iCAElBA,EAAkBtC,EAAO,MAAM,YAAY,MAG3CG,EAAW,YAAe,GAAGmC,CAAe,aAAa,EAAE,WAAWD,EAAgB,UAAU,GAC9EA,EAAgB,cAAgB,eAAY,cAC9DE,GAAgBvC,EAAO,MAAOqC,EAAiBlC,CAAU,CAEjE,CA1BSP,EAAAwC,GAAA,4BAmCF,SAASI,GACZxC,EACAyC,EACAC,EACAC,EACI,CApQR,IAAAvC,EAAAC,EAqQI,GAAI,CACA,IAAMH,EAAS0C,GAAkBH,CAAY,EACvCxC,EAAoBC,EAAO,QAAQ,SACzC,IACIE,EAAAF,EAAO,YAAP,MAAAE,EAAkB,SAAS,cAAW,cACtCC,EAAAH,EAAO,YAAP,MAAAG,EAAkB,SAAS,cAAW,oBAGtC,OADAH,EAAO,UAAYL,GAAgBK,EAAO,SAAS,EAC3CA,EAAO,YAAa,CACxB,KAAK,eAAY,eAAgB,CAC7BH,GAAsBC,EAAQC,EAAmBC,EAAQwC,CAAS,EAClE,KACJ,CACA,KAAK,eAAY,YAAa,CACHA,EAAU,WAAczC,CAAiB,IAE5DD,EAAOE,EAAO,QAAQ,QAAQ,EAAIA,EAAO,QAAQ,UAErD,KACJ,CACA,KAAK,eAAY,OAAQ,CACrB,IAAM2C,EAAWlB,GAAYzB,CAAM,EACnC2C,GAAYjB,GAAc5B,EAAQC,EAAmBC,EAAQwC,EAAWG,CAAQ,EAChF,KACJ,CACA,KAAK,eAAY,WAAY,CACzBZ,GAAkBjC,EAAQC,EAAmBC,EAAQwC,CAAS,EAC9D,KACJ,CACA,QAAS,CACLN,GAAyBpC,EAAQE,EAAQwC,CAAS,EAClD,KACJ,CACJ,CAER,OAASI,EAAO,CACZC,GACIJ,EACA,CACI,SAAU,eAAY,MACtB,QAASK,EAAQ,EAAE,WAAW,CAClC,EACA,GAAGF,CACP,CACJ,CACJ,CAnDgBlD,EAAA4C,GAAA,WA0DhB,SAASS,GAA6BC,EAAqBlB,EAAoC,CAC3F,GAAIkB,IAAgB,0BAA4BlB,EAAWkB,CAAW,EAClE,QAAWC,KAAWnB,EAAWkB,CAAW,EAAE,SAAa,CACvD,IAAME,EAAuBpB,EAAWkB,CAAW,EAAE,SAAYC,CAAO,EACxE,GAAIC,EAAqB,cAAkB,CACvC,QAAWC,KAAOD,EAAqB,cACnCA,EAAqBC,CAAG,EAAID,EAAqB,cAAiBC,CAAG,EAEzE,OAAOD,EAAqB,aAChC,CACJ,CAER,CAZSxD,EAAAqD,GAAA,gCAuBF,SAASK,GACZtB,EACAuB,EACAb,EACAc,EACAb,EACAc,EACI,CACJ,GAAI,CAACf,EACD,OAEJ,IAAIgB,EAAkB,CAAC,EACjBC,EAAuB3B,EAAW,cAAgBA,EAAW,cAAc,EAAI,OAErF,GAAIU,EAAU,WACV,QAAWQ,KAAeR,EAAU,WAAe,CAC/C,IAAMR,EAAWC,GAAmBH,EAAYkB,CAAW,EAC3D,GAAIhB,GAAA,MAAAA,EAAU,SAAU,CACpB,IAAM0B,EAAO1B,EAAS,SAAS,KAAK,CAACsB,CAAO,EAAGD,EAAUE,CAAM,EAC/DC,EAAkBG,GAA8BN,EAAUK,CAAI,EAC9DE,GAAe5B,EAAUwB,EAAiBR,EAAalB,CAAU,EACjE+B,GAA0BJ,EAAsBD,EAAiBE,EAAMjB,CAAM,CACjF,CAEAM,GAA6BC,EAAalB,CAAU,CACxD,CAER,CA3BgBpC,EAAA0D,GAAA,4BAmCT,SAASU,GAAmBT,EAAoBC,EAAiC,CAnXxF,IAAApD,EAAAC,EAAAC,EAAAC,EAAA0D,EAAAC,EAAAC,EAAAC,EAAAC,EAoXI,IAAMC,EAAOf,EAAS,mBAAgB,OAAO,EAAE,MAAMC,CAAO,EACxDe,EAA4B,MAAG,YAAY,gBAC/C,OACInE,EAAAmD,EAAS,mBAAgB,OAAO,EAAE,MAAMC,CAAO,EAAE,YAAjD,MAAApD,EAA4D,YAC3DE,GAAAD,EAAAkD,EAAS,mBAAgB,OAAO,EAAE,MAAMC,CAAO,EAAE,UAAU,WAA3D,YAAAnD,EAAqE,gBAArE,MAAAC,EAAqF,OAClFC,EAAAgD,EAAS,mBAAgB,OAAO,EAAE,MAAMC,CAAO,EAAE,UAAU,WAA3D,MAAAjD,EAAsE,WAE1EgE,IAAYJ,GAAAD,GAAAD,EAAAK,EAAK,YAAL,YAAAL,EAAgB,WAAhB,YAAAC,EAA0B,gBAA1B,YAAAC,EAA0C,SAAWC,EAAAE,EAAK,YAAL,YAAAF,EAAgB,SAAS,aACnFC,EAAAC,EAAK,YAAL,YAAAD,EAAgB,QAAS,qDAChCE,EAAY,MAAG,YAAY,iBAExBA,CACX,CAbgB3E,EAAAoE,GAAA,sBAehB,SAASQ,GACLC,EACAC,EACAC,EACAC,EACA5E,EACA6E,EACAC,EACI,CACJ,GAAIL,EAAO,YAAiBA,EAAO,kBAAkB,EAAG,CACpD,IAAMM,EAAWN,EAAO,WAClBA,EAAO,WAAc,iBAAiB,EAAE,YAAY,MACpDA,EAAO,kBAAkB,EAAE,iBAAiB,EAAE,YAAY,MAC1DO,EAAc,KAAK,MAAMD,EAAS,OAAO,EAAGA,EAAS,MAAM,CAAC,EAC9DE,EAAaR,EAAO,MAAWA,EAAO,KAAQ,aAAeA,EAAO,KAAQ,YAAY,KACvFQ,IACDA,EAAaR,EAAO,OAAYA,EAAO,MAAS,aAAeA,EAAO,MAAS,YAAY,MAE/F,IAAMS,EAAmC,CACrC,GAAIT,EAAO,aAAeA,EAAO,YAAY,GAC7C,KAAMQ,EACN,GAAGD,EACH,UAAWA,EAAY,UACvB,YAAaA,EAAY,cAAmB,OAAY,OAAOA,EAAY,WAAc,EAAI,OAC7F,gBAAiBA,EAAY,gBAC7B,UAAWN,EAAqBC,CAAW,EAAE,UAC7C,aAAcD,EAAqBC,CAAW,EAAE,aAChD,OAAQC,EACR,cAAAC,CACJ,EACIC,IACAI,EAAc,kBAAoBJ,GAEjC9E,EAAO,MAAM,QAAW,SACzBA,EAAO,MAAM,QAAW,OAAY,CAAC,GAEnBA,EAAO,MAAM,QAAW,OAChC,KAAKkF,CAAa,CACpC,CACJ,CAvCStF,EAAA4E,GAAA,0BAyCT,SAASW,GACLN,EACAH,EACAU,EACArD,EACF,CACE,IAAI+C,EACJ,GAAID,IAAkB,oBAAiB,gCACnC,QAAWQ,KAAY,OAAO,KAAKX,CAAoB,EAAG,CACtD,GAAM,CAACY,EAAcC,EAAmBC,CAAW,EAAIH,EAAS,MAAM,GAAG,EAErEC,IAAiB,oBAAiB,+BAClCC,IAAsBH,GACtBI,IAAgBzD,IAEhB+C,EAAoBJ,EAAqBW,CAAQ,EAAE,aAE3D,CAEJ,OAAOP,CACX,CApBSlF,EAAAuF,GAAA,8BAsBT,SAASM,GACLC,EACA1F,EACA0E,EACAC,EACAgB,EACAd,EACAC,EACF,CAzcF,IAAA1E,EA0cI,GAAIsF,EAAkB,CAAC,EAAG,CAEtB,IAAME,EADe,KAAK,SAAM,aAASF,EAAkB,CAAC,EAAE,YAAa,CAAE,QAAS,EAAK,CAAC,CAAC,EACtDG,EAAmB,EACpDC,EAAmBC,GAAoCH,CAAiB,EAC9E,GAAIE,EAIA,IAHK1F,EAAAJ,EAAO,gBAAa,KAAK,IAAzB,MAAAI,EAA6B,UAC9BJ,EAAO,gBAAa,KAAK,EAAE,QAAa,CAAC,GAEzC,MAAM,QAAQ8F,CAAgB,EAC9B,QAAWE,KAAOF,EACdtB,GACIwB,EACAtB,EACAC,EACAgB,EACA3F,EACA6E,EACAC,CACJ,OAGJN,GACIsB,EACApB,EACAC,EACAgB,EACA3F,EACA6E,EACAC,CACJ,CAGZ,CACJ,CA1CSlF,EAAA6F,GAAA,4BA4CT,SAASQ,GACLvB,EACAwB,EACAC,EACAnG,EACAoG,EACF,CACE,QAAWzB,KAAe,OAAO,KAAKD,CAAoB,EAAG,CACzD,IAAM2B,EAAmB1B,EAAY,MAAM,GAAG,EACxC,CAAC2B,EAAkBlB,CAAY,EAAIiB,EAEnCtE,EAAcsE,EAAiB,CAAC,EAChCV,EAASQ,GAAyBpE,IAAgBoE,EAAsB,IAAM,OAAYpE,EAC1F8C,EAAgB,oBAAiByB,CAAgB,EACvD,GAAIzB,GAAiB,IAAMO,IAAiBc,EAAoB,CAC5D,IAAMK,EAAe7B,EAAqBC,CAAW,EAAE,KACjDD,EAAqBC,CAAW,EAAE,KAAK,YAAY,EACnD,MACF6B,EAAe9B,EAAqBC,CAAW,EAAE,aACrD,GAAI,CAAC6B,EACD,SAGJ,IAAM1B,EAAoBK,GACtBN,EACAH,EACAU,EACArD,CACJ,EAGM0E,EAAgBD,EAAa,MAAM,GAAG,EAC5CA,EAAeC,EAAcA,EAAc,OAAS,CAAC,EAAI,oBAAmBF,EAC5E,IAAMb,EAAoBU,EAAU,OAAQM,GAAaA,EAAS,cAAiB,SAASF,CAAY,CAAC,EACzGf,GACIC,EACA1F,EACA0E,EACAC,EACAgB,EACAd,EACAC,CACJ,CACJ,CACJ,CACJ,CA7CSlF,EAAAqG,GAAA,yBAwDF,SAASU,GACZ3G,EACAuD,EACAqD,EACAC,EACAT,EACAD,EACI,CACJ,GAAI,CAACC,EACD,OAEJ,IAAMF,EACF,KAAOC,GAAyBA,EAAsB,OAASA,EAAsB,OAASS,EAAO,WAEzG,GACIrD,EAAS,mBAAgB,GAAG,GAC5BA,EAAS,mBAAgB,GAAG,EAAE,SAC9BA,EAAS,mBAAgB,GAAG,EAAE,QAAW,YACzCA,EAAS,mBAAgB,GAAG,EAAE,QAAW,WAAc,uBAAuB,EAChF,CACE,IAAMuD,EAAgB,wCAAqC,IAAID,CAAQ,EACjEnC,EACFnB,EAAS,mBAAgB,GAAG,EAAE,QAAW,WAAc,uBAAuB,EAAEuD,CAAa,EACjG,GAAI,CAACpC,EACD,OAEJuB,GAAsBvB,EAAsBwB,EAAoBC,EAAuBnG,EAAQoG,CAAS,CAC5G,CACJ,CA5BgBxG,EAAA+G,GAAA,gBAoCT,SAASI,GACZC,EACAC,EACAC,EACF,CAEE,GADAF,EAAiB,OAAS,CAAE,QAAS,CAAC,CAAE,EACpCE,EAAkB,kBAAe,qBAAqB,EAAG,CACzD,IAAMC,EAAgBD,EAAkB,kBAAe,qBAAqB,EAAE,WAC9E,QAAWE,KAAaD,EACpBH,EAAiB,OAAO,QAAQI,CAAS,EAAIH,EAAQ,eAAe,cAAW,WAAYG,EAAW,CAAC,CAAC,CAEhH,CACJ,CAZgBxH,EAAAmH,GAAA,uB0BhkBhB,IAAAM,GAAuF,SCRvF,IAAAC,GAAmB,SCDnB,IAAAC,GAAA,GAAAC,GAAAD,GAAA,aAAAE,GAAA,mBAAAC,GAAA,wBAAAC,GAAA,kCAAAC,GAAA,sBAAAC,GAAA,cAAAC,GAAA,kBAAAC,GAAA,4BAAAC,GAAA,UAAAC,GAAA,eAAAC,GAAA,gBAAAC,GAAA,qBAAAC,GAAA,SAAAC,GAAA,eAAAC,GAAA,oBAAAC,GAAA,iBAAAC,GAAA,gBAAAC,GAAA,SAAAC,GAAA,uBAAAC,GAAA,YAAAC,GAAA,0BAAAC,GAAA,cAAAC,GAAA,gBAAAC,GAAA,aAAAC,GAAA,cAAAC,GAAA,eAAAC,GAAA,yBAAAC,GAAA,uBAAAC,GAAA,oBAAAC,GAAA,YAAAC,KACE,IAAAF,GAAsB,wKACtBD,GAAwB,iFACxBjB,GAAc,6FACdU,GAAW,2DACXP,GAAQ,kGACRE,GAAmB,0EACnBI,GAAsB,4DACtBR,GAAe,iDACfC,GAAoB,8EACpBS,GAAyB,iDACzBhB,GAAqB,iHACrBD,GAAiC,gLACjCc,GAAQ,4CACRT,GAAS,qDACTiB,GAAc,wGACdzB,GAAW,uCACXC,GAAkB,gCAClBC,GAAuB,0DACvBmB,GAAa,qDACbL,GAAe,8CACfQ,GAAa,qDACbD,GAAY,gEACZD,GAAe,4DACfjB,GAAa,kCACbC,GAAiB,wEACjBO,GAAc,4DACdN,GAA2B,gEAC3BQ,GAAgB,+GAChBa,GAAmB,sDA7BrBC,GAAA,CACE,mBAAAF,GACA,qBAAAD,GACA,WAAAjB,GACA,QAAAU,GACA,KAAAP,GACA,gBAAAE,GACA,mBAAAI,GACA,YAAAR,GACA,iBAAAC,GACA,sBAAAS,GACA,kBAAAhB,GACA,8BAAAD,GACA,KAAAc,GACA,MAAAT,GACA,WAAAiB,GACA,QAAAzB,GACA,eAAAC,GACA,oBAAAC,GACA,UAAAmB,GACA,YAAAL,GACA,UAAAQ,GACA,SAAAD,GACA,YAAAD,GACA,UAAAjB,GACA,cAAAC,GACA,WAAAO,GACA,wBAAAN,GACA,aAAAQ,GACA,gBAAAa,EACF,EC3BO,SAASE,GAASC,EAA0B,CAC/CA,EAAa,kBAAkBA,EAAa,SAAU,cAAeC,EAAU,CACnF,CAFgBC,EAAAH,GAAA,YFCT,SAASI,GAASC,EAAW,KAAY,CAE5CC,EAAQ,KAAK,CACT,UAAW,CACP,GAAI,CACA,YAAa,GAAAC,OACjB,CACJ,EACA,IAAKF,EACL,YAAa,KACb,WAAY;AAAA;AAAA,CAChB,CAAC,EAGDD,GAAaE,CAAO,CACxB,CAfgBE,EAAAJ,GAAA,YGHhB,IAAAK,GAA2E,SAcpE,SAASC,GACZC,EACAC,EACAC,EAC6B,CAnBjC,IAAAC,EAoBI,IAAIC,EACJ,QAAWC,KAAOL,EAAS,CACvB,IAAMM,EAASN,EAAQK,CAAG,EAC1B,GAAIE,IAAcJ,EAAAG,EAAO,YAAP,YAAAH,EAAkB,IAAI,IAAM,cAAW,YAAcG,EAAO,YAAcL,EACxF,OAAAC,EAAS,QAAQG,CAAG,EACbC,EACJ,GAAIA,EAAO,QACdF,EAAYL,GAAiBO,EAAO,MAAOL,EAAWC,CAAQ,EAC1DE,GACA,OAAAF,EAAS,QAAQG,CAAG,EACbD,CAGnB,CACJ,CAnBgBI,EAAAT,GAAA,oBA2BT,SAASU,GAAqBT,EAA6BE,EAAmD,CA1CrH,IAAAC,EA2CI,QAAWE,KAAOL,EAAS,CACvB,IAAMM,EAASN,EAAQK,CAAG,EAC1B,GAAIE,IAAcJ,EAAAG,EAAO,YAAP,YAAAH,EAAkB,IAAI,IAAM,cAAW,WACrD,OAAAD,EAAS,KAAKG,CAAG,EACVC,CAEf,CACJ,CARgBE,EAAAC,GAAA,wBAeT,SAASC,GAAWC,EAA0E,CACjG,GAAI,CAACA,EAAiB,SAAS,mBAAgB,OAAO,EAAG,CACrDC,GAAID,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAASE,EAAQ,EAAE,MAAM,EACzB,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,OAAO,CACnC,CACJ,CAAC,EACD,MACJ,CACA,IAAMb,EAAUW,EAAiB,SAAS,mBAAgB,OAAO,EAAE,MACnE,GAAI,CAACX,EAAS,CACVY,GAAID,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAASE,EAAQ,EAAE,UAAW,CAAE,MAAOF,EAAiB,SAAS,SAAS,EAAE,EAAM,CAAC,EACnF,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,OAAO,CACnC,CACJ,CAAC,EACD,MACJ,CACA,OAAOX,CACX,CAzBgBQ,EAAAE,GAAA,cAiCT,SAASI,GAAYR,EAA2BS,EAAyBd,EAAyB,CA1FzG,IAAAE,EA2FI,GAAI,CAACG,EAAQ,CACTM,GAAIG,EAAQ,CACR,SAAU,eAAY,MACtB,QAASF,EAAQ,EAAE,qBAAsB,CAAE,UAAAZ,CAAU,CAAC,EACtD,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,OAAO,CACnC,CACJ,CAAC,EACD,MACJ,CACA,GAAI,CAACK,EAAO,UAAW,CACnB,IAAMU,GAAWb,EAAAG,EAAO,YAAP,YAAAH,EAAkB,KACnCS,GAAIG,EAAQ,CACR,SAAU,eAAY,MACtB,QAASF,EAAQ,EAAE,cAAe,CAAE,SAAAG,CAAS,CAAC,EAC9C,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,OAAO,CACnC,CACJ,CAAC,CACL,CACJ,CAvBgBR,EAAAM,GAAA,eA+BT,SAASG,GACZjB,EACAE,EACAa,EAC6B,CA7HjC,IAAAZ,EA8HI,QAAWE,KAAOL,EAAS,CACvB,IAAMM,EAASN,EAAQK,CAAG,EAE1B,GADAH,EAAS,KAAKG,CAAG,EACbE,IAAcJ,EAAAG,EAAO,YAAP,YAAAH,EAAkB,IAAI,IAAM,cAAW,mBACrD,OAAOG,CAEf,CAEAM,GAAIG,EAAQ,CACR,SAAU,eAAY,MACtB,QAASF,EAAQ,EAAE,OAAO,EAC1B,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,OAAO,CACnC,CACJ,CAAC,CACL,CArBgBL,EAAAS,GAAA,0BA6BT,SAASC,GAA0BC,EAAsBC,EAAyB,CACrF,IAAMC,EAAWF,EAAa,MAAM,GAAG,EACvC,OAAO,MAAG,gBAAgBE,EAAS,CAAC,CAAC,GAAKA,EAAS,CAAC,IAAMD,CAC9D,CAHgBZ,EAAAU,GAAA,6BAWT,SAASI,GAA4BC,EAAkBtB,EAA2B,CACrF,IAAMuB,EAAqBC,GACvBF,EACA,8BAA8B,MAAG,qBAAqB,IAAI,MAAG,iCAAiC,EAClG,EACMG,EAAqB,CAAC,EAC5B,QAAWrB,KAAOmB,EACVN,GAA0Bb,EAAKJ,CAAS,IACxCyB,EAAmBrB,CAAG,EAAImB,EAAmBnB,CAAG,GAGxD,OAAOqB,CACX,CAZgBlB,EAAAc,GAAA,+BAkBhB,SAASK,GAA4BC,EAA+D,CAnLpG,IAAAzB,EAoLI,IAAIA,EAAAyB,EAAO,SAAP,MAAAzB,EAAe,QAAS,CACxB,QAAW0B,KAAaD,EAAO,OAAO,QAC9B,OAAO,KAAKA,EAAO,OAAO,QAAQC,CAAS,CAAC,EAAE,SAAW,GACzD,OAAOD,EAAO,OAAO,QAAQC,CAAS,EAG1C,OAAO,KAAKD,EAAO,OAAO,OAAO,EAAE,SAAW,GAC9C,OAAOA,EAAO,OAAO,QAErB,OAAO,KAAKA,EAAO,MAAM,EAAE,SAAW,GACtC,OAAOA,EAAO,MAEtB,CACJ,CAdSpB,EAAAmB,GAAA,+BAoBT,SAASG,GAA+BF,EAA+D,CAvMvG,IAAAzB,EAAA4B,EAAAC,EAwMI,IAAI7B,EAAAyB,EAAO,YAAP,MAAAzB,EAAkB,gBAAiB,CACnC,QAAW8B,KAAYL,EAAO,UAAU,gBAChC,OAAO,KAAKA,EAAO,UAAU,gBAAgBK,CAAQ,CAAC,EAAE,SAAW,GACnE,OAAOL,EAAO,UAAU,gBAAgBK,CAAQ,IAGpDD,EAAA,OAAO,MAAKD,EAAAH,EAAO,YAAP,YAAAG,EAAkB,eAAe,IAA7C,YAAAC,EAAgD,UAAW,GAC3D,OAAOJ,EAAO,UAAU,eAEhC,CACJ,CAXSpB,EAAAsB,GAAA,kCAiBT,SAASI,GAA6BN,EAA+D,CAxNrG,IAAAzB,EAyNI,IAAIA,EAAAyB,EAAO,QAAP,MAAAzB,EAAc,QAAS,CACvB,QAAW0B,KAAaD,EAAO,MAAM,QAAQ,QACrC,OAAO,KAAKA,EAAO,MAAM,QAAQ,QAAQC,CAAS,CAAC,EAAE,SAAW,GAChE,OAAOD,EAAO,MAAM,QAAQ,QAAQC,CAAS,EAGjD,OAAO,KAAKD,EAAO,MAAM,QAAQ,OAAO,EAAE,SAAW,GACrD,OAAOA,EAAO,MAAM,QAAQ,QAE5B,OAAO,KAAKA,EAAO,MAAM,OAAO,EAAE,SAAW,GAC7C,OAAOA,EAAO,MAAM,OAE5B,CACJ,CAdSpB,EAAA0B,GAAA,gCAoBF,SAASC,GAAoBP,EAAqE,CAErGM,GAA6BN,CAAM,EAEnCE,GAA+BF,CAAM,EAErCD,GAA4BC,CAAM,CACtC,CAPgBpB,EAAA2B,GAAA,uBC5OhB,IAAAC,GAAA,GAAAC,GAAAD,GAAA,wBAAAE,GAAA,eAAAC,GAAA,eAAAC,GAAA,iBAAAC,GAAA,yBAAAC,GAAA,0BAAAC,GAAA,yBAAAC,KCAA,IAAAC,GAAgC,SASzB,IAAMC,GAAN,KAAkE,CAyBzE,EAzByEC,EAAAD,GAAA,sBAQrEE,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWC,GACX,YAAa,IAAmB,eAAY,YAC5C,iBAAkBC,EACtB,CACJ,CAAC,GAPQL,GAQT,0BAGAE,EAAA,CADCI,GAAQ,OAAO,GAVPN,GAWT,qBAGAE,EAAA,CADCI,GAAQ,0BAA0B,GAb1BN,GAcT,yBAGAE,EAAA,CADCI,GAAQ,yBAAyB,GAhBzBN,GAiBT,qBAGAE,EAAA,CADCI,GAAQ,sBAAsB,GAnBtBN,GAoBT,sBApBSA,GAANE,EAAA,CAJNK,GAAsB,CACnB,GAAI,2EACJ,OAAQ,MAAG,kBACf,CAAC,GACYP,ICTb,IAAAQ,GAAgC,SAWzB,IAAMC,GAAN,KAAkD,CAkBzD,EAlByDC,EAAAD,GAAA,cAQrDE,EAAA,CAPCC,EAAS,CACN,KAAM,CACF,UAAWC,GACX,YAAa,IAAmB,eAAY,YAC5C,iBAAkBC,EACtB,CACJ,CAAC,GAPQL,GAQT,0BAGAE,EAAA,CADCI,GAAQ,kBAAkB,GAVlBN,GAWT,yBAGAE,EAAA,CADCI,GAAQ,YAAY,GAbZN,GAcT,qBAGAE,EAAA,CADCI,GAAQ,kBAAkB,GAhBlBN,GAiBT,sBAjBSA,GAANE,EAAA,CAJNK,GAAsB,CACnB,GAAI,MAAG,kCACP,OAAQ,MAAG,0BACf,CAAC,GACYP,ICNb,IAAAQ,GAAmB,SASZ,IAAMC,GAAN,KAAkD,CA2EzD,EA3EyDC,EAAAD,GAAA,cASrDE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAA+BC,GAAuBD,CAAQ,CACzE,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GARQN,GAST,+CAUAE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAA+BC,GAAuBD,CAAQ,CACzE,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAlBQN,GAmBT,gDAUAE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAA+BC,GAAuBD,CAAQ,CACzE,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GA5BQN,GA6BT,gCAUAE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAA+BC,GAAuBD,CAAQ,CACzE,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAtCQN,GAuCT,+BAGAE,EAAA,CADCK,GAAQ,QAAQ,GAzCRP,GA0CT,sBAGAE,EAAA,CADCK,GAAQ,UAAU,GA5CVP,GA6CT,wBAGAE,EAAA,CADCK,GAAQ,QAAQ,GA/CRP,GAgDT,sBAUAE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAA+BI,GAAyBJ,CAAQ,CAC3E,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAzDQN,GA0DT,qDAgBAE,EAAA,CAdCC,EAAS,CACN,SAAU,CACN,KAAOC,GAA+BC,GAAuBD,CAAQ,EACrE,OAASK,GAAsC,CAC3C,GAAI,kBAAmBA,EACnB,OAAOA,EAAM,aAErB,EACA,IAAK,eACT,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GAzEQN,GA0ET,mCA1ESA,GAANE,EAAA,CAJNQ,GAAsB,CACnB,GAAI,MAAG,kCACP,OAAQ,MAAG,0BACf,CAAC,GACYV,ICTb,SAASW,GAA4BC,EAAyBC,EAAY,CACtE,QAAWC,KAAeF,EAAgB,aAAgB,OAAW,CACjEC,EAAW,OAAOC,CAAW,EAAIF,EAAgB,aAAgB,OAAUE,CAAW,EACtF,IAAMC,EAAiBH,EAAgB,aAAgB,OAAUE,CAAW,EAAE,eAC1E,OAAOC,GAAmB,WAC1BF,EAAW,OAAOC,CAAW,EAAE,eAAiBC,EAAe,MAAM,GAAG,GAE5E,QAAWC,KAAaJ,EAAgB,aAAgB,OAAUE,CAAW,EAAE,OAAQ,CACnF,IAAMG,EAAcL,EAAgB,aAAgB,OAAUE,CAAW,EAAE,OAAOE,CAAS,EAC3FH,EAAW,OAAOC,CAAW,EAAE,OAAOE,CAAS,EAAIC,EAC/CA,EAAY,QAAU,OAAOA,EAAY,QAAW,WACpDJ,EAAW,OAAOC,CAAW,EAAE,OAAOE,CAAS,EAAE,OAASC,EAAY,OAAO,MACzE,GACJ,EAER,CACJ,CACJ,CAjBSC,EAAAP,GAAA,+BAmBF,SAASQ,GAAsBP,EAAuC,CACzE,GAAI,CAACA,GAAmB,CAACA,EAAgB,aACrC,OAEJ,IAAMC,EAA2B,KAAK,MAAM,KAAK,UAAUD,EAAgB,YAAe,CAAC,EAE3F,OAAI,OAAOA,EAAgB,aAAgB,gBAAsB,WAC7DC,EAAW,eAAiBD,EAAgB,aAAgB,eAAkB,MAAM,GAAG,GAEvFA,EAAgB,aAAgB,QAChCD,GAA4BC,EAAiBC,CAAU,EAEpDA,CACX,CAbgBK,EAAAC,GAAA,yBAeT,SAASC,GAAqBR,EAAiC,CAClE,IAAMC,EAAa,CAAC,EACpB,OAAAA,EAAW,aAAkBM,GAAsBP,EAAgB,cAAiB,EAC7EC,CACX,CAJgBK,EAAAE,GAAA,wBAMhB,SAASC,GAAmBR,EAAmCS,EAAaV,EAA0B,CAClG,QAAWW,KAAaV,EAAW,eAAkBS,CAAG,EAAE,OAAW,CACjE,IAAME,EAAQX,EAAW,eAAkBS,CAAG,EAAE,OAAUC,CAAS,EAInE,GAHIC,EAAM,iBACNZ,EAAgB,eAAkBU,CAAG,EAAE,OAAUC,CAAS,EAAE,eAAiBC,EAAM,eAAe,KAAK,GAEvGA,EAAM,OACN,QAAWR,KAAaQ,EAAM,OAAQ,CAClC,IAAMP,EAAcO,EAAM,OAAOR,CAAS,EACtCC,EAAY,QAAU,MAAM,QAAQA,EAAY,MAAM,IACtDL,EAAgB,eAAkBU,CAAG,EAAE,OAAUC,CAAS,EAAE,OAAOP,CAAS,EAAE,OAC1EC,EAAY,OAAO,KAAK,EAEpC,CAER,CACJ,CAhBSC,EAAAG,GAAA,sBAkBF,SAASI,GAAqBb,EAAyBC,EAAyC,CAC9FD,EAAgB,iBACjBA,EAAgB,eAAoB,CAAC,GAEzC,IAAMU,EAAM,eACRT,EAAW,eAAkBS,CAAG,IAAM,OACtC,OAAOV,EAAgB,eAAkBU,CAAG,GAE5CV,EAAgB,eAAkBU,CAAG,EAAI,KAAK,MAAM,KAAK,UAAUT,EAAW,eAAkBS,CAAG,CAAC,CAAC,EAEjGT,EAAW,eAAkBS,CAAG,EAAE,iBAClCV,EAAgB,eAAkBU,CAAG,EAAE,eACnCT,EAAW,eAAkBS,CAAG,EAAE,eAAkB,KAAK,GAE7DT,EAAW,eAAkBS,CAAG,EAAE,QAClCD,GAAmBR,EAAYS,EAAKV,CAAe,EAG/D,CAlBgBM,EAAAO,GAAA,wBA0BT,IAAMC,GAAN,KAAsD,CA0H7D,EA1H6DR,EAAAQ,GAAA,gBAMzDC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GALQH,GAMT,iCAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GAZQH,GAaT,sCAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GAnBQH,GAoBT,qCAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GA1BQH,GA2BT,+BAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GAjCQH,GAkCT,oCAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GAxCQH,GAyCT,wCAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GA/CQH,GAgDT,gCAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GAtDQH,GAuDT,8BAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GA7DQH,GA8DT,4CAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GApEQH,GAqET,wCAKAC,EAAA,CAHCC,EAAS,CACN,SAAU,CAAE,KAAM,IAAcC,GAAkB,CAAE,CACxD,CAAC,GAzEQH,GA0ET,gCAUAC,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOE,GAAqBC,GAAsBD,CAAQ,CAC9D,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAnFQN,GAoFT,6BAYAC,EAAA,CAVCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,EACtC,OAAQT,GACR,OAAQK,EACZ,CACJ,CAAC,EACAO,EAAS,CACN,MAAO,QACX,CAAC,GA/FQN,GAgGT,8BAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GAtGQH,GAuGT,+BAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GA7GQH,GA8GT,gCAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM,IAAcC,GAAkB,CAC1C,CACJ,CAAC,GApHQH,GAqHT,+BArHSA,GAANC,EAAA,CAJNM,GAAsB,CACnB,GAAI,0DACJ,OAAQ,4CACZ,CAAC,GACYP,ICxEN,IAAeQ,GAAf,MAAeA,EAAqD,CAW7D,YAAYC,EAAmCC,EAA0BC,EAAmB,CAClG,KAAK,SAAWF,EAChB,KAAK,MAAQC,EACb,KAAK,UAAYC,CACrB,CAYA,eACIC,EACAC,EACAC,EACAC,EACG,CACH,IAAIC,EAAgB,KAAK,SAASD,CAAoB,EAChD,KAAK,SAASA,CAAoB,EAClC,KAAK,SAASF,CAAkB,EACtC,OAAKG,IACDA,EAAgB,KAAK,UAAUJ,CAAQ,EAAEG,CAAoB,EACvD,KAAK,UAAUH,CAAQ,EAAEG,CAAoB,EAC7C,KAAK,UAAUH,CAAQ,EAAEC,CAAkB,GAE9CG,EAAgB,OAAO,OAAO,IAAIA,EAAiBF,CAAI,EAAIA,CACtE,CAOA,mBAAmBF,EAAmCE,EAAuB,CACzE,IAAME,EAAgB,KAAK,MAAMJ,CAAQ,EACzC,OAAO,OAAO,OAAO,IAAII,EAAiBF,CAAI,CAClD,CACJ,EArD2EG,EAAAT,GAAA,mBAApE,IAAeU,GAAfV,GCbP,IAAAW,GAAyE,SAMzE,IAAMC,GAAc,CAEpB,EAEMC,GAAa,CACf,MAAgBC,GAChB,+BAAyCA,GACzC,gCAA0CA,EAC9C,EAEMC,GAAc,CAChB,CAAC,MAAG,iBAAiB,gBAAgB,EAAYC,GACjD,CAAC,MAAG,iBAAiB,kBAAkB,EAAYA,GACnD,CAAC,MAAG,iBAAiB,sBAAsB,EAAYC,GACvD,CAAC,MAAG,iBAAiB,wBAAwB,EAAYA,GACzD,CAAC,MAAG,iBAAiB,iBAAiB,EAAYC,GAClD,CAAC,MAAG,iBAAiB,oBAAoB,EAAYC,GACrD,CAAC,MAAG,iBAAiB,iBAAiB,EAAYC,GAClD,CAAC,MAAG,iBAAiB,mBAAmB,EAAYA,EACxD,EAEMC,GAAa,CACf,CAAC,oBAAiB,EAAYC,GAC9B,CAAC,wBAAqB,EAAYC,GAClC,MAAgBC,GAChB,yCAAmDA,GACnD,0CAAoDA,EACxD,EAEMC,GAAY,CACd,CAAC,cAAW,kBAAkB,EAAGb,GACjC,CAAC,cAAW,UAAU,EAAGC,GACzB,CAAC,cAAW,UAAU,EAAGQ,GACzB,CAAC,cAAW,YAAY,EAAGN,EAC/B,EAKaW,GAAN,MAAMA,WAAkCC,EAAqD,CAChG,aAAc,CACV,MAAMC,GAAUC,GAAOJ,EAAS,CACpC,CACJ,EAJoGK,EAAAJ,GAAA,6BAA7F,IAAMK,GAANL,GXrBP,SAASM,GACLC,EACAC,EACAC,EACAC,EACAC,EACF,CAaE,GAZAJ,EAAiB,UAAYC,EAAQ,eACjC,cAAW,WACX,kBAAe,oBACfD,EAAiB,SACrB,EACAK,GACIL,EAAiB,UACjBE,EAAiB,SACjBC,EAAkB,kBAAe,mBAAmB,EACpDC,EACAF,EAAiB,MACrB,EACIC,EAAkB,gBAAoB,CACtCH,EAAiB,UAAU,gBAAkBC,EAAQ,eACjD,cAAW,WACX,kBAAe,oBACfD,EAAiB,UAAU,eAC/B,EACA,IAAMM,EAAwBH,EAAkB,gBAAmB,WACnE,QAAWI,KAAqBD,EAAuB,CACnD,IAAME,EAAeD,EACrBP,EAAiB,UAAU,gBAAgBQ,CAAY,EAAIP,EAAQ,eAC/D,cAAW,WACX,4BACJ,EACAI,GACIL,EAAiB,UAAU,gBAAgBQ,CAAY,EACvDN,EAAiB,SACjBC,EAAkB,2BAClBC,EACAF,EAAiB,OACjBM,CACJ,CACJ,CACJ,CACJ,CA1CSC,EAAAV,GAAA,mBAoDT,SAASW,GACLC,EACAR,EACAH,EACAE,EACAE,EACF,CAtFF,IAAAQ,EAuFI,IAAIC,EAEAF,IAAc,aAAeA,IAAc,mBAAqBA,IAAc,YAC9EE,EAAkBV,EAAkBQ,EAAY,aAAa,EAEzDR,EAAkBW,EAAgB,GAAKX,EAAkBY,EAAiB,IAC1EF,EAAkB,KAAK,MAAM,KAAK,UAAUV,EAAkBW,EAAgB,CAAC,CAAC,EAChFD,EAAgB,WAAa,CACzB,GAAGA,EAAgB,WACnB,GAAIV,EAAkBY,EAAiB,EAAiB,UAC5D,GAIRV,GACIL,EAAiB,MACjBE,EAAiB,SACjBW,EACAT,EACAF,EAAiB,MACrB,GAGK,GAACU,EAAAT,EAAkB,YAAlB,MAAAS,EAAgC,aAC9B,OAAO,KAAKT,EAAkB,UAAa,UAAU,EAAE,OAAQa,GAASA,IAAS,QAAQ,EAAE,OAAS,IACxG,CAAChB,EAAiB,MAAM,uBACxB,CAACA,EAAiB,MAAM,wBAExBiB,GAAIf,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAASgB,EAAQ,EAAE,aAAa,EAChC,SAAU,CACN,KAAM,eACV,CACJ,CAAC,CAET,CA3CST,EAAAC,GAAA,eAoDT,SAASS,GACLjB,EACAF,EACAC,EACAG,EACI,CACJ,IAAMD,EAAqBD,EAAiB,WAA0B,YAChES,EAAYS,GAAmBlB,EAAiB,SAAUE,CAAO,EAoBvE,GAnBAJ,EAAiB,MAAQC,EAAQ,eAAe,cAAW,WAAYU,EAAWX,EAAiB,KAAK,EAGxGqB,GAAoBrB,EAAkBC,EAASE,CAAiB,EAGhEO,GAAYC,EAAWR,EAAmBH,EAAkBE,EAAkBE,CAAO,EAGrFJ,EAAiB,MAAM,QAAUC,EAAQ,eAAe,cAAW,WAAY,kBAAe,QAAS,CACnG,QAAS,CAAC,CACd,CAAC,EACDI,GACIL,EAAiB,MAAM,QACvBE,EAAiB,SACjBC,EAAkB,kBAAe,SAAS,EAC1CC,EACAF,EAAiB,MACrB,EACIC,EAAkB,kBAAe,SAAS,EAC1C,QAAWmB,KAAkBnB,EAAkB,kBAAe,SAAS,EAAE,WAAY,CACjF,IAAMoB,EAAYC,GAAiBF,CAAc,EACjDtB,EAAiB,MAAM,QAAQ,QAAQuB,CAAS,EAAItB,EAAQ,eACxD,cAAW,WACX,kBAAe,MACnB,EACAI,GACIL,EAAiB,MAAM,QAAQ,QAAQuB,CAAS,EAChDrB,EAAiB,SACjBC,EAAkB,kBAAe,MAAM,EACvCC,EACAF,EAAiB,MACrB,CACJ,CAIJH,GAAgBC,EAAkBC,EAASC,EAAkBC,EAAmBC,CAAO,EAGvFJ,EAAiB,OAAS,CAAE,QAAS,CAAC,CAAE,EACxC,IAAMyB,EAAetB,EAAkB,kBAAe,eAAe,EACrE,GAAIsB,EACA,QAAWH,KAAkBG,EAAa,WAAY,CAClD,IAAMF,EAAYC,GAAiBF,CAAc,EACjDtB,EAAiB,OAAO,QAAQuB,CAAS,EAAItB,EAAQ,eACjD,cAAW,WACX,kBAAe,YACnB,EACAI,GACIL,EAAiB,OAAO,QAAQuB,CAAS,EACzCrB,EAAiB,SACjBC,EAAkB,kBAAe,MAAM,EACvCC,EACAF,EAAiB,MACrB,CACJ,CAER,CAlESO,EAAAU,GAAA,eA0EF,SAASO,GACZxB,EACiC,CAKjC,GAHAyB,GAAS,EAGL,CADYC,GAAW1B,CAAgB,EAEvC,OAEJ,IAAMD,EAAU,IAAI4B,GAEdC,EAAS7B,EAAQ,mBAAmB,cAAW,UAAU,EAEzD8B,EAAqB,CAAC,EACtBC,EAASC,GACX/B,EAAiB,SAAS,mBAAgB,OAAO,EAAE,MACnD6B,CACJ,EAEA,GADAG,GAAYF,EAAQ9B,EAAiB,OAAQ8B,GAAA,YAAAA,EAAQ,SAAS,EAC1D,EAACA,EAKL,OAAAb,GAAYjB,EAAkB4B,EAAQ7B,EAAS8B,EAAS,CAAC,CAAC,EAG1D7B,EAAiB,KAAK,QAASiC,GAAW,CAClCC,GAAkBD,CAAM,GACxBE,GAAQP,EAAQK,EAAQjC,EAAiB,WAAYA,EAAiB,MAAM,CAEpF,CAAC,EACDoC,GAAaR,EAAQ5B,EAAiB,SAAU8B,EAAQ,cAAW,WAAY9B,EAAiB,SAAS,EACzGqC,GAAoBT,CAAM,EACnBA,CACX,CApCgBrB,EAAAiB,GAAA,0BYrMhB,IAAAc,GAA4D,SAiB5D,SAASC,GACLC,EACAC,EACAC,EACAC,EACI,CA/BR,IAAAC,EAAAC,EAgCI,IAAMC,EAAYC,GAAmBP,EAAiB,SAAUG,CAAO,EACjEK,EAAqBR,EAAiB,WAA0B,YAgCtE,GA7BAS,GAAoBR,EAA0BC,EAASM,CAAiB,EAExEP,EAAyB,MAAQC,EAAQ,eACrC,cAAW,mBACX,MAAMI,CAAS,GACfL,EAAyB,KAC7B,EACAS,GACIT,EAAyB,MACzBD,EAAiB,SACjBQ,EAAkB,MAAMF,CAAS,aAAa,EAC9CH,EACAH,EAAiB,MACrB,EAEAC,EAAyB,MAAM,QAAUC,EAAQ,eAC7C,cAAW,mBACX,kBAAe,QACf,CACI,QAAS,CAAC,CACd,CACJ,EACAQ,GACIT,EAAyB,MAAM,QAC/BD,EAAiB,SACjBQ,EAAkB,kBAAe,OAAO,EACxCL,EACAH,EAAiB,MACrB,EACIQ,EAAkB,kBAAe,SAAS,EAC1C,QAAWG,KAAkBH,EAAkB,kBAAe,SAAS,EAAE,WAAY,CACjF,IAAMI,EAAYC,GAAiBF,CAAc,EACjDV,EAAyB,MAAM,QAAQ,QAAQW,CAAS,EAAIV,EAAQ,eAChE,cAAW,mBACX,kBAAe,MACnB,EACAQ,GACIT,EAAyB,MAAM,QAAQ,QAAQW,CAAS,EACxDZ,EAAiB,SACjBQ,EAAkB,kBAAe,MAAM,EACvCL,EACAH,EAAiB,MACrB,CACJ,CAeJ,GAZAC,EAAyB,UAAYC,EAAQ,eACzC,cAAW,mBACX,kBAAe,4BACfD,EAAyB,SAC7B,EACAS,GACIT,EAAyB,UACzBD,EAAiB,SACjBQ,EAAkB,kBAAe,2BAA2B,EAC5DL,EACAH,EAAiB,MACrB,EACIQ,EAAkB,kBAAe,eAAe,EAAG,CACnDP,EAAyB,UAAU,gBAAkBC,EAAQ,eACzD,cAAW,mBACX,kBAAe,4BACfD,EAAyB,UAAU,eACvC,EACA,IAAMa,EAAwBN,EAAkB,kBAAe,eAAe,EAAE,WAChF,QAAWO,KAAqBD,EAAuB,CACnD,IAAME,EAAeD,EACrBd,EAAyB,UAAU,gBAAgBe,CAAY,EAAId,EAAQ,eACvE,cAAW,mBACX,4BACJ,EACAQ,GACIT,EAAyB,UAAU,gBAAgBe,CAAY,EAC/DhB,EAAiB,SACjBQ,EAAkB,2BAClBL,EACAH,EAAiB,OACjBgB,CACJ,CACJ,CACJ,CAGAf,EAAyB,MAAQC,EAAQ,eACrC,cAAW,mBACX,gBACAD,EAAyB,KAC7B,EACAS,GACIT,EAAyB,MACzBD,EAAiB,SACjBQ,EAAkB,cAClBL,EACAH,EAAiB,MACrB,EAEAC,EAAyB,OAAS,CAAE,QAAS,CAAC,CAAE,EAChD,IAAMgB,EAAeT,EAAkB,kBAAe,eAAe,EACrE,GAAIS,EACA,QAAWN,KAAkBM,EAAa,WAAY,CAClD,IAAML,EAAYC,GAAiBF,CAAc,EACjDV,EAAyB,OAAO,QAAQW,CAAS,EAAIV,EAAQ,eACzD,cAAW,mBACX,kBAAe,YACnB,EACAQ,GACIT,EAAyB,OAAO,QAAQW,CAAS,EACjDZ,EAAiB,SACjBQ,EAAkB,kBAAe,MAAM,EACvCL,EACAH,EAAiB,MACrB,CACJ,CAIJC,EAAyB,yBAA2B,CAAC,EACrD,IAAMiB,GACFb,GAAAD,EAAAJ,EAAiB,SAAS,mBAAgB,OAAO,EAAE,MAASG,CAAO,EAAE,YAArE,YAAAC,EAAgF,WAAhF,YAAAC,EACM,yBACNa,GACA,OAAO,KAAKA,CAAQ,EAAE,QAASC,GAAW,CACtClB,EAAyB,yBAAyBkB,CAAM,EAAIjB,EAAQ,eAChE,cAAW,mBACX,aACJ,EACAD,EAAyB,yBAA2BC,EAAQ,eACxD,cAAW,mBACX,cACAD,EAAyB,wBAC7B,EACAS,GACIT,EAAyB,yBAAyBkB,CAAM,EACxDnB,EAAiB,SACjBQ,EAAkB,YAClBL,EACAH,EAAiB,OACjBmB,CACJ,CACJ,CAAC,CAET,CAvJSC,EAAArB,GAAA,eA+JF,SAASsB,GACZrB,EACyC,CAKzC,GAHAsB,GAAS,EAGL,CADYC,GAAWvB,CAAgB,EAEvC,OAEJ,IAAME,EAAU,IAAIsB,GAEdC,EAASvB,EAAQ,mBAAmB,cAAW,kBAAkB,EAEjEwB,EAAqB,CAAC,EACtBC,EAASC,GACX5B,EAAiB,SAAS,mBAAgB,OAAO,EAAE,MACnD0B,EACA1B,EAAiB,MACrB,EAEA,GADA6B,GAAYF,EAAQ3B,EAAiB,OAAQ2B,GAAA,YAAAA,EAAQ,SAAS,EAC1D,EAACA,EAIL,OAAA5B,GAAYC,EAAkByB,EAAQvB,EAASwB,EAAS,CAAC,CAAC,EAC1D1B,EAAiB,KAAK,QAAS8B,GAAW,CAClCC,GAAkBD,CAAM,GACxBE,GAAQP,EAAQK,EAAQ9B,EAAiB,UAAU,CAE3D,CAAC,EACDiC,GAAaR,EAAQzB,EAAiB,SAAU2B,EAAQ,cAAW,mBAAoB3B,EAAiB,SAAS,EACjHkC,GAAoBT,CAAM,EACnBA,CACX,CAlCgBL,EAAAC,GAAA,kCC/KhB,IAAAc,GAWO,SA0BP,IAAAC,GAAkC,sDAKlC,IAAMC,GAAqC,CAAC,eAAY,OAAQ,eAAY,iBAAkB,eAAY,WAAW,EAOrH,SAASC,GAAwBC,EAA2BC,EAAiB,CACzE,IAAMC,EAAcF,EAAgB,CAAC,EAAE,MAAM,GAAG,EAC1CG,EAAKD,EAAYA,EAAY,OAAS,CAAC,EAC7C,GAAIF,EAAgB,CAAC,EAAE,QAAQ,YAAY,GAAK,GAAKA,EAAgB,CAAC,EAAE,WAAW,UAAU,EAEzFC,EACIC,EAAY,CAAC,EAAE,MAAM,YAAY,EAAE,CAAC,GACpCA,EAAY,CAAC,EAAE,MAAM,GAAG,qBAAkB,QAAQ,IAAI,EAAE,CAAC,EAAE,MAAM,IAAI,EAAE,CAAC,EAC5ED,EAAU,GAAG,oBAAiB,GAAGA,CAAO,WAExCD,EAAgB,CAAC,EAAE,QAAQ,qBAAkB,QAAQ,GAAK,GAC1DA,EAAgB,CAAC,EAAE,QAAQ,aAAa,GAAK,GAC7CA,EAAgB,CAAC,EAAE,QAAQ,SAAS,GAAK,EAEzCC,EAAUC,EAAY,CAAC,EAAE,MAAM,SAAS,EAAE,CAAC,EAAE,MAAM,mBAAmB,EAAE,CAAC,MACtE,CACH,IAAME,EAAUD,EAAG,MAAM,IAAI,EACzBC,EAAQ,OAAS,EACjBH,EAAUG,EAAQ,CAAC,EACZF,EAAY,CAAC,EAAE,QAAQ,IAAI,EAAI,KACtCD,EAAUC,EAAY,CAAC,EAAE,MAAM,IAAI,EAAE,CAAC,EAE9C,CACA,OAAOD,CACX,CAxBSI,EAAAN,GAAA,2BA+BT,SAASO,GAAWC,EAA4B,CAC5C,IAAIN,EACED,EAA4BO,EAAW,MAAM,KAAK,EACxD,GAAIP,EAAgB,SAAW,EAC3BC,EAAUF,GAAwBC,EAAiBC,CAAO,UACnDM,EAAW,QAAQ,eAAe,GAAK,GAC9C,QAAWC,KAAWR,EAClB,GAAIQ,EAAQ,WAAW,eAAe,EAAG,CACrCP,EAAUO,EACL,MAAM,iBAAiB,EAAE,CAAC,EAC1B,MAAM,SAAS,EAAE,CAAC,EAClB,MAAM,kBAAkB,EAAE,CAAC,EAC3B,QAAQ,KAAK,qBAAkB,QAAQ,GAAI,KAAK,qBAAkB,QAAQ,EAAE,EACjF,KACJ,OAGJP,EAAUD,EAAgB,CAAC,EAE/B,OAAOC,CACX,CApBSI,EAAAC,GAAA,cA2BT,SAASG,GAAmBC,EAAmBC,EAAmBC,EAAkD,CAChH,IAAMC,EAAiC,CAAC,EAClCC,EAAiB,oCACvB,OAAAJ,EAAQ,QAASK,GAAiB,CAxHtC,IAAAC,EAAAC,EAAAC,EAyHQ,GAAI,CACA,IAAMC,EAASC,GAAkBL,CAAY,EACvCM,EAAYF,KAAUH,EAAAG,EAAO,YAAP,YAAAH,EAAkB,MAAM,QAAU,CAAC,EAC/D,GAAIG,KAAUF,EAAAI,EAAS,CAAC,IAAV,MAAAJ,EAAa,SAAS,MAAG,gCAA+BC,EAAAG,EAAS,CAAC,IAAV,MAAAH,EAAa,SAASP,IAAY,CACpG,IAAIJ,EAAac,EAAS,CAAC,EAAE,QAAQ,UAAW,IAAI,EAChDP,EAAe,KAAKP,CAAU,IAAM,OACpCA,EAAaA,EAAW,MAAM,2BAA2B,EAAE,CAAC,GAEhE,IAAMN,EAAkBK,GAAWC,CAAU,EAC7CA,EAAae,GAAgBf,CAAU,EAClC,QAAQ,UAAW,IAAI,EACvB,QAAQ,2BAA4B,wBAAwB,EACjEM,EAAO,GAAGN,CAAU,KAAKY,EAAO,QAAQ,QAAQ,EAAE,EAAI,CAClD,UAAWZ,EACX,WAAYY,EAAO,QAAQ,SAC3B,QAASlB,EACT,SACIkB,EAAO,QAAQ,aAAe,OAAYA,EAAO,QAAQ,WAAaA,EAAO,QAAQ,SACzF,YAAaA,EAAO,YACpB,SAAUA,EAAO,QACrB,CACJ,CACJ,OAASI,EAAO,CACZC,GACIZ,EACA,CACI,SAAU,eAAY,MACtB,QAASa,EAAQ,EAAE,WAAW,CAClC,EACA,GAAGF,CACP,CACJ,CACJ,CAAC,EACkB,OAAO,QAAQV,CAAM,EAAE,KACtC,CAACa,EAAkBC,IAAqBD,EAAE,CAAC,EAAE,SAAWC,EAAE,CAAC,EAAE,QACjE,EACkB,OAAO,CAACC,EAAO,CAACC,EAAGC,CAAC,KAClCF,EAAMC,CAAC,EAAIC,EACJF,GACR,CAAC,CAAC,CACT,CA5CSvB,EAAAI,GAAA,sBAmDT,IAAMsB,GAAiB1B,EAAC2B,GAAyC,CAxKjE,IAAAhB,EAAAC,EAAAC,EAyKI,IAAIe,EACJ,GAAID,EAAc,KACd,OAAAC,EAAYD,EAAc,KAAQ,SAAS,GAAG,EAAIA,EAAc,KAAQ,MAAM,GAAG,EAAE,CAAC,EAAIA,EAAc,KAC/FC,EAAU,QAAQC,EAAwB,EAAE,EAChD,IAAIjB,GAAAD,EAAAgB,EAAc,aAAd,YAAAhB,EAA8B,cAA9B,MAAAC,EAA+C,KACtD,OAAAgB,EAAYD,EAAc,WAAc,YAAe,KACvDC,EAAYA,EAAU,SAAS,GAAG,EAAIA,EAAU,MAAM,GAAG,EAAE,CAAC,EAAIA,EACzDA,EAAU,QAAQC,EAAwB,EAAE,EAChD,IAAIhB,EAAAc,EAAc,aAAd,MAAAd,EAA8B,YACrC,8BAER,EAZuB,kBAuBvB,SAASiB,GACLC,EACAC,EACAC,EACAC,EACAC,EACAC,EACF,CACE,IAAIC,EACAF,EACAE,EAAW,CAACF,EAAa,QAAQ,KAAM,EAAE,CAAC,EAE1CE,EAAW,CAACD,EAAU,QAAQ,KAAM,EAAE,EAAGA,GAAA,YAAAA,EAAW,QAAQ,2BAA4B,gBAAa,EAGzG,QAAWE,KAAYP,EAAa,CAChC,IAAMQ,EAAaR,EAAYO,CAAQ,EACjCE,EAAkBD,EAAW,aAAeP,EAC5CS,EAAgBT,IAAgB,WAAaO,EAAW,cAAgB,eAAY,aACrFC,GAAmBC,IAAkBJ,EAAS,QAAQE,GAAA,YAAAA,EAAY,OAAO,EAAI,IAC9EG,GAAgBT,EAAYM,EAAYL,EAAiB,UAAU,CAE3E,CACJ,CAvBSlC,EAAA8B,GAAA,4BA+BT,SAASa,GAA2BJ,EAA6BK,EAAyB,CACtF,OAAOL,EAAW,UAAY,YAAcK,CAChD,CAFS5C,EAAA2C,GAAA,8BAcT,SAASE,GACLC,EACAP,EACAQ,EACAC,EACAZ,EACAa,EACO,CAnPX,IAAAtC,EAoPI,IAAIuC,EAAU,GACVN,EAAiB,GACfO,EAAmBnD,EAAA,CAACoD,EAAKC,IAAWA,EAAO,MAAO5B,GAAM2B,EAAI,SAAS3B,CAAC,CAAC,EAApD,oBAErBwB,GACAC,EAAUN,EAAiBG,EAAiB,KAAKR,EAAW,SAAS,EACjEH,IACAc,EAAUN,GAAkBI,EAAmB,KAAKT,EAAW,SAAS,IAErEH,IACPc,EAAUF,EAAmB,KAAKT,EAAW,SAAS,GAE1D,IAAMe,EAAiBf,EAAW,UAAU,MAAM,IAAI,EAEtD,OACKA,EAAW,cAAgB,eAAY,cAAgBK,KACvDjC,EAAA4B,EAAW,UAAX,YAAA5B,EAAoB,SAAS,wBAAsB,CAACyB,GAAac,GACjEd,GAAae,EAAiBG,EAAgBlB,EAAU,MAAM,IAAI,CAAC,GAAKc,GACxEJ,EAAiB,OAASK,EAAiBG,EAAgBR,EAAiB,MAAM,MAAM,IAAI,CAAC,GAC7F,CAACP,EAAW,SAAW9C,GAAmC,SAAS8C,EAAW,WAA0B,GACzGI,GAA2BJ,EAAYK,CAAc,CAE7D,CA9BS5C,EAAA6C,GAAA,iBAyCT,SAASU,GACLT,EACAb,EACAF,EACAC,EACAI,EACAoB,EACF,CA5RF,IAAA7C,EA6RI,IAAMoC,EAAmB,IAAI,OAAO,KAAKS,CAAS,EAAE,EAC9CR,EAAqB,IAAI,OAAO,KAAKZ,CAAS,EAAE,EAEtD,QAAWE,KAAYP,EAAa,CAChC,IAAMQ,EAAaR,EAAYO,CAAQ,EAMvC,GAJIC,EAAW,aAAeP,GAI1BO,EAAW,gBAAgB5B,EAAAmC,EAAiB,WAAWP,EAAW,UAAU,IAAjD,YAAA5B,EAAqD,aAAU,cAC1F,SAEUkC,GACVC,EACAP,EACAQ,EACAC,EACAZ,EACAoB,CACJ,IAEIvB,EAAWD,CAAW,EAAIO,EAAW,SAE7C,CACJ,CAjCSvC,EAAAuD,GAAA,qBA0CT,SAASE,GACLC,EACAC,EACAzB,EACA0B,EACF,CACE,GAAIF,GAAmBC,EACnB,QAAWE,KAAOH,EAAiB,CAC/B,IAAMI,EAAaH,EAAqBE,CAAG,EACvCC,IACA3C,GAAIe,EAAiB,OAAQ,CACzB,SAAU,eAAY,QACtB,QAAS6B,GAAqBF,EAAKC,CAAU,EAC7C,SAAU,CACN,KAAM,wBACN,MAAOF,EAAa,MAAM,GAAG,CACjC,CACJ,CAAC,EACD,OAAOD,EAAqBE,CAAG,EAEvC,CAER,CAtBS7D,EAAAyD,GAAA,6BAmCT,SAASO,GACLC,EACAC,EACAhC,EACAD,EACAD,EACA2B,EACAQ,EACF,CACE,IAAMC,EAAsBD,GAAA,MAAAA,EAAa,GACnCA,EAAY,GAAG,QAAQ,OAAQ,IAAI,EAAE,QAAQ,YAAa,SAAS,EACnE,OACFP,EACAF,EACAS,GAAA,MAAAA,EAAa,OACbP,EAAeK,EAAS,SAAS,KAAKC,EAAU,CAAC,EAAeC,EAAY,KAAK,EACjFT,EAAkBW,GAA8BnC,EAAiB,SAAU0B,CAAY,EACnF,OAAO,OAAOF,CAAe,EAAE,SAAW,IAC1CE,EAAeK,EAAS,SAAS,KAAKC,EAAU,CAAC,EAAeE,CAAmB,EACnFV,EAAkBW,GAA8BnC,EAAiB,SAAU0B,CAAY,KAG3FA,EAAeK,EAAS,SAAS,KAAKC,EAAU,CAAC,EAAeE,CAAmB,EACnFV,EAAkBW,GAA8BnC,EAAiB,SAAU0B,CAAY,GAE3F,IAAMU,EAAgBL,EAAS,SAAS,OACxC,GAAIK,GAAiB,OAAOA,GAAkB,WAAY,CACtD,IAAMC,EAAQD,EAAcZ,EAAiBS,GAAA,YAAAA,EAAa,EAAE,EACxDI,IAAU,SACVtC,EAAWD,CAAW,EAAIuC,EAElC,KAAO,CACH,IAAMC,EAAcP,EAAS,SAAS,KAAOjC,EACzCwC,KAAed,IACfzB,EAAWD,CAAW,EAAI0B,EAAgBc,CAAW,EAE7D,CAEA,OAAAf,GAA0BC,EAAiBC,EAAsBzB,EAAkB0B,CAAY,EACxFF,CACX,CAxCS1D,EAAAgE,GAAA,yBAmDT,SAASS,GACLvC,EACAD,EACAa,EACA4B,EACAP,EACAX,EACI,CA5ZR,IAAA7C,EAAAC,EA6ZI,GAAI,CAACkC,EACD,OAEJ,IAAMa,EAA6C1B,GAAA,MAAAA,EAAY,cAAgBA,EAAW,cAAc,EAAI,CAAC,EAC7G,QAAWD,KAAec,EAAiB,YAAcA,EAAkB,CACvE,IAAMmB,EAAWU,GAAmB1C,EAAYD,CAAW,EAC3D,GAAIA,IAAgB,WAAaiC,GAAA,MAAAA,EAAU,KACvC,IACItD,EAAAwD,GAAA,YAAAA,EAAa,OAAb,MAAAxD,EAAmB,WAAW,8BAC9BC,EAAAuD,GAAA,YAAAA,EAAa,OAAb,MAAAvD,EAAmB,WAAW,+BAE9BkB,GACI4C,EAAiB,YACjB1C,EACAC,EACAC,EACAiC,EAAY,MACZA,EAAY,EAChB,MACG,CACH,IAAMS,GAAUT,GAAA,YAAAA,EAAa,SAASA,GAAA,YAAAA,EAAa,IACnDZ,GACIT,EACAb,EACAyC,EAAiB,YACjB1C,EACA4C,EACApB,CACJ,CACJ,MACOS,GAAA,MAAAA,EAAU,UACjBD,GACIC,EACAS,EAAiB,SACjBxC,EACAD,EACAD,EACA2B,EACAQ,CACJ,CAER,CACJ,CAlDSnE,EAAAyE,GAAA,kCA2DT,SAASI,GAAYC,EAAoBC,EAAwBC,EAAsBJ,EAAyB,CAC5G,IAAIK,EAAWC,GAA2BH,CAAc,EACxD,OAAQD,EAAY,CAChB,iBAAwB,CACpBG,EAAW,WAAWA,CAAQ,KAAKL,CAAO,KAAKI,CAAY,GAC3D,KACJ,CACA,6BAA4B,CACxBC,EAAW,WAAWA,CAAQ,gBAC9B,KACJ,CACA,8BAA6B,CACzBA,EAAWA,EAAS,SAAS,WAAW,EAClC,WAAWA,EAAS,MAAM,WAAW,EAAE,CAAC,CAAC,GACzC,WAAWA,EAAS,QAAQ,MAAO,IAAI,CAAC,GAC9C,KACJ,CACA,qCAAoC,CAChCA,EAAW,GAAGE,EAAgC,GAAGF,CAAQ,GACzD,KACJ,CACA,qCAAoC,CAChCA,EAAW,GAAGG,EAAgC,GAAGH,CAAQ,GACzD,KACJ,CACJ,CACA,OAAOA,EAAS,QAAQ,KAAM,EAAE,CACpC,CA3BSjF,EAAA6E,GAAA,eAkCT,SAASQ,GACLC,EACAC,EACArD,EACAwC,EACF,CAvfF,IAAA/D,EAwfI,QAAW6E,KAAUD,EAAS,CAC1B,IAAMT,EAAaS,EAAQC,CAAM,EAAE,KAAK,MAAM3D,CAAsB,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,EACrF,GAAI,kEAA6D,EAAE,SAASiD,CAAU,EAAG,CACrF,IAAMW,GAAY9E,EAAA4E,EAAQC,CAAM,EAAE,KAAK,MAAM,GAAG,IAA9B,YAAA7E,EAAkC,GAAG,MAAM,KAAK,GAC5DsE,EAAWJ,GAAYC,EAAYU,EAAQ,GAAI,EAAE,EACvDF,EAAO,QAAQE,CAAM,EAAId,EAAiB,QAAQ,eAAe,cAAW,WAAYe,EAAW,CAAC,CAAC,EACrGhB,GACIvC,EACAoD,EAAO,gBAAa,OAAO,EAAEE,CAAM,EAClCtD,EAAiB,WAA0B,YAAYuD,CAAS,EACjEf,EACA,CAAC,EACDO,CACJ,CACJ,CACJ,CACJ,CAtBSjF,EAAAqF,GAAA,uBAgCT,SAASK,GACLxD,EACAyD,EACA1D,EACAyC,EACAM,EACAJ,EACI,CAzhBR,IAAAjE,EA0hBIsB,EAAW,gBAAa,OAAO,EAAI,CAAC,EACpC,IAAM6C,EAAaE,EAAa,MAAM,IAAI,EAAE,IAAI,EAChD,GAAIN,EAAiB,aAAe,OAAO,KAAKA,EAAiB,WAAW,EAAE,OAAS,EAAG,CACtF,IAAMP,EAAqC,CAAC,EACxCS,IACAT,EAAY,GAAKS,GAErB,QAAWgB,KAAkBD,EAAkB,CAC3C,IAAMZ,EAAiBc,GAAiBD,CAAc,EAChDX,EAAWJ,GAAYC,EAAYC,EAAgBC,EAAcJ,CAAO,EAC1EK,IACAhD,EAAW,gBAAa,OAAO,EAAE8C,CAAc,EAAIL,EAAiB,QAAQ,eACxE,cAAW,WACXI,CACJ,EACAL,GACIvC,EACAD,EAAW,gBAAa,OAAO,EAAE8C,CAAc,EAC9C7C,EAAiB,WAA0B,YAAY4C,CAAU,EAClEJ,EACAP,EACAc,CACJ,IAGAtE,EAAAsB,EAAW,gBAAa,OAAO,IAA/B,MAAAtB,EAAmCoE,IACnC,OAAO,KAAK9C,EAAW,gBAAa,OAAO,EAAE8C,CAAc,CAAC,EAAE,SAAW,GAEzE,OAAO9C,EAAW,gBAAa,OAAO,EAAE8C,CAAc,CAE9D,CACJ,CACAM,GAAoBpD,EAAY0D,EAAkBzD,EAAkBwC,CAAgB,EAChF,OAAO,KAAKzC,EAAW,gBAAa,OAAO,CAAC,EAAE,SAAW,GACzD,OAAOA,EAAW,gBAAa,OAAO,CAE9C,CA5CSjC,EAAA0F,GAAA,eAsDT,SAASI,GACL5D,EACAiC,EACA4B,EACA9D,EACAyC,EACI,CA9kBR,IAAA/D,EA+kBI,IAAIqF,EACJ/D,EAAWkC,EAAY,EAAE,EAAE,KAAQ,OAAY,CAAC,EAChD,QAAW8B,KAAiBF,EAAiB,CACzCC,EAAU,GAAGC,CAAa,iBAC1BhE,EAAWkC,EAAY,EAAE,EAAE,KAAQ,OAAU8B,CAAa,EAAIvB,EAAiB,QAAQ,eACnF,cAAW,WACX,OACJ,EACA,IAAMlB,GAAY7C,EAAAwD,EAAY,QAAZ,MAAAxD,EAAmB,SAAS,yBACxC,GAAGwD,EAAY,GAAG,QAAQ,KAAM,EAAE,CAAC,KAAK6B,CAAO,GAC/C,GAAG7B,EAAY,KAAK,KAAK6B,CAAO,GACtCvB,GACIvC,EACAD,EAAWkC,EAAY,EAAE,EAAE,KAAQ,OAAU8B,CAAa,EACzD/D,EAAiB,WAA0B,YAAY,kBAAe,KAAK,EAC5EwC,EACA,CAAC,EACDlB,CACJ,EACI,OAAO,KAAKvB,EAAWkC,EAAY,EAAE,EAAE,KAAQ,OAAU8B,CAAa,CAAC,EAAE,SAAW,GACpF,OAAOhE,EAAWkC,EAAY,EAAE,EAAE,KAAQ,OAAU8B,CAAa,CAEzE,CACI,OAAO,KAAKhE,EAAWkC,EAAY,EAAE,EAAE,KAAQ,MAAS,EAAE,SAAW,GACrE,OAAOlC,EAAWkC,EAAY,EAAE,EAAE,KAAQ,MAElD,CAjCSnE,EAAA8F,GAAA,cA0CT,SAASI,GACLC,EACAhC,EACAiC,EACU,CACV,IAAIC,EACJ,OAAIF,IAAc,aAAeA,IAAc,mBAAqBA,IAAc,YAC9EE,EAAcD,EAAkB,aAAaD,CAAS,IAAIhC,EAAY,EAAE,GAAG,EAE3EiC,EAAkB,4CAA4CjC,EAAY,EAAE,GAAG,GAC/EiC,EAAkB,6CAA6CjC,EAAY,EAAE,GAAG,IAEhFkC,EAAc,KAAK,MACf,KAAK,UAAUD,EAAkB,4CAA4CjC,EAAY,EAAE,GAAG,CAAC,CACnG,EACAkC,EAAY,WAAgB,CACxB,GAAGA,EAAY,WACf,GAAGD,EAAkB,6CAA6CjC,EAAY,EAAE,GAAG,EAAE,UACzF,GAEGkC,CACX,CArBSrG,EAAAkG,GAAA,sBA+BT,SAASI,GACLpE,EACAiC,EACAoC,EACAtE,EACAyC,EACI,CAvpBR,IAAA/D,EAAAC,EAwpBI,IAAM4D,EAAcL,EAAY,OAASA,EAAY,GAAG,QAAQ,WAAY,SAAS,EAC/ET,EAAkB6C,GAAoBA,EAAiB,UAAYA,EAAiB,SAAS/B,CAAW,EAE9G,GAAId,GAAmBgB,EAAiB,YAAa,CACjD,IAAMyB,IAAoBxF,EAAA+C,GAAA,YAAAA,EAAiB,gBAAjB,YAAA/C,EAAgC,OAAQ,kBAG5D6F,EAAU9B,EAAiB,QAAQ,eAAe,cAAW,WAAY,aAAayB,CAAS,GAAI,CACrG,QAAS,CAAC,CACd,CAAC,EACDlE,EAAWkC,EAAY,EAAE,EAAIO,EAAiB,QAAQ,eAAe,cAAW,WAAYP,EAAY,KAAM,CAC1G,MAAO,CAAC,CACZ,CAAC,EACDlC,EAAWkC,EAAY,EAAE,EAAE,gBAAa,KAAK,EAAIqC,EAEjD,IAAMJ,EAAqBlE,EAAiB,WAA0B,YAEhEmE,EAAcH,GAAmBC,EAAWhC,EAAaiC,CAAiB,EAEhF3B,GACIvC,EACAD,EAAWkC,EAAY,EAAE,EACzBA,EAAY,OACZO,EACA,CAAE,MAAOP,EAAY,KAAM,CAC/B,EAEAM,GACIvC,EACAD,EAAWkC,EAAY,EAAE,EAAE,gBAAa,KAAK,EAC7CkC,EACA3B,EACAP,CACJ,EAEA,IAAMsC,EAAiB,KAAK,MAAM,KAAK,UAAUL,CAAiB,CAAC,EAC/D,WAAWjC,EAAY,EAAE,GAC7B,EACA,GAAIsC,GAAA,MAAAA,EAAgB,WAAY,CAC5B,IAAM7B,EAAUT,GAAA,MAAAA,EAAa,MACvBA,EAAY,MAAM,QAAQ,KAAM,IAAI,EAAE,QAAQ,SAAU,KAAK,GAC7DvD,EAAAuD,GAAA,YAAAA,EAAa,KAAb,YAAAvD,EAAiB,QAAQ,KAAM,MAAM,QAAQ,SAAU,OAC7D8E,GACIxD,EACAuE,EAAe,WACfxE,EAAWkC,EAAY,EAAE,EAAE,gBAAa,KAAK,EAAE,QAC/CO,4BAEAE,CACJ,CACJ,CACI,OAAO,KAAK3C,EAAWkC,EAAY,EAAE,EAAE,gBAAa,KAAK,EAAE,OAAU,EAAE,SAAW,GAClF,OAAOlC,EAAWkC,EAAY,EAAE,EAAE,gBAAa,KAAK,EAAE,OAE9D,CACJ,CA9DSnE,EAAAsG,GAAA,qBAwET,SAASI,GACLxE,EACAyE,EACA1E,EACA2E,EACF,CACE,IAAMC,EACD3E,EAAiB,WAA0B,YAAYyE,CAAgB,EAC1E,WAAW,OACPG,EAAqBD,EACrBE,GAA6BF,EAAuB,IAAI,EACxD,OACN,GAAIC,EAAoB,CACpB,IAAME,EAA+C,CACjD,IAAKL,EAAiB,QAAQ,IAAK,EAAE,EACrC,OAAQG,CACZ,EACAG,GACIhF,EAAW0E,CAAgB,EAC3BzE,EAAiB,SACjB0E,EACA,cAAW,WACX1E,EAAiB,UACjB8E,CACJ,CACJ,CACJ,CA1BShH,EAAA0G,GAAA,6BAoCT,SAASQ,GACLhF,EACAiC,EACAoC,EACAtE,EACAyC,EACF,CACE,IAAMF,EAAcL,EAAY,GAAG,QAAQ,WAAY,SAAS,EAC1DT,EAAkB6C,GAAoBA,EAAiB,UAAYA,EAAiB,SAAS/B,CAAW,EAC9GvC,EAAWkC,EAAY,EAAE,EAAIO,EAAiB,QAAQ,eAAe,cAAW,WAAYP,EAAY,KAAM,CAC1G,MAAO,CAAC,CACZ,CAAC,EACDlC,EAAWkC,EAAY,EAAE,EAAE,gBAAa,KAAK,EAAIO,EAAiB,QAAQ,eACtE,cAAW,WACX,iBACJ,GACIhB,GAAmBgB,EAAiB,eACpCD,GACIvC,EACAD,EAAWkC,EAAY,EAAE,EACzBA,EAAY,OACZO,EACA,CAAE,MAAOP,EAAY,KAAM,CAC/B,EACAM,GACIvC,EACAD,EAAWkC,EAAY,EAAE,EAAE,gBAAa,KAAK,EAC5CjC,EAAiB,WAA0B,YAAY,kBAAe,eAAe,EACtFwC,EACAP,CACJ,EAER,CAhCSnE,EAAAkH,GAAA,oBAyCT,SAASC,GACLjF,EACAiC,EACAlC,EACAyC,EACF,CA3yBF,IAAA/D,EA4yBI,IAAMyG,EAASjD,EAAY,OAAO,WAAc,KAAQ,KAAQ,MAAM,aAAa,EAAE,CAAC,EACtFlC,EAAWkC,EAAY,EAAE,EAAIO,EAAiB,QAAQ,eAAe,cAAW,WAAYP,EAAY,KAAM,CAC1G,KAAM,CAAC,CACX,CAAC,EACGO,EAAiB,aACjBD,GACIvC,EACAD,EAAWkC,EAAY,EAAE,EACzBA,EAAY,OACZO,EACA,CAAE,MAAOP,EAAY,KAAM,CAC/B,EAEJ,IAAMkD,EAAenF,EAAiB,WAA0B,YAC5D,iBAAiBkF,CAAM,EAC3B,EACMxC,EAAUT,GAAA,MAAAA,EAAa,MACvBA,EAAY,MAAM,QAAQ,KAAM,IAAI,EAAE,QAAQ,SAAU,KAAK,GAC7DxD,EAAAwD,GAAA,YAAAA,EAAa,KAAb,YAAAxD,EAAiB,QAAQ,KAAM,MAAM,QAAQ,SAAU,OACzD0G,GAAA,MAAAA,EAAa,YACb3B,GACIxD,EACAmF,EAAY,WACZpF,EAAWkC,EAAY,EAAE,EAAE,KAC3BO,eAEAE,CACJ,EAEJ,IAAM0C,EAAcpF,EAAiB,WAA0B,YAAY,gBAAgBkF,CAAM,EAAE,EAC/FE,GAAA,MAAAA,EAAY,YACZxB,GAAW5D,EAAkBiC,EAAamD,EAAW,WAAYrF,EAAYyC,CAAgB,EAE7F,OAAO,KAAKzC,EAAWkC,EAAY,EAAE,EAAE,IAAO,EAAE,SAAW,GAC3D,OAAOlC,EAAWkC,EAAY,EAAE,EAAE,KAElC,OAAO,KAAKlC,EAAWkC,EAAY,EAAE,CAAC,EAAE,SAAW,GACnD,OAAOlC,EAAWkC,EAAY,EAAE,CAExC,CA7CSnE,EAAAmH,GAAA,mBAuDT,SAASI,GACLrF,EACAiC,EACAoC,EACAtE,EACAyC,EACF,CAn2BF,IAAA/D,EAo2BIsB,EAAWkC,EAAY,EAAE,EAAIO,EAAiB,QAAQ,eAAe,cAAW,WAAYP,EAAY,KAAM,CAC1G,YAAa,CAAC,CAClB,CAAC,EACGO,EAAiB,aACjBD,GACIvC,EACAD,EAAWkC,EAAY,EAAE,EACzBA,EAAY,OACZO,EACAP,CACJ,EAEJ,IAAIqD,EACEC,EAAmBtD,EAAY,OAAO,YACvCxD,EAAA8G,GAAA,YAAAA,EAAkB,cAAlB,MAAA9G,EAA8C,WAC/C6G,EAAwBC,EAAiB,YAA2B,WAEpED,EAAuBC,EAG3BC,GACIxF,EACAsF,EACAjB,EACAtE,EAAWkC,EAAY,EAAE,EAAE,YAC3BO,CACJ,EACI,OAAO,KAAKzC,EAAWkC,EAAY,EAAE,EAAE,WAAc,EAAE,OAAS,GAChE,OAAOlC,EAAWkC,EAAY,EAAE,EAAE,WAE1C,CArCSnE,EAAAuH,GAAA,kBA+CT,SAASG,GACLxF,EACAyF,EACApB,EACAtE,EACAyC,EACI,CAl5BR,IAAA/D,EAm5BI,IAAMiH,EAAwB1F,EAAiB,WAA0B,YACzE,QAAWE,KAAauF,EAAmB,CACvC,IAAMhB,EAAmBvE,EAAU,QAAQ,OAAQ,IAAI,EACjD+B,EAAqC,CACvC,GAAIwC,EACJ,KAAMjF,GAAeiG,EAAkBvF,CAAS,CAAC,EACjD,OAAQuF,EAAkBvF,CAAS,EACnC,MAAOyF,GAAgBF,EAAkBvF,CAAS,EAAGF,EAAiB,UAAU,CACpF,EACA,GAAIiC,EAAY,OAAO,MAAWA,EAAY,KAC1C,OAAQA,EAAY,KAAM,CACtB,+BACA,kCAAoC,CAChCA,EAAY,OAASyD,EAAqB,GAAGzD,EAAY,IAAI,IAAI/B,CAAS,GAAG,EAC7EkE,GAAkBpE,EAAkBiC,EAAaoC,EAAkBtE,EAAYyC,CAAgB,EAE/FgC,GAA0BxE,EAAkByE,EAAkB1E,EAAYyC,EAAiB,MAAM,EACjG,KACJ,CACA,+BACA,kCAAoC,CAEhCP,EAAY,OAASyD,EAAqB,GAAGzD,EAAY,IAAI,IAAI/B,CAAS,GAAG,EAC7E8E,GAAiBhF,EAAkBiC,EAAaoC,EAAkBtE,EAAYyC,CAAgB,EAC9F,KACJ,CACA,8BACA,iCAAmC,CAC/BP,EAAY,OAASyD,EAAqB,GAAGzD,EAAY,IAAI,IAAI/B,CAAS,GAAG,EAC7E+E,GAAgBjF,EAAkBiC,EAAalC,EAAYyC,CAAgB,EAC3E,KACJ,CACA,0BACA,iCACA,oCACA,iCACA,oCACA,6BAA+B,CAE3BP,EAAY,OAASyD,EAAqB,GAAGzD,EAAY,IAAI,IAAI/B,CAAS,GAAG,EAC7EmF,GAAerF,EAAkBiC,EAAaoC,EAAkBtE,EAAYyC,CAAgB,EAC5F,KACJ,CACJ,MACO/D,EAAAwD,EAAY,OAAO,aAAnB,MAAAxD,EAAgC,cACvCwD,EAAY,OAASyD,EAAqB,GAAGzD,EAAY,IAAI,IAAI/B,CAAS,GAAG,EAC7EmF,GAAerF,EAAkBiC,EAAaoC,EAAkBtE,EAAYyC,CAAgB,EAEpG,CACJ,CAxDS1E,EAAA0H,GAAA,wBAkET,SAASI,GACLC,EACAC,EACAtD,EACA0B,EAGAlE,EACI,CACJ,GAAI,OAAO,KAAK6F,CAAc,EAAE,OAAS,EAAG,CACxCC,EAAiB,SAAS,OAAS,CAAC,EACpC,QAAW5F,KAAa2F,EAAgB,CACpC,IAAME,EACF,iBAAkBF,EAAe3F,CAAS,EACpCsC,EAAiB,QAAQ,eAAe,cAAW,WAAY,iCAAiC,EAChGA,EAAiB,QAAQ,eAAe,cAAW,WAAY,6BAA6B,EAChGwD,EACF9B,EACI,iBAAkB2B,EAAe3F,CAAS,EACpC,kCACA,6BACV,EACJqC,GACIvC,EACA+F,EACAC,EACAxD,EACA,CAAE,GAAItC,CAAU,CACpB,EACA4F,EAAiB,SAAS,OAAO,KAAKC,CAAa,CACvD,CACJ,CACJ,CAhCSjI,EAAA8H,GAAA,8BAyCT,SAASK,GACLjG,EACAwC,EACqB,CA1/BzB,IAAA/D,EA2/BI,IAAMqH,EAA0CtD,EAAiB,QAAQ,mBAAmB,cAAW,UAAU,EAGjHD,GACIvC,EACA8F,EACA9F,EAAiB,WAAW,WAC5BwC,CACJ,EAGAsD,EAAiB,OAAStD,EAAiB,QAAQ,eAC/C,cAAW,WACX,kBAAe,gBACnB,EACA,IAAM0D,EAAelG,EAAiB,WAA0B,YAC1DY,EAAmBsF,EAAY,kBAAe,gBAAgB,EAC9DA,EAAY,kBAAe,gBAAgB,EAC3CA,EAAY,kCAAkC,EACpD3D,GACIvC,EACA8F,EAAiB,OACjBlF,EACA4B,CACJ,EACA,IAAM2D,EAAeD,EAAY,kBAAe,aAAa,EACzDC,GACA3C,GACIxD,EACAmG,EAAa,WACbL,EAAiB,OACjBtD,gBAEJ,EAEJsD,EAAiB,OAAS,CAAC,EAC3B,IAAMM,EAAeF,EAAY,kBAAe,aAAa,EACzDE,GACA5C,GACIxD,EACAoG,EAAa,WACbN,EAAiB,OACjBtD,0BAEJ,EAIJsD,EAAiB,OAAStD,EAAiB,QAAQ,eAAe,cAAW,WAAY,kBAAkB,EAC3GD,GACIvC,EACA8F,EAAiB,OACjBI,EAAY,kBAAe,gBAAgB,EAC3C1D,CACJ,EACI,OAAO,KAAKsD,EAAiB,MAAM,EAAE,SAAW,GAChD,OAAOA,EAAiB,OAI5BA,EAAiB,SAAW,CAAC,EAC7B,IAAMO,EAAWH,EAAY,kBAAe,QAAQ,EACpD,GAAIG,EAAU,CACV,IAAMhC,GAAmB5F,EAAA+D,EAAiB,OAAO,YAAxB,YAAA/D,EAAmC,SAC5D+G,GACIxF,EACAqG,EAAS,WACThC,EACAyB,EAAiB,SACjBtD,CACJ,CACJ,CAGA,IAAMqD,EAAiBS,GAA4BtG,EAAiB,SAAUA,EAAiB,SAAS,EACxG,OAAA4F,GAA2BC,EAAgBC,EAAkBtD,EAAkB0D,EAAalG,CAAgB,EAErG8F,CACX,CAlFShI,EAAAmI,GAAA,cA0FF,SAASM,GACZvG,EACiC,CAEjCwG,GAAS,EAET,IAAMC,EAAUC,GAAW1G,CAAgB,EAC3C,GAAI,CAACyG,EACD,OAEJ,IAAMrI,EAAY4B,EAAiB,UAC7BgC,EAAqB,CAAC,EACtB0C,EAA4BiC,GAAiBF,EAASzG,EAAiB,UAAWgC,CAAQ,EAEhG,GADA4E,GAAYlC,EAAQ1E,EAAiB,OAAQ5B,CAAS,EAClD,CAACsG,EACD,OAEJ,IAAMmC,EAAyB3I,GAAmB8B,EAAiB,KAAM5B,CAAS,EAE5E0I,EAAU,IAAIC,GAGpB,OAAOd,GAAWjG,EAAkB,CAAE,SAAAgC,EAAU,YAAa6E,EAAwB,OAAAnC,EAAQ,QAAAoC,CAAQ,CAAC,CAC1G,CAvBgBhJ,EAAAyI,GAAA,4BzC/iChB,SAASS,GAAWC,EAAyBC,EAA0B,CAlCvE,IAAAC,EAAAC,EAmCI,OAAID,EAAAF,EAAK,YAAL,MAAAE,EAAgB,KACTE,GAAeC,IAAcF,EAAAH,EAAK,YAAL,YAAAG,EAAgB,IAAI,EAAGH,EAAK,UAAW,OAAWC,CAAQ,EAEvFA,CAEf,CANSK,EAAAP,GAAA,cAQT,SAASQ,GACLP,EACAQ,EACAC,EACAC,EACAC,EACAC,EACAC,EACF,CACEb,EAAK,WAAa,CAAC,EAEnB,IAAMc,EAAsCC,GAAmBP,EAAO,MAAOC,EAAMC,EAAUC,EAASC,CAAS,EAC/G,QAAWI,KAAUF,EAAS,CAC1B,IAAMG,EAASH,EAAQE,CAAM,EAC7BH,EAAMG,CAAM,EAAIC,CACpB,CACA,QAAWC,KAAmBV,EAAO,MAAO,CACxC,IAAMW,EAAKpB,GAAWS,EAAO,MAAMU,CAAe,EAAGA,CAAe,EAChElB,EAAK,UACLA,EAAK,WAAWmB,CAAE,EAAIL,EAAQK,CAAE,EAAE,mBAC5B,GAAGnB,EAAK,SAAS,IAAIc,EAAQK,CAAE,EAAE,kBAAkB,GACnDnB,EAAK,UAEXA,EAAK,WAAWmB,CAAE,EAAIL,EAAQK,CAAE,EAAE,mBAAqBL,EAAQK,CAAE,EAAE,mBAAqBA,CAEhG,CACJ,CA1BSb,EAAAC,GAAA,gCAsCT,SAASQ,GACLK,EACAX,EACAC,EACAC,EACAC,EACAS,EAC0B,CAvF9B,IAAAnB,EAwFI,IAAMW,EAAoC,CAAC,EAC3C,QAAWS,KAAcF,EAAS,CAC9B,IAAMZ,EAASY,EAAQE,CAAU,EAC3BH,EAAKpB,GAAWS,EAAQc,CAAU,EACxC,GAAI,CAACH,EACD,SAEJ,IAAMnB,EAAgB,CAClB,SAAUK,IAAcH,EAAAM,EAAO,YAAP,YAAAN,EAAkB,IAAI,EAC9C,UAAWM,EAAO,UAClB,GAAIA,EAAO,oBAAsB,CAAE,mBAAoBA,EAAO,kBAAmB,EACjF,GAAIA,EAAO,mBAAqB,CAAE,kBAAmBA,EAAO,iBAAkB,CAClF,EACAK,EAAMM,CAAE,EAAInB,EAGZ,IAAMuB,EACF,OAAO,KAAKZ,CAAO,EAAE,KAAMa,GAAYA,EAAQ,SAASL,CAAE,CAAC,GAC3D,OAAO,KAAKR,CAAO,EAAE,KAAMa,GAAYA,EAAQ,SAASL,EAAG,MAAM,EAAG,EAAE,CAAC,CAAC,GACxE,OAAO,KAAKR,CAAO,EAAE,KAAMa,GAAYA,EAAQ,SAASxB,EAAK,QAAQ,CAAC,EAG1E,GAAIuB,EACA,GAAIvB,EAAK,WAAa,cAAW,WAAY,CACzC,IAAMyB,EAAiD,CACnD,SAAAf,EACA,KAAAD,EACA,WAAYE,EAAQY,CAAS,EAC7B,UAAAX,EACA,OAAAS,CACJ,EACArB,EAAK,OAAS0B,GAAuBD,CAAgB,CACzD,SAAWzB,EAAK,WAAa,cAAW,mBAAoB,CACxD,IAAMyB,EAA0C,CAC5C,SAAAf,EACA,KAAAD,EACA,WAAYE,EAAQY,CAAS,EAC7B,UAAAX,EACA,OAAAS,CACJ,EACArB,EAAK,OAAS2B,GAA+BF,CAAgB,CACjE,KAAO,CACH,IAAMA,EAAiD,CACnD,SAAAf,EACA,KAAAD,EACA,WAAYE,EAAQY,CAAS,EAC7B,UAAWvB,EAAK,UAChB,UAAAY,EACA,OAAAS,CACJ,EACArB,EAAK,OAAS4B,GAAyBH,CAAgB,CAC3D,CAEAjB,EAAO,OACPD,GAA6BP,EAAMQ,EAAQC,EAAMC,EAAUC,EAASC,EAAWC,CAAK,CAE5F,CACA,OAAOA,CACX,CAlESP,EAAAS,GAAA,sBAuEF,IAAMc,GAAN,MAAMA,WAAsBC,EAAY,CACpC,YAAYL,EAA8C,CAC7DM,GAAS,EACT,IAAIX,EACCK,EAAiB,SAAS,mBAAgB,OAAO,EAUlDL,EAAUK,EAAiB,SAAS,mBAAgB,OAAO,EAAE,MAT7DO,GAAIP,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAASQ,EAAQ,EAAE,MAAM,EACzB,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,OAAO,CACnC,CACJ,CAAC,EAIAb,GACDY,GAAIP,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAASQ,EAAQ,EAAE,UAAW,CAAE,MAAOR,EAAiB,SAAS,SAAS,EAAE,EAAM,CAAC,EACnF,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,OAAO,CACnC,CACJ,CAAC,EAEL,IAAMS,EAAUd,GAAW,OAAO,KAAKA,CAAO,EAAE,CAAC,EAC3CJ,EAASI,GAAWrB,GAAWqB,EAAQc,CAAO,EAAGA,CAAO,EAExDC,EAAc,IAAIC,GAClBC,EAAaC,GAAkB,cAAW,WAAW,EACrDC,EAAYd,EAAiB,WAAWY,EAAW,QAAQ,EACjEG,GACIL,EACAV,EAAiB,SACjBc,EAAU,YAAe,YACzB,MACJ,EAEA,MACId,EAAiB,SACjBA,EAAiB,WACjBT,EACAD,GACIK,EACAK,EAAiB,YACjBA,EAAiB,SACjBA,EAAiB,WACjBA,EAAiB,UACjBA,EAAiB,MACrB,EACA,wBAAqB,GACrBU,CACJ,CACJ,CACJ,EAvD+C7B,EAAAuB,GAAA,iBAAxC,IAAMY,GAANZ,GA+DA,SAASa,GAAStB,EAA6BuB,EAAuBtB,EAAoC,CAtNjH,IAAAnB,EAAAC,EAuNI,IAAMU,EAAkB,CAAC,EACzB,QAAWS,KAAcF,EAAS,CAC9B,IAAMZ,EAASY,EAAQE,CAAU,EAUjC,IATKpB,EAAAM,EAAO,YAAP,MAAAN,EAAkB,MACnB8B,GAAIX,EAAQ,CACR,SAAU,eAAY,MACtB,QAASY,EAAQ,EAAE,sBAAuB,CAAE,SAAUX,CAAW,CAAC,EAClE,SAAU,CACN,KAAM,eACV,CACJ,CAAC,IAEDnB,EAAAK,EAAO,YAAP,YAAAL,EAAkB,QAASwC,EAAe,CAC1C,IAAMxB,EAAKpB,GAAWS,EAAQc,CAAU,EACxCT,EAAMM,CAAE,EAAIX,CAChB,CACA,GAAImC,IAAkB,MAAG,4BAA8BnC,EAAO,MAAO,CACjE,IAAMoC,EAAWF,GAASlC,EAAO,MAAOmC,EAAetB,CAAM,EAC7D,QAAWwB,KAAaD,EACpB/B,EAAMgC,CAAS,EAAID,EAASC,CAAS,CAE7C,CACJ,CACA,OAAOhC,CACX,CAzBgBP,EAAAoC,GAAA,Y0CrNhB,IAAAI,GAA8E,SCA9E,IAAAC,GAAgD,SCAhD,IAAAC,GAAkB,SA6BlB,IAAAC,GAOO,SAEP,IAAMC,GAAgB,CAAC,eAAgB,MAAM,EAO7C,SAASC,GAAWC,EAAaC,EAAmB,CAC3CA,EAAI,QACLA,EAAI,MAAQ,CAAC,GAEXD,KAAOC,EAAI,QACbA,EAAI,MAAMD,CAAG,EAAI,CACb,SAAU,EACd,EAER,CATSE,EAAAH,GAAA,cAiBT,SAASI,GAAgBC,EAAsBC,EAA6B,CACxE,GAAID,EAAW,SAASC,CAAW,EAAG,CAClC,IAAMC,EAAUD,EAAY,MAAM,GAAG,EACrC,OAAIC,EAAQ,SAAW,EACnBA,EAAQ,KAAK,GAAG,EAEhBA,EAAQ,CAAC,GAAK,SAASA,EAAQ,CAAC,CAAC,EAAI,GAAG,SAAS,EAE9CH,GAAgBC,EAAYE,EAAQ,KAAK,GAAG,CAAC,CACxD,CACA,OAAOD,CACX,CAXSH,EAAAC,GAAA,mBAsBF,SAASI,GACZC,EACAC,EACAC,EACAC,EACAC,EACAC,EACI,CACAF,IACIA,EAAiB,WAEjBG,GACIN,EACAC,EACAC,EACAC,EAAiB,WACjBC,EACAC,CACJ,EACOF,EAAiB,sBAExBG,GACIN,EACAC,EACAC,EACAC,EAAiB,qBACjBC,EACAC,CACJ,EAGZ,CA/BgBX,EAAAK,GAAA,8BAuCT,SAASQ,GACZH,EACAI,EACAC,EACAC,EACM,CACN,OAAON,EAAQ,eAAe,cAAW,aAAcM,EAAiBD,EAAeD,CAAa,CACxG,CAPgBd,EAAAa,GAAA,8BAmBhB,SAASI,GAA6BC,EAAyC,CAC3EA,EAAO,cAAc,IAAI,EACzB,IAAIC,EAAkBD,EAAO,cAC7B,QAAWE,KAAYF,EAAO,aAAa,MACvC,GAAIA,EAAO,aAAa,MAASE,CAAQ,EAAE,KAAM,CAC7C,IAAMC,EAAkBH,EAAO,aAAa,MAASE,CAAQ,EAAE,KAAK,MAAME,CAAsB,EAC1FC,EAAuBL,EAAO,UAAU,YAAeG,EAAgBA,EAAgB,OAAS,CAAC,CAAC,EAClGG,EAAmBN,EAAO,cAAc,CAAC,EAC/CA,EAAO,cAAgBA,EAAO,aAAaM,CAAgB,EAC3DL,EAAkBN,GACdK,EAAO,QACPM,EACAN,EAAO,cACP,YACJ,EACAb,GACIc,EACAD,EAAO,cACPA,EAAO,UACPK,EACAL,EAAO,QACP,CAAC,GAAGA,EAAO,aAAa,CAC5B,CACJ,MAAW,OAAOA,EAAO,aAAa,MAASE,CAAQ,GAAM,UAEzDR,GACIM,EAAO,aACPA,EAAO,cACPA,EAAO,UACPA,EAAO,aAAa,MAASE,CAAQ,EAAE,WACvCF,EAAO,QACP,CAAC,GAAGA,EAAO,cAAe,aAAa,CAC3C,EAGR,OAAOC,CACX,CApCSnB,EAAAiB,GAAA,gCAsCT,SAASQ,GACLC,EACAC,EACArB,EACAR,EACAiB,EACF,CACMW,GAAiB,OAAOA,GAAkB,WAC1CA,EAAcC,EAAiBrB,EAAcR,CAAG,EACzC,OAAOiB,GAAkB,UAAY,CAACnB,GAAc,SAASE,CAAG,EAEvE6B,EAAgB7B,CAAG,KAAI,GAAA8B,SAAMD,EAAgB7B,CAAG,GAAK,CAAC,EAAGiB,GAAiB,CAAC,EAAG,CAC1E,WAAYc,EAChB,CAAC,EAEDF,EAAgB7B,CAAG,EAAIiB,CAE/B,CAjBSf,EAAAyB,GAAA,0BA4BT,SAASK,GACLC,EACApB,EACAb,EACAS,EACAQ,EACAT,EACF,CACE,IAAM0B,EAAOD,EAAS,SAAS,KAAK,CAAC,GAAGpB,EAAeb,CAAG,CAAC,EACrD6B,EAAkBM,GAA8B1B,EAAc,SAAUyB,CAAI,EAClF,GAAIlC,KAAO,MAAG,kBAAoBA,IAAQ,WACtC6B,EAAgB,YAAc,GAAAC,SAAMD,EAAgB,UAAe,CAAC,EAAGZ,GAAiB,CAAC,EAAG,CACxF,WAAYc,EAChB,CAAC,UACMd,IAAkB,OAAW,CACpC,IAAMW,EAAgBK,EAAS,SAAS,OACpCL,IAAkB,IAClBD,GAAuBC,EAAeC,EAAiBrB,EAAcR,EAAKiB,CAAa,CAE/F,MAAWY,EAAgB7B,CAAG,IAAM,QAChC,OAAO6B,EAAgB7B,CAAG,CAElC,CAtBSE,EAAA8B,GAAA,sBAwBT,SAASI,GACLnB,EACAoB,EACAzB,EACAH,EACF,CACE,OAAO,KAAKQ,CAAa,EAAE,QAASqB,GAAY,CAC5C,IAAMC,EAAWtB,EAAcqB,CAAO,EAAE,SAEpC3B,EACC,OAAO,OAAO,MAAG,gBAAgB,EAAE,SAAS4B,CAAQ,EAGrD5B,EAAmB,OAAO,KAAK0B,EAAU,WAAW,EAAE,OAAQG,GAAe,CAtPzF,IAAAC,EAuPgB,IAAMC,GAAYD,EAAAJ,EAAU,YAAYG,CAAU,EAAiB,aAAjD,YAAAC,EAA6D,SAC/E,GAAIC,GAAA,MAAAA,EAAU,KACV,OAAOA,EAAS,KAAK,QAAQzB,EAAcqB,CAAO,EAAE,QAAQ,EAAI,GAC7D,GAAII,GAAA,MAAAA,EAAU,MACjB,OAAOA,EAAS,QAAUzB,EAAcqB,CAAO,EAAE,QAEzD,CAAC,EATD3B,EAAmB,CAAC,YAAY,EAYpCM,EAAcqB,CAAO,EAAIvB,GACrBH,EACAD,EAAiB,CAAC,EAClBM,EAAcqB,CAAO,EACrB,YACJ,EACAvC,GAAWuC,EAAS7B,EAAc,SAAY,mBAAgB,GAAG,CAAC,EAClEF,GACIU,EAAcqB,CAAO,EACrB7B,EACA4B,EACAA,EAAU,YAAY1B,EAAiB,CAAC,CAAC,EACzCC,EACA,CAAC0B,CAAO,CACZ,CACJ,CAAC,EAED,OAAO,KAAK7B,EAAc,SAAS,mBAAgB,GAAG,EAAE,KAAK,EAAE,QAASkC,GAAiB,CAChF1B,EAAc0B,CAAY,GAC3B,OAAOlC,EAAc,SAAS,mBAAgB,GAAG,EAAE,MAAMkC,CAAY,CAE7E,CAAC,CACL,CA7CSzC,EAAAkC,GAAA,iBA+CT,SAASQ,GAAexB,EAAiCpB,EAAaY,EAA0C,CAC5G,GAAIZ,IAAQ,QAERoC,GAAchB,EAAO,cAAeA,EAAO,UAAWR,EAASQ,EAAO,aAAa,UAC5EA,EAAO,aAAapB,CAAG,EAAE,KAAM,CACtC,IAAMuB,EAAkBH,EAAO,aAAapB,CAAG,EAAE,KAAK,MAAMwB,CAAsB,EAC5EC,EAAuBL,EAAO,UAAU,YAAYG,EAAgBA,EAAgB,OAAS,CAAC,CAAC,EACrGH,EAAO,cAAgBL,GACnBK,EAAO,QACPpB,EACAoB,EAAO,cACPpB,IAAQ,WAAa,aAAe,EACxC,EACAO,GACIa,EAAO,cACPA,EAAO,cACPA,EAAO,UACPK,EACAb,EACA,CAAC,GAAGQ,EAAO,cAAepB,CAAG,CACjC,CACJ,MAAWoB,EAAO,aAAapB,CAAG,EAAE,MAEhCc,GACIM,EAAO,aACPA,EAAO,cACPA,EAAO,UACPA,EAAO,aAAapB,CAAG,EACvBY,EACA,CAAC,GAAGQ,EAAO,cAAepB,EAAK,OAAO,CAC1C,EACOoB,EAAO,aAAapB,CAAG,EAAE,aAAkB,QAElDc,GACIM,EAAO,aACPA,EAAO,cACPA,EAAO,UACPA,EAAO,aAAapB,CAAG,EAAE,WACzBoB,EAAO,QACP,CAAC,GAAGA,EAAO,cAAepB,EAAK,kBAAkB,CACrD,CAER,CA1CSE,EAAA0C,GAAA,kBAqDT,SAAS9B,GACLN,EACAC,EACA4B,EACAQ,EACAjC,EACAC,EACI,CACJ,IAAIiC,EAAgB,GAChBC,EAAmB,GAEvB,QAAW/C,KAAO6C,EAAc,CAC5B,IAAI5B,EAAgBT,EAAaR,CAAG,EAChCiC,EAAWe,GAAmBxC,EAAcR,CAAG,EAE/Ca,EAAcA,EAAc,OAAS,CAAC,IAAM,gBAC5CiC,EAAgB,GAChBjC,EAAc,IAAI,GAElBiC,IACA7B,EAAgBT,EAAaK,EAAcA,EAAc,OAAS,CAAC,CAAC,EAAEb,CAAG,EACzEiC,EAAWe,GAAmBxC,EAAcK,EAAcA,EAAc,OAAS,CAAC,CAAC,GAGnFA,EAAcA,EAAc,OAAS,CAAC,IAAM,qBAC5CkC,EAAmB,GACnBlC,EAAc,IAAI,GAElBkC,IACA9B,EAAgBT,EAAaK,EAAcA,EAAc,OAAS,CAAC,CAAC,EAAEb,CAAG,EACzEiC,EAAWe,GAAmBxC,EAAcK,EAAcA,EAAc,OAAS,CAAC,CAAC,GAGvF,IAAMoC,EAAmD,CACrD,cAAApC,EACA,aAAAgC,EACA,UAAAR,EACA,cAAApB,EACA,aAAAT,EACA,QAAAI,EACA,cAAAH,CACJ,EACII,EAAcA,EAAc,OAAS,CAAC,IAAM,UAC5CI,EAAgBE,GAA6B8B,CAAuB,GAEpEhB,GAAA,MAAAA,EAAU,UACVD,GAAmBC,EAAUpB,EAAeb,EAAKS,EAAeQ,EAAeT,CAAY,EAE3FS,GAAiB,OAAOA,GAAkB,UAAY4B,EAAa7C,CAAG,GACtE4C,GAAeK,EAAyBjD,EAAKY,CAAO,CAE5D,CACJ,CApDSV,EAAAY,GAAA,qBAgET,SAASoC,GACLC,EACAC,EACAnB,EACAoB,EACAC,EACA9C,EACAR,EACI,CACJ,IAAIuD,EAEAH,EAAY,SAAW,EAEvBG,EAAmB,CAAC,MAAM,EAE1BA,EAAmBH,EAEvB,IAAMI,EAAYvB,EAAS,KAAK,UAC5BkB,EAAmB,OACnBE,EACAE,EACAtB,EAAS,KAAK,YACdqB,CACJ,EACMG,EAAaC,GAAsBlD,EAAcyB,EAAUkB,EAAmB,WAAYnD,EAAKwD,CAAS,EACxGG,EAAgB,KAAK,MAAM,KAAK,UAAUR,EAAmB,cAAc,QAAQ,CAAC,EAC1FQ,EAAc,SAAS,EAAE,GAAKR,EAAmB,MACjD,IAAMS,EAAqB3B,EAAS,KAAK,iBAAiBwB,EAAYE,CAAa,EAC1DR,EAAmB,cAAc,YAAY,KAAMU,GAAW,CACnF,IAAIC,EAAS,GACTC,EAAoB,KAAK,MAAMF,CAAM,EACzCE,EAAY,CACR,QAASA,EAAU,QACnB,SAAUA,EAAU,QACxB,EACA,IAAIC,EAAoB,KAAK,MAAMJ,CAAkB,EACrD,OAAAI,EAAY,CACR,QAASA,EAAU,QACnB,SAAUA,EAAU,QACxB,EACI,KAAK,UAAUD,CAAS,IAAM,KAAK,UAAUC,CAAS,IACtDF,EAAS,IAENA,CACX,CAAC,GAEGX,EAAmB,cAAc,YAAY,KAAKS,CAAkB,CAE5E,CAhDS1D,EAAAgD,GAAA,oBA2DT,SAASe,GACLd,EACAlB,EACAJ,EACArB,EACAR,EACAkE,EACF,CACE,GAGQf,EAAmB,mBAAmB,OAAY,SAClDA,EAAmB,gBACnBA,EAAmB,eAAe,iBAAoB,OAAS,UAC/DA,EAAmB,eAAe,iBAAoB,WAU1DA,EAAmB,mBAAmB,OAAY,SAClDtB,EAAgBqC,CAAW,IAAM,SAEjCrC,EAAgBqC,CAAW,EAAI,CAAC,OAXlC,CACE,IAAMtC,EAAgBK,EAAS,SAAS,OACpCL,GAAiB,OAAOA,GAAkB,WAC1CA,EAAcC,EAAiBrB,EAAcR,EAAKkE,CAAW,EACtDtC,IAAkB,KACzBC,EAAgBqC,CAAW,EAAI1D,EAAaR,CAAG,EAEvD,CAMJ,CA7BSE,EAAA+D,GAAA,qBAwCT,SAASE,GACLhB,EACAjB,EACAD,EACAjC,EACAQ,EACF,CACE,IAAMqB,EAAkBM,GAA8BgB,EAAmB,cAAc,SAAUjB,CAAI,EAC/FgC,EAAcjC,EAAS,SAAS,KAAOjC,EAC7C,GAAIQ,EAAaR,CAAG,IAAM,OACtBiE,GAAkBd,EAAoBlB,EAAUJ,EAAiBrB,EAAcR,EAAKkE,CAAW,MAC5F,CAEH,IAAME,EAAgBnC,EAAS,SAAS,OACpCmC,GAAiB,OAAOA,GAAkB,WAC1CA,EAAcvC,EAAiBrB,EAAcR,EAAKkE,CAAW,EACtD,OAAO,UAAU,eAAe,KAAKrC,EAAiBqC,CAAW,GACxE,OAAOrC,EAAgBqC,CAAW,CAE1C,CACAG,GAAqBlB,EAAmB,cAAc,SAAUjB,CAAI,CACxE,CArBShC,EAAAiE,GAAA,wBAuBT,SAASG,GACLlB,EACAlB,EACAD,EACAkB,EACAG,EACF,CACE,OAAIF,EAAY,CAAC,IAAM,SACnBlB,EAAOD,EAAS,SAAS,KAAKkB,EAAmB,SAAU,CAAC,EAAeC,EAAY,CAAC,CAAC,GAEzFlB,EAAOD,EAAS,SAAS,KACrBkB,EAAmB,SACnB,CAAC,EACDG,GAAA,MAAAA,EAAO,WAAW,qBAAoBA,EAAM,MAAM,mBAAgB,EAAE,CAAC,EAAIF,EAAY,CAAC,EACtFA,EAAYA,EAAY,OAAS,CAAC,CACtC,EACAlB,EAAOA,EAAK,QAAQ,KAAM,IAAI,EAAE,QAAQ,iBAAkB,wBAAwB,GAE/EA,CACX,CAnBShC,EAAAoE,GAAA,6BAqBT,SAASC,GACLnB,EACAlB,EACAD,EACAkB,EACA3C,EACF,CACE,OAAI4C,EAAY,CAAC,IAAM,WAAaA,EAAY,CAAC,IAAM,SACnDlB,EAAOD,EAAS,SAAS,KACrBkB,EAAmB,SACnBA,EAAmB,cAAc,SACjC3C,EAAa,MACjB,EAEA0B,EAAOD,EAAS,SAAS,KAAKkB,EAAmB,SAAU,CAAC,EAAeC,EAAYA,EAAY,OAAS,CAAC,CAAC,EAE3GlB,CACX,CAjBShC,EAAAqE,GAAA,0BA4BT,SAASC,GACLrB,EACAC,EACAnB,EACAzB,EACA8C,EACM,CACN,IAAIpB,EACJ,OAAIkB,EAAY,CAAC,IAAM,gBAAa,SAChClB,EAAOoC,GAA0BlB,EAAalB,EAAMD,EAAUkB,EAAoBG,CAAK,EAChFF,EAAY,CAAC,IAAM,gBAAa,MACvClB,EAAOqC,GAAuBnB,EAAalB,EAAMD,EAAUkB,EAAoB3C,CAAY,EACpF4C,EAAY,CAAC,IAAM,2BAC1BlB,EAAOD,EAAS,SAAS,KAAKkB,EAAmB,SAAUA,EAAmB,cAAc,SAAUG,CAAK,EACpGF,EAAY,CAAC,IAAM,aAAeA,EAAY,CAAC,IAAM,kBAC5DlB,EAAOD,EAAS,SAAS,KACrBkB,EAAmB,SACnBA,EAAmB,cAAc,SACjCC,EAAY,MAAM,CAAC,EAAE,KAAK,GAAG,CACjC,EAEAlB,EAAOD,EAAS,SAAS,KAAKkB,EAAmB,QAAQ,EAEtDjB,CACX,CAxBShC,EAAAsE,GAAA,mBAoCT,SAASC,GACLtB,EACAlB,EACAzB,EACA4C,EACAC,EACAC,EACAtD,EACI,CACJ,GAAI,CAACiC,EACD,OAGJ,IAAIyC,EAAQtB,EAAY,QAAQ,aAAa,EAC7C,KAAOsB,EAAQ,IACXtB,EAAY,OAAOsB,EAAQ,EAAG,CAAC,EAC/BA,EAAQtB,EAAY,QAAQ,aAAa,EAG7C,GAAInB,EAAS,KACTiB,GAAiBC,EAAoBC,EAAanB,EAAUoB,EAAKC,EAAO9C,EAAcR,CAAG,UAClFiC,EAAS,SAAU,CAC1B,IAAMC,EAAOsC,GAAgBrB,EAAoBC,EAAanB,EAAUzB,EAAc8C,CAAK,EAC3Fa,GAAqBhB,EAAoBjB,EAAMD,EAAUjC,EAAKQ,CAAY,CAC9E,CACJ,CAzBSN,EAAAuE,GAAA,sBAwCT,SAASE,GAAqB3E,EAAa4E,EAA4B/C,EAAyB,CApoBhG,IAAAY,EAqoBI,IAAMoC,EAAW7E,EAAI,MAAM,GAAG,EACxB8E,EAAeD,EAAS,CAAC,EACzBE,EAASF,EAAS,CAAC,EACzB,GAAIC,IAAiBF,EAAa,UAAW,CAEzC,IAAMI,GAAwBvC,EAAAmC,EAAa,SAAb,YAAAnC,EAAqB,OAC9CwC,IACIA,EAAO,SAAWF,GACdA,IAAW,QAAaE,EAAO,SAAW,IAC1CF,GAAUH,EAAa,aAAeG,IAC3CE,EAAO,gBAAkBL,EAAa,eAE9C,IAAI,CAACI,GAAyBA,EAAsB,SAAW,KAC3DE,GAAyBrD,EAAiB7B,EAAK4E,EAAa,MAAOA,EAAa,cAAc,SAAS,EAEvG,OAAO/C,EAAgB7B,CAAG,EAEtBA,EAAI,WAAW,oBAAiB,+BAA+B,GAAG,CAClE,IAAMmF,EAAenF,EAAI,QACrB,oBAAiB,gCACjB,oBAAiB,6BACrB,EACAkF,GACIrD,EACAsD,EACAP,EAAa,MACbA,EAAa,cAAc,SAC/B,EAEA,OAAO/C,EAAgBsD,CAAY,CACvC,CAER,CACJ,CAlCSjF,EAAAyE,GAAA,wBA+CT,SAASS,GAAkCR,EAA4B,CACnE,IAAMS,EAAaT,EAAa,KAAK,UAAU,EAAGA,EAAa,KAAK,YAAY,GAAG,CAAC,EAC9E/C,EAAkByD,GAA2BV,EAAa,cAAc,SAAUS,CAAU,EAC5FE,EAAmBX,EAAa,KAAK,UAAUA,EAAa,KAAK,YAAY,GAAG,EAAI,CAAC,EAC3F,QAAW5E,KAAO6B,EACV7B,EAAI,WAAWuF,CAAgB,GAC/BZ,GAAqB3E,EAAK4E,EAAc/C,CAAe,CAGnE,CATS3B,EAAAkF,GAAA,qCAoBT,SAASI,GACLC,EACAC,EACAC,EACAC,EACAC,EACM,CACN,IAAMC,EAAU,CAAC,EACjB,QAAWC,KAAgBN,EAAuB,CAW9C,GARI,CAACM,EAAa,WACd,CAACA,EAAa,cACd,CAACA,EAAa,WACd,CAACA,EAAa,eAKdL,EAAiB,WAAc,aAAgB,SAC3B,IAAI,OAAOA,EAAiB,WAAc,aAAgB,OAAU,EACxE,KAAKK,EAAa,YAAe,IAAM,GACnD,SAGR,GAAM,CAAE,KAAA7D,EAAM,iBAAA8D,CAAiB,EAAIC,GAC/BN,EACAC,EACAG,EAAa,QAAUF,EACvBE,EAAa,aACjB,EAEKD,EAAQ5D,CAAI,IACb4D,EAAQ5D,CAAI,EAAI,CACZ,iBAAkB8D,EAClB,QAAS,CAAC,CACd,GAEJF,EAAQ5D,CAAI,EAAE,QAAQ,KAAK6D,CAAY,CAC3C,CACA,OAAOD,CACX,CAzCS5F,EAAAsF,GAAA,8BAkDT,SAASU,GACL/C,EACAsC,EACAC,EACAS,EACI,CACJ,IAAMN,EAAaM,EAAwBA,EAAsB,IAAM,OAEjEP,GADgBO,EAAwBA,EAAsB,OAAS,SAC1ChD,EAAmB,OAAO,UAC7D,QAAWiD,KAAiB,MAAG,2BAA4B,CACvD,GAAM,CAAE,KAAAlE,CAAK,EAAI+D,GAAoB9C,EAAmB,OAAQyC,EAAWC,EAAYO,CAAa,EACpG,GAAI,CAAClE,EACD,SAEJ,IAAMmE,EAAc,CAChB,KAAAnE,EACA,cAAeiB,EAAmB,cAClC,UAAAyC,EACA,OAAQH,EACR,WAAAI,EACA,cAAAO,EACA,MAAOjD,EAAmB,KAC9B,EACAiC,GAAkCiB,CAAW,CACjD,CACA,GAAIZ,EAAuB,CAEvB,IAAMK,EAAUN,GACZC,EACAC,EACAvC,EAAmB,OACnByC,EACAC,CACJ,EAEA,QAAW3D,KAAQ4D,EACfQ,GACInD,EAAmB,cACnBjB,EACA4D,EAAQ5D,CAAI,EAAE,QACdiB,EAAmB,MACnB2C,EAAQ5D,CAAI,EAAE,iBACdiB,EAAmB,MACvB,CAER,CACJ,CA9CSjD,EAAAgG,GAAA,4BAyDT,SAASK,GACLpD,EACAqD,EACAC,EACAC,EACAtD,EACAzC,EACI,CACJ,IAAMP,EAAuB,CAAC,EACxBuG,EAASF,EAAQ,MAAM,GAAG,EAAE,CAAC,EACnC,GAAI,CAACD,EACD,OAEJ,QAAWI,KAAWJ,EAAgB,CAClC,IAAMK,EAAK1G,GAAgBC,EAAY,CAACwG,EAAQ,iBAAkBD,EAAQC,EAAQ,YAAY,EAAE,KAAK,GAAG,CAAC,EACzGxG,EAAW,KAAKyG,CAAE,CACtB,CACA,QAASnC,EAAQ,EAAGA,EAAQtE,EAAW,OAAQsE,IAAS,CAIpD,IAAMnD,EAHaZ,EAAiB,MAAS,KAAMmG,GAAS,CAp0BpE,IAAArE,EAq0BY,OAAAA,EAAAqE,EAAQ,OAAR,YAAArE,EAAc,SAAS+D,EAAe9B,CAAK,EAAE,YAAY,MAC7D,EACmC,KAAK,MAAMlD,CAAsB,EAC9DC,EACF0B,EAAmB,UAAU,YAAe5B,EAAgBA,EAAgB,OAAS,CAAC,CAAC,EAE3FwF,GACI5D,EACAqD,EAAe9B,CAAK,EACpBgC,EACA,CAAC,GAAGtD,EAAahD,EAAWsE,CAAK,CAAC,EAClCjD,CACJ,CACJ,CAEA,IAAMuF,EAAmB7E,GACrBgB,EAAmB,cAAc,SACjC8D,GAAsB,CAC1B,EACA,QAAWjH,KAAOgH,EACVE,GAA0BlH,EAAK2G,CAAM,GAAK,CAACvG,EAAW,SAASJ,CAAG,GAClE,OAAOgH,EAAiBhH,CAAG,CAGvC,CA3CSE,EAAAqG,GAAA,8BAmDT,SAASY,GAAa/D,EAAuBE,EAAmC,CAC5E,IAAI8D,EACJ,QAASC,EAAIjE,EAAY,OAAS,EAAGiE,GAAK,EAAGA,IACzC,GAAIjE,EAAYiE,CAAC,IAAM,gBAAa,MAAO,CACvCD,EAAYhE,EAAYiE,EAAI,CAAC,EAC7B,KACJ,CAEJ,OAAOC,GAAiBF,EAAW9D,CAAK,CAC5C,CATSpD,EAAAiH,GAAA,gBAcT,SAASI,GACLC,EACArE,EACAG,EACAtD,EACAqD,EACAD,EACF,CACE,IAAMqE,EAAqBtE,EAAmB,mBAC1C,CAACqE,GAAuB,EAACC,GAAA,MAAAA,EAAoB,uBAGjD,OAAO,KAAKD,CAAmB,EAAE,QAASE,GAAW,CACjD,IAAMC,EAAiBC,GACnBzE,EAAmB,UACnBG,EACAkE,EAAoBE,CAAM,EAC1BD,EAAmB,qBACnBzH,EACAmD,EAAmB,QACnBA,EAAmB,QACvB,EAEA4D,GACI5D,EACAwE,EAAe,aACftE,EACA,CAAC,GAAGD,EAAapD,CAAG,EACpB2H,EAAe,iBACfD,CACJ,CACJ,CAAC,CACL,CAhCSxH,EAAAqH,GAAA,sBAqCT,SAASM,GACLJ,EACArE,EACAE,EACAH,EACA3C,EACAmH,EACF,CACE,IAAIxB,EACE2B,EAASC,GAA6BN,EAAmB,IAAI,EAC/DK,IACA3B,EAAwB,CACpB,OAAA2B,EACA,IAAKX,GAAa/D,EAAaE,CAAK,CACxC,GAEJ4C,GACI/C,EACA3C,GAAA,YAAAA,EAAc,OACdmH,EAAe,iBACfxB,CACJ,CACJ,CAtBSjG,EAAA2H,GAAA,yBA2BT,SAASG,GACLP,EACAtE,EACAG,EACAkE,EACAxH,EACAqD,EACAD,EACF,CACEqE,EAAmB,MAAS,QAASX,GAAY,CAC7C,IAAMa,EAAiBC,GACnBzE,EAAmB,UACnBG,EACAkE,EACAV,EACA9G,EACAmD,EAAmB,QACnBA,EAAmB,QACvB,EACIwE,GAEAZ,GACI5D,EACAwE,EAAe,aACftE,EACA,CAAC,GAAGD,EAAapD,CAAG,EACpB2H,EAAe,iBACfA,EAAe,KACnB,CAER,CAAC,CACL,CA/BSzH,EAAA8H,GAAA,0BAoCT,SAASC,GACL9E,EACAC,EACA5C,EACA6C,EACA6E,EACAP,EACArE,EACI,CACJ,IAAMmE,EAAqBtE,EAAmB,mBAC9C,IACIsE,GAAA,YAAAA,EAAoB,QAAS,UAC5BrE,EAAY,CAAC,IAAM,YAAcA,EAAY,CAAC,IAAM,gBACrD8E,IAAgB,SAEhB3B,GACIpD,EACA3C,EAAa0H,CAAW,EACxB/E,EAAmB,SAASA,EAAmB,SAAS,OAAS,CAAC,EAClEE,EACA,CAAC,GAAGD,EAAa8E,CAAW,EAC5BT,GAAA,YAAAA,EAAoB,KACxB,UACOE,GAAkBO,IAAgB,SAAU,CACnDL,GAAsBJ,EAAoBrE,EAAaE,EAAOH,EAAoB3C,EAAcmH,CAAc,EAC9G,MACJ,MAAWA,EAEPZ,GACI5D,EACAwE,EAAe,aACftE,EACA,CAAC,GAAGD,EAAa8E,CAAW,EAC5BP,EAAe,iBACfA,EAAe,KACnB,EACOF,EAAmB,OAC1BO,GACIP,EACAtE,EACAG,EACA9C,GAAA,YAAAA,EAAe0H,GACfA,EACA7E,EACAD,CACJ,CAER,CA/CSlD,EAAA+H,GAAA,2BA0DF,SAASlB,GACZ5D,EACA3C,EACAkG,EACAtD,EACAsC,EACApC,EACI,CACJ,IAAIkE,EAEJ,GAAK9B,GAAA,MAAAA,EAAkB,WAGvB,QAAWwC,KAAexC,EAAiB,WAAY,CACnD8B,EAAsBhH,GAAA,YAAAA,EAAe0H,GACrC,IAAMC,EAAU3H,GAAgB4H,GAAW5H,EAAc0H,CAAW,EAC9D7E,EAAM8E,EAAU,CAAC,GAAGzB,EAAWyB,CAAO,EAAIzB,EAC1CzE,EAAWe,GAAmBxC,EAAc0H,CAAW,EACvDT,EAAsBtE,EAAmB,mBAAqBuC,EAAiB,WACjFwC,CACJ,EACMP,EAAkBxE,EAAmB,eAAiByE,GACxDzE,EAAmB,UACnBG,EACAkE,EACAC,EACAS,EACA/E,EAAmB,QACnBA,EAAmB,QACvB,EAMA,GAJAsB,GAAmBtB,EAAoBlB,EAAUzB,EAAc,CAAC,GAAG4C,CAAW,EAAGC,EAAKC,EAAO4E,CAAW,EAExGX,GAAmBC,EAAqBrE,EAAoBG,EAAO4E,EAAa7E,EAAKD,CAAW,EAE5FoE,IAAwB,QAAa,OAAOA,GAAwB,SACpES,GACI9E,EACAC,EACA5C,EACA6C,EACA6E,EACAP,EACArE,CACJ,WACOmE,GAAA,YAAAA,EAAoB,QAASjG,EAAyB,qBAAsB,CAEnF0E,GACI/C,EACA,CAAC,EACDA,EAAmB,UAAU,YAAe,iBAChD,EACA,QACJ,CACJ,CACJ,CAvDgBjD,EAAA6G,GAAA,wCDhgChB,SAASsB,GACLC,EACAC,EACAC,EACAC,EACI,CACJ,GAAIH,IAAgB,WAChB,OAAQC,EAAgB,SAAa,CACjC,IAAK,kCACDC,EAAWC,EAAc,CAAC,CAAC,EAAE,MAAG,iBAAiB,sBAAsB,EAAIF,EAAgBD,CAAW,EACtG,MACJ,IAAK,qCACDE,EAAWC,EAAc,CAAC,CAAC,EAAE,MAAG,iBAAiB,wBAAwB,EACrEF,EAAgBD,CAAW,EAC/B,MACJ,IAAK,qBACL,IAAK,wBACDE,EAAWC,EAAc,CAAC,CAAC,EAAE,MAAG,iBAAiB,gBAAgB,EAAIF,EAAgBD,CAAW,EAChG,MACJ,IAAK,sBACDE,EAAWC,EAAc,CAAC,CAAC,EAAE,MAAG,iBAAiB,iBAAiB,EAAIF,EAAgBD,CAAW,EACjG,MACJ,IAAK,yBACL,IAAK,4BACDE,EAAWC,EAAc,CAAC,CAAC,EAAE,MAAG,iBAAiB,oBAAoB,EAAIF,EAAgBD,CAAW,EACpG,MACJ,IAAK,sBACL,IAAK,yBACDE,EAAWC,EAAc,CAAC,CAAC,EAAE,MAAG,iBAAiB,iBAAiB,EAAIF,EAAgBD,CAAW,EACjG,MACJ,QACIE,EAAWC,EAAc,CAAC,CAAC,EAAE,SAAWF,EAAgBD,CAAW,EACnE,KACR,MAEAE,EAAWC,EAAc,CAAC,CAAC,EAAEH,CAAW,EAAIC,EAAgBD,CAAW,CAE/E,CArCSI,EAAAL,GAAA,wBA8CT,SAASM,GACLH,EACAI,EACAC,EACAJ,EACI,CACJ,QAAWH,KAAeO,EAAW,CACjC,IAAMC,EAAWC,GAAmBP,EAAYF,CAAW,EAC3D,GAAIQ,GAAA,MAAAA,EAAU,SAAU,CACpB,IAAME,EAAOF,EAAS,SAAS,KAAK,CAAC,GAAGL,EAAeH,CAAW,CAAC,EAC7DC,EAAkBU,GAA8BL,EAAUI,CAAI,EAChE,OAAO,UAAU,eAAe,KAAKT,EAAiBD,CAAW,IAC7DG,EAAc,SAAW,EACzBJ,GAAqBC,EAAaC,EAAiBC,EAAYC,CAAa,EAE5ES,GAAeJ,EAAUP,EAAiBD,EAAaE,CAAU,EAG7E,CACJ,CACJ,CApBSE,EAAAC,GAAA,4BA6BT,SAASQ,GACLC,EACAR,EACAC,EACAQ,EACI,CACJV,GAAyBS,EAAYR,EAAUC,EAAU,WAAe,CAAC,CAAC,EAE1EO,EAAW,MAAQ,CAAC,EAEpB,OAAO,KAAKR,EAAS,mBAAgB,GAAG,EAAE,KAAQ,EAAE,QAASU,GAAW,CACpE,IAAMC,EAAeX,EAAS,mBAAgB,GAAG,EAAE,MAASU,CAAM,EAAE,SAC9DE,EAAW,MAAG,oBAAoBD,CAAY,EAGpDH,EAAW,MAAME,CAAM,EAAIG,GAA2BJ,EAASG,EAAU,CAAC,EAAG,YAAY,EAEzFJ,EAAW,MAAQK,GAA2BJ,EAASG,EAAUJ,EAAW,MAAO,YAAY,EAK/FT,GAAyBS,EAAW,MAAOR,EAAUA,EAAS,mBAAgB,GAAG,EAAE,MAASU,CAAM,EAAG,CAACA,CAAM,CAAC,CACjH,CAAC,CACL,CAxBSZ,EAAAS,GAAA,eAiCF,SAASO,GAAyBC,EAA0D,CAC/F,IAAMN,EAAU,IAAIO,GAEdC,EAASR,EAAQ,mBAAmB,cAAW,YAAY,EAEjE,OAAIM,EAAiB,YACjBR,GAAYU,EAAQF,EAAiB,SAAUA,EAAiB,WAAYN,CAAO,EAEhFQ,CACX,CATgBnB,EAAAgB,GAAA,4BDrHT,IAAMI,GAAN,MAAMA,WAAsBC,EAAY,CACpC,YAAYC,EAA8C,CAC7D,IAAMC,EAAkB,CAAC,EACnBC,EAASF,EAAiB,SAAS,mBAAgB,GAAG,EACtDG,EAAc,IAAIC,GAClBC,EAAaC,GAAkB,cAAW,WAAW,EAC3DC,GACIJ,EACAH,EAAiB,SACjBA,EAAiB,WAAWK,EAAW,QAAQ,EAAE,YAAe,YAChE,MACJ,EACA,IAAMG,EAAqB,OAAO,KAAKR,EAAiB,UAAU,EAAE,KAAMS,GACtEA,EAAQ,SAAS,cAAW,YAAY,CAC5C,EACMC,EAA6C,CAC/C,SAAUV,EAAiB,SAC3B,WAAYA,EAAiB,WAAWQ,CAAU,CACtD,EACMG,EAAgB,CAClB,SAAU,cAAW,aACrB,OAAQC,GAAyBF,CAAU,EAC3C,UAAWR,EAAO,qBACtB,EACMW,EAAKC,GAAeH,EAAK,SAAUA,EAAK,SAAS,EACvDV,EAAMY,CAAE,EAAIF,EACZ,MACIX,EAAiB,SACjBA,EAAiB,WACjBa,EACAZ,EACA,wBAAqB,GACrBE,EACAH,EAAiB,MACrB,CACJ,CACJ,EApC+Ce,EAAAjB,GAAA,iBAAxC,IAAMkB,GAANlB,GGHP,IAAAmB,GAAkC,sDAelC,IAAAC,GAQO,SAUP,SAASC,GACLC,EACAC,EACAC,EACAC,EACAC,EACI,CAEJ,GAAID,EAAe,cAAgB,GAAM,CAErC,IAAIE,EACAL,EAAK,UACLK,EAAuB,kBAAe,2BAC/BL,EAAK,WAAW,WAAW,kBAAe,eAAe,EAChEK,EAAuB,kBAAe,kBAC/BL,EAAK,WAAW,WAAW,kBAAe,SAAS,EAC1DK,EAAuB,kBAAe,cAEtCA,EAAuB,kBAAe,wBAE1C,IAAMC,EAAYH,EAAe,OAAkB,QAAQ,IAAK,IAAI,EAC9DI,EAAcC,GAAwBL,EAA0CH,EAAK,UAAU,EAC/FS,EAASN,EAAe,MAAM,MAAM,GAAG,eAAY,GAAG,EAAE,CAAC,EACzDO,EAAcC,GAAoBR,EAAe,MAAgB,EACjES,EAAoBX,EAAkB,WAAW,GAAGQ,CAAM,KAAKC,CAAW,EAAE,EAAI,CAClF,KAAMG,GAAuBR,EAAsBS,GAAWR,CAAQ,CAAC,EACvE,YAAAC,CACJ,EACM,CAAE,IAAAQ,EAAK,GAAAC,CAAG,EAAIC,GAAad,EAAe,OAAkB,EAAI,EACtES,EAAiB,aAAU,aAAa,EAAIR,EAC5CQ,EAAiB,aAAU,QAAQ,EAAIM,GAAkBf,CAAc,EAGvES,EAAiB,aAAU,IAAI,EAAI,CAAC,EAChCT,EAAe,iBAAc,cAAc,GAC3CS,EAAiB,aAAU,IAAI,EAAE,KAAK,CAClC,KAAM,iBAAc,eACpB,MAAOT,EAAe,iBAAc,cAAc,CACtD,CAAC,EAELS,EAAiB,aAAU,IAAI,EAAE,KAAK,CAAE,KAAM,iBAAc,OAAQ,MAAOG,CAAI,CAAC,EAE5EC,IACAJ,EAAiB,aAAU,MAAM,EAAII,GAEzCJ,EAAiB,aAAU,cAAc,EAAIT,EAAe,MAC5D,IAAMgB,EAASC,GAAsBf,EAAsBS,GAAWR,CAAQ,EAAGN,EAAK,SAAS,EAC/FmB,EAAO,aAAU,cAAc,EAAI,GAAGjB,CAAY,IAAIE,CAAW,EACrE,CACJ,CAjDSiB,EAAAtB,GAAA,2BA2DT,SAASuB,GACLtB,EACAuB,EACAC,EACApB,EACF,CAtGF,IAAAqB,EAuGI,IAAMC,EAAaH,EAAS,WACtBpB,EAAiBoB,EAAS,eAChC,IAAIE,EAAAtB,EAAe,SAAf,MAAAsB,EAA2B,MAAU,CACrC,IAAME,EAAQ,IAAIC,GAAU,gBAAc5B,EAAK,eAAe,CAAC,IAC/DG,EAAe,OAAU,MAAWA,EAAe,OAAU,MAAS,QAAQwB,EAAO,GAAG,CAC5F,CACA,IAAME,EAAYC,GAA6B3B,CAAc,EAC7D,GAAI0B,EAAW,CACX,IAAME,EAAc/B,EAAK,UAAU,YAAY0B,CAAU,EAAiB,WAC1EK,EAAWF,CAAS,EAAI,CACpB,KAAMG,EAAyBR,EAC/B,YAAahB,GAAwBL,EAAgBH,EAAK,UAAU,CACxE,EACA+B,EAAWF,CAAS,EAAE,aAAU,cAAc,EAAI1B,GAAA,YAAAA,EAAgB,MAClE4B,EAAWF,CAAS,EAAE,aAAU,cAAc,EAAI,GAAGN,EAAS,YAAe,IAAInB,CAAW,GAC5F2B,EAAWF,CAAS,EAAE,aAAU,aAAa,EAAIzB,EACjD2B,EAAWF,CAAS,EAAE,aAAU,QAAQ,EAAIX,GAAkBf,CAAc,EAC5E8B,GAAmB9B,EAAgB4B,EAAYF,CAAS,CAC5D,CACJ,CAzBSR,EAAAC,GAAA,6BA+CF,SAASY,GACZlC,EACAwB,EAA+B,kBAAe,YAC1C,CAGJ,GAAM,CAAE,QAAAW,EAAS,aAAAjC,CAAa,EAAIkC,GAC9BpC,EAAK,UACLA,EAAK,mBACLA,EAAK,WACLA,EAAK,UACT,EAEA,GAAI,CAACA,EAAK,mBACN,OAEJ,IAAI,EAAI,EACRA,EAAK,mBAAmB,QAASG,GAAmB,CAChD,IACKA,EAAe,QAAU,qBAAkB,oBACxCA,EAAe,QAAU,qBAAkB,qCAC9CA,EAAe,SAAW,IAAQA,EAAe,cAAgB,IAElEJ,GAAwBC,EAAMmC,EAASjC,EAAcC,EAAgB,CAAC,MACnE,CACH,IAAMoB,EAAW,CAAE,eAAApB,EAAgB,WAAYH,EAAK,WAAY,aAAAE,CAAa,EACvEmC,EACFlC,EAAe,QAAU,qBAAkB,mBACrC,GAAGqB,CAAoB,SACvBA,EACVF,GAA0BtB,EAAMuB,EAAUc,EAAkB,CAAC,CACjE,CACA,GACJ,CAAC,CACL,CAlCgBhB,EAAAa,GAAA,4BA4CT,SAASI,GACZC,EACAC,EACAC,EACAC,EAC6B,CAjMjC,IAAAjB,EAAAkB,EAkMI,IAAIC,EACJ,GAAIH,GACA,QAAWI,KAAKN,EACZ,KACII,GAAAlB,EAAAc,EAAMM,CAAC,EAAE,UAAT,YAAApB,EAAkB,WAAlB,YAAAkB,EAA4B,aAAcF,EAAU,OACnDF,EAAMM,CAAC,EAAE,OAASL,GACdA,IAAa,MAAG,oBAAsBD,EAAMM,CAAC,EAAE,OAAS,MAAG,4BAClE,CACED,EAASL,EAAMM,CAAC,EAChB,KACJ,EAGR,OAAOD,CACX,CApBgBvB,EAAAiB,GAAA,cA4BT,SAASQ,GACZC,EACAC,EACkD,CAClD,IAAIC,EACEC,EAAkBH,EAAU,WAAW,gBAAa,KAAK,EAC/D,OAAIC,EAAmB,eAAiB,gBAAa,sBACjDC,EAAsB,kBAAe,aAErC,OAAOC,EAAgB,MACvBA,EAAgB,KAAO,GAAGlB,CAAsB,GAAG,kBAAe,YAAY,GAC9E,OAAOe,EAAU,YAAY,kBAAe,KAAK,EACjD,OAAOA,EAAU,YAAY,kBAAe,WAAW,EACvD,OAAOA,EAAU,YAAY,kBAAe,WAAW,EACvD,OAAOA,EAAU,YAAY,kBAAe,gBAAgB,GACrDC,EAAmB,eAAiB,gBAAa,yBACxDC,EAAsB,kBAAe,MAErC,OAAOC,EAAgB,MACvBA,EAAgB,KAAO,GAAGlB,CAAsB,GAAG,kBAAe,KAAK,GACtEe,EAAU,YAAYE,CAAmB,EAAiB,WAAW,gBAAa,cAAc,EAC7F,aAAU,MACd,EAAI,GACJ,OAAOF,EAAU,YAAY,kBAAe,YAAY,EACxDA,EAAU,WAAW,gBAAa,WAAW,EAAE,aAAU,MAAM,EAAI,IAEhEE,CACX,CA3BgB5B,EAAAyB,GAAA,+BCrNhB,IAAAK,EAgBO,SAIPC,GAAkC,sDAmBlC,IAAMC,GAA4D,CAAC,YAAa,QAAS,OAAO,EASzF,SAASC,GACZC,EACAC,EACAC,EACAC,EACU,CAYV,GAXKA,IACDA,EAA4BF,EAAU,YAAY,gBAClDE,EAA0B,qBAAuB,GACjDA,EAA0B,WAAa,CAAC,GAExCH,IACAG,EAA0B,YAAU,cAAc,EAAIC,GAClDJ,EAAW,mBACX,qBAAkB,eACtB,GAEAE,EAA2B,CAC3B,IAAI,EAAI,EACRA,GAAA,MAAAA,EAA2B,QAASG,GAAmB,CAtE/D,IAAAC,EAAAC,EAuEY,IAAIC,EAAcH,EAAe,MAC3BI,EAAkB,mBAAqBC,GAAWL,EAAe,KAAK,EACxEA,EAAe,OAAS,iBACxBG,EAAcG,GAAwBN,EAAgBL,CAAU,GAEpEG,EAA0B,WAAWM,CAAe,EAAI,CACpD,KAAMG,EAAyBH,CACnC,EACAN,EAA0B,WAAWM,CAAe,EAAE,YAAU,aAAa,EAAI,EACjF,IAAMI,EAAWC,GAAkBT,CAAc,EACjDJ,EAAU,YAAYQ,CAAe,EAAI,CACrC,KAAM,SACN,WAAY,CAAC,EACb,YAAAD,EACA,qBAAsB,GACtB,GAAIK,GAAY,CAAE,SAAAA,CAAS,CAC/B,EACAZ,EAAU,YAAYQ,CAAe,EAAE,YAAU,UAAU,EAAI,GAC/DR,EAAU,YAAYQ,CAAe,EAAE,YAAU,IAAI,EAAI,CACrD,CAAE,KAAM,gBAAc,MAAO,MAAO,GAAGJ,EAAe,KAAK,EAAG,CAClE,IACIC,EAAAD,EAAe,UAAf,YAAAC,EAAwB,mBAAmB,QAAQ,MAAO,GAC1DL,EAAU,YAAYQ,CAAe,EAAE,YAAU,MAAM,EAAIJ,EAAe,QAAQ,mBAC7E,MAAM,GAAG,EAAE,CAAC,EACZ,MAAM,GAAG,EAAE,CAAC,GACVE,EAAAF,EAAe,UAAf,MAAAE,EAAwB,qBAC/BN,EAAU,YAAYQ,CAAe,EAAE,YAAU,MAAM,EACnDJ,EAAe,QAAQ,mBAAmB,MAAM,GAAG,EAAE,CAAC,GAG9DJ,EAAU,YAAYQ,CAAe,EAAE,YAAU,cAAc,EAAIJ,GAAA,YAAAA,EAAgB,KACnFJ,EAAU,YAAYQ,CAAe,EAAE,YAAU,cAAc,EAAI,GAC/DN,EAA0B,YAAU,cAAc,CACtD,IAAI,CAAC,GACL,GACJ,EACJ,CACA,OAAOA,CACX,CA1DgBY,EAAAhB,GAAA,sBA4DhB,SAASiB,GACLf,EACAgB,EACAC,EACAC,EACAnB,EACF,CACEC,EAAU,YAAYgB,CAAkB,EAAI,KAAK,MAAM,KAAK,UAAUhB,EAAU,YAAY,OAAU,CAAC,EACvG,IAAMmB,EAAUnB,EAAU,YAAYgB,CAAkB,EACxDG,EAAQ,WAAa,CAAC,EACtBA,EAAQ,qBAAuB,GAC/B,IAAMC,EAAkBH,EAAYC,GAAA,YAAAA,EAAkB,MAAM,GAAG,cAAY,KAAK,EAAE,EAClF,GAAIE,GAAmBA,EAAgB,QAAS,CAC5C,IAAIC,EAAI,EACRD,EAAgB,QAAQ,QAASE,GAAiB,CAC9C,IAAMC,EAAmBd,GAAW,GAAG,iBAAe,kBAAkB,IAAIa,EAAa,MAAM,GAAG,EAC5Ff,EAAciB,GAAwBF,EAAwCvB,CAAU,EACxF0B,EAASH,EAAa,MAAM,MAAM,GAAG,cAAY,GAAG,EAAE,CAAC,EACvDI,EAAUP,EAAQ,WAAW,GAAGM,CAAM,KAAKH,EAAa,MAAM,EAAE,EAAI,CACtE,KAAMX,EAAyBY,EAC/B,YAAAhB,CACJ,EAEAmB,EAAO,YAAU,aAAa,EAAIL,EAClCK,EAAO,YAAU,cAAc,EAAIJ,EAAa,MAChDI,EAAO,YAAU,cAAc,EAAI,IAAIJ,EAAa,kBAAkB,GAEtEtB,EAAU,YAAYuB,CAAgB,EAAI,KAAK,MAC3C,KAAK,UAAUvB,EAAU,YAAY,iBAAe,iBAAiB,CAAC,CAC1E,EACCA,EAAU,YAAYuB,CAAgB,EAAiB,WAAa,CAAC,EACtEvB,EAAU,YAAYuB,CAAgB,EAAE,YAAU,cAAc,EAAID,EAAa,mBACjFD,GACJ,CAAC,CACL,CACJ,CAnCSP,EAAAC,GAAA,iBA6CT,SAASY,GACLC,EACAC,EACAC,EACAC,EACmD,CAjKvD,IAAA1B,EAkKI,IAAI2B,EAAuBC,EAA6Bf,EACxD,OAAIU,IACIE,IAAY,UACZG,EAAsBL,EAAkB,KAAMM,GACnCA,EAAI,MAAS,QAAQ,OAAO,EAAI,EAC1C,EACMJ,IAAY,YACnBG,EAAsBL,EAAkB,KAAMM,GACnCA,EAAI,MAAS,QAAQ,YAAU,QAAQ,EAAI,EACrD,EAEGH,EACAE,EAAsBL,EAAkB,KAAMO,GAAMA,EAAE,MAAS,QAAQJ,CAAiB,EAAI,EAAE,EAE9FE,EAAsBL,EAAkB,CAAC,EAGjDI,EAAgBI,GAAkBH,GAAA,YAAAA,EAAsB,KAAQ,GAC5D5B,EAAA4B,GAAA,YAAAA,EAAsB,UAAtB,MAAA5B,EAAkC,mBAClCa,EAAmB,IAAIW,CAAS,IAAII,EAAoB,QAAW,mBAAmB,MAAMJ,CAAS,EAAE,CAAC,CAAC,GAClGG,IACPd,EAAmB,IAAIW,CAAS,IAAMG,EAAc,QAAQ,KAAM,cAAY,IAG/E,CAAE,cAAAA,EAAe,iBAAAd,CAAiB,CAC7C,CA/BSJ,EAAAa,GAAA,6BAqCT,SAASU,GACLR,EACAS,EACAC,EACAT,EACuE,CACvE,IAAME,EAAgB,YAChBQ,EAA2B,IAAIX,CAAS,KAAKS,CAAc,GAC7DG,EAEJ,OAAIF,EAAc,MACdE,EAAaF,EAAc,MAE3BE,EAAa,eAAeX,CAAO,IAEhC,CAAE,cAAAE,EAAe,iBAAkBQ,EAA0B,WAAAC,CAAW,CACnF,CAhBS3B,EAAAuB,GAAA,0BA8BT,SAASK,GACLJ,EACAK,EACAC,EACAd,EACAC,EACqF,CArOzF,IAAA1B,EAsOI,IAAIwB,EACAgB,EACEC,EAAa,eACbC,EAAuBT,GAAA,YAAAA,EAAgB,MAAM,GAAG,cAAY,KAAK,GACjEC,EAAgBQ,GAAwBJ,EAAcI,CAAoB,EAChF,GAAI,CAACR,EACD,MAAO,CAAE,cAAe,OAAW,iBAAkB,OAAW,UAAAV,EAAW,MAAO,SAASC,CAAO,GAAI,EAK1G,GAHAe,EAAQN,EAAc,KACtBV,EAAYU,EAAc,mBAAmB,MAAM,sBAAoB,EAAE,CAAC,EAEtEQ,EAAqB,WAAW,qBAAqB,EAAG,CACxD,GAAM,CAAE,cAAAf,EAAe,iBAAAd,CAAiB,EAAIS,GACxCY,EAAc,eACdV,EACAC,EACAC,CACJ,EACA,OAAAc,EAAQA,GAAS,SAASf,CAAO,IAC1B,CAAE,cAAAE,EAAe,iBAAAd,EAAkB,UAAAW,EAAW,MAAAgB,CAAM,CAC/D,SAAWE,EAAqB,WAAW,8BAA8B,EAAG,CACxE,GAAI,CAAE,cAAAf,EAAe,iBAAAd,CAAiB,EAAIS,IACtCtB,EAAAkC,EAAc,sBAAd,YAAAlC,EAAmC,eACnCwB,EACAC,EACAC,CACJ,EACA,OAAKC,IACDA,EAAgBc,EAChB5B,EAAmB,IAAIW,CAAS,IAAMG,EAAc,QAAQ,KAAM,cAAY,GAElFa,EAAQA,GAAS,SAASf,CAAO,IAC1B,CAAE,cAAAE,EAAe,iBAAAd,EAAkB,UAAAW,EAAW,MAAAgB,CAAM,CAC/D,SAAWE,EAAqB,WAAW,kBAAkB,EAAG,CAC5D,IAAMf,EAAgBc,EAChB5B,EAAmB,IAAIW,CAAS,KAAK,qBAAkB,QAAQ,GACrE,OAAAgB,EAAQA,GAAS,eAAef,CAAO,IAChC,CAAE,cAAAE,EAAe,iBAAAd,EAAkB,UAAAW,EAAW,MAAAgB,CAAM,CAC/D,SAAWE,EAAqB,WAAW,UAAU,EAAG,CACpD,IAAMf,EAAgBc,EAChB5B,EAAmB,IAAIW,CAAS,KAAKS,CAAc,GACzD,OAAAO,EAAQA,GAAS,eAAef,CAAO,IAChC,CAAE,cAAAE,EAAe,iBAAAd,EAAkB,UAAAW,EAAW,MAAAgB,CAAM,CAC/D,SAAWE,EAAqB,WAAW,OAAO,EAAG,CACjD,GAAM,CAAE,cAAAf,EAAe,iBAAAd,EAAkB,WAAAuB,CAAW,EAAIJ,GACpDR,EACAS,EACAC,EACAT,CACJ,EACA,MAAO,CAAE,cAAAE,EAAe,iBAAAd,EAAkB,UAAAW,EAAW,MAAOY,CAAW,CAC3E,CACA,MAAO,CAAE,cAAe,OAAW,iBAAkB,OAAW,UAAAZ,EAAW,MAAO,SAASC,CAAO,GAAI,CAC1G,CA5DShB,EAAA4B,GAAA,yBAoET,SAASM,GAAgBhD,EAAuBiD,EAA6B/B,EAA0BD,EAAa,CAChH,IAAMiC,EAAYlD,EAAU,YAAY,iBAAe,YAAY,EAanE,GAZAA,EAAU,YAAY,iBAAe,QAAQ,EAAI,KAAK,MAAM,KAAK,UAAUkD,CAAS,CAAC,EACrF,OAAOlD,EAAU,YAAY,iBAAe,QAAQ,EAAE,YAAU,UAAU,EACtEkB,IACAlB,EAAU,YAAY,iBAAe,QAAQ,EAAE,YAAU,cAAc,EAAIkB,GAE9ElB,EAAU,YAAY,iBAAe,QAAQ,EAAiB,WAAW,eAAe,YAAU,MAAM,EAAI,GAE7GkD,EAAU,WAAW,eAAe,YAAU,MAAM,EAAI,GACxDA,EAAU,qBAAuB,GACjCA,EAAU,YAAc,uBACxBA,EAAU,MAAQ,QAClBA,EAAU,KAAO,GAAGvC,CAAsB,GAAG,iBAAe,QAAQ,GAChEsC,EAAqB,CACrB,IAAME,EAAiBF,EAAoB,MAAM,iBAAe,EAAE,CAAC,EAC7DG,EAAYnC,EAAYkC,CAAc,EAAE,mBAAmB,MAAM,GAAG,EAC1ED,EAAU,YAAU,cAAc,EAAI,IAAIE,EAAU,CAAC,CAAC,KAAKA,EAAU,CAAC,CAAC,EAC3E,CACAF,EAAU,YAAU,YAAY,EAAI,eAAa,SACjDA,EAAU,YAAU,GAAG,EAAI,UAC3BA,EAAU,YAAU,IAAI,EAAI,CAAC,CAAE,KAAM,gBAAc,IAAK,MAAO,SAAU,CAAC,CAC9E,CAtBSpC,EAAAkC,GAAA,mBAgCT,SAASK,GACLrD,EACAsD,EACAvD,EACA6C,EACAW,EACAC,EACF,CA1UF,IAAAnD,EAAAC,EAAAmD,EAAAC,EAAAC,EAAAC,EA2UI,IAAM3C,EAAclB,GAAA,YAAAA,EAAY,YAAY,GAEtCkD,GAAsBQ,GAAAnD,GAAAD,EAAAiD,GAAA,YAAAA,EAAa,KAAb,YAAAjD,EAAkB,UAAlB,YAAAC,EAA+B,KAA/B,YAAAmD,EAAoC,YAAU,gBACpE,CAAE,iBAAAvC,CAAiB,EAAIwB,GAAsBO,EAAqBhC,EAAa2B,EAAoB,SAAS,EAClHI,GAAgBhD,EAAWiD,EAAqB/B,EAAkBD,CAAW,EAE7E,IAAMD,EAAqB,oBAC1BhB,EAAU,YAAY,iBAAe,gBAAgB,EAAiB,WAAW,QAAQ,KACtFW,EAAyBK,EAE7BD,GAAcf,EAAWgB,EAAoBC,EAAaC,EAAkBnB,CAAU,EAGtF,GAAM,CAAE,cAAe8D,EAAoB,iBAAkBC,CAAO,EAAIpB,IACpEkB,GAAAD,GAAAD,EAAAJ,GAAA,YAAAA,EAAa,KAAb,YAAAI,EAAkB,YAAlB,YAAAC,EAAiC,KAAjC,YAAAC,EAAsC,YAAU,gBAChD3C,EACA2B,EACA,WACJ,EACMmB,EAAkB/D,EAAU,YAAYwD,CAAmB,EAC7DK,GAAsBN,GACtBQ,EAAgB,WAAW,QAAQ,KAAU,GAAGpD,CAAsB,GAAG,iBAAe,SAAS,GAEjGoD,EAAgB,WAAW,QAAa,CACpC,KAAMpD,EAAyB,iBAAe,SAClD,EACAoD,EAAgB,WAAW,eAAe,YAAU,MAAM,EAAI,IAE9DA,EAAgB,WAAa,CAAC,EAElC,IAAMC,EAAYhE,EAAU,YAAY,iBAAe,YAAY,EACnEA,EAAU,YAAY,iBAAe,QAAQ,EAAI,KAAK,MAAM,KAAK,UAAUgE,CAAS,CAAC,EACrF,OAAOhE,EAAU,YAAY,iBAAe,QAAQ,EAAE,YAAU,UAAU,EAC1EgE,EAAU,qBAAuB,GACjCA,EAAU,YAAc,yBACxBA,EAAU,MAAQ,QACdH,GACA,OAAOG,EAAU,WACjBA,EAAU,KAAO,GAAGrD,CAAsB,GAAG,iBAAe,QAAQ,IAC5D4C,IACRS,EAAU,WAAa,CAAC,GAE5BA,EAAU,YAAU,YAAY,EAAI,eAAa,SAEjD,IAAIC,EAAwBd,EAO5B,GANIU,GAAsBA,EAAmB,QAAQ,YAAU,QAAQ,EAAI,IACvEI,EAAiBJ,EAAmB,MAAM,GAAG,EAAE,CAAC,EAChDV,EAAiBG,EAAW,CAAC,EAAE,UAAa,CAAC,EAAE,eAAe,MAAM,iBAAe,EAAE,CAAC,GAC/EC,IACPU,EAAiBd,EAAiBI,EAAmB,MAAM,iBAAe,EAAE,CAAC,GAE7EU,EAAgB,CAChB,IAAMC,EAAyC,CAC3C,UAAAlE,EACA,mBAAoBD,GAAA,YAAAA,EAAY,YAAY,GAAGkE,GAC/C,WAAAlE,EACA,gBAAiB6C,EAAmB,WACpC,WAAY,iBAAe,SAC/B,EACAuB,GAAyBD,EAAiB,iBAAe,eAAe,EACpEJ,IACA9D,EAAU,YAAY,iBAAe,QAAQ,EAAE,YAAU,cAAc,EAAI8D,GAE/E,IAAMV,GAAYnC,EAAYkC,CAAc,EAAE,mBAAmB,MAAM,GAAG,EAC1Ea,EAAU,YAAU,cAAc,EAAI,IAAIZ,GAAU,CAAC,CAAC,KAAKA,GAAU,CAAC,CAAC,GACvEY,EAAU,YAAU,GAAG,EAAI,YAC3BA,EAAU,YAAU,IAAI,EAAI,CAAC,CAAE,KAAM,gBAAc,IAAK,MAAO,WAAY,CAAC,CAChF,CACJ,CA5ESlD,EAAAuC,GAAA,eA8FT,SAASe,GAAwBC,EAAkCpD,EAAqB,CACpF,IAAMqD,EAAa,GAAG,iBAAe,WAAW,IAAID,EAAgB,OAAO,IAC3EA,EAAgB,UAAU,YAAYC,CAAU,EAAI,KAAK,MACrD,KAAK,UAAUD,EAAgB,UAAU,YAAY,iBAAe,WAAW,CAAC,CACpF,EACA,OAAOA,EAAgB,UAAU,YAAYC,CAAU,EAAE,YAAU,UAAU,EAC7ED,EAAgB,UAAU,YAAYC,CAAU,EAAE,YAAU,cAAc,EAAID,EAAgB,iBAC1FA,EAAgB,cAChBA,EAAgB,UAAU,YAAYC,CAAU,EAAE,mBAAwBD,EAAgB,aAG9F,IAAME,EAAe,GAAG,iBAAe,gBAAgB,IAAIF,EAAgB,OAAO,IAClFA,EAAgB,UAAU,YAAYE,CAAY,EAAI,KAAK,MACvD,KAAK,UAAUF,EAAgB,UAAU,YAAY,iBAAe,gBAAgB,CAAC,CACzF,EACAA,EAAgB,UAAU,YAAYC,CAAU,EAC5C,WACF,QAAQ,KAAO,GAAG3D,CAAsB,GAAG4D,CAAY,GAEzD,IAAMvD,EAAqB,GAAG,iBAAe,OAAO,IAAIqD,EAAgB,OAAO,IAC/E,OAAAtD,GACIsD,EAAgB,UAChBrD,EACAC,EACAoD,EAAgB,iBAChBA,EAAgB,gBACpB,EACAA,EAAgB,UAAU,YAAYE,CAAY,EAAE,WAAc,eAAa,OAAO,EAClF,KACA,GAAG5D,CAAsB,GAAGK,CAAkB,GAE3CsD,CACX,CAhCSxD,EAAAsD,GAAA,2BA2CT,SAASI,GACLH,EACAI,EACAzE,EACA0E,EACA5C,EACAe,EACF,CACE,IAAMyB,EAAaF,GAAwBC,EAAiBI,CAAa,EACxEzE,EAAU,YAAYsE,CAAU,EAAiB,WAAW,eAAe,YAAU,MAAM,EAAI,GAC/FtE,EAAU,YAAYsE,CAAU,EAAiB,WAAW,MAAM,YAAU,MAAM,EAAI,GACtFtE,EAAU,YAAYsE,CAAU,EAAiB,WAAW,UAAU,YAAU,MAAM,EAAI,GAC3F,IAAMK,EAAe,oBAAoB7C,CAAO,IAChD4C,EAAgB,WAAW5C,CAAO,EAAI,CAClC,KAAM,GAAGnB,CAAsB,GAAG2D,CAAU,GAC5C,YAAazB,GAAgB8B,EAC7B,MAAOA,CACX,CACJ,CAlBS7D,EAAA0D,GAAA,gBAwBT,SAASI,GAAsBC,EAA6C,CACxE,OAAI,OAAOA,GAAe,SACf,CACH,GAAGA,EACH,WAAY,CAAC,CACjB,EAEG,CACH,WAAY,CAAC,CACjB,CACJ,CAVS/D,EAAA8D,GAAA,yBAoBT,SAASE,GACLT,EACAK,EACA1C,EACAuB,EACAX,EACI,CA9fR,IAAAvC,EA+fI,IAAM0E,EAAU,GAAG,iBAAe,WAAW,IAAIV,EAAgB,OAAO,IAClEW,EAAS,GAAG,iBAAe,eAAe,KAAKX,EAAgB,OAAO,GACtEY,EAAcC,GAChB,iBAAe,YACfb,EAAgB,QAChBA,EAAgB,SACpB,EACA,OAAOY,EAAY,YAAU,UAAU,EACvCA,EAAY,YAAU,cAAc,EAAIZ,EAAgB,iBACpDA,EAAgB,cAChBY,EAAY,mBAAwBZ,EAAgB,aAEpDA,EAAgB,YAChBY,EAAY,UAAeZ,EAAgB,WAG/Cc,GAAiBF,EAAY,WAAW,QAAuB,iBAAe,QAASD,CAAM,EAC7F,IAAMnC,EAAQ,oBAAoBwB,EAAgB,OAAO,IACzDK,EAAgB,WAAWL,EAAgB,OAAO,EAAI,CAClD,KAAM,GAAG1D,CAAsB,GAAGoE,CAAO,GACzC,YAAaV,EAAgB,OAASxB,EACtC,MAAAA,CACJ,EACAsC,GAAiBF,EAAY,WAAW,QAAuBD,CAAM,EACrEC,EAAY,WAAW,eAAe,YAAU,MAAM,EAAI,GAC1DA,EAAY,WAAW,MAAM,YAAU,MAAM,EAAI,GACjDA,EAAY,WAAW,UAAU,YAAU,MAAM,EAAI,GACrD,IAAMhB,GAAiBjC,GAAA,YAAAA,EAAe,MAAM,KAAK,KAAMuB,EAAmB,MAAM,iBAAe,EAAE,CAAC,EAC5FW,EAAyC,CAC3C,UAAWG,EAAgB,UAC3B,oBAAoBhE,EAAAgE,EAAgB,mBAAhB,YAAAhE,EAAkC,YAAY,GAC9D4D,GAEJ,WAAYI,EAAgB,iBAC5B,gBAAiBzB,EAAmB,WACpC,WAAYoC,EACZ,UAAWC,EAAY,SAC3B,EACIG,EAA+B,iBAAe,gBAElD,GAAIH,EAAY,YAAiB,OAAW,CACxC,GAAM,CAAE,YAAAI,CAAY,EAAIhB,EAAgB,UAExCe,EAAuB,iBAAe,qBACtC,IAAME,EAAoBD,EAAY,iBAAe,eAAe,EACpEA,EAAYD,CAAoB,EAAIR,GAAsBU,CAAiB,EAC3E,IAAMC,EAAY,iBAAe,2BAC3BC,EAAoB,GAAG,iBAAe,qBAAqB,GACjEH,EAAYE,CAAS,EAAIX,GAAsBS,EAAYG,CAAiB,CAAC,CACjF,CACArB,GAAyBD,EAAiBkB,CAAoB,CAClE,CA1DStE,EAAAgE,GAAA,oBAmET,SAASW,GAAcf,EAA6B5C,EAAiBD,EAAmB6D,EAAc,CAClGhB,EAAgB,WAAW5C,CAAO,EAAE,YAAU,UAAU,EAAI,GAC5D4C,EAAgB,WAAW5C,CAAO,EAAE,YAAU,cAAc,EAAID,EAC1D,IAAIA,CAAS,KAAK6D,EAAK,YAAU,cAAc,CAAC,GAChD,OACNhB,EAAgB,WAAW5C,CAAO,EAAE,YAAU,YAAY,EAAI,eAAa,SAC3E4C,EAAgB,WAAW5C,CAAO,EAAE,YAAU,GAAG,EAAIA,EACrD4C,EAAgB,WAAW5C,CAAO,EAAE,YAAU,IAAI,EAAI,CAAC,CAAE,KAAM,gBAAc,IAAK,MAAOA,CAAQ,CAAC,CACtG,CARShB,EAAA2E,GAAA,iBAkBT,SAASE,GACLC,EACAF,EACA9C,EACA7C,EACU,CAllBd,IAAAM,EAmlBI,IAAIwF,EAAmB9F,EACnB+F,EAAgBF,EACpB,OAAIF,EAAK,WAAgBA,EAAK,YAAiBE,EAAU,OACrDE,GAAgBzF,EAAAuC,EAAmB,aAAnB,YAAAvC,EAA+B,WAAW,KAAM0F,GACrDA,EAAG,OAASL,EAAK,WAE5BG,EAAmBC,EAAc,YAE9BD,CACX,CAfS/E,EAAA6E,GAAA,uBAsBT,SAASK,GAAqBnB,EAAwBoB,EAA2B,CAC7E,GAAM,CAAE,WAAAC,CAAW,EAAIrB,EACvB,GAAIqB,EACA,QAAW7E,KAAK6E,EACRA,EAAW7E,CAAC,EAAE,eAAoB,eAAa,UAAY4E,EAAgB,QAAQ5E,CAAC,IAAM,IAC1F,OAAO6E,EAAW7E,CAAC,CAInC,CATSP,EAAAkF,GAAA,wBAsBT,SAASG,GACLnE,EACA0C,EACA0B,EACAxD,EACAyD,EACAC,EACAZ,EACF,CACE,IAAI1D,GAAA,YAAAA,EAAe,QAAQ,gBAAc,WAAY,GAEjD8C,GACIsB,EACA1B,EACA1C,EACAoE,EAAsB,iBACtBxD,CACJ,EACI8C,EAAK,YAAiB,QAEtBM,GACII,EAAsB,UAAU,YAC5B,GAAG,iBAAe,WAAW,IAAIV,EAAK,GAAM,GAChD,EACA,CAAC,SAAS,CACd,WAEG1D,GAAA,YAAAA,EAAe,QAAQ,UAAW,GAEzCwC,GACI4B,EACAE,EACAF,EAAsB,UACtB1B,EACA0B,EAAsB,QACtBA,EAAsB,KAC1B,UACOV,EAAK,SAAa,CACzB,IAAMf,EAAee,EAAK,OAAY,qBAAqBU,EAAsB,OAAO,IACxF1B,EAAgB,WAAW0B,EAAsB,OAAO,EAAI,CACxD,YAAaA,EAAsB,OAASzB,EAC5C,MAAOA,EAEP,KAAM,GAAGhE,CAAsB,GAAG,iBAAe,kBAAkB,EACvE,CACJ,KAAO,CACH,IAAMgE,EAAe,cAAcyB,EAAsB,OAAO,IAChE1B,EAAgB,WAAW0B,EAAsB,OAAO,EAAI,CACxD,YAAaA,EAAsB,OAASzB,EAC5C,MAAOA,EAEP,KAAM,GAAGhE,CAAsB,GAAG,iBAAe,WAAW,EAChE,CACJ,CACJ,CAtDSG,EAAAqF,GAAA,kBAkET,SAASI,GACLvG,EACAsD,EACAvD,EACA6F,EACAhD,EACAyD,EACA7C,EACF,CAnsBF,IAAAnD,EAosBI,IAAM0D,EAAkB/D,EAAU,YAAYwD,CAAmB,EACjEO,EAAgB,WAAa,CACzB,eAAgBA,EAAgB,WAAW,eAC3C,YAAaA,EAAgB,WAAW,YACxC,MAAOA,EAAgB,WAAW,KACtC,EACA,IAAMW,EAAkB1E,EAAU,YAAY,iBAC9C,QAAW0F,KAAQpC,EAAY,CAC3B,GAAI,CAACoC,EAAK,YAAU,GAAG,EACnB,SAEJ,IAAIc,EACEX,EAAmBF,GAAoBC,EAAWF,EAAM9C,EAAoB7C,CAAU,EACtFuG,EAAgBT,GAAA,YAAAA,EAAkB,YAAY,GAC9C,CAAE,cAAA7D,EAAe,iBAAAd,EAAkB,UAAAW,EAAW,MAAAgB,CAAM,EAAIH,GAC1DgD,GAAA,YAAAA,EAAO,YAAU,gBACjBY,EACA1D,EACA8C,EAAK,YAAU,GAAG,CACtB,EACIA,EAAK,YACLc,GAAcnG,EAAAN,EAAW,qBAAqB,KAAM0G,GACzCA,EAAG,iBAAmB5E,CAChC,IAFa,YAAAxB,EAEV,MAER,IAAMyB,EAAUrB,GAAWiF,EAAK,YAAU,GAAG,CAAC,EACxCU,EAAyC,CAC3C,QAAAtE,EACA,UAAA9B,EACA,iBAAAkB,EACA,YAAAsF,EACA,iBAAAX,EACA,MAAAhD,EACA,UAAW6C,EAAK,SACpB,EACAS,GACInE,EACA0C,EACA0B,EACAxD,EACAyD,EACAC,EACAZ,CACJ,EACAD,GAAcf,EAAiB5C,EAASD,EAAW6D,CAAI,CAC3D,CACJ,CAvDS5E,EAAAyF,GAAA,cAkET,SAASG,GACL1G,EACAD,EACA6C,EACAW,EACA8C,EACAM,EACAnD,EACF,CArwBF,IAAAnD,EAAAC,EAuwBI,IAAMyD,EAAkB/D,EAAU,YAAYwD,CAAmB,EAC3D,CAAE,cAAAxB,EAAe,iBAAAd,EAAkB,UAAAW,CAAU,EAAIa,GACnDa,EACAxD,EAAW,YAAY,GACvB6C,EACA,OACA,gBAAc,QAClB,EACA,GAAIZ,EAAe,CACf,IAAMiC,EAAiBjC,EAAc,MAAM,GAAG,EAAE,CAAC,EAC3C4E,EAAyB,GAAG,iBAAe,SAAS,UAAUnG,GAAWwD,CAAc,CAAC,GACxF4C,EAAY7G,EAAU,YAAY,GAAGwD,CAAmB,KAAK,EAAI,KAAK,MACxE,KAAK,UAAUxD,EAAU,YAAYwD,CAAmB,CAAC,CAC7D,EACA,OAAOqD,EAAS,YAAU,UAAU,EACpC1B,GAAiB0B,EAAS,WAAW,QAAuB,iBAAe,QAASD,CAAsB,EAE1GC,EAAS,YAAU,cAAc,EAAI3F,EACrC2F,EAAS,WAAW,QAAU,CAAC,EAC/B1B,GAAiB0B,EAAS,WAAW,QAASD,CAAsB,EAEpE,OAAO7C,EAAgB,WACvBoB,GAAiBpB,EAAiB,GAAGP,CAAmB,KAAK,EAC7DO,EAAgB,YAAU,cAAc,EAAI,IAAIlC,CAAS,KAAK0B,CAAkB,GAChF,IAAMuD,EAAqB/G,GAAA,YAAAA,EAAY,YAAY,GAAGkE,GACjD6C,GACDC,GAAInE,EAAmB,OAAQ,CAC3B,SAAU,cAAY,MACtB,QAASoE,EAAQ,EAAE,WAAY,CAAE,OAAQ/C,CAAe,CAAC,EACzD,SAAU,CACN,KAAM,cACV,CACJ,CAAC,EAEL,IAAMC,EAAyC,CAC3C,UAAAlE,EACA,mBAAA8G,EACA,WAAA/G,EACA,gBAAiB6C,EAAmB,WACpC,WAAYgE,CAChB,EACAzC,GAAyBD,CAAe,CAC5C,KAAO,CACHH,EAAgB,WAAW,QAAQ,KAAU,GAAGpD,CAAsB,GAAG,iBAAe,SAAS,GAEjGwE,GAAiBpB,EAAgB,WAAW,QAAuB,iBAAe,SAAS,EAC3F,IAAM+C,GAAqBxG,GAAAD,EAAAN,GAAA,YAAAA,EAAY,cAAZ,YAAAM,EAA0BsG,KAA1B,YAAArG,EAAkC,SACxDwG,GACDC,GAAInE,EAAmB,OAAQ,CAC3B,SAAU,cAAY,MACtB,QAASoE,EAAQ,EAAE,aAAa,EAChC,SAAU,CACN,KAAM,cACV,CACJ,CAAC,EAEL,IAAM9C,EAAyC,CAC3C,UAAAlE,EACA,mBAAA8G,EACA,WAAA/G,EACA,gBAAiB6C,EAAmB,WACpC,WAAY,iBAAe,SAC/B,EACAuB,GAAyBD,CAAe,EACxC,IAAM+C,EAAOH,EAAqBA,EAAmB,KAAO,qBAAkB,SAC9E/C,EAAgB,YAAU,cAAc,EAAI5D,GACxCJ,GAAA,YAAAA,EAAY,mBACZkH,EACAH,GAAA,YAAAA,EAAoB,SACxB,CACJ,CACJ,CAjFShG,EAAA4F,GAAA,wBAyFT,SAASQ,GACLb,EACAtG,EACAoH,EACkB,CA11BtB,IAAA9G,EAAAC,EAAAmD,EAAAC,EAAAC,EAAAC,EAAAwD,EA21BI,GAAI,GAAA9G,GAAAD,EAAAgG,EAAO,QAAQ,WAAf,YAAAhG,EAAyB,QAAzB,MAAAC,EAAgC,OAAS6G,IAAiB,eAAa,wBAG3E,KAAI1D,EAAA4C,EAAO,QAAQ,WAAf,MAAA5C,EAAyB,8BACzB,OAAO4C,EAAO,QAAQ,SAAS,8BAEnC,GAAIc,IAAiB,eAAa,uBAC9B,QACIxD,GAAAD,EAAA3D,EAAW,YAAY,KAAvB,YAAA2D,EAA2B,+BAA3B,YAAAC,EAAyD,SACzDyD,GAAAxD,EAAA7D,EAAW,YAAY,KAAvB,YAAA6D,EAA2B,sBAA3B,YAAAwD,EAAgD,MAG5D,CAjBStG,EAAAoG,GAAA,4BA2BT,SAASG,GACLrH,EACAqG,EACAtG,EACA6F,EACAhD,EACA+D,EACI,CAx3BR,IAAAtG,EAAAC,EAAAmD,EAAAC,EAAAC,EAy3BI,IAAML,GAAaG,GAAAnD,GAAAD,EAAAgG,EAAO,UAAP,YAAAhG,EAAgB,WAAhB,YAAAC,EAA0B,QAA1B,YAAAmD,EAAiC,MAC9C6D,EAAoBJ,GAAyBb,EAAQtG,EAAY6C,EAAmB,YAAY,EAChGY,EAAsB+D,GAA4BvH,EAAW4C,CAAkB,EACjFA,EAAmB,eAAiB,eAAa,wBAC7CU,EACAiD,GAAWvG,EAAWsD,EAAYvD,EAAY6F,EAAWhD,EAAoByD,EAAQ7C,CAAmB,IAEnGG,GAAAD,EAAA2C,EAAO,UAAP,YAAA3C,EAAgB,WAAhB,MAAAC,EAA0B,QAC1B3D,EAAU,YAAY,iBAAgC,WAAa,CAAC,GAEzE0G,GACI1G,EACAD,EACA6C,EACA0E,EACAjB,EACAM,EACAnD,CACJ,GAEJxD,EAAU,WAAW,eAAa,KAAK,EAAE,YAAU,MAAM,EAAI,IACtD4C,EAAmB,eAAiB,eAAa,sBACxDS,GAAYrD,EAAWsD,EAAYvD,EAAY6C,EAAoB0E,EAAmB9D,CAAmB,CAEjH,CAhCS1C,EAAAuG,GAAA,oBA4CF,SAASG,GACZ5E,EACA6E,EACA7B,EACA8B,EACM,CAl6BV,IAAArH,EAAAC,EAm6BI,IAAMN,EAAwB,KAAK,MAAM,KAAK,UAAUyH,CAAa,CAAC,EAChE1H,EAAa6F,GAAA,YAAAA,EAAW,WACxBe,EAAQ/D,EAAmB,YAAc+E,GAAU,eAAc/E,EAAmB,UAAU,EAE9FgF,EAA2BjB,KAASrG,GAAAD,EAAAN,GAAA,YAAAA,EAAY,cAAZ,YAAAM,EAA0BsG,KAA1B,YAAArG,EAAkC,iBAQ5E,GAPAR,GAAmBC,EAAYC,EAAW4H,CAAwB,EAElE5H,EAAU,WAAW,eAAa,6BAA6B,EAAE,YAAU,MAAM,EAAI,GAGrF6H,GAA2B9H,EAAYC,EAAW,iBAAe,sBAAsB,EAEnF4C,EAAmB,SAAU,CAE7B,IAAMkF,EAAQlF,EAAmB,SAAS,kBAAgB,GAAG,EAAE,QAC1D,QACL,GAAI,CAACkF,EACD,OAAAf,GAAInE,EAAmB,OAAQ,CAC3B,SAAU,cAAY,MACtB,QAASoE,EAAQ,EAAE,UAAW,CAAE,MAAOpE,EAAmB,SAAS,SAAS,EAAE,EAAM,CAAC,EACrF,SAAU,CACN,KAAM,eACN,MAAO,CAAC,kBAAgB,OAAO,CACnC,CACJ,CAAC,EACM5C,EAEX,IAAMqG,EAAS0B,GAAWD,EAAOJ,EAAc9B,EAAWhD,EAAmB,MAAM,EACnF,GAAI,CAACyD,EACD,OAAOrG,EAEXqH,GAAiBrH,EAAWqG,EAAQtG,EAAY6F,EAAWhD,EAAoB+D,CAAK,CACxF,CACA,cAAO3G,EAAU,YAAY,eAC7B,OAAOA,EAAU,YAAY,OAC7BgI,GAAsBhI,EAAWH,EAAqB,EAC/CG,CACX,CA3CgBc,EAAA0G,GAAA,8BCj5BhB,IAAAS,GAAqD,sDACrDC,EAcO,SAiCP,IAAMC,GAA4D,CAAC,SAAU,SAAU,WAAY,QAAQ,EAU3G,SAASC,GACLC,EACAC,EACAC,EACAC,EAOAC,EACG,CACH,MAAO,CAACC,EAAMC,IAAU,CACpB,GACK,CAACD,EAAK,aAAkBA,EAAK,QAAU,qBAAkB,oBAC1DA,EAAK,QAAU,qBAAkB,kCACnC,CACE,GAAM,CAAE,WAAAE,EAAY,SAAAC,EAAU,UAAAC,CAAU,EAAIC,GAAmBL,EAAMD,CAAe,EACpF,GAAI,CAACI,EACD,OAEJ,IAAMG,EAAWC,GAA6BP,CAAI,EAE5CQ,EAA0BX,EAAiB,mBAAmB,QAChE,IAAI,qBAAkB,cAAc,GACpC,KAAK,qBAAkB,cAAc,EACzC,EACMY,EAAsB,gBAAgBC,GAAWJ,CAAQ,CAAC,IAC1DK,EAAgBf,EAAU,YAAYa,CAAmB,EAAI,CAC/D,KAAM,SACN,WAAY,CAAC,EACb,YAAaT,EAAK,OAASE,CAC/B,EACAS,EAAa,YAAU,UAAU,EAAI,GACrCA,EAAa,YAAU,QAAQ,EAAIC,GAAkBZ,CAAI,EAGzDW,EAAa,YAAU,IAAI,EAAI,CAAC,EAC5BX,EAAK,gBAAc,cAAc,GACjCW,EAAa,YAAU,IAAI,EAAE,KAAK,CAC9B,KAAM,gBAAc,eACpB,MAAOX,EAAK,gBAAc,cAAc,CAC5C,CAAC,EAELW,EAAa,YAAU,IAAI,EAAE,KAAK,CAAE,KAAM,gBAAc,OAAQ,MAAOT,CAAW,CAAC,EAE/EE,IACAR,EAAU,YAAYa,CAAmB,EAAE,YAAU,MAAM,EAAIL,GAEnEO,EAAa,YAAU,cAAc,EAAI,IAAIH,CAAuB,IAAIP,CAAK,GAC7EH,EAAc,WAAWQ,CAAQ,EAAI,CACjC,KAAM,GAAGO,CAAsB,GAAGJ,CAAmB,EACzD,CACJ,CACJ,CACJ,CAxDSK,EAAApB,GAAA,6BAoET,SAASqB,GACLC,EACAC,EACArB,EACAsB,EACAnB,EACU,CACV,IAAMoB,EAAaC,GAAoBH,CAAQ,EACzChB,EAAQgB,EAAS,YAAY,IAAI,EACjCI,EAAapB,EAAQ,GAAKgB,EAAS,UAAUhB,EAAQ,CAAC,EAAIgB,EAC1DK,EAAkBC,GAAsB,iBAAe,gBAAiBN,EAAUrB,CAAS,EAC7FoB,EAAM,YAAcK,IACpBC,EAAgB,YAAU,cAAc,EAAI,IAAIN,EAAM,WAAW,kBAAkB,IAAIK,CAAU,IAErGC,EAAgB,WAAW,QAAU,CACjC,KAAM,GAAGT,CAAsB,GAAGM,CAAU,EAChD,EACCG,EAAgB,WAAW,QAAuB,KAAOE,GACtD,iBAAe,kBACfP,CACJ,EAECK,EAAgB,WAAW,sBAAqC,KAAOE,GACpE,iBAAe,0BACfP,CACJ,EACA,IAAMQ,EAAWF,GAAsB,iBAAe,0BAA2BN,EAAUrB,CAAS,EACpG6B,EAAS,WAAW,MAAM,MAAS,KAAOD,GAAuB,iBAAe,uBAAwBP,CAAQ,EAChHM,GAAsB,iBAAe,uBAAwBN,EAAUrB,CAAS,EAEhF8B,GAA2BV,EAAM,WAAYpB,EAAW,GAAG,iBAAe,sBAAsB,IAAIuB,CAAU,GAAG,EACjH,IAAMQ,EAAyC,CAC3C,UAAA/B,EACA,mBAAoBsB,EAAc,OAClC,WAAYA,EAAc,WAC1B,gBAAAnB,EACA,WAAAoB,CACJ,EACA,OAAAS,GAAyBD,EAAiB,iBAAe,qBAAqB,EACvEL,CACX,CAxCSR,EAAAC,GAAA,kBAqDT,SAASc,GACLb,EACAC,EACArB,EACAsB,EACAY,EACAC,EAC+C,CAC3CA,IACAA,EAAS,WAAWd,CAAQ,EAAI,CAC5B,KAAMO,GAAuB,iBAAe,yBAA0BP,CAAQ,CAClF,GAEJ,IAAMe,EAAeT,GAAsB,iBAAe,yBAA0BN,EAAUrB,CAAS,EACvGqC,GAA8BjB,EAAOgB,EAAcZ,GAAoBH,CAAQ,CAAC,EAChFe,EAAa,YAAU,cAAc,EAAIhB,EAAM,eAC/CgB,EAAa,YAAU,MAAM,EAAIhB,EAAM,UACvCgB,EAAa,WAAW,MAAM,KAAUR,GAAuB,iBAAe,gBAAiBP,CAAQ,EACvG,IAAMiB,EAAQnB,GAAeC,EAAOC,EAAUrB,EAAWsB,EAAeY,EAAmB,UAAU,EACrG,MAAO,CAAE,aAAAE,EAAc,MAAAE,CAAM,CACjC,CApBSpB,EAAAe,GAAA,sBA+BT,SAASM,GACLnB,EACAC,EACAc,EACAnC,EACAwC,EACF,CACE,IAAIC,EACAD,IAAkB,cAAY,QAC9BC,EAAiB,iBAAe,sBACzBD,IAAkB,cAAY,gBACrCC,EAAiB,iBAAe,6BAEpCN,EAAS,WAAcd,CAAQ,EAAI,CAC/B,KAAMO,GAAuBa,EAAgBpB,CAAQ,CACzD,EACA,IAAMqB,EAA0Bf,GAAsBc,EAAgBpB,EAAUrB,CAAS,EACpFoB,EAAM,KACPsB,EAAY,WAAa,CAAC,GAE9BL,GAA8BjB,EAAOsB,EAAarB,CAAQ,EAC1DqB,EAAY,YAAU,cAAc,EAAItB,EAAM,eAC9CsB,EAAY,YAAU,MAAM,EAAItB,EAAM,UACtCsB,EAAY,YAAU,UAAU,EAAI,GACpCC,GAAWH,EAAepB,EAAOsB,EAAa1C,EAAW,uBAAqB,GAAIqB,CAAQ,CAC9F,CAzBSH,EAAAqB,GAAA,4BAmCT,SAASK,GACLxB,EACAC,EACAc,EACAnC,EACA6C,EACF,CACEV,EAAS,WAAcd,CAAQ,EAAI,CAC/B,KAAM,GAAGJ,CAAsB,GAAG4B,CAAkB,EACxD,EACA,IAAMC,EAAenB,GACjB,iBAAe,0BACfkB,EACA7C,EACA,EACJ,EACA+C,GAAoC3B,EAAO0B,EAAczB,CAAQ,EACjEyB,EAAa,YAAU,cAAc,EAAI1B,EAAM,eAC/C0B,EAAa,YAAU,MAAM,EAAI1B,EAAM,UACvC0B,EAAa,YAAU,QAAQ,EAAIE,GAA0B5B,GAAA,YAAAA,EAAO,MAAM,EAC1E0B,EAAa,YAAU,UAAU,EAAI,EACzC,CArBS5B,EAAA0B,GAAA,qBA8BT,SAASK,GACL7B,EACAC,EACArB,EACAD,EACU,CACV,IAAMmD,EAAUvB,GAAsB,iBAAe,yBAA0BN,EAAUrB,CAAS,EAGlG,GAFAkD,EAAQ,qBAAuB,GAC/BA,EAAQ,WAAa,CAAC,EACjB9B,EAAgB,QAAS,CAC1B,IAAI+B,EAAI,EACP/B,EAAgB,QAAQ,QAASgC,GAAiB,CAC/C,IAAMC,EAAcC,GAAwBF,EAAwCrD,CAAU,EACxFwD,EAASH,EAAa,MAAM,MAAM,iBAAe,EAAE,CAAC,EACpD7C,EAAY6C,EAAa,OAAkB,QAAQ,IAAK,IAAI,EAC5DI,EAA0BN,EAAQ,WAAW,GAAGK,CAAM,KAAKH,EAAa,MAAM,EAAE,EAAI,CACtF,KAAMxB,GAAuB,iBAAe,wBAAyBrB,CAAQ,EAC7E,YAAA8C,CACJ,EACAG,EAAuB,YAAU,aAAa,EAAIL,EAClDK,EAAuB,YAAU,cAAc,EAAIJ,EAAa,MAChE,IAAMK,EAAgB9B,GAClB,iBAAe,wBACfb,GAAWP,CAAQ,EACnBP,CACJ,EACAyD,EAAc,YAAU,cAAc,EAAIC,GAAuBN,CAAY,EAC7EK,EAAc,YAAU,QAAQ,EAAIzC,GAAkBoC,CAAY,EAClEK,EAAc,WAAa,CAAC,EAC5BN,GACJ,CAAC,CACL,CACA,OAAOD,CACX,CAjCShC,EAAA+B,GAAA,sBA0CT,SAASU,GACLvC,EACAC,EACArB,EACAD,EAC+C,CAC/C,IAAM6D,EAAQjC,GAAsB,iBAAe,gBAAiBN,EAAUrB,CAAS,EACnFoB,EAAM,QACNwC,EAAM,YAAcxC,EAAM,OAE9BwC,EAAM,YAAU,cAAc,EAAIF,GAAuBtC,CAA8B,EACvFwC,EAAM,YAAU,QAAQ,EAAIZ,GAA2B5B,EAAsB,QAAUA,CAAK,EAC5FwC,EAAM,YAAU,UAAU,EAAI,GAC9BA,EAAM,WAAW,QAAQ,KAAUhC,GAAuB,iBAAe,kBAAmBP,CAAQ,EACpG,IAAMwC,EAAelC,GAAsB,iBAAe,kBAAmBN,EAAUrB,CAAS,EAEhG6D,EAAa,WAAW,QAAQ,KAAUjC,GAAuB,iBAAe,yBAA0BP,CAAQ,EAClH,IAAMyC,EAAeb,GAAmB7B,EAAOC,EAAUrB,EAAWD,CAAU,EAC9E,MAAO,CAAE,MAAA6D,EAAO,aAAAE,CAAa,CACjC,CAnBS5C,EAAAyC,GAAA,eA6BT,SAASI,GACL3C,EACAC,EACArB,EACAmC,EACApC,EAA0BqB,EAAsB,WAC0B,CACtEe,IACAA,EAAS,WAAWd,CAAQ,EAAI,CAC5B,KAAMO,GAAuB,iBAAe,uBAAwBP,CAAQ,CAChF,GAEJ,IAAM2C,EAAerC,GAAsB,iBAAe,uBAAwBN,EAAUrB,CAAS,EACrG+C,GAAoC3B,EAAsB4C,EAAc3C,CAAQ,EAEhF2C,EAAa,YAAU,cAAc,EAAIN,GAAuBtC,CAAK,EACrE4C,EAAa,WAAW,MAAM,KAAUpC,GAAuB,iBAAe,gBAAiBP,CAAQ,EACvG,GAAM,CAAE,MAAAuC,EAAO,aAAAE,CAAa,EAAIH,GAC3BvC,EAAsB,QAAUA,EACjCC,EACArB,EACAD,CACJ,EACA,MAAO,CAAE,aAAAiE,EAAc,MAAAJ,EAAO,aAAAE,CAAa,CAC/C,CAxBS5C,EAAA6C,GAAA,sBAmCT,SAASE,GACL7C,EACAC,EACArB,EACAmC,EACAD,EACF,CA/YF,IAAAgC,EAAAC,EAgZI,IAAIC,EAAaC,EAA0BC,EAC3C,GAAI,EAAClD,GAAA,MAAAA,EAAO,QAAQ,CAChBmD,GAAIrC,EAAmB,OAAQ,CAC3B,SAAU,cAAY,MACtB,QAASsC,EAAQ,EAAE,wBAAyB,CAAE,IAAKnD,CAAS,CAAC,EAC7D,SAAU,CACN,KAAM,cACV,CACJ,CAAC,EACD,MACJ,CACA,IAAMoD,GAAkBP,EAAA9C,GAAA,YAAAA,EAAO,SAAP,YAAA8C,EAAuC,eACzDQ,EAAUrD,EAAS,YAAY,IAAI,EAAI,EAAIA,EAAS,MAAM,EAAGA,EAAS,YAAY,IAAI,CAAC,EAAI,OACjG,GAAIoD,GAAA,MAAAA,EAAiB,GACjB,GAAIA,EAAe,CAAC,EAAE,QAClBL,EAAcK,EAAe,CAAC,EAAE,QAChCJ,EAAmB,IAAID,EAAY,mBAAmB,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC,GACjFE,EAASF,MACN,CACHA,EAAcK,EAAe,CAAC,EAC9BJ,EACI,IACAM,GAAa,GAAGP,EAAY,aAAa,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC,GAAIlC,EAAmB,UAAU,EAIzG,IAAM0C,EAHiB1C,EAAmB,UAAU,WAAW,qBAAqB,KAAM2C,GAC/EA,EAAK,OAASH,CACxB,EACiC,WAC5BI,EAAgBT,GAAA,YAAAA,EAAkB,MAAM,mBAAiB,GAC/DC,EAASQ,KAAiBX,EAAAS,GAAA,YAAAA,EAAY,cAAZ,YAAAT,EAAyB,GAAGW,GAC1D,CAEJ,GAAIV,EAAa,CACb,IAAMW,EAAoBV,EAAiB,MAAM,iBAAe,EAAE,CAAC,EAC7D7D,EAAYY,EAAM,OAAO,YAAU,kBAAkB,EAAE,MAAM,GAAG,EAAE,CAAC,EACnE4D,EAAuBN,EAAU,GAAGA,CAAO,KAAKL,CAAgB,GAAKA,EAE3E,GAAIU,EAAkB,WAAW,gBAAc,KAAK,EAAG,CACnD5C,EAAS,WAAW,GAAGd,CAAQ,IAAIgD,CAAgB,GAAG,EAAI,CACtD,KAAMzC,GAAuB,iBAAe,uBAAwBoD,CAAoB,CAC5F,EACA,GAAM,CAAE,aAAAhB,EAAc,MAAAJ,CAAM,EAAIG,GAC5BK,EACAY,EACAhF,EACA,OACAoB,EAAM,UACV,EACA4C,EAAa,YAAU,cAAc,EAAI5C,EAAM,eAC/C2B,GAAoC3B,EAAO4C,EAAc3C,CAAQ,EACjEuC,EAAM,YAAU,cAAc,EAAI,IAAIpD,CAAS,IAAI6D,CAAgB,GACnET,EAAM,YAAU,MAAM,EAAIpD,CAC9B,SAAWuE,EAAkB,WAAW,gBAAc,QAAQ,EAAG,CAC7D5C,EAAS,WAAW,GAAGd,CAAQ,IAAIgD,CAAgB,GAAG,EAAI,CACtD,KAAMzC,GAAuB,iBAAe,yBAA0BoD,CAAoB,CAC9F,EACA,GAAM,CAAE,aAAA5C,EAAc,MAAAE,CAAM,EAAIL,GAC5Bb,EACA4D,EACAhF,EACA,CAAE,OAAAsE,EAAQ,WAAYlD,EAAM,UAAW,EACvCc,CACJ,EACAE,EAAa,YAAU,cAAc,EAAIhB,EAAM,eAC/C2B,GAAoC3B,EAAOgB,EAAcf,CAAQ,EACjE,OAAOe,EAAa,YAAU,UAAU,EACxCE,EAAM,YAAU,cAAc,EAAI,IAAI9B,CAAS,IAAI6D,CAAgB,GACnE/B,EAAM,YAAU,MAAM,EAAI9B,CAC9B,CACJ,CACJ,CA5ESU,EAAA+C,GAAA,oCAwFT,SAASgB,GACL/C,EACAgD,EACA7D,EACAc,EACAnC,EACAwC,EACA2C,EACI,CACJ,IAAM/D,EAAqB8D,EAAO7D,CAAQ,EACpCwB,EAAqB,aAAaL,CAAa,GAAGpB,EAAM,IAAI,IAAII,GAAoBH,CAAQ,CAAC,IACnG,OAAQD,EAAM,KAAM,CAChB,KAAK,YAAU,oBAAqB,CAChC6C,GAAiC7C,EAAOC,EAAUrB,EAAWmC,EAAUD,CAAkB,EACzF,KACJ,CACA,KAAK,YAAU,gBAAiB,CAC5BkD,GAAiBhE,EAAOC,EAAUrB,EAAWmC,EAAUK,EAAeN,EAAoBiD,CAAM,EAChG,KACJ,CACA,KAAK,YAAU,SAAU,CACrB,GAAI3C,IAAkB,cAAY,QAAS,CACvC,IAAMlB,EAAgB4D,EAAO7D,CAAQ,EACrCY,GAAmBb,EAAOC,EAAUrB,EAAWsB,EAAeY,EAAoBC,CAAQ,CAC9F,CACA,KACJ,CACA,KAAK,YAAU,KACf,KAAK,YAAU,eAAgB,CAC3BI,GAAyBnB,EAAOC,EAAUc,EAAUnC,EAAWwC,CAAa,EAC5E,KACJ,CACA,KAAK,YAAU,UAAW,CACtBI,GAAkBxB,EAAOC,EAAUc,EAAUnC,EAAW6C,CAAkB,EAC1E,KACJ,CACA,KAAK,YAAU,MAAO,CACdL,IAAkB,cAAY,cAC9BI,GAAkBxB,EAAOC,EAAUc,EAAUnC,EAAW6C,CAAkB,EACnEL,IAAkB,cAAY,SACrCuB,GAAmB3C,EAAOC,EAAUrB,EAAWmC,CAAQ,EAE3D,KACJ,CACA,KAAK,YAAU,QACf,KAAK,YAAU,QAAS,CACpBkD,GAAqBjE,EAAOC,EAAUc,EAAUnC,EAAWwC,CAAa,EACxE,KACJ,CACA,QACIL,EAAS,WAAcd,CAAQ,EAAIiE,GAAqBtF,EAAWoB,EAAOC,CAAQ,CAE1F,CACJ,CArDSH,EAAA+D,GAAA,cAiET,SAASG,GACLhE,EACAC,EACArB,EACAmC,EACAK,EACAN,EACAiD,EACF,CACE,IAAMI,EAAmBpD,EAAS,WAAWd,CAAQ,EAAIiE,GAAqBtF,EAAWoB,EAAOC,CAAQ,EACxGkE,EAAgB,WAAa,CACzB,YAAa,CACT,qBAAsB,GACtB,KAAM,SACN,WAAY,CAAC,EACb,YAAa,aACjB,CACJ,EACA,IAAMC,EAAcD,EAAgB,WAAW,YAC/CC,EAAY,YAAU,cAAc,EAAIpE,EAAM,eAC9CoE,EAAY,YAAU,MAAM,EAAIpE,EAAM,UACtCoE,EAAY,YAAU,IAAI,EAAI,CAC1B,CACI,KAAM,gBAAc,GACpB,MAAOpE,EAAM,EACjB,CACJ,EACAoE,EAAY,YAAU,UAAU,EAAI,GACpC,QAAWC,KAAOrE,EAAM,OACpB6D,GAAW/C,EAAoBd,EAAM,OAAQqE,EAAKD,EAA2BxF,EAAWwC,EAAe2C,CAAM,CAErH,CA/BSjE,EAAAkE,GAAA,oBAuCT,SAASM,GACLxD,EACAlC,EACAmF,EACI,CAEJ,IAAMD,EAAuBS,GACzBzD,EAAmB,UAAU,WAC7BA,EAAmB,WACnB,uBAAqB,GACrBA,EAAmB,MACvB,EACA,GAAI,CAACgD,EAAQ,CACT,OAAOlF,EAAU,YAAY,iBAAe,qBAAqB,EACjE,MACJ,CAEA,IAAMmC,EAAWnC,EAAU,YAAY,iBAAe,QAAQ,EAE9D,QAAWqB,KAAY6D,EACnBD,GAAW/C,EAAoBgD,EAAQ7D,EAAUc,EAAUnC,EAAW,cAAY,QAASmF,CAAM,EAGjGnF,EAAU,YAAY,iBAAe,cAAc,IACnDmC,EAAS,WAAa,CAClB,GAAGA,EAAS,WACZ,GAAInC,EAAU,YAAY,iBAAe,cAAc,EAAiB,UAC5E,EAER,CA7BSkB,EAAAwE,GAAA,eAsCT,SAASE,GACL1D,EACAlC,EACAD,EACAoF,EACI,CAEJ,IAAMD,EAAuBW,GACzB9F,EACAmC,EAAmB,WACnB,uBAAqB,GACrBA,EAAmB,MACvB,EACMC,EAAWnC,EAAU,YAAY,iBAAe,cAAc,EAIpE,GAHAmC,EAAS,WAAa,CAAC,EACvBA,EAAS,qBAAuB,GAE5B,EAAC+C,EAGL,SAAW7D,KAAY6D,EACnBD,GAAW/C,EAAoBgD,EAAQ7D,EAAUc,EAAUnC,EAAW,cAAY,cAAemF,CAAM,EAG3G,OAAOnF,EAAU,YAAY,iBAAe,2BAA2B,EACvE,OAAOA,EAAU,YAAY,iBAAe,4BAA4B,EACxE,OAAOA,EAAU,YAAY,iBAAe,gCAAgC,EAC5E,OAAOA,EAAU,YAAY,iBAAe,8BAA8B,EAC1E,OAAOA,EAAU,YAAY,iBAAe,8BAA8B,EAC9E,CA7BSkB,EAAA0E,GAAA,qBAsCT,SAASE,GACL5D,EACA6D,EACAC,EACAC,EACI,CACJ,OAAO,KAAKA,CAAK,EAAE,QAASC,GAAY,CA3pB5C,IAAAhC,EAAAC,EAAAgC,EAAAC,EA4pBQ,GACIH,EAAMC,CAAO,EAAE,SACfD,EAAMC,CAAO,EAAE,QAAQ,UACvBD,EAAMC,CAAO,EAAE,QAAQ,SAAS,YAAcF,GAC9CC,EAAMC,CAAO,EAAE,OAAS,KAAG,2BAC7B,CAEE,IAAMG,EAAgCC,GAClCpE,EAAmB,UAAU,WAC7BA,EAAmB,WACnBA,EAAmB,MACvB,EAGMqE,GAAiBH,GAAAD,GAAAhC,GAAAD,EADS+B,EAAMC,CAAO,EACjB,UAAL,YAAAhC,EAAc,WAAd,YAAAC,EAAwB,UAAxB,YAAAgC,EAAiC,OAAjC,YAAAC,EAAuC,SAC9D,GAAIG,EACA,QAAWd,KAAOc,EAAgB,CAC9B,IAAMC,EAAgBD,EAAed,CAAG,EAEnCY,EAAc,KAAMI,GAA0BA,EAAQ,MAAQhB,CAAG,GAClEY,EAAc,KAAK,CACf,IAAAZ,EACA,MAAOe,EAAc,MACrB,OAAQ,EACZ,CAAC,CAET,CAGJE,GAAiCX,EAAQ,CAAC,iBAAe,+BAA+B,EAAGM,EAAe,CACtG,KACA,QACA,KACJ,CAAC,CACL,CACJ,CAAC,CACL,CA3CSnF,EAAA4E,GAAA,2BAmDT,SAASa,GACLzE,EACAlC,EACAmF,EACI,CACJ,IAAMpF,EAAamC,EAAmB,UAAU,WAChD0E,GAAsB5G,EAAWD,CAAU,EAG3C8G,GAAiB7G,EAAWD,EAAYmC,EAAmB,WAAYpC,EAAyB,EAG5FC,IACAC,EAAU,YAAY,iBAAe,cAAc,EAC/C,YAAU,cACd,EAAI,IAAID,EAAW,kBAAkB,KAAK,qBAAkB,YAAY,IAE5E6F,GAAkB1D,EAAoBlC,EAAWD,EAAYoF,CAAM,CACvE,CAlBSjE,EAAAyF,GAAA,aA6BF,SAASG,GACZ5E,EACA6E,EACAC,EACM,CACN,IAAMhH,EAAwB,KAAK,MAAM,KAAK,UAAU+G,CAAa,CAAC,EAStE,GANA/G,EAAU,WAAW,SAAW,CAC5B,KAAM,GAAGiB,CAAsB,GAAG,iBAAe,QAAQ,EAC7D,EAEAiB,EAAmB,UAAY8E,EAG3B,CAAC9E,EAAmB,SAAS,kBAAgB,GAAG,EAAE,SAClD,CAACA,EAAmB,SAAS,kBAAgB,GAAG,EAAE,QAAQ,QAE1D,OAAAqC,GAAIrC,EAAmB,OAAQ,CAC3B,SAAU,cAAY,MACtB,QAASsC,EAAQ,EAAE,WAAW,EAC9B,SAAU,CACN,KAAM,cACV,CACJ,CAAC,EACMxE,EAIX,IAAMmC,EAAYnC,EAAU,YAAY,iBAAe,QAAQ,EAAI,CAC/D,KAAM,SACN,WAAY,CAAC,EACb,qBAAsB,GACtB,YAAa,iBAAe,QAChC,EAEA,GADAmC,EAAS,YAAU,UAAU,EAAI,GAC7B6E,EAAW,CACX,IAAMf,EAAQ/D,EAAmB,SAAS,kBAAgB,GAAG,EAAE,QAC1D,QACL,GAAI,CAAC+D,EACD,OAAA1B,GAAIrC,EAAmB,OAAQ,CAC3B,SAAU,cAAY,MACtB,QAASsC,EAAQ,EAAE,UAAW,CAAE,MAAOtC,EAAmB,SAAS,SAAS,EAAE,EAAM,CAAC,EACrF,SAAU,CACN,KAAM,eACN,MAAO,CAAC,kBAAgB,OAAO,CACnC,CACJ,CAAC,EACMlC,EAEX,IAAMmF,EAAS8B,GAAWhB,EAAO,KAAG,2BAA4Be,EAAW9E,EAAmB,MAAM,EACpG,GAAI,CAACiD,EACD,OAAOnF,EAIX2G,GAAUzE,EAAoBlC,EAAWmF,CAAM,EAG/ChD,EAAS,YAAU,UAAU,EAAI,GAC7B6E,GAAA,MAAAA,EAAW,aACX7E,EACI,YAAU,cACd,EAAI,IAAI6E,EAAU,WAAW,kBAAkB,KAAK,qBAAkB,MAAM,IAEhFtB,GAAYxD,EAAoBlC,EAAWmF,CAAM,EAGjDW,GAAwB5D,EAAoBlC,EAAWgH,EAAU,KAAMf,CAAK,EAG5EiB,GAAiBlH,EAAWkC,CAAkB,CAClD,CAEA,cAAOlC,EAAU,YAAY,iBAAe,yBAAyB,EACrE,OAAOA,EAAU,YAAY,iBAAe,gBAAgB,EAC5D,OAAOA,EAAU,YAAY,iBAAe,eAAe,EAC3D,OAAOA,EAAU,YAAY,iBAAe,eAAe,EAC3D,OAAOA,EAAU,YAAY,iBAAe,wBAAwB,EACpE,OAAOA,EAAU,YAAY,iBAAe,sBAAsB,EAClE,OAAOA,EAAU,YAAY,iBAAe,wBAAwB,EACpE,OAAOA,EAAU,YAAY,iBAAe,0BAA0B,EACtE,OAAOA,EAAU,YAAY,iBAAe,qBAAqB,EACjE,OAAOA,EAAU,YAAY,iBAAe,wBAAwB,EACpE,OAAOA,EAAU,YAAY,iBAAe,oCAAoC,EAChF,OAAOA,EAAU,YAAY,iBAAe,qBAAqB,EACjE,OAAOA,EAAU,YAAY,iBAAe,eAAe,EAC3D,OAAOA,EAAU,YAAY,iBAAe,iBAAiB,EAC7D,OAAOA,EAAU,YAAY,iBAAe,uBAAuB,EACnE,OAAOA,EAAU,YAAY,iBAAe,wBAAwB,EACpE,OAAOA,EAAU,YAAY,iBAAe,yBAAyB,EACrEmH,GAAsBnH,EAAWH,EAAqB,EAC/CG,CACX,CA7FgBkB,EAAA4F,GAAA,8BC3tBT,SAASM,GACZC,EACAC,EACM,CACN,OAAO,KAAK,MAAM,KAAK,UAAUA,CAAa,CAAC,CACnD,CALgBC,EAAAH,GAAA,6BCPhB,IAAAI,GAAkF,SAmB3E,SAASC,GACZC,EACAC,EACAC,EACAC,EACAC,EACAC,EACM,CACN,IAAMC,EAAaC,GAAwBL,EAAaE,CAAM,EACxDI,EAAkD,CACpD,aAAc,gBAAa,uBAC3B,qBAAsB,wBAAqB,GAC3C,SAAAL,EACA,UAAAE,EACA,WAAAC,EACA,OAAAF,CACJ,EACMK,EAAYC,GAA4BT,EAAeK,CAAU,EAEvE,OAAKG,GACDE,GAAIH,EAAmB,OAAQ,CAC3B,SAAU,eAAY,MACtB,QAASI,EAAQ,EAAE,oBAAqB,CAAE,UAAWX,CAAc,CAAC,EACpE,SAAU,CACN,KAAM,eACV,CACJ,CAAC,EAEEY,GAA2BL,EAAoBR,EAAeS,CAAS,CAClF,CA7BgBK,EAAAf,GAAA,iCA2CT,SAASgB,GACZC,EACAhB,EACAC,EACAC,EACAE,EACAD,EACM,CACNc,GAAS,EACT,IAAMX,EAAaC,GAAwBL,EAAaE,CAAM,EACxDK,EAAYH,GAAA,YAAAA,EAAY,WAAW,KAAMY,GAAOA,EAAG,OAASjB,GAC5DO,EAAkD,CACpD,aAAAQ,EACA,qBAAsB,wBAAqB,GAC3C,SAAAb,EACA,WAAAG,EACA,OAAAF,CACJ,EAEMe,EACFH,IAAiB,gBAAa,uBAAyB,MAAG,2BAA6B,MAAG,mBAC9F,OAAOI,GAA2BZ,EAAoBR,EAAeS,EAAWU,CAAY,CAChG,CAtBgBL,EAAAC,GAAA,iCAmCT,SAASM,GACZL,EACAhB,EACAE,EACAC,EACAF,EACAG,EACM,CACN,IAAME,EAAaC,GAAwBL,EAAaE,CAAM,EACxDI,EAAkD,CACpD,aAAAQ,EACA,qBAAsB,wBAAqB,GAC3C,SAAAb,EACA,WAAAG,EACA,OAAAF,CACJ,EACA,OAAOkB,GAA0Bd,EAAoBR,CAAa,CACtE,CAjBgBc,EAAAO,GAAA,gCClGhB,IAAAE,GAAkC,sDAClCC,GAA6B,SAEtB,IAAMC,GAAyBC,EAACC,GAC5B,2BAA2BA,EAAS,CAAC,CAAC,oBADX,0BAIzBC,GAAiCF,EAACC,GACpCF,GAAuBE,CAAQ,EAAI,eADA,kCAIjCE,GAA6BH,EAACC,GAChCF,GAAuBE,CAAQ,EAAI,kBADJ,8BAI7BG,GAA8BJ,EAACC,GACjCF,GAAuBE,CAAQ,EAAI,wBADH,+BAI9BI,GAA4BL,EAAA,CAACC,EAAoBK,EAAqBC,IACxEH,GAA4BH,CAAQ,EAAI,KAAK,qBAAkB,YAAY,WAAWM,CAAS,GADjE,6BAa5BC,GAA8BR,EAAA,CACvCC,EACAK,EACAG,EACAC,EACAC,IACS,CACT,IAAMC,EAAoBD,GAAA,YAAAA,EAAkB,QAAQ,OAAQ,MAC5D,OAAOC,EACDR,GAA4BH,CAAQ,EAAI,IAAIW,CAAiB,iBAC7D,MACV,EAX2C,+BAa9BC,GAA4Bb,EAAA,CACrCC,EACAa,EACAC,EACAC,EACAL,IAEIA,EACOH,GAA4BP,EAAUa,EAAUC,EAAyBC,EAAWL,CAAgB,EAEpGP,GAA4BH,CAAQ,EAAI,KAAK,qBAAkB,QAAQ,iBAV7C,6BAc5BgB,GAAsBjB,EAAA,CAC/BC,EACAa,EACAC,EACAC,EACAL,IAGIE,GAA0BZ,EAAUa,EAAUC,EAAyBC,EAAWL,CAAgB,EAClG,gBAT2B,uBAatBO,GAAwBlB,EAAA,CACjCC,EACAK,EACAG,EACAO,EACAL,IACS,CACT,IAAMC,EAAoBD,EAAiB,QAAQ,OAAQ,IAAI,EAC/D,OAAOP,GAA4BH,CAAQ,EAAI,IAAIW,CAAiB,YAAYI,CAAS,EAC7F,EATqC,yBAWxBG,GAAsBnB,EAAA,CAC/BC,EACAa,EACAC,EACAC,EACAL,IAEIA,EACOO,GAAsBjB,EAAUa,EAAUC,EAAyBC,EAAWL,CAAgB,EAE9FP,GAA4BH,CAAQ,EAAI,KAAK,qBAAkB,QAAQ,YAAYe,CAAS,GAVxE,uBActBI,GAAwBpB,EAAA,CACjCC,EACAK,EACAG,EACAO,EACAL,IACS,CACT,IAAMC,EAAoBD,EAAiB,QAAQ,OAAQ,IAAI,EAC/D,OAAOP,GAA4BH,CAAQ,EAAI,IAAIW,CAAiB,YAAYI,CAAS,EAC7F,EATqC,yBAWxBK,GAAsBrB,EAAA,CAC/BC,EACAa,EACAC,EACAC,EACAL,IAEIA,EACOS,GAAsBnB,EAAUa,EAAUC,EAAyBC,EAAWL,CAAgB,EAE9FP,GAA4BH,CAAQ,EAAI,KAAK,qBAAkB,QAAQ,YAAYe,CAAS,GAVxE,uBActBM,GAAsBtB,EAAA,CAC/BC,EACAK,EACAC,EACAS,IAEOZ,GAA4BH,CAAQ,EAAI,IAAIM,CAAS,YAAYS,CAAS,GANlD,uBAStBO,GAAsBvB,EAAA,CAC/BC,EACAK,EACAC,EACAS,IAEOZ,GAA4BH,CAAQ,EAAI,IAAIM,CAAS,YAAYS,EAAU,QAAQ,IAAK,IAAI,CAAC,GANrE,uBAStBQ,GAA4BxB,EAAA,CAACC,EAAoBK,EAAqBC,IACxEH,GAA4BH,CAAQ,EAAI,IAAIM,CAAS,iBADvB,6BAI5BkB,GAAuBzB,EAAA,CAChCC,EACAK,EACAC,EACAmB,IACS,CACT,IAAIC,EAAO5B,GAAuBE,CAAQ,EAAI,0BAA0BM,CAAS,GACjF,OAAImB,IACAC,GAAQ,IAAMD,GAEXC,CACX,EAXoC,wBAavBC,GAAN,MAAMA,EAAqC,CAQlD,EARkD5B,EAAA4B,GAAA,iBAO9CC,EAAA,CADCC,GAAQ,UAAU,GANVF,GAOT,wBAPG,IAAMG,GAANH,GAUMI,GAAN,MAAMA,EAAsC,CAkCnD,EAlCmDhC,EAAAgC,GAAA,eAM/CH,EAAA,CALCI,EAAS,CACN,SAAU,CACN,KAAM,IAAc,SACxB,CACJ,CAAC,GALQD,GAMT,qBAOAH,EAAA,CALCI,EAAS,CACN,SAAU,CACN,KAAM,IAAc,SACxB,CACJ,CAAC,GAZQD,GAaT,2BAUAH,EAAA,CARCI,EAAS,CACN,SAAU,CACN,KAAM,IAAc,wBACxB,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAtBQF,GAuBT,oCAUAH,EAAA,CARCI,EAAS,CACN,SAAU,CACN,KAAM,IAAc,SACxB,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAhCQF,GAiCT,2BAjCG,IAAMG,GAANH,GCzKP,IAAAI,GASO,SCMA,SAASC,GACZC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACI,CACJ,GAAI,CAACJ,EACD,OAEJ,IAAIK,EAAkB,CAAC,EACjBC,EAAuBR,GAAA,YAAAA,EAAY,cACnCS,EAA0BJ,GAAaA,EAAU,QAAQ,IAAK,IAAI,EAExE,QAAWK,KAAeR,EAAU,WAAe,CAC/C,IAAMS,EAAWC,GAAmBZ,EAAYU,CAAW,EAE3D,GAAIC,GAAA,MAAAA,EAAU,SAAU,CACpB,IAAME,EAAOF,EAAS,SAAS,KAAK,CAACR,CAAO,EAAGF,EAAUQ,EAAyB,GAAGL,CAAW,EAChGG,EAAkBO,GAA2Bb,EAAUY,EAAMR,EAAWI,EAAyB,EAAI,EACjGF,GAAmB,OAAO,KAAKA,CAAe,EAAE,OAAS,IACzDQ,GAAeJ,EAAUJ,EAAiBG,EAAaV,EAAYK,EAAWD,CAAW,EACzFY,GAA0BR,EAAsBD,EAAiBM,EAAMP,CAAM,EAErF,CACJ,CACJ,CA5BgBW,EAAAlB,GAAA,0BCfhB,IAAAmB,GAAA,GAAAC,GAAAD,GAAA,cAAAE,GAAA,aAAAC,GAAA,sCAAAC,GAAA,wCAAAC,GAAA,YAAAC,GAAA,8BAAAC,GAAA,uBAAAC,GAAA,cAAAC,GAAA,iBAAAC,GAAA,mBAAAC,GAAA,gBAAAC,GAAA,gBAAAC,GAAA,qBAAAC,GAAA,oCAAAC,GAAA,qBAAAC,GAAA,mCAAAC,GAAA,iCAAAC,GAAA,mCAAAC,GAAA,qCAAAC,GAAA,gCAAAC,GAAA,qBAAAC,GAAA,oBAAAC,GAAA,0BAAAC,GAAA,gCAAAC,GAAA,4BAAAC,GAAA,aAAAC,GAAA,4BAAAC,GAAA,8BAAAC,GAAA,UAAAC,GAAA,gBAAAC,GAAA,sBAAAC,GAAA,wBAAAC,GAAA,sBAAAC,GAAA,kBAAAC,GAAA,uBAAAC,GAAA,sBAAAC,GAAA,YAAAC,GAAA,kBAAAC,GAAA,iBAAAC,GAAA,oBAAAC,GAAA,0BAAAC,GAAA,0BAAAC,GAAA,sBAAAC,GAAA,mBAAAC,GAAA,kCAAAC,GAAA,2BAAAC,GAAA,kCAAAC,GAAA,2BAAAC,GAAA,0BAAAC,GAAA,kCAAAC,KCCA,IAAAC,GAA8B,SAmB9B,IAAMC,GAA6BC,EAAA,CAACC,EAAkBC,IAAgC,CAClF,IAAIC,EAAkBF,EACtB,QAAWG,KAAWF,EAAK,MAAM,GAAG,EAC3BC,EAAgBC,CAAO,IACpBA,IAAY,QACZD,EAAgBC,CAAO,EAAI,CAAC,EAE5BD,EAAgBC,CAAO,EAAI,CAAC,GAGpCD,EAAkBA,EAAgBC,CAAO,EAE7C,OAAOD,CACX,EAbmC,8BAuBnC,SAASE,GACLC,EACAL,EACAM,EACAC,EACAC,EACAC,EACM,CACN,IAAMC,EAAYC,GAA+BN,CAAQ,EACnDH,EAAkBJ,GAA2B,KAAK,MAAM,KAAK,UAAUE,CAAQ,CAAC,EAAGU,CAAS,EAC9FT,EACJ,QAASW,EAAQ,EAAGA,EAAQV,EAAgB,OAAQU,IAAS,CACzD,IAAMC,EAAOX,EAAgBU,CAAK,EAClC,GAAIC,IAASA,EAAK,aAAU,GAAG,KAAMJ,GAAA,YAAAA,EAAe,MAAUI,EAAK,aAAU,GAAG,IAAMN,GAAU,CAC5FN,EAAO,GAAGS,CAAS,IAAIE,CAAK,GAC5B,KACJ,CACJ,CACA,OAAKX,IACDA,EAAO,GAAGS,CAAS,OAEhBT,CACX,CAtBSF,EAAAK,GAAA,iCA+BF,SAASU,GACZZ,EACAO,EACAM,EACAC,EACI,CACA,OAAOd,EAAgB,cAAoB,WAC3CA,EAAgB,aAAkB,CAAC,GAEvCA,EAAgB,aAAgBc,CAAW,EAAIP,EAAaM,CAAG,CACnE,CAVgBhB,EAAAe,GAAA,0BAehB,SAASG,GACLf,EACAgB,EACAC,EACAC,EACAC,EACAC,EACa,CACb,IAAMC,EAAoB,KAAK,MAAM,KAAK,UAAUrB,CAAe,CAAC,EAC9DsB,EAAW,OAAO,KAAKtB,CAAe,EAE5C,QAAWU,KAASY,EAAU,CAC1B,IAAMC,EAAkB,OAAOb,CAAK,EAC9BC,EAAOX,EAAgBU,CAAK,EAC9BM,IAAgBL,EAAK,IACrBU,EAAkBJ,CAAQ,EAAIN,EAE1BY,GAAmBL,GAAYK,GAAmBJ,EAClDE,EAAkB,KAAK,IAAI,EAAGE,EAAkBH,CAAS,CAAC,EAAIT,EAE9DU,EAAkBX,CAAK,EAAIC,CAGvC,CACA,OAAOU,CACX,CAzBSxB,EAAAkB,GAAA,yBAgCF,SAASS,GAAexB,EAA0BO,EAA6B,CAClF,IAAMS,EAAcT,EAAa,IAC3BkB,EAAYzB,EAAkC,UAAWW,IACpDA,GAAA,YAAAA,EAAO,OAAWK,CAC5B,EACKC,EAAWV,EAAa,MAC9B,GAAIkB,EAAW,IAAMA,IAAaR,EAAU,CACxC,IAAMG,EAAYH,EAAWQ,EAAW,GAAK,EACvCP,EAAW,KAAK,IAAI,OAAOO,CAAQ,EAAGR,CAAQ,EAC9CE,EAAW,KAAK,IAAI,OAAOM,CAAQ,EAAGR,CAAQ,EAC9CI,EAAoBN,GACtBf,EACAgB,EACAC,EACAC,EACAC,EACAC,CACJ,EACA,QAAWV,KAAS,OAAO,KAAKW,CAAiB,EAC7CrB,EAAgBU,CAAK,EAAIW,EAAkBX,CAAK,CAExD,CACJ,CAtBgBb,EAAA2B,GAAA,kBA+BT,SAASE,GACZ1B,EACAO,EACAM,EACAC,EACI,CAEA,CAACd,EAAgBc,CAAW,GAC5B,OAAOP,EAAaM,CAAG,GAAM,UAC7B,OAAO,KAAKN,EAAaM,CAAG,CAAC,EAAE,SAG/BN,EAAaM,CAAG,EAAI,CAAC,EAE7B,CAdgBhB,EAAA6B,GAAA,yBAuBT,SAASC,GACZ3B,EACAO,EACAM,EACAC,EACI,EACA,OAAOd,EAAgB,iBAAuB,WAAa,CAACA,EAAgB,mBAC5EA,EAAgB,gBAAqB,CAAC,GAE1CA,EAAgB,gBAAmBc,CAAW,EAAIP,EAAaM,CAAG,CACtE,CAVgBhB,EAAA8B,GAAA,iCAiBT,SAASC,GAAuB5B,EAA0Bc,EAA2B,CAEpF,OAAOd,EAAgB,cAAoB,UAC3CA,EAAgB,aAAgBc,CAAW,IAAM,OAEjD,OAAOd,EAAgB,aAAgBc,CAAW,EAC3C,OAAOd,EAAgB,cAAoB,UAAYA,EAAgB,eAAoB,QAClG,OAAOA,EAAgB,YAE/B,CATgBH,EAAA+B,GAAA,0BAkBhB,SAASC,GACL7B,EACAO,EACAuB,EACAC,EACAC,EACAC,EACI,CACJ,IAAIC,EACJ,GAAI,CAAC3B,GAAgB,OAAO,KAAKA,CAAY,EAAE,SAAW,EAAG,CACzD,IAAM4B,EAAkBnC,EACxB,OAAO,KAAKmC,CAAe,EAAE,QAASzB,GAAU,CACxCyB,EAAgBzB,CAAK,GAAKyB,EAAgBzB,CAAK,EAAE,MAAQsB,IACzDhC,EAAgB,OAAOU,CAAK,CAAC,EAAI,CAAC,EAClCwB,EAAmBxB,EAE3B,CAAC,CACL,CACA,GAAIwB,EAAkB,CAClB,IAAME,EAAgBH,EAAO,MAAS,MACtC,QAAWpB,KAAOuB,EACVA,EAAcvB,CAAG,EAAE,MAAQqB,GAC3BE,EAAcvB,CAAG,EAAE,OAG/B,CACJ,CA1BShB,EAAAgC,GAAA,cA+BT,SAASQ,IAAoB,CAE7B,CAFSxC,EAAAwC,GAAA,eAWF,SAASC,GACZtC,EACAO,EACAM,EACAC,EACI,CACA,OAAOd,EAAgB,cAAoB,SAC3CA,EAAgB,aAAgBc,CAAW,EAAIP,EAAaM,CAAG,EACxD,OAAOb,EAAgB,cAAoB,WAElDA,EAAgB,aAAkB,CAC9B,KAAMO,EAAa,KACnB,CAACO,CAAW,EAAGP,EAAaM,CAAG,CACnC,EAER,CAfgBhB,EAAAyC,GAAA,iCAsBT,SAASC,GAA8BvC,EAA0Bc,EAA2B,CAE3F,OAAOd,EAAgB,cAAoB,UAC3CA,EAAgB,aAAgBc,CAAW,IAAM,QAEjD,OAAOd,EAAgB,aAAgBc,CAAW,CAE1D,CAPgBjB,EAAA0C,GAAA,iCAiBhB,SAASC,GACLxC,EACAyC,EACAC,EACAC,EACkB,CAClB,IAAMC,EAAY5C,EAAgB,UAAWW,GAASA,EAAK,MAAWgC,EAAY,CAAC,CAAC,EACpF,OAAOC,IAAc,GAAK,OAAYA,CAC1C,CARS/C,EAAA2C,GAAA,wBAaF,IAAMK,GAAN,MAAMA,EAA8D,CAwB3E,EAxB2EhD,EAAAgD,GAAA,2BAOvEC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAMC,EACV,CACJ,CAAC,GANQH,GAOT,qBAQAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAMC,EACV,CACJ,CAAC,GAdQH,GAeT,8BAQAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAMC,EACV,CACJ,CAAC,GAtBQH,GAuBT,0BAvBG,IAAMI,GAANJ,GA6BMK,GAAN,MAAMA,EAA0C,CAwFvD,EAxFuDrD,EAAAqD,GAAA,iBAUnDJ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GATQF,GAUT,oBAWAJ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GApBQF,GAqBT,+BAWAJ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GA/BQF,GAgCT,6BAWAJ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GA1CQF,GA2CT,yBAWAJ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GArDQF,GAsDT,8BAWAJ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAhEQF,GAiET,4BAWAJ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GA3EQF,GA4ET,qCAWAJ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAtFQF,GAuFT,oCAvFG,IAAMG,GAANH,GA6FMI,GAAN,MAAMA,EAAoC,CAYjD,EAZiDzD,EAAAyD,GAAA,YAQ7CR,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAOQ,GAAsBC,GAAuBD,CAAS,EAAI,2BACjE,OAAQ1B,EACZ,CACJ,CAAC,GAPQyB,GAQT,8BARG,IAAMG,GAANH,GAcMI,GAAN,MAAMA,EAAoD,CAsCjE,EAtCiE7D,EAAA6D,GAAA,sBAQ7DZ,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAM7C,GACN,OAAQmC,EACZ,CACJ,CAAC,GAPQqB,GAQT,mBAYAZ,EAAA,CAVCC,EAAS,CACN,SAAU,CACN,KAAMtC,GACN,OAAQ+B,GACR,OAAQ,CAACxC,EAAiBO,IAAuB,CAC7CiB,GAAexB,EAAiBO,CAAY,CAChD,EACA,OAAQsB,EACZ,CACJ,CAAC,GAnBQ6B,GAoBT,qBASAZ,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAM7C,GACN,OAAQmC,EACZ,CACJ,CAAC,GA5BQqB,GA6BT,8BAQAZ,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM7C,EACV,CACJ,CAAC,GApCQwD,GAqCT,yBArCG,IAAMC,GAAND,GA2CME,GAAN,MAAMA,WAA0BD,EAA+C,CAwFtF,EAxFsF9D,EAAA+D,GAAA,qBAUlFd,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMc,EACV,CACJ,CAAC,EACAT,EAAS,CACN,MAAO,QACX,CAAC,GATQQ,GAUT,oBAWAd,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMc,EACV,CACJ,CAAC,EACAT,EAAS,CACN,MAAO,QACX,CAAC,GApBQQ,GAqBT,+BAWAd,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMc,EACV,CACJ,CAAC,EACAT,EAAS,CACN,MAAO,QACX,CAAC,GA/BQQ,GAgCT,6BAWAd,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMc,EACV,CACJ,CAAC,EACAT,EAAS,CACN,MAAO,QACX,CAAC,GA1CQQ,GA2CT,yBAWAd,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMc,EACV,CACJ,CAAC,EACAT,EAAS,CACN,MAAO,QACX,CAAC,GArDQQ,GAsDT,8BAWAd,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMc,EACV,CACJ,CAAC,EACAT,EAAS,CACN,MAAO,QACX,CAAC,GAhEQQ,GAiET,4BAWAd,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMc,EACV,CACJ,CAAC,EACAT,EAAS,CACN,MAAO,QACX,CAAC,GA3EQQ,GA4ET,qCAWAd,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMc,EACV,CACJ,CAAC,EACAT,EAAS,CACN,MAAO,QACX,CAAC,GAtFQQ,GAuFT,oCAvFG,IAAME,GAANF,GA0FP,SAASG,GAAwBC,EAAe,CAC5C,OAAOF,EACX,CAFSjE,EAAAkE,GAAA,wBAOF,IAAME,GAAN,MAAMA,WAAiBH,EAA6C,CAuB3E,EAvB2EjE,EAAAoE,GAAA,YAQvEnB,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAOQ,GAAsBC,GAAuBD,CAAS,EAAI,6BACjE,OAAQlB,EACZ,CACJ,CAAC,GAPQ4B,GAQT,8BAWAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOQ,GAAgCC,GAAuBD,CAAS,CAC3E,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GAlBQa,GAmBT,2BAnBG,IAAMC,GAAND,GA4BME,GAAN,MAAMA,WAAoBR,EAA6C,CAW9E,EAX8E9D,EAAAsE,GAAA,eAU1ErB,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAM7C,EACV,EACA,SAAUkE,EACd,CAAC,GATQD,GAUT,uBAVG,IAAME,GAANF,GAgBMG,GAAN,MAAMA,WAAoBP,GAAqBJ,EAAkB,CAAE,CA2B1E,EA3B0E9D,EAAAyE,GAAA,eAOtExB,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM7C,EACV,CACJ,CAAC,GANQoE,GAOT,2CAQAxB,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM7C,EACV,CACJ,CAAC,GAdQoE,GAeT,yBAQAxB,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAM7C,EACV,EACA,SAAUkE,EACd,CAAC,GAtBQE,GAuBT,uBAvBG,IAAMC,GAAND,GA6BME,GAAN,MAAMA,EAAoD,CAyCjE,EAzCiE3E,EAAA2E,GAAA,sBAM7D1B,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM7C,EACV,CACJ,CAAC,GALQsE,GAMT,mBAYA1B,EAAA,CAVCC,EAAS,CACN,SAAU,CACN,KAAMtC,GACN,OAAQ+B,GACR,OAAQ,CAACxC,EAAiBO,IAAuB,CAC7CiB,GAAexB,EAAiBO,CAAY,CAChD,EACA,OAAQsB,EACZ,CACJ,CAAC,GAjBQ2C,GAkBT,qBAOA1B,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM7C,EACV,CACJ,CAAC,GAxBQsE,GAyBT,qBAOA1B,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAM7C,EACV,CACJ,CAAC,GA/BQsE,GAgCT,wBAQA1B,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAM7C,EACV,EACA,SAAUkE,EACd,CAAC,GAvCQI,GAwCT,uBAxCG,IAAMC,GAAND,GA8CME,GAAN,MAAMA,EAAgD,CAW7D,EAX6D7E,EAAA6E,GAAA,oBAUzD5B,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOQ,GAAsBC,GAAuBD,CAAS,EAAI,QACrE,CACJ,CAAC,GATQmB,GAUT,0BAVG,IAAMC,GAAND,GAgBME,GAAN,MAAMA,WAAcvB,EAAkC,CA0B7D,EA1B6DxD,EAAA+E,GAAA,SAQzD9B,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAOQ,GAAsBC,GAAuBD,CAAS,EAAI,6BACjE,OAAQlB,EACZ,CACJ,CAAC,GAPQuC,GAQT,8BAcA9B,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOQ,GAAgCC,GAAuBD,CAAS,CAC3E,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GArBQwB,GAsBT,2BAtBG,IAAMC,GAAND,GCvsBA,IAAME,GAAN,MAAMA,EAAkF,CA4B/F,EA5B+FC,EAAAD,GAAA,qCAa3FE,EAAA,CAZCC,EAAS,CACN,SAAU,CACN,KAAM,CACFC,EACAC,EACAC,EACAC,EACAC,IAEAC,GAAoBL,EAAUC,EAAUC,EAAWC,EAAWC,CAAgB,EAAI,iBAC1F,CACJ,CAAC,GAZQR,GAaT,kCAcAE,EAAA,CAZCC,EAAS,CACN,SAAU,CACN,KAAM,CACFC,EACAC,EACAC,EACAC,EACAC,IAEAC,GAAoBL,EAAUC,EAAUC,EAAWC,EAAWC,CAAgB,EAAI,iBAC1F,CACJ,CAAC,GA1BQR,GA2BT,gCA3BG,IAAMU,GAANV,GAiCMW,GAAN,MAAMA,EAAsC,CAoBnD,EApBmDV,EAAAU,GAAA,eAS/CT,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMM,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GARQD,GAST,qBAUAT,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMM,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAlBQD,GAmBT,4BAnBG,IAAME,GAANF,GAyBMG,GAAN,MAAMA,EAA8C,CAoB3D,EApB2Db,EAAAa,GAAA,mBASvDZ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMY,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GARQE,GAST,qBAUAZ,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMY,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GAlBQE,GAmBT,4BAnBG,IAAME,GAANF,GAsBMG,GAAN,MAAMA,WAA0BJ,EAA4C,CAUnF,EAVmFZ,EAAAgB,GAAA,qBAS/Ef,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMM,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GARQK,GAST,8BATG,IAAMC,GAAND,GAYME,GAAN,MAAMA,WAA8BH,EAAoD,CAU/F,EAV+Ff,EAAAkB,GAAA,yBAS3FjB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMY,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GARQO,GAST,8BATG,IAAMC,GAAND,GAeME,GAAN,MAAMA,EAAgC,CA+B7C,EA/B6CpB,EAAAoB,GAAA,YAezCnB,EAAA,CAdCC,EAAS,CACN,SAAU,CACN,KAAM,CACFC,EACAC,EACAC,EACAC,EACAC,IACSC,GAAoBL,EAAUC,EAAUC,EAAWC,EAAWC,CAAgB,EAAI,WACnG,CACJ,CAAC,EACAI,EAAS,CACN,MAAO,QACX,CAAC,GAdQS,GAeT,sBAeAnB,EAAA,CAdCC,EAAS,CACN,SAAU,CACN,KAAM,CACFC,EACAC,EACAC,EACAC,EACAC,IACSC,GAAoBL,EAAUC,EAAUC,EAAWC,EAAWC,CAAgB,EAAI,WACnG,CACJ,CAAC,EACAI,EAAS,CACN,MAAO,QACX,CAAC,GA7BQS,GA8BT,yBA9BG,IAAMC,GAAND,GAoCME,GAAN,MAAMA,EAAwC,CA+BrD,EA/BqDtB,EAAAsB,GAAA,gBAejDrB,EAAA,CAdCC,EAAS,CACN,SAAU,CACN,KAAM,CACFC,EACAC,EACAC,EACAC,EACAC,IACSO,GAAsBX,EAAUC,EAAUC,EAAWC,EAAWC,CAAgB,EAAI,WACrG,CACJ,CAAC,EACAI,EAAS,CACN,MAAO,QACX,CAAC,GAdQW,GAeT,sBAeArB,EAAA,CAdCC,EAAS,CACN,SAAU,CACN,KAAM,CACFC,EACAC,EACAC,EACAC,EACAC,IACSO,GAAsBX,EAAUC,EAAUC,EAAWC,EAAWC,CAAgB,EAAI,WACrG,CACJ,CAAC,EACAI,EAAS,CACN,MAAO,QACX,CAAC,GA7BQW,GA8BT,yBA9BG,IAAMC,GAAND,GAoCME,GAAN,MAAMA,EAAkD,CAgE/D,EAhE+DxB,EAAAwB,GAAA,qBAS3DvB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMM,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GARQa,GAST,wBASAvB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMM,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAjBQa,GAkBT,sBASAvB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMM,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GA1BQa,GA2BT,qBASAvB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMM,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAnCQa,GAoCT,wBASAvB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMM,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GA5CQa,GA6CT,+BASAvB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMM,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GArDQa,GAsDT,4BASAvB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMM,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GA9DQa,GA+DT,0BA/DG,IAAMC,GAAND,GAqEME,GAAN,MAAMA,EAA0D,CAgEvE,EAhEuE1B,EAAA0B,GAAA,yBASnEzB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMY,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GARQe,GAST,wBASAzB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMY,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GAjBQe,GAkBT,sBASAzB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMY,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GA1BQe,GA2BT,qBASAzB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMY,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GAnCQe,GAoCT,wBASAzB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMY,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GA5CQe,GA6CT,+BASAzB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMY,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GArDQe,GAsDT,4BASAzB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMY,EACV,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GA9DQe,GA+DT,0BA/DG,IAAMC,GAAND,GCzPA,IAAME,GAAN,MAAMA,EAA8B,CAE3C,EAF2CC,EAAAD,GAAA,WAApC,IAAME,GAANF,GAIMG,GAAN,MAAMA,EAA8B,CAE3C,EAF2CF,EAAAE,GAAA,WAApC,IAAMC,GAAND,GCHA,IAAME,GAAN,MAAMA,EAA0C,CAOvD,EAPuDC,EAAAD,GAAA,iBAMnDE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAMC,EACV,CACJ,CAAC,GALQJ,GAMT,8BANG,IAAMK,GAANL,GASMM,GAAN,MAAMA,EAAkD,CAO/D,EAP+DL,EAAAK,GAAA,qBAM3DJ,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,GALQD,GAMT,8BANG,IAAME,GAANF,GCTA,IAAMG,GAAN,MAAMA,EAA8D,CAO3E,EAP2EC,EAAAD,GAAA,2BAMvEE,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAMC,EACV,CACJ,CAAC,GALQJ,GAMT,8BANG,IAAMK,GAANL,GCAA,IAAMM,GAAN,MAAMA,EAAkC,CAY/C,EAZ+CC,EAAAD,GAAA,aAW3CE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAgCC,GAAuBD,CAAS,CAC3E,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAVQN,GAWT,6BAXG,IAAMO,GAANP,GCAA,IAAMQ,GAAN,MAAMA,EAAsF,CAgBnG,EAhBmGC,EAAAD,GAAA,uCAO/FE,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAoBC,EAAoBC,EAAmBC,IAC9DC,GAAoBJ,EAAUC,EAAUC,EAAWC,CAAS,EAAI,iBACxE,CACJ,CAAC,GANQP,GAOT,kCAQAE,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAoBC,EAAoBC,EAAmBC,IAC9DC,GAAoBJ,EAAUC,EAAUC,EAAWC,CAAS,EAAI,iBACxE,CACJ,CAAC,GAdQP,GAeT,gCAfG,IAAMS,GAANT,GAkBMU,GAAN,MAAMA,EAA0D,CAoBvE,EApBuET,EAAAS,GAAA,yBASnER,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMK,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GARQD,GAST,qBAUAR,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMK,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAlBQD,GAmBT,4BAnBG,IAAME,GAANF,GAsBMG,GAAN,MAAMA,WAAoCD,EAAgE,CAUjH,EAViHX,EAAAY,GAAA,+BAS7GX,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMK,EACV,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GARQE,GAST,8BATG,IAAMC,GAAND,GCxCA,IAAME,GAAN,MAAMA,EAAgD,CAyC7D,EAzC6DC,EAAAD,GAAA,oBASzDE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAgCC,GAAuBD,CAAS,CAC3E,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GARQN,GAST,qCAUAE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAgCC,GAAuBD,CAAS,CAC3E,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAlBQN,GAmBT,+BAUAE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAD,EAAS,CACN,MAAO,QACX,CAAC,GA5BQN,GA6BT,uBAUAE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAD,EAAS,CACN,MAAO,QACX,CAAC,GAtCQN,GAuCT,gCAvCG,IAAMQ,GAANR,GCAA,IAAMS,GAAN,MAAMA,EAAwC,CAWrD,EAXqDC,EAAAD,GAAA,gBAUjDE,EAAA,CATCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAoBC,EAAoBC,IAC3CC,GAA0BH,EAAUC,EAAUC,CAAS,EAAI,eACnE,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GATQR,GAUT,0BAVG,IAAMS,GAANT,GAaMU,GAAN,MAAMA,EAAkE,CAoB/E,EApB+ET,EAAAS,GAAA,6BAS3ER,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GARQE,GAST,uBAUAR,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAlBQE,GAmBT,4BAnBG,IAAMC,GAAND,GAsBME,GAAN,MAAMA,WAAoCD,EAAoE,CAAC,EAADV,EAAAW,GAAA,+BAA9G,IAAMC,GAAND,GAEME,GAAN,MAAMA,WACDH,EACmC,CAAC,EAADV,EAAAa,GAAA,gCAFxC,IAAMC,GAAND,GAIME,GAAN,MAAMA,WACDL,EACuC,CAAC,EAADV,EAAAe,GAAA,oCAF5C,IAAMC,GAAND,GAIME,GAAN,MAAMA,WACDP,EACqC,CAAC,EAADV,EAAAiB,GAAA,kCAF1C,IAAMC,GAAND,GAIME,GAAN,MAAMA,WACDT,EACqC,CAAC,EAADV,EAAAmB,GAAA,kCAF1C,IAAMC,GAAND,GAIME,GAAN,MAAMA,EAA4C,CAOzD,EAPyDrB,EAAAqB,GAAA,kBAAlD,IAAMC,GAAND,GCrDA,IAAME,GAAN,MAAMA,EAAgD,CAU7D,EAV6DC,EAAAD,GAAA,oBASzDE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAgCC,GAAuBD,CAAS,CAC3E,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GARQN,GAST,6BATG,IAAMO,GAANP,GCHP,IAAAQ,GAA6B,SAUtB,IAAMC,GAAN,MAAMA,EAAsD,CA4BnE,EA5BmEC,EAAAD,GAAA,uBAa/DE,EAAA,CAZCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAoBC,EAAoBC,IAC3CC,GAA0BH,EAAUC,EAAUC,CAAS,EAC3D,OAAQ,CAACE,EAAiBC,EAAcC,EAAKC,IAAsB,CAC/DC,GAAuBJ,EAAiBC,EAAcC,EAAKC,CAAW,CAC1E,EACA,OAAQ,CAACH,EAAiBK,EAAeC,EAAMH,IAAsB,CACjEI,GAAuBP,EAAiBG,CAAW,CACvD,CACJ,CACJ,CAAC,GAZQX,GAaT,oBAcAE,EAAA,CAZCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAoBC,EAAoBC,IAC3CC,GAA0BH,EAAUC,EAAUC,CAAS,EAC3D,OAAQ,CAACE,EAAiBC,EAAcC,EAAKC,IAAsB,CAC/DK,GAA8BR,EAAiBC,EAAcC,EAAKC,CAAW,CACjF,EACA,OAAQ,CAACH,EAAiBK,EAAeC,EAAMH,IAAsB,CACjEM,GAA8BT,EAAiBG,CAAW,CAC9D,CACJ,CACJ,CAAC,GA1BQX,GA2BT,2BA3BG,IAAMkB,GAANlB,GA8BMmB,GAAN,MAAMA,EAAgE,CAwB7E,EAxB6ElB,EAAAkB,GAAA,6BAOzEjB,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAoBC,EAAoBC,IAC3CC,GAA0BH,EAAUC,EAAUC,CAAS,EAAI,eACnE,CACJ,CAAC,GANQa,GAOT,qBAQAjB,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAoBC,EAAoBC,IAC3CC,GAA0BH,EAAUC,EAAUC,CAAS,EAAI,eACnE,CACJ,CAAC,GAdQa,GAeT,8BAQAjB,EAAA,CANCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAoBC,EAAoBC,IAC3CC,GAA0BH,EAAUC,EAAUC,CAAS,EAAI,eACnE,CACJ,CAAC,GAtBQa,GAuBT,0BAvBG,IAAMC,GAAND,GA0BME,GAAN,MAAMA,EAA8C,CA8G3D,EA9G2DpB,EAAAoB,GAAA,mBASvDnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAe,EAAS,CACN,MAAO,QACX,CAAC,GARQD,GAST,oBAoBAnB,EAAA,CAlBCC,EAAS,CACN,SAAU,CACN,KAAMI,GACN,OAASgB,GAA8C,CACnD,IAAMC,EAAaD,EAAc,aACjC,GAAI,OAAOC,GAAU,SACjB,OAAOA,EACJ,GAAI,OAAOA,GAAU,SACxB,MAAO,CACH,KAAMA,CACV,CAER,CACJ,CACJ,CAAC,EACAF,EAAS,CACN,MAAO,QACX,CAAC,GA5BQD,GA6BT,4BAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAe,EAAS,CACN,MAAO,QACX,CAAC,GAtCQD,GAuCT,+BAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAe,EAAS,CACN,MAAO,QACX,CAAC,GAhDQD,GAiDT,6BAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAe,EAAS,CACN,MAAO,QACX,CAAC,GA1DQD,GA2DT,yBAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAe,EAAS,CACN,MAAO,QACX,CAAC,GApEQD,GAqET,8BAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAe,EAAS,CACN,MAAO,QACX,CAAC,GA9EQD,GA+ET,4BAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAe,EAAS,CACN,MAAO,QACX,CAAC,GAxFQD,GAyFT,qCAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAe,EAAS,CACN,MAAO,QACX,CAAC,GAlGQD,GAmGT,oCAUAnB,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAe,EAAS,CACN,MAAO,QACX,CAAC,GA5GQD,GA6GT,2BA7GG,IAAMI,GAANJ,GClEP,IAAAK,GAA0C,SAInC,IAAMC,GAAN,MAAMA,EAA8E,CAoH3F,EApH2FC,EAAAD,GAAA,mCAWvFE,EAAA,CAVCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAqBC,EAAoBC,IAC5CC,GAAqBH,EAAWC,EAAUC,EAAW,UAAU,EACnE,IAAK,QACT,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAVQR,GAWT,4BAeAE,EAAA,CAbCC,EAAS,CACN,SAAU,CACN,KAAMI,GACN,OAAQ,CAACE,EAAiDH,IAE/CA,EAEX,OAAQ,EACZ,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAzBQR,GA0BT,kBAYAE,EAAA,CAVCC,EAAS,CACN,SAAU,CACN,KAAM,CAACC,EAAqBC,EAAoBC,IAC5CC,GAAqBH,EAAWC,EAAUC,EAAW,UAAU,EACnE,IAAK,WACT,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GArCQR,GAsCT,gCAUAE,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAMI,EACV,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GA/CQR,GAgDT,qBAgCAE,EAAA,CA9BCC,EAAS,CACN,SAAU,CACN,KAAMI,GACN,OAASF,GAED,CAACA,EAAS,MAAQA,EAAS,KAAK,WAAW,MAAG,yBAAyB,GAAG,EACnE,MAAG,yBAAyB,IAEhC,GAEX,OAAQ,CAACA,EAAgDK,IAAkD,CAEvG,IAAIC,EAAO,GACP,SAAUD,IACVC,GAAQD,EAAO,MAEf,cAAeA,IACXA,EAAO,YAAc,yBACrBC,GAAQ,WAERA,GAAQD,EAAO,WAGvBL,EAAS,KAAOM,CACpB,CACJ,CACJ,CAAC,EACAH,EAAS,CACN,MAAO,QACX,CAAC,GA/EQR,GAgFT,oBAwBAE,EAAA,CAtBCC,EAAS,CACN,SAAU,CACN,KAAMI,GACN,OAASF,GAGD,CAACA,EAAS,MAAQA,EAAS,KAAK,WAAW,MAAG,yBAAyB,GAAG,EACtE,CAACA,EAAS,MAAQA,EAAS,OAAS,cAC7B,yBAECA,EAAS,KAAgB,MAAM,MAAG,yBAAyB,IAAI,MAAM,EAI9EA,EAAS,KAEpB,OAAQ,EACZ,CACJ,CAAC,EACAG,EAAS,CACN,MAAO,QACX,CAAC,GAvGQR,GAwGT,yBAWAE,EAAA,CATCC,EAAS,CACN,SAAU,CACN,KAAMI,GACN,IAAK,MACT,CACJ,CAAC,EACAC,EAAS,CACN,MAAO,QACX,CAAC,GAlHQR,GAmHT,4BAnHG,IAAMY,GAANZ,GCLP,IAAAa,GAAA,GAAAC,GAAAD,GAAA,mBAAAE,GAAA,eAAAC,GAAA,eAAAC,KCSA,SAASC,GAAkBC,EAA+B,CAT1D,IAAAC,EAAAC,EAAAC,EAAAC,IAUQF,GAAAD,EAAAD,EAAgB,QAAhB,YAAAC,EAA2B,KAA3B,MAAAC,EAA+B,UAAWE,GAAAD,EAAAH,EAAgB,QAAhB,YAAAG,EAA2B,KAA3B,MAAAC,EAA+B,YACzE,OAAO,KAAKJ,CAAe,EAAE,QAASK,GAAQ,OAAOL,EAAgBK,CAAG,CAAC,CAEjF,CAJSC,EAAAP,GAAA,qBAST,SAASQ,IAAoB,CAE7B,CAFSD,EAAAC,GAAA,eAOT,SAASC,IAAoB,CAE7B,CAFSF,EAAAE,GAAA,eAWF,IAAMC,GAAN,KAAkD,CA6CzD,EA7CyDH,EAAAG,GAAA,cASrDC,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAsBC,GAAuBD,CAAS,EAAI,SACjE,OAAQJ,GACR,OAAQD,GACR,OAAQR,EACZ,CACJ,CAAC,GARQU,GAST,qBAiBAC,EAAA,CARCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAgCC,GAAuBD,CAAS,CAC3E,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAzBQL,GA0BT,iCAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAsBC,GAAuBD,CAAS,EAAI,mBACrE,CACJ,CAAC,GAhCQH,GAiCT,2BAOAC,EAAA,CALCC,EAAS,CACN,SAAU,CACN,KAAOC,GAAsBC,GAAuBD,CAAS,CACjE,CACJ,CAAC,GAvCQH,GAwCT,6CAIAC,EAAA,CADCK,GAAQ,eAAe,GA3CfN,GA4CT,yBA5CSA,GAANC,EAAA,CAJNM,GAAsB,CACnB,GAAI,2DACJ,OAAQ,0CACZ,CAAC,GACYP,ICnCb,IAAAQ,GAAmB,SAQZ,IAAMC,GAAN,KAAkD,CAmBzD,EAnByDC,EAAAD,GAAA,cAErDE,EAAA,CADCC,GAAQ,QAAQ,GADRH,GAET,sBAGAE,EAAA,CADCC,GAAQ,QAAQ,GAJRH,GAKT,sBAUAE,EAAA,CARCE,EAAS,CACN,SAAU,CACN,KAAOC,GAAgCC,GAAuBD,CAAS,CAC3E,CACJ,CAAC,EACAE,EAAS,CACN,MAAO,QACX,CAAC,GAdQP,GAeT,iCAGAE,EAAA,CADCC,GAAQ,UAAU,GAjBVH,GAkBT,wBAlBSA,GAANE,EAAA,CAJNM,GAAsB,CACnB,GAAI,GAAG,MAAG,0BAA0B,gBACpC,OAAQ,MAAG,0BACf,CAAC,GACYR,ICNN,IAAMS,GAAN,MAAMA,EAAc,CAAC,EAADC,EAAAD,GAAA,iBAApB,IAAME,GAANF,GCCP,IAAAG,GAA2B,SAM3B,IAAMC,GAAc,CAEpB,EAEMC,GAAa,CAEnB,EAEMC,GAAa,CACf,MAAgBC,GAChB,YAAsBC,GACtB,4BAAsCC,GACtC,kCAA4CC,EAChD,EAEMC,GAAY,CACd,CAAC,cAAW,kBAAkB,EAAGP,GACjC,CAAC,cAAW,UAAU,EAAGC,GACzB,CAAC,cAAW,UAAU,EAAGC,EAC7B,EAKaM,GAAN,MAAMA,WAAkCC,EAAqD,CAChG,aAAc,CACV,MAAMC,GAAUC,GAAOJ,EAAS,CACpC,CACJ,EAJoGK,EAAAJ,GAAA,6BAA7F,IAAMK,GAANL,GnBfP,IAAAM,GAAkC,sDAUlC,SAASC,GACLC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACF,CArCF,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAsCI,IAAMC,EAAoBZ,EAAiB,WAAW,YAChDa,EAAcT,GAAYA,IAAa,IAAI,qBAAkB,QAAQ,GAAKA,EAAW,kBAAe,UACpGU,EAAYF,EAAkBC,CAAW,EAC/C,GAAIC,GAAa,OAAO,KAAKA,EAAU,UAAU,EAAE,OAAS,EAAG,CAC3Df,EAAO,QAAU,CAAC,EAClB,QAAWgB,KAAaD,EAAU,WAAY,CAE1C,IAAME,EADoBJ,EAAkBC,CAAW,EAAiB,WAAWE,CAAS,EAChD,KAAK,MAAME,CAAsB,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,EAC9FlB,EAAO,QAAQgB,CAAS,EAAId,EAAQ,eAAeC,EAAUc,CAAkB,EAC/E,IAAME,EAAmBb,GAAUD,EACnCe,GACIpB,EAAO,QAAQgB,CAAS,EACxBf,EAAiB,SACjBY,EAAkBI,CAAkB,EACpCb,EACA,CAACY,EAAWG,CAAgB,EAC5BA,EACAlB,EAAiB,MACrB,EACAoB,GAAqBrB,EAAO,QAASgB,CAAS,CAClD,CACAK,GAAqBrB,EAAQ,SAAS,CAC1C,KAAO,CACH,IAAMsB,GAASV,GAAAD,GAAAD,GAAAD,GAAAD,GAAAD,EAAAN,EAAiB,SAAS,SAAS,IAAnC,YAAAM,EAAsC,UAAtC,YAAAC,EAA+C,UAA/C,YAAAC,EAAyDL,KAAzD,YAAAM,EACT,UADS,YAAAC,EACA,WADA,YAAAC,EACU,OACrB,CAACU,GAASA,EAAM,MAAM,OAAS,IAC/BC,GAAItB,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAASuB,EAAQ,EAAE,aAAa,EAChC,SAAU,CACN,KAAM,eACV,CACJ,CAAC,CAET,CACJ,CA5CSC,EAAA1B,GAAA,mBAsDT,SAAS2B,GACLzB,EACA0B,EACAzB,EACAC,EACAC,EACAwB,EAA+B,kBAAe,UAC9CtB,EACF,CACE,IAAMO,EAAoBZ,EAAiB,WAAW,YAClDkB,EAAmBb,EAEnB,CAACa,GACD,CAAC,kBAAe,UAAW,GAAG,kBAAe,SAAS,iBAAiB,EAAE,QAAQS,CAAoB,IAAM,KAE3GT,EAAmB,IAAI,qBAAkB,QAAQ,IAAIS,EAAqB,MAAM,IAAI,EAAE,IAAI,CAAC,IAE/F,IAAMC,EAAoBhB,EAAkB,GAAG,kBAAe,OAAO,IAAIe,CAAoB,GAAG,EAChG,GAAI,OAAOC,GAAsB,SAC7B,QAAWC,KAAaD,EAAkB,WAAY,CAClD,IAAME,EAAmBF,EAAkB,WAAWC,CAAS,EAC/D,GAAI,OAAOC,GAAqB,UAAYA,EAAiB,KAAM,CAC/D,IAAMC,EAAgBC,GAAiBF,EAAiB,IAAI,EACtDd,EAAqBe,EAAc,MAAM,GAAG,EAAE,CAAC,EACrDL,EAAY,QAAQ,QAAQG,CAAS,EAAI5B,EAAQ,eAAeC,EAAUc,CAAkB,EAE5FG,GACIO,EAAY,QAAQ,QAAQG,CAAS,EACrC7B,EAAiB,SACjBY,EAAkBmB,CAAa,EAC/B5B,EACA,CAAC0B,EAAWX,CAAgB,CAChC,EACAE,GAAqBM,EAAY,QAAQ,QAASG,CAAS,CAC/D,CACJ,CAER,CArCSL,EAAAC,GAAA,iBAuCT,SAASQ,GACLjC,EACAD,EACAE,EACAC,EACAC,EACAwB,EAA+B,kBAAe,UAC9CtB,EACF,CACE,IAAM6B,EAAkBjC,EAAQ,eAAeC,EAAU,kBAAe,QAAS,CAC7E,QAAS,CAAC,CACd,CAAC,EACGiC,EACA,CAAC9B,GAAUN,GAAU,UAAWA,EAChCoC,EAAQpC,EAAO,MAEfoC,EAAQpC,EAEZoC,EAAM,QAAUD,EAEhBf,GACIgB,EAAM,QACNnC,EAAiB,SACjBA,EAAiB,WAAW,YAAY,kBAAe,SAAS,EAChEG,EACA,CAAC,CACL,EACAsB,GAAczB,EAAkBmC,EAAOlC,EAASC,EAAUC,EAAWwB,EAAsBtB,CAAM,EAEjGe,GAAqBe,EAAM,QAAS,SAAS,EAC7Cf,GAAqBe,EAAO,SAAS,CACzC,CA/BSX,EAAAS,GAAA,mBAuCT,SAASG,GAAgCxB,EAA+ByB,EAA4C,CAjKpH,IAAA/B,EAkKI,IAAMgC,GAAqBhC,EAAAM,EAAkByB,CAAc,IAAhC,YAAA/B,EAAoC,aAAU,gBAEzE,OADyBgC,GAAA,YAAAA,EAAoB,OAAOA,EAAmB,YAAY,GAAG,EAE1F,CAJSd,EAAAY,GAAA,mCAeT,SAASG,GACLvC,EACAD,EACAE,EACAC,EACAC,EACI,CACJ,IAAMS,EAAoBZ,EAAiB,WAAW,YAEtDD,EAAO,MAAQE,EAAQ,eAAeC,EAAU,kBAAe,QAAQ,EACvE,IAAMsC,EAAkB5B,EAAkB,kBAAe,QAAQ,EAC3D6B,EAAsBD,EAAgB,aAAU,cAAc,EACpErB,GAAuBpB,EAAO,MAAOC,EAAiB,SAAUwC,EAAiBrC,EAAW,CACxFqC,EAAgB,aAAU,GAAG,EAC7BC,GAAA,YAAAA,EAAqB,OAAOA,EAAoB,YAAY,GAAG,EACnE,CAAC,EACD1C,EAAO,MAAM,QAAUE,EAAQ,eAAeC,EAAU,kBAAe,QAAS,CAAE,QAAS,CAAC,CAAE,CAAC,EAC/FiB,GACIpB,EAAO,MAAM,QACbC,EAAiB,SACjBY,EAAkB,kBAAe,gBAAgB,EACjDT,EACA,CAAC,CACL,EAEA,IAAMuC,EAAsB9B,EAAkB,kBAAe,QAAQ,EAAE,aAAU,cAAc,EAC/F,GAAI8B,EAAqB,CACrB,IAAMC,EAAkB/B,EAAkB,kBAAe,QAAQ,EAC3Dc,EAAe3B,EAAO,MAAQE,EAAQ,eACxCC,EACA,kBAAe,QACnB,EACA+B,GAAgBjC,EAAkBD,EAAQE,EAASC,EAAUC,CAAS,EACtE,IAAMC,EAAWsC,EAAoB,OAAOA,EAAoB,YAAY,GAAG,CAAC,EAChFvB,GAAuBO,EAAa1B,EAAiB,SAAU2C,EAAiBxC,EAAW,CACvFwC,EAAgB,aAAU,GAAG,EAC7BvC,CACJ,CAAC,EAEDN,GAAgB4B,EAAa1B,EAAkBC,EAASC,EAAUC,EAAW,OAAWC,CAAQ,CACpG,CACJ,CAzCSoB,EAAAe,GAAA,kBAgDT,SAASK,GAAwBC,EAAgD,CAC7E,IAAIC,EACJ,OAAID,EAAW,QAAQ,kBAAe,WAAW,EAAI,GACjDC,EAAW,kBAAe,YACnBD,EAAW,QAAQ,kBAAe,WAAW,EAAI,GACxDC,EAAW,kBAAe,YACnBD,IAAe,kBAAe,qBACrCC,EAAW,kBAAe,oBAEvBA,CACX,CAVStB,EAAAoB,GAAA,2BAoBT,SAASG,GACL/C,EACAD,EACAE,EACAC,EACAC,EACI,CACJ,IAAM6C,EAAyCjD,EAAO,MAAmB,MAAQE,EAAQ,eACrFC,EACA,kBAAe,gBACnB,EACMU,EAAoBZ,EAAiB,WAAW,YAGtDmB,GACI6B,EACAhD,EAAiB,SACjBY,EAAkB,kBAAe,gBAAgB,EACjDT,EACA,CAAC,CACL,EACA,IAAM8C,EAAarC,EAAkB,kBAAe,gBAAgB,EAAE,WAChEsC,EAAa,OAAO,QAAQD,CAAU,EAAE,KAC1C,CAACE,EAAGC,IAAMD,EAAE,CAAC,EAAE,aAAU,aAAa,EAAIC,EAAE,CAAC,EAAE,aAAU,aAAa,CAC1E,EACA,QAAWC,KAAWH,EAElB,GAAIG,EAAQ,CAAC,EAAE,KAAS,CACpB,IAAMC,EAAiBD,EAAQ,CAAC,EAAE,KAAQ,MAAMpC,CAAsB,EAAE,CAAC,EACnE6B,EAAWF,GAAwBU,CAAc,EACjDC,EAAaP,EAAgBK,EAAQ,CAAC,CAAC,EAAIpD,EAAQ,eAAeC,EAAU4C,CAAQ,EACpF5B,EAAmBkB,GAAgCxB,EAAmB0C,CAAc,EACrF1C,EAAkB0C,CAAc,EAAE,YACnCnC,GACIoC,EACAvD,EAAiB,SACjBY,EAAkB0C,CAAc,EAChCnD,EACA,CAACkD,EAAQ,CAAC,EAAGnC,CAAgB,CACjC,EACI4B,IAAa,kBAAe,aAC5BhD,GACIyD,EACAvD,EACAC,EACAC,EACAC,EACA,GAAG,kBAAe,eAAe,KAAKkD,EAAQ,CAAC,CAAC,GAChDnC,CACJ,GAGJ,OAAO,KAAKqC,CAAS,EAAE,SAAW,GAClC,OAAOP,EAAgBK,EAAQ,CAAC,CAAC,CAEzC,CAEJjC,GAAqBrB,EAAO,MAAO,OAAO,CAC9C,CA1DSyB,EAAAuB,GAAA,iBAqEF,SAASS,GACZxD,EACAD,EACAE,EACAC,EACAC,EACAsD,EACI,CAcJ,GAZAtC,GAAuBpB,EAAQC,EAAiB,SAAUA,EAAiB,WAAYG,EAAW,CAAC,CAAC,EAGpGJ,EAAO,UAAYE,EAAQ,eAAeC,EAAU,kBAAe,SAAS,EAC5EiB,GACIpB,EAAO,UACPC,EAAiB,SACjBA,EAAiB,WAAW,YAAY,kBAAe,SAAS,EAChEG,EACA,CAAC,CACL,EAEIsD,IAAe,cAAW,WAAY,CACtC,IAAIpB,EAAiB,kBAAe,MAChCM,EAAkB3C,EAAiB,WAAW,YAAYqC,CAAc,EACxEV,EACAgB,EAAgB,OAEhBN,EAAiBM,EAAgB,KAAK,MAAM1B,CAAsB,EAAE,CAAC,EACrE0B,EAAkB3C,EAAiB,WAAW,YAAYqC,CAAc,EACxEV,EAAwBgB,EAAgB,WAAW,QAAuB,KAAK,MAC3E1B,CACJ,EAAE,CAAC,GAEPlB,EAAO,MAAQE,EAAQ,eAAeC,EAAU,kBAAe,KAAK,EACpE,IAAMgB,EAAmBkB,GACrBpC,EAAiB,WAAW,YAC5BqC,CACJ,EACAlB,GAAuBpB,EAAO,MAAOC,EAAiB,SAAU2C,EAAiBxC,EAAW,CACxFkC,EACAnB,CACJ,CAAC,EAEDe,GAAgBjC,EAAkBD,EAAQE,EAASC,EAAUC,EAAWwB,CAAoB,EAE5F7B,GACIC,EAAO,MACPC,EACAC,EACAC,EACAC,EACAwB,EACAT,CACJ,EACA6B,GAAc/C,EAAkBD,EAAQE,EAASC,EAAUC,CAAS,CACxE,MAAWsD,IAAe,cAAW,oBACjClB,GAAevC,EAAkBD,EAAQE,EAASC,EAAUC,CAAS,CAE7E,CA1DgBqB,EAAAgC,GAAA,eAkET,SAASE,GACZ1D,EACAyD,EACiC,CAGjC,GADAE,GAAS,EACL,CAAC3D,EAAiB,WAClB,OAEJ,GAAI,CAACA,EAAiB,SAAS,mBAAgB,GAAG,GAAK,CAACA,EAAiB,SAAS,mBAAgB,GAAG,EAAE,QAAY,CAC/GsB,GAAItB,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAASuB,EAAQ,EAAE,WAAW,EAC9B,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,GAAG,CAC/B,CACJ,CAAC,EACD,MACJ,CACA,IAAMqC,EAAU5D,EAAiB,SAAS,mBAAgB,GAAG,EAAE,QAAW,QAC1E,GAAI,CAAC4D,EAAS,CACVtC,GAAItB,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAASuB,EAAQ,EAAE,WAAW,EAC9B,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,GAAG,CAC/B,CACJ,CAAC,EACD,MACJ,CACA,IAAMtB,EAAU,IAAI4D,GAEd9D,EAASE,EAAQ,mBAAmB,cAAW,UAAU,EAE/D,QAAW6D,KAAOF,EAAS,CACvB,IAAMG,EAASH,EAAQE,CAAG,EACpB5D,EAAW8D,GAAcD,CAA2B,EAC1D,GAAI,SAAUA,IAAW7D,IAAa,cAAW,YAAcA,IAAa,cAAW,oBAAqB,CACxGsD,GAAYxD,EAAkBD,EAAQE,EAAS,cAAW,WAAY6D,EAAKL,CAAU,EACrF,KACJ,CACJ,CAEA,OAAO1D,CACX,CA9CgByB,EAAAkC,GAAA,0BoBzXhB,IAAAO,GAOO,SACPC,GAAkC,sDAe3B,SAASC,GAAcC,EAAmBC,EAAY,GAAO,CAzBpE,IAAAC,EAAAC,EAAAC,EA2BI,IAAMC,GADUJ,GAAYC,EAAAF,EAAU,MAAM,GAAG,EAAE,CAAC,IAAtB,YAAAE,EAAyB,MAAM,EAAG,IAAMF,GAC1C,MAAM,IAAI,qBAAkB,QAAQ,EAAE,EAChE,MAAO,IAAGG,EAAAE,EAAU,CAAC,IAAX,YAAAF,EAAc,QAAQ,MAAO,IAAI,IAAI,qBAAkB,QAAQ,IAAGC,EAAAC,EAAU,CAAC,IAAX,YAAAD,EAAc,QAAQ,MAAO,IAAI,EACjH,CAJgBE,EAAAP,GAAA,iBAWT,SAASQ,GAAgBC,EAAoB,CAChD,OAAOA,EAAW,QAAQ,KAAM,IAAI,EAAE,QAAQ,MAAO,IAAI,CAC7D,CAFgBF,EAAAC,GAAA,mBAchB,SAASE,GACLC,EACAC,EACAC,EACAZ,EACAa,EACAC,EACF,CACE,GAAIH,EAAgB,QAAY,CAC5BC,EAAWZ,CAAS,EAAE,MAAM,QAAU,CAAC,EACvC,IAAIe,EACEC,EAAYN,EAAiB,WAAW,YAAYH,GAAgBO,CAAiB,CAAC,EAC5F,GAAIE,EACA,QAAWC,KAAaD,EAAU,WAAY,CACnBA,EAAU,WAAWC,CAAS,EAClC,KAAK,QAAQ,kBAAe,cAAc,EAAI,GAC7DF,EAAkB,kBAAe,eAEjCA,EAAkB,kBAAe,sBAErC,IAAMG,EAAiBL,EAAQ,eAAe,cAAW,WAAYE,CAAe,EAEpFI,GACID,EACAR,EAAiB,SACjBA,EAAiB,WAAW,YAAYK,CAAe,EACvDL,EAAiB,UACjB,CAACO,CAAS,EACVH,CACJ,EACI,OAAO,KAAKI,CAAc,EAAE,OAAS,IACrCN,EAAWZ,CAAS,EAAE,MAAM,QAAQiB,CAAS,EAAIC,EAEzD,CAER,CACJ,CApCSZ,EAAAG,GAAA,4BA8CT,SAASW,GACLV,EACAV,EACAY,EACAC,EACAC,EAA4Bd,EAC9B,CACE,IAAMqB,EAAoBX,EAAiB,WAAW,YAClD,GAAG,kBAAe,OAAO,IAAIH,GAAgBO,CAAiB,CAAC,GACnE,EACA,GAAIO,EACA,QAAWC,KAAaD,EAAkB,WAAe,CACrD,IAAME,EAAmBF,EAAkB,WAAWC,CAAS,EAC/D,GAAI,OAAOC,GAAqB,UAAYA,EAAiB,KAAM,CAC/D,IAAMC,EAAgBC,GAAiBF,EAAiB,IAAI,EACtDG,EAAqBF,EAAc,MAAM,GAAG,EAAE,CAAC,EACrDZ,EAAWZ,CAAS,EAAE,MAAM,QAAQ,QAAQsB,CAAS,EAAIT,EAAQ,eAC7D,cAAW,WACXa,CACJ,EACAP,GACIP,EAAWZ,CAAS,EAAE,MAAM,QAAQ,QAAQsB,CAAS,EACrDZ,EAAiB,SACjBA,EAAiB,WAAW,YAAYc,CAAa,EACrDd,EAAiB,UACjB,CAACY,CAAS,EACVR,CACJ,EACI,OAAO,KAAKF,EAAWZ,CAAS,EAAE,MAAM,QAAQ,QAAQsB,CAAS,CAAC,EAAE,SAAW,GAC/E,OAAOV,EAAWZ,CAAS,EAAE,MAAM,QAAQ,QAAQsB,CAAS,CAEpE,CACJ,CAER,CAlCShB,EAAAc,GAAA,4BA6CT,SAASO,GACLjB,EACAkB,EACAhB,EACAZ,EACAa,EACAgB,EACF,CACE,IAAMf,EAAoBe,GAAoB9B,GAAcC,CAAS,EAC/DW,EAAkBiB,EAAiB,qBAAqBd,CAAiB,EAE/E,GAAIH,EAAiB,CAEjBC,EAAWZ,CAAS,EAAI,CAAC,EACzBY,EAAWZ,CAAS,EAAE,MAAQa,EAAQ,eAAe,cAAW,WAAY,kBAAe,eAAe,EAE1G,IAAMiB,EAAoB,GAAG,kBAAe,eAAe,IACvDD,EAAUtB,GAAgBsB,CAAO,EAAI7B,EAAU,QAAQ,IAAK,IAAI,CACpE,IACAmB,GACIP,EAAWZ,CAAS,EAAE,MACtBU,EAAiB,SACjBA,EAAiB,WAAW,YAAYoB,CAAiB,EACzDpB,EAAiB,UACjB,CAAC,EACDI,CACJ,EAEAF,EAAWZ,CAAS,EAAE,MAAM,QAAUa,EAAQ,eAAe,cAAW,WAAY,kBAAe,QAAS,CACxG,QAAS,CAAC,CACd,CAAC,EACDO,GAAyBV,EAAkBV,EAAWY,EAAYC,EAASC,CAAiB,EAC5FL,GAAyBC,EAAkBC,EAAiBC,EAAYZ,EAAWa,EAASC,CAAiB,CACjH,CACJ,CAlCSR,EAAAqB,GAAA,qBA6CT,SAASI,GACLrB,EACAkB,EACAhB,EACAZ,EACAa,EACF,CAhMF,IAAAX,EAiMI,IAAMY,EAAoBf,GAAcC,CAAS,IACzBE,EAAA0B,EAAiB,uBAAjB,YAAA1B,EAAwCY,MAE5DF,EAAWZ,CAAS,EAAI,CAAC,EACzBY,EAAWZ,CAAS,EAAE,KAAOa,EAAQ,eAAe,cAAW,WAAY,kBAAe,eAAgB,CACtG,QAAS,CAAC,CACd,CAAC,EAET,CAfSP,EAAAyB,GAAA,oBA0BT,SAASC,GACLtB,EACAuB,EACAL,EACAhB,EACAC,EACI,CA1NR,IAAAX,EAAAC,EAAAC,EAAA8B,EA2NI,QAAWlC,KAAaiC,EAAmB,CACvC,IAAME,EAA4BF,EAAkBjC,CAAS,EACzDoC,EAAkBpC,EACtB,GACIA,EAAU,SAAS,qBAAkB,mBAAmB,KACxDE,EAAAiC,EAAc,OAAd,MAAAjC,EAAoB,WAAWmC,EAAyB,kBAAe,2BACzE,CACE,IAAMC,EAAeH,EAAc,KAAQ,MAAME,CAAsB,EAAE,CAAC,EAC1ED,EAAkBE,EAAevC,GAAcuC,EAAc,EAAI,EAAItC,EACrE2B,GAAkBjB,EAAkBkB,EAAkBhB,EAAYZ,EAAWa,EAASuB,CAAe,CACzG,MAAWjC,EAAAgC,EAAc,OAAd,MAAAhC,EAAoB,WAAWkC,EAAyB,kBAAe,0BAE9EV,GAAkBjB,EAAkBkB,EAAkBhB,EAAYZ,EAAWa,CAAO,EAC7EsB,EAAc,YAAcA,EAAc,WAAW,aAC5DvB,EAAWZ,CAAS,EAAI,CACpB,YAAa,CAAC,CAClB,EACAgC,GACItB,EACAyB,EAAc,WAAW,YAAY,WACrCP,EACAhB,EAAWZ,CAAS,EAAE,YACtBa,CACJ,IAEAT,EAAA+B,EAAc,OAAd,MAAA/B,EAAoB,WAAWiC,EAAyB,kBAAe,0BACvEH,EAAAC,EAAc,OAAd,MAAAD,EAAoB,SAAS,IAAI,qBAAkB,UAAU,QAG7DH,GAAiBrB,EAAkBkB,EAAkBhB,EAAYZ,EAAWa,CAAO,CAE3F,CACJ,CAvCSP,EAAA0B,GAAA,wBAiDT,SAASO,GACLC,EACAC,EACA5B,EACA6B,EACAC,EACI,CA3QR,IAAAzC,EAAAC,EA4QI,IAAMyC,EAAiBJ,EAAU,YAAY,kBAAe,cAAc,EAC1E,GAAII,GAAkBA,EAAe,WAAY,CAC7CH,EAAiB,OAAO,SAAW,CAAC,EACpC,QAAWzC,KAAa4C,EAAe,WAAY,CAC/C,IAAId,EAAoBc,EAAe,WAAW5C,CAAS,EACvD6C,EACEC,GAAuB5C,EAAA0C,EAAe,WAAW5C,CAAS,EAAE,OAArC,YAAAE,EAA8C,MAAMmC,GAAwB,GACrGS,IACAhB,EAAoBU,EAAU,YAAYM,CAAoB,EAC9DD,EAAaC,EAAqB,MAAM,GAAG,EAAE,CAAC,IAEpBD,GAAA,YAAAA,EAAY,SAAS,kBAAe,0CAE9DJ,EAAiB,OAAO,SAASzC,CAAS,EAAI6C,EACxChC,EAAQ,eAAe,cAAW,WAAYgC,CAAU,EACxD,CAAC,EACP1B,GACIsB,EAAiB,OAAO,SAASzC,CAAS,EAC1C0C,EACAZ,EACAa,EACA,CAAC,GACAxC,EAAA2B,GAAA,YAAAA,EAAkC,QAAlC,YAAA3B,EAAyC,MAAM,qBAAkB,EACtE,EAER,CACJ,CACJ,CAlCSG,EAAAiC,GAAA,oBA2CT,SAASQ,GACLrC,EACAsC,EACAnC,EACqB,CApTzB,IAAAX,EAAAC,EAqTI,IAAMsC,EAA0C5B,EAAQ,mBAAmB,cAAW,UAAU,EAE1Fe,EAAmBoB,EAAO,SAAWA,EAAO,QAAQ,SA+B1D,GA5BAP,EAAiB,OAAS5B,EAAQ,eAAe,cAAW,WAAY,kBAAe,gBAAgB,EACvGM,GACIsB,EAAiB,OACjB/B,EAAiB,SACjBA,EAAiB,WAAW,YAAY,kBAAe,gBAAgB,EACvEA,EAAiB,UACjB,CAAC,CACL,EAEA+B,EAAiB,OAAS5B,EAAQ,eAAe,cAAW,WAAY,kBAAe,gBAAgB,EACvGM,GACIsB,EAAiB,OACjB/B,EAAiB,SACjBA,EAAiB,WAAW,YAAY,kBAAe,gBAAgB,EACvEA,EAAiB,UACjB,CAAC,CACL,EAEAS,GACIsB,EACA/B,EAAiB,SACjBA,EAAiB,WACjBA,EAAiB,UACjB,CAAC,CACL,EACK+B,EAAiB,WAClBA,EAAiB,SAAW,CAAC,GAE7Bb,EAAkB,CACdA,EAAiB,sBAAwBlB,EAAiB,WAAW,YAAY,kBAAe,QAAQ,IAExG+B,EAAiB,SAAW,CAAC,EAC7BT,GACItB,EACAA,EAAiB,WAAW,YAAY,kBAAe,QAAQ,EAAE,WACjEkB,EACAa,EAAiB,SACjB5B,CACJ,GAGJ,IAAMoC,GAAiB9C,GAAAD,EAAA0B,EAAiB,UAAjB,YAAA1B,EAA0B,OAA1B,YAAAC,EAAgC,SACvD,GAAI8C,EAAgB,CAChBR,EAAiB,SAAS,OAAS,CAAC,EACpC,QAAWzC,KAAaiD,EAAgB,CACpC,IAAMC,EAAUrC,EAAQ,eACpB,cAAW,WACX,kBAAe,+BACnB,EACAM,GACI+B,EACAxC,EAAiB,SACjBA,EAAiB,WAAW,YAAY,kBAAe,+BAA+B,EACtFA,EAAiB,UACjB,CAAC,EACDV,CACJ,EACAyC,EAAiB,SAAS,OAAO,KAAKS,CAAO,CACjD,CACJ,CAGAX,GACI7B,EAAiB,WACjB+B,EACA5B,EACAH,EAAiB,SACjBA,EAAiB,SACrB,CACJ,CACA,OAAO+B,CACX,CAjFSnC,EAAAyC,GAAA,wBA0FF,SAASI,GACZzC,EACiC,CAGjC,GADA0C,GAAS,EACL,CAAC1C,EAAiB,SAAS,mBAAgB,GAAG,GAAK,CAACA,EAAiB,SAAS,mBAAgB,GAAG,EAAE,QAAY,CAC/G2C,GAAI3C,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAAS4C,EAAQ,EAAE,WAAW,EAC9B,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,GAAG,CAC/B,CACJ,CAAC,EACD,MACJ,CACA,IAAMC,EAAU7C,EAAiB,SAAS,mBAAgB,GAAG,EAAE,QAAW,QAC1E,GAAI,CAAC6C,EAAS,CACVF,GAAI3C,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAAS4C,EAAQ,EAAE,WAAW,EAC9B,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,IAAK,SAAS,CAC1C,CACJ,CAAC,EACD,MACJ,CACA,IAAMN,EAASO,EAAQ7C,EAAiB,SAAS,EACjD,GAAI,CAACsC,EAAQ,CACTK,GAAI3C,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAAS4C,EAAQ,EAAE,cAAe,CAAE,UAAW5C,EAAiB,SAAU,CAAC,EAC3E,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,IAAK,SAAS,CAC1C,CACJ,CAAC,EACD,MACJ,CACA,IAAMG,EAAU,IAAI2C,GAGpB,OAAOT,GAAqBrC,EAAkBsC,EAA6BnC,CAAO,CACtF,CA5CgBP,EAAA6C,GAAA,4BC1XhB,IAAAM,GAUO,SAcA,IAAMC,GAAsC,CAAC,EAEhDC,GAAuB,CAAC,EAU5B,SAASC,GAAaC,EAA4BC,EAAoC,CAClF,IAAMC,EAAUF,EAAO,OACjBG,EAAUF,EAAO,OACjBG,EAAY,MAAM,QAAQF,CAAO,EACjCG,EAAY,MAAM,QAAQF,CAAO,EACvC,OAAIC,GAAaC,EACNH,EAAQ,OAASC,EAAQ,OAEhC,CAACC,GAAa,CAACC,EACR,EAEHD,EAAiB,EAAL,EACxB,CAZSE,EAAAP,GAAA,gBAqBT,SAASQ,GAAcC,EAAkCC,EAA6B,CAAC,EAAW,CAC9F,GAAI,CAAC,MAAM,QAAQD,CAAM,EACrB,OAAOA,EAEX,IAAIE,EAA6BF,EACjC,QAAWG,KAAcF,EACrBC,EAAcA,EAAY,OAAQE,GAAe,CAACD,EAAW,SAASC,CAAU,CAAC,EAErF,OAAOF,EAAY,CAAC,CACxB,CATSJ,EAAAC,GAAA,iBAgBT,SAASM,GAAqBC,EAAsC,CAChE,IAAMC,EAAqB,CAAC,EAC5BD,EAASA,EAAO,OAAO,EAAE,KAAKf,EAAY,EAC1C,IAAMiB,EAAkB,CAAC,EACzB,QAAWC,KAASH,EAAQ,CACxB,IAAMI,EAAQD,EAAM,QAAQ,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,GAAG,EAC/CT,EACA,MAAM,QAAQS,EAAM,MAAM,GAC1BT,EAASD,GAAcU,EAAM,OAAQD,CAAe,EACpDA,EAAgB,KAAKC,EAAM,MAAM,GAEjCT,EAASS,EAAM,OAEnB,QAAWE,KAAQD,EAAO,CACtB,IAAME,EAAOD,EAAK,MAAM,GAAG,EAAE,CAAC,EAC9BJ,EAAmBP,CAAM,EAAIO,EAAmBP,CAAM,EAAI,GAAGO,EAAmBP,CAAM,CAAC,IAAIY,CAAI,GAAKA,CACxG,CACJ,CACA,OAAOL,CACX,CAnBST,EAAAO,GAAA,wBA4BT,SAASQ,GACLb,EACAc,EACAC,EACU,CACV,IAAIC,EACJ,OAAIhB,EAAO,KACHA,EAAO,OAAY,MAAG,2BACtBgB,EAAW,cAAW,WAEtBhB,EAAO,KAAQ,SAAS,cAAW,UAAU,GAC7CA,EAAO,KAAQ,SAAS,cAAW,kBAAkB,EAErDgB,EAAW,cAAW,WACfhB,EAAO,KAAQ,SAAS,cAAW,UAAU,EACpDgB,EAAW,cAAW,WAEtBA,EAAW,cAAW,WAEnB,WAAYhB,EACnBgB,EAAW,cAAW,YAEtBC,GAAIH,EAAQ,CACR,SAAU,eAAY,MACtB,QAASI,EAAQ,EAAE,0BAA2B,CAAE,OAAQ,KAAK,UAAUlB,CAAM,CAAE,CAAC,EAChF,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,GAAG,mBAAgB,GAAG,oBAAoBe,CAAe,EAAE,CACvE,CACJ,CAAC,EACGf,EAAO,YAAe,cAAa,aAAcA,IACjDgB,EAAW,cAAW,aAGvBA,CACX,CAnCSlB,EAAAe,GAAA,qBAgDT,SAASM,GAAwBC,EAA8B,CAC3D,IAAMC,EAAWC,GACbF,EAAO,KAAK,SACZA,EAAO,KAAK,UACZA,EAAO,OAAO,QAAcA,EAAO,WAAa,cAAW,YAAcA,EAAO,OAAO,EAC3F,EACA,GAAI,CAACC,EACD,OAGJ,IAAME,EACF,OAAO,KAAKH,EAAO,OAAO,EAAE,KAAMI,GAAYA,EAAQ,SAASH,CAAQ,CAAC,GACxE,OAAO,KAAKD,EAAO,OAAO,EAAE,KAAMI,GAAYA,EAAQ,SAASH,EAAS,MAAM,EAAG,EAAE,CAAC,CAAC,GACrF,OAAO,KAAKD,EAAO,OAAO,EAAE,KAAMI,GAAYA,EAAQ,SAASJ,EAAO,KAAK,QAAQ,CAAC,EAExF,GAAIG,GACA,GAAIH,EAAO,KAAK,WAAa,cAAW,WAAY,CAChD,IAAMK,EAAiD,CACnD,SAAUL,EAAO,SACjB,WAAYA,EAAO,QAAQG,CAAU,EACrC,UAAWH,EAAO,GAClB,OAAQA,EAAO,MACnB,EACAA,EAAO,KAAK,OAASM,GAAyBD,CAAgB,CAClE,SAAWL,EAAO,eAAiB,gBAAa,uBAAwB,CACpE,IAAMK,EAAiD,CACnD,SAAUL,EAAO,SACjB,WAAYA,EAAO,QAAQG,CAAU,EACrC,OAAQH,EAAO,MACnB,EACAA,EAAO,KAAK,OAASO,GAAuBF,EAAkB,cAAW,UAAU,CACvF,SAAWL,EAAO,eAAiB,gBAAa,qBAAsB,CAClE,IAAMK,EAAyD,CAC3D,SAAUL,EAAO,SACjB,WAAYA,EAAO,QAAQG,CAAU,EACrC,OAAQH,EAAO,MACnB,EACAA,EAAO,KAAK,OAASO,GAAuBF,EAAkB,cAAW,kBAAkB,CAC/F,SACIL,EAAO,eAAiB,gBAAa,iBACrCA,EAAO,KAAK,WAAa,cAAW,WACtC,CACE,IAAMK,EAAiD,CACnD,SAAUL,EAAO,SACjB,WAAYA,EAAO,QAAQG,CAAU,EACrC,OAAQH,EAAO,MACnB,EAEMQ,EADeC,GAA4BT,EAAO,MAA2B,IAE9D,gBAAa,qBACxB,cAAW,mBACX,cAAW,WACrBA,EAAO,KAAK,OAASO,GAAuBF,EAAkBG,CAAU,CAC5E,EAER,CAvDS9B,EAAAqB,GAAA,2BA6DT,SAASW,GAA2B9B,EAAuC,CACvE,GAAIA,EAAO,SACP,GAAI,aAAcA,EAAO,QAAQ,SAAU,CACvC,IAAM+B,EAAY/B,EAAO,QAAQ,SAAS,SAAS,MAAM,GAAG,EAC5DX,GAAqB,KAAK0C,EAAUA,EAAU,OAAS,CAAC,CAAC,CAC7D,UACO,WAAY/B,EAAQ,CAG3B,IAAM+B,EAAY/B,EAAO,SAAS,MAAM,GAAG,EAC3CX,GAAqB,KAAK0C,EAAUA,EAAU,OAAS,CAAC,CAAC,CAC7D,CACJ,CAZSjC,EAAAgC,GAAA,8BAmBT,SAASE,GAAiChC,EAAiCiC,EAAuB,CAC9F,GAAIjC,EAAO,QAAS,CACZA,EAAO,QAAQ,SAAS,oBACxBiC,EAAK,kBAAoBjC,EAAO,QAAQ,SAAS,mBAErDiC,EAAK,WAAa,CAAC,EACnB,QAAWC,KAAQlC,EAAO,QAAQ,SAAS,WAAY,CACnD,IAAMmC,EAAkBnC,EAAO,QAAQ,SAAS,WAAWkC,CAAI,EAC/DD,EAAK,WAAWC,CAAI,EAAIC,EAAgB,MAC5C,CACJ,CACJ,CAXSrC,EAAAkC,GAAA,oCAmBT,SAASI,GAA2BpC,EAAiCiC,EAAejB,EAA4B,CAxQhH,IAAAqB,EAAAC,EAyQI,GAAI,WAAYtC,EAEZiC,EAAK,KAAO,CACR,GAAIjC,EAAO,OACX,KAAMA,EAAO,QACjB,UACOgB,IAAa,cAAW,WAAY,CAC3C,IAAMuB,IACDD,GAAAD,EAAArC,EAAiD,UAAjD,YAAAqC,EAA0D,WAA1D,YAAAC,EAAoE,WAAYtC,EAAO,SAC5FiC,EAAK,KAAO,CACR,GAAIjC,EAAO,IAAM,CAAE,GAAIA,EAAO,EAAG,EACjC,GAAIuC,GAAkB,CAAE,KAAMA,CAAe,CACjD,CACJ,CACJ,CAfSzC,EAAAsC,GAAA,8BAyBT,SAASI,GACLC,EACAC,EACAC,EACAlB,EACI,CAtSR,IAAAY,EAuSI,IAAMrC,EAAkCyC,EAAQ,QAAQC,CAAE,EACpD1B,EAAWH,GAAkBb,EAAQyB,EAAiB,OAAQiB,CAAE,EAChET,EAAkB,CAAE,SAAAjB,CAAS,EASnC,GANIhB,EAAO,UACPiC,EAAK,WAAYI,EAAArC,EAAO,QAAQ,WAAf,YAAAqC,EAAyB,WAE1CrC,EAAO,qBACPiC,EAAK,mBAAqBjC,EAAO,oBAEjCV,GAAaoD,CAAE,GAAKpD,GAAaoD,CAAE,EAAE,QAAQ,GAAG,IAAM,GAAI,CAC1D,IAAMhC,EAAQpB,GAAaoD,CAAE,EAAE,MAAM,GAAG,EACxCT,EAAK,mBAAqBvB,EAAMA,EAAM,OAAS,CAAC,CACpD,CAEA0B,GAA2BpC,EAAQiC,EAAMjB,CAAQ,EACjDgB,GAAiChC,EAAQiC,CAAI,EAC7CH,GAA2B9B,CAAM,EAEjC,IAAMS,EAAQgC,EAAQ,OAAO,KAAMG,GAAiBA,EAAa,OAASF,CAAE,EACxEjC,IACAwB,EAAK,aAAexB,EAAM,QACtB,WAAYA,IACZwB,EAAK,kBAAoBxB,EAAM,SAIvCkC,EAAMD,CAAE,EAAIT,EAEZ,IAAMY,EAA6C,CAC/C,OAAA7C,EACA,SAAAgB,EACA,SAAUS,EAAiB,SAC3B,QAASA,EAAiB,WAC1B,OAAQA,EAAiB,OACzB,KAAAQ,EACA,GAAAS,EACA,aAAcjB,EAAiB,YACnC,EACAN,GAAwB0B,CAAoB,CAChD,CA/CS/C,EAAA0C,GAAA,0BAsDF,SAASM,GAAmBrB,EAAwD,CACvF,IAAMkB,EAAkB,CAAC,EACnBF,EAA8BhB,EAAiB,SAAS,mBAAgB,GAAG,EAAE,QAEnF,GAAI,CAACgB,GAAW,CAACA,EAAQ,OAAQ,CAC7B,IAAMM,EAAU7B,EAAQ,EAAE,WAAW,EACrC,OAAAD,GAAIQ,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAAAsB,EACA,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,GAAG,CAC/B,CACJ,CAAC,EACMJ,CACX,CACArD,GAAee,GAAqBoC,EAAQ,QAAU,CAAC,CAAC,EACxD,QAAWC,KAAMD,EAAQ,QACrBD,GAAuBC,EAASC,EAAIC,EAAOlB,CAAgB,EAE/D,OAAOkB,CACX,CArBgB7C,EAAAgD,GAAA,sBA2BT,SAASE,GAAQP,EAAiD,CACrE,IAAIQ,EACJ,GAAIR,GAAWA,EAAQ,QAAUA,EAAQ,OAAO,OAAS,EAAG,CACxD,QAAWhC,KAASgC,EAAQ,OAGxB,GAAIhC,EAAM,QAAQ,WAAW,UAAU,EAAG,CACtCwC,EAAYxC,EACZ,KACJ,SAAWA,EAAM,QAAQ,QAAQ,GAAG,IAAM,GAAI,CAC1CwC,EAAYxC,EACZ,QACJ,CAEJ,OACWV,GADPkD,EACqBA,EAAU,OAEVR,EAAQ,OAAO,CAAC,EAAE,MAFF,CAI7C,KACI,OAER,CAtBgB3C,EAAAkD,GAAA,WA8BT,SAASE,GAAYT,EAA0C,CAhZtE,IAAAJ,EAAAC,EAAAa,EAAAC,EAiZI,IAAIf,EAAAI,GAAA,YAAAA,EAAS,SAAT,MAAAJ,EAAiB,uBAAwBC,EAAAG,GAAA,YAAAA,EAAS,SAAT,MAAAH,EAAiB,SAC1D,MAAO,CACH,sBAAsBa,EAAAV,GAAA,YAAAA,EAAS,SAAT,YAAAU,EAAiB,qBACvC,KAAIC,EAAAX,GAAA,YAAAA,EAAS,SAAT,YAAAW,EAAiB,WAAY,CAAE,SAAUX,EAAQ,OAAO,QAAS,CACzE,CAGR,CARgB3C,EAAAoD,GAAA,eAUT,SAASG,GAASC,EAAoBC,EAAwC,CACjF,IAAMd,EAAUa,EAAS,mBAAgB,GAAG,EAAE,QACxCX,EAA4B,CAAC,EACnC,GAAIF,EACA,QAAWC,KAAMD,EAAQ,QAAS,CAC9B,IAAMe,EAASf,EAAQ,QAAQC,CAAE,EAC7Bc,EAAO,OAAYD,IACnBZ,EAAMD,CAAE,EAAIc,EAEpB,CAEJ,OAAOb,CACX,CAZgB7C,EAAAuD,GAAA,YAcT,IAAMI,GAAN,MAAMA,WAAsBC,EAAY,CACpC,YAAYjC,EAA8C,CAC7DkC,GAAS,EAET,IAAMC,EAAc,IAAIC,GAClBC,EAAaC,GAAkB,cAAW,WAAW,EACrDC,EAAYvC,EAAiB,WAAWqC,EAAW,QAAQ,EACjEG,GAAuBL,EAAanC,EAAiB,SAAUuC,EAAU,YAAY,YAAa,GAAI,CAAC,CAAC,EACxG,MACIvC,EAAiB,SACjBA,EAAiB,WACjBuB,GAAQvB,EAAiB,SAAS,mBAAgB,GAAG,EAAE,OAA6B,EACpFqB,GAAmBrB,CAAgB,EACnC,wBAAqB,GACrB,CACI,GAAGyB,GAAYzB,EAAiB,SAAS,mBAAgB,GAAG,EAAE,OAA6B,EAC3F,GAAGmC,CACP,EACAnC,EAAiB,MACrB,EACA,KAAK,qBAAuBpC,EAChC,CACJ,EAtB+CS,EAAA2D,GAAA,iBAAxC,IAAMS,GAANT,GCxaP,IAAAU,GAAyB,cACzBC,GAAqB,gBAErBC,GAA2B,SAOpB,IAAMC,GAAyBC,EAAA,CAClCC,EACAC,EACAC,EAAoB,YACC,CACrB,IAAMC,EACFF,IAAe,cAAW,YACpB,GAAG,cAAW,WAAW,GAAGD,EAAQ,YAAY,CAAC,QACjD,GAAGC,CAAU,cACvB,GAAIC,EAAU,SAAS,MAAM,EACzB,SAAO,SAAKA,EAAW,UAAWF,EAASG,CAAQ,EAChD,GAAID,EAAU,YAAS,SAAK,gBAAiB,WAAY,eAAe,CAAC,EAC5E,SAAO,SAAKA,EAAW,OAAQ,UAAWF,EAASG,CAAQ,EACxD,GAAID,EAAU,YAAS,SAAK,MAAO,eAAe,CAAC,EACtD,SAAO,SAAKA,EAAW,KAAM,KAAM,OAAQ,UAAWF,EAASG,CAAQ,EACpE,GAAID,EAAU,QAAQ,cAAc,EAAI,GAAI,CAC/C,IAAME,EAAaF,EAAU,UAAU,EAAGA,EAAU,QAAQ,cAAc,EAAI,EAAE,EAChF,SAAO,SAAKE,EAAY,OAAQ,mBAAoB,OAAQ,UAAWJ,EAASG,CAAQ,CAC5F,CAEJ,EApBsC,0BA0BhCE,GAAiBN,EAAA,MAAOO,GACnB,IAAI,QAAQ,CAACC,EAASC,IAAiB,IAC1C,aAASF,EAAM,CAAE,SAAU,MAAO,EAAG,CAACG,EAAKC,IAAe,CAClDD,EACAD,EAAOC,CAAG,EAEVF,EAAQ,KAAK,MAAMG,CAAI,CAAC,CAEhC,CAAC,CACL,CAAC,EATkB,kBAiBVC,GAAmBZ,EAAA,MAAOC,EAA+BC,IAA0C,CAC5G,GAAI,CACA,IAAMK,EAAOR,GAAuBE,EAASC,EAAY,SAAS,EAClE,OAAO,MAAMI,GAAeC,CAAI,CACpC,OAASM,EAAO,CACZ,MAAM,IAAI,MAAM,iCAAiCX,CAAU,cAAcD,CAAO,eAAeY,EAAM,OAAO,EAAE,CAClH,CACJ,EAPgC,oB1EQhC,eAAeC,GACXC,EACAC,EACgB,CAChB,IAAMC,EAA0B,CAAC,EAC7BC,EAAc,CAAC,EAEnB,OADAA,EAAc,CAAC,cAAW,WAAW,EAC7BH,EAAc,CAClB,KAAK,gBAAa,uBAClB,KAAK,gBAAa,qBACdG,EAAY,KAAK,cAAW,WAAY,cAAW,UAAU,EAC7D,MACJ,KAAK,gBAAa,gBACdA,EAAY,KAAK,cAAW,WAAY,cAAW,WAAY,cAAW,aAAa,EACvF,MACJ,KAAK,gBAAa,uBACdA,EAAY,KAAK,cAAW,WAAY,cAAW,UAAU,EAC7D,MACJ,KAAK,gBAAa,qBACdA,EAAY,KAAK,cAAW,mBAAoB,cAAW,UAAU,EACrE,MACJ,KAAK,gBAAa,eACdA,EAAY,KAAK,cAAW,YAAY,EACxC,MACJ,QACI,KACR,CACA,QAAWC,KAAcD,EAAa,CAClC,IAAME,EAAaC,GAAkBF,CAAU,EAC/CF,EAAeG,EAAW,QAAQ,EAAI,MAAME,GAAiBN,EAAsBG,CAAU,CACjG,CACA,OAAOF,CACX,CAhCeM,EAAAT,GAAA,qBAuCf,SAASU,GAAoBC,EAAmD,CAC5E,IAAMC,EAAqC,CACvC,OAAQ,CAAC,EACT,UAAW,CAAC,CAChB,EACMC,EAAiBF,GAAA,YAAAA,EAAiB,YACxC,GAAI,CAACE,EACD,OAAOD,EAEX,IAAME,EAAQC,GAAU,gBAAcJ,CAAe,EACrD,QAAWK,KAAUH,EAAgB,CACjC,GAAI,CAACG,EAAO,aAAe,CAACA,EAAO,YAAYF,CAAK,EAChD,SAEJ,GAAM,CAAE,SAAAG,EAAU,OAAAC,CAAO,EAAIF,EAAO,YAAYF,CAAK,EACjDG,GAAY,CAACA,EAAS,WACtBL,EAAoB,UAAU,KAAKI,EAAO,IAAI,EAE9CE,GAAU,CAACA,EAAO,WAClBN,EAAoB,OAAO,KAAKI,EAAO,IAAI,CAEnD,CACA,OAAOJ,CACX,CAvBSH,EAAAC,GAAA,uBAyBF,SAASS,GAA4BC,EAAuBT,EAA+C,CAC9G,OAAOA,GAAA,YAAAA,EAAiB,aAAcA,EAAgB,WAAW,KAAMU,GAAOA,EAAG,OAASD,CAAa,CAC3G,CAFgBX,EAAAU,GAAA,+BAUhB,SAASG,GACLC,EACApB,EACAqB,EACI,CACJ,IAAMC,EAAWC,GACbH,EAAmB,SAAS,mBAAgB,OAAO,EAAE,MACrD,MAAG,2BACHA,EAAmB,MACvB,EACA,QAAWI,KAAQF,EAAU,CACzB,IAAML,EAAgBK,EAASE,CAAI,EAAE,UAC/BC,EAAYT,GAA4BC,EAAeG,EAAmB,UAAU,EACrFK,GACDC,GAAIN,EAAmB,OAAQ,CAC3B,SAAU,eAAY,MACtB,QAASO,EAAQ,EAAE,oBAAqB,CAAE,cAAeV,CAAc,CAAC,EACxE,SAAU,CACN,KAAM,eACV,CACJ,CAAC,EAELG,EAAmB,UAAYK,EAC/B,IAAMtB,EAAaC,GAAkB,cAAW,YAAYqB,GAAA,YAAAA,EAAW,OAAQR,CAAa,EACtFW,EAAoBxB,GAAkB,cAAW,UAAU,EACjEiB,EAAWlB,EAAW,QAAQ,EAAI0B,GAC9BT,EACApB,EAAe4B,EAAkB,QAAQ,CAC7C,CACJ,CACJ,CA9BStB,EAAAa,GAAA,+BAsCT,SAASW,GACLV,EACApB,EACAqB,EACF,CACE,IAAMU,EAAUR,GAAWH,EAAmB,SAAU,MAAG,0BAA0B,EAC/EY,EAAWT,GAAWH,EAAmB,SAAU,MAAG,kBAAkB,EACxEa,EAAQ,CAAE,GAAGF,EAAS,GAAGC,CAAS,EACxC,QAAWE,KAAUD,EAAO,CACxB,IAAMhB,EAAgBgB,EAAMC,CAAM,EAAE,QAAQ,SAAS,UAC/CT,EAAYT,GAA4BC,EAAeG,EAAmB,UAAU,EACpFjB,EAAaC,GAAkB,cAAW,YAAYqB,GAAA,YAAAA,EAAW,OAAQR,CAAa,EACtFW,EAAoBxB,GAAkB,cAAW,UAAU,EAE7DgB,EAAmB,eAAiB,gBAAa,kBACjDA,EAAmB,aAAee,GAA4BF,EAAMC,CAAM,CAAC,GAE/Eb,EAAWlB,EAAW,QAAQ,EAAIiC,GAC9BhB,EACApB,EAAe4B,EAAkB,QAAQ,EACzCH,EACAQ,EAAMC,CAAM,EAAE,IAClB,CACJ,CACJ,CAxBS5B,EAAAwB,GAAA,+BA+BT,SAASO,GACLjB,EACAC,EACArB,EACF,CAhNF,IAAAsC,EAiNI,IAAMhB,EAAWC,GACbH,EAAmB,SAAS,mBAAgB,OAAO,EAAE,MACrD,MAAG,2BACHA,EAAmB,MACvB,EAEA,QAAWI,KAAQF,EAAU,CAEzB,IAAML,EAAgBK,EAASE,CAAI,EAAE,UACrCJ,EAAmB,UAAYJ,GAA4BC,EAAeG,EAAmB,UAAU,EACvG,IAAMjB,EAAaC,GACf,cAAW,aACXkC,EAAAlB,EAAmB,YAAnB,YAAAkB,EAA8B,OAAQrB,CAC1C,EACMW,EAAoBxB,GAAkB,cAAW,UAAU,EACjEiB,EAAWlB,EAAW,QAAQ,EAAIoC,GAC9BnB,EACApB,EAAe4B,EAAkB,QAAQ,CAC7C,CACJ,CACJ,CAzBStB,EAAA+B,GAAA,yBAiCT,SAASG,GACLpB,EACApB,EACAqB,EACI,CACJ,IAAMY,EAAQV,GAAWH,EAAmB,SAAU,MAAG,0BAA0B,EACnF,QAAWI,KAAQS,EAAO,CACtB,IAAMhB,EAAgBgB,EAAMT,CAAI,EAAE,QAAQ,SAAS,UAC7CC,EAAYT,GAA4BC,EAAeG,EAAmB,UAAU,EACrFK,GACDC,GAAIN,EAAmB,OAAQ,CAC3B,SAAU,eAAY,MACtB,QAASO,EAAQ,EAAE,oBAAqB,CAAE,UAAWV,CAAc,CAAC,EACpE,SAAU,CACN,KAAM,eACV,CACJ,CAAC,EAEL,IAAMd,EAAaC,GAAkB,cAAW,YAAYqB,GAAA,YAAAA,EAAW,OAAQR,CAAa,EACtFW,EAAoBxB,GAAkB,cAAW,UAAU,EACjEiB,EAAWlB,EAAW,QAAQ,EAAIsC,GAC9BrB,EACApB,EAAe4B,EAAkB,QAAQ,EACzCH,CACJ,CACJ,CACJ,CA1BSnB,EAAAkC,GAAA,+BAmCT,SAASE,GACLtB,EACApB,EACA2C,EACA7C,EACO,CArRX,IAAAwC,EAsRI,IAAMjB,EAAsB,CAAC,EAC7B,GAAIvB,IAAiB,gBAAa,wBAA0B6C,EAExDN,GAAsBjB,EAAoBC,EAAYrB,CAAc,EAEpEmB,GAA4BC,EAAoBpB,EAAgBqB,CAAU,UACnEvB,IAAiB,gBAAa,sBAAwB6C,EAAe,CAE5E,IAAMrB,EAAWC,GACbH,EAAmB,SAAS,mBAAgB,OAAO,EAAE,MACrD,MAAG,mBACHA,EAAmB,MACvB,EACA,QAAWI,KAAQF,EAAU,CACzB,IAAML,EAAgBK,EAASE,CAAI,EAAE,UACrCJ,EAAmB,UAAYJ,GAA4BC,EAAeG,EAAmB,UAAU,EACvG,IAAMjB,EAAaC,GACf,cAAW,qBACXkC,EAAAlB,EAAmB,YAAnB,YAAAkB,EAA8B,OAAQrB,CAC1C,EACMW,EAAoBxB,GAAkB,cAAW,kBAAkB,EACzEiB,EAAWlB,EAAW,QAAQ,EAAIyC,GAC9BxB,EACApB,EAAe4B,EAAkB,QAAQ,CAC7C,CACJ,CAEAT,GAA4BC,EAAoBpB,EAAgBqB,CAAU,CAC9E,SAAWvB,IAAiB,gBAAa,eAAgB,CAErD,IAAMK,EAAaC,GAAkB,cAAW,YAAY,EACtDwB,EAAoBxB,GAAkB,cAAW,YAAY,EACnEiB,EAAWlB,EAAW,QAAQ,EAAI0C,GAC9B7C,EAAe4B,EAAkB,QAAQ,EACzCR,EAAmB,QACvB,CACJ,CACA,MAAO,CAAE,GAAGpB,EAAgB,GAAGqB,CAAW,CAC9C,CA5CSf,EAAAoC,GAAA,wBAqDT,SAASI,GACL1B,EACApB,EACA2C,EACO,CACP,IAAMtB,EAAsB,CAAC,EAE7B,OAAIsB,IACAb,GAA4BV,EAAoBpB,EAAgBqB,CAAU,EAC1EmB,GAA4BpB,EAAoBpB,EAAgBqB,CAAU,GAEvE,CAAE,GAAGrB,EAAgB,GAAGqB,CAAW,CAC9C,CAZSf,EAAAwC,GAAA,wBAoBT,eAAeC,GACX3B,EACAuB,EACA7C,EACgB,CAChB,IAAME,EAAiB,MAAMH,GAAkBC,EAAcsB,EAAmB,oBAAoB,EAEpG,OAAIA,EAAmB,uBAAyB,wBAAqB,GAC1D0B,GAAqB1B,EAAoBpB,EAAgB2C,CAAa,EAEtED,GAAqBtB,EAAoBpB,EAAgB2C,EAAe7C,CAAY,CAEnG,CAZeQ,EAAAyC,GAAA,sBAoBf,SAASC,GAAcC,EAAsD,CACzE,IAAIC,EACEC,EAAgB,CAAC,EAEvB,OAAQF,EAAiB,aAAc,CACnC,KAAK,gBAAa,uBAClB,KAAK,gBAAa,qBACdC,EAAW,IAAIE,GAAcH,CAAgB,EAC7C,MACJ,KAAK,gBAAa,qBAClB,KAAK,gBAAa,uBAClB,KAAK,gBAAa,gBACdC,EAAW,IAAIG,GAAcJ,CAAgB,EAC7C,MACJ,KAAK,gBAAa,eACdC,EAAW,IAAII,GAAcL,CAAgB,EAC7C,MACJ,QACI,KACR,CACA,GAAIC,EAAU,CACV,GAAM,CAAE,UAAAK,EAAW,YAAAC,CAAY,EAAIN,EAAS,kBAAkB,EAC9D,QAAWO,KAAOF,EACdJ,EAAM,KAAK,CAAE,cAAeM,EAAK,YAAa,KAAK,UAAUF,EAAUE,CAAG,EAAG,KAAM,CAAC,CAAE,CAAC,EAE3F,QAAWC,KAAUF,EACjBL,EAAM,KAAK,CAAE,cAAeO,EAAQ,YAAa,KAAK,UAAUF,EAAYE,CAAM,EAAG,KAAM,CAAC,CAAE,CAAC,CAEvG,CACA,OAAOP,CACX,CA9BS7C,EAAA0C,GAAA,iBAgCT,SAASW,GAAYC,EAAiBC,EAA0B,CAC5D,IAAIV,EAAgB,CAAC,EACrB,QAAWW,KAAc,OAAO,KAAKF,CAAM,EAAE,KAAK,EAAG,CACjD,IAAIG,EACAD,IAAe,cAAW,YAC1BC,EAAgB,GAAG,WAAQ,OAAO,IAAI,YAAS,IAAI,CAAC,EAAE,YAAY,CAAC,GAAG,YAAS,IAAI,MAAM,CAAC,CAAC,GAE3FA,EAAgB,GAAG,WAAQ,OAAO,IAAID,CAAU,QAEpDX,EAAM,KAAK,CAAE,cAAAY,EAAe,YAAa,KAAK,UAAUH,EAAOE,CAAU,EAAG,KAAM,CAAC,CAAE,CAAC,CAC1F,CACA,OAAID,IACAV,EAAQA,EAAM,OAAOU,CAAO,GAEzBV,CACX,CAfS7C,EAAAqD,GAAA,eAqBT,eAAsBK,GAAoBC,EAAmE,CAla7G,IAAA3B,EAAA4B,EAoaIC,GAAS,EACT,GAAM,CAAE,SAAAC,EAAU,YAAAC,EAAa,OAAAC,EAAQ,UAAAC,EAAW,MAAAC,EAAO,eAAAC,CAAe,EAAIR,EACrD,IAAIS,GAAiB,EAC7B,2BAA0BR,GAAA5B,EAAA8B,EAAS,SAAS,IAAlB,YAAA9B,EAAqB,eAArB,YAAA4B,EAAmC,cAAeI,CAAM,EACjG,IAAMvE,EAAuB4E,GAAuBP,CAAQ,EACtD5D,EAAkBoE,GAAwBP,EAAaC,CAAM,EAC7D3B,EAAgBpC,GAAoBC,CAAe,EACnDV,EAAe+E,GAA4BT,EAAUrE,EAAsBuE,CAAM,EAYjFjD,EAAa,MAAM0B,GAX+B,CACpD,aAAAjD,EACA,SAAAsE,EACA,WAAY5D,EACZ,UAAA+D,EACA,MAAAC,EACA,qBAAAzE,EACA,OAAAuE,EACA,eAAAG,CACJ,EAEgE9B,EAAe7C,CAAY,EAC3F,OAAO6D,GAAYtC,CAAU,CACjC,CAvBsBf,EAAA0D,GAAA,uBA6BtB,eAAsBc,GAA6Bb,EAAmE,CA/btH,IAAA3B,EAAA4B,EAicIC,GAAS,EACT,GAAM,CAAE,SAAAC,EAAU,YAAAC,EAAa,OAAAC,EAAQ,UAAAC,EAAW,MAAAC,EAAO,KAAAO,EAAM,eAAAN,CAAe,EAAIR,EAC3D,IAAIS,GAAiB,EAC7B,2BAA0BR,GAAA5B,EAAA8B,EAAS,SAAS,IAAlB,YAAA9B,EAAqB,eAArB,YAAA4B,EAAmC,cAAeI,CAAM,EACjG,IAAMvE,EAAuB4E,GAAuBP,CAAQ,EACtD5D,EAAkBoE,GAAwBP,EAAaC,CAAM,EAC7DxE,EAAe+E,GAA4BT,EAAUrE,EAAsBuE,CAAM,EAGjFlD,EAAkD,CACpD,aAAAtB,EACA,SAAAsE,EACA,WAAY5D,EACZ,UAAA+D,EACA,MAAAC,EACA,qBAAAzE,EACA,OAAAuE,EACA,eAAAG,CACJ,EACM9B,EAAgBpC,GAAoBC,CAAe,EACnDa,EAAa,MAAM0B,GAAmB3B,EAAoBuB,EAAe7C,CAAY,EAcrFkF,EAAchC,GAXwC,CACxD,SAAAoB,EACA,YAAaW,EACb,WAAA1D,EACA,aAAAvB,EACA,OAAAwE,EACA,WAAY9D,EACZ,UAAA+D,EACA,MAAAC,CACJ,CAEyD,EACzD,OAAOb,GAAYtC,EAAY2D,CAAW,CAC9C,CAtCsB1E,EAAAwE,GAAA,gCfvYtB,IAAMG,GAAkC,CAAC,SAAU,WAAY,QAAQ,EASvE,SAASC,GACLC,EACAC,EACAC,EACAC,EACF,CACEF,EAAc,WAAWC,CAAQ,EAAE,aAAU,YAAY,EAAI,gBAAa,WAC1E,IAAIE,EACJ,OAAQD,EAAa,CACjB,0BACA,8BACA,+BACA,+BACIC,EAAc,eAAY,QAC1B,MACJ,6BACIA,EAAc,eAAY,WAC1B,MACJ,iCACIA,EAAc,eAAY,MAC1B,MACJ,kCACIA,EAAc,eAAY,WAC1B,MACJ,kCACIA,EAAc,eAAY,WAC1B,KACR,CACKA,IAGLC,GAAmCL,EAAWC,EAAeC,CAAQ,EACrED,EAAc,WAAWC,CAAQ,EAAE,aAAU,WAAW,EAAIE,EAChE,CAjCSE,EAAAP,GAAA,2BA0CT,SAASQ,GACLC,EACAR,EACAS,EACAC,EAOAC,EACG,CACH,MAAO,CAACC,EAAMC,IAAU,CACpB,GAAI,CAACD,EAAK,aAAkBA,EAAK,QAAU,qBAAkB,mBAAoB,CAC7E,GAAM,CAAE,WAAAE,EAAY,SAAAC,EAAU,UAAAC,CAAU,EAAIC,GAAmBL,EAAMD,CAAe,EAEpF,GAAI,CAACI,EACD,OAEJ,IAAMG,EAAcN,EAAK,OAASE,EAC5BK,EAAsB,gBAAgBC,GAAWL,CAAQ,CAAC,IAChEf,EAAU,YAAYmB,CAAmB,EAAI,KAAK,MAC9C,KAAK,UAAUnB,EAAU,YAAY,YAAe,CACxD,EACA,IAAMqB,EAA0BZ,EAAiB,mBAAmB,QAChE,IAAI,qBAAkB,cAAc,GACpC,KAAK,qBAAkB,cAAc,EACzC,EACAT,EAAU,YAAYmB,CAAmB,EACrC,aAAU,cACd,EAAI,IAAIE,CAAuB,IAAIR,CAAK,GACvCb,EAAU,YAAYmB,CAAmB,EAAiB,aAAU,UAAU,EAAI,cAAW,WAC7FnB,EAAU,YAAYmB,CAAmB,EAAiB,YAAcD,EACzElB,EAAU,YAAYmB,CAAmB,EAAE,aAAU,IAAI,EAAI,CACzD,CAAE,KAAM,iBAAc,OAAQ,MAAOL,CAAW,CACpD,EACIE,IACAhB,EAAU,YAAYmB,CAAmB,EAAE,aAAU,MAAM,EAAIH,GAGnEN,EAAc,WAAWK,CAAQ,EAAI,CACjC,KAAM,GAAGO,CAAsB,GAAGH,CAAmB,EACzD,CACJ,CACJ,CACJ,CA9CSb,EAAAC,GAAA,6BA4DT,SAASgB,GACLvB,EACAwB,EACAC,EACAC,EACAf,EACAgB,EACAC,EACAC,EACM,CACN,IAAIC,EAAQC,EAcZ,GAbIJ,EAAM,IAAMA,EAAM,MAClBG,EAASH,EAAM,GAAKA,EAAM,MAAM,QAAQ,OAAQ,EAAE,EAC3CA,EAAM,GACbG,EAASH,EAAM,GACRA,EAAM,QACbG,EAASH,EAAM,MAAM,QAAQ,OAAQ,EAAE,GAEvCG,EACAC,EAA8B,GAAG,kBAAe,aAAa,IAAIN,CAAa,KAAKG,CAAQ,KAAKE,CAAM,IAEtGC,EAA8B,GAAG,kBAAe,aAAa,IAAIN,CAAa,KAAKG,CAAQ,IAG3F5B,EAAU,YAAY+B,CAA2B,EAEjD,OAAOA,EAGX,IAAMC,EAA6B,GAAG,kBAAe,YAAY,IAAIP,CAAa,IAC5EQ,EAAyB,KAAK,MAAM,KAAK,UAAUjC,EAAU,YAAY,iBAAoB,CAAC,EACpGA,EAAU,YAAYgC,CAA0B,EAAIC,EAEpD,IAAMC,EAAW,CAAC,EACZ1B,EAAaG,GAAA,YAAAA,EAAiB,YAAY,KAAMwB,GAAOA,EAAG,OAAST,GACnEU,EAASC,GAAiBb,EAAS,mBAAgB,OAAO,EAAE,MAAOC,EAAeS,CAAQ,EAChG,OAAAI,GACItC,EACAQ,EACA4B,EACAZ,EACAK,EACAE,EACAC,EACAL,EAAM,EACV,EAEOI,CACX,CAhDSzB,EAAAiB,GAAA,sCAyDT,SAASgB,GACLvC,EACAwC,EACArC,EACAsC,EACI,CACJD,EAAiB,WAAa,KAAK,MAC/B,KAAK,UAAWxC,EAAU,YAAYyC,CAAe,EAAiB,UAAU,CACpF,EACID,EAAiB,WAAW,SAC5BzC,GAAwBC,EAAWwC,EAAkB,UAAWrC,CAAW,CAEnF,CAZSG,EAAAiC,GAAA,0BAoBT,SAASG,GAAoBC,EAAsBC,EAAaC,EAAuB,CACnFF,EAAS,WAAWC,CAAG,EAAI,CAAE,KAAM,GAAGtB,CAAsB,GAAGuB,CAAa,EAAG,CACnF,CAFSvC,EAAAoC,GAAA,uBAWT,SAASI,GAAmBC,EAAmBC,EAAiBrB,EAAoB3B,EAA6B,CAC7G,IAAMiD,EAAW7B,GAAW,GAAG2B,CAAS,IAAIC,CAAO,GAAG,EACtDhD,EAAU,YAAYiD,CAAQ,EAAI,KAAK,MAAM,KAAK,UAAUjD,EAAU,YAAY+C,CAAS,CAAC,CAAC,EAC7F/C,EAAU,YAAYiD,CAAQ,EAAE,WAAc,QAAW,KAAU3B,EAAyB0B,EAC3FhD,EAAU,YAAYiD,CAAQ,EAAiB,WAAW,QACvD,KACA,GAAG3B,CAAsB,qBAAqB0B,CAAO,IACzDhD,EAAU,YAAYiD,CAAQ,EAAE,aAAU,cAAc,EAAItB,EAAM,eAC9DA,EAAM,KAAO,SACZ3B,EAAU,YAAYiD,CAAQ,EAAiB,MAAQ,oBAAmBtB,EAAM,GACjF3B,EAAU,YAAYiD,CAAQ,EAAE,aAAU,IAAI,EAAI,CAAC,CAAE,KAAM,KAAM,MAAOtB,EAAM,EAAG,CAAC,GAErF3B,EAAU,YAAYiD,CAAQ,EAAiB,YAAc,kBAAe,MAG5EjD,EAAU,YAAYiD,CAAQ,EAAiB,WAAW,sBACvD,KACA,GAAG3B,CAAsB,2BAA2B0B,CAAO,IAC/DhD,EAAU,YAAY,2BAA2BgD,CAAO,GAAG,EAAI,KAAK,MAChE,KAAK,UAAUhD,EAAU,YAAY,uBAA0B,CACnE,EACAA,EAAU,YAAY,gBAAgBgD,CAAO,GAAG,EAAI,KAAK,MACrD,KAAK,UAAUhD,EAAU,YAAY,YAAe,CACxD,EAEKA,EAAU,YAAY,2BAA2BgD,CAAO,GAAG,EAAiB,WAAW,SAC1F,kBAAkB,UAAU,EAAE,KAAU,GAAG1B,CAAsB,gBAAgB0B,CAAO,IAE1FE,GAA2BvB,EAAM,WAAY3B,EAAW,gBAAgBgD,CAAO,GAAG,CACtF,CA7BS1C,EAAAwC,GAAA,sBAwCT,SAASK,GACLC,EACAxB,EACA5B,EACA2B,EACA0B,EACAlD,EACI,CACJ,GAAIwB,EAAM,OAAS,aAAU,UAAY,CAACC,EAEtC,OAEJ,IAAM0B,EAAqB1B,EAAS,MAAM,IAAI,EAAE,CAAC,EAC3C2B,EAAuB,GAAGpD,CAAW,IAAIyB,CAAQ,IAEvD5B,EAAU,YAAYuD,CAAoB,EAAIC,GAAqBxD,EAAW2B,EAAOC,CAAQ,EAC7F,IAAMY,EAAmBxC,EAAU,YAAYuD,CAAoB,EACnEhB,GAAuBvC,EAAWwC,EAAkBrC,4BAAuC,EAC3FqC,EAAiB,WAAW,MAAQ,KAAK,MACrC,KAAK,UAAUxC,EAAU,YAAY,yBAA4B,WAAc,gBAAa,KAAK,CAAC,CACtG,EACCwC,EAAiB,WAAW,MAAqB,MAAQ,CACtD,CACI,KAAM,GAAGlB,CAAsB,4CAA4CM,CAAQ,GACvF,EACA,CACI,KAAM,GAAGN,CAAsB,6CAA6CM,CAAQ,GACxF,EACA,CACI,KAAM,GAAGN,CAAsB,6BAA6BM,CAAQ,GACxE,EACA,CACI,KAAM,GAAGN,CAAsB,uBAAuBM,CAAQ,GAClE,EACA,CACI,KAAM,GAAGN,CAAsB,uBAAuBM,CAAQ,GAClE,CACJ,EACAY,EAAiB,aAAU,cAAc,EAAIb,EAAM,eACnD8B,GAA8B9B,EAAOa,EAAkBZ,CAAQ,EAE/DkB,GAAmB,2CAA4ClB,EAAUD,EAAO3B,CAAS,EACzF8C,GAAmB,4CAA6ClB,EAAUD,EAAO3B,CAAS,EAC1F8C,GAAmB,sBAAuBlB,EAAUD,EAAO3B,CAAS,EACpE8C,GAAmB,sBAAuBlB,EAAUD,EAAO3B,CAAS,EACpE8C,GAAmB,4BAA6BlB,EAAUD,EAAO3B,CAAS,EAE1E,IAAI0D,EAEEC,EAAkBC,GAA0BjC,EAAOyB,EAAmB,UAAU,EAClFO,IAEAD,EAA4BnC,GACxBvB,EACAoD,EAAmB,SACnBO,EAAgB,KAChBhC,EAAM,WAAW,KACjByB,EAAmB,WACnBzB,EACAC,EACAwB,EAAmB,SACvB,GAEJ,QAAWS,KAAaR,EAChBA,EAAOQ,CAAS,EAAE,OAAS,aAAU,UAAYA,EAAU,SAASP,CAAkB,GACtFQ,GACI9D,EACAqD,EAAOQ,CAAS,EAAE,OAClBR,EAAOQ,CAAS,EAAE,WAClBA,EACAH,CACJ,CAGZ,CA1ESpD,EAAA6C,GAAA,kBAoFT,SAASY,GACL/D,EACA6C,EACAlB,EACAqB,EACA7C,EACI,CACJH,EAAU,YAAY6C,CAAa,EAAIW,GAAqBxD,EAAW2B,EAAOqB,CAAO,EACrF,IAAMR,EAAmBxC,EAAU,YAAY6C,CAAa,EAC5DN,GAAuBvC,EAAWwC,EAAkBrC,0BAAqC,EACzFqC,EAAiB,WAAW,YAAc,CACtC,KAAM,SACN,YAAa,cACb,WAAY,CAAC,EACb,qBAAsB,EAC1B,EACAA,EAAiB,WAAW,YAAY,aAAU,UAAU,EAAI,EACpE,CAjBSlC,EAAAyD,GAAA,oBA2BT,SAASC,GACLhE,EACA6C,EACAlB,EACAC,EACAzB,EACF,CACEH,EAAU,YAAY6C,CAAa,EAAIW,GAAqBxD,EAAW2B,EAAOC,CAAQ,EACtF,IAAMY,EAAmBxC,EAAU,YAAY6C,CAAa,EAC5DN,GAAuBvC,EAAWwC,EAAkBrC,4BAAuC,CAC/F,CAVSG,EAAA0D,GAAA,sBAqBT,SAASC,GACLjE,EACA6C,EACAlB,EACAC,EACAzB,EACF,CACEH,EAAU,YAAY6C,CAAa,EAAIW,GAAqBxD,EAAW2B,EAAOC,CAAQ,EACtF,IAAMY,EAAmBxC,EAAU,YAAY6C,CAAa,EAC5D,OAAAN,GAAuBvC,EAAWwC,EAAkBrC,2BAAsC,EAC1FqC,EAAiB,aAAU,cAAc,EAAIb,EAAM,eACnDa,EAAiB,aAAU,UAAU,EAAI,GAClCA,CACX,CAbSlC,EAAA2D,GAAA,qBAqBT,SAASC,GAAeC,EAAsBC,EAAuB,CACjE,IAAMC,EAAqB,IAAI,IAA8B,CACzD,CAAC,aAAU,qCAAsC,EACjD,CAAC,aAAU,mCAAoC,EAC/C,CAAC,aAAU,gCAAiC,EAC5C,CAAC,aAAU,oCAAqC,EAChD,CAAC,aAAU,oCAAqC,EAChD,CAAC,aAAU,8BAA+B,EAC1C,CAAC,aAAU,wCAAyC,CACxD,CAAC,EACKC,EAAwB,IAAI,IAA8B,CAC5D,CAAC,aAAU,wCAAyC,EACpD,CAAC,aAAU,sCAAuC,EAClD,CAAC,aAAU,mCAAoC,EAC/C,CAAC,aAAU,uCAAwC,EACnD,CAAC,aAAU,uCAAwC,EACnD,CAAC,aAAU,iCAAkC,EAC7C,CAAC,aAAU,2CAA4C,CAC3D,CAAC,EACD,OAAIF,EACOE,EAAsB,IAAIH,CAAS,EAEnCE,EAAmB,IAAIF,CAAS,CAE/C,CAxBS7D,EAAA4D,GAAA,kBAiCT,SAASK,GAAgB5C,EAAOC,EAAUzB,EAAqB,CAC3D,IAAIqE,EAAe5C,EACnB,OAAIzB,wDACAqE,EAAeA,EAAa,QAAQ,IAAI,qBAAkB,MAAM,GAAI7C,EAAM,IAAI,GAE3E,GAAG6C,CAAY,EAC1B,CANSlE,EAAAiE,GAAA,mBAiBT,SAASE,GACLrB,EACAC,EACAzB,EACAe,EACA3C,EACAoE,EAAe,GACX,CACJ,IAAMzC,EAAqB0B,EAAOzB,CAAQ,EACpCzB,EAAc+D,GAAevC,EAAM,KAAMyC,CAAY,EACrDI,EAAeD,GAAgB5C,EAAOC,EAAUzB,CAAW,EAC3D0C,EAAgB,GAAG1C,CAAW,IAAIqE,CAAY,IAEpD,OADA9B,GAAoBC,EAAU6B,EAAc3B,CAAa,EACjD1C,EAAa,CACjB,0BACA,6BAA+B,CAE3BiE,EAAe,GACfL,GAAiB/D,EAAW6C,EAAelB,EAAOC,EAAUzB,CAAW,EACvE,IAAMuE,EAAe1E,EAAU,YAAY6C,CAAa,EAAiB,WACpE,YACL,QAAWD,KAAOjB,EAAM,OACpB8C,GAAWrB,EAAoBzB,EAAM,OAAQiB,EAAK8B,EAAa1E,EAAWoE,CAAY,EAE1F,KACJ,CACA,+BACA,kCAAoC,CAChCjB,GAAeC,EAAoBxB,EAAU5B,EAAW2B,EAAO0B,EAAQlD,CAAW,EAElF,IAAMwE,EAAkB,KACxBC,GAAc5E,EAAW2B,EAAM,WAAYgD,CAAe,EAC1D,KACJ,CACA,+BACA,kCAAoC,CAEhCX,GAAmBhE,EAAW6C,EAAelB,EAAOC,EAAUzB,CAAW,EAEzE,KACJ,CACA,8BACA,iCAAmC,CAC/B,IAAMqC,EAAmByB,GAAkBjE,EAAW6C,EAAelB,EAAOC,EAAUzB,CAAW,EACjG0E,GAAW,eAAY,QAASlD,EAAOa,EAAkBxC,EAAW,wBAAqB,GAAI4B,CAAQ,EACrG,KACJ,CACA,iCACA,iCAAmC,CAC/BkD,GAAqBnD,EAAOC,EAAUe,EAAU3C,EAAW,eAAY,QAAS,OAAW,IAAI,EAC/F,KACJ,CACA,oCACA,oCAAsC,CAClC8E,GACInD,EACAC,EACAe,EACA3C,EACA,eAAY,QACZ,eAAY,WACZ,IACJ,EACA,KACJ,CACA,QAEI2C,EAAS,WAAWf,CAAQ,EAAI4B,GAAqBxD,EAAW2B,EAAOC,CAAQ,CAEvF,CACJ,CAtEStB,EAAAmE,GAAA,cA8ET,SAASM,GACL3B,EACApD,EACAgF,EACI,CApkBR,IAAAC,EAAAC,EAAAC,EAAAC,EAqkBI,IAAMzC,EAAW3C,EAAU,YAAY,kBAAe,QAAQ,EAQ9D,GAPA2C,EAAS,aAAU,UAAU,EAAI,IAC7BsC,EAAA7B,EAAmB,YAAnB,MAAA6B,EAA8B,aAC9BtC,EACI,aAAU,cACd,EAAI,IAAIS,EAAmB,UAAU,WAAW,kBAAkB,KAAK,qBAAkB,MAAM,IAG/F,CAAC4B,EACD,OAGJ,IAAM3B,EAAuBgC,IACzBH,EAAA9B,EAAmB,YAAnB,YAAA8B,EAA8B,WAC9B9B,EAAmB,WACnB,wBAAqB,GACrBA,EAAmB,MACvB,EACA,GAAI,CAACC,GAAU,OAAO,KAAKA,CAAM,EAAE,SAAW,EAC1C,OAIJ,QAAWT,KAAOoC,EAAO,CACrB,IAAMM,EAAUN,EAAMpC,CAAG,EACzB,IAAIwC,GAAAD,EAAA/B,EAAmB,YAAnB,YAAA+B,EAA8B,OAA9B,MAAAC,EAAoC,SAASE,EAAQ,WAErD,QAAW1D,KAAYyB,EACnBoB,GAAWrB,EAAoBC,EAAQzB,EAAUe,EAAU3C,CAAS,OAGxE+E,GAAY3B,EAAoBpD,EAAWsF,EAAQ,KAAK,CAEhE,CAGA,IAAMC,EAAiBvF,EAAU,YAAY,eAC7C,QAAWwF,KAAQD,EAAe,WAC9B5C,EAAS,WAAW6C,CAAI,EAAID,EAAe,WAAWC,CAAI,CAElE,CA7CSlF,EAAAyE,GAAA,eAsDT,SAASU,GAAUzF,EAAmBQ,EAAwBG,EAA0C,CACpG+E,GAAsB1F,EAAWQ,CAAU,EAG3CmF,GAAiB3F,EAAWQ,EAAYG,EAAiBJ,GAA2B,EAAI,CAC5F,CALSD,EAAAmF,GAAA,aAcT,SAASG,GACLC,EACArF,EACAG,EACAmF,EACI,CAGJ,IAAMC,EAAgBC,GAA0BxF,EAAYG,EAAiBmF,EAAQ,OAAW,EAAI,EAChGC,GACAE,GACIJ,EACA,CAAC,kCAAmC,6BAA6B,EACjEE,EACA,CAAC,KAAM,KAAK,CAChB,CAER,CAjBSzF,EAAAsF,GAAA,2BA0BF,SAASM,GACZ9C,EACA+C,EACM,CAjqBV,IAAAlB,EAmqBImB,GAAS,EAET,IAAMpG,EAAY,KAAK,MAAM,KAAK,UAAUmG,CAAa,CAAC,EAGpDE,EAAqB,CAAC,EAC5B,QAAWb,KAAQxF,EAAU,YAAY,eAAkB,WACvDqG,EAAmBb,CAAI,EAAKxF,EAAU,YAAY,eAAiC,WAAWwF,CAAI,EAItGxF,EAAU,WAAW,gBAAa,QAAQ,EAAI,CAC1C,KAAMsB,EAAyB,UACnC,EAEA,IAAMd,GAAayE,EAAA7B,EAAmB,YAAnB,YAAA6B,EAA8B,WACjD7B,EAAmB,WAAa5C,EAChC,IAAMwE,EAAQ5B,EAAmB,SAAS,mBAAgB,OAAO,EAAE,MACnE,OAAK4B,GAaLS,GAAUzF,EAAWQ,EAAY4C,EAAmB,UAAU,EAG9DpD,EAAU,YAAY,kBAAe,QAAQ,EAAI,CAC7C,KAAM,SACN,WAAY,CAAC,EACb,YAAa,WACb,qBAAsB,EAC1B,EACA+E,GAAY3B,EAAoBpD,EAAWgF,CAA2B,EAGtEY,GAAwB5F,EAAWQ,EAAY4C,EAAmB,WAAYA,EAAmB,MAAM,EAElGpD,EAAU,YAAY,WACnBA,EAAU,YAAY,kBAAoBA,EAAU,YAAY,iBAAiB,MAAS,QAE1FA,EAAU,YAAY,SAAW,CAC7B,KAAM,SACN,WAAYqG,EACZ,qBAAsB,EAC1B,EACArG,EAAU,YAAY,SAAS,aAAU,UAAU,EAAI,IAEvD,OAAOA,EAAU,WAAW,gBAAa,QAAQ,GAGzDsG,GAAiBtG,EAAWoD,EAAoB,wBAAqB,GAAI4B,CAA2B,EAGpG,OAAOhF,EAAU,YAAY,gBAC7B,OAAOA,EAAU,YAAY,mBAC7B,OAAOA,EAAU,YAAY,yBAC7B,OAAOA,EAAU,YAAY,eAC7B,OAAOA,EAAU,YAAY,kBAC7B,OAAOA,EAAU,YAAY,wBAC7B,OAAOA,EAAU,YAAY,yBAC7B,OAAOA,EAAU,YAAY,uBAC7B,OAAOA,EAAU,YAAY,yCAC7B,OAAOA,EAAU,YAAY,0CAC7B,OAAOA,EAAU,YAAY,0BAC7B,OAAOA,EAAU,YAAY,oBAC7B,OAAOA,EAAU,YAAY,oBAC7B,OAAOA,EAAU,YAAY,kBAC7B,OAAOA,EAAU,YAAY,yBAC7B,OAAOA,EAAU,YAAY,eAC7B,OAAOA,EAAU,YAAY,qBAC7B,OAAOA,EAAU,YAAY,sBAC7B,OAAOA,EAAU,YAAY,YAC7BuG,GAAsBvG,EAAWF,EAAqB,EAC/CE,IA9DHwG,GAAIpD,EAAmB,OAAQ,CAC3B,SAAU,eAAY,MACtB,QAASqD,EAAQ,EAAE,UAAW,CAAE,MAAOrD,EAAmB,SAAS,SAAS,EAAE,EAAM,CAAC,EACrF,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,OAAO,CACnC,CACJ,CAAC,EACMpD,EAuDf,CAvFgBM,EAAA4F,GAAA,8B0FnpBhB,IAAAQ,GAAyF,SAQzF,IAAMC,GAA4D,CAAC,YAAa,QAAS,QAAQ,EAS1F,SAASC,GACZC,EACAC,EACAC,EACAC,EACI,CACJC,GAA2BJ,EAAYE,EAAW,cAAc,EAChEG,GAA0BH,EAAW,gBAAiBD,CAAS,EAC/DK,GAA2BH,EAAiBD,EAAW,eAAe,CAC1E,CATgBK,EAAAR,GAAA,0BAkBT,SAASS,GACZC,EACAC,EACM,CAjDV,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAkDI,IAAMf,EAAY,KAAK,MAAM,KAAK,UAAUQ,CAAa,CAAC,EAE1DR,EAAU,WAAW,MAAM,MAAS,CAAG,EAAE,KAAUgB,EAAyBC,GAC5EjB,EAAU,WAAW,MAAM,MAAS,CAAG,EAAE,KAAUgB,EAAyBE,GAC5ElB,EAAU,WAAW,MAAM,MAAS,CAAG,EAAE,KAAUgB,EAAyBG,GAC5EnB,EAAU,WAAW,MAAM,MAAS,CAAG,EAAE,KAAUgB,EAAyBI,GAC5EpB,EAAU,WAAW,MAAM,MAAS,CAAG,EAAE,KAAUgB,EAAyBK,GAE5E,IAAMC,EAA6B,KAAK,MACpC,KAAK,UAAUd,EAAc,YAAY,8BAA8B,CAC3E,EACMe,EAA8B,KAAK,MACrC,KAAK,UAAUf,EAAc,YAAY,+BAA+B,CAC5E,EACMgB,EAAsB,KAAK,MAAM,KAAK,UAAUhB,EAAc,YAAY,SAAS,CAAC,EACpFiB,EAA4B,KAAK,MAAM,KAAK,UAAUjB,EAAc,YAAY,eAAe,CAAC,EAChGkB,EAAsB,KAAK,MAAM,KAAK,UAAUlB,EAAc,YAAY,SAAS,CAAC,EAEpFmB,EAAc,CAChB,KAAMX,EAAyB,kBAAe,SAClD,EACAM,EAA2B,WAAW,QAAUK,EAChDJ,EAA4B,WAAW,QAAUI,EACjDH,EAAoB,WAAW,QAAUG,EACzCF,EAA0B,WAAW,QAAUE,EAC/CD,EAAoB,WAAW,QAAUC,EAEzC,IAAMC,EAAYZ,EAAyB,kBAAe,UAC1DhB,EAAU,YAAYiB,EAAgB,EAAIK,EACzCtB,EAAU,YAAYiB,EAAgB,EAAiB,WAAW,QAAQ,KAAUW,EACrF5B,EAAU,YAAYkB,EAAiB,EAAIK,EAC1CvB,EAAU,YAAYkB,EAAiB,EAAiB,WAAW,QAAQ,KAAUU,EACtF5B,EAAU,YAAYmB,EAAS,EAAIK,EAClCxB,EAAU,YAAYmB,EAAS,EAAiB,WAAW,QAAQ,KAAUS,EAC9E5B,EAAU,YAAYoB,EAAe,EAAIK,EACxCzB,EAAU,YAAYoB,EAAe,EAAiB,WAAW,QAAQ,KAAUQ,EACpF5B,EAAU,YAAYqB,EAAS,EAAIK,EAClC1B,EAAU,YAAYqB,EAAS,EAAiB,WAAW,QAAQ,KAAUO,EAE9E,IAAM9B,GAAaW,EAAAF,EAAmB,YAAnB,YAAAE,EAA8B,WACjD,GAAI,CAACX,GACGY,EAAAH,EAAmB,YAAnB,MAAAG,EAA8B,MAC9BmB,GAAItB,EAAmB,OAAQ,CAC3B,SAAU,eAAY,MACtB,QAASuB,EAAQ,EAAE,mBAAoB,CAAE,eAAenB,EAAAJ,EAAmB,YAAnB,YAAAI,EAA8B,IAAK,CAAC,EAC5F,SAAU,CACN,KAAM,eACV,CACJ,CAAC,MAEF,CAEHoB,GAAyB/B,CAAS,EAElC,IAAMgC,GAAqBnB,GAAAD,EAAAd,GAAA,YAAAA,EAAY,cAAZ,YAAAc,EAAyB,KAAzB,YAAAC,EAA6B,SACxDoB,GAAiBjC,EAAWgC,EAAoBlC,CAAU,EAE1D,IAAMoC,GAA2BnB,GAAAD,EAAAhB,GAAA,YAAAA,EAAY,cAAZ,YAAAgB,EAAyB,KAAzB,YAAAC,EAA6B,gBAC9DoB,GAAmBnC,EAAWkC,EAA0BpC,CAAU,EAGlEsC,GAAcpC,EAAWF,CAAU,EAEnC,IAAMuC,EAAW,CAAC,EACZC,EAASC,GACXhC,EAAmB,SAAS,mBAAgB,OAAO,EAAE,MACrD8B,CACJ,EACA,GAAI,CAACC,EACD,OAAAT,GAAItB,EAAmB,OAAQ,CAC3B,SAAU,eAAY,MACtB,QAASuB,EAAQ,EAAE,MAAM,EACzB,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,OAAO,CACnC,CACJ,CAAC,EACM9B,EAEXwC,GACIxC,EACAF,EACAwC,EACA/B,EAAmB,SACnBA,EAAmB,SACvB,EACAV,GAAuBC,EAAYS,EAAmB,UAAWP,EAAWO,EAAmB,UAAU,EAGzG,OAAOP,EAAU,YAAY,+BAC7B,OAAOA,EAAU,YAAY,gCAC7B,OAAOA,EAAU,YAAY,UAC7B,OAAOA,EAAU,YAAY,gBAC7B,OAAOA,EAAU,YAAY,UAC7B,OAAOA,EAAU,YAAY,eAC7B,OAAOA,EAAU,YAAY,kBAC7B,OAAOA,EAAU,YAAY,QAC7B,OAAOA,EAAU,YAAY,QAC7B,OAAOA,EAAU,YAAY,cAC7B,OAAOA,EAAU,YAAY,UAC7B,OAAOA,EAAU,YAAY,KACjC,CACA,OAAAyC,GAAsBzC,EAAWJ,EAAqB,EAC/CI,CACX,CA5GgBK,EAAAC,GAAA,8BCrChB,IAAAoC,GAQO,SAOP,IAAMC,GAAoE,CAAC,YAAa,QAAS,QAAQ,EASlG,SAASC,GACZC,EACAC,EACM,CApCV,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAqCI,IAAMC,EAAY,KAAK,MAAM,KAAK,UAAUP,CAAa,CAAC,EAEzDO,EAAU,WAAW,gBAAa,KAAK,EAAiB,MAAM,CAAC,EAAE,KAC9DC,EAAyB,gCAC7B,IAAMC,EAA4B,KAAK,MACnC,KAAK,UAAUF,EAAU,YAAY,kBAAkB,CAC3D,EACAE,EAA0B,WAAW,QAAW,KAAU,GAAGD,CAAsB,GAAG,kBAAe,SAAS,GAC9GC,EAA0B,WAAW,QAAW,KAAU,GAAGD,CAAsB,GAAG,kBAAe,SAAS,GAC9GD,EAAU,YAAY,+BAA+B,EAAIE,EAEzDF,EAAU,WAAW,gBAAa,KAAK,EAAE,MAAS,CAAC,EAAE,KAAU,GAAGC,CAAsB,0BACxF,IAAME,EAAsB,KAAK,MAAM,KAAK,UAAUH,EAAU,YAAe,YAAe,CAAC,EAC/FG,EAAoB,WAAW,QAAQ,KAAU,GAAGF,CAAsB,GAAG,kBAAe,SAAS,GACrGE,EAAoB,WAAW,QAAQ,KAAU,GAAGF,CAAsB,GAAG,kBAAe,SAAS,GACrGD,EAAU,YAAY,yBAAyB,EAAIG,EAEnDH,EAAU,WAAW,gBAAa,KAAK,EAAE,MAAS,CAAC,EAC/C,KACA,GAAGC,CAAsB,gCAC7B,IAAMG,EAA4B,KAAK,MACnC,KAAK,UAAUJ,EAAU,YAAY,kBAAqB,CAC9D,EACAI,EAA0B,WAAW,QAAQ,KAAU,GAAGH,CAAsB,GAAG,kBAAe,SAAS,GAC3GG,EAA0B,WAAW,QAAQ,KAAU,GAAGH,CAAsB,GAAG,kBAAe,SAAS,GAC3GD,EAAU,YAAY,+BAA+B,EAAII,EAGzDC,GAAuBL,EAAU,YAAY,2BAA2B,KAAS,CAC7E,MAAG,2BAA2B,yBAClC,CAAC,EAED,IAAMM,GAAaZ,EAAAF,EAAmB,YAAnB,YAAAE,EAA8B,WACjD,GAAI,CAACY,EACDC,GAAIf,EAAmB,OAAQ,CAC3B,SAAU,eAAY,MACtB,QAASgB,EAAQ,EAAE,mBAAoB,CAAE,eAAeb,EAAAH,EAAmB,YAAnB,YAAAG,EAA8B,IAAK,CAAC,EAC5F,SAAU,CACN,KAAM,eACV,CACJ,CAAC,MACE,CAEHc,GAAyBT,CAAS,EAElC,IAAMU,GAAqBb,GAAAD,EAAAU,GAAA,YAAAA,EAAY,cAAZ,YAAAV,EAAyB,KAAzB,YAAAC,EAA6B,SACxDc,GAAiBX,EAAWU,EAAoBJ,CAAU,EAE1D,IAAMM,GAA2Bb,GAAAD,EAAAQ,GAAA,YAAAA,EAAY,cAAZ,YAAAR,EAAyB,KAAzB,YAAAC,EAA6B,gBAC9Dc,GAAmBb,EAAWY,EAA0BN,CAAU,EAGlEQ,GAAcd,EAAWM,CAAU,EAEnC,IAAMS,EAAW,CAAC,EACZC,EAASC,GACXzB,EAAmB,SAAS,mBAAgB,OAAO,EAAE,MACrDuB,EACAvB,EAAmB,MACvB,EACA,GAAI,CAACwB,EACD,OAAAT,GAAIf,EAAmB,OAAQ,CAC3B,SAAU,eAAY,MACtB,QAASgB,EAAQ,EAAE,MAAM,EACzB,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,OAAO,CACnC,CACJ,CAAC,EACMR,EAGXkB,GACIlB,EACAM,EACAU,EACAxB,EAAmB,SACnBA,EAAmB,SACvB,EACA2B,GAAuBb,EAAYd,EAAmB,UAAWQ,EAAWR,EAAmB,UAAU,EAGzG,OAAOQ,EAAU,YAAY,aAC7B,OAAOA,EAAU,YAAY,mBAC7B,OAAOA,EAAU,YAAY,mBAC7B,OAAOA,EAAU,YAAY,eAC7B,OAAOA,EAAU,YAAY,kBAC7B,OAAOA,EAAU,YAAY,QAC7B,OAAOA,EAAU,YAAY,cAC7B,OAAOA,EAAU,YAAY,QAC7B,OAAOA,EAAU,YAAY,SACjC,CACA,OAAAoB,GAAsBpB,EAAWV,EAAqB,EAC/CU,CACX,CAlGgBqB,EAAA9B,GAAA,wCCvBT,SAAS+B,GAAuBC,EAAsC,CAEzE,IAAMC,EAAaD,EAAc,WAMjC,OAJKC,EAAW,OACRA,EAAW,MAAS,sBACpBA,EAAW,MAAS,qBAAwB,OAChD,CAAC,GACiB,IAAKC,GAAyB,CAEhD,IAAMC,EAAWD,EAAa,KAAQ,MAAM,GAAG,EAC/C,OAAOC,EAASA,EAAS,OAAS,CAAC,CACvC,CAAC,CACL,CAbgBC,EAAAL,GAAA,0BAoBT,SAASM,GAAcC,EAAmBC,EAA0B,CACvE,IAAMC,EAAeD,GAAYA,EAAS,SAAS,GAAKA,EAAS,SAAS,EAAE,aAAgB,CAAC,EACvFE,EAAc,OAAO,KAAKD,CAAW,EACrCE,EAAUH,GAAYA,EAAS,SAAS,GAAKA,EAAS,SAAS,EAAE,QAAW,CAAC,EAC/EI,EAAa,CAAC,EAClBA,EAAaA,EAAW,OACpB,OAAO,KAAKD,CAAM,EAAE,OAAQE,GAAUH,EAAY,SAAUC,EAAOE,CAAK,EAAuB,UAAU,CAAC,CAC9G,EAGA,IAAMC,EAAaP,EAAU,YAC7BO,EAAW,UAAe,CACtB,KAAM,QACV,EACAC,GAAgBH,EAAYE,EAAW,SAAY,EAGnD,IAAME,EAAQhB,GAAuBO,CAAS,EAC9C,QAAWU,KAAQD,EAAO,CACtB,IAAME,EAAWJ,EAAWG,CAAI,EAAE,WAAc,MAChD,OAAOC,EAAS,KAChBA,EAAS,KAAUC,EAAyB,WAChD,CACJ,CAvBgBd,EAAAC,GAAA,iBAkCT,SAASc,GAA6BnB,EAAuBO,EAA4B,CAC5F,IAAMD,EAAY,KAAK,MAAM,KAAK,UAAUN,CAAa,CAAC,EAE1D,OAAAM,EAAU,WAAc,MAAS,cAAmB,CAChD,QAAS,uBACb,EAEAD,GAAcC,EAAWC,CAAQ,EAC1BD,CACX,CATgBF,EAAAe,GAAA,gCC1DhB,IAAAC,GAA8E,SAgB9E,SAASC,GACLC,EACAC,EACAC,EACAC,EACAC,EACAC,EAC2B,CAC3BC,GAAS,EAET,IAAMC,EAAaC,GAAwBR,EAAaC,CAAM,EACxDQ,EAAkD,CACpD,aAAAJ,EACA,qBAAsB,wBAAqB,GAC3C,SAAAH,EACA,UAAAC,EACA,WAAAI,EACA,OAAAN,CACJ,EACA,OAAAQ,EAAmB,UAAYC,GAA4BN,EAAWK,EAAmB,UAAU,EAC9FA,EAAmB,WACpBE,GAAIF,EAAmB,OAAQ,CAC3B,SAAU,eAAY,MACtB,QAASG,EAAQ,EAAE,oBAAqB,CAAE,cAAeR,CAAU,CAAC,EACpE,SAAU,CACN,KAAM,eACV,CACJ,CAAC,EAEEK,CACX,CA9BSI,EAAAd,GAAA,uBA6CF,SAASe,GACZC,EACAX,EACAJ,EACAE,EACAC,EACAF,EACM,CACN,IAAMQ,EAAqBV,GACvBC,EACAC,EACAC,EACAC,EACAC,EACA,gBAAa,sBACjB,EACA,OAAOY,GAA2BP,EAAoBM,CAAa,CACvE,CAjBgBF,EAAAC,GAAA,iCAgCT,SAASG,GACZF,EACAX,EACAJ,EACAE,EACAC,EACAF,EACM,CACN,IAAMQ,EAAqBV,GACvBC,EACAC,EACAC,EACAC,EACAC,EACA,gBAAa,sBACjB,EACA,OAAOc,GAA2BT,EAAoBM,CAAa,CACvE,CAjBgBF,EAAAI,GAAA,iCAiCT,SAASE,GACZJ,EACAX,EACAJ,EACAE,EACAC,EACAF,EACM,CACN,IAAMQ,EAAqBV,GACvBC,EACAC,EACAC,EACAC,EACAC,EACA,gBAAa,oBACjB,EACA,OAAOgB,GAAqCX,EAAoBM,CAAa,CACjF,CAjBgBF,EAAAM,GAAA,yCA0BT,SAASE,GAAuBN,EAAuBb,EAA4B,CACtF,OAAOoB,GAA6BP,EAAeb,CAAQ,CAC/D,CAFgBW,EAAAQ,GAAA,0BC7JhB,IAAAE,GAAmB,SACnBC,GAAgB,SAUhBC,GAQO,SAgBP,IAAMC,GAAyBC,EAACC,IAA+C,CAC3E,YAAa,CAAC,EACd,SAAU,CACN,CAAC,mBAAgB,OAAO,EAAG,CAAE,MAAO,CAAC,CAAE,CAC3C,EACA,UAAWA,GAAgC,CAAC,CAChD,GAN+B,0BAc/B,SAASC,GACLC,EACAC,EACAC,EACI,CACJ,GAAIF,GAAkBC,IAAc,SAEhC,QAAWE,KAASH,EACZA,EAAeG,CAAK,EAAE,YAAc,yBACpCH,EAAeG,CAAK,EAAID,EAAQ,eAC5B,cAAW,WACX,kCACAF,EAAeG,CAAK,CACxB,EAEAH,EAAeG,CAAK,EAAID,EAAQ,eAC5B,cAAW,WACX,8BACAF,EAAeG,CAAK,CACxB,CAIhB,CAvBSN,EAAAE,GAAA,8BA6BT,SAASK,GAAqBJ,EAAwBE,EAA0C,CAC5F,GAAIF,GAAA,MAAAA,EAAiB,YAAgB,CACjC,IAAIK,EAEJ,QAAWC,KAAgBN,EAAe,YACtCK,EAAaL,EAAe,YAAeM,CAAY,EACvDP,GAA2BM,EAAYC,EAAcJ,CAAO,EAC5DE,GAAqBC,EAAYH,CAAO,CAEhD,CACJ,CAVSL,EAAAO,GAAA,wBAkBT,SAASG,GACLC,EACAC,EACAP,EACI,CAEJ,IAAIQ,EAEJ,QAAWT,KAAaO,EAAiB,SACrCE,EAAUD,EAAW,SAASR,CAAS,EACvCF,GAA2BW,EAAST,EAAWC,CAAO,EACtDE,GAAqBM,EAASR,CAAO,CAE7C,CAbSL,EAAAU,GAAA,+BAsBT,SAASI,GAAqBC,EAAgDC,EAAuC,CACjH,IAAMC,EAAmBF,EAAiB,KAAK,OACzCG,EAAYH,EAAiB,KAAK,UAClCI,EAA+BpB,GAAuBgB,EAAiB,SAAS,EAChFV,EAAU,IAAIe,GACdC,EAAahB,EAAQ,mBAAmB,cAAW,WAAYY,CAAgB,EAC/EK,EAAwBC,GAAyBF,CAAU,EAC3DG,EAAS,GAAGT,EAAiB,KAAK,KAAKO,EAAsB,EAAE,KAAKJ,CAAS,KAC7EO,EAAqB,CAAC,EACtBC,EAASC,GACXZ,EAAiB,SAAS,mBAAgB,OAAO,EAAE,MACnDU,CACJ,EACA,GAAI,CAACC,EAAQ,CACTE,GAAIb,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAASc,EAAQ,EAAE,MAAM,EACzB,SAAU,CACN,KAAM,gBACN,MAAO,CAAC,mBAAgB,OAAO,CACnC,CACJ,CAAC,EACD,MACJ,CACA,GAAI,CAACH,EAAO,UAAW,CACnBE,GAAIb,EAAiB,OAAQ,CACzB,SAAU,eAAY,MACtB,QAASc,EAAQ,EAAE,sBAAuB,CAAE,SAAU,cAAW,UAAW,CAAC,EAC7E,SAAU,CACN,KAAM,eACV,CACJ,CAAC,EACD,MACJ,CAMA,GALKH,EAAO,UAAU,WAClBA,EAAO,UAAU,SAAW,CAAC,GAEjCP,EAAc,SAAW,KAAK,MAAM,KAAK,UAAUJ,EAAiB,QAAQ,CAAC,EAEzEE,GAAoB,OAAO,KAAKA,CAAgB,EAAE,SAAW,EAAG,CAChE,IAAMa,EAA8C,CAChD,OAAAJ,EACA,cAAAP,EACA,MAAOJ,EAAiB,MACxB,OAAAS,EACA,UAAWT,EAAiB,WAC5B,WAAAC,EACA,QAAAX,EACA,SAAAoB,EACA,SAAU,cAAW,WACrB,OAAQV,EAAiB,MAC7B,EAEAgB,GACID,EACAT,EACA,CAAC,EACD,CAAC,EACDN,EAAiB,UACrB,CACJ,CAEA,OAAOI,CACX,CA/DSnB,EAAAc,GAAA,wBAwET,SAASkB,GACLjB,EACAC,EACa,CACb,IAAMiB,EAA2BlB,EAAiB,KAAK,OACjDG,EAAYH,EAAiB,KAAK,UAClCI,EAA+BpB,GAAuBgB,EAAiB,SAAS,EACtFI,EAAc,YAAc,CAAC,EAC7BA,EAAc,SAAW,KAAK,MAAM,KAAK,UAAUJ,EAAiB,QAAQ,CAAC,EAC7E,IAAMV,EAAU,IAAIe,GAEdc,EAAqB7B,EAAQ,mBAAmB,cAAW,mBAAoB4B,CAAwB,EAGvGX,EAAwBC,GAAyBW,CAAkB,EACnEV,EAAS,GAAGT,EAAiB,KAAK,KAAKO,EAAsB,EAAE,KAAKJ,CAAS,KAC7EO,EAAqB,CAAC,EAEtBC,EAASS,GACXpB,EAAiB,SAAS,mBAAgB,OAAO,EAAE,MACnDU,EACAV,EAAiB,MACrB,EACA,GAAKW,EAQL,IALKA,EAAO,UAAU,WAClBA,EAAO,UAAU,SAAW,CAAC,GAEjCP,EAAc,SAAW,KAAK,MAAM,KAAK,UAAUJ,EAAiB,QAAQ,CAAC,EAEzEkB,GAA4B,OAAO,KAAKA,CAAwB,EAAE,SAAW,EAAG,CAChF,IAAMH,EAA8C,CAChD,OAAAJ,EACA,cAAAP,EACA,MAAOJ,EAAiB,MACxB,OAAAS,EACA,UAAWT,EAAiB,WAC5B,WAAAC,EACA,QAAAX,EACA,SAAAoB,EACA,SAAU,cAAW,mBACrB,OAAQV,EAAiB,MAC7B,EAEAgB,GACID,EACAI,EACA,CAAC,EACD,CAAC,EACDnB,EAAiB,UACrB,CACJ,CAEA,OAAOI,EACX,CAvDSnB,EAAAgC,GAAA,4BAgET,SAASI,GAAiBrB,EAAgDC,EAAuC,CAC7G,IAAML,EAAmBI,EAAiB,KAAK,OACzCG,EAAYH,EAAiB,KAAK,UAClCI,EAA+BpB,GAAuBgB,EAAiB,SAAS,EAChFV,EAAU,IAAIe,GACdR,EAAaP,EAAQ,mBAAmB,cAAW,WAAYM,CAAgB,EAErF,GADAQ,EAAc,SAAW,KAAK,MAAM,KAAK,UAAUJ,EAAiB,QAAQ,CAAC,EACzEJ,EAAkB,CAClB,IAAMW,EAAwBC,GAAyBX,CAAU,EAC3DY,EAAS,GAAGT,EAAiB,KAAK,KAAKO,EAAsB,EAAE,KAAKJ,CAAS,KAE7EO,EAAqB,CAAC,EACtBC,EAA4BW,GAC9BtB,EAAiB,SAAS,mBAAgB,OAAO,EAAE,MACnDG,EACAO,CACJ,EACA,GAAI,CAACC,EACD,OAAOP,EAKX,GAHIR,EAAiB,UACjBD,GAA4BC,EAAkBC,EAAYP,CAAO,EAEjE,OAAO,KAAKM,CAAgB,EAAE,SAAW,EAAG,CAC5C,IAAMmB,EAA8C,CAChD,OAAAJ,EACA,cAAAP,EACA,MAAOJ,EAAiB,MACxB,OAAAS,EACA,UAAWT,EAAiB,WAC5B,WAAAC,EACA,QAAAX,EACA,SAAAoB,EACA,SAAU,cAAW,WACrB,OAAQV,EAAiB,MAC7B,EAEAgB,GACID,EACAlB,EACA,CAAC,EACD,CAAC,EACDG,EAAiB,UACrB,CACJ,CACJ,CACA,OAAOI,CACX,CA/CSnB,EAAAoC,GAAA,oBAsDT,IAAME,GAAqBtC,EAACe,GAAoE,CArThG,IAAAwB,EAsTI,IAAMpB,EAA+BpB,GAAuB,EAC5DoB,EAAc,SAAW,KAAK,MAAM,KAAK,UAAUJ,EAAiB,QAAQ,CAAC,EAC7E,IAAMV,EAAU,IAAIe,GACdoB,EAAenC,EAAQ,mBAAmB,cAAW,aAAcU,EAAiB,KAAK,MAAM,EAG/F0B,EADM,IAAI,GAAAC,QAAI,CAAE,UAAW,EAAK,CAAC,EAClB,QAAQ3B,EAAiB,UAAU,EAExD,GAAI,CAAC0B,EAASD,CAAY,EACtB,QAAWG,KAAOF,EAAS,OAAQ,CAC/B,IAAMG,EAAqBD,EAAI,OAAO,mBAElCA,EAAI,UAAY,wBAChB,CAAC,OAAO,OAAO,MAAG,gBAAgB,EAAE,UAASJ,EAAAI,EAAI,SAAJ,YAAAJ,EAAa,kBAAqB,GAC/EK,IAAuB,eAEvB,GAAAC,SAAOL,EAAc,GAAGG,EAAI,SAAS,MAAM,CAAC,CAAC,IAAIC,CAAkB,EAAE,CAE7E,CAEJ,OAAI7B,EAAiB,KAAK,QAAU,OAAO,KAAKA,EAAiB,KAAK,MAAM,EAAE,SAAW,GACrF+B,GACIN,EACArB,EACAJ,EAAiB,WACjBA,EAAiB,WACjBV,EACA,CAAC,CACL,EAGGc,CACX,EAjC2B,sBA2CrB4B,GAAsB/C,EAAA,CAACgD,EAA4BC,EAAkBC,IAA0C,CAhWrH,IAAAX,EAiWI,IAAMpB,EAA+BpB,GAAuB,EAC5DoB,EAAc,SAAW,KAAK,MAAM,KAAK,UAAU8B,CAAQ,CAAC,EAG5D,IAAME,EAAgB,OAAO,OAAO,IAAIC,GAAiBJ,CAAW,EACpEG,EAAc,SAAW,OAAO,OAAO,IAAIE,GAAeL,EAAY,QAAW,EACjF,QAAWM,KAAOJ,EAAW,YAAY,YAAY,WAAe,CAChE,IAAMK,EAAWC,GAAmBL,EAAc,SAAUG,CAAG,EAC/D,GAAIC,GAAYA,EAAS,SAAU,CAC/B,IAAME,EAAOF,EAAS,SAAS,KAAK,EAC9BG,EAAkBC,GAA8BxC,EAAc,SAAUsC,CAAI,EAC9ET,EAAY,UAAYA,EAAY,SAASM,CAAG,IAAM,OACtDI,EAAgBJ,CAAG,EAAIN,EAAY,SAASM,CAAG,EAE/C,OAAOI,EAAgBJ,CAAG,CAElC,CACJ,CAEA,IAAMM,GAAgBrB,EAAApB,EAAc,SAAS,mBAAgB,OAAO,IAA9C,YAAAoB,EAAiD,MACvE,OAAIqB,GAAiBZ,EAAY,OAC7Ba,GAA6Bb,EAAY,KAAMA,EAAY,MAAU,OAAO,OAAOY,CAAa,EAAE,CAAC,CAAW,EAE3GzC,CACX,EAzB4B,uBAkCrB,SAAS2C,GACZC,EACA/C,EACyB,CACzB,GAAI+C,EAAmB,cAAW,UAAU,EACxC,OAAOjD,GAAqBiD,EAAmB,cAAW,UAAU,EAAG/C,CAAU,EAC9E,GAAI+C,EAAmB,cAAW,UAAU,EAC/C,OAAO3B,GAAiB2B,EAAmB,cAAW,UAAU,EAAG/C,CAAU,EAC1E,GAAI+C,EAAmB,cAAW,YAAY,EACjD,OAAOzB,GAAmByB,EAAmB,cAAW,YAAY,CAAC,EAClE,GAAIA,EAAmB,cAAW,WAAW,EAAG,CACnD,GAAM,CAAE,YAAAf,EAAa,SAAAC,EAAU,WAAAC,CAAW,EAAIa,EAAmB,cAAW,WAAW,EACvF,OAAOhB,GAAoBC,EAAaC,EAAUC,CAAU,CAChE,SAAWa,EAAmB,cAAW,kBAAkB,EACvD,OAAO/B,GAAyB+B,EAAmB,cAAW,kBAAkB,EAAG/C,CAAU,CAErG,CAhBgBhB,EAAA8D,GAAA,gBC5XhB,IAAAE,GAA4C,SAY5C,IAAMC,GAAcC,EAAA,CAACC,EAAiBC,EAAcC,KACzC,CACH,QAAAF,EACA,KAAAC,EACA,OAAAC,CACJ,GALgB,eAcdC,GAAqBJ,EAAA,CACvBK,EACAC,KAIO,CACH,SAAU,CACN,GAAID,GAAa,CAAE,UAAAA,CAAU,EAC7B,GAAIC,GAAqB,CAAE,kBAAAA,CAAkB,EAC7C,WAAY,CAAC,CACjB,CACJ,GAZuB,sBAe3B,SAASC,GAAkBC,EAAyD,CAChF,IAAIC,EAA8BD,EAClC,OAAKC,GAMIA,EAAQ,SACTA,EAAQ,OAAS,CAAC,GAEjBA,EAAQ,UACTA,EAAQ,QAAU,CAAC,IATvBA,EAAU,CACN,OAAQ,CAAC,EACT,QAAS,CAAC,CACd,EASGA,CACX,CAhBST,EAAAO,GAAA,qBAkBT,SAASG,GAAiBP,EAAiCQ,EAAuBC,EAAyB,CAClGT,EAAO,QAAQ,SAAS,aACzBA,EAAO,QAAQ,SAAS,WAAa,CAAC,GAE1CA,EAAO,QAAQ,SAAS,WAAWQ,CAAa,EAAI,CAChD,OAAQC,CACZ,CACJ,CAPSZ,EAAAU,GAAA,oBAkBT,SAASG,GAAsBC,EAAiBC,EAAqBC,EAA4B,CAC7F,IAAIf,EAAU,GAEd,OAAAa,EAAM,QAAQ,CAACG,EAAMC,IAAU,CAC3B,IAAIC,EAAM,GACNJ,GAAcA,EAAW,WAAa,cAAW,aAE7CC,EAAWC,CAAI,EACfE,EAAM,KAAKH,EAAWC,CAAI,CAAC,KAG3BE,EAAM,QAAQD,EAAQA,EAAQ,EAAI,EAAE,MAG5CjB,GAAW,GAAGA,EAAU,IAAM,EAAE,GAAGgB,CAAI,GAAGE,CAAG,EACjD,CAAC,EACM,GAAGlB,CAAO,UACrB,CAjBSD,EAAAa,GAAA,yBA0BT,SAASO,GAAoBN,EAAiBO,EAAgBC,EAAiBC,EAAsB,CACjGT,EAAM,QAAQO,CAAM,EACpB,IAAIG,EACJ,QAAWL,KAAOG,EAAO,CACrB,GAAI,OAAOA,EAAMH,CAAG,EAAE,YAAe,SAAU,CAC3C,IAAMM,EAAU,OAAO,KAAKH,EAAMH,CAAG,EAAE,UAAU,EAAE,KAC9CD,GAAUI,EAAMH,CAAG,EAAE,WAAWD,CAAK,EAAE,QAAaK,CACzD,EACIE,IACAJ,EAASI,EACTD,EAAgBF,EAAMH,CAAG,EAEjC,CACA,GAAIK,EAAe,CACfJ,GAAoBN,EAAOO,EAAQC,EAAOH,CAAG,EAC7C,MACJ,CACJ,CACJ,CAlBSnB,EAAAoB,GAAA,uBAyBT,SAASM,GAAeC,EAA+B,CACnD,IAAMC,EAAS,CAAC,EACVC,EAAeF,GAAA,YAAAA,EAAe,MAAM,KAC1C,OAAIE,GAAgBA,EAAa,OAAS,GACtCA,EAAa,QAASZ,GAAS,CAC3B,IAAMa,EAASb,EAAK,UAAU,EAAGA,EAAK,QAAQ,IAAI,CAAC,EAC7Cc,EAAUd,EAAK,UAAUA,EAAK,QAAQ,IAAI,EAAI,EAAGA,EAAK,QAAQ,IAAI,CAAC,EACzEW,EAAOE,CAAM,EAAIC,CACrB,CAAC,EAEEH,CACX,CAXS5B,EAAA0B,GAAA,kBAqBT,SAASM,GACLC,EACAX,EACAnB,EACAM,EACAc,EACF,CACE,QAAWZ,KAAiBsB,EAAK,WAAY,CACzC,IAAMrB,EAAkBqB,EAAK,WAAWtB,CAAa,EAC/CuB,EAAUZ,EAAMV,EAAgB,KAAQ,EAE9C,GADAF,GAAiBP,EAAQQ,EAAeC,CAAyB,EAE7DA,GAAA,MAAAA,EAAkB,OAClB,CAACH,EAAQ,OAAO,KAAM0B,GAAiBA,EAAa,OAASvB,EAAgB,KAAQ,EACvF,CACE,IAAME,EAAkB,CAAC,EACzBM,GAAoBN,EAAOH,EAAeW,EAAOC,CAAM,EACvD,IAAMP,EAAaU,GAAeO,EAAK,YAAY,EAC7ChC,EAAUY,GAAsBC,EAAOoB,EAASlB,CAAU,EAEhEP,EAAQ,OAAO,KAAKV,GAAYE,EAASW,EAAgB,MAAUA,EAAgB,KAAQ,CAAC,CAChG,CACJ,CACJ,CAvBSZ,EAAAgC,GAAA,wBAyBT,SAASI,GAAmB3B,EAA6Ba,EAAiB,CACtE,QAAWe,KAAM5B,EAAQ,QACrB,GAAI,CAACa,GAAS,CAACA,EAAMe,CAAE,EAAG,CAEtB,OAAO5B,EAAQ,QAAQ4B,CAAE,EAEzB,IAAMnB,EAAQT,EAAQ,OAAO,UAAW6B,GAAUA,EAAM,OAASD,CAAE,EAC/DnB,IAAU,IACVT,EAAQ,OAAO,OAAOS,EAAO,CAAC,CAEtC,CAER,CAZSlB,EAAAoC,GAAA,sBAcT,SAASG,GAAkBN,EAAe9B,EAAiC,CAlM3E,IAAAqC,EAAAC,EAmMQR,EAAK,WACA9B,EAAO,UACRA,EAAO,QAAUC,GAAmB6B,EAAK,UAAWA,EAAK,iBAAiB,GAE9E9B,EAAO,QAAQ,SAAS,UAAY8B,EAAK,YAEzCQ,GAAOD,EAAArC,EAAO,UAAP,YAAAqC,EAAgB,WAAvB,aAAAC,EAAiC,SAEzC,CATSzC,EAAAuC,GAAA,qBAgBT,SAASG,GAA4BT,EAAe9B,EAAuC,CAlN3F,IAAAqC,EAAAC,EAAAE,EAAAC,EAAAC,EAoNI,IAAMC,GAAmBF,GAAAD,GAAAF,GAAAD,EAAArC,GAAA,YAAAA,EAAQ,UAAR,YAAAqC,EAAiB,WAAjB,YAAAC,EAA2B,UAA3B,YAAAE,EAAoC,OAApC,YAAAC,EAA0C,SACnE,GAAIX,EAAK,WAAa,cAAW,YAAca,GAAoB,OAAOA,GAAqB,SAAU,CACrG,IAAMC,EAAad,EAAK,OAElBe,GADiB,MAAM,SAAQH,EAAAE,GAAA,YAAAA,EAAY,WAAZ,YAAAF,EAAsB,MAAM,EAAIE,EAAW,SAAS,OAAS,CAAC,GAClE,IAAKE,GAAgDA,EAAQ,EAAE,EAC1FC,EAAc,OAAO,KAAKJ,CAAgB,EAChD,GAAIE,EACA,QAAWX,KAAMa,EACT,CAACF,EAAU,SAASX,CAAE,GAAK,EAAE,gBAAiBS,EAAiBT,CAAE,IAEjE,OAAOS,EAAiBT,CAAE,CAI1C,CACJ,CAjBSrC,EAAA0C,GAAA,+BAmBT,SAASS,GAAY1C,EAA6B4B,EAAYJ,EAAe,CACzE,IAAMK,EAAQ7B,EAAQ,OAAO,KAAM0B,GAAiBA,EAAa,OAASE,CAAE,EACxEC,IACIL,EAAK,kBACLK,EAAM,OAASL,EAAK,kBAEpB,OAAOK,EAAM,OAGzB,CATStC,EAAAmD,GAAA,eAmBT,SAASC,GACLnB,EACA9B,EACAkC,EACAf,EACuB,CACvB,OAAIW,EAAK,UAAYA,EAAK,WAAa,cAAW,WAC9C9B,EAAS,CACL,GAAGA,EAEC,KAAM,YACN,IAAIA,GAAA,YAAAA,EAAS,KAASkC,EACtB,KAAM,oBAA0Bf,EAAMe,CAAE,EAAE,QAAQ,EAE1D,EACOJ,EAAK,OACZ9B,EAAS,CACL,GAAGA,EAEC,SAAU8B,EAAK,KAAK,IAE5B,EACIA,EAAK,KAAK,KACT9B,EAA8C,OAAS8B,EAAK,KAAK,KAGnE9B,CACX,CA3BSH,EAAAoD,GAAA,cAiCF,SAASC,GAAmBC,EAAkBhC,EAAiBiC,EAAsC,CAzR5G,IAAAf,EAAAC,EA0RI,IAAMhC,EAAUF,GAAkBgD,EAAS,mBAAgB,GAAG,EAAE,OAA6B,EAGzFD,GAAY,CAAC7C,EAAQ,OAAO,KAAM6B,GAAUA,EAAM,OAASgB,CAAQ,GAEnE7C,EAAQ,OAAO,KAAKV,GAAY,WAAyBuD,EAAUA,CAAQ,CAAC,EAEhF,QAAWjB,KAAMf,EAAO,CACpB,IAAInB,EACE8B,EAAOX,EAAMe,CAAE,EACjB5B,EAAQ,QAAQ4B,CAAE,IAClBlC,EAASM,EAAQ,QAAQ4B,CAAE,GAE/BlC,EAASiD,GAAWnB,EAAM9B,EAAQkC,EAAIf,CAAK,EAC3CiB,GAAkBN,EAAM9B,CAAM,EAC9BuC,GAA4BT,EAAM9B,CAAM,EACpCA,GAAU,CAAC8B,EAAK,qBAChB,OAAO9B,EAAO,eACd,OAAOA,EAAO,qBAEdsC,GAAAD,EAAArC,GAAA,YAAAA,EAAQ,UAAR,YAAAqC,EAAiB,WAAjB,MAAAC,EAA2B,aAE3BtC,EAAO,QAAQ,SAAS,WAAa,CAAC,GAG1C6B,GAAqBC,EAAMX,EAAOnB,EAAQM,EAAS4B,CAAE,EAErDc,GAAY1C,EAAS4B,EAAIJ,CAAI,EAE7BxB,EAAQ,QAAQ4B,CAAE,EAAIlC,CAC1B,CAEA,OAAAiC,GAAmB3B,EAASa,CAAK,EAC1Bb,CACX,CAnCgBT,EAAAqD,GAAA,sBCxRhB,IAAAG,GAMO,SCCA,SAASC,GAAoBC,EAAuBC,EAAcC,EAAM,GAAY,CACnFA,GACKF,EAAS,eACVA,EAAS,aAAe,CAAC,GAExBA,EAAS,aAAa,OACvBA,EAAS,aAAa,KAAO,CAAC,GAE9BA,EAAS,aAAa,KAAKC,CAAI,IAAM,SACrCD,EAAS,aAAa,KAAKC,CAAI,EAAI,CAAC,IAEjCD,EAAS,cAAgBA,EAAS,aAAa,MAAQA,EAAS,aAAa,KAAKC,CAAI,IAAM,QACnG,OAAOD,EAAS,aAAa,KAAKC,CAAI,CAE9C,CAdgBE,EAAAJ,GAAA,uBAqBT,SAASK,GAAkBC,EAAwB,CACtD,IAAIC,EAAaD,EACjB,GAAIA,EAAO,QAAQ,GAAG,EAAI,GAAI,CAC1BC,EAAaD,EAAO,UAAUA,EAAO,QAAQ,GAAG,EAAI,EAAGA,EAAO,OAAS,CAAC,EACxE,IAAME,EAAUF,EAAO,UAAU,EAAGA,EAAO,YAAY,IAAI,CAAC,EAAE,QAAQ,MAAO,GAAG,EAC5EE,IACAD,EAAa,GAAGC,CAAO,IAAID,CAAU,GAE7C,CACA,OAAOA,CACX,CAVgBH,EAAAC,GAAA,qBDfhB,IAAMI,GAAkB,CACpB,oCAAiC,iBACjC,oCAAiC,eACjC,oCAAiC,cACrC,EAYMC,GAAkBC,EAAA,CACpBC,EACAC,EACAC,EACAC,EAA6B,CAAC,EAC9BC,EAAQ,IACD,CApCX,IAAAC,EAqCI,IAAMC,EAAcN,EAAY,QAAQ,OAAO,KAAMO,GAC1CA,EAAM,OAASL,CACzB,EACD,GAAI,CAACI,EACD,OAGA,OAAOA,EAAY,QAAW,WAG9BA,EAAY,OAASF,GAAS,EAAI,CAAC,GAAGD,EAAaG,EAAY,MAAM,EAAI,CAACA,EAAY,MAAM,GAGhG,IAAME,EAASR,EAAY,QAAQ,QAAQE,CAAQ,EAC7CO,GAAOJ,EAAAJ,EAAI,QAAJ,YAAAI,EAAYH,GACzB,GAAI,CAACO,EACD,OAEA,uBAAwBA,EACxBD,EAAO,mBAAqBC,EAAK,mBAC1BZ,GAAgBO,CAAK,EAC5BI,EAAO,mBAAqBX,GAAgBO,CAAK,EAEjDI,EAAO,mBAAqB,oCAAiC,eAEjE,IAAME,EAAUJ,EAAY,QAAQ,mBAAmC,EAAE,EAOzE,GANII,EACAF,EAAO,eAAiBE,EAAQ,WAAW,GAAG,EAAIA,EAAU,IAAIA,CAAO,GAEvEF,EAAO,eAAiB,GAGxBC,EAAK,WAAY,CACjBL,IACA,QAAWO,KAAUF,EAAK,WACtBX,GAAgBE,EAAaC,EAAKQ,EAAK,WAAWE,CAAM,EAAE,MAAUL,EAAY,OAAQF,CAAK,CAErG,CACJ,EA7CwB,mBAoDlBQ,GAAYb,EAAA,CAACC,EAA0BC,IAA6B,CAEtED,EAAY,QAAQ,OAAO,YAAc,MAAG,uBAE5CF,GAAgBE,EAAaC,EAAKA,EAAI,IAAI,EAE1C,IAAMY,EAA2B,CAC7B,SAAU,4BACV,KAAM,aAAU,IAChB,MAAO,GACP,GAAI,oBACR,EACAb,EAAY,SAAWA,EAAY,SAAW,CAAE,GAAGA,EAAY,SAAU,GAAGa,CAAS,EAAIA,EAEzFC,GAAoBd,EAAa,MAAG,2BAA2B,CACnE,EAfkB,aAqBZe,GAAahB,EAACiB,GAA8B,CAK9C,GAJIA,EAAO,UAAYA,EAAO,SAAS,WAAa,6BAEhD,OAAOA,EAAO,SAEdA,EAAO,QAAS,CACZA,EAAO,QAAQ,QAAUA,EAAO,QAAQ,OAAO,cAAgB,MAAG,wBAElE,OAAOA,EAAO,QAAQ,OAAO,YAEjC,IAAMC,EAASD,EAAO,QAAQ,QAAU,CAAC,EACzC,QAAWT,KAASU,EACZV,EAAM,QAAU,MAAM,QAAQA,EAAM,MAAM,IAG1CA,EAAM,OAASA,EAAM,KAGjC,CACJ,EAnBmB,cA0BNW,GAAYnB,EAAA,CAACC,EAA0BC,IAA6B,CACzEA,EAAI,UAAYA,EAAI,SAAS,qBAC7BW,GAAUZ,EAAaC,CAAG,EAE1Bc,GAAWf,CAAW,CAE9B,EANyB,aEnHzB,IAAAmB,GAUO,SAsBP,IAAAC,GAAkC,sDAuBlC,IAAMC,GAAqC,CACvC,YAAa,CAAC,EACd,SAAU,CACN,UAAW,CACP,YAAa,GACb,QAAS,CACL,QAAS,CAAC,CACd,CACJ,EACA,UAAW,CAAC,CAChB,EACA,UAAW,CAAC,CAChB,EAYA,SAASC,GACLC,EACAC,EACAC,EACAC,EACAC,EACAC,EACF,CACE,IAAMC,EAAYN,EAAS,KAAK,UAC5BC,EAAmB,OACnBC,EACAC,EACAH,EAAS,KAAK,YACdC,EAAmB,KACvB,EACMM,EAAaC,GAAsBJ,EAAcJ,EAAUC,EAAmB,WAAYI,EAAKC,CAAS,EAC9GL,EAAmB,cAAc,YAAY,KACzCD,EAAS,KAAK,iBAAiBO,EAAYN,EAAmB,cAAc,QAAQ,CACxF,CACJ,CAnBSQ,EAAAV,GAAA,oBAqBT,SAASW,GACLR,EACAD,EACAG,EACF,CAtHF,IAAAO,EAAAC,EAAAC,EAuHI,IAAIC,EAA0B,IAAI,qBAAkB,QAAQ,GACxDC,EAAmB,IAAI,qBAAkB,QAAQ,GAC/CC,GACFL,EAAAV,EAAmB,UAAU,YAAY,kBAAe,QAAQ,IAAhE,YAAAU,EAAoE,aAAU,gBAClF,GAAIT,EAAI,OAAS,GAAKD,EAAmB,OAAO,MAAS,eAAgB,CACrE,IAAMgB,GAAWL,EAAAX,EAAmB,UAAU,YAAY,kBAAe,QAAQ,IAAhE,YAAAW,EAAoE,aAAU,gBAC/FE,EAA0BC,EAAmBE,GAAYA,EAAS,OAAOA,EAAS,YAAY,GAAG,CAAC,CACtG,UAAWJ,EAAAT,EAAa,QAAb,MAAAS,EAAoB,eAE3BC,EAA0BC,EAAmB,IAAIX,EAAa,MAAM,cAAc,WAC3EF,EAAI,CAAC,IAAM,gBAAa,OAASc,EAAgB,CACxD,IAAME,EAAsBF,EAAe,MAAM,GAAG,EACpDF,EAA0BC,EAAmBG,EAAoBA,EAAoB,OAAS,CAAC,CACnG,CACA,MAAO,CAAE,wBAAAJ,EAAyB,iBAAAC,CAAiB,CACvD,CApBSN,EAAAC,GAAA,oCAsBT,SAASS,GACLjB,EACAD,EACAa,EACAC,EACAX,EACF,CA9IF,IAAAO,EAAAC,EA+II,GAAIV,EAAI,OAAS,EAAG,CAChB,IAAMe,GAAWN,EAAAV,EAAmB,UAAU,YAAY,kBAAe,QAAQ,IAAhE,YAAAU,EAAoE,aAAU,gBAC/FG,EAA0BC,EAAmBE,GAAYA,EAAS,OAAOA,EAAS,YAAY,GAAG,CAAC,CACtG,MAEIH,EAA0BC,EAAmB,KAAIH,EAAAR,EAAa,QAAb,YAAAQ,EAAoB,cAAc,GAEvF,MAAO,CAAE,wBAAAE,EAAyB,iBAAAC,CAAiB,CACvD,CAfSN,EAAAU,GAAA,oCAiBT,SAASC,GACLnB,EACAC,EACAa,EACAD,EACF,CA9JF,IAAAH,EAAAC,EA+JI,IAAMS,GAAoBV,EAAAV,EAAmB,UAAU,YAAY,mBAAzC,YAAAU,EAA6E,WACnGT,EAAI,CAAC,GAET,GAAImB,GACA,GAAInB,EAAI,SAAW,EAEfa,EAAmBD,EACfO,EAAiB,aAAU,cAAc,GACzCA,EAAiB,aAAU,cAAc,EAAE,OACvCA,EAAiB,aAAU,cAAc,EAAE,YAAY,GAAG,CAC9D,UACGnB,EAAI,OAAS,EAAG,CAEvB,IAAMoB,GAAqBV,EAAAS,EAAgC,OAAhC,YAAAT,EAAsC,MAAMW,GAAwB,GACzFC,EAAgBF,GAAqBrB,EAAmB,UAAU,YAAYqB,CAAiB,EAC/FG,GACFD,GAAA,YAAAA,EAAgB,aAAU,kBAC1BA,EAAc,aAAU,cAAc,EAAE,OACpCA,EAAc,aAAU,cAAc,EAAE,YAAY,GAAG,CAC3D,EACJT,EAAmBD,EAA0BU,EAAc,mBACrD,GAAGA,EAAc,kBAAqB,IAAIC,CAAU,GACpDA,CACV,EAEJ,MAAO,CAAE,iBAAAV,EAAkB,wBAAAD,CAAwB,CACvD,CAhCSL,EAAAW,GAAA,oCAkCT,SAASM,GACLxB,EACAyB,EACAb,EACAC,EACF,CACE,GAAIb,EAAI,CAAC,IAAM,UAAYA,EAAI,CAAC,IAAMA,EAAIA,EAAI,OAAS,CAAC,EACpDyB,EAAS,GACTb,EAA0BZ,EAAI,CAAC,EAC/Ba,EAAmBD,GAA2BA,EAAwB,QAAQ,MAAO,GAAG,MACrF,CACH,IAAMc,EAAYC,GAAkB3B,EAAI,CAAC,CAAC,EAC1CY,EAA0Bc,GAAaA,EAAU,QAAQ,MAAO,IAAI,EACpEb,EAAmBD,GAA2BA,EAAwB,QAAQ,MAAO,GAAG,CAC5F,CACA,MAAO,CAAE,OAAAa,EAAQ,wBAAAb,EAAyB,iBAAAC,CAAiB,CAC/D,CAhBSN,EAAAiB,GAAA,uCAyBT,SAASI,GACL5B,EACAD,EACAG,EAC8E,CAC9E,IAAIW,EACAD,EACAa,EAAS,GACb,OAAIzB,EAAI,CAAC,IAAM,gBAAa,OAASA,EAAI,CAAC,IAAM,gBAAa,MACxD,CAAE,wBAAAY,EAAyB,iBAAAC,CAAiB,EAAIL,GAC7CR,EACAD,EACAG,CACJ,EACOF,EAAI,CAAC,IAAM,gBAAa,OAASD,EAAmB,eAAiB,gBAAa,qBACxF,CAAE,wBAAAa,EAAyB,iBAAAC,CAAiB,EAAII,GAC7CjB,EACAD,EACAa,EACAC,EACAX,CACJ,EACOF,EAAI,CAAC,IAAM,gBAAa,SAC9B,CAAE,OAAAyB,EAAQ,wBAAAb,EAAyB,iBAAAC,CAAiB,EAAIW,GACrDxB,EACAyB,EACAb,EACAC,CACJ,EACOb,EAAI,CAAC,IAAM,gBAAa,SAE3BD,EAAmB,OAASA,EAAmB,MAAM,QAAQ,mBAAgB,EAAI,GACjFc,EAAmBD,EAA0Bb,EAAmB,MAAM,MAAM,mBAAgB,EAAE,CAAC,EACxFC,EAAI,CAAC,EACZa,EAAmBD,EAA0BZ,EAAI,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,EACzDY,IACPC,EAAmBD,EAA0BA,EAAwB,QAAQ,MAAO,GAAG,GAEpFZ,EAAI,CAAC,IAAM,gBAAa,QAC9B,CAAE,iBAAAa,EAAkB,wBAAAD,CAAwB,EAAIM,GAC7CnB,EACAC,EACAa,EACAD,CACJ,GAEG,CAAE,wBAAAA,EAAyB,iBAAAC,EAAkB,OAAAY,CAAO,CAC/D,CA/CSlB,EAAAqB,GAAA,6BAsDT,SAASC,GAAwB7B,EAAmC,CAChE,IAAI8B,EAAU,EACd,QAASC,EAAQ/B,EAAI,OAAS,EAAG+B,EAAQ,GAAIA,IAAS,CAClD,IAAMC,EAAUhC,EAAI+B,CAAK,EACzB,GAAIC,IAAY,WAAaA,IAAY,gBAAa,SAAWA,IAAY,QAAS,CAClFF,EAAUC,EAAQ,EAClB,KACJ,CACJ,CACA,OAAOD,EAAU,EAAI9B,EAAI8B,CAAO,EAAE,QAAQ,OAAQ,IAAI,EAAI,MAC9D,CAVSvB,EAAAsB,GAAA,2BAyBT,SAASI,GAA0BC,EAAgC,CAC3DA,EAAO,eAAiB,OAAOA,EAAO,eAAkB,WACxDA,EAAO,cACHA,EAAO,gBACPA,EAAO,aACPA,EAAO,kBACPA,EAAO,YACPA,EAAO,WACX,EACQA,EAAO,gBAAgBA,EAAO,WAAW,IACjDA,EAAO,gBAAgBA,EAAO,WAAW,EAAI,CAAC,EAEtD,CAZS3B,EAAA0B,GAAA,6BAoBT,SAASE,GACLD,EACAE,EACAC,EACF,CA3TF,IAAA5B,EAAAC,EA8TY0B,EAAmB,OAAY,WAC/B3B,EAAA4B,GAAA,YAAAA,EAAiB,mBAAjB,YAAA5B,EAAsC,QAAS,YAC/CC,EAAA2B,GAAA,YAAAA,EAAiB,mBAAjB,MAAA3B,EAAsC,YAqBnC0B,EAAmB,OAAY,SAAWF,EAAO,gBAAgBA,EAAO,WAAW,IAAM,QAChGD,GAA0BC,CAAM,EAnB5BA,EAAO,gBAAkB,KACrBA,EAAO,eAAiB,OAAOA,EAAO,eAAkB,WACxDA,EAAO,cACHA,EAAO,gBACPA,EAAO,aACPA,EAAO,kBACPA,EAAO,YACPA,EAAO,WACX,EAEA,MAAM,QAAQA,EAAO,aAAaA,EAAO,iBAAiB,CAAC,GAC3D,CAACA,EAAO,aAAaA,EAAO,iBAAiB,EAAE,OAE/C,OAAOA,EAAO,gBAAgBA,EAAO,WAAW,EAEhDA,EAAO,gBAAgBA,EAAO,WAAW,EAAIA,EAAO,aAAaA,EAAO,iBAAiB,EAMzG,CAjCS3B,EAAA4B,GAAA,8BA6CT,SAASG,GACLtC,EACAF,EACAC,EACAwC,EACArC,EACAkC,EACAC,EACF,CAEE,IAAIN,EAAQ/B,EAAI,QAAQ,aAAa,EACrC,KAAO+B,EAAQ,IACX/B,EAAI,OAAO+B,EAAQ,EAAG,CAAC,EACvBA,EAAQ/B,EAAI,QAAQ,aAAa,EAErC,GAAM,CAAE,wBAAAY,EAAyB,iBAAAC,EAAkB,OAAAY,CAAO,EAAIG,GAC1D5B,EACAD,EACAG,CACJ,EAEMsC,EAAcX,GAAwB7B,CAAG,EACzCyC,EAAO3C,EAAS,SAAS,KAC3BC,EAAmB,cACnBA,EAAmB,cAAc,SACjCa,EACA4B,EACA3B,EACAX,CACJ,EACMwC,EAAkBC,GACpB5C,EAAmB,cAAc,SACjC0C,EACA5B,EACAY,EAAS,OAAYb,CACzB,EACA,GAAI8B,EAAiB,CACjB,IAAME,EAAc9C,EAAS,SAAS,KAAOyC,EAC7C,GAAIrC,EAAaqC,CAAiB,IAAM,OAAW,CAE/C,IAAMM,EAAuC,CACzC,cAAe/C,EAAS,SAAS,OACjC,gBAAA4C,EACA,aAAAxC,EACA,kBAAAqC,EACA,YAAAK,EACA,YAAAJ,CACJ,EACAL,GAA2BU,EAAcT,EAAoBC,CAAc,CAC/E,SAAWvC,EAAS,SAAS,OAAQ,CACjC,IAAMgD,EAAgBhD,EAAS,SAAS,OACpC,OAAOgD,GAAkB,YACzBA,EACIJ,EACAxC,EACAqC,EACAK,EACAJ,EACAzC,EAAmB,MACvB,CAER,MAAW2C,EAAgBE,CAAW,IAAM,QACxC,OAAOF,EAAgBE,CAAW,CAE1C,CACAG,GAAqBhD,EAAmB,cAAc,SAAU0C,EAAM5B,EAAkBD,CAAuB,CACnH,CAlESL,EAAA+B,GAAA,wBA+ET,SAASU,GACLjD,EACAE,EACAE,EACAD,EACAF,EACAoC,EACAC,EACI,CACJ,IAAMvC,EAAWmD,GAAmB/C,EAAcC,CAAG,EACjDL,IACIA,EAAS,KACTD,GAAiBC,EAAUC,EAAoBC,EAAKC,EAAaC,EAAcC,CAAG,EAC3EL,EAAS,UAChBwC,GACItC,EACAF,EACAC,EACAI,EACAD,EACAkC,EACAC,CACJ,EAGZ,CAzBS9B,EAAAyC,GAAA,sBAmCT,SAASE,GACLC,EACAd,EACAe,EACApD,EACAqD,EACF,CACE,IAAIC,EAAU,CAAC,EACXC,EAAU,GACVJ,EAAW,mBAAmB,MAAQd,EACtCiB,EAAQ,KAAKjB,EAAe,YAAY,EACjCc,EAAW,mBAAmB,MACrCG,EAAQ,KAAKF,CAAmB,EACzBD,EAAW,mBAAmB,OAAS,SAC9CG,EAAUF,EACVG,EAAU,IAEVD,EAAQ,KAAKF,CAAmB,EAEpCD,EAAW,MAAQ,EACnB,QAAWK,KAAeF,EAAS,CAC/B,IAAMG,EAAgB,CAAC,EACnBN,EAAW,YAAY,CAAC,IAAM,gBAAa,UAAYA,EAAW,MAAQ,UAAYI,GAEtFE,EAAc,KAAKD,EAAY,EAAK,EAExCL,EAAW,mBAAmB,MAAQd,EAAe,MAErDqB,GACIP,EAAW,mBACXK,EACA,CAAC,GAAGxD,EAAK,GAAGyD,CAAa,EACzBJ,EACA,CAAC,GAAGF,EAAW,YAAaA,EAAW,GAAG,EAC1Cd,EAAe,gBACnB,EACAc,EAAW,OACf,CACJ,CAtCS5C,EAAA2C,GAAA,qBAiDT,SAASS,GACL5D,EACAG,EACAC,EACuD,CACvD,IAAIyD,EAAoB,GACxB,GAAI,CAAC1D,EAAaC,CAAG,GAAK,OAAO,KAAKD,EAAaC,CAAG,CAAC,EAAE,SAAW,GAAK,CAACD,EAAa,MACnF,MAAO,CAAE,kBAAA0D,EAAmB,eAAgB,EAAK,EAErD,IAAMnB,EAAOoB,GAAuB9D,EAAmB,aAAa,EAAI,SAClE+D,EAAQnB,GAA2B5C,EAAmB,cAAc,SAAU0C,CAAI,EACxF,MAAI,CAACqB,EAAM,OAAY,OAAO,KAAKA,EAAM,KAAQ,EAAE,SAAW,GAC1DA,EAAM,MAAW,CACb,CACI,UAAW,CACP,CACI,eAAgB5D,EAAaC,CAAG,EAAE,cACtC,CACJ,CACJ,CACJ,EACAyD,EAAoB,IACZE,EAAM,MAAS,CAAC,EAAE,YAC1BA,EAAM,MAAS,CAAC,EAAE,UAAY,CAC1B,CACI,eAAgB5D,EAAaC,CAAG,EAAE,cACtC,CACJ,EACAyD,EAAoB,IAEjB,CAAE,kBAAAA,EAAmB,eAAgB,EAAM,CACtD,CA/BSrD,EAAAoD,GAAA,sBA0CT,SAASI,GACLhE,EACAG,EACAC,EACuD,CArjB3D,IAAAM,EAsjBI,IAAImD,EAAoB,GAExB,GAAI,CAAC1D,EAAaC,CAAG,GAAK,OAAO,KAAKD,EAAaC,CAAG,CAAC,EAAE,SAAW,EAChE,MAAO,CAAE,kBAAAyD,EAAmB,eAAgB,EAAK,EAErD,IAAMnB,EAAOoB,GAAuB9D,EAAmB,aAAa,EAAI,SAClE+D,EAAQnB,GAA2B5C,EAAmB,cAAc,SAAU0C,CAAI,EACxF,MAAI,CAACqB,EAAM,OAAY,OAAO,KAAKA,EAAM,KAAQ,EAAE,SAAW,GAC1DA,EAAM,MAAW,CACb,CACI,QAAS,CACL,CACI,eAAgB5D,EAAaC,CAAG,EAAE,cACtC,CACJ,CACJ,CACJ,EACAyD,EAAoB,IACZE,EAAM,MAAS,CAAC,EAAE,UAC1BA,EAAM,MAAS,CAAC,EAAE,QAAU,CACxB,CACI,eAAgB5D,EAAaC,CAAG,EAAE,cACtC,CACJ,EACAyD,EAAoB,IAEnBE,EAAM,MAAS,CAAC,EAAE,YACnBA,EAAM,MAAS,CAAC,EAAE,UAAY,CAC1B,CACI,iBAAgBrD,EAAAP,GAAA,YAAAA,EAAc,QAAd,YAAAO,EAAqB,iBAAkB,qBAAkB,QAC7E,CACJ,GAEG,CAAE,kBAAAmD,EAAmB,eAAgB,EAAM,CACtD,CAvCSrD,EAAAwD,GAAA,sBAgDT,SAASC,GACLjC,EACAhC,EACAI,EACAD,EACO,CACP,GAAI,CAACA,GAAgB,OAAO,KAAKA,CAAY,EAAE,SAAW,EACtD,MAAO,GAEX,IAAI0D,EAAoB,GAClBnB,EAAOoB,GAAuB9D,EAAmB,aAAa,EAAI,SAClE+D,EAAQnB,GAA2B5C,EAAmB,cAAc,SAAU0C,CAAI,EAClFwB,EAAW,CACb,IAAK/D,EAAa,IAClB,eAAgBA,EAAa,cACjC,EACA,GAAI,CAAC4D,EAAM,OAAY,OAAO,KAAKA,EAAM,KAAQ,EAAE,SAAW,EAE1DA,EAAM,MAAW,CAACG,CAAQ,EAC1BL,EAAoB,OACjB,CACH,IAAMM,EAAgBJ,EAAM,MAAS,UAAWK,GAASA,EAAK,MAAQjE,EAAa,KAAUiE,EAAK,MAAQhE,CAAG,EAC7G,GAAI+D,IAAkB,GAElBJ,EAAM,MAAS,KAAKG,CAAQ,EAC5BL,EAAoB,WACbM,IAAkBhE,EAAa,MAAO,CAE7C,IAAMkE,EAAe,KAAK,MAAM,KAAK,UAAUN,EAAM,MAASI,CAAa,CAAC,CAAC,EAC7EJ,EAAM,MAAS,OAAOI,EAAe,CAAC,EACtCJ,EAAM,MAAS,OAAO/B,EAAO,EAAGqC,CAAY,EAC5CR,EAAoB,EACxB,CACJ,CACA,OAAOA,CACX,CAnCSrD,EAAAyD,GAAA,qBA6CT,SAASK,GACLtC,EACAuC,EACAnE,EACAD,EACAH,EACAwE,EAAe,GACwC,CACvD,IAAIX,EAAoB,GAClBY,EAAiB,GACvB,GAAI,CAACD,EAAc,CACf,GAAID,IAAmB,kBAAe,cAAgBnE,IAAQ,gBAAa,OAASD,EAChF,OAAO6D,GAAmBhE,EAAoBG,EAAcC,CAAG,EAC5D,GAAImE,IAAmB,kBAAe,cAAgBnE,IAAQ,gBAAa,OAASD,EACvF,OAAOyD,GAAmB5D,EAAoBG,EAAcC,CAAG,EAE/DA,GACAmE,IACCA,EAAe,WAAW,kBAAe,WAAW,GACjDA,EAAe,WAAW,kBAAe,WAAW,KAExDV,EAAoBI,GAAkBjC,EAAOhC,EAAoBI,EAAKD,EAAaC,CAAG,CAAC,EAE/F,CACA,MAAO,CAAE,kBAAAyD,EAAmB,eAAAY,CAAe,CAC/C,CAzBSjE,EAAA8D,GAAA,oBA2CT,SAASI,GACLtB,EACAuB,EACAC,EACAJ,EAAe,GACX,CA9rBR,IAAA9D,EA+rBI,IAAM2C,EAAsBD,EAAW,aAAaA,EAAW,GAAG,EAC5DyB,EAAUC,GAAW1B,EAAW,aAAcA,EAAW,GAAG,EAC5Dd,EAAiByC,GACnB3B,EAAW,mBAAmB,UAC9BA,EAAW,mBAAmB,MAC9BC,EACAD,EAAW,mBACXA,EAAW,IACXA,EAAW,mBAAmB,QAC9BA,EAAW,mBAAmB,QAClC,EACM,CAAE,kBAAAS,EAAmB,eAAAY,CAAe,EAAIH,GAC1ClB,EAAW,OACX1C,EAAA0C,EAAW,mBAAmB,OAA9B,YAAA1C,EAAoC,MAAMY,GAAwB,GAClE8B,EAAW,IACXA,EAAW,aACXA,EAAW,mBACXoB,CACJ,EACMvE,EAAM4E,EAAU,CAAC,GAAGF,EAAWE,CAAO,EAAI,CAAC,GAAGF,EAAWvB,EAAW,GAAG,EAa7E,GAZKS,GACDZ,GACIG,EAAW,mBACXA,EAAW,YACXA,EAAW,IACXA,EAAW,aACXnD,EACAmD,EAAW,mBACXd,CACJ,EAIAc,EAAW,qBACT,OAAOC,GAAwB,UAAY,OAAO,KAAKA,CAAmB,EAAE,SAAW,GACpFD,EAAW,mBAAmB,MAAQd,EAAe,eAC1D,CAACmC,EACH,CACE,IAAMnB,EAAeuB,EAAU,CAAC,GAAGD,EAAeC,CAAO,EAAID,EAC7DzB,GAAkBC,EAAYd,EAAgBe,EAAqBpD,EAAKqD,CAAY,CACxF,CACJ,CA/CS9C,EAAAkE,GAAA,2BA0DT,SAASM,GACLC,EACAC,EACAC,EACAR,EACAC,EACO,CACP,IAAIJ,EAAe,GACnB,GAAIU,EAAkB,CAClB,IAAME,EAAgB,OAAO,QAAQH,EAAwB,YAAY,EACzE,GAAI,CAACG,GAAiBA,EAAc,OAAS,EACzC,OAAOZ,EAEXY,EAAc,KAAK,CAACC,EAAGC,IAAMD,EAAE,CAAC,EAAE,MAAWC,EAAE,CAAC,EAAE,KAAQ,EAE1DF,EAAc,QAASG,GAAgB,CAC/BJ,EAAiB,WAAWI,EAAY,CAAC,CAAC,GAC1CN,EAAwB,IAAMM,EAAY,CAAC,EAC3CN,EAAwB,mBAAqBE,EAAiB,WAAWI,EAAY,CAAC,CAAC,EAEvFb,GAAwBO,EAAyBN,EAAWC,CAAa,EACzEJ,EAAe,IACR,OAAOe,EAAY,CAAC,GAAM,UAEjCL,EAAiB,QAASM,GAAoB,CACtCA,EAAgB,OAChBP,EAAwB,IAAMM,EAAY,CAAC,EAC3CN,EAAwB,mBAAqBO,EAC7Cd,GAAwBO,EAAyBN,EAAWC,CAAa,EACzEJ,EAAe,GAEvB,CAAC,EAELS,EAAwB,OAC5B,CAAC,CACL,CACA,OAAOT,CACX,CArCShE,EAAAwE,GAAA,6CAiDT,SAASrB,GACL3D,EACAG,EACAwE,EACAC,EACA1E,EACAiF,EACI,CA3yBR,IAAAzE,EAAAC,EA4yBI,GAAI,EAACwE,GAAA,MAAAA,EAAkB,YACnB,OAEJ,IAAInD,EAAQ,EAENiD,EAAmD,CACrD,mBAAAjF,EACA,YAAAE,EACA,IAAK,OACL,MAAA8B,EACA,aAAA7B,EACA,mBAAoB,MACxB,EACM+E,GAAoBxE,EAAAyE,EAAiB,uBAAjB,YAAAzE,EAAsD,MAE1E8D,EAAeQ,GACjBC,EACAC,EACAC,EACAR,EACAC,CACJ,EAEIa,EAAaN,EAAiB,YAAc,OAAO,QAAQA,EAAiB,UAAU,EACtFM,KACI9E,EAAA8E,EAAW,CAAC,IAAZ,MAAA9E,EAAgB,GAAG,aAAU,iBAC7B8E,EAAa,OAAO,QAAQN,EAAiB,UAAU,EAAE,KACrD,CAACE,EAAGC,IAAMD,EAAE,CAAC,EAAE,aAAU,aAAa,EAAIC,EAAE,CAAC,EAAE,aAAU,aAAa,CAC1E,GAEJtD,EAAQ,EACRyD,EAAW,QAASxD,GAAoB,CACpCgD,EAAwB,IAAMhD,EAAQ,CAAC,EACvCgD,EAAwB,mBAAqBhD,EAAQ,CAAC,EACtDgD,EAAwB,MAAQjD,EAChC0C,GAAwBO,EAAyBN,EAAWC,EAAeJ,CAAY,EACnFvC,EAAQ,CAAC,EAAE,MACXD,GAER,CAAC,EAET,CAjDSxB,EAAAmD,GAAA,wCAuDT,SAAS+B,GACLC,EACAhE,EACAiE,EACI,CACJ,GAAIjE,IAAc,UAAY,MAAM,QAAQgE,EAAiB,SAAShE,CAAS,CAAC,EAAG,CAE/E,IAAMkE,EAAyDF,EAAiB,SAC3E,OACL,QAAS3D,EAAQ,EAAGA,EAAQ6D,EAAe,OAAQ7D,IAC/C6D,EAAe7D,CAAK,EAAI4D,EAAQ,eAC5B,cAAW,WACX,8BACAC,EAAe7D,CAAK,EACpB6D,EAAe7D,CAAK,EAAE,SAC1B,CAER,CACJ,CAlBSxB,EAAAkF,GAAA,8BAwBT,SAASI,GAAqBC,EAAiBH,EAA0C,CACrF,GAAIG,EAAQ,YAAgB,CACxB,IAAIC,EACJ,QAAWC,KAAgBF,EAAQ,YAC/BC,EAAaD,EAAQ,YAAeE,CAAY,EAChDP,GAA2BM,EAAYC,EAAcL,CAAO,EAC5DE,GAAqBE,EAAYJ,CAAO,CAEhD,CACJ,CATSpF,EAAAsF,GAAA,wBAgBT,SAASI,GACLP,EACAQ,EACAP,EACI,CACJ,IAAIG,EACJ,QAAWpE,KAAagE,EAAiB,SACrCI,EAAUI,EAAW,SAASxE,CAAS,EACvC+D,GAA2BC,EAAkBhE,EAAWiE,CAAO,EAC/DE,GAAqBC,EAASH,CAAO,CAE7C,CAXSpF,EAAA0F,GAAA,+BAoBT,IAAME,GAAmB5F,EAAA,CAAC6F,EAAgDC,IAA0C,CAv5BpH,IAAA5F,EAw5BI,IAAM6F,EAA+B1G,GACrC0G,EAAc,SAAW,KAAK,MAAM,KAAK,UAAUF,EAAiB,QAAQ,CAAC,EAE7E,IAAMT,EAAU,IAAIY,GACdL,EAAaP,EAAQ,mBAAmB,cAAW,WAAYS,EAAiB,KAAK,MAAM,EAC3FI,EAAwBC,GAAyBP,CAAU,EAC3DQ,EAAWN,EAAiB,KAAK,KACjCO,EAAS,GAAGP,EAAiB,KAAK,KAAKI,EAAsB,EAAE,KAAKE,CAAQ,MAE9EjG,EAAA2F,EAAiB,KAAK,SAAtB,MAAA3F,EAA+B,gBAAa,WAC5CwF,GAA4BG,EAAiB,KAAK,OAAQF,EAAYP,CAAO,EAEjF,IAAM5F,EAA8C,CAChD,cAAAuG,EACA,MAAOF,EAAiB,MACxB,YAAaA,EAAiB,YAC9B,OAAAO,EACA,UAAWP,EAAiB,WAC5B,OAAQF,EACR,WAAAG,EACA,QAAAV,EACA,cAAe,CAACe,CAAQ,EACxB,SAAU,cAAW,WACrB,MAAO,OACP,aAAc,gBAAa,sBAC/B,EAEA,OAAAhD,GACI3D,EACAmG,EACA,CAAC,EACD,CAAC,EACD,CAAC,EACDE,EAAiB,UACrB,EAEOE,CACX,EAtCyB,oBA+CnBM,GAAiBrG,EAAA,CACnB6F,EACAT,EACAkB,EACAC,EACAT,EACAU,IACgB,CA78BpB,IAAAtG,EAAAC,EA88BI,IAAM4F,EAA+B1G,GACrC0G,EAAc,SAAW,KAAK,MAAM,KAAK,UAAUF,EAAiB,QAAQ,CAAC,EAC7E,IAAMY,EAAYZ,EAAiB,WAE7B9B,GAAiB7D,EAAAoG,EAAO,QAAP,MAAApG,EAAe,gBAAa,gBAC7C,kBAAe,aACf,kBAAe,MACfwG,EAAmBJ,EAAO,MAAQlB,EAAQ,eAAemB,EAAUxC,EAAgBuC,EAAO,KAAK,EACjGK,EAAsB,kBAAe,UACrCF,EAAU,YAAY,kBAAe,QAAQ,IAE7CE,EADkBF,EAAU,YAAY,kBAAe,QAAQ,EAAiB,WAAW,QAAQ,KACpE,MAAM3F,CAAsB,EAAE,CAAC,GAElE,IAAM8F,EAAmBH,EAAU,YAAY,GAAG,kBAAe,OAAO,IAAIE,CAAmB,GAAG,EAClG,IAAIxG,EAAAuG,EAAgB,UAAhB,MAAAvG,EAAyB,SAAWyG,EACpC,QAAWC,KAAaD,EAAiB,WACrCF,EAAgB,QAAQ,QAAQG,CAAS,EAAIzB,EAAQ,eACjDmB,EACA,kBAAe,cACfG,EAAgB,QAAQ,QAAQG,CAAS,CAC7C,EAIR,IAAMZ,EAAwBC,GAAyBI,CAAM,EACvDH,EAAWN,EAAiB,KAAK,KACjCO,EAAS,GAAGP,EAAiB,KAAK,KAAKI,EAAsB,EAAE,KAAKE,CAAQ,KAC5E3G,EAA8C,CAChD,cAAAuG,EACA,MAAOF,EAAiB,MACxB,YAAaA,EAAiB,YAC9B,OAAAO,EACA,UAAAK,EACA,OAAAH,EACA,WAAAR,EACA,QAAAV,EACA,cAAe,CAACe,CAAQ,EACxB,SAAU,cAAW,WACrB,MAAO,OACP,OAAQN,EAAiB,OACzB,aAAAW,CACJ,EAEA,OAAArD,GACI3D,EACA8G,EACA,CAAC,EACD,CAAC,EACD,CAAC,EACDG,CACJ,EAEOV,CACX,EA7DuB,kBAqEjBe,GAAuB9G,EAAA,CACzB6F,EACAC,EACAU,IACgB,CAChB,IAAMpB,EAAU,IAAIY,GACde,EAAa3B,EAAQ,mBAAmB,cAAW,WAAYS,EAAiB,KAAK,MAAM,EAEjG,OAAOQ,GAAeR,EAAkBT,EAAS2B,EAAY,cAAW,WAAYjB,EAAYU,CAAY,CAChH,EAT6B,wBAmBvBQ,GAA2BhH,EAAA,CAC7B6F,EACAC,IAEOgB,GAAqBjB,EAAkBC,EAAY,gBAAa,oBAAoB,EAJ9D,4BAgB3BmB,GAAsBjH,EAAA,CAACkH,EAA4BC,EAAkBV,IAAyC,CA9iCpH,IAAAvG,EA+iCI,IAAM6F,EAA+B1G,GACrC0G,EAAc,SAAW,KAAK,MAAM,KAAK,UAAUoB,CAAQ,CAAC,EAE5D,IAAMC,EAAgB,OAAO,OAAO,IAAIC,GAAiBH,CAAW,EAGpEE,EAAc,SAAW,OAAO,OAAO,IAAIE,GAAeF,EAAc,QAAQ,EAChF,QAAWxH,KAAQ6G,EAAU,YAAY,YAA2B,WAAY,CAC5E,IAAMlH,EAAWmD,GAAmB0E,EAAc,SAAUxH,CAAG,EAC/D,GAAIL,GAAYA,EAAS,SAAU,CAC/B,IAAM2C,EAAO3C,EAAS,SAAS,KAAK,EAC9B4C,EAAkBC,GAA2B2D,EAAc,SAAU7D,CAAI,IAC3EhC,EAAAgH,EAAY,WAAZ,YAAAhH,EAAuBN,MAAS,OAChCuC,EAAgBvC,CAAG,EAAIsH,EAAY,SAAStH,CAAG,EAE/C,OAAOuC,EAAgBvC,CAAG,EAE9B4C,GAAqBuD,EAAc,SAAU7D,CAAI,CACrD,CACJ,CAEA,OAAA6D,EAAc,SAAS,mBAAgB,GAAG,EAAE,QAAUwB,GAClDL,EAAY,KACZA,EAAY,MACZnB,EAAc,QAClB,EAGAyB,GAAUzB,EAAc,SAAS,mBAAgB,GAAG,EAAkBmB,CAAW,EAE1EnB,CACX,EAhC4B,uBA4Cf0B,GAAezH,EAAA,CACxB0H,EACA5B,IAC4B,CAC5B,GAAI4B,EAAmB,cAAW,UAAU,EACxC,OAAOZ,GACHY,EAAmB,cAAW,UAAU,EACxC5B,EACA,gBAAa,sBACjB,EACG,GAAI4B,EAAmB,cAAW,UAAU,EAC/C,OAAO9B,GAAiB8B,EAAmB,cAAW,UAAU,EAAG5B,CAAU,EAC1E,GAAI4B,EAAmB,cAAW,WAAW,EAAG,CACnD,GAAM,CAAE,YAAAR,EAAa,SAAAC,EAAU,WAAAQ,CAAW,EAAID,EAAmB,cAAW,WAAW,EACvF,OAAOT,GAAoBC,EAAaC,EAAUQ,CAAU,CAChE,SAAWD,EAAmB,cAAW,kBAAkB,EACvD,OAAOV,GAAyBU,EAAmB,cAAW,kBAAkB,EAAG5B,CAAU,CAErG,EAlB4B,gBvH1iCrB,SAAS8B,GAAeC,EAAsD,CACjF,IAAIC,EACJ,GAAID,EAAmB,wBAAqB,EAAE,EAAG,CAI7C,IAAME,EAAWF,EAAmB,wBAAqB,EAAE,EAC3D,GAAIE,EAAS,cAAW,UAAU,EAAG,CACjC,GAAM,CAAE,cAAAC,EAAe,UAAAC,EAAW,YAAAC,EAAa,SAAAC,EAAU,UAAAC,EAAW,OAAAC,CAAO,EACvEN,EAAS,cAAW,UAAU,EAClCD,EAASQ,GAA8BN,EAAeC,EAAWC,EAAaC,EAAUC,EAAWC,CAAM,CAC7G,SAAWN,EAAS,cAAW,UAAU,EAAG,CACxC,GAAM,CAAE,cAAAC,EAAe,UAAAC,EAAW,YAAAC,EAAa,SAAAC,EAAU,UAAAC,EAAW,OAAAC,CAAO,EACvEN,EAAS,cAAW,UAAU,EAClCD,EAASS,GAA8BP,EAAeC,EAAWC,EAAaC,EAAUC,EAAWC,CAAM,CAC7G,SAAWN,EAAS,cAAW,YAAY,EAAG,CAC1C,GAAM,CAAE,cAAAC,EAAe,SAAAG,CAAS,EAAIJ,EAAS,cAAW,YAAY,EACpED,EAASU,GAAuBR,EAAeG,CAAQ,CAC3D,SAAWJ,EAAS,cAAW,kBAAkB,EAAG,CAChD,GAAM,CAAE,cAAAC,EAAe,UAAAC,EAAW,YAAAC,EAAa,SAAAC,EAAU,UAAAC,EAAW,OAAAC,CAAO,EACvEN,EAAS,cAAW,kBAAkB,EAC1CD,EAASW,GACLT,EACAC,EACAC,EACAC,EACAC,EACAC,CACJ,CACJ,CACJ,SAAWR,EAAmB,wBAAqB,EAAE,EAAG,CAIpD,IAAMa,EAAWb,EAAmB,wBAAqB,EAAE,EAC3D,GAAIa,EAAS,cAAW,UAAU,EAAG,CACjC,GAAM,CAAE,cAAAV,EAAe,UAAAC,EAAW,YAAAC,EAAa,OAAAG,EAAQ,SAAAF,CAAS,EAAIO,EAAS,cAAW,UAAU,EAClGZ,EAASa,GACL,gBAAa,uBACbX,EACAC,EACAC,EACAG,EACAF,CACJ,CACJ,SAAWO,EAAS,cAAW,UAAU,EAAG,CACxC,GAAM,CAAE,cAAAV,EAAe,UAAAC,EAAW,YAAAC,EAAa,SAAAC,EAAU,OAAAE,EAAQ,UAAAD,CAAU,EACvEM,EAAS,cAAW,UAAU,EAClCZ,EAASc,GAA8BZ,EAAeC,EAAWC,EAAaC,EAAUE,EAAQD,CAAS,CAC7G,SAAWM,EAAS,cAAW,kBAAkB,EAAG,CAChD,GAAM,CAAE,cAAAV,EAAe,UAAAC,EAAW,YAAAC,EAAa,OAAAG,EAAQ,SAAAF,CAAS,EAAIO,EAAS,cAAW,kBAAkB,EAE1GZ,EAASa,GACL,gBAAa,qBACbX,EACAC,EACAC,EACAG,EACAF,CACJ,CACJ,SAAWO,EAAS,cAAW,aAAa,EAAG,CAC3C,GAAM,CAAE,cAAAV,EAAe,UAAAC,EAAW,YAAAC,EAAa,OAAAG,EAAQ,SAAAF,CAAS,EAAIO,EAAS,cAAW,aAAa,EACrGZ,EAASe,GACL,gBAAa,gBACbb,EACAE,EACAC,EACAF,EACAI,CACJ,CACJ,CACJ,CACA,OAAOP,CACX,CAzEgBgB,EAAAlB,GAAA,kBA+ET,SAASmB,GAAaC,EAAyD,CAClF,IAAIC,EACEC,EAAwB,CAAE,WAAYF,EAAiB,WAAY,MAAOA,EAAiB,KAAM,EACvG,GAAIA,EAAiB,wBAAqB,EAAE,EAAG,CAI3C,IAAMjB,EAAWiB,EAAiB,wBAAqB,EAAE,EACzDC,EAAgBE,GAAapB,EAAUmB,CAAS,CACpD,SAAWF,EAAiB,wBAAqB,EAAE,EAAG,CAIlD,IAAMN,EAAWM,EAAiB,wBAAqB,EAAE,EACzDC,EAAgBG,GAAaV,EAAUQ,CAAS,CACpD,CACA,OAAOD,CACX,CAjBgBH,EAAAC,GAAA,gBAuBT,SAASM,GAAaC,EAA8D,CACvF,IAAIC,EACJ,GAAID,EAAiB,wBAAqB,EAAE,EAAG,CAI3C,IAAMvB,EAAWuB,EAAiB,wBAAqB,EAAE,EACrDvB,EAAS,cAAW,UAAU,EAC9BwB,EAASC,GAAyBzB,EAAS,cAAW,UAAU,CAAC,EAC1DA,EAAS,cAAW,UAAU,EACrCwB,EAASE,GAAyB1B,EAAS,cAAW,UAAU,CAAC,EAC1DA,EAAS,cAAW,YAAY,EACvCwB,EAASG,GAA2B3B,EAAS,cAAW,YAAY,CAAC,EAC9DA,EAAS,cAAW,kBAAkB,IAC7CwB,EAASI,GAAiC5B,EAAS,cAAW,kBAAkB,CAAC,EAEzF,SAAWuB,EAAiB,wBAAqB,EAAE,EAAG,CAIlD,IAAMZ,EAAWY,EAAiB,wBAAqB,EAAE,EACrDZ,EAAS,cAAW,UAAU,EAC9Ba,EAASC,GAAyBd,EAAS,cAAW,UAAU,EAAG,cAAW,UAAU,EACjFA,EAAS,cAAW,UAAU,EACrCa,EAASK,GAAyBlB,EAAS,cAAW,UAAU,CAAC,EAC1DA,EAAS,cAAW,kBAAkB,IAC7Ca,EAASC,GAAyBd,EAAS,cAAW,kBAAkB,EAAG,cAAW,kBAAkB,EAEhH,CACA,OAAOa,CACX,CA9BgBT,EAAAO,GAAA,gBAqChB,eAAsBQ,GAAcP,EAA4D,CAC5F,OAAOQ,GAA6BR,CAAgB,CACxD,CAFsBR,EAAAe,GAAA,iBAStB,eAAsBE,GAAoBT,EAA4D,CAClG,OAAOS,GAAwBT,CAAgB,CACnD,CAFsBR,EAAAiB,GAAA,uBAQf,SAASC,IAA4B,CACxC,MAAO,CACH,QAAS,IACb,CACJ,CAJgBlB,EAAAkB,GAAA,iBwH5MhB,IAAAC,GAA+B,gBAC/BC,GAA8D,cAY9D,IAAMC,GAAWC,EAAA,MAAOC,GACb,IAAI,QAAQ,CAACC,EAASC,IAAiB,IAC1C,GAAAC,UAAWH,EAAM,CAAE,SAAU,MAAO,EAAG,CAACI,EAAKC,IAAe,CACpDD,EACAF,EAAOE,CAAG,EAEVH,EAAQI,CAAI,CAEpB,CAAC,CACL,CAAC,EATY,YAYXC,GAAWP,EAAA,MAAUC,GAChB,KAAK,MAAM,MAAMF,GAASE,CAAI,CAAC,EADzB,YAIJO,GAAgBR,EAAA,MAAOC,GACzB,IAAI,QAAQ,CAACC,EAASC,IAAiB,IAC1C,YAAQF,EAAM,CAAE,SAAU,MAAO,EAAG,CAACI,EAAKC,IAAe,CACjDD,EACAF,EAAOE,CAAG,EAEVH,EAAQI,CAAI,CAEpB,CAAC,CACL,CAAC,EATwB,iBAYhBG,GAAcT,EAAA,MAAOC,GACvB,IAAI,QAASC,GAAkB,IAClC,SAAKD,EAAM,CAACI,EAAKK,IAAgB,CAEzBR,EADAG,EACQ,GAEAK,EAAM,YAAY,CAFb,CAIrB,CAAC,CACL,CAAC,EATsB,eAYrBC,GAAiBX,EAAA,MAAOC,GACnB,IAAI,QAASC,GAAY,IAC5B,WAAOD,EAAOW,GAAc,CACxBV,EAAQU,CAAS,CACrB,CAAC,CACL,CAAC,EALkB,kBAQjBC,GAAcb,EAAA,MAAOC,GAChBM,MAAmB,SAAKN,EAAM,eAAe,CAAC,EADrC,eAIPa,GAAad,EAAA,MAAOe,GAAsC,CACnE,IAAMC,EAAoB,CAAC,EACrBC,KAAmB,SAAKF,EAAQ,SAAS,EAC/C,GAAI,CAAE,MAAMJ,GAAeM,CAAgB,EACvC,OAAOD,EAEX,IAAME,EAAa,CACf,UACA,WACA,gBACA,uBACA,iCACJ,EACMC,EAAQ,MAAMX,GAAcS,CAAgB,EAClD,QAAWG,KAAQD,EACXD,EAAW,KAAMG,GAAQD,EAAK,SAASC,CAAG,CAAC,GAC3CL,EAAQ,KAAK,MAAMjB,MAAS,SAAKkB,EAAkBG,CAAI,CAAC,CAAC,EAGjE,OAAOJ,CACX,EApB0B,cAsBpBM,GAAetB,EAAA,MAAOuB,GAA4C,CACpE,IAAMC,EAAwB,CAAC,EAEzBC,KAAgB,SAAKF,EAAY,MAAO,WAAW,EACzD,GAAI,CAAE,MAAMZ,GAAec,CAAa,EACpC,OAAOD,EAEX,IAAML,EAAQ,MAAMX,GAAciB,CAAa,EAC/C,QAAWL,KAAQD,EAAO,CACtB,IAAMO,KAAW,SAAKD,EAAeL,CAAI,EACnCd,EAAO,MAAMP,GAAS2B,CAAQ,EACpCF,EAAU,KAAK,CACX,cAAeE,EACf,YAAapB,CACjB,CAAC,CACL,CACA,OAAOkB,CACX,EAjBqB,gBAmBfG,GAAiB3B,EAAA,MAAO4B,EAAoBL,IAA4C,CA1G9F,IAAAM,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EA2GI,IAAMC,EAA6B,CAAC,EAC9BC,GAAqBT,EAAAD,GAAA,YAAAA,EAAW,aAAX,YAAAC,EAAuB,YAClD,IAAIE,GAAAD,EAAAQ,GAAA,YAAAA,EAAoB,cAApB,YAAAR,EAAiC,WAAjC,MAAAC,EAA2C,SAAU,CACrD,IAAMQ,KAAe,SAAKhB,EAAYe,EAAmB,YAAY,SAAS,QAAQ,EACtFD,EAAe,KAAK,CAChB,cAAeE,EACf,YAAa,MAAMxC,GAASwC,CAAY,CAC5C,CAAC,CACL,CACA,IAAIN,GAAAD,EAAAM,GAAA,YAAAA,EAAoB,cAApB,YAAAN,EAAiC,WAAjC,MAAAC,EAA2C,aAC3C,QAAWO,KAAiBF,EAAmB,YAAY,SAAS,YAChE,IAAIH,GAAAD,EAAAI,EAAmBE,CAAa,IAAhC,YAAAN,EAAmC,WAAnC,MAAAC,EAA6C,SAAU,CACvD,IAAMM,KAAqB,SAAKlB,EAAYe,EAAmBE,CAAa,EAAE,SAAS,QAAQ,EAC/FH,EAAe,KAAK,CAChB,cAAeI,EACf,YAAa,MAAM1C,GAAS0C,CAAkB,CAClD,CAAC,CACL,EAIR,GAAIJ,EAAe,SAAW,EAC1B,QAAWK,KAAOJ,EAAoB,CAClC,IAAMK,EAAaL,EAAmBI,CAAG,EACzC,IAAIC,GAAA,YAAAA,EAAY,QAAS,qBAAqBP,EAAAO,GAAA,YAAAA,EAAY,WAAZ,MAAAP,EAAsB,UAAU,CAC1E,IAAMK,KAAqB,SAAKlB,EAAYoB,EAAW,SAAS,QAAQ,EACxEN,EAAe,KAAK,CAChB,cAAeI,EACf,YAAa,MAAM1C,GAAS0C,CAAkB,CAClD,CAAC,CACL,CACJ,CAGJ,OAAOJ,CACX,EApCuB,kBA0CVO,GAAa5C,EAAA,MAAO6C,GAAmC,CAChE,IAAMC,KAAO,aAASD,CAAI,EACpBE,KAAa,SAAKF,EAAM,QAAQ,EAChCjB,EAAW,MAAMf,GAAYkC,CAAU,EACvCC,EAAc,MAAMrB,GAAeC,EAAUmB,CAAU,EACvD/B,EAAU,MAAMF,GAAWiC,CAAU,EACrCvB,EAAY,MAAMF,GAAayB,CAAU,EAC/C,MAAO,CACH,KAAAF,EACA,KAAAC,EACA,SAAAlB,EACA,YAAAoB,EACA,QAAAhC,EACA,UAAAQ,CACJ,CACJ,EAf0B,czH/I1ByB,GAAAC,GAAc,SALd",
  "names": ["src_exports", "__export", "ALPViewType", "ActionTitlePrefix", "ActionType", "ArtifactType", "BindingPropertyRegexAsString", "ControlType", "DATESETTINGSPATH", "DataSourceType", "DefinitionName", "DirName", "DraftDiscardEnabledSettings", "ExportArtifacts", "FIORI_FCL_ROOT_ID", "FIORI_FCL_ROOT_VIEW_NAME", "FRAGMENTNAMEPART", "FacetBase", "FacetTitlePrefix", "Features", "FileName", "FioriElementsVersion", "FlexChangeLayer", "FlexibleColumnLayoutAggregations", "FlexibleColumnLayoutType", "GENERICAPPSETTINGS", "LogSeverity", "LogSeverityLabel", "MANIFESTPATH", "METADATAPATH", "ManifestSection", "OdataVersion", "PAGETYPE_VIEW_EXTENSION_TEMPLATE_MAP", "PageType", "PageTypeV2", "PageTypeV4", "PropertyName", "QUICKVARPATH", "QUICKVARPATHX", "SAPUI5_FRAGMENT_CLASS", "SAPUI5_VIEW_CLASS", "SchemaKeyName", "SchemaTag", "SchemaType", "SectionType", "StatePreservationMode", "TableColumnVerticalAlignment", "TemplateType", "UIVOCABULARY", "UIVOCABULARYALPHADOT", "UIVOCABULARYDOT", "VOCWITHCOLONS", "VOCWITHSLASH", "ViewTemplateType", "ViewTypes", "Visualization", "v2_exports", "v4_exports", "module", "__toCommonJS", "AvatarShape", "ButtonType", "CardSettingsType", "CardTemplateType", "ChartCardType", "ChartType", "ContainerLayoutType", "CreateMode", "DateRangeType", "DefaultContentView", "DefaultFilterMode", "ExtensionFragmentTypes", "FE_TEMPLATE_V2", "FE_TEMPLATE_V2_ALP", "FE_TEMPLATE_V2_LIST_REPORT", "FE_TEMPLATE_V2_OBJECT_PAGE", "FilterPathType", "HAlign", "LinkListFlavorType", "ListFlavorType", "ListTypeType", "LoadDataOnAppLaunchSettings", "MeasureAggregateValues", "PopinLayout", "SAPUI5_CONTROLLER_EXTENSION", "SAPUI5_VIEW_EXTENSION", "SAPUI5_VIEW_EXTENSION_ANALYTICAL_LIST_PAGE", "SAPUI5_VIEW_EXTENSION_LIST_REPORT", "SAPUI5_VIEW_EXTENSION_OBJECT_PAGE", "SectionPosition", "SortOrderType", "Strategy", "TableColumnExtensionTypeV2", "TableTypeV2", "cardTemplateTypeMap", "customColumnViewTypes", "Availability", "CustomSectionViewTypesV4", "DefaultPathType", "DesigntimeValues", "FE_TEMPLATE_V4", "FE_TEMPLATE_V4_ALP", "FE_TEMPLATE_V4_CUSTOM_PAGE", "FE_TEMPLATE_V4_LIST_REPORT", "FE_TEMPLATE_V4_OBJECT_PAGE", "FIORI_FCL_ROUTER_CLASS", "HorizontalAlign", "InitialLoadType", "Placement", "SAPUI5_DEPENDENCY_LIB_SAP_F", "SAPUI5_FRAGMENT_TYPE_V4", "SectionLayoutType", "SectionPositionV4", "SelectType", "SelectionMode", "TableCreationModeType", "TableTypeV4", "VariantManagementTypeListReport", "VariantManagementTypeObjectPage", "LogSeverity", "exports", "TemplateType", "Features", "v2_exports", "__export", "AvatarShape", "ButtonType", "CardSettingsType", "CardTemplateType", "ChartCardType", "ChartType", "ContainerLayoutType", "CreateMode", "DateRangeType", "DefaultContentView", "DefaultFilterMode", "ExtensionFragmentTypes", "FE_TEMPLATE_V2", "FE_TEMPLATE_V2_ALP", "FE_TEMPLATE_V2_LIST_REPORT", "FE_TEMPLATE_V2_OBJECT_PAGE", "FilterPathType", "HAlign", "LinkListFlavorType", "ListFlavorType", "ListTypeType", "LoadDataOnAppLaunchSettings", "MeasureAggregateValues", "PopinLayout", "SAPUI5_CONTROLLER_EXTENSION", "SAPUI5_VIEW_EXTENSION", "SAPUI5_VIEW_EXTENSION_ANALYTICAL_LIST_PAGE", "SAPUI5_VIEW_EXTENSION_LIST_REPORT", "SAPUI5_VIEW_EXTENSION_OBJECT_PAGE", "SectionPosition", "SortOrderType", "Strategy", "TableColumnExtensionTypeV2", "TableTypeV2", "cardTemplateTypeMap", "customColumnViewTypes", "module", "__toCommonJS", "v4_exports", "__export", "Availability", "CustomSectionViewTypesV4", "DefaultPathType", "DesigntimeValues", "FE_TEMPLATE_V4", "FE_TEMPLATE_V4_ALP", "FE_TEMPLATE_V4_CUSTOM_PAGE", "FE_TEMPLATE_V4_LIST_REPORT", "FE_TEMPLATE_V4_OBJECT_PAGE", "FIORI_FCL_ROUTER_CLASS", "HorizontalAlign", "InitialLoadType", "Placement", "SAPUI5_DEPENDENCY_LIB_SAP_F", "SAPUI5_FRAGMENT_TYPE_V4", "SectionLayoutType", "SectionPosition", "SectionPositionV4", "SelectType", "SelectionMode", "TableCreationModeType", "TableTypeV4", "VariantManagementTypeListReport", "VariantManagementTypeObjectPage", "module", "__toCommonJS", "__exportStar", "exports", "__importStar", "require_cjs", "__commonJSMin", "exports", "module", "isMergeableObject", "__name", "value", "isNonNullObject", "isSpecial", "stringValue", "isReactElement", "canUseSymbol", "REACT_ELEMENT_TYPE", "emptyTarget", "val", "cloneUnlessOtherwiseSpecified", "options", "deepmerge", "defaultArrayMerge", "target", "source", "element", "getMergeFunction", "key", "customMerge", "getEnumerableOwnPropertySymbols", "symbol", "getKeys", "propertyIsOnObject", "object", "property", "propertyIsUnsafe", "mergeObject", "destination", "sourceIsArray", "targetIsArray", "sourceAndTargetTypesMatch", "array", "prev", "next", "deepmerge_1", "EnumIsFlag_1", "exports", "TermToTypes_1", "VocabularyReferences_1", "splitAt", "string", "index", "__name", "substringAt", "splitAtFirst", "separator", "splitAtLast", "substringBeforeFirst", "substringBeforeLast", "alias", "references", "unaliasedValue", "map", "ref", "namespace", "value", "reference", "preAlias", "postAlias", "unalias", "aliasedValue", "_unalias", "maybeAlias", "rest", "isAnnotation", "valueToUnalias", "knownReference", "_a", "segments", "segment", "first", "subSegment", "parameter", "isComplexTypeDefinition", "complexTypeDefinition", "Decimal", "lazy", "object", "property", "init", "initial", "_value", "createIndexedFind", "array", "element", "propertyValue", "addGetByValue", "indexName", "mergeAnnotations", "annotationSources", "result", "name", "annotationList", "target", "annotations", "annotationTarget", "annotationsOnTarget", "rawAnnotation", "annotation", "existingAnnotation", "VocabularyReferences_1", "utils_1", "ANNOTATION_TARGET", "appendObjectPath", "objectPath", "visitedObject", "__name", "resolveTarget", "converter", "startElement", "path", "annotationsTerm", "pathSegments", "targetPath", "segment", "pathPart", "annotationPart", "_a", "_c", "_b", "parentElementFQN", "_d", "result", "current", "error", "message", "vocabularyAlias", "term", "annotation", "subPath", "subTarget", "visitedSubObject", "thisElement", "nextElement", "navigationPropertyBindings", "property", "navigationProperty", "actionName", "action", "_e", "param", "type", "referencedType", "annotationType", "inferTypeFromTerm", "isAnnotationPath", "pathStr", "mapPropertyPath", "propertyPath", "fullyQualifiedName", "currentTarget", "currentTerm", "mapAnnotationPath", "annotationPath", "mapNavigationPropertyPath", "navigationPropertyPath", "mapPath", "parseValue", "currentProperty", "currentSource", "propertyValue", "valueFQN", "splitEnum", "enumValue", "unaliased", "parseRecord", "parseCollection", "annotationTarget", "targetType", "isDataFieldWithForAction", "annotationContent", "parseRecordType", "recordDefinition", "annotationRecord", "currentFQN", "record", "resolveAnnotationsOnAnnotation", "actionTarget", "getOrInferCollectionType", "collectionDefinition", "firstColItem", "parentFQN", "index", "pathValue", "recordIdx", "ifValue", "stringValue", "isV4NavigationProperty", "navProp", "convertAnnotation", "target", "rawAnnotation", "vocAlias", "vocTerm", "_Converter", "annotationSources", "source", "convertEntityContainer", "actionImport", "rawValue", "map", "converted", "convertedElements", "rawElement", "convertedElement", "rawMetadata", "convertedOutput", "aliased", "value", "references", "Converter", "resolveEntityType", "entityType", "resolveNavigationPropertyBindings", "rawNavigationPropertyBindings", "bindingPath", "rawBindingTarget", "resolveAnnotations", "rawAnnotationTarget", "nestedAnnotations", "createAnnotationsObject", "annotationTerm", "annotations", "rawAnnotations", "vocabularyAliases", "vocTermWithQualifier", "rawEntityContainer", "convertedEntityContainer", "convertEntitySet", "convertSingleton", "convertActionImport", "rawSingleton", "convertedSingleton", "_rawNavigationPropertyBindings", "rawEntitySet", "convertedEntitySet", "convertEntityType", "rawEntityType", "convertedEntityType", "keyProp", "convertProperty", "convertNavigationProperty", "rawAction", "actions", "name", "relativePath", "includeVisitedObjects", "resolved", "rawProperty", "convertedProperty", "typeName", "rawNavigationProperty", "convertedNavigationProperty", "associationEnd", "association", "end", "rawActionImport", "convertedActionImport", "rawActions", "convertAction", "convertedAction", "convertActionParameter", "unspecificOverloadTarget", "specificOverloadTarget", "effectiveAnnotations", "unspecificAnnotations", "unspecificAnnotation", "rawActionParameter", "convertedActionParameter", "convertComplexType", "rawComplexType", "convertedComplexType", "convertTypeDefinition", "rawTypeDefinition", "convertedTypeDefinition", "convert", "targetResolution", "exports", "utils_1", "revertObjectToRawType", "references", "value", "result", "anno", "revertCollectionItemToRawType", "_a", "_b", "valueMatches", "ref", "_c", "_d", "_e", "_f", "__name", "revertValueToRawType", "restrictedKeys", "revertAnnotationsToRawType", "currentAnnotations", "targetAnnotations", "key", "term", "parsedAnnotation", "revertTermToGenericType", "unaliasedTerm", "qualifiedSplit", "collectionItem", "outItem", "collectionKey", "annotation", "baseAnnotation", "exports", "__exportStar", "exports", "ensureArray", "sourceObject", "__name", "exports", "_RawMetadataInstance", "fileIdentification", "version", "schema", "references", "RawMetadataInstance", "_MergedRawMetadata", "initialParserOutput", "parserOutput", "MergedRawMetadata", "utils_1", "merge", "parserOutputs", "outParserOutput", "parserOutput", "__name", "exports", "require_sax", "__commonJSMin", "exports", "sax", "strict", "opt", "SAXParser", "SAXStream", "createStream", "buffers", "parser", "clearBuffers", "S", "rootNS", "emit", "__name", "o", "F", "newf", "a", "i", "checkBufferLength", "maxAllowed", "maxActual", "l", "len", "closeText", "emitNode", "error", "m", "flushBuffers", "end", "write", "Stream", "streamWraps", "ev", "me", "er", "h", "data", "SD", "chunk", "handler", "args", "CDATA", "DOCTYPE", "XML_NAMESPACE", "XMLNS_NAMESPACE", "nameStart", "nameBody", "entityStart", "entityBody", "isWhitespace", "c", "isQuote", "isAttribEnd", "isMatch", "regex", "notMatch", "key", "e", "s", "event", "nodeType", "textopts", "text", "strictFail", "message", "newTag", "parent", "tag", "qname", "name", "attribute", "qualName", "prefix", "local", "attrib", "qn", "openTag", "selfClosing", "p", "nv", "value", "uri", "closeTag", "t", "tagName", "closeTo", "close", "x", "n", "parseEntity", "entity", "entityLC", "num", "numStr", "beginWhiteSpace", "charAt", "result", "starti", "pad", "returnState", "buffer", "parsedEntity", "stringFromCharCode", "floor", "fromCodePoint", "MAX_SIZE", "codeUnits", "highSurrogate", "lowSurrogate", "index", "length", "codePoint", "require_array_helper", "__commonJSMin", "exports", "module", "value", "require_options_helper", "__commonJSMin", "exports", "module", "isArray", "options", "key", "copy", "item", "require_xml2js", "__commonJSMin", "exports", "module", "sax", "expat", "helper", "isArray", "options", "pureJsParser", "currentElement", "validateOptions", "userOptions", "__name", "nativeType", "value", "nValue", "bValue", "addField", "type", "key", "temp", "element", "manipulateAttributes", "attributes", "onInstruction", "instruction", "attrsRegExp", "match", "onStartElement", "name", "onText", "text", "onComment", "comment", "onEndElement", "parentElement", "onCdata", "cdata", "onDoctype", "doctype", "onError", "error", "xml", "parser", "result", "require_xml2json", "__commonJSMin", "exports", "module", "helper", "xml2js", "validateOptions", "userOptions", "options", "__name", "xml", "js", "json", "parentKey", "k", "v", "require_js2xml", "__commonJSMin", "exports", "module", "helper", "isArray", "currentElement", "currentElementName", "validateOptions", "userOptions", "options", "__name", "writeIndentation", "depth", "firstLine", "writeAttributes", "attributes", "key", "attr", "attrName", "quote", "result", "writeDeclaration", "declaration", "writeInstruction", "instruction", "instructionName", "instructionValue", "writeComment", "comment", "writeCdata", "cdata", "writeDoctype", "doctype", "writeText", "text", "hasContent", "element", "i", "writeElement", "xml", "elementName", "withClosingTag", "writeElements", "elements", "indent", "hasContentCompact", "anyContent", "writeElementCompact", "name", "writeElementsCompact", "nodes", "js", "require_json2xml", "__commonJSMin", "exports", "module", "js2xml", "json", "options", "js", "require_lib", "__commonJSMin", "exports", "module", "xml2js", "xml2json", "js2xml", "json2xml", "convertV2Annotations", "attributes", "objectType", "objectName", "annotations", "convertEntitySetAnnotations", "convertEntityTypeAnnotations", "convertNavigationPropertyAnnotations", "convertPropertyAnnotations", "convertGenericAnnotations", "__name", "exports", "pushToAnnotations", "condition", "value", "pv", "xml_js_1", "utils_1", "v2annotationsSupport_1", "collectionRegexp", "isV4NavProperty", "navPropertyAttributes", "__name", "getEntityTypeKeys", "propertyRefs", "propertyRef", "parseProperties", "entityProperties", "entityKeys", "entityTypeFQN", "annotationLists", "outObject", "entityProperty", "edmProperty", "unaliasType", "v2Annotations", "createAnnotationList", "parseReferentialConstraint", "referentialConstraints", "sourceTypeName", "targetTypeName", "outArray", "refCon", "parseV2ReferentialConstraint", "associationEnds", "sourceEnd", "assEnd", "targetEnd", "sourceProperties", "targetProperties", "sourceProperty", "propertyIndex", "parseNavigationProperties", "navigationProperties", "currentEntityType", "navigationProperty", "attributes", "matches", "isCollection", "typeName", "unalias", "Relationship", "ToRole", "FromRole", "parseAssociationSets", "associations", "namespace", "entityContainer", "association", "associationFQN", "associationEnd", "endValue", "parseAssociations", "parseEntityTypes", "entityTypes", "entityType", "entityKeyNames", "outEntityType", "parseComplexTypes", "complexTypes", "complexType", "complexTypeFQN", "parseTypeDefinitions", "typeDefinitions", "typeDefinition", "typeDefinitionFQN", "parseEntitySets", "entitySets", "entityContainerName", "entitySet", "navigationPropertyBinding", "navPropertyBinding", "outEntitySet", "parseSingletons", "singletons", "singleton", "outSingleton", "parseActions", "actions", "isFunction", "action", "parameters", "isBound", "overload", "parameter", "fullyQualifiedName", "param", "type", "edmActionParameter", "parseV2FunctionImport", "targetEntitySet", "et", "actionFQN", "parseActionImports", "imports", "actionOrFunctionImport", "_a", "parsePropertyValues", "propertyValues", "currentTarget", "annotationsLists", "propertyValue", "Annotation", "_attributes", "properties", "outPropertyValue", "attributeKey", "keyName", "currentPropertyTarget", "parseExpression", "parseInlineExpression", "propertyAnnotations", "parseAnnotations", "parseRecord", "record", "recordAnnotations", "outRecord", "isExpressionOfType", "annotation", "propertyNameToCheck", "parseModelPath", "propertyPath", "modelPathType", "parseCollection", "collection", "recordArray", "recordIndex", "propertyPathArray", "navPropertyPathArray", "navPropertyPath", "stringArray", "stringValue", "annotationPathArray", "annotationPath", "pathArray", "pathDefinition", "expression", "expressionKeys", "expressionKey", "parseAnnotation", "Term", "Qualifier", "others", "outAnnotation", "currentAnnotationTarget", "annotationAnnotations", "keys", "keyValue", "annotations", "target", "parseAnnotationLists", "annotationList", "parseSchema", "edmSchema", "edmVersion", "identification", "associationSets", "actionImports", "annotationMap", "parseReferences", "references", "referencesArray", "reference", "include", "aliases", "_type", "unaliasedType", "aliasedValue", "separators", "unaliased", "start", "end", "maybeAlias", "char", "alias", "mergeSchemas", "schemas", "associationsToReduce", "schema", "associationSetsToReduce", "entitySetsToReduce", "singletonsToReduce", "entityTypesToReduce", "actionsToReduce", "actionImportsToReduce", "complexTypesToReduces", "typeDefinitionsToReduce", "rawEntityType", "navProp", "v2NavProp", "associationSet", "assoc", "refConstraint", "createAliasMap", "map", "parse", "xml", "fileIdentification", "jsonObj", "version", "parsedSchemas", "exports", "merger_1", "exports", "parser_1", "require_changeUtils", "__commonJSMin", "exports", "module", "iIdCounter", "CHANGE_UTILS_PREFIX", "uid", "__name", "appendComponentToReference", "sComponentName", "getFlexReference", "manifest", "oSapUi5Entry", "sapApp", "getAppVersion", "getProjectId", "reference", "createString", "propertyBag", "changeString", "change", "require_flexibility_utils", "__commonJSMin", "exports", "module", "require_utils", "__commonJSMin", "exports", "regExpChars", "hasOwnProperty", "hasOwn", "__name", "obj", "key", "string", "_ENCODE_HTML_RULES", "_MATCH_HTML", "encode_char", "c", "escapeFuncStr", "markup", "escapeXMLToString", "to", "from", "p", "list", "i", "val", "str", "match", "require_package", "__commonJSMin", "exports", "module", "require_ejs", "__commonJSMin", "exports", "fs", "path", "utils", "scopeOptionWarned", "_VERSION_STRING", "_DEFAULT_OPEN_DELIMITER", "_DEFAULT_CLOSE_DELIMITER", "_DEFAULT_DELIMITER", "_DEFAULT_LOCALS_NAME", "_NAME", "_REGEX_STRING", "_OPTS_PASSABLE_WITH_DATA", "_OPTS_PASSABLE_WITH_DATA_EXPRESS", "_BOM", "_JS_IDENTIFIER", "name", "filename", "isDir", "dirname", "extname", "resolve", "includePath", "ext", "resolvePaths", "paths", "filePath", "v", "__name", "getIncludePath", "options", "views", "match", "handleCache", "template", "func", "hasTemplate", "fileLoader", "tryHandleCache", "data", "cb", "result", "err", "reject", "includeFile", "opts", "includerResult", "rethrow", "str", "flnm", "lineno", "esc", "lines", "start", "end", "context", "line", "i", "curr", "stripSemi", "templ", "Template", "d", "o", "args", "viewOpts", "text", "delim", "open", "close", "src", "fn", "prepended", "appended", "escapeFn", "ctor", "sanitizedFilename", "destructuring", "e", "returnedFn", "include", "includeData", "basename", "self", "matches", "c", "index", "closing", "pat", "arr", "firstPos", "newLineCount", "require_lodash", "__commonJSMin", "exports", "module", "FUNC_ERROR_TEXT", "HASH_UNDEFINED", "INFINITY", "funcTag", "genTag", "symbolTag", "reIsDeepProp", "reIsPlainProp", "reLeadingDot", "rePropName", "reRegExpChar", "reEscapeChar", "reIsHostCtor", "freeGlobal", "freeSelf", "root", "getValue", "object", "key", "__name", "isHostObject", "value", "result", "arrayProto", "funcProto", "objectProto", "coreJsData", "maskSrcKey", "uid", "funcToString", "hasOwnProperty", "objectToString", "reIsNative", "Symbol", "splice", "Map", "getNative", "nativeCreate", "symbolProto", "symbolToString", "Hash", "entries", "index", "length", "entry", "hashClear", "hashDelete", "hashGet", "data", "hashHas", "hashSet", "ListCache", "listCacheClear", "listCacheDelete", "assocIndexOf", "lastIndex", "listCacheGet", "listCacheHas", "listCacheSet", "MapCache", "mapCacheClear", "mapCacheDelete", "getMapData", "mapCacheGet", "mapCacheHas", "mapCacheSet", "array", "eq", "baseGet", "path", "isKey", "castPath", "toKey", "baseIsNative", "isObject", "isMasked", "pattern", "isFunction", "toSource", "baseSlice", "start", "end", "baseToString", "isSymbol", "baseUnset", "parent", "last", "isArray", "stringToPath", "map", "isKeyable", "type", "func", "memoize", "string", "toString", "match", "number", "quote", "resolver", "memoized", "args", "cache", "other", "tag", "isObjectLike", "unset", "merge", "sets", "_len", "_key", "length", "slice", "xl", "x", "join", "subexp", "str", "typeOf", "o", "undefined", "Object", "prototype", "toString", "call", "split", "pop", "shift", "toLowerCase", "toUpperCase", "toArray", "obj", "Array", "setInterval", "assign", "target", "source", "key", "buildExps", "isIRI", "ALPHA$$", "CR$", "DIGIT$$", "DQUOTE$$", "HEXDIG$$", "SP$$", "PCT_ENCODED$", "SUB_DELIMS$$", "RESERVED$$", "GEN_DELIMS$$", "UCSCHAR$$", "SCHEME$", "USERINFO$", "UNRESERVED$$", "DEC_OCTET$", "DEC_OCTET_RELAXED$", "H16$", "LS32$", "IPV4ADDRESS$", "IPV6ADDRESS1$", "IPV6ADDRESS2$", "IPV6ADDRESS3$", "IPV6ADDRESS4$", "IPV6ADDRESS5$", "IPV6ADDRESS6$", "IPV6ADDRESS7$", "IPV6ADDRESS8$", "IPV6ADDRESS9$", "ZONEID$", "IPV6ADDRESS$", "IP_LITERAL$", "IPV6ADDRZ_RELAXED$", "IPVFUTURE$", "HOST$", "REG_NAME$", "PORT$", "AUTHORITY$", "PCHAR$", "SEGMENT$", "SEGMENT_NZ$", "SEGMENT_NZ_NC$", "PATH_ABEMPTY$", "PATH_ABSOLUTE$", "PATH$", "PATH_NOSCHEME$", "PATH_ROOTLESS$", "PATH_EMPTY$", "QUERY$", "IPRIVATE$$", "FRAGMENT$", "HIER_PART$", "URI$", "RELATIVE_PART$", "RELATIVE$", "URI_REFERENCE$", "ABSOLUTE_URI$", "GENERIC_REF$", "RELATIVE_REF$", "ABSOLUTE_REF$", "SAMEDOC_REF$", "AUTHORITY_REF$", "RegExp", "URI_PROTOCOL", "IRI_PROTOCOL", "maxInt", "base", "tMin", "tMax", "skew", "damp", "initialBias", "initialN", "delimiter", "regexPunycode", "regexNonASCII", "regexSeparators", "errors", "baseMinusTMin", "floor", "Math", "stringFromCharCode", "String", "fromCharCode", "error", "type", "RangeError", "map", "array", "fn", "result", "mapDomain", "string", "parts", "replace", "labels", "encoded", "ucs2decode", "output", "counter", "value", "charCodeAt", "extra", "push", "ucs2encode", "__name", "fromCodePoint", "toConsumableArray", "basicToDigit", "codePoint", "digitToBasic", "digit", "flag", "adapt", "delta", "numPoints", "firstTime", "k", "decode", "input", "inputLength", "i", "n", "bias", "basic", "lastIndexOf", "j", "index", "oldi", "w", "t", "baseMinusT", "out", "splice", "encode", "_step", "_iteratorNormalCompletion", "_iterator", "currentValue", "basicLength", "handledCPCount", "m", "_step2", "_iteratorNormalCompletion2", "_iterator2", "handledCPCountPlusOne", "_step3", "_iteratorNormalCompletion3", "_iterator3", "q", "qMinusT", "toUnicode", "test", "toASCII", "punycode", "SCHEMES", "pctEncChar", "chr", "c", "e", "pctDecChars", "newStr", "il", "parseInt", "substr", "c2", "c3", "_normalizeComponentEncoding", "components", "protocol", "decodeUnreserved", "decStr", "match", "UNRESERVED", "scheme", "PCT_ENCODED", "NOT_SCHEME", "userinfo", "NOT_USERINFO", "host", "NOT_HOST", "path", "NOT_PATH", "NOT_PATH_NOSCHEME", "query", "NOT_QUERY", "fragment", "NOT_FRAGMENT", "_stripLeadingZeros", "_normalizeIPv4", "matches", "IPV4ADDRESS", "address", "_matches", "_normalizeIPv6", "IPV6ADDRESS", "_matches2", "zone", "reverse", "last", "_address$toLowerCase$2", "first", "firstFields", "lastFields", "isLastFieldIPv4Address", "fieldCount", "lastFieldsStart", "fields", "allZeroFields", "reduce", "acc", "field", "lastLongest", "longestZeroFields", "sort", "a", "b", "newHost", "newFirst", "newLast", "URI_PARSE", "NO_MATCH_IS_UNDEFINED", "parse", "uriString", "options", "iri", "reference", "port", "isNaN", "indexOf", "schemeHandler", "unicodeSupport", "domainHost", "_recomposeAuthority", "uriTokens", "_", "$1", "$2", "RDS1", "RDS2", "RDS3", "RDS5", "removeDotSegments", "im", "s", "Error", "serialize", "authority", "charAt", "absolutePath", "resolveComponents", "relative", "skipNormalization", "tolerant", "resolve", "baseURI", "relativeURI", "schemelessOptions", "normalize", "uri", "equal", "uriA", "uriB", "escapeComponent", "ESCAPE", "unescapeComponent", "handler", "secure", "http", "isSecure", "wsComponents", "resourceName", "_wsComponents$resourc2", "ws", "O", "ATEXT$$", "QTEXT$$", "VCHAR$$", "SOME_DELIMS$$", "NOT_LOCAL_PART", "NOT_HFNAME", "NOT_HFVALUE", "mailtoComponents", "to", "unknownHeaders", "headers", "hfields", "hfield", "toAddrs", "subject", "body", "addr", "toAddr", "atIdx", "localPart", "domain", "name", "URN_PARSE", "urnComponents", "nid", "nss", "urnScheme", "uriComponents", "UUID", "uuidComponents", "uuid", "https", "wss", "mailto", "urn", "require_fast_deep_equal", "__commonJSMin", "exports", "module", "__name", "equal", "a", "b", "length", "keys", "key", "require_ucs2length", "__commonJSMin", "exports", "module", "__name", "str", "length", "len", "pos", "value", "require_util", "__commonJSMin", "exports", "module", "copy", "checkDataType", "checkDataTypes", "coerceToTypes", "toHash", "getProperty", "escapeQuotes", "varOccurences", "varReplace", "schemaHasRules", "schemaHasRulesExcept", "schemaUnknownRules", "toQuotedString", "getPathExpr", "getPath", "getData", "unescapeFragment", "unescapeJsonPointer", "escapeFragment", "escapeJsonPointer", "o", "to", "key", "__name", "dataType", "data", "strictNumbers", "negate", "EQUAL", "AND", "OK", "NOT", "dataTypes", "code", "types", "t", "COERCE_TO_TYPES", "optionCoerceTypes", "i", "arr", "hash", "IDENTIFIER", "SINGLE_QUOTE", "str", "dataVar", "matches", "expr", "schema", "rules", "exceptKeyword", "currentPath", "jsonPointers", "isNumber", "path", "joinPaths", "prop", "JSON_POINTER", "RELATIVE_JSON_POINTER", "$data", "lvl", "paths", "up", "jsonPointer", "segments", "segment", "a", "b", "require_schema_obj", "__commonJSMin", "exports", "module", "util", "SchemaObject", "obj", "__name", "require_json_schema_traverse", "__commonJSMin", "exports", "module", "traverse", "schema", "opts", "cb", "pre", "post", "_traverse", "jsonPtr", "rootSchema", "parentJsonPtr", "parentKeyword", "parentSchema", "keyIndex", "key", "sch", "i", "prop", "escapeJsonPtr", "__name", "str", "require_resolve", "__commonJSMin", "exports", "module", "URI", "equal", "util", "SchemaObject", "traverse", "resolve", "normalizeId", "getFullPath", "resolveUrl", "resolveIds", "inlineRef", "resolveSchema", "compile", "root", "ref", "refVal", "res", "schema", "v", "baseId", "__name", "p", "refPath", "_getFullPath", "id", "resolveRecursive", "getJsonPointer", "parsedRef", "PREVENT_SCOPE_CHANGE", "parts", "i", "part", "$ref", "SIMPLE_INLINED", "limit", "checkNoRef", "countKeys", "item", "key", "count", "normalize", "TRAILING_SLASH_HASH", "schemaId", "baseIds", "fullPaths", "localRefs", "self", "sch", "jsonPtr", "rootSchema", "parentJsonPtr", "parentKeyword", "parentSchema", "keyIndex", "fullPath", "require_error_classes", "__commonJSMin", "exports", "module", "resolve", "errorSubclass", "ValidationError", "MissingRefError", "errors", "__name", "baseId", "ref", "message", "Subclass", "require_fast_json_stable_stringify", "__commonJSMin", "exports", "module", "data", "opts", "cycles", "cmp", "f", "node", "a", "b", "aobj", "bobj", "seen", "__name", "stringify", "i", "out", "seenIndex", "keys", "key", "value", "require_validate", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$async", "$refKeywords", "$id", "$unknownKwd", "$keywordsMsg", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$errorKeyword", "$data", "$valid", "$$outStack", "__err", "$top", "$defaultMsg", "$closingBraces1", "$closingBraces2", "$typeSchema", "$typeIsArray", "$coerceToTypes", "$rulesGroup", "$shouldUseGroup", "$method", "$dataType", "$coerced", "arr1", "$type", "$i", "l1", "$parentData", "$parentDataProperty", "arr2", "i2", "l2", "$schemaKeys", "arr3", "$propertyKey", "i3", "l3", "$sch", "$passData", "arr4", "l4", "arr5", "$rule", "i5", "l5", "$shouldUseRule", "$code", "rules", "i", "$ruleImplementsSomeKeyword", "impl", "require_compile", "__commonJSMin", "exports", "module", "resolve", "util", "errorClasses", "stableStringify", "validateGenerator", "ucs2length", "equal", "ValidationError", "compile", "schema", "root", "localRefs", "baseId", "self", "opts", "refVal", "refs", "patterns", "patternsHash", "defaults", "defaultsHash", "customRules", "c", "checkCompiling", "compilation", "callValidate", "formats", "RULES", "v", "localCompile", "cv", "endCompiling", "validate", "result", "__name", "_schema", "_root", "isRoot", "$async", "sourceCode", "resolveRef", "usePattern", "useDefault", "useCustomRule", "vars", "refValCode", "patternCode", "defaultCode", "customRuleCode", "makeValidate", "e", "ref", "refIndex", "_refVal", "refCode", "resolvedRef", "rootRefId", "addLocalRef", "localSchema", "removeLocalRef", "replaceLocalRef", "refId", "code", "regexStr", "index", "value", "valueStr", "rule", "parentSchema", "it", "deps", "keyword", "validateSchema", "valid", "message", "inline", "macro", "compIndex", "i", "arr", "statement", "require_cache", "__commonJSMin", "exports", "module", "Cache", "__name", "key", "value", "require_formats", "__commonJSMin", "exports", "module", "util", "DATE", "DAYS", "TIME", "HOSTNAME", "URI", "URIREF", "URITEMPLATE", "URL", "UUID", "JSON_POINTER", "JSON_POINTER_URI_FRAGMENT", "RELATIVE_JSON_POINTER", "formats", "mode", "__name", "regex", "date", "time", "date_time", "uri", "isLeapYear", "year", "str", "matches", "month", "day", "full", "hour", "minute", "second", "timeZone", "DATE_TIME_SEPARATOR", "dateTime", "NOT_URI_FRAGMENT", "Z_ANCHOR", "require_ref", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$errSchemaPath", "$breakOnError", "$data", "$valid", "$async", "$refCode", "$refVal", "$message", "$$outStack", "__err", "$it", "$nextValid", "$code", "$parentData", "$parentDataProperty", "__callValidate", "require_allOf", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$it", "$closingBraces", "$nextValid", "$currentBaseId", "$allSchemasEmpty", "arr1", "$sch", "$i", "l1", "require_anyOf", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$valid", "$errs", "$it", "$closingBraces", "$nextValid", "$noEmptySchema", "$sch", "$currentBaseId", "$wasComposite", "arr1", "$i", "l1", "require_comment", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$schema", "$errSchemaPath", "$breakOnError", "$comment", "require_const", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$valid", "$isData", "$schemaValue", "$$outStack", "__err", "require_contains", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$valid", "$errs", "$it", "$closingBraces", "$nextValid", "$idx", "$dataNxt", "$nextData", "$currentBaseId", "$nonEmptySchema", "$wasComposite", "$passData", "$code", "$$outStack", "__err", "require_dependencies", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$errs", "$it", "$closingBraces", "$nextValid", "$schemaDeps", "$propertyDeps", "$ownProperties", "$property", "$sch", "$deps", "$currentErrorPath", "arr1", "$propertyKey", "$i", "l1", "$prop", "$useData", "$propertyPath", "$missingProperty", "$$outStack", "__err", "arr2", "i2", "l2", "$currentBaseId", "require_enum", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$valid", "$isData", "$schemaValue", "$i", "$vSchema", "$$outStack", "__err", "require_format", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$isData", "$schemaValue", "$unknownFormats", "$allowUnknown", "$format", "$isObject", "$formatType", "$async", "$formatRef", "$$outStack", "__err", "require_if", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$valid", "$errs", "$it", "$nextValid", "$thenSch", "$elseSch", "$thenPresent", "$elsePresent", "$currentBaseId", "$ifClause", "$wasComposite", "require_items", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$valid", "$errs", "$it", "$closingBraces", "$nextValid", "$idx", "$dataNxt", "$nextData", "$currentBaseId", "$additionalItems", "$currErrSchemaPath", "$$outStack", "__err", "arr1", "$sch", "$i", "l1", "$passData", "$code", "require_limit", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$errorKeyword", "$data", "$isData", "$schemaValue", "$isMax", "$exclusiveKeyword", "$schemaExcl", "$isDataExcl", "$op", "$notOp", "$schemaValueExcl", "$exclusive", "$exclType", "$exclIsNumber", "$opExpr", "$opStr", "$$outStack", "__err", "require_limitItems", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$errorKeyword", "$data", "$isData", "$schemaValue", "$op", "$$outStack", "__err", "require_limitLength", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$errorKeyword", "$data", "$isData", "$schemaValue", "$op", "$$outStack", "__err", "require_limitProperties", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$errorKeyword", "$data", "$isData", "$schemaValue", "$op", "$$outStack", "__err", "require_multipleOf", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$isData", "$schemaValue", "$$outStack", "__err", "require_not", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$errs", "$it", "$nextValid", "$wasComposite", "$allErrorsOption", "$$outStack", "__err", "require_oneOf", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$valid", "$errs", "$it", "$closingBraces", "$nextValid", "$currentBaseId", "$prevValid", "$passingSchemas", "$wasComposite", "arr1", "$sch", "$i", "l1", "require_pattern", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$isData", "$schemaValue", "$regexp", "$$outStack", "__err", "require_properties", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$errs", "$it", "$closingBraces", "$nextValid", "$key", "$idx", "$dataNxt", "$nextData", "$dataProperties", "$schemaKeys", "notProto", "$pProperties", "$pPropertyKeys", "$aProperties", "$someProperties", "$noAdditional", "$additionalIsSchema", "$removeAdditional", "$checkAdditional", "$ownProperties", "$currentBaseId", "$required", "$requiredHash", "p", "arr1", "$propertyKey", "i1", "l1", "arr2", "$pProperty", "$i", "l2", "$currentErrorPath", "$additionalProperty", "$currErrSchemaPath", "$$outStack", "__err", "$wasComposite", "$passData", "$code", "$useDefaults", "arr3", "i3", "l3", "$sch", "$prop", "$hasDefault", "$useData", "$missingProperty", "arr4", "i4", "l4", "require_propertyNames", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$errs", "$it", "$closingBraces", "$nextValid", "$key", "$idx", "$i", "$invalidName", "$dataNxt", "$nextData", "$dataProperties", "$ownProperties", "$currentBaseId", "$passData", "$wasComposite", "$code", "require_required", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$valid", "$isData", "$schemaValue", "$vSchema", "$required", "arr1", "$property", "i1", "l1", "$propertySch", "$currentErrorPath", "$loopRequired", "$ownProperties", "$i", "$propertyPath", "$missingProperty", "$$outStack", "__err", "arr2", "$propertyKey", "l2", "$prop", "$useData", "arr3", "i3", "l3", "require_uniqueItems", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$data", "$valid", "$isData", "$schemaValue", "$itemType", "$typeIsArray", "$method", "$$outStack", "__err", "require_dotjs", "__commonJSMin", "exports", "module", "require_rules", "__commonJSMin", "exports", "module", "ruleModules", "toHash", "__name", "RULES", "ALL", "KEYWORDS", "TYPES", "group", "keyword", "implKeywords", "key", "k", "rule", "require_data", "__commonJSMin", "exports", "module", "KEYWORDS", "metaSchema", "keywordsJsonPointers", "i", "segments", "keywords", "j", "key", "schema", "require_async", "__commonJSMin", "exports", "module", "MissingRefError", "compileAsync", "schema", "meta", "callback", "self", "p", "loadMetaSchemaOf", "schemaObj", "_compileAsync", "v", "sch", "$schema", "__name", "e", "loadMissingSchema", "ref", "added", "schemaPromise", "removePromise", "require_custom", "__commonJSMin", "exports", "module", "__name", "it", "$keyword", "$ruleType", "out", "$lvl", "$dataLvl", "$schema", "$schemaPath", "$errSchemaPath", "$breakOnError", "$errorKeyword", "$data", "$valid", "$errs", "$isData", "$schemaValue", "$rule", "$definition", "$rDef", "$closingBraces", "$compile", "$inline", "$macro", "$ruleValidate", "$validateCode", "$validateSchema", "$ruleErrs", "$i", "$ruleErr", "$asyncKeyword", "$it", "$nextValid", "$wasComposite", "$code", "$$outStack", "$parentData", "$parentDataProperty", "def_callRuleValidate", "__err", "def_customError", "require_json_schema_draft_07", "__commonJSMin", "exports", "module", "require_definition_schema", "__commonJSMin", "exports", "module", "metaSchema", "require_keyword", "__commonJSMin", "exports", "module", "IDENTIFIER", "customRuleCode", "definitionSchema", "addKeyword", "getKeyword", "removeKeyword", "validateKeyword", "keyword", "definition", "RULES", "dataType", "_addRule", "metaSchema", "ruleGroup", "i", "rg", "rule", "__name", "rules", "j", "throwError", "v", "require_data", "__commonJSMin", "exports", "module", "require_ajv", "__commonJSMin", "exports", "module", "compileSchema", "resolve", "Cache", "SchemaObject", "stableStringify", "formats", "rules", "$dataMetaSchema", "util", "Ajv", "validate", "compile", "addSchema", "addMetaSchema", "validateSchema", "getSchema", "removeSchema", "addFormat", "errorsText", "_addSchema", "_compile", "customKeyword", "errorClasses", "META_SCHEMA_ID", "META_IGNORE_OPTIONS", "META_SUPPORT_DATA", "opts", "setLogger", "chooseGetId", "getMetaSchemaOptions", "addInitialFormats", "addInitialKeywords", "addDefaultMetaSchema", "addInitialSchemas", "__name", "schemaKeyRef", "data", "v", "schemaObj", "valid", "schema", "_meta", "key", "_skipValidation", "id", "checkUnique", "skipValidation", "throwOrLogError", "$schema", "defaultMeta", "message", "self", "meta", "keyRef", "_getSchemaObj", "_getSchemaFragment", "ref", "res", "root", "baseId", "_removeAllSchemas", "serialize", "cacheKey", "schemas", "regex", "shouldAddSchema", "cached", "willValidate", "recursiveMeta", "localRefs", "callValidate", "currentOpts", "e", "_validate", "result", "_get$IdOrId", "_getId", "_get$Id", "errors", "options", "separator", "dataVar", "text", "i", "name", "format", "$dataSchema", "metaSchema", "optsSchemas", "keyword", "metaOpts", "logger", "noop", "src_exports", "__export", "exportConfig", "generateSchema", "getApiVersion", "getChanges", "getGenericSchema", "getPathToGenericSchema", "getProject", "importConfig", "importProject", "importProjectSchema", "isDirectory", "log", "readDirectory", "__toCommonJS", "import_ux_specification_types", "import_ux_specification_types", "_typeof", "o", "__name", "_classCallCheck", "instance", "Constructor", "__name", "_toPrimitive", "input", "hint", "_typeof", "prim", "res", "__name", "_toPropertyKey", "arg", "key", "_toPrimitive", "_typeof", "__name", "_defineProperties", "target", "props", "i", "descriptor", "_toPropertyKey", "__name", "_createClass", "Constructor", "protoProps", "staticProps", "_assertThisInitialized", "self", "__name", "_setPrototypeOf", "o", "p", "__name", "_inherits", "subClass", "superClass", "_setPrototypeOf", "__name", "_possibleConstructorReturn", "self", "call", "_typeof", "_assertThisInitialized", "__name", "_getPrototypeOf", "o", "__name", "_defineProperty", "obj", "key", "value", "_toPropertyKey", "__name", "_arrayWithHoles", "arr", "__name", "_iterableToArray", "iter", "__name", "_arrayLikeToArray", "arr", "len", "i", "arr2", "__name", "_unsupportedIterableToArray", "o", "minLen", "_arrayLikeToArray", "__name", "_nonIterableRest", "__name", "_toArray", "arr", "_arrayWithHoles", "_iterableToArray", "_unsupportedIterableToArray", "_nonIterableRest", "__name", "ownKeys$6", "object", "enumerableOnly", "keys", "symbols", "sym", "__name", "_objectSpread$6", "target", "i", "source", "key", "_defineProperty", "consoleLogger", "args", "type", "Logger", "concreteLogger", "options", "_classCallCheck", "_createClass", "bool", "_len", "_key", "_len2", "_key2", "_len3", "_key3", "_len4", "_key4", "lvl", "prefix", "debugOnly", "moduleName", "baseLogger", "EventEmitter", "events", "listener", "_this", "event", "l", "cloned", "observer", "_cloned", "defer", "res", "rej", "promise", "resolve", "reject", "makeString", "copy", "a", "s", "t", "m", "getLastOfPath", "path", "Empty", "cleanKey", "canNotTraverseDeeper", "stack", "setPath", "newValue", "_getLastOfPath", "obj", "k", "pushPath", "concat", "_getLastOfPath2", "getPath", "_getLastOfPath3", "getPathWithDefaults", "data", "defaultData", "value", "deepExtend", "overwrite", "prop", "regexEscape", "str", "_entityMap", "escape", "isIE10", "chars", "looksLikeObjectPath", "nsSeparator", "keySeparator", "possibleChars", "c", "r", "matched", "ki", "deepFind", "paths", "current", "j", "p", "mix", "joinedPath", "ownKeys$5", "_objectSpread$5", "_createSuper$3", "Derived", "hasNativeReflectConstruct", "_isNativeReflectConstruct$3", "Super", "_getPrototypeOf", "result", "NewTarget", "_possibleConstructorReturn", "ResourceStore", "_EventEmitter", "_inherits", "_super", "_assertThisInitialized", "ns", "index", "lng", "ignoreJSONStructure", "resources", "deep", "pack", "n", "v", "postProcessor", "module", "processors", "translator", "processor", "ownKeys$4", "_objectSpread$4", "_createSuper$2", "_isNativeReflectConstruct$2", "checkedLoadedFor", "Translator", "services", "resolved", "namespaces", "wouldCheckForNsInKey", "seemsNaturalLanguage", "parts", "lastKey", "_this2", "_typeof", "returnDetails", "_this$extractFromKey", "namespace", "appendNamespaceToCIMode", "resUsedKey", "resExactUsedKey", "resType", "noObject", "joinArrays", "handleAsObjectInI18nFormat", "handleAsObject", "resTypeIsArray", "newKeyToUse", "deepKey", "usedDefault", "usedKey", "needsPluralHandling", "hasDefaultValue", "defaultValueSuffix", "defaultValue", "missingKeyNoValueFallbackToKey", "resForMissing", "updateMissing", "fk", "lngs", "fallbackLngs", "send", "specificDefaultValue", "defaultForMissing", "language", "suffix", "_this3", "skipOnVariables", "nestBef", "nb", "na", "nestAft", "postProcess", "postProcessorNames", "_this4", "found", "exactUsedKey", "usedLng", "usedNS", "extracted", "needsZeroSuffixLookup", "needsContextHandling", "codes", "code", "finalKeys", "pluralSuffix", "zeroSuffix", "contextKey", "possibleKey", "option", "capitalize", "string", "LanguageUtil", "specialCases", "part", "cleanedLng", "lngOnly", "supportedLng", "fallbacks", "fallbackCode", "fallbackCodes", "addCode", "fc", "sets", "_rulesPluralsTypes", "deprecatedJsonVersions", "suffixesOrder", "createRules", "rules", "set", "PluralResolver", "languageUtils", "rule", "pluralCategory1", "pluralCategory2", "pluralCategory", "number", "count", "idx", "returnSuffix", "ownKeys$3", "_objectSpread$3", "deepFindWithDefaults", "Interpolator", "iOpts", "regexpStr", "regexpUnescapeStr", "nestingRegexpStr", "match", "replaces", "regexSafe", "val", "handleFormat", "f", "missingInterpolationHandler", "todos", "todo", "matchedVar", "temp", "safeValue", "clonedOptions", "handleHasOptions", "inheritedOptions", "sep", "optionsString", "matchedSingleQuotes", "matchedDoubleQuotes", "e", "formatters", "doReduce", "elem", "ownKeys$2", "_objectSpread$2", "parseFormatStr", "formatStr", "formatName", "formatOptions", "optStr", "opts", "opt", "_opt$split", "_opt$split2", "_toArray", "rest", "createCachedFormatter", "fn", "cache", "formatter", "Formatter", "name", "_format", "formats", "mem", "_parseFormatStr", "formatted", "valOptions", "error", "ownKeys$1", "_objectSpread$1", "_createSuper$1", "_isNativeReflectConstruct$1", "removePending", "q", "Connector", "backend", "store", "languages", "callback", "toLoad", "pending", "toLoadLanguages", "toLoadNamespaces", "hasAllNamespaces", "err", "loaded", "loadedKeys", "fcName", "tried", "wait", "resolver", "next", "_this5", "fallbackValue", "isUpdate", "clb", "get", "ret", "transformOptions", "ownKeys", "_objectSpread", "_createSuper", "_isNativeReflectConstruct", "noop", "bindMemberFunctions", "inst", "mems", "I18n", "defOpts", "createClassOnDemand", "ClassOrObject", "lu", "storeApi", "_this2$store", "storeApiChained", "_this2$store2", "deferred", "load", "finish", "usedCallback", "append", "li", "lngInLngs", "setLngProps", "done", "setLng", "keyPrefix", "fixedT", "resultKey", "_this$translator", "_this$translator2", "_this6", "fallbackLng", "lastLng", "loadNotPending", "loadState", "preResult", "_this7", "preloaded", "newLngs", "rtlLngs", "_this8", "mergedOptions", "clone", "membersToCopy", "instance", "createInstance", "dir", "init", "loadResources", "reloadResources", "use", "changeLanguage", "getFixedT", "exists", "setDefaultNamespace", "hasLoadedNamespace", "loadNamespaces", "loadLanguages", "import_deepmerge", "import_annotation_converter", "import_edmx_parser", "import_UI", "import_Communication", "import_ux_specification_types", "log", "__name", "logger", "logEntry", "meta", "DEFINITION_LINK_PREFIX", "createAnnotationPath", "__name", "entityTypeName", "term", "qualifier", "annotationPath", "parseAndMergeAndConvert", "annotationFiles", "logger", "parseResult", "converterOutput", "annotationData", "error", "log", "instance", "mergeParser", "getAnnotationPropertyValue", "annotationProperty", "evaluateCommonLabel", "annotations", "entityType", "label", "_a", "_b", "_c", "_d", "targetProperty", "getLabelForPropertyPath", "propertyPath", "getLabelForDataField", "field", "property", "ep", "getLabel", "dataFieldLabel", "singleProperty", "getTitleForDataField", "dataField", "propertyCommonLabel", "getDataFieldDescription", "dataFieldAbstract", "title", "prepareRef", "refInput", "getPageTypeV2", "name", "templatePart", "getPageTypeV4", "v4App", "getTargetAnnotationName", "targetAnnotation", "keyForRelatedFacetKeys", "termWithQualifier", "findAlias", "namespace", "oDataServiceAVT", "aliasReference", "reference", "determineTargetAnnotation", "navigationParts", "lastNavigationPart", "annotation", "alias", "adjustKey", "key", "uiClass", "pathParts", "getKeyAndEntityTypeOfReferenceFacet", "propertyValue", "oDataVersion", "stopProcessing", "navigation", "separator", "navSeparator", "getSectionFacet", "facetDefinition", "sourceEntityType", "facetName", "newKey", "newEntityType", "sectionNameSpace", "getManifestSectionByPathV4", "manifest", "path", "targetAnnotationEncoded", "importScenario", "manifestSection", "pathElements", "index", "element", "decodedElement", "getSchemaKeyOfLineItemRecord", "lineItemRecord", "schemaKey", "target", "value", "getUIAnnotationTerm", "getCommunicationAnnotationTerm", "getAnnotationTerm", "evaluateTargetAnnotation", "section", "annotationRecord", "facets", "_e", "_f", "_g", "_h", "_i", "targetEntityType", "addFacetToConfig", "serviceName", "facet", "collectionItem", "getObjectPageHeaderFacets", "facetAnnotation", "lastDot", "item", "getObjectPageFacets", "getVersionFromManifest", "determineV2Template", "templateType", "v2Pages", "pageKey", "v2Page", "determineV4PageTemplateType", "v4Page", "pageType", "viewPath", "determineV4TemplateFromPages", "v4Pages", "determineV4Template", "getTemplateTypeFromManifest", "fioriElementsVersion", "addSectionTitleAndDescription", "facetKey", "addTargetTitleAndSectionDescription", "createDefaultSection", "appSchema", "getObjectPageFacetSection", "checkUnresolvableFacets", "sections", "result", "deleteEmptyStructure", "pathArray", "getGenericSchemaFileName", "schemaType", "getSchemaFilePath", "entitySet", "schemaFile", "generatePageId", "viewId", "pageName", "names", "parts", "fillArrayFromAnyOfReference", "currentConfigObject", "definitionArray", "$ref", "definitionKey", "controlProperty", "fillArrayFromPropertyDefinition", "propertyDefinition", "determineNextDefinitionFromDefinitionArray", "factory", "nextDefinition", "lastDefinition", "getNextTargetDefinition", "factoryKey", "targetObject", "arrayCombineMerge", "source", "options", "destination", "merge", "convertActionKeyToStableId", "actionId", "__name", "getDefinitionKey", "$ref", "DEFINITION_LINK_PREFIX", "updatePropertyIndices", "schema", "order", "propertyName", "index", "removeNamespaces", "sId", "replaceNamespaces", "import_UI", "import_ux_specification_types", "import_ux_specification_types", "buildControlIdFromParent", "__name", "baseId", "idBreadcrumbs", "buildControlIdForPage", "breadcrumbs", "convertSectionId", "sectionId", "title", "convertedSectionId", "prefix", "escapeId", "sParam", "c", "sCode", "BindingValue", "mapBreadcrumbs", "localBreadcrumbs", "item", "index", "buildColumnControlId", "_controlType", "tableId", "lastIdPart", "fullId", "splitPoint", "getActionBreadcrumbParts", "actionIdParts", "actionType", "semanticObjectId", "actionId", "determinePattern", "schemaDefinition", "pattern", "enumPattern", "enumValue", "addPatternForBindingChangeOfEnum", "schema", "definition", "propertyName", "bindingValues", "propertyList", "originalDefinition", "resultDefinition", "targetDefinition", "DEFINITION_LINK_PREFIX", "description", "value", "addPatternForBindingChangeOfEnumLR", "addPatternForBindingChangeOfEnumOP", "Reflect", "factory", "root", "exporter", "makeExporter", "target", "previous", "key", "value", "__name", "hasOwn", "supportsSymbol", "toPrimitiveSymbol", "iteratorSymbol", "supportsCreate", "supportsProto", "downLevel", "HashMap", "MakeDictionary", "map", "functionPrototype", "usePolyfill", "_Map", "CreateMapPolyfill", "_Set", "CreateSetPolyfill", "_WeakMap", "CreateWeakMapPolyfill", "Metadata", "decorate", "decorators", "propertyKey", "attributes", "IsUndefined", "IsArray", "IsConstructor", "DecorateConstructor", "IsObject", "IsNull", "ToPropertyKey", "DecorateProperty", "metadata", "metadataKey", "metadataValue", "decorator", "IsPropertyKey", "OrdinaryDefineOwnMetadata", "defineMetadata", "hasMetadata", "OrdinaryHasMetadata", "hasOwnMetadata", "OrdinaryHasOwnMetadata", "getMetadata", "OrdinaryGetMetadata", "getOwnMetadata", "OrdinaryGetOwnMetadata", "getMetadataKeys", "OrdinaryMetadataKeys", "getOwnMetadataKeys", "OrdinaryOwnMetadataKeys", "deleteMetadata", "metadataMap", "GetOrCreateMetadataMap", "targetMetadata", "i", "decorated", "descriptor", "O", "P", "Create", "MetadataKey", "parent", "OrdinaryGetPrototypeOf", "ToBoolean", "MetadataValue", "ownKeys", "parentKeys", "set", "keys", "_i", "ownKeys_1", "hasKey", "_a", "parentKeys_1", "keysObj", "iterator", "GetIterator", "k", "next", "IteratorStep", "nextValue", "IteratorValue", "e", "IteratorClose", "Type", "x", "IsSymbol", "ToPrimitive", "input", "PreferredType", "hint", "exoticToPrim", "GetMethod", "result", "OrdinaryToPrimitive", "toString_1", "IsCallable", "valueOf", "toString_2", "argument", "ToString", "V", "func", "obj", "method", "iterResult", "f", "proto", "prototype", "prototypeProto", "constructor", "cacheSentinel", "arraySentinel", "MapIterator", "values", "selector", "index", "error", "Map", "size", "getKey", "getValue", "getEntry", "insert", "_", "Set", "UUID_SIZE", "rootKey", "CreateUniqueKey", "WeakMap", "table", "GetOrCreateWeakMapTable", "CreateUUID", "create", "FillRandomBytes", "buffer", "GenRandomBytes", "data", "offset", "byte", "reflectMetadataKey", "syncRule", "__name", "propSpec", "getReflectMetadata", "target", "propertyName", "rule", "pageLayoutInformation", "pageInfo", "constructor", "childIdKey", "childId", "id", "getChildId", "getPageLayoutInformation", "validityMetadataKey", "validity", "getTextForDeprecated", "key", "validityInformation", "text", "flexUtils", "import_ux_specification_types", "changesUtils", "defaultValues", "createChangeString", "change", "manifest", "changeString", "defaultValue", "error", "__name", "parseChangeString", "fillFlexChangeContent", "configObject", "syncRule", "ui5Version", "key", "controlId", "isCustomer", "flexChange", "exportToFlexChange", "change", "manifest", "createChangeString", "__name", "import_dist", "importProperty", "syncRule", "manifestSection", "propertyKey", "configPart", "sectionId", "breadcrumbs", "manifestKey", "importHandler", "value", "__name", "checkDeprecatedProperties", "deprecatedProperties", "path", "logger", "key", "deprecated", "log", "getTextForDeprecated", "getSectionTitle", "schemaSection", "jsonSchema", "refTitle", "DEFINITION_LINK_PREFIX", "getTargetFromCustomColumnRef", "ref", "refParts", "removeEmptyStructure", "config", "structure", "import_UI", "import_UI", "replaceSpecialChars", "sId", "__name", "prepareId", "removeNamespaces", "evaluateConcat", "oValue", "sPathConcat", "applyValue", "getStableIdPartFromValue", "_a", "getStableIdPartFromSemanticObjectAndAction", "oDataField", "sIdPart", "getStableIdPartFromDataField", "import_ux_specification_types", "import_ux_specification_types", "import_UI", "import_path", "import_xml_js", "MULTISELECTTABLE", "INLINEDELETETABLE", "TREETABLE", "ANALYTICALTABLE", "GRIDTABLE", "OP_STANDARD_HEADER_ACTION_PREFIX", "OP_STANDARD_FOOTER_ACTION_PREFIX", "addCustomColumnDefinition", "appSchema", "customColumnsDefinitionName", "customColumnDefinitionName", "DEFINITION_LINK_PREFIX", "extensionType", "__name", "getActionId", "actionType", "lineItemProperties", "actionId", "getSchemaKeyOfLineItemRecord", "prepareRef", "handleActionRecord", "actions", "lineItemProps", "recordIndex", "actionReferenceType", "actionTemplate", "actionDefinition", "description", "getDataFieldDescription", "key", "ns", "getActionKey", "getColumnActionType", "lineItemId", "lineItemRecord", "actionTypes", "getActionType", "generateGenericColumn", "schemaKey", "lineItemDefinition", "addDataTypeToDefinition", "addKeyToDefinition", "handleAnyAction", "footerActions", "addLineItemsType", "lineItemAnnotation", "entityType", "customColumnRef", "lineItemPath", "addCommonLineItemDefinitions", "addListReportLeadingProperties", "definitionName", "_a", "_b", "leadingPropertySchema", "properties", "result", "property", "addTabkeyEnum", "page", "facetID", "_c", "_d", "_e", "tabkeyPropertySchema", "quickVariantsX", "enumEntries", "variant", "addEnumToSchema", "addFragmentEnum", "fragments", "appId", "fragment", "relPath", "fragmentJson", "fragmentName", "addTableColumnExtensions", "manifest", "removeElementsFromEnum", "values", "valuesToRemove", "value", "index", "__name", "addSelectionFields", "appSchema", "selectionFieldsAnnotation", "entityType", "selectionFieldsDefinition", "annotationPath", "createAnnotationPath", "i", "selectionField", "description", "fieldDefinition", "prepareRef", "dataType", "determineDataType", "getLabelForPropertyPath", "DEFINITION_LINK_PREFIX", "isDraftEnabled", "property", "addStandardHeaderActions", "isOP", "actions", "headerActionsDefinitionKey", "headerActionsKey", "actionDefinition", "headerActionsDefinition", "headerActions", "name", "definition", "actionRef", "actionKey", "addStandardFooterActionsOP", "standardActions", "action", "copyFieldProperties", "version", "appSchema", "field", "fieldDefinition", "__name", "determineFieldDefinitionName", "fieldReferenceId", "targetID", "fieldReference", "fieldReferenceType", "addKeysTagForDataField", "schemaKeyOfField", "addKeysTagToField", "replaceNamespaces", "separator", "isConnectedField", "_a", "_b", "addConnectedFields", "sectionType", "section", "target", "properties", "templateParts", "targetData", "fallbackIndex", "innerKey", "innerField", "index", "templateKey", "addField", "getFieldsSchemaContainer", "ref", "fieldsDefinition", "prepareRef", "key", "withActions", "containersSchema", "entityTypeName", "getStableIdPartFromDataField", "actionsProperties", "fieldInSchema", "DEFINITION_LINK_PREFIX", "fieldsProperties", "getDataFieldDescription", "addDataTypeToDefinition", "determineTargetIdOfForm", "addFieldsToFormDefinition", "formDefinition", "actionsDefinition", "createAnnotationPath", "addTagsToFormDefinition", "formDefinitionKey", "targetValue", "handleForm", "appSchemaSection", "facetKey", "fieldsDefinitionKey", "actionsDefinitionKey", "replaceAlias", "annotationIdentifier", "oDataServiceAVT", "potentialAlias", "result", "searchTerm", "reference", "getActionNameAndId", "item", "action", "relevantAction", "separatorIndex", "actionName", "actionId", "namespace", "isFirstObjectPage", "pages", "generateParameters", "element", "addFooterActions", "_c", "footerActions", "alias", "findAlias", "entityType", "actionAnnotation", "convertedIdentification", "description", "actionDefinitionKey", "isDraftEnabled", "addStandardFooterActionsOP", "addHeaderActions", "addHeaderActionCallBack", "isV2", "actions", "headerActions", "identification", "addStandardHeaderActions", "addCommonHeaderSchema", "determineEntitySetOfFacet", "facet", "serviceAVT", "es", "import_UI", "import_ux_specification_types", "addEnumToSchema", "enumEntries", "currentDefinition", "__name", "addEnumForValidAnnotations", "entityType", "validAnnotations", "annoPath", "_a", "UiAnnotations", "key", "annotation", "enumEntry", "addEnumForSingleTabVariant", "appSchema", "definitionName", "addEnumForMultiTabVariant", "entitySet", "addEnumForVariantEntitySet", "oDataServiceAVT", "es", "addDefinitionForRelatedFacetKeys", "sectionDefinitions", "facetSections", "idProperties", "oneOfSections", "section", "propertyName", "property", "schemaIdForSection", "label", "name", "definition", "DEFINITION_LINK_PREFIX", "getFacetKeyInSchema", "facetKey", "getFacetDefinitionKey", "parseSchemaDefinition", "useDefinitionAsKey", "subDefinitionName", "facetDefinitionKey", "schemaDefinition", "addCommonLineItemDefinitions", "lineItemAnnotation", "lineItemId", "customColumnDefinitionName", "lineItemPath", "additionalPropertiesRef", "toolBar", "schemaIdForToolBar", "schemaIdForActions", "prepareRef", "actionId", "actions", "footerActions", "schemaIdForFooter", "schemaIdForFooterActions", "createAnnotationPath", "getDataTypeFromAnnotation", "annotation", "__name", "determineDataTypeOfTarget", "target", "_a", "_b", "_c", "dataType", "determineDataType", "field", "addDataTypeToDefinition", "definition", "getFacetDefinitionLink", "facetKey", "DEFINITION_LINK_PREFIX", "getFacetDefinitionKey", "addDefinitionRef", "schemaPart", "schemaRef", "schemaKey", "schemaLink", "getFacetAnnotationPath", "facet", "namespace", "handleAddressContact", "sections", "appSchema", "sectionPrefix", "subSectionPrefix", "versionPostfix", "definitionName", "subDefinitionName", "parseSchemaDefinition", "addSectionTitleAndDescription", "updateSchemaProperty", "key", "value", "addFieldsType", "entityType", "suffix", "prepareRef", "itemsEnum", "property", "fields4Dialog", "getActionKey", "action", "isAction", "actionKey", "addKeyToDefinition", "lineItemRecord", "properties", "getStableIdPartFromValue", "ns", "replaceNamespaces", "import_ux_specification_types", "distTags", "version", "_DistTagEvaluator", "version", "result", "distTags", "specVersion", "tag", "minUI5Version", "logger", "message", "instance", "log", "actualVersion", "__name", "DistTagEvaluator", "import_ux_specification_types", "import_ux_specification_types", "import_ux_specification_types", "_AppProvider", "manifest", "schemas", "home", "pages", "version", "settings", "logger", "schemaFile", "getSchemaFilePath", "pageConfigs", "appConfig", "page", "pageId", "config", "genericSchemaFile", "app", "__name", "AppProvider", "import_ux_specification_types", "import_ux_specification_types", "addFlexForTable", "config", "change", "jsonSchema", "idParts", "annotationPart", "colId", "__name", "import_ux_specification_types", "ensureManifestSectionByPathV2", "__name", "manifest", "path", "manifestSection", "element", "getManifestSectionByPathV2", "elements", "deleteManifestSectionByPathV2", "index", "getNewPageTemplate", "pageType", "findPageInManifest", "pages", "entitySet", "navigationProperty", "pageId", "page", "transformPageFromAssociation", "configPages", "association", "manifestPage", "associatedManifestPage", "transformPageToNewManifestV2", "deletePage", "configPage", "key", "_a", "currentPage", "configKey", "import_xml_js", "controls_exports", "__export", "ALPAnalyticalTable", "ALPGridTable", "ALPResponsiveTable", "Action", "AnalyticalCard", "AnalyticalListPageFilterBar", "AnalyticalTable", "BaseCustomSection", "ChartSettings", "CommonCardSettings", "CommonTableSettings", "CreateWithFilters", "CustomCard", "DataLoadSettings", "DateRange", "FRAGMENT_DEFINITION", "Field", "FieldForAction", "Fields4Dialog", "Fields4DialogOP", "FooterAction", "FormAction", "GlobalChartSettings", "GridTable", "HeaderAction", "HeaderActionStandard", "KPISettings", "LinklistCard", "ListCard", "ListReportFilterBar", "ObjectPageAnalyticalTable", "ObjectPageChart", "ObjectPageCommonTableSettings", "ObjectPageCustomSectionFragment", "ObjectPageCustomSectionView", "ObjectPageFooterAction", "ObjectPageFooterActionStandard", "ObjectPageGridTable", "ObjectPageHeader", "ObjectPageHeaderActionStandard", "ObjectPageLayout", "ObjectPageResponsiveTable", "ObjectPageSectionAddressV2", "ObjectPageSectionChartV2", "ObjectPageSectionContactV2", "ObjectPageSectionFormV2", "ObjectPageSectionTableV2", "ObjectPageSectionV2", "ObjectPageSubSectionChartV2", "ObjectPageSubSectionContactV2", "ObjectPageSubSectionFormV2", "ObjectPageSubSectionTableV2", "ObjectPageSubSectionV2", "ObjectPageToolBarAction", "ObjectPageTreeTable", "QuickVariantSelection", "QuickVariantSelectionOP", "QuickVariantSelectionX", "ResponsiveTable", "SAP_UI_TABLE", "SaveAndEditOP", "SelectionFieldDateSettings", "SelectionFields", "Share", "ShareOP", "StackCard", "TableALP", "TableCard", "TableColumn", "TableColumnAction", "TableColumnActionIntentBased", "TableCustomColumn", "ToolBar", "ToolBarAction", "TreeTable", "UpAndDownNavigationOP", "buildIntentBasedActionId", "deleteColumnFromFragment", "deleteType", "exportCreateParametersFields", "exportCustomColumnsToFragment", "exportDateSettings", "exportDateSettingsField", "exportType", "getChartSectionControlId", "getContactSubSectionControlId", "getCustomColumnPath", "getFormSectionControlId", "getRootCustomColumnFromFragmentJSON", "getSectionControlId", "getSmartChartControlId", "getSmartTableControlId", "getSubSectionControlId", "getTableSectionControlId", "importCreateParameters", "importDateSettings", "import_ux_specification_types", "getAppSettingPathV2", "__name", "pageKeys", "getTableSettingPathV2", "getChartSettingPathV2", "getDataLoadSettingPathV2", "getOVPsettingPath", "__name", "getCardSettingsPath", "cardKey", "pathParts", "block", "getGlobalSettingsPath", "getKPISettingsPath", "pageKeys", "kpiKey", "getAppRootSettingOBJPath", "pageKey", "getAppSettingOBJPathV2", "getAppSettingOBJsectionPathV2", "_manifest", "sectionId", "manifestSectionId", "getTableSettingsOBJsectionPathV2", "getChartSettingsOBJsectionPathV2", "getViewExtensionsPath", "getObjectPageCustomSectionPath", "pageName", "separator", "sectionIdParts", "pageNameParts", "idLastPart", "customSectionId", "_ApplicationV2", "__decorateClass", "childId", "ApplicationV2", "_AppSettings", "syncRule", "validity", "AppSettings", "_CommonCardSettings", "__name", "__decorateClass", "syncRule", "cardKeys", "getCardSettingsPath", "CommonCardSettings", "_CustomCard", "CustomCard", "_ListCard", "ListCard", "_AnalyticalCard", "AnalyticalCard", "_StackCard", "StackCard", "_LinklistCard", "LinklistCard", "_TableCard", "TableCard", "import_ux_specification_types", "getSmartFieldControlId", "__name", "baseId", "_idBreadcrumbs", "breadcrumbs", "_controlType", "facetId", "convertedId", "convertSectionId", "fieldCrumb", "buildControlIdFromParent", "_Field", "__decorateClass", "syncRule", "exportToFlexChange", "addPatternForBindingChangeOfEnumOP", "Field", "import_ux_specification_types", "importDateSettings", "manifestSection", "configPart", "__name", "exportDateSettings", "key", "field", "importDateSettingsField", "_sectionId", "propertyKey", "selectionField", "section", "index", "exportDateSettingsField", "filterKey", "filterValue", "_DateRange", "__decorateClass", "syncRule", "pageKeys", "getAppSettingPathV2", "validity", "DateRange", "flexRuleForSmartFilterBar", "buildControlIdFromParent", "exportToFlexChange", "manifestRuleForSelectionField", "_manifest", "breadcrumbs", "manifestRuleForSelectionFieldWithArrays", "_SelectionFieldDateSettings", "SelectionFieldDateSettings", "_SelectionFields", "SelectionFields", "_ListReportFilterBar", "ListReportFilterBar", "_AnalyticalListPageFilterBar", "AnalyticalListPageFilterBar", "import_ux_specification_types", "getFormActionButtonId", "__name", "baseId", "idBreadcrumbs", "breadcrumbs", "controlType", "facetID", "entity", "section", "convertSectionId", "buildControlIdFromParent", "_FormAction", "__decorateClass", "syncRule", "exportToFlexChange", "addPatternForBindingChangeOfEnumOP", "validity", "FormAction", "_FieldForAction", "FieldForAction", "import_ux_specification_types", "import_xml_js", "import_path", "import_ux_specification_types", "import_ejs", "import_fs", "templatesPath", "renderTemplate", "__name", "templatePath", "templateData", "template", "getSingleColumnContent", "__name", "column", "template", "templateData", "renderTemplate", "templatesPath", "getColumnFragmentContent", "customColumns", "templateType", "fragment", "newContent", "getResponsiveTableCellsFragment", "import_path", "FRAGMENT_DEFINITION", "SAP_UI_TABLE", "VIEW_TEMPLATE_TAGTYPE_MAP", "FE_TEMPLATE_VIEW_EXTENSION_MAP", "dummyEntry", "dummyEntryAsString", "getFragmentNamespaces", "fragment", "isCoreFragmentDefinition", "fragmentAttributes", "allFragmentNamespaces", "attribute", "xmlns", "existingNamespaces", "__name", "getTagName", "tag", "fragmentNamespaces", "getTagNameFromFragmentJSON", "definition", "viewTemplateType", "namespaces", "keys", "key", "tagName", "getRootCustomColumnFromFragmentJSON", "name", "addP13nData", "configColumns", "columnIndex", "columnProperties", "p13nData", "value", "handleFragmentColumn", "columnsInFragment", "_a", "_b", "_c", "foundInConfig", "customData", "columnParts", "column", "deleteColumnsFromFragment", "manifestSection", "fragments", "pattern", "appId", "fragmentId", "fragmentType", "fragmentParts", "fragmentName", "fragmentPathArray", "fragmentJson", "deleteNumberOfCells", "fragmentCells", "noOfEntriesToBeDeleted", "index", "deleteCellsFromFragment", "cellManifestSection", "element", "deleteColumnFromFragment", "cellsPath", "addNewColumnsInFragment", "config", "startIndex", "updateNonEmptyCellsFragment", "fragmentElements", "updateCellsFragment", "cellFragmentFileName", "cellsFragmentFound", "getResponsiveTableCellsFragment", "exportCustomColumnsToManifest", "manifestPath", "exportResults", "logger", "lsFilePath", "cellsFragmentName", "manifest", "ensureManifestSectionByPathV2", "configElement", "log", "instance", "cellsFragmentColumn", "previousColumn", "deleteManifestSectionByPathV2", "insertNewColumnInFragment", "columnsInFragmentDefinition", "colPos", "newColumnFragment", "getSingleColumnContent", "newColumnDefinition", "newColumn", "col", "newColumnsInFragmentDefinition", "processCustomColumnInArray", "unexistingColumnIndicesInConfig", "j", "i", "maintainExistingColumnInFragment", "coreTagName", "insertNewColumnsInFragment", "updateColumnsInFragment", "fragmentFound", "getColumnFragmentContent", "originalFragmentJson", "fragmentContent", "exportCustomColumnsToFragment", "cellFragmentParts", "cellTemplateType", "getCustomColumnPath", "page", "entitySet", "additionalKey", "tableColumnExtensionType", "_d", "extension", "tableType", "extensionKey", "import_ux_specification_types", "getSmartTableControlId", "__name", "baseId", "idBreadcrumbs", "_breadcrumbs", "controlType", "buildControlIdFromParent", "importCreateParameters", "manifestSection", "_a", "manifestDialogFields", "configPart", "manifestField", "exportCreateParametersFields", "key", "fields", "manifestFields", "entry", "exportVariants", "configObject", "variant", "variantConfig", "tablesettings", "exportQuickVariantSelectionX", "_CreateWithFilters", "__decorateClass", "syncRule", "pageKeys", "getAppSettingPathV2", "CreateWithFilters", "importType", "exportType", "deleteType", "_DataLoadSettings", "getDataLoadSettingPathV2", "validity", "DataLoadSettings", "_Fields4Dialog", "getTableSettingPathV2", "Fields4Dialog", "_QuickVariantSelection", "QuickVariantSelection", "_QuickVariantSelectionX", "QuickVariantSelectionX", "_CommonTableSettings", "exportToFlexChange", "childId", "CommonTableSettings", "_ResponsiveTable", "addPatternForBindingChangeOfEnumLR", "ResponsiveTable", "_TreeTable", "TreeTable", "_AnalyticalTable", "AnalyticalTable", "_TableALP", "TableALP", "_ALPResponsiveTable", "ALPResponsiveTable", "_ALPGridTable", "ALPGridTable", "_ALPAnalyticalTable", "ALPAnalyticalTable", "_GridTable", "GridTable", "import_ux_specification_types", "getActionButtonId", "__name", "baseId", "_idBreadcrumbs", "breadcrumbs", "actionId", "getActionBreadcrumbParts", "convertActionKeyToStableId", "getStandardActionButtonId", "getStandardFooterActionOPButtonId", "OP_STANDARD_FOOTER_ACTION_PREFIX", "buildIntentBasedActionId", "semanticObjectId", "getFooterActionButtonId", "flexRuleForAction", "exportToFlexChange", "flexRuleForStandardAction", "flexRuleForStandardFooterActionOP", "flexRuleForFooterAction", "_Action", "__decorateClass", "syncRule", "Action", "_ToolBarAction", "ToolBarAction", "_FooterAction", "FooterAction", "_Share", "Share", "_ShareOP", "ShareOP", "_UpAndDownNavigationOP", "UpAndDownNavigationOP", "_SaveAndEditOP", "addPatternForBindingChangeOfEnumOP", "SaveAndEditOP", "_HeaderActionStandard", "HeaderActionStandard", "_ObjectPageHeaderActionStandard", "ObjectPageHeaderActionStandard", "_ObjectPageFooterActionStandard", "ObjectPageFooterActionStandard", "import_ux_specification_types", "buildColumnActionId", "__name", "baseId", "idBreadcrumbs", "breadcrumbs", "columnTemplate", "actionType", "actionId", "getActionBreadcrumbParts", "smartTableId", "buildColumnIntentBasedId", "semanticObjectId", "buildColumnActionButtonId", "_idBreadcrumbs", "flexRuleForColumn", "exportToFlexChange", "flexRuleForColumnAction", "flexRuleForColumnIntentBased", "flexRuleForColumnIntentBasedAction", "buildIntentBasedActionId", "_TableColumn", "__decorateClass", "syncRule", "buildColumnControlId", "addPatternForBindingChangeOfEnumLR", "TableColumn", "_TableColumnAction", "TableColumnAction", "_TableColumnActionIntentBased", "TableColumnActionIntentBased", "_TableCustomColumn", "TableCustomColumn", "_ToolBar", "__name", "ToolBar", "import_ux_specification_types", "getSmartChartControlId", "__name", "baseId", "_ChartSettings", "__decorateClass", "syncRule", "exportToFlexChange", "flexChange", "configObject", "key", "pageKeys", "getChartSettingPathV2", "validity", "ChartSettings", "_KPISettings", "__name", "__decorateClass", "syncRule", "pageKeys", "_manifest", "KPIKey", "getKPISettingsPath", "KPISettings", "import_ux_specification_types", "getAvatarControlId", "__name", "baseId", "idBreadcrumbs", "idBreadcrumbsCopy", "buildControlIdFromParent", "_ObjectPageHeader", "__decorateClass", "syncRule", "pageKeys", "getAppSettingOBJPathV2", "validity", "exportToFlexChange", "addPatternForBindingChangeOfEnumOP", "ObjectPageHeader", "import_ux_specification_types", "getActionButtonId", "__name", "baseId", "idBreadcrumbs", "breadcrumbs", "controlType", "actionId", "convertActionKeyToStableId", "buildControlIdFromParent", "flexRuleForHeaderAction", "exportToFlexChange", "_HeaderAction", "__decorateClass", "syncRule", "addPatternForBindingChangeOfEnumOP", "HeaderAction", "import_ux_specification_types", "getFooterActionButtonId", "__name", "baseId", "idBreadcrumbs", "breadcrumbs", "controlType", "actionId", "getActionBreadcrumbParts", "convertActionKeyToStableId", "buildControlIdFromParent", "flexRuleForFooterAction", "exportToFlexChange", "_ObjectPageFooterAction", "__decorateClass", "syncRule", "addPatternForBindingChangeOfEnumOP", "ObjectPageFooterAction", "import_ux_specification_types", "getControlId", "__name", "baseId", "idBreadcrumbs", "idBreadcrumbsCopy", "buildControlIdFromParent", "_ObjectPageLayout", "__decorateClass", "syncRule", "exportToFlexChange", "addPatternForBindingChangeOfEnumOP", "validity", "ObjectPageLayout", "import_ux_specification_types", "_BaseCustomSection", "__name", "__decorateClass", "syncRule", "getObjectPageCustomSectionPath", "_manifest", "sectionId", "validity", "entitySet", "BaseCustomSection", "_ObjectPageCustomSectionFragment", "ObjectPageCustomSectionFragment", "_ObjectPageCustomSectionView", "ObjectPageCustomSectionView", "import_ux_specification_types", "getTableSectionControlId", "__name", "baseId", "_idBreadcrumbs", "breadcrumbs", "_controlType", "facetId", "breadcrumbsTrail", "convertSectionId", "buildControlIdFromParent", "getFormSectionControlId", "getChartSectionControlId", "facetID", "getSectionControlId", "getSubSectionControlId", "getContactSubSectionControlId", "_ObjectPageSectionV2", "__decorateClass", "syncRule", "exportToFlexChange", "addPatternForBindingChangeOfEnumOP", "ObjectPageSectionV2", "_ObjectPageSectionFormV2", "ObjectPageSectionFormV2", "_ObjectPageSectionChartV2", "ObjectPageSectionChartV2", "_ObjectPageSectionTableV2", "ObjectPageSectionTableV2", "_ObjectPageSectionAddressV2", "ObjectPageSectionAddressV2", "_ObjectPageSectionContactV2", "ObjectPageSectionContactV2", "_ObjectPageSubSectionV2", "ObjectPageSubSectionV2", "_ObjectPageSubSectionFormV2", "ObjectPageSubSectionFormV2", "_ObjectPageSubSectionChartV2", "ObjectPageSubSectionChartV2", "_ObjectPageSubSectionContactV2", "ObjectPageSubSectionContactV2", "_ObjectPageSubSectionTableV2", "ObjectPageSubSectionTableV2", "_ObjectPageChart", "__name", "__decorateClass", "syncRule", "getChartSettingsOBJsectionPathV2", "validity", "ObjectPageChart", "_GlobalChartSettings", "pageKeys", "getAppSettingOBJPathV2", "GlobalChartSettings", "import_ux_specification_types", "getSmartTableControlId", "__name", "baseId", "_idBreadcrumbs", "breadcrumbs", "controlType", "title", "breadCrumbsCopy", "suffixId", "convertSectionId", "buildControlIdFromParent", "_QuickVariantSelectionOP", "__decorateClass", "syncRule", "pageKeys", "manifest", "sectionId", "getAppSettingOBJsectionPathV2", "validity", "QuickVariantSelectionOP", "_Fields4DialogOP", "getTableSettingsOBJsectionPathV2", "exportCreateParametersFields", "Fields4DialogOP", "_ObjectPageCommonTableSettings", "importCreateParameters", "exportToFlexChange", "childId", "ObjectPageCommonTableSettings", "_ObjectPageResponsiveTable", "addPatternForBindingChangeOfEnumOP", "ObjectPageResponsiveTable", "_ObjectPageAnalyticalTable", "ObjectPageAnalyticalTable", "_ObjectPageGridTable", "ObjectPageGridTable", "_ObjectPageTreeTable", "ObjectPageTreeTable", "import_ux_specification_types", "getActionButtonId", "__name", "baseId", "_idBreadcrumbs", "breadcrumbs", "_controlType", "facetID", "actionId", "getActionBreadcrumbParts", "section", "convertSectionId", "convertActionKeyToStableId", "flexRuleForToolBarActionOP", "exportToFlexChange", "_ObjectPageToolBarAction", "__decorateClass", "syncRule", "addPatternForBindingChangeOfEnumOP", "ObjectPageToolBarAction", "convertActionKey", "actionProperty", "__name", "convertSelector", "selectorId", "addSmartFilterBarFlex", "config", "changePropertyKey", "change", "jsonSchema", "_a", "_b", "_c", "_d", "filterActions", "definitionType", "actions", "definition", "actionMap", "definitionActionId", "fullActionId", "convertActionKeyToStableId", "splitPoint", "actionIdParts", "sSemanticObject", "part", "sAction", "shortAction", "shortActionId", "shortDefinitionActionId", "addColumnActionConfigPart", "action", "configId", "getActionId", "addActionFlex", "id", "schemaActions", "referenceId", "configPart", "addSmartChartFlex", "syncRule", "getReflectMetadata", "addAdditionalFlexChanges", "flexForTransfer", "constructorName", "addFlexForTable", "addFlex", "changeString", "appSchema", "logger", "parseChangeString", "actionId", "error", "log", "instance", "adjustQuickVariantSelectionX", "propertyKey", "variant", "currentQuickVariantX", "key", "transferSettingsOfObject", "manifest", "pageKey", "kpiKey", "manifestSection", "deprecatedProperties", "path", "ensureManifestSectionByPathV2", "importProperty", "checkDeprecatedProperties", "determineTableType", "_e", "_f", "_g", "_h", "_i", "page", "tableType", "evaluateFragmentColumn", "column", "viewExtensionsOfPage", "manifestKey", "keyPart3", "extensionType", "cellsFragmentName", "p13nData", "columnParts", "columnText", "customElement", "determineCellsFragmentName", "keyEntitySet", "cellsKey", "cellsKeyType", "cellsKeyEntitySet", "cellsKeyTab", "analyzeFilteredFragments", "filteredFragments", "keyTab", "fragmentDefintion", "FRAGMENT_DEFINITION", "columnDefinition", "getRootCustomColumnFromFragmentJSON", "def", "processViewExtensions", "targetKeyEntitySet", "objectPageSectionData", "fragments", "manifestKeyParts", "keyExtensionType", "fragmentType", "fragmentName", "fragmentParts", "fragment", "addFragments", "v2Page", "pageType", "viewExtension", "importHeaderActions", "listReportConfig", "factory", "schemaDefinitions", "headerActions", "actionKey", "import_ux_specification_types", "import_ux_specification_types", "i18n_exports", "__export", "ANNOERR", "ANNOTATIONFILE", "COMPONENTNOTDEFINED", "CONTEXTPATHCOULDNOTBERESOLVED", "ENTITYSETNOTFOUND", "FLEXERROR", "INVALIDANCHOR", "INVALIDTARGETDEFINITION", "NOALP", "NOBASEPATH", "NOENTITYSET", "NOENTITYTYPE4SET", "NOFE", "NOFRAGMENT", "NOGENERICSCHEMA", "NOID4SECTION", "NOLINEITEMS", "NOLR", "NOPAGEFORENTITYSET", "NOPAGES", "NOPRESENTATIONVARIANT", "NOROUTING", "NOROUTINGID", "NOTARGET", "NOTARGETS", "NOTEMPLATE", "UNKNOWNMINUI5VERSION", "WRONGMINUI5VERSION", "XMLPARSEFAILURE", "i18n_default", "initI18n", "i18nInstance", "i18n_exports", "__name", "initI18n", "language", "instance", "i18nEn", "__name", "import_ux_specification_types", "findObjectPageV2", "v2Pages", "entitySet", "pageKeys", "_a", "foundPage", "key", "v2Page", "getPageTypeV2", "__name", "findListReportPageV2", "getV2Pages", "importParameters", "log", "instance", "checkV2Page", "logger", "pageName", "findAnalyticalListPage", "isAssociatedCustomSection", "extensionKey", "entity", "keyParts", "findCustomSectionExtensions", "manifest", "customSectionViews", "ensureManifestSectionByPathV2", "pageCustomSections", "removeEmptySettingsOfFooter", "config", "actionKey", "removeEmptySettingsOfFilterBar", "_b", "_c", "fieldKey", "removeEmptySettingsOfToolBar", "removeEmptySettings", "pages_exports", "__export", "AnalyticalListPage", "ListReport", "ObjectPage", "OverviewPage", "exportFilterSettings", "importDateSettingsOVP", "importFilterSettings", "import_ux_specification_types", "AnalyticalListPage", "__name", "__decorateClass", "syncRule", "buildControlIdForPage", "exportToFlexChange", "childId", "pageLayoutInformation", "import_ux_specification_types", "ListReport", "__name", "__decorateClass", "syncRule", "buildControlIdForPage", "exportToFlexChange", "childId", "pageLayoutInformation", "import_ux_specification_types", "ObjectPage", "__name", "__decorateClass", "syncRule", "pageKeys", "getAppSettingOBJPathV2", "validity", "childId", "getAppRootSettingOBJPath", "value", "pageLayoutInformation", "importDateSettingsFieldsOVP", "manifestSection", "configPart", "propertyKey", "selectedValues", "filterKey", "filterValue", "__name", "importDateSettingsOVP", "importFilterSettings", "exportFilterFields", "key", "fieldName", "field", "exportFilterSettings", "OverviewPage", "__decorateClass", "syncRule", "getOVPsettingPath", "cardKeys", "getGlobalSettingsPath", "validity", "pageLayoutInformation", "_MetadataFactory", "controls", "pages", "pageTypes", "pageType", "schemaPropertyName", "data", "controlPropertyValue", "metadataClass", "__name", "MetadataFactory", "import_ux_specification_types", "ALPElements", "LRElements", "ResponsiveTable", "OVPElements", "ListCard", "AnalyticalCard", "StackCard", "LinklistCard", "TableCard", "OPElements", "ObjectPageCustomSectionView", "ObjectPageCustomSectionFragment", "ObjectPageResponsiveTable", "pageTypes", "_MetadataInstanceFactoryV2", "MetadataFactory", "controls_exports", "pages_exports", "__name", "MetadataInstanceFactoryV2", "importFilterBar", "listReportConfig", "factory", "importParameters", "schemaDefinitions", "pageKey", "transferSettingsOfObject", "schemaSelectionFields", "selectionProperty", "selectionKey", "__name", "importTable", "tableType", "_a", "localJsonSchema", "MULTISELECTTABLE", "INLINEDELETETABLE", "item", "log", "instance", "addSettings", "determineTableType", "importHeaderActions", "actionProperty", "actionKey", "convertActionKey", "footerAction", "createListReportConfig", "initI18n", "getV2Pages", "MetadataInstanceFactoryV2", "config", "pageKeys", "v2Page", "findListReportPageV2", "checkV2Page", "change", "parseChangeString", "addFlex", "addFragments", "removeEmptySettings", "import_ux_specification_types", "addSettings", "importParameters", "analyticalListPageConfig", "factory", "pageKey", "_a", "_b", "tableType", "determineTableType", "schemaDefinitions", "importHeaderActions", "transferSettingsOfObject", "actionProperty", "actionKey", "convertActionKey", "schemaSelectionFields", "selectionProperty", "selectionKey", "footerAction", "kpiCards", "kpiKey", "__name", "createAnalyticalListPageConfig", "initI18n", "getV2Pages", "MetadataInstanceFactoryV2", "config", "pageKeys", "v2Page", "findAnalyticalListPage", "checkV2Page", "change", "parseChangeString", "addFlex", "addFragments", "removeEmptySettings", "import_ux_specification_types", "import_UI", "SupportedFlexChangesWithoutFacetId", "getSingleSelectorIdPart", "selectorIdParts", "facetID", "lastIdParts", "id", "idParts", "__name", "getFacetID", "selectorId", "element", "prepareFlexChanges", "changes", "entitySet", "logger", "result", "complexIdMatch", "changeString", "_a", "_b", "_c", "change", "parseChangeString", "changeId", "convertSelector", "error", "log", "instance", "a", "b", "accum", "k", "v", "getSectionType", "schemaSection", "reference", "DEFINITION_LINK_PREFIX", "importFlexChangesOfTable", "flexChanges", "propertyKey", "configPart", "importParameters", "sectionTitle", "sectionId", "facetIds", "selector", "flexChange", "propertyIdMatch", "isTableColumn", "addFlexForTable", "isStandardActionFlexChange", "controlIdMatch", "matchSelector", "schemaDefinition", "controlIdChecker", "selectionIdChecker", "controlId", "idMatch", "idElementChecker", "arr", "target", "controlIdParts", "importFlexChanges", "elementId", "checkDeprecatedProperties", "manifestSection", "deprecatedProperties", "manifestPath", "key", "deprecated", "getTextForDeprecated", "importManifestSetting", "syncRule", "pageKeys", "sectionPart", "sectionIdInManifest", "ensureManifestSectionByPathV2", "importHandler", "value", "manifestKey", "transferSettingsAndFlexChanges", "configParameters", "getReflectMetadata", "facetId", "getActionId", "actionType", "configActionId", "importTypeId", "actionId", "convertActionKeyToStableId", "OP_STANDARD_HEADER_ACTION_PREFIX", "OP_STANDARD_FOOTER_ACTION_PREFIX", "fillStandardActions", "config", "actions", "action", "actionRef", "fillActions", "actionProperties", "actionProperty", "convertActionKey", "fillFields", "fieldProperties", "fieldId", "fieldProperty", "prepareTableSchema", "tableType", "schemaDefinitions", "tableSchema", "fillTableInConfig", "manifestSettings", "OPtable", "toolBarActions", "fillCustomColumnsInConfig", "escapedSectionId", "v2Page", "customColumnSchemaProp", "customColumnTarget", "getTargetFromCustomColumnRef", "objectPageSectionData", "addFragments", "fillChartSection", "fillFormSection", "formId", "formActions", "formFields", "fillSubSection", "currentSchemaSection", "schemaProperties", "fillSectionsInConfig", "sectionProperties", "appSchemaDefinitions", "getSectionTitle", "fillCustomSectionsInConfig", "customSections", "objectPageConfig", "customSection", "customSectionDefinition", "fillConfig", "definitions", "headerAction", "footerAction", "sections", "findCustomSectionExtensions", "createObjectPageConfigV2", "initI18n", "v2Pages", "getV2Pages", "findObjectPageV2", "checkV2Page", "flexChangesForTransfer", "factory", "MetadataInstanceFactoryV2", "generateId", "page", "pageName", "_a", "_b", "generatePageId", "getPageTypeV2", "__name", "getPageConfigsAndNavigations", "v2Page", "flex", "manifest", "schemas", "fragments", "pages", "targets", "getPagesAndConfigs", "pageId", "target", "v2ChildPageName", "id", "v2Pages", "logger", "v2PageName", "schemaKey", "element", "importParameters", "createListReportConfig", "createAnalyticalListPageConfig", "createObjectPageConfigV2", "_V2AppProvider", "AppProvider", "initI18n", "log", "instance", "pageKey", "appSettings", "AppSettings", "schemaFile", "getSchemaFilePath", "appSchema", "transferSettingsOfObject", "V2AppProvider", "getPages", "componentName", "subPages", "subPageId", "import_ux_specification_types", "import_ux_specification_types", "import_deepmerge", "import_ux_specification_types", "exceptionList", "createCard", "key", "ovp", "__name", "findAvailableId", "sectionIds", "candidateId", "idParts", "transferManifestEntriesOVP", "configObject", "exportResults", "jsonSchema", "targetDefinition", "factory", "pathHierarchy", "processProperties", "assignReflectMetadataRules", "structureName", "currentObject", "defaultTypeName", "processAnyOfDefinitionsOfOVP", "params", "newConfigObject", "anyOfKey", "definitionArray", "DEFINITION_LINK_PREFIX", "nextTargetDefinition", "cardSettingsType", "checkSyncRuleForExport", "exportHandler", "manifestSection", "merge", "arrayCombineMerge", "transferToManifest", "syncRule", "path", "ensureManifestSectionByPathV2", "transferCards", "appSchema", "cardKey", "cardType", "definition", "_a", "template", "manifestCard", "exportOfObject", "propertyList", "isAnyOfObject", "isObjectProperty", "getReflectMetadata", "processDefinitionParams", "evaluateFlexRule", "transferParameters", "breadcrumbs", "ids", "title", "localBreadcrumbs", "controlId", "flexChange", "fillFlexChangeContent", "localManifest", "completeFlexChange", "change", "result", "oldChange", "newChange", "exportConfigValue", "manifestKey", "evaluateManifestRule", "deleteHandler", "deleteEmptyStructure", "getManifestPathOfSections", "getManifestPathOfTable", "getManifestPath", "evaluateExportRule", "index", "deleteObsoleteColumn", "columnParams", "keyParts", "keyEntitySet", "keyTab", "existingConfigEntries", "column", "deleteColumnFromFragment", "cellsPattern", "deleteObsoleteColumnsFromFragment", "folderPath", "getManifestSectionByPathV2", "extensionPattern", "clusterConfigColumnsByPath", "customColumnsInConfig", "schemaDefinition", "v2Page", "entitySet", "sectionKey", "cluster", "customColumn", "viewTemplateType", "getCustomColumnPath", "transferColumnExtensions", "objectPageSectionData", "extensionType", "columParams", "exportCustomColumnsToFragment", "transferManifestExtensions", "configSections", "pageKey", "parentIds", "entity", "section", "id", "element", "transferManifestEntriesAndFlexChange", "manifestSections", "getViewExtensionsPath", "isAssociatedCustomSection", "getSectionId", "sectionId", "i", "convertSectionId", "transferIndexTable", "currentConfigObject", "propertyDefinition", "newKey", "nextDefinition", "getNextTargetDefinition", "transferCustomColumns", "target", "getTargetFromCustomColumnRef", "handleAnyOfDefinitions", "transferComplexProperty", "propertyKey", "childId", "getChildId", "transferCardSettings", "propertyKey", "manifestSection", "configPart", "pathHierarchy", "__name", "transferSettingsOfObject", "manifest", "appSchema", "syncRule", "getReflectMetadata", "path", "ensureManifestSectionByPathV2", "importProperty", "addSettings", "pageConfig", "factory", "newKey", "cardTemplate", "cardType", "assignReflectMetadataRules", "createOverviewPageConfig", "importParameters", "MetadataInstanceFactoryV2", "config", "_V2OvpProvider", "AppProvider", "importParameters", "pages", "sapOvp", "appSettings", "AppSettings", "schemaFile", "getSchemaFilePath", "transferSettingsOfObject", "jsonSchema", "element", "parameters", "page", "createOverviewPageConfig", "id", "generatePageId", "__name", "V2OvpProvider", "import_UI", "import_ux_specification_types", "addActionRecordToSchema", "data", "actionsDefinition", "lineItemPath", "lineItemRecord", "recordIndex", "actionDefinitionName", "actionId", "description", "getDataFieldDescription", "prefix", "propertyKey", "replaceSpecialChars", "actionDefinition", "getFacetDefinitionLink", "prepareRef", "key", "ns", "getActionKey", "determineDataType", "action", "parseSchemaDefinition", "__name", "addLineItemRecordToSchema", "lineItem", "columnDefinitionName", "_a", "lineItemId", "regex", "findAlias", "schemaKey", "getStableIdPartFromDataField", "properties", "DEFINITION_LINK_PREFIX", "addKeyToDefinition", "addLineItemsTypeToSchema", "actions", "addCommonLineItemDefinitions", "columnDefinition", "findPageV4", "pages", "pageName", "entitySet", "logger", "_b", "v4Page", "i", "alignSchemaWithTemplateType", "appSchema", "generateParameters", "tableDefinitionName", "tableDefinition", "import_ux_specification_types", "import_UI", "ROOT_PROPERTIES_ORDER", "addSelectionFields", "entityType", "appSchema", "selectionFieldsAnnotation", "selectionFieldsDefinition", "createAnnotationPath", "selectionField", "_a", "_b", "description", "fieldDefinition", "prepareRef", "getLabelForPropertyPath", "DEFINITION_LINK_PREFIX", "dataType", "determineDataType", "__name", "defineActions", "schemaIdForActions", "annotations", "targetAnnotation", "actions", "chartAnnotation", "i", "actionRecord", "actionDefinition", "getDataFieldDescription", "prefix", "action", "findTheRightVisualization", "allVisualizations", "namespace", "viewKey", "visualizationType", "visualization", "visualizationObject", "vis", "v", "replaceNamespaces", "analyzeChartAnnotation", "annotationPath", "annotationAVT", "targetAnnotationFullName", "chartTitle", "analyzeViewAnnotation", "uIAnnotations", "generateParameters", "title", "UILINEITEM", "annotationInManifest", "addALPChartView", "chartAnnotationPath", "chartView", "viewAnnotation", "pathParts", "addALPViews", "viewsPaths", "templateAnnotation", "tableDefinitionName", "_c", "_d", "_e", "_f", "tableVisualization", "target", "tableDefinition", "tableView", "annotationTerm", "dataForLineItem", "addLineItemsTypeToSchema", "addViewChartDefinitions", "inputParameters", "idForChart", "idForToolbar", "addViewChart", "UIAnnotations", "viewsDefinition", "titleOnHover", "createEmptyProperties", "definition", "addViewLineItems", "tableId", "viewId", "lrTableView", "parseSchemaDefinition", "addDefinitionRef", "columnDefinitionName", "definitions", "originalReference", "actionRef", "originalActionRef", "addTagsToView", "view", "getTargetEntityType", "entitySet", "targetEntityType", "viewEntitySet", "es", "handleViewProperties", "validProperties", "properties", "addLRViewParts", "commonInputParameters", "v4Page", "uiAnnotations", "addLRViews", "navPropName", "np", "adaptTableDefinition", "alias", "annotationTermInSchema", "spvTable", "lineItemAnnotation", "log", "instance", "term", "getDefaultAnnotationPath", "templateType", "_g", "addTableAndViews", "defaultAnnotation", "alignSchemaWithTemplateType", "generateListReportSchemaV4", "genericSchema", "templateName", "findAlias", "selectionFieldAnnotation", "addEnumForSingleTabVariant", "pages", "findPageV4", "updatePropertyIndices", "import_UI", "import_ux_specification_types", "ROOT_PROPERTIES_ORDER", "addHeaderActionCallBackV4", "entityType", "appSchema", "actionAnnotation", "headerActions", "oDataServiceAVT", "item", "index", "actionName", "actionId", "namespace", "getActionNameAndId", "stableId", "getStableIdPartFromDataField", "convertedIdentification", "actionDefinitionKey", "prepareRef", "headerAction", "determineDataType", "DEFINITION_LINK_PREFIX", "__name", "handleLineItem", "facet", "facetKey", "lineItemFacet", "lineItemId", "getFacetKeyInSchema", "annotation", "tableDefinition", "parseSchemaDefinition", "getFacetDefinitionLink", "tableQVS", "addEnumForSingleTabVariant", "dataForLineItem", "addLineItemsTypeToSchema", "handleSectionTable", "generateParameters", "sections", "sectionTable", "addSectionTitleAndDescription", "table", "handleFormIdentification", "sectionPrefix", "definitionType", "formSection", "handleForm", "handleHeaderFacet", "facetDefinitionKey", "sectionFacet", "addTargetTitleAndSectionDescription", "determineDataTypeOfTarget", "handleChartActions", "actions", "i", "actionRecord", "description", "getDataFieldDescription", "prefix", "toolBarActionsProperty", "toolBarAction", "getFacetAnnotationPath", "handleChart", "chart", "chartToolBar", "chartActions", "handleSectionChart", "sectionChart", "handleSectionPresentationVariant", "_a", "_b", "facetTarget", "visualizationKey", "target", "log", "instance", "visualizations", "navPath", "replaceAlias", "targetType", "prop", "visualization", "visualizationType", "fullVisualizationKey", "addSection", "facets", "v4Page", "handleCollection", "handleAddressContact", "createDefaultSection", "collectionFacet", "subSections", "key", "addSections", "getObjectPageFacets", "addHeaderSections", "getObjectPageHeaderFacets", "addRelatedFacetKeysType", "schema", "entitySetName", "pages", "element", "_c", "_d", "facetSections", "getObjectPageFacetSection", "customSections", "customSection", "section", "addDefinitionForRelatedFacetKeys", "addHeader", "addCommonHeaderSchema", "addHeaderActions", "generateObjectPageSchemaV4", "genericSchema", "entitySet", "findPageV4", "addFooterActions", "updatePropertyIndices", "generateFreestyleSchemaV4", "_generateParameters", "genericSchema", "__name", "import_ux_specification_types", "generateObjectPageInterfaceV4", "genericSchema", "entitySetName", "annotations", "manifest", "logger", "fragments", "serviceAVT", "parseAndMergeAndConvert", "generateParameters", "entitySet", "getEntitySetByEntitySetName", "log", "instance", "generateObjectPageSchemaV4", "__name", "generateListReportInterfaceV4", "templateType", "initI18n", "es", "templateName", "generateListReportSchemaV4", "generateFreestyleInterfaceV4", "generateFreestyleSchemaV4", "import_UI", "import_ux_specification_types", "getSettingsPathForPage", "__name", "pageName", "getSettingsPathForLRViewsPaths", "getSettingsPathForHeaderOP", "getControlConfigurationPath", "getHeaderFacetSettingPath", "_manifest", "sectionId", "getTableSettingsPathForView", "_targetAnnotationEncoded", "_viewKey", "targetAnnotation", "annotationEncoded", "getTableSettingsPathForLR", "manifest", "targetAnnotationEncoded", "columnKey", "getQuickVariantPath", "getColumnsPathForView", "getColumnsPathForLR", "getActionsPathForView", "getActionsPathForLR", "getColumnsPathForOP", "getActionsPathForOP", "getTableSettingsPathForOP", "getCustomSectionPath", "pathPart", "path", "_ApplicationV4", "__decorateClass", "childId", "ApplicationV4", "_AppSettings", "syncRule", "validity", "AppSettings", "import_ux_specification_types", "importSettingsOfObject", "configPart", "manifest", "appSchema", "pageKey", "breadcrumbs", "sectionId", "logger", "manifestSection", "deprecatedProperties", "targetAnnotationEncoded", "propertyKey", "syncRule", "getReflectMetadata", "path", "getManifestSectionByPathV4", "importProperty", "checkDeprecatedProperties", "__name", "controls_exports", "__export", "ALPChart", "ALPTable", "ActionAfterExecutionConfiguration", "ActionAfterExecutionConfigurationOP", "Actions", "CommonHeaderFacetSettings", "CommonViewSettings", "FilterBar", "FlexSettings", "HeaderSections", "LRChartView", "LRTableView", "MultiTableModeV4", "ObjectPageCustomSectionFragment", "ObjectPageHeader", "ObjectPageHeaderSectionAddress", "ObjectPageHeaderSectionChart", "ObjectPageHeaderSectionContact", "ObjectPageHeaderSectionDataPoint", "ObjectPageHeaderSectionForm", "ObjectPageLayout", "ObjectPageTable", "ObjectPageTableColumn", "ObjectPageTableColumnAction", "ObjectPageToolBarAction", "Position", "QuickVariantSelectionV4", "QuickVariantSelectionV4OP", "Table", "TableColumn", "TableColumnAction", "TableCreationModeOP", "TableCustomColumn", "TableSettings", "TableViewExtension", "TableViewSettings", "ToolBar", "ToolBarAction", "ViewPosition", "ViewTableColumn", "ViewTableColumnAction", "ViewTableCustomColumn", "ViewToolBarAction", "checkViewOrder", "deleteCreationModeCreateAtEnd", "deleteCreationModeName", "exportCreationModeCreateAtEnd", "exportCreationModeName", "exportPersonalization", "exportPersonalizationProperty", "import_ux_specification_types", "getManifestSectionByPathV4", "__name", "manifest", "path", "manifestSection", "element", "getSettingsPathForLRViewsPath", "pageName", "_targetAnnotationEncoded", "viewKey", "_targetAnnotation", "configObject", "viewsPath", "getSettingsPathForLRViewsPaths", "index", "view", "exportCreationModeName", "key", "manifestKey", "fillNewlyOrderedViews", "keyInConfig", "newIndex", "minIndex", "maxIndex", "direction", "newlyOrderedViews", "viewKeys", "indexInManifest", "checkViewOrder", "oldIndex", "exportPersonalization", "exportPersonalizationProperty", "deleteCreationModeName", "deleteView", "_configPropertyKey", "_manifestKey", "syncRuleKey", "config", "deletedViewIndex", "viewsInManifest", "viewsInConfig", "doNotDelete", "exportCreationModeCreateAtEnd", "deleteCreationModeCreateAtEnd", "determineIndexOfView", "_sectionId", "_propertyKey", "breadcrumbs", "viewIndex", "_QuickVariantSelectionV4", "__decorateClass", "syncRule", "getQuickVariantPath", "QuickVariantSelectionV4", "_TableSettings", "getTableSettingsPathForLR", "validity", "TableSettings", "_ALPChart", "entitySet", "getSettingsPathForPage", "ALPChart", "_CommonViewSettings", "CommonViewSettings", "_TableViewSettings", "getTableSettingsPathForView", "TableViewSettings", "getTableViewSettings", "SuperClass", "_ALPTable", "ALPTable", "_LRChartView", "addPatternForBindingChangeOfEnumLR", "LRChartView", "_LRTableView", "LRTableView", "_TableViewExtension", "TableViewExtension", "_MultiTableModeV4", "MultiTableModeV4", "_Table", "Table", "_ActionAfterExecutionConfiguration", "__name", "__decorateClass", "syncRule", "pageName", "manifest", "sectionId", "columnKey", "targetAnnotation", "getColumnsPathForLR", "ActionAfterExecutionConfiguration", "_TableColumn", "validity", "TableColumn", "_ViewTableColumn", "getColumnsPathForView", "ViewTableColumn", "_TableColumnAction", "TableColumnAction", "_ViewTableColumnAction", "ViewTableColumnAction", "_Position", "Position", "_ViewPosition", "ViewPosition", "_TableCustomColumn", "TableCustomColumn", "_ViewTableCustomColumn", "ViewTableCustomColumn", "_Actions", "__name", "Actions", "_ToolBar", "ToolBar", "_ToolBarAction", "__name", "__decorateClass", "syncRule", "getActionsPathForLR", "ToolBarAction", "_ViewToolBarAction", "getActionsPathForView", "ViewToolBarAction", "_ObjectPageToolBarAction", "__name", "__decorateClass", "syncRule", "getActionsPathForOP", "ObjectPageToolBarAction", "_FilterBar", "__name", "__decorateClass", "syncRule", "entitySet", "getSettingsPathForPage", "validity", "FilterBar", "_ActionAfterExecutionConfigurationOP", "__name", "__decorateClass", "syncRule", "pageName", "manifest", "sectionId", "columnKey", "getColumnsPathForOP", "ActionAfterExecutionConfigurationOP", "_ObjectPageTableColumn", "validity", "ObjectPageTableColumn", "_ObjectPageTableColumnAction", "ObjectPageTableColumnAction", "_ObjectPageHeader", "__name", "__decorateClass", "syncRule", "entitySet", "getSettingsPathForPage", "validity", "getSettingsPathForHeaderOP", "ObjectPageHeader", "_FlexSettings", "__name", "__decorateClass", "syncRule", "pageName", "manifest", "sectionId", "getHeaderFacetSettingPath", "validity", "FlexSettings", "_CommonHeaderFacetSettings", "CommonHeaderFacetSettings", "_ObjectPageHeaderSectionForm", "ObjectPageHeaderSectionForm", "_ObjectPageHeaderSectionChart", "ObjectPageHeaderSectionChart", "_ObjectPageHeaderSectionDataPoint", "ObjectPageHeaderSectionDataPoint", "_ObjectPageHeaderSectionContact", "ObjectPageHeaderSectionContact", "_ObjectPageHeaderSectionAddress", "ObjectPageHeaderSectionAddress", "_HeaderSections", "HeaderSections", "_ObjectPageLayout", "__name", "__decorateClass", "syncRule", "entitySet", "getSettingsPathForPage", "validity", "ObjectPageLayout", "import_ux_specification_types", "_TableCreationModeOP", "__name", "__decorateClass", "syncRule", "pageName", "manifest", "sectionId", "getTableSettingsPathForOP", "manifestSection", "configObject", "key", "manifestKey", "exportCreationModeName", "_configObject", "_key", "deleteCreationModeName", "exportCreationModeCreateAtEnd", "deleteCreationModeCreateAtEnd", "TableCreationModeOP", "_QuickVariantSelectionV4OP", "QuickVariantSelectionV4OP", "_ObjectPageTable", "validity", "tableSettings", "value", "ObjectPageTable", "import_ux_specification_types", "_ObjectPageCustomSectionFragment", "__name", "__decorateClass", "syncRule", "entitySet", "manifest", "sectionId", "getCustomSectionPath", "validity", "_manifest", "object", "type", "ObjectPageCustomSectionFragment", "pages_exports", "__export", "FreestylePage", "ListReport", "ObjectPage", "deleteAllALPViews", "manifestSection", "_a", "_b", "_c", "_d", "key", "__name", "doNotExport", "doNotImport", "ListReport", "__decorateClass", "syncRule", "entitySet", "getSettingsPathForPage", "validity", "childId", "pageLayoutInformation", "import_ux_specification_types", "ObjectPage", "__name", "__decorateClass", "childId", "syncRule", "entitySet", "getSettingsPathForPage", "validity", "pageLayoutInformation", "_FreestylePage", "__name", "FreestylePage", "import_ux_specification_types", "ALPElements", "LRElements", "OPElements", "ObjectPageTable", "ObjectPageTableColumn", "ObjectPageCustomSectionFragment", "ActionAfterExecutionConfigurationOP", "pageTypes", "_MetadataInstanceFactoryV4", "MetadataFactory", "controls_exports", "pages_exports", "__name", "MetadataInstanceFactoryV4", "import_UI", "transferColumns", "config", "importParameters", "factory", "pageType", "routingId", "configId", "viewId", "_a", "_b", "_c", "_d", "_e", "_f", "schemaDefinitions", "lineItemsId", "lineItems", "columnKey", "schemaPropertyName", "DEFINITION_LINK_PREFIX", "targetAnnotation", "importSettingsOfObject", "removeEmptyStructure", "views", "log", "instance", "__name", "importActions", "tableConfig", "columnDefinitionName", "actionsDefinition", "actionKey", "actionDefinition", "definitionKey", "getDefinitionKey", "transferToolBar", "toolbarInstance", "table", "determineTargetAnnotationOfView", "definitionName", "lineItemAnnotation", "importALPViews", "chartDefinition", "chartAnnotationPath", "tableAnnotationPath", "tableDefinition", "getViewTypeByDefinition", "definition", "viewType", "importLRViews", "tableViewConfig", "properties", "sortedList", "a", "b", "element", "nextDefinition", "tableView", "addSettings", "schemaType", "createListReportConfig", "initI18n", "v4Pages", "MetadataInstanceFactoryV4", "key", "v4Page", "getPageTypeV4", "import_ux_specification_types", "import_UI", "getManifestId", "sectionId", "splitOnLt", "_a", "_b", "_c", "pathParts", "__name", "getDefinitionId", "manifestId", "fillTableColumnsInConfig", "importParameters", "manifestSection", "configPart", "factory", "manifestSectionId", "tableDefinition", "lineItems", "columnKey", "columnInConfig", "importSettingsOfObject", "fillTableActionsInConfig", "actionsDefinition", "actionKey", "actionDefinition", "definitionKey", "getDefinitionKey", "schemaPropertyName", "fillTableInConfig", "manifestSettings", "tableId", "sectionDefinition", "fillFormInConfig", "fillSectionsInConfig", "sectionProperties", "_d", "schemaSection", "tableManifestId", "DEFINITION_LINK_PREFIX", "sectionIdRef", "fillHeaderFacets", "appSchema", "objectPageConfig", "manifest", "routingId", "headerSections", "factoryKey", "sectionDefinitionKey", "fillObjectPageConfig", "v4Page", "customSections", "section", "createObjectPageConfigV4", "initI18n", "log", "instance", "v4Pages", "MetadataInstanceFactoryV4", "import_ux_specification_types", "unhandledControllers", "associations", "routesSorter", "route1", "route2", "target1", "target2", "isT1Array", "isT2Array", "__name", "resolveTarget", "target", "usedTargets", "targetParts", "usedTarget", "targetPart", "populateAssociations", "routes", "routesAssociations", "resolvedTargets", "route", "parts", "part", "prop", "determinePageType", "logger", "routingTargetId", "pageType", "log", "instance", "convertSettingsToConfig", "params", "schemaId", "generatePageId", "jsonSchema", "element", "importParameters", "createObjectPageConfigV4", "createListReportConfig", "schemaType", "determineV4PageTemplateType", "updateUnhandledControllers", "viewParts", "setVariantManagmentAndNavigation", "page", "name", "navigationRoute", "evaluateCustomPageSettings", "_a", "_b", "customPageName", "getSinglePageAndConfig", "routing", "id", "pages", "routingRoute", "conversionParameters", "getPagesAndConfigs", "message", "getHome", "routeHome", "getSettings", "_c", "_d", "getPages", "manifest", "targetName", "v4Page", "_V4AppProvider", "AppProvider", "initI18n", "appSettings", "AppSettings", "schemaFile", "getSchemaFilePath", "appSchema", "importSettingsOfObject", "V4AppProvider", "import_fs", "import_path", "import_ux_specification_types", "getPathToGenericSchema", "__name", "version", "schemaType", "directory", "fileName", "moduleRoot", "readJsonSchema", "path", "resolve", "reject", "err", "data", "getGenericSchema", "error", "getGenericSchemas", "templateType", "fioriElementsVersion", "genericSchemas", "schemaTypes", "schemaType", "schemaFile", "getSchemaFilePath", "getGenericSchema", "__name", "getAnnotationsForUi", "oDataServiceAVT", "filteredEntityTypes", "allEntityTypes", "alias", "findAlias", "entity", "LineItem", "Facets", "getEntitySetByEntitySetName", "entitySetName", "es", "generateObjectPageSchemasV2", "generateParameters", "appSchemas", "allPages", "getPages", "page", "entitySet", "log", "instance", "genericSchemaFile", "generateObjectPageSchemaV2", "generateListReportSchemasV4", "lrPages", "alpPages", "pages", "pageId", "determineV4PageTemplateType", "generateListReportSchemaV4", "generateAppSchemaV2LR", "_a", "generateListReportSchemaV2", "generateObjectPageSchemasV4", "generateObjectPageSchemaV4", "generateAppSchemasV2", "uiEntityTypes", "generateAnalyticalListReportSchemaV2", "generateOVPInterfaceV2", "generateAppSchemasV4", "generateAppSchemas", "importConfigs", "importParameters", "provider", "files", "V2AppProvider", "V4AppProvider", "V2OvpProvider", "appConfig", "pageConfigs", "app", "config", "getFileList", "schema", "configs", "schemaName", "dataSourceUri", "importProjectSchema", "importProjectParameters", "_b", "initI18n", "manifest", "annotations", "logger", "fragments", "views", "featureToggles", "DistTagEvaluator", "getVersionFromManifest", "parseAndMergeAndConvert", "getTemplateTypeFromManifest", "importProjectSchemaAndConfig", "flex", "configFiles", "ROOT_PROPERTIES_ORDER", "addFlexChangeForSection", "appSchema", "schemaSection", "property", "sectionType", "controlType", "addPatternForBindingChangeOfEnumOP", "__name", "addHeaderActionCallBackV2", "entityType", "actionAnnotation", "headerActions", "oDataServiceAVT", "item", "index", "actionName", "actionId", "namespace", "getActionNameAndId", "description", "actionDefinitionKey", "prepareRef", "convertedIdentification", "DEFINITION_LINK_PREFIX", "ensureCustomColumnDefinitionExists", "manifest", "entitySetName", "entityTypeName", "facet", "facetKey", "fragments", "suffix", "customColumnsDefinitionName", "customColumnDefinitionName", "customColumnDefinition", "pageKeys", "et", "v2Page", "findObjectPageV2", "addTableColumnExtensions", "addAppSchemaDefinition", "appSchemaSection", "mainSectionType", "addSectionReference", "sections", "key", "definitionKey", "addTableDefinition", "tableType", "facetId", "schemaId", "addEnumForSingleTabVariant", "handleLineItem", "generateParameters", "facets", "navigationProperty", "schemaIdForOpSection", "createDefaultSection", "addSectionTitleAndDescription", "customColumnDefinitionKey", "targetEntitySet", "determineEntitySetOfFacet", "facetItem", "addLineItemsType", "handleSubSection", "handleSectionChart", "handleFormSection", "getSectionType", "facetType", "isSubSection", "sectionTypeMapping", "subSectionTypeMapping", "getReferenceKey", "referenceKey", "addSection", "subSections", "floorplanSuffix", "addFieldsType", "handleForm", "handleAddressContact", "addSections", "pages", "_a", "_b", "_c", "_d", "getObjectPageFacets", "element", "customSections", "name", "addHeader", "addCommonHeaderSchema", "addHeaderActions", "addRelatedFacetKeysType", "schema", "logger", "facetSections", "getObjectPageFacetSection", "addDefinitionForRelatedFacetKeys", "generateObjectPageSchemaV2", "genericSchema", "initI18n", "additionalSections", "addFooterActions", "updatePropertyIndices", "log", "instance", "import_ux_specification_types", "ROOT_PROPERTIES_ORDER", "addEnumForVariantPaths", "entityType", "entitySet", "appSchema", "oDataServiceAVT", "addEnumForSingleTabVariant", "addEnumForMultiTabVariant", "addEnumForVariantEntitySet", "__name", "generateListReportSchemaV2", "generateParameters", "genericSchema", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "DEFINITION_LINK_PREFIX", "MULTISELECTTABLE", "INLINEDELETETABLE", "TREETABLE", "ANALYTICALTABLE", "GRIDTABLE", "responsiveTableMultiSelect", "responsiveTableInlineDelete", "treeTableDefinition", "analyticalTableDefinition", "gridTableDefinition", "lrLineItems", "lrToolBar", "log", "instance", "addStandardHeaderActions", "lineItemAnnotation", "addLineItemsType", "selectionFieldAnnotation", "addSelectionFields", "addFieldsType", "pageKeys", "v2Page", "findListReportPageV2", "addTableColumnExtensions", "updatePropertyIndices", "import_ux_specification_types", "ROOT_PROPERTIES_ORDER", "generateAnalyticalListReportSchemaV2", "generateParameters", "genericSchema", "_a", "_b", "_c", "_d", "_e", "_f", "appSchema", "DEFINITION_LINK_PREFIX", "tableDefinitionResponsive", "tableDefinitionGrid", "tableDefinitionAnalytical", "removeElementsFromEnum", "entityType", "log", "instance", "addStandardHeaderActions", "lineItemAnnotation", "addLineItemsType", "selectionFieldAnnotation", "addSelectionFields", "addFieldsType", "pageKeys", "v2Page", "findAnalyticalListPage", "addTableColumnExtensions", "addEnumForVariantPaths", "updatePropertyIndices", "__name", "getCardDefinitionNames", "genericSchema", "properties", "cardProperty", "refParts", "__name", "addModelsEnum", "appSchema", "manifest", "dataSources", "serviceKeys", "models", "enumValues", "model", "definition", "addEnumToSchema", "cards", "card", "property", "DEFINITION_LINK_PREFIX", "generateOverviewPageSchemaV2", "import_ux_specification_types", "prepareGenerationV2", "annotations", "logger", "manifest", "fragments", "entitySet", "templateType", "initI18n", "serviceAVT", "parseAndMergeAndConvert", "generateParameters", "getEntitySetByEntitySetName", "log", "instance", "__name", "generateObjectPageInterfaceV2", "genericSchema", "generateObjectPageSchemaV2", "generateListReportInterfaceV2", "generateListReportSchemaV2", "generateAnalyticalListPageInterfaceV2", "generateAnalyticalListReportSchemaV2", "generateOVPInterfaceV2", "generateOverviewPageSchemaV2", "import_lodash", "import_ajv", "import_ux_specification_types", "getDefaultExportResult", "__name", "fragmentFiles", "getClassesForSingleSection", "currentSection", "sectionId", "factory", "index", "getSubsectionClasses", "subSection", "subSectionId", "getExportClassesForSections", "objectPageConfig", "objectPage", "section", "exportListReportPage", "exportParameters", "ui5Version", "listReportConfig", "entitySet", "exportResults", "MetadataInstanceFactoryV2", "listReport", "pageLayoutInformation", "getPageLayoutInformation", "baseId", "pageKeys", "v2Page", "findListReportPageV2", "log", "instance", "transferParameters", "transferManifestEntriesAndFlexChange", "exportAnalyticalListPage", "analyticalListPageConfig", "analyticalListPage", "findAnalyticalListPage", "exportObjectPage", "findObjectPageV2", "exportOverviewPage", "_a", "overviewPage", "validate", "Ajv", "err", "additionalProperty", "_unset", "transferManifestEntriesOVP", "exportApplicationV2", "application", "manifest", "jsonSchema", "applicationV2", "ApplicationV2", "AppSettings", "key", "syncRule", "getReflectMetadata", "path", "manifestSection", "ensureManifestSectionByPathV2", "manifestPages", "transformPageToNewManifestV2", "exportPageV2", "exportParametersV2", "import_ux_specification_types", "createRoute", "__name", "pattern", "name", "target", "createTargetOption", "entitySet", "variantManagement", "initializeRouting", "manifestRouting", "routing", "setTargetOptions", "keyInManifest", "navigationEntry", "calculateQueryPattern", "parts", "targetPage", "parentKeys", "part", "index", "key", "fillNavigationParts", "navKey", "pages", "pageId", "referringPage", "pageKey", "fillParentKeys", "parentPattern", "result", "patternParts", "entity", "keyName", "handlePageNavigation", "page", "navPage", "routingRoute", "removeDeletedPages", "id", "route", "transferEntitySet", "_a", "_b", "deleteRemovedCustomSections", "_c", "_d", "_e", "manifestSections", "objectPage", "latestIds", "section", "existingIds", "updateRoute", "fillTarget", "transformRoutingV4", "homePage", "manifest", "import_ux_specification_types", "updateDependencyLib", "manifest", "name", "add", "__name", "extractLastIdPart", "longId", "lastIdPart", "navPart", "fclAggregations", "applyFCLRouting", "__name", "manifestUI5", "app", "pageName", "targetPages", "level", "_a", "routeOfPage", "route", "target", "page", "pattern", "pageId", "enableFcl", "rootView", "updateDependencyLib", "disableFcl", "sapui5", "routes", "updateFcl", "import_ux_specification_types", "import_UI", "defaultExportResult", "exportFlexChange", "syncRule", "transferParameters", "ids", "breadcrumbs", "configObject", "key", "controlId", "flexChange", "fillFlexChangeContent", "__name", "determineTargetAnnotationOfTable", "_a", "_b", "_c", "targetAnnotationEncoded", "targetAnnotation", "annotationPath", "annoPath", "annotationPathArray", "determineTargetAnnotationOfChart", "determineTargetAnnotationOfViews", "parentDefinition", "ownDefinitionName", "DEFINITION_LINK_PREFIX", "ownDefinition", "annotation", "determineTargetAnnotationOfSections", "custom", "sectionId", "extractLastIdPart", "determineTargetAnnotation", "determineKeyForSyncRule", "idIndex", "index", "element", "createNewObjectInManifest", "params", "transferPropertyToManifest", "propertyDefinition", "nextDefinition", "exportManifestChange", "configPropertyKey", "syncRuleKey", "path", "manifestSection", "getManifestSectionByPathV4", "manifestKey", "exportParams", "deleteHandler", "deleteEmptyStructure", "evaluateExportRule", "getReflectMetadata", "transferSubObject", "parameters", "currentConfigObject", "localIdParts", "objects", "isArray", "innerObject", "additionalIds", "transferManifestEntriesAndFlexChange", "createALPTableView", "newElementCreated", "getSettingsPathForPage", "views", "createALPChartView", "createLRTableView", "newEntry", "existingIndex", "view", "savedContent", "createNewElement", "definitionName", "preprocessed", "stopProcessing", "transferSortedListEntry", "parentIds", "stableIdParts", "childId", "getChildId", "getNextTargetDefinition", "transferConfigEntriesWithAnyOfDefinitions", "transferEntryParameters", "anyOfDefinitions", "schemaDefinition", "configEntries", "a", "b", "configEntry", "anyOfDefinition", "sortedList", "getClassesForSingleSection", "objectPageConfig", "factory", "customSections", "getSubsectionClasses", "section", "subSection", "subSectionId", "getExportClassesForSections", "objectPage", "exportObjectPage", "exportParameters", "ui5Version", "exportResults", "MetadataInstanceFactoryV4", "pageLayoutInformation", "getPageLayoutInformation", "pageName", "baseId", "exportListPage", "config", "pageType", "templateType", "appSchema", "tableDefinition", "tableDefinitionName", "appSchemaActions", "actionKey", "exportListReportPage", "listReport", "exportAnalyticalListPage", "exportApplicationV4", "application", "manifest", "applicationV4", "ApplicationV4", "AppSettings", "transformRoutingV4", "updateFcl", "exportPageV4", "exportParametersV4", "jsonSchema", "generateSchema", "generateParameters", "schema", "v2Params", "genericSchema", "entitySet", "annotations", "manifest", "fragments", "logger", "generateListReportInterfaceV2", "generateObjectPageInterfaceV2", "generateOVPInterfaceV2", "generateAnalyticalListPageInterfaceV2", "v4Params", "generateListReportInterfaceV4", "generateObjectPageInterfaceV4", "generateFreestyleInterfaceV4", "__name", "exportConfig", "exportParameters", "exportResults", "ui5Config", "exportPageV2", "exportPageV4", "importConfig", "importParameters", "config", "createListReportConfig", "createObjectPageConfigV2", "createOverviewPageConfig", "createAnalyticalListPageConfig", "createObjectPageConfigV4", "importProject", "importProjectSchemaAndConfig", "importProjectSchema", "getApiVersion", "import_path", "import_fs", "readFile", "__name", "path", "resolve", "reject", "readFileFs", "err", "data", "readJSON", "readDirectory", "isDirectory", "stats", "resourceExists", "doesExist", "getManifest", "getChanges", "webapp", "changes", "changesDirectory", "extensions", "files", "file", "ext", "getFragments", "webAppPath", "fragments", "directoryPath", "filePath", "getAnnotations", "manifest", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "_h", "annotationData", "serviceDataSources", "metadataPath", "annotationRef", "annotationFilePath", "key", "dataSource", "getProject", "root", "name", "webappPath", "annotations", "__reExport", "src_exports"]
}
